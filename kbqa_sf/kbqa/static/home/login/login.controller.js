!function(){"use strict";function e(i,n,o,e){var t=this;t.credential={username:"",password:"",identifyCode:""},t.login=function(){if(""==t.credential.username)return $.notifyWarning("请输入用户名！"),void $("#txt_Username").focus();if(""==t.credential.password)return $.notifyWarning("请输入登录密码！"),void $("#txt_Password").focus();if(""==t.credential.identifyCode)return $.notifyWarning("请输入验证码！"),void $("#txt_VerifyCode").focus();e.one("system/verification/code/verify/",t.credential.identifyCode).put().then(function(e){if(!e.passed)return $.notifyError("验证码输入错误！"),void $("#txt_VerifyCode").focus();n.authenticate(t.credential.username,t.credential.password).then(function(){var e=i.state(),n=i.params(),t=Object.assign({},i.options(),{reload:!0});"app.login.**"==e.name?o.go("app.dashboard",{},{reload:!0}):o.go(e,n,t)})})},$(document).keydown(function(e){13==e.keyCode&&t.login()}),t.changeVerifyCode=function(){$("#identifyCodeImg").attr("src","/api/system/verification/code/generator?timestamp="+(new Date).valueOf())}}angular.module("app.login").controller("LoginController",e),e.$inject=["returnToState","authService","$state","Restangular"]}();