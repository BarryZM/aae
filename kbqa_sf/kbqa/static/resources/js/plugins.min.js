var currentUserVisitPrivileges=[],currentUserOperationPrivileges=[];function pagination(e,t,i){var n=(e-1)*t;return n+t>=i.length?i.slice(n,i.length):i.slice(n,n+t)}window.UEDITOR_HOME_URL="/resources/js/plugins/ueditor/",String.prototype.ReplaceAll=function(e,t){return RegExp.prototype.isPrototypeOf(e)?this.replace(e,t):this.replace(new RegExp(e,"g"),t)},function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?e(require("jquery")):e(jQuery)}(function(a){var n={element:"body",position:null,type:"info",allow_dismiss:!0,newest_on_top:!1,showProgressbar:!1,placement:{from:"top",align:"right"},offset:20,spacing:10,z_index:1031,delay:5e3,timer:1e3,url_target:"_blank",mouse_over:null,animate:{enter:"animated fadeInDown",exit:"animated fadeOutUp"},onShow:null,onShown:null,onClose:null,onClosed:null,icon_type:"class",template:'<div data-notify="container" class="col-xs-11 col-sm-4 alert alert-{0}" role="alert"><button type="button" aria-hidden="true" class="close" data-notify="dismiss">&times;</button><span data-notify="icon"></span> <span data-notify="title">{1}</span> <span data-notify="message">{2}</span><div class="progress" data-notify="progressbar"><div class="progress-bar progress-bar-{0}" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: 0%;"></div></div><a href="{3}" target="{4}" data-notify="url"></a></div>'};function i(e,t,i){t={content:{message:"object"==typeof t?t.message:t,title:t.title?t.title:"",icon:t.icon?t.icon:"",url:t.url?t.url:"#",target:t.target?t.target:"-"}};i=a.extend(!0,{},t,i),this.settings=a.extend(!0,{},n,i),this._defaults=n,"-"==this.settings.content.target&&(this.settings.content.target=this.settings.url_target),this.animations={start:"webkitAnimationStart oanimationstart MSAnimationStart animationstart",end:"webkitAnimationEnd oanimationend MSAnimationEnd animationend"},"number"==typeof this.settings.offset&&(this.settings.offset={x:this.settings.offset,y:this.settings.offset}),this.init()}String.format=function(){for(var e=arguments[0],t=1;t<arguments.length;t++)e=e.replace(RegExp("\\{"+(t-1)+"\\}","gm"),arguments[t]);return e},a.extend(i.prototype,{init:function(){var r=this;this.buildNotify(),this.settings.content.icon&&this.setIcon(),"#"!=this.settings.content.url&&this.styleURL(),this.styleDismiss(),this.placement(),this.bind(),this.notify={$ele:this.$ele,update:function(e,t){var i={};for(var e in"string"==typeof e?i[e]=t:i=e,i)switch(e){case"type":this.$ele.removeClass("alert-"+r.settings.type),this.$ele.find('[data-notify="progressbar"] > .progress-bar').removeClass("progress-bar-"+r.settings.type),r.settings.type=i[e],this.$ele.addClass("alert-"+i[e]).find('[data-notify="progressbar"] > .progress-bar').addClass("progress-bar-"+i[e]);break;case"icon":var n=this.$ele.find('[data-notify="icon"]');"class"==r.settings.icon_type.toLowerCase()?n.removeClass(r.settings.content.icon).addClass(i[e]):(n.is("img")||n.find("img"),n.attr("src",i[e]));break;case"progress":var o=r.settings.delay-r.settings.delay*(i[e]/100);this.$ele.data("notify-delay",o),this.$ele.find('[data-notify="progressbar"] > div').attr("aria-valuenow",i[e]).css("width",i[e]+"%");break;case"url":this.$ele.find('[data-notify="url"]').attr("href",i[e]);break;case"target":this.$ele.find('[data-notify="url"]').attr("target",i[e]);break;default:this.$ele.find('[data-notify="'+e+'"]').html(i[e])}var a=this.$ele.outerHeight()+parseInt(r.settings.spacing)+parseInt(r.settings.offset.y);r.reposition(a)},close:function(){r.close()}}},buildNotify:function(){var e=this.settings.content;this.$ele=a(String.format(this.settings.template,this.settings.type,e.title,e.message,e.url,e.target)),this.$ele.attr("data-notify-position",this.settings.placement.from+"-"+this.settings.placement.align),this.settings.allow_dismiss||this.$ele.find('[data-notify="dismiss"]').css("display","none"),(this.settings.delay<=0&&!this.settings.showProgressbar||!this.settings.showProgressbar)&&this.$ele.find('[data-notify="progressbar"]').remove()},setIcon:function(){"class"==this.settings.icon_type.toLowerCase()?this.$ele.find('[data-notify="icon"]').addClass(this.settings.content.icon):this.$ele.find('[data-notify="icon"]').is("img")?this.$ele.find('[data-notify="icon"]').attr("src",this.settings.content.icon):this.$ele.find('[data-notify="icon"]').append('<img src="'+this.settings.content.icon+'" alt="Notify Icon" />')},styleDismiss:function(){this.$ele.find('[data-notify="dismiss"]').css({position:"absolute",right:"10px",top:"5px",zIndex:this.settings.z_index+2})},styleURL:function(){this.$ele.find('[data-notify="url"]').css({backgroundImage:"url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)",height:"100%",left:"0px",position:"absolute",top:"0px",width:"100%",zIndex:this.settings.z_index+1})},placement:function(){var i=this,e=this.settings.offset.y,t={display:"inline-block",margin:"0px auto",position:this.settings.position?this.settings.position:"body"===this.settings.element?"fixed":"absolute",transition:"all .5s ease-in-out",zIndex:this.settings.z_index},n=!1,o=this.settings;switch(a('[data-notify-position="'+this.settings.placement.from+"-"+this.settings.placement.align+'"]:not([data-closing="true"])').each(function(){return e=Math.max(e,parseInt(a(this).css(o.placement.from))+parseInt(a(this).outerHeight())+parseInt(o.spacing))}),1==this.settings.newest_on_top&&(e=this.settings.offset.y),t[this.settings.placement.from]=e+"px",this.settings.placement.align){case"left":case"right":t[this.settings.placement.align]=this.settings.offset.x+"px";break;case"center":t.left=0,t.right=0}this.$ele.css(t).addClass(this.settings.animate.enter),a.each(Array("webkit-","moz-","o-","ms-",""),function(e,t){i.$ele[0].style[t+"AnimationIterationCount"]=1}),a(this.settings.element).append(this.$ele),1==this.settings.newest_on_top&&(e=parseInt(e)+parseInt(this.settings.spacing)+this.$ele.outerHeight(),this.reposition(e)),a.isFunction(i.settings.onShow)&&i.settings.onShow.call(this.$ele),this.$ele.one(this.animations.start,function(e){n=!0}).one(this.animations.end,function(e){a.isFunction(i.settings.onShown)&&i.settings.onShown.call(this)}),setTimeout(function(){n||a.isFunction(i.settings.onShown)&&i.settings.onShown.call(this)},600)},bind:function(){var i=this;if(this.$ele.find('[data-notify="dismiss"]').on("click",function(){i.close()}),this.$ele.mouseover(function(e){a(this).data("data-hover","true")}).mouseout(function(e){a(this).data("data-hover","false")}),this.$ele.data("data-hover","false"),0<this.settings.delay){i.$ele.data("notify-delay",i.settings.delay);var n=setInterval(function(){var e=parseInt(i.$ele.data("notify-delay"))-i.settings.timer;if("false"===i.$ele.data("data-hover")&&"pause"==i.settings.mouse_over||"pause"!=i.settings.mouse_over){var t=(i.settings.delay-e)/i.settings.delay*100;i.$ele.data("notify-delay",e),i.$ele.find('[data-notify="progressbar"] > div').attr("aria-valuenow",t).css("width",t+"%")}e<=-i.settings.timer&&(clearInterval(n),i.close())},i.settings.timer)}},close:function(){var t=this,e=parseInt(this.$ele.css(this.settings.placement.from)),i=!1;this.$ele.data("closing","true").addClass(this.settings.animate.exit),t.reposition(e),a.isFunction(t.settings.onClose)&&t.settings.onClose.call(this.$ele),this.$ele.one(this.animations.start,function(e){i=!0}).one(this.animations.end,function(e){a(this).remove(),a.isFunction(t.settings.onClosed)&&t.settings.onClosed.call(this)}),setTimeout(function(){i||(t.$ele.remove(),t.settings.onClosed&&t.settings.onClosed(t.$ele))},600)},reposition:function(e){var t=this,i='[data-notify-position="'+this.settings.placement.from+"-"+this.settings.placement.align+'"]:not([data-closing="true"])',n=this.$ele.nextAll(i);1==this.settings.newest_on_top&&(n=this.$ele.prevAll(i)),n.each(function(){a(this).css(t.settings.placement.from,e),e=parseInt(e)+parseInt(t.settings.spacing)+a(this).outerHeight()})}}),a.notify=function(e,t){return new i(this,e,t).notify},a.notifyDefaults=function(e){return n=a.extend(!0,{},n,e)},a.notifyClose=function(e){void 0===e||"all"==e?a("[data-notify]").find('[data-notify="dismiss"]').trigger("click"):a('[data-notify-position="'+e+'"]').find('[data-notify="dismiss"]').trigger("click")}}),function(f){function u(e,t,i){function n(){e.$on("$locationChangeStart",function(e){t.$_blockLocationChange&&0<t.state().blockCount&&e.preventDefault()}),e.$on("$locationChangeSuccess",function(){t.$_blockLocationChange=i.blockBrowserNavigation})}if(i.blockBrowserNavigation)if(function(e){try{f.module(e)}catch(e){return!1}return!0}("ngRoute"))var o=e.$on("$viewContentLoaded",function(){o(),n()});else n()}var e=f.module("blockUI",[]);e.config(["$provide","$httpProvider",function(e,t){e.decorator("$exceptionHandler",["$delegate","$injector",function(i,n){var o,a;return function(t,e){if((a=a||n.get("blockUIConfig")).resetOnException)try{(o=o||n.get("blockUI")).instances.reset()}catch(e){console.log("$exceptionHandler",t)}i(t,e)}}]),t.interceptors.push("blockUIHttpInterceptor")}]),e.run(["$document","blockUIConfig","$templateCache",function(e,t,i){t.autoInjectBodyBlock&&e.find("body").attr("block-ui","main"),t.template&&(t.templateUrl="$$block-ui-template$$",i.put(t.templateUrl,t.template))}]),e.config(["$provide",function(e){e.decorator("$location",t)}]);var t=["$delegate","blockUI","blockUIConfig",function(i,n,e){if(e.blockBrowserNavigation){n.$_blockLocationChange=!0;f.forEach(["url","path","search","hash","state"],function(e){var t=i[e];i[e]=function(){var e=t.apply(i,arguments);return e===i&&(n.$_blockLocationChange=!1),e}})}return i}];e.directive("blockUiContainer",["blockUIConfig","blockUiContainerLinkFn",function(e,t){return{scope:!0,restrict:"A",templateUrl:e.templateUrl,compile:function(){return t}}}]).factory("blockUiContainerLinkFn",["blockUI","blockUIUtils",function(){return function(e,t){var i=t.inheritedData("block-ui");if(!i)throw new Error("No parent block-ui service instance located.");e.state=i.state()}}]),e.directive("blockUi",["blockUiCompileFn",function(e){return{scope:!0,restrict:"A",compile:e}}]).factory("blockUiCompileFn",["blockUiPreLinkFn",function(t){return function(e){return e.append('<div block-ui-container class="block-ui-container"></div>'),{pre:t}}}]).factory("blockUiPreLinkFn",["blockUI","blockUIUtils","blockUIConfig",function(l,d,c){return function(t,i,e){i.hasClass("block-ui")||i.addClass(c.cssClass),e.$observe("blockUiMessageClass",function(e){t.$_blockUiMessageClass=e});var n=e.blockUi||"_"+t.$id,o=l.instances.get(n);if("main"===n)u(t,o,c);else{var a=i.inheritedData("block-ui");a&&(o._parent=a)}t.$on("$destroy",function(){o.release()}),o.addRef(),t.$_blockUiState=o.state(),t.$watch("$_blockUiState.blocking",function(e){i.attr("aria-busy",!!e),i.toggleClass("block-ui-visible",!!e)}),t.$watch("$_blockUiState.blockCount > 0",function(e){i.toggleClass("block-ui-active",!!e)});var r=e.blockUiPattern;if(r){var s=d.buildRegExp(r);o.pattern(s)}i.data("block-ui",o)}}]),e.constant("blockUIConfig",{templateUrl:"angular-block-ui/angular-block-ui.ng.html",delay:250,message:"Loading ...",autoBlock:!0,resetOnException:!0,requestFilter:f.noop,autoInjectBodyBlock:!0,cssClass:"block-ui block-ui-anim-fade",blockBrowserNavigation:!1}),e.factory("blockUIHttpInterceptor",["$q","$injector","blockUIConfig","$templateCache",function(t,e,i,n){function o(){s=s||e.get("blockUI")}function a(e){i.autoBlock&&e&&!e.$_noBlock&&e.$_blocks&&(o(),e.$_blocks.stop())}function r(e){try{a(e.config)}catch(e){console.log("httpRequestError",e)}return t.reject(e)}var s;return{request:function(e){if(i.autoBlock&&("GET"!=e.method||!n.get(e.url))){var t=i.requestFilter(e);!1===t?e.$_noBlock=!0:(o(),e.$_blocks=s.instances.locate(e),e.$_blocks.start(t))}return e},requestError:r,response:function(e){return e&&a(e.config),e},responseError:r}}]),e.factory("blockUI",["blockUIConfig","$timeout","blockUIUtils","$document",function(r,s,l,d){function i(e){var n,o=this,a={id:e,blockCount:0,message:r.message,blocking:!1},i=[];this._id=e,this._refs=0,this.start=function(t){function e(){n=null,a.blocking=!0}t=t||{},f.isString(t)?t={message:t}:f.forEach(u,function(e){if(t[e])throw new Error("The property "+e+" is reserved for the block state.")}),f.extend(a,t),a.message=0<a.blockCount?t.message||a.message||r.message:t.message||r.message,a.blockCount++;var i=f.element(d[0].activeElement);i.length&&l.isElementInBlockScope(i,o)&&(o._restoreFocus=i[0],s(function(){o._restoreFocus&&o._restoreFocus!==c[0]&&o._restoreFocus.blur()})),n||0===r.delay?0===r.delay&&e():n=s(e,r.delay)},this._cancelStartTimeout=function(){n&&(s.cancel(n),n=null)},this.stop=function(){a.blockCount=Math.max(0,--a.blockCount),0===a.blockCount&&o.reset(!0)},this.isBlocking=function(){return a.blocking},this.message=function(e){a.message=e},this.pattern=function(e){return void 0!==e&&(o._pattern=e),o._pattern},this.reset=function(e){if(o._cancelStartTimeout(),a.blockCount=0,a.blocking=!1,o._restoreFocus&&(!d[0].activeElement||d[0].activeElement===c[0])){try{o._restoreFocus.focus()}catch(e){t=o._restoreFocus,s(function(){if(t)try{t.focus()}catch(e){}},100)}o._restoreFocus=null}var t;try{e&&f.forEach(i,function(e){e()})}finally{i.length=0}},this.done=function(e){i.push(e)},this.state=function(){return a},this.addRef=function(){o._refs+=1},this.release=function(){--o._refs<=0&&h.instances._destroy(o)}}var c=d.find("body"),u=["id","blockCount","blocking"],a=[];a.get=function(e){if(!isNaN(e))throw new Error("BlockUI id cannot be a number");var t=a[e];return t||(t=a[e]=new i(e),a.push(t)),t},a._destroy=function(e){if(f.isString(e)&&(e=a[e]),e){e.reset();var t=l.indexOf(a,e);a.splice(t,1),delete a[e.state().id]}},a.locate=function(e){var t=[];l.forEachFnHook(t,"start"),l.forEachFnHook(t,"stop");for(var i=a.length;i--;){var n=a[i],o=n._pattern;o&&o.test(e.url)&&t.push(n)}return 0===t.length&&t.push(h),t},l.forEachFnHook(a,"reset");var h=a.get("main");return h.addRef(),h.instances=a,h}]),e.factory("blockUIUtils",function(){var r=f.element,s={buildRegExp:function(e){var t=e.match(/^\/(.*)\/([gim]*)$/);if(!t)throw Error("Incorrect regular expression format: "+e);return new RegExp(t[1],t[2])},forEachFn:function(e,t,i){for(var n=e.length;n--;){var o=e[n];o[t].apply(o,i)}},forEachFnHook:function(e,t){e[t]=function(){s.forEachFn(this,t,arguments)}},isElementInBlockScope:function(e,t){for(var i=e.inheritedData("block-ui");i;){if(i===t)return!0;i=i._parent}return!1},findElement:function(e,t,i){var n=null;if(t(e))n=e;else for(var o,a=(o=i?e.parent():e.children()).length;!n&&a--;)n=s.findElement(r(o[a]),t,i);return n},indexOf:function(e,t,i){for(var n=i||0,o=e.length;n<o;n++)if(e[n]===t)return n;return-1}};return s}),f.module("blockUI").run(["$templateCache",function(e){e.put("angular-block-ui/angular-block-ui.ng.html",'<div class="block-ui-overlay"></div><div class="block-ui-message-container" aria-live="assertive" aria-atomic="true"><div class="block-ui-message" ng-class="$_blockUiMessageClass">{{ state.message }}</div></div>')}])}(angular),function(e,t){void 0===e&&void 0!==window&&(e=window),"function"==typeof define&&define.amd?define(["jquery"],function(e){return t(e)}):"object"==typeof module&&module.exports?module.exports=t(require("jquery")):t(e.jQuery)}(this,function(e){!function(W){"use strict";var e,d,t,i=document.createElement("_");if(i.classList.toggle("c3",!1),i.classList.contains("c3")){var n=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(e,t){return 1 in arguments&&!this.contains(e)==!t?t:n.call(this,e)}}function T(e){var t,i=[],n=e&&e.options;if(e.multiple)for(var o=0,a=n.length;o<a;o++)(t=n[o]).selected&&i.push(t.value||t.text);else i=e.value;return i}String.prototype.startsWith||(e=function(){try{var e={},t=Object.defineProperty,i=t(e,e,e)&&t}catch(e){}return i}(),d={}.toString,t=function(e){if(null==this)throw new TypeError;var t=String(this);if(e&&"[object RegExp]"==d.call(e))throw new TypeError;var i=t.length,n=String(e),o=n.length,a=1<arguments.length?arguments[1]:void 0,r=a?Number(a):0;r!=r&&(r=0);var s=Math.min(Math.max(r,0),i);if(i<o+s)return!1;for(var l=-1;++l<o;)if(t.charCodeAt(s+l)!=n.charCodeAt(l))return!1;return!0},e?e(String.prototype,"startsWith",{value:t,configurable:!0,writable:!0}):String.prototype.startsWith=t),Object.keys||(Object.keys=function(e,t,i){for(t in i=[],e)i.hasOwnProperty.call(e,t)&&i.push(t);return i});var o={useDefault:!1,_set:W.valHooks.select.set};W.valHooks.select.set=function(e,t){return t&&!o.useDefault&&W(e).data("selected",!0),o._set.apply(this,arguments)};var k=null,a=function(){try{return new Event("change"),!0}catch(e){return!1}}();function C(e,t,i,n){for(var o=["content","subtext","tokens"],a=!1,r=0;r<o.length;r++){var s=o[r],l=e[s];if(l&&(l=l.toString(),"content"===s&&(l=l.replace(/<[^>]+>/g,"")),n&&(l=c(l)),l=l.toUpperCase(),a="contains"===i?0<=l.indexOf(t):l.startsWith(t)))break}return a}function E(e){return parseInt(e,10)||0}function c(e){return W.each([{re:/[\xC0-\xC6]/g,ch:"A"},{re:/[\xE0-\xE6]/g,ch:"a"},{re:/[\xC8-\xCB]/g,ch:"E"},{re:/[\xE8-\xEB]/g,ch:"e"},{re:/[\xCC-\xCF]/g,ch:"I"},{re:/[\xEC-\xEF]/g,ch:"i"},{re:/[\xD2-\xD6]/g,ch:"O"},{re:/[\xF2-\xF6]/g,ch:"o"},{re:/[\xD9-\xDC]/g,ch:"U"},{re:/[\xF9-\xFC]/g,ch:"u"},{re:/[\xC7-\xE7]/g,ch:"c"},{re:/[\xD1]/g,ch:"N"},{re:/[\xF1]/g,ch:"n"}],function(){e=e?e.replace(this.re,this.ch):""}),e}W.fn.triggerNative=function(e){var t,i=this[0];i.dispatchEvent?(a?t=new Event(e,{bubbles:!0}):(t=document.createEvent("Event")).initEvent(e,!0,!1),i.dispatchEvent(t)):i.fireEvent?((t=document.createEventObject()).eventType=e,i.fireEvent("on"+e,t)):this.trigger(e)};var r=function(t){var i=function(e){return t[e]},e="(?:"+Object.keys(t).join("|")+")",n=RegExp(e),o=RegExp(e,"g");return function(e){return e=null==e?"":""+e,n.test(e)?e.replace(o,i):e}},$=r({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"}),p=r({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#x27;":"'","&#x60;":"`"}),S={32:" ",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",65:"A",66:"B",67:"C",68:"D",69:"E",70:"F",71:"G",72:"H",73:"I",74:"J",75:"K",76:"L",77:"M",78:"N",79:"O",80:"P",81:"Q",82:"R",83:"S",84:"T",85:"U",86:"V",87:"W",88:"X",89:"Y",90:"Z",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9"},I=27,N=13,M=32,D=9,A=38,L=40,G={success:!1,major:"3"};try{G.full=(W.fn.dropdown.Constructor.VERSION||"").split(" ")[0].split("."),G.major=G.full[0],G.success=!0}catch(e){console.warn("There was an issue retrieving Bootstrap's version. Ensure Bootstrap is being loaded before bootstrap-select and there is no namespace collision. If loading Bootstrap asynchronously, the version may need to be manually specified via $.fn.selectpicker.Constructor.BootstrapVersion.",e)}var Y={DISABLED:"disabled",DIVIDER:"divider",SHOW:"open",DROPUP:"dropup",MENU:"dropdown-menu",MENURIGHT:"dropdown-menu-right",MENULEFT:"dropdown-menu-left",BUTTONCLASS:"btn-default",POPOVERHEADER:"popover-title"},P={MENU:"."+Y.MENU};"4"===G.major&&(Y.DIVIDER="dropdown-divider",Y.SHOW="show",Y.BUTTONCLASS="btn-light",Y.POPOVERHEADER="popover-header");var R=new RegExp(A+"|"+L),U=new RegExp("^"+D+"$|"+I),l=(new RegExp(N+"|"+M),function(e,t){var i=this;o.useDefault||(W.valHooks.select.set=o._set,o.useDefault=!0),this.$element=W(e),this.$newElement=null,this.$button=null,this.$menu=null,this.options=t,this.selectpicker={main:{map:{newIndex:{},originalIndex:{}}},current:{map:{}},search:{map:{}},view:{},keydown:{keyHistory:"",resetKeyHistory:{start:function(){return setTimeout(function(){i.selectpicker.keydown.keyHistory=""},800)}}}},null===this.options.title&&(this.options.title=this.$element.attr("title"));var n=this.options.windowPadding;"number"==typeof n&&(this.options.windowPadding=[n,n,n,n]),this.val=l.prototype.val,this.render=l.prototype.render,this.refresh=l.prototype.refresh,this.setStyle=l.prototype.setStyle,this.selectAll=l.prototype.selectAll,this.deselectAll=l.prototype.deselectAll,this.destroy=l.prototype.destroy,this.remove=l.prototype.remove,this.show=l.prototype.show,this.hide=l.prototype.hide,this.init()});function s(e){var a,r=arguments,s=e;if([].shift.apply(r),!G.success){try{G.full=(W.fn.dropdown.Constructor.VERSION||"").split(" ")[0].split(".")}catch(e){G.full=l.BootstrapVersion.split(" ")[0].split(".")}G.major=G.full[0],G.success=!0,"4"===G.major&&(Y.DIVIDER="dropdown-divider",Y.SHOW="show",Y.BUTTONCLASS="btn-light",l.DEFAULTS.style=Y.BUTTONCLASS="btn-light",Y.POPOVERHEADER="popover-header")}var t=this.each(function(){var e=W(this);if(e.is("select")){var t=e.data("selectpicker"),i="object"==typeof s&&s;if(t){if(i)for(var n in i)i.hasOwnProperty(n)&&(t.options[n]=i[n])}else{var o=W.extend({},l.DEFAULTS,W.fn.selectpicker.defaults||{},e.data(),i);o.template=W.extend({},l.DEFAULTS.template,W.fn.selectpicker.defaults?W.fn.selectpicker.defaults.template:{},e.data().template,i.template),e.data("selectpicker",t=new l(this,o))}"string"==typeof s&&(a=t[s]instanceof Function?t[s].apply(t,r):t.options[s])}});return void 0!==a?a:t}l.VERSION="1.13.3",l.BootstrapVersion=G.major,l.DEFAULTS={noneSelectedText:"Nothing selected",noneResultsText:"No results matched {0}",countSelectedText:function(e,t){return 1==e?"{0} item selected":"{0} items selected"},maxOptionsText:function(e,t){return[1==e?"Limit reached ({n} item max)":"Limit reached ({n} items max)",1==t?"Group limit reached ({n} item max)":"Group limit reached ({n} items max)"]},selectAllText:"Select All",deselectAllText:"Deselect All",doneButton:!1,doneButtonText:"Close",multipleSeparator:", ",styleBase:"btn",style:Y.BUTTONCLASS,size:"auto",title:null,selectedTextFormat:"values",width:!1,container:!1,hideDisabled:!1,showSubtext:!1,showIcon:!0,showContent:!0,dropupAuto:!0,header:!1,liveSearch:!1,liveSearchPlaceholder:null,liveSearchNormalize:!1,liveSearchStyle:"contains",actionsBox:!1,iconBase:"glyphicon",tickIcon:"glyphicon-ok",showTick:!1,template:{caret:'<span class="caret"></span>'},maxOptions:!1,mobile:!1,selectOnTab:!1,dropdownAlignRight:!1,windowPadding:0,virtualScroll:600,display:!1},"4"===G.major&&(l.DEFAULTS.style="btn-light",l.DEFAULTS.iconBase="",l.DEFAULTS.tickIcon="bs-ok-default"),l.prototype={constructor:l,init:function(){var i=this,e=this.$element.attr("id");this.$element.addClass("bs-select-hidden"),this.multiple=this.$element.prop("multiple"),this.autofocus=this.$element.prop("autofocus"),this.$newElement=this.createDropdown(),this.createLi(),this.$element.after(this.$newElement).prependTo(this.$newElement),this.$button=this.$newElement.children("button"),this.$menu=this.$newElement.children(P.MENU),this.$menuInner=this.$menu.children(".inner"),this.$searchbox=this.$menu.find("input"),this.$element.removeClass("bs-select-hidden"),!0===this.options.dropdownAlignRight&&this.$menu.addClass(Y.MENURIGHT),void 0!==e&&this.$button.attr("data-id",e),this.checkDisabled(),this.clickListener(),this.options.liveSearch&&this.liveSearchListener(),this.render(),this.setStyle(),this.setWidth(),this.options.container?this.selectPosition():this.$element.on("hide.bs.select",function(){if(i.isVirtual()){var e=i.$menuInner[0],t=e.firstChild.cloneNode(!1);e.replaceChild(t,e.firstChild),e.scrollTop=0}}),this.$menu.data("this",this),this.$newElement.data("this",this),this.options.mobile&&this.mobile(),this.$newElement.on({"hide.bs.dropdown":function(e){i.$menuInner.attr("aria-expanded",!1),i.$element.trigger("hide.bs.select",e)},"hidden.bs.dropdown":function(e){i.$element.trigger("hidden.bs.select",e)},"show.bs.dropdown":function(e){i.$menuInner.attr("aria-expanded",!0),i.$element.trigger("show.bs.select",e)},"shown.bs.dropdown":function(e){i.$element.trigger("shown.bs.select",e)}}),i.$element[0].hasAttribute("required")&&this.$element.on("invalid",function(){i.$button.addClass("bs-invalid"),i.$element.on({"shown.bs.select.invalid":function(){i.$element.val(i.$element.val()).off("shown.bs.select.invalid")},"rendered.bs.select":function(){this.validity.valid&&i.$button.removeClass("bs-invalid"),i.$element.off("rendered.bs.select")}}),i.$button.on("blur.bs.select",function(){i.$element.focus().blur(),i.$button.off("blur.bs.select")})}),setTimeout(function(){i.$element.trigger("loaded.bs.select")})},createDropdown:function(){var e,t=this.multiple||this.options.showTick?" show-tick":"",i=this.autofocus?" autofocus":"",n="",o="",a="",r="";return this.options.header&&(n='<div class="'+Y.POPOVERHEADER+'"><button type="button" class="close" aria-hidden="true">&times;</button>'+this.options.header+"</div>"),this.options.liveSearch&&(o='<div class="bs-searchbox"><input type="text" class="form-control" autocomplete="off"'+(null===this.options.liveSearchPlaceholder?"":' placeholder="'+$(this.options.liveSearchPlaceholder)+'"')+' role="textbox" aria-label="Search"></div>'),this.multiple&&this.options.actionsBox&&(a='<div class="bs-actionsbox"><div class="btn-group btn-group-sm btn-block"><button type="button" class="actions-btn bs-select-all btn '+Y.BUTTONCLASS+'">'+this.options.selectAllText+'</button><button type="button" class="actions-btn bs-deselect-all btn '+Y.BUTTONCLASS+'">'+this.options.deselectAllText+"</button></div></div>"),this.multiple&&this.options.doneButton&&(r='<div class="bs-donebutton"><div class="btn-group btn-block"><button type="button" class="btn btn-sm '+Y.BUTTONCLASS+'">'+this.options.doneButtonText+"</button></div></div>"),e='<div class="dropdown bootstrap-select'+t+'"><button type="button" class="'+this.options.styleBase+' dropdown-toggle" '+("static"===this.options.display?'data-display="static"':"")+'data-toggle="dropdown"'+i+' role="button"><div class="filter-option"><div class="filter-option-inner"><div class="filter-option-inner-inner"></div></div> </div>'+("4"===G.major?"":'<span class="bs-caret">'+this.options.template.caret+"</span>")+'</button><div class="'+Y.MENU+" "+("4"===G.major?"":Y.SHOW)+'" role="combobox">'+n+o+a+'<div class="inner '+Y.SHOW+'" role="listbox" aria-expanded="false" tabindex="-1"><ul class="'+Y.MENU+" inner "+("4"===G.major?Y.SHOW:"")+'"></ul></div>'+r+"</div></div>",W(e)},setPositionData:function(){this.selectpicker.view.canHighlight=[];for(var e=0;e<this.selectpicker.current.data.length;e++){var t=this.selectpicker.current.data[e],i=!0;"divider"===t.type?(i=!1,t.height=this.sizeInfo.dividerHeight):"optgroup-label"===t.type?(i=!1,t.height=this.sizeInfo.dropdownHeaderHeight):t.height=this.sizeInfo.liHeight,t.disabled&&(i=!1),this.selectpicker.view.canHighlight.push(i),t.position=(0===e?0:this.selectpicker.current.data[e-1].position)+t.height}},isVirtual:function(){return!1!==this.options.virtualScroll&&this.selectpicker.main.elements.length>=this.options.virtualScroll||!0===this.options.virtualScroll},createView:function(I,e){e=e||0;var N=this;this.selectpicker.current=I?this.selectpicker.search:this.selectpicker.main;var E,M,D=[];function i(e,t){var i,n,o,a,r,s,l,d,c,u=N.selectpicker.current.elements.length,h=[],f=void 0,p=!0,m=N.isVirtual();N.selectpicker.view.scrollTop=e,!0===m&&N.sizeInfo.hasScrollBar&&N.$menu[0].offsetWidth>N.sizeInfo.totalMenuWidth&&(N.sizeInfo.menuWidth=N.$menu[0].offsetWidth,N.sizeInfo.totalMenuWidth=N.sizeInfo.menuWidth+N.sizeInfo.scrollBarWidth,N.$menu.css("min-width",N.sizeInfo.menuWidth)),i=Math.ceil(N.sizeInfo.menuInnerHeight/N.sizeInfo.liHeight*1.5),n=Math.round(u/i)||1;for(var g=0;g<n;g++){var v=(g+1)*i;if(g===n-1&&(v=u),h[g]=[g*i+(g?1:0),v],!u)break;void 0===f&&e<=N.selectpicker.current.data[v-1].position-N.sizeInfo.menuInnerHeight&&(f=g)}if(void 0===f&&(f=0),r=[N.selectpicker.view.position0,N.selectpicker.view.position1],o=Math.max(0,f-1),a=Math.min(n-1,f+1),N.selectpicker.view.position0=Math.max(0,h[o][0])||0,N.selectpicker.view.position1=Math.min(u,h[a][1])||0,s=r[0]!==N.selectpicker.view.position0||r[1]!==N.selectpicker.view.position1,void 0!==N.activeIndex&&(M=N.selectpicker.current.elements[N.selectpicker.current.map.newIndex[N.prevActiveIndex]],D=N.selectpicker.current.elements[N.selectpicker.current.map.newIndex[N.activeIndex]],E=N.selectpicker.current.elements[N.selectpicker.current.map.newIndex[N.selectedIndex]],t&&(N.activeIndex!==N.selectedIndex&&(D.classList.remove("active"),D.firstChild&&D.firstChild.classList.remove("active")),N.activeIndex=void 0),N.activeIndex&&N.activeIndex!==N.selectedIndex&&E&&E.length&&(E.classList.remove("active"),E.firstChild&&E.firstChild.classList.remove("active"))),void 0!==N.prevActiveIndex&&N.prevActiveIndex!==N.activeIndex&&N.prevActiveIndex!==N.selectedIndex&&M&&M.length&&(M.classList.remove("active"),M.firstChild&&M.firstChild.classList.remove("active")),(t||s)&&(l=N.selectpicker.view.visibleElements?N.selectpicker.view.visibleElements.slice():[],N.selectpicker.view.visibleElements=N.selectpicker.current.elements.slice(N.selectpicker.view.position0,N.selectpicker.view.position1),N.setOptionStatus(),(I||!1===m&&t)&&(d=l,c=N.selectpicker.view.visibleElements,p=!(d.length===c.length&&d.every(function(e,t){return e===c[t]}))),(t||!0===m)&&p)){var y,b,x=N.$menuInner[0],w=document.createDocumentFragment(),_=x.firstChild.cloneNode(!1),C=!0===m?N.selectpicker.view.visibleElements:N.selectpicker.current.elements;x.replaceChild(_,x.firstChild);g=0;for(var S=C.length;g<S;g++)w.appendChild(C[g]);!0===m&&(y=0===N.selectpicker.view.position0?0:N.selectpicker.current.data[N.selectpicker.view.position0-1].position,b=N.selectpicker.view.position1>u-1?0:N.selectpicker.current.data[u-1].position-N.selectpicker.current.data[N.selectpicker.view.position1-1].position,x.firstChild.style.marginTop=y+"px",x.firstChild.style.marginBottom=b+"px"),x.firstChild.appendChild(w)}if(N.prevActiveIndex=N.activeIndex,N.options.liveSearch){if(I&&t){var T,k=0;N.selectpicker.view.canHighlight[k]||(k=1+N.selectpicker.view.canHighlight.slice(1).indexOf(!0)),T=N.selectpicker.view.visibleElements[k],N.selectpicker.view.currentActive&&(N.selectpicker.view.currentActive.classList.remove("active"),N.selectpicker.view.currentActive.firstChild&&N.selectpicker.view.currentActive.firstChild.classList.remove("active")),T&&(T.classList.add("active"),T.firstChild&&T.firstChild.classList.add("active")),N.activeIndex=N.selectpicker.current.map.originalIndex[k]}}else N.$menuInner.focus()}this.setPositionData(),i(e,!0),this.$menuInner.off("scroll.createView").on("scroll.createView",function(e,t){N.noScroll||i(this.scrollTop,t),N.noScroll=!1}),W(window).off("resize.createView").on("resize.createView",function(){i(N.$menuInner[0].scrollTop)})},createLi:function(){var E,M=this,D=[],A=0,L=0,P=[],R=0,U=0,O=-1;this.selectpicker.view.titleOption||(this.selectpicker.view.titleOption=document.createElement("option"));var e,B={span:document.createElement("span"),subtext:document.createElement("small"),a:document.createElement("a"),li:document.createElement("li"),whitespace:document.createTextNode(" ")},z=document.createDocumentFragment();(M.options.showTick||M.multiple)&&((e=B.span.cloneNode(!1)).className=M.options.iconBase+" "+M.options.tickIcon+" check-mark",B.a.appendChild(e)),B.a.setAttribute("role","option"),B.subtext.className="text-muted",B.text=B.span.cloneNode(!1),B.text.className="text";var F=function(e,t,i){var n=B.li.cloneNode(!1);return e&&(1===e.nodeType||11===e.nodeType?n.appendChild(e):n.innerHTML=e),void 0!==t&&""!==t&&(n.className=t),null!=i&&n.classList.add("optgroup-"+i),n},H=function(e,t,i){var n=B.a.cloneNode(!0);return e&&(11===e.nodeType?n.appendChild(e):n.insertAdjacentHTML("beforeend",e)),void 0!==t&""!==t&&(n.className=t),"4"===G.major&&n.classList.add("dropdown-item"),i&&n.setAttribute("style",i),n},V=function(e){var t,i,n=B.text.cloneNode(!1);if(e.optionContent)n.innerHTML=e.optionContent;else{if(n.textContent=e.text,e.optionIcon){var o=B.whitespace.cloneNode(!1);(i=B.span.cloneNode(!1)).className=M.options.iconBase+" "+e.optionIcon,z.appendChild(i),z.appendChild(o)}e.optionSubtext&&((t=B.subtext.cloneNode(!1)).innerHTML=e.optionSubtext,n.appendChild(t))}return z.appendChild(n),z};if(this.options.title&&!this.multiple){O--;var t=this.$element[0],i=!1,n=!this.selectpicker.view.titleOption.parentNode;if(n)this.selectpicker.view.titleOption.className="bs-title-option",this.selectpicker.view.titleOption.value="",i=void 0===W(t.options[t.selectedIndex]).attr("selected")&&void 0===this.$element.data("selected");(n||0!==this.selectpicker.view.titleOption.index)&&t.insertBefore(this.selectpicker.view.titleOption,t.firstChild),i&&(t.selectedIndex=0)}var j=this.$element.find("option");j.each(function(e){var t=W(this);if(O++,!t.hasClass("bs-title-option")){var i,n,o=t.data(),a=this.className||"",r=$(this.style.cssText),s=o.content,l=this.textContent,d=o.tokens,c=o.subtext,u=o.icon,h=t.parent(),f=h[0],p="OPTGROUP"===f.tagName,m=p&&f.disabled,g=this.disabled||m,v=this.previousElementSibling&&"OPTGROUP"===this.previousElementSibling.tagName,y=h.data();if(!0===o.hidden||M.options.hideDisabled&&(g&&!p||m)){i=o.prevHiddenIndex,t.next().data("prevHiddenIndex",void 0!==i?i:e),O--,v||void 0!==i&&(k=j[i].previousElementSibling)&&"OPTGROUP"===k.tagName&&!k.disabled&&(v=!0),v&&"divider"!==P[P.length-1].type&&(O++,D.push(F(!1,Y.DIVIDER,R+"div")),P.push({type:"divider",optID:R}))}else{if(p&&!0!==o.divider){if(M.options.hideDisabled&&g){if(void 0===y.allOptionsDisabled){var b=h.children();h.data("allOptionsDisabled",b.filter(":disabled").length===b.length)}if(h.data("allOptionsDisabled"))return void O--}var x=" "+f.className||"";if(!this.previousElementSibling){R+=1;var w=f.label,_=$(w),C=y.subtext,S=y.icon;0!==e&&0<D.length&&(O++,D.push(F(!1,Y.DIVIDER,R+"div")),P.push({type:"divider",optID:R})),O++;var T=function(e){var t,i,n=B.text.cloneNode(!1);if(n.innerHTML=e.labelEscaped,e.labelIcon){var o=B.whitespace.cloneNode(!1);(i=B.span.cloneNode(!1)).className=M.options.iconBase+" "+e.labelIcon,z.appendChild(i),z.appendChild(o)}return e.labelSubtext&&((t=B.subtext.cloneNode(!1)).textContent=e.labelSubtext,n.appendChild(t)),z.appendChild(n),z}({labelEscaped:_,labelSubtext:C,labelIcon:S});D.push(F(T,"dropdown-header"+x,R)),P.push({content:_,subtext:C,type:"optgroup-label",optID:R}),U=O-1}if(M.options.hideDisabled&&g||!0===o.hidden)return void O--;n=V({text:l,optionContent:s,optionSubtext:c,optionIcon:u}),D.push(F(H(n,"opt "+a+x,r),"",R)),P.push({content:s||l,subtext:c,tokens:d,type:"option",optID:R,headerIndex:U,lastIndex:U+f.childElementCount,originalIndex:e,data:o}),A++}else if(!0===o.divider)D.push(F(!1,Y.DIVIDER)),P.push({type:"divider",originalIndex:e,data:o});else{var k;if(!v&&M.options.hideDisabled)if(void 0!==(i=o.prevHiddenIndex))(k=j[i].previousElementSibling)&&"OPTGROUP"===k.tagName&&!k.disabled&&(v=!0);v&&"divider"!==P[P.length-1].type&&(O++,D.push(F(!1,Y.DIVIDER,R+"div")),P.push({type:"divider",optID:R})),n=V({text:l,optionContent:s,optionSubtext:c,optionIcon:u}),D.push(F(H(n,a,r))),P.push({content:s||l,subtext:c,tokens:d,type:"option",originalIndex:e,data:o}),A++}M.selectpicker.main.map.newIndex[e]=O,M.selectpicker.main.map.originalIndex[O]=e;var I=P[P.length-1];I.disabled=g;var N=0;I.content&&(N+=I.content.length),I.subtext&&(N+=I.subtext.length),u&&(N+=1),L<N&&(L=N,E=D[D.length-1])}}}),this.selectpicker.main.elements=D,this.selectpicker.main.data=P,this.selectpicker.current=this.selectpicker.main,this.selectpicker.view.widestOption=E,this.selectpicker.view.availableOptionsCount=A},findLis:function(){return this.$menuInner.find(".inner > li")},render:function(){var e=this,t=this.$element.find("option"),i=[],n=[];this.togglePlaceholder(),this.tabIndex();for(var o=0,a=this.selectpicker.main.elements.length;o<a;o++){var r=t[this.selectpicker.main.map.originalIndex[o]];if(r&&r.selected&&(i.push(r),n.length<100&&"count"!==e.options.selectedTextFormat||1===i.length)){if(e.options.hideDisabled&&(r.disabled||"OPTGROUP"===r.parentNode.tagName&&r.parentNode.disabled))return;var s,l,d=this.selectpicker.main.data[o].data,c=d.icon&&e.options.showIcon?'<i class="'+e.options.iconBase+" "+d.icon+'"></i> ':"";s=e.options.showSubtext&&d.subtext&&!e.multiple?' <small class="text-muted">'+d.subtext+"</small>":"",l=r.title?r.title:d.content&&e.options.showContent?d.content.toString():c+r.innerHTML.trim()+s,n.push(l)}}var u=this.multiple?n.join(this.options.multipleSeparator):n[0];if(50<i.length&&(u+="..."),this.multiple&&-1!==this.options.selectedTextFormat.indexOf("count")){var h=this.options.selectedTextFormat.split(">");if(1<h.length&&i.length>h[1]||1===h.length&&2<=i.length){var f=this.selectpicker.view.availableOptionsCount;u=("function"==typeof this.options.countSelectedText?this.options.countSelectedText(i.length,f):this.options.countSelectedText).replace("{0}",i.length.toString()).replace("{1}",f.toString())}}null==this.options.title&&(this.options.title=this.$element.attr("title")),"static"==this.options.selectedTextFormat&&(u=this.options.title),u||(u=void 0!==this.options.title?this.options.title:this.options.noneSelectedText),this.$button[0].title=p(u.replace(/<[^>]*>?/g,"").trim()),this.$button.find(".filter-option-inner-inner")[0].innerHTML=u,this.$element.trigger("rendered.bs.select")},setStyle:function(e,t){this.$element.attr("class")&&this.$newElement.addClass(this.$element.attr("class").replace(/selectpicker|mobile-device|bs-select-hidden|validate\[.*\]/gi,""));var i=e||this.options.style;"add"==t?this.$button.addClass(i):"remove"==t?this.$button.removeClass(i):(this.$button.removeClass(this.options.style),this.$button.addClass(i))},liHeight:function(e){if(e||!1!==this.options.size&&!this.sizeInfo){this.sizeInfo||(this.sizeInfo={});var t=document.createElement("div"),i=document.createElement("div"),n=document.createElement("div"),o=document.createElement("ul"),a=document.createElement("li"),r=document.createElement("li"),s=document.createElement("li"),l=document.createElement("a"),d=document.createElement("span"),c=this.options.header&&0<this.$menu.find("."+Y.POPOVERHEADER).length?this.$menu.find("."+Y.POPOVERHEADER)[0].cloneNode(!0):null,u=this.options.liveSearch?document.createElement("div"):null,h=this.options.actionsBox&&this.multiple&&0<this.$menu.find(".bs-actionsbox").length?this.$menu.find(".bs-actionsbox")[0].cloneNode(!0):null,f=this.options.doneButton&&this.multiple&&0<this.$menu.find(".bs-donebutton").length?this.$menu.find(".bs-donebutton")[0].cloneNode(!0):null,p=this.$element.find("option")[0];if(this.sizeInfo.selectWidth=this.$newElement[0].offsetWidth,d.className="text",l.className="dropdown-item "+(p?p.className:""),t.className=this.$menu[0].parentNode.className+" "+Y.SHOW,t.style.width=this.sizeInfo.selectWidth+"px","auto"===this.options.width&&(i.style.minWidth=0),i.className=Y.MENU+" "+Y.SHOW,n.className="inner "+Y.SHOW,o.className=Y.MENU+" inner "+("4"===G.major?Y.SHOW:""),a.className=Y.DIVIDER,r.className="dropdown-header",d.appendChild(document.createTextNode("​")),l.appendChild(d),s.appendChild(l),r.appendChild(d.cloneNode(!0)),this.selectpicker.view.widestOption&&o.appendChild(this.selectpicker.view.widestOption.cloneNode(!0)),o.appendChild(s),o.appendChild(a),o.appendChild(r),c&&i.appendChild(c),u){var m=document.createElement("input");u.className="bs-searchbox",m.className="form-control",u.appendChild(m),i.appendChild(u)}h&&i.appendChild(h),n.appendChild(o),i.appendChild(n),f&&i.appendChild(f),t.appendChild(i),document.body.appendChild(t);var g,v=l.offsetHeight,y=r?r.offsetHeight:0,b=c?c.offsetHeight:0,x=u?u.offsetHeight:0,w=h?h.offsetHeight:0,_=f?f.offsetHeight:0,C=W(a).outerHeight(!0),S=!!window.getComputedStyle&&window.getComputedStyle(i),T=i.offsetWidth,k=S?null:W(i),I={vert:E(S?S.paddingTop:k.css("paddingTop"))+E(S?S.paddingBottom:k.css("paddingBottom"))+E(S?S.borderTopWidth:k.css("borderTopWidth"))+E(S?S.borderBottomWidth:k.css("borderBottomWidth")),horiz:E(S?S.paddingLeft:k.css("paddingLeft"))+E(S?S.paddingRight:k.css("paddingRight"))+E(S?S.borderLeftWidth:k.css("borderLeftWidth"))+E(S?S.borderRightWidth:k.css("borderRightWidth"))},N={vert:I.vert+E(S?S.marginTop:k.css("marginTop"))+E(S?S.marginBottom:k.css("marginBottom"))+2,horiz:I.horiz+E(S?S.marginLeft:k.css("marginLeft"))+E(S?S.marginRight:k.css("marginRight"))+2};n.style.overflowY="scroll",g=i.offsetWidth-T,document.body.removeChild(t),this.sizeInfo.liHeight=v,this.sizeInfo.dropdownHeaderHeight=y,this.sizeInfo.headerHeight=b,this.sizeInfo.searchHeight=x,this.sizeInfo.actionsHeight=w,this.sizeInfo.doneButtonHeight=_,this.sizeInfo.dividerHeight=C,this.sizeInfo.menuPadding=I,this.sizeInfo.menuExtras=N,this.sizeInfo.menuWidth=T,this.sizeInfo.totalMenuWidth=this.sizeInfo.menuWidth,this.sizeInfo.scrollBarWidth=g,this.sizeInfo.selectHeight=this.$newElement[0].offsetHeight,this.setPositionData()}},getSelectPosition:function(){var e,t=W(window),i=this.$newElement.offset(),n=W(this.options.container);this.options.container&&!n.is("body")?((e=n.offset()).top+=parseInt(n.css("borderTopWidth")),e.left+=parseInt(n.css("borderLeftWidth"))):e={top:0,left:0};var o=this.options.windowPadding;this.sizeInfo.selectOffsetTop=i.top-e.top-t.scrollTop(),this.sizeInfo.selectOffsetBot=t.height()-this.sizeInfo.selectOffsetTop-this.sizeInfo.selectHeight-e.top-o[2],this.sizeInfo.selectOffsetLeft=i.left-e.left-t.scrollLeft(),this.sizeInfo.selectOffsetRight=t.width()-this.sizeInfo.selectOffsetLeft-this.sizeInfo.selectWidth-e.left-o[1],this.sizeInfo.selectOffsetTop-=o[0],this.sizeInfo.selectOffsetLeft-=o[3]},setMenuSize:function(e){this.getSelectPosition();var t,i,n,o,a,r,s,l=this.sizeInfo.selectWidth,d=this.sizeInfo.liHeight,c=this.sizeInfo.headerHeight,u=this.sizeInfo.searchHeight,h=this.sizeInfo.actionsHeight,f=this.sizeInfo.doneButtonHeight,p=this.sizeInfo.dividerHeight,m=this.sizeInfo.menuPadding,g=0;if(this.options.dropupAuto&&(s=d*this.selectpicker.current.elements.length+m.vert,this.$newElement.toggleClass(Y.DROPUP,this.sizeInfo.selectOffsetTop-this.sizeInfo.selectOffsetBot>this.sizeInfo.menuExtras.vert&&s+this.sizeInfo.menuExtras.vert+50>this.sizeInfo.selectOffsetBot)),"auto"===this.options.size)o=3<this.selectpicker.current.elements.length?3*this.sizeInfo.liHeight+this.sizeInfo.menuExtras.vert-2:0,i=this.sizeInfo.selectOffsetBot-this.sizeInfo.menuExtras.vert,n=o+c+u+h+f,r=Math.max(o-m.vert,0),this.$newElement.hasClass(Y.DROPUP)&&(i=this.sizeInfo.selectOffsetTop-this.sizeInfo.menuExtras.vert),t=(a=i)-c-u-h-f-m.vert;else if(this.options.size&&"auto"!=this.options.size&&this.selectpicker.current.elements.length>this.options.size){for(var v=0;v<this.options.size;v++)"divider"===this.selectpicker.current.data[v].type&&g++;t=(i=d*this.options.size+g*p+m.vert)-m.vert,a=i+c+u+h+f,n=r=""}"auto"===this.options.dropdownAlignRight&&this.$menu.toggleClass(Y.MENURIGHT,this.sizeInfo.selectOffsetLeft>this.sizeInfo.selectOffsetRight&&this.sizeInfo.selectOffsetRight<this.$menu[0].offsetWidth-l),this.$menu.css({"max-height":a+"px",overflow:"hidden","min-height":n+"px"}),this.$menuInner.css({"max-height":t+"px","overflow-y":"auto","min-height":r+"px"}),this.sizeInfo.menuInnerHeight=t,this.selectpicker.current.data.length&&this.selectpicker.current.data[this.selectpicker.current.data.length-1].position>this.sizeInfo.menuInnerHeight&&(this.sizeInfo.hasScrollBar=!0,this.sizeInfo.totalMenuWidth=this.sizeInfo.menuWidth+this.sizeInfo.scrollBarWidth,this.$menu.css("min-width",this.sizeInfo.totalMenuWidth)),this.dropdown&&this.dropdown._popper&&this.dropdown._popper.update()},setSize:function(e){if(this.liHeight(e),this.options.header&&this.$menu.css("padding-top",0),!1!==this.options.size){var t,i=this,n=W(window),o=0;this.setMenuSize(),"auto"===this.options.size?(this.$searchbox.off("input.setMenuSize propertychange.setMenuSize").on("input.setMenuSize propertychange.setMenuSize",function(){return i.setMenuSize()}),n.off("resize.setMenuSize scroll.setMenuSize").on("resize.setMenuSize scroll.setMenuSize",function(){return i.setMenuSize()})):this.options.size&&"auto"!=this.options.size&&this.selectpicker.current.elements.length>this.options.size&&(this.$searchbox.off("input.setMenuSize propertychange.setMenuSize"),n.off("resize.setMenuSize scroll.setMenuSize")),e?o=this.$menuInner[0].scrollTop:i.multiple||"number"==typeof(t=i.selectpicker.main.map.newIndex[i.$element[0].selectedIndex])&&!1!==i.options.size&&(o=(o=i.sizeInfo.liHeight*t)-i.sizeInfo.menuInnerHeight/2+i.sizeInfo.liHeight/2),i.createView(!1,o)}},setWidth:function(){var i=this;"auto"===this.options.width?requestAnimationFrame(function(){i.$menu.css("min-width","0"),i.liHeight(),i.setMenuSize();var e=i.$newElement.clone().appendTo("body"),t=e.css("width","auto").children("button").outerWidth();e.remove(),i.sizeInfo.selectWidth=Math.max(i.sizeInfo.totalMenuWidth,t),i.$newElement.css("width",i.sizeInfo.selectWidth+"px")}):"fit"===this.options.width?(this.$menu.css("min-width",""),this.$newElement.css("width","").addClass("fit-width")):this.options.width?(this.$menu.css("min-width",""),this.$newElement.css("width",this.options.width)):(this.$menu.css("min-width",""),this.$newElement.css("width","")),this.$newElement.hasClass("fit-width")&&"fit"!==this.options.width&&this.$newElement.removeClass("fit-width")},selectPosition:function(){this.$bsContainer=W('<div class="bs-container" />');var n,o,a,r=this,s=W(this.options.container),e=function(e){var t={},i=r.options.display||!!W.fn.dropdown.Constructor.Default&&W.fn.dropdown.Constructor.Default.display;r.$bsContainer.addClass(e.attr("class").replace(/form-control|fit-width/gi,"")).toggleClass(Y.DROPUP,e.hasClass(Y.DROPUP)),n=e.offset(),s.is("body")?o={top:0,left:0}:((o=s.offset()).top+=parseInt(s.css("borderTopWidth"))-s.scrollTop(),o.left+=parseInt(s.css("borderLeftWidth"))-s.scrollLeft()),a=e.hasClass(Y.DROPUP)?0:e[0].offsetHeight,(G.major<4||"static"===i)&&(t.top=n.top-o.top+a,t.left=n.left-o.left),t.width=e[0].offsetWidth,r.$bsContainer.css(t)};this.$button.on("click.bs.dropdown.data-api",function(){r.isDisabled()||(e(r.$newElement),r.$bsContainer.appendTo(r.options.container).toggleClass(Y.SHOW,!r.$button.hasClass(Y.SHOW)).append(r.$menu))}),W(window).on("resize scroll",function(){e(r.$newElement)}),this.$element.on("hide.bs.select",function(){r.$menu.data("height",r.$menu.height()),r.$bsContainer.detach()})},setOptionStatus:function(){var e=this,t=this.$element.find("option");if(e.noScroll=!1,e.selectpicker.view.visibleElements&&e.selectpicker.view.visibleElements.length)for(var i=0;i<e.selectpicker.view.visibleElements.length;i++){var n=e.selectpicker.current.map.originalIndex[i+e.selectpicker.view.position0],o=t[n];if(o){var a=this.selectpicker.main.map.newIndex[n],r=this.selectpicker.main.elements[a];e.setDisabled(n,o.disabled||"OPTGROUP"===o.parentNode.tagName&&o.parentNode.disabled,a,r),e.setSelected(n,o.selected,a,r)}}},setSelected:function(e,t,i,n){var o,a,r,s=void 0!==this.activeIndex,l=this.activeIndex===e||t&&!this.multiple&&!s;i||(i=this.selectpicker.main.map.newIndex[e]),n||(n=this.selectpicker.main.elements[i]),r=n.firstChild,t&&(this.selectedIndex=e),n.classList.toggle("selected",t),n.classList.toggle("active",l),l&&(this.selectpicker.view.currentActive=n,this.activeIndex=e),r&&(r.classList.toggle("selected",t),r.classList.toggle("active",l),r.setAttribute("aria-selected",t)),l||!s&&t&&void 0!==this.prevActiveIndex&&(o=this.selectpicker.main.map.newIndex[this.prevActiveIndex],(a=this.selectpicker.main.elements[o]).classList.remove("active"),a.firstChild&&a.firstChild.classList.remove("active"))},setDisabled:function(e,t,i,n){var o;i||(i=this.selectpicker.main.map.newIndex[e]),n||(n=this.selectpicker.main.elements[i]),o=n.firstChild,n.classList.toggle(Y.DISABLED,t),o&&("4"===G.major&&o.classList.toggle(Y.DISABLED,t),o.setAttribute("aria-disabled",t),t?o.setAttribute("tabindex",-1):o.setAttribute("tabindex",0))},isDisabled:function(){return this.$element[0].disabled},checkDisabled:function(){var e=this;this.isDisabled()?(this.$newElement.addClass(Y.DISABLED),this.$button.addClass(Y.DISABLED).attr("tabindex",-1).attr("aria-disabled",!0)):(this.$button.hasClass(Y.DISABLED)&&(this.$newElement.removeClass(Y.DISABLED),this.$button.removeClass(Y.DISABLED).attr("aria-disabled",!1)),-1!=this.$button.attr("tabindex")||this.$element.data("tabindex")||this.$button.removeAttr("tabindex")),this.$button.click(function(){return!e.isDisabled()})},togglePlaceholder:function(){var e=this.$element[0],t=e.selectedIndex,i=-1===t;i||e.options[t].value||(i=!0),this.$button.toggleClass("bs-placeholder",i)},tabIndex:function(){this.$element.data("tabindex")!==this.$element.attr("tabindex")&&-98!==this.$element.attr("tabindex")&&"-98"!==this.$element.attr("tabindex")&&(this.$element.data("tabindex",this.$element.attr("tabindex")),this.$button.attr("tabindex",this.$element.data("tabindex"))),this.$element.attr("tabindex",-98)},clickListener:function(){var S=this,t=W(document);function e(){S.options.liveSearch?S.$searchbox.focus():S.$menuInner.focus()}function i(){S.dropdown&&S.dropdown._popper&&S.dropdown._popper.state.isCreated?e():requestAnimationFrame(i)}t.data("spaceSelect",!1),this.$button.on("keyup",function(e){/(32)/.test(e.keyCode.toString(10))&&t.data("spaceSelect")&&(e.preventDefault(),t.data("spaceSelect",!1))}),this.$newElement.on("show.bs.dropdown",function(){3<G.major&&!S.dropdown&&(S.dropdown=S.$button.data("bs.dropdown"),S.dropdown._menu=S.$menu[0])}),this.$button.on("click.bs.dropdown.data-api",function(){S.$newElement.hasClass(Y.SHOW)||S.setSize()}),this.$element.on("shown.bs.select",function(){S.$menuInner[0].scrollTop!==S.selectpicker.view.scrollTop&&(S.$menuInner[0].scrollTop=S.selectpicker.view.scrollTop),3<G.major?requestAnimationFrame(i):e()}),this.$menuInner.on("click","li a",function(e,t){var i=W(this),n=S.isVirtual()?S.selectpicker.view.position0:0,o=S.selectpicker.current.map.originalIndex[i.parent().index()+n],a=T(S.$element[0]),r=S.$element.prop("selectedIndex"),s=!0;if(S.multiple&&1!==S.options.maxOptions&&e.stopPropagation(),e.preventDefault(),!S.isDisabled()&&!i.parent().hasClass(Y.DISABLED)){var l=S.$element.find("option"),d=l.eq(o),c=d.prop("selected"),u=d.parent("optgroup"),h=u.find("option"),f=S.options.maxOptions,p=u.data("maxOptions")||!1;if(o===S.activeIndex&&(t=!0),t||(S.prevActiveIndex=S.activeIndex,S.activeIndex=void 0),S.multiple){if(d.prop("selected",!c),S.setSelected(o,!c),i.blur(),!1!==f||!1!==p){var m=f<l.filter(":selected").length,g=p<u.find("option:selected").length;if(f&&m||p&&g)if(f&&1==f){l.prop("selected",!1),d.prop("selected",!0);for(var v=0;v<l.length;v++)S.setSelected(v,!1);S.setSelected(o,!0)}else if(p&&1==p){u.find("option:selected").prop("selected",!1),d.prop("selected",!0);for(v=0;v<h.length;v++){var y=h[v];S.setSelected(l.index(y),!1)}S.setSelected(o,!0)}else{var b="string"==typeof S.options.maxOptionsText?[S.options.maxOptionsText,S.options.maxOptionsText]:S.options.maxOptionsText,x="function"==typeof b?b(f,p):b,w=x[0].replace("{n}",f),_=x[1].replace("{n}",p),C=W('<div class="notify"></div>');x[2]&&(w=w.replace("{var}",x[2][1<f?0:1]),_=_.replace("{var}",x[2][1<p?0:1])),d.prop("selected",!1),S.$menu.append(C),f&&m&&(C.append(W("<div>"+w+"</div>")),s=!1,S.$element.trigger("maxReached.bs.select")),p&&g&&(C.append(W("<div>"+_+"</div>")),s=!1,S.$element.trigger("maxReachedGrp.bs.select")),setTimeout(function(){S.setSelected(o,!1)},10),C.delay(750).fadeOut(300,function(){W(this).remove()})}}}else l.prop("selected",!1),d.prop("selected",!0),S.setSelected(o,!0);!S.multiple||S.multiple&&1===S.options.maxOptions?S.$button.focus():S.options.liveSearch&&S.$searchbox.focus(),s&&(a!=T(S.$element[0])&&S.multiple||r!=S.$element.prop("selectedIndex")&&!S.multiple)&&(k=[o,d.prop("selected"),a],S.$element.triggerNative("change"))}}),this.$menu.on("click","li."+Y.DISABLED+" a, ."+Y.POPOVERHEADER+", ."+Y.POPOVERHEADER+" :not(.close)",function(e){e.currentTarget==this&&(e.preventDefault(),e.stopPropagation(),S.options.liveSearch&&!W(e.target).hasClass("close")?S.$searchbox.focus():S.$button.focus())}),this.$menuInner.on("click",".divider, .dropdown-header",function(e){e.preventDefault(),e.stopPropagation(),S.options.liveSearch?S.$searchbox.focus():S.$button.focus()}),this.$menu.on("click","."+Y.POPOVERHEADER+" .close",function(){S.$button.click()}),this.$searchbox.on("click",function(e){e.stopPropagation()}),this.$menu.on("click",".actions-btn",function(e){S.options.liveSearch?S.$searchbox.focus():S.$button.focus(),e.preventDefault(),e.stopPropagation(),W(this).hasClass("bs-select-all")?S.selectAll():S.deselectAll()}),this.$element.on({change:function(){S.render(),S.$element.trigger("changed.bs.select",k),k=null},focus:function(){S.options.mobile||S.$button.focus()}})},liveSearchListener:function(){var f=this,p=document.createElement("li");this.$button.on("click.bs.dropdown.data-api",function(){f.$searchbox.val()&&f.$searchbox.val("")}),this.$searchbox.on("click.bs.dropdown.data-api focus.bs.dropdown.data-api touchend.bs.dropdown.data-api",function(e){e.stopPropagation()}),this.$searchbox.on("input propertychange",function(){var e=f.$searchbox.val();if(f.selectpicker.search.map.newIndex={},f.selectpicker.search.map.originalIndex={},f.selectpicker.search.elements=[],f.selectpicker.search.data=[],e){var t=[],i=e.toUpperCase(),n={},o=[],a=f._searchStyle(),r=f.options.liveSearchNormalize;f._$lisSelected=f.$menuInner.find(".selected");for(var s=0;s<f.selectpicker.main.data.length;s++){var l=f.selectpicker.main.data[s];n[s]||(n[s]=C(l,i,a,r)),n[s]&&void 0!==l.headerIndex&&-1===o.indexOf(l.headerIndex)&&(0<l.headerIndex&&(n[l.headerIndex-1]=!0,o.push(l.headerIndex-1)),n[l.headerIndex]=!0,o.push(l.headerIndex),n[l.lastIndex+1]=!0),n[s]&&"optgroup-label"!==l.type&&o.push(s)}s=0;for(var d=o.length;s<d;s++){var c=o[s],u=o[s-1],h=(l=f.selectpicker.main.data[c],f.selectpicker.main.data[u]);("divider"!==l.type||"divider"===l.type&&h&&"divider"!==h.type&&d-1!==s)&&(f.selectpicker.search.data.push(l),t.push(f.selectpicker.main.elements[c]),l.hasOwnProperty("originalIndex")&&(f.selectpicker.search.map.newIndex[l.originalIndex]=t.length-1,f.selectpicker.search.map.originalIndex[t.length-1]=l.originalIndex))}f.activeIndex=void 0,f.noScroll=!0,f.$menuInner.scrollTop(0),f.selectpicker.search.elements=t,f.createView(!0),t.length||(p.className="no-results",p.innerHTML=f.options.noneResultsText.replace("{0}",'"'+$(e)+'"'),f.$menuInner[0].firstChild.appendChild(p))}else f.$menuInner.scrollTop(0),f.createView(!1)})},_searchStyle:function(){return this.options.liveSearchStyle||"contains"},val:function(e){return void 0!==e?(this.$element.val(e),this.render(),this.$element.trigger("changed.bs.select",k),k=null,this.$element):this.$element.val()},changeAll:function(e){if(this.multiple){void 0===e&&(e=!0);var t=this.$element.find("option"),i=0,n=0,o=T(this.$element[0]);this.$element.addClass("bs-select-hidden");for(var a=0;a<this.selectpicker.current.elements.length;a++){var r=this.selectpicker.current.data[a],s=t[this.selectpicker.current.map.originalIndex[a]];s&&!s.disabled&&"divider"!==r.type&&(s.selected&&i++,s.selected=e,s.selected&&n++)}this.$element.removeClass("bs-select-hidden"),i!==n&&(this.setOptionStatus(),this.togglePlaceholder(),k=[null,null,o],this.$element.triggerNative("change"))}},selectAll:function(){return this.changeAll(!0)},deselectAll:function(){return this.changeAll(!1)},toggle:function(e){(e=e||window.event)&&e.stopPropagation(),this.$button.trigger("click.bs.dropdown.data-api")},keydown:function(e){var t,i,n,o,a,r=W(this),s=r.hasClass("dropdown-toggle"),l=(s?r.closest(".dropdown"):r.closest(P.MENU)).data("this"),d=l.findLis(),c=!1,u=e.which===D&&!s&&!l.options.selectOnTab,h=R.test(e.which)||u,f=l.$menuInner[0].scrollTop,p=l.isVirtual(),m=!0===p?l.selectpicker.view.position0:0;if(!(i=l.$newElement.hasClass(Y.SHOW))&&(h||48<=e.which&&e.which<=57||96<=e.which&&e.which<=105||65<=e.which&&e.which<=90)&&l.$button.trigger("click.bs.dropdown.data-api"),e.which===I&&i&&(e.preventDefault(),l.$button.trigger("click.bs.dropdown.data-api").focus()),h){if(!d.length)return;void 0===(t=!0===p?d.index(d.filter(".active")):l.selectpicker.current.map.newIndex[l.activeIndex])&&(t=-1),-1!==t&&((n=l.selectpicker.current.elements[t+m]).classList.remove("active"),n.firstChild&&n.firstChild.classList.remove("active")),e.which===A?(-1!==t&&t--,t+m<0&&(t+=d.length),l.selectpicker.view.canHighlight[t+m]||-1===(t=l.selectpicker.view.canHighlight.slice(0,t+m).lastIndexOf(!0)-m)&&(t=d.length-1)):(e.which===L||u)&&(++t+m>=l.selectpicker.view.canHighlight.length&&(t=0),l.selectpicker.view.canHighlight[t+m]||(t=t+1+l.selectpicker.view.canHighlight.slice(t+m+1).indexOf(!0))),e.preventDefault();var g=m+t;e.which===A?0===m&&t===d.length-1?(l.$menuInner[0].scrollTop=l.$menuInner[0].scrollHeight,g=l.selectpicker.current.elements.length-1):c=(a=(o=l.selectpicker.current.data[g]).position-o.height)<f:(e.which===L||u)&&(0===t?g=l.$menuInner[0].scrollTop=0:c=f<(a=(o=l.selectpicker.current.data[g]).position-l.sizeInfo.menuInnerHeight)),(n=l.selectpicker.current.elements[g])&&(n.classList.add("active"),n.firstChild&&n.firstChild.classList.add("active")),l.activeIndex=l.selectpicker.current.map.originalIndex[g],l.selectpicker.view.currentActive=n,c&&(l.$menuInner[0].scrollTop=a),l.options.liveSearch?l.$searchbox.focus():r.focus()}else if(!r.is("input")&&!U.test(e.which)||e.which===M&&l.selectpicker.keydown.keyHistory){var v,y,b=[];e.preventDefault(),l.selectpicker.keydown.keyHistory+=S[e.which],l.selectpicker.keydown.resetKeyHistory.cancel&&clearTimeout(l.selectpicker.keydown.resetKeyHistory.cancel),l.selectpicker.keydown.resetKeyHistory.cancel=l.selectpicker.keydown.resetKeyHistory.start(),y=l.selectpicker.keydown.keyHistory,/^(.)\1+$/.test(y)&&(y=y.charAt(0));for(var x=0;x<l.selectpicker.current.data.length;x++){var w=l.selectpicker.current.data[x];C(w,y,"startsWith",!0)&&l.selectpicker.view.canHighlight[x]&&(w.index=x,b.push(w.originalIndex))}if(b.length){var _=0;d.removeClass("active").find("a").removeClass("active"),1===y.length&&(-1===(_=b.indexOf(l.activeIndex))||_===b.length-1?_=0:_++),v=l.selectpicker.current.map.newIndex[b[_]],c=0<f-(o=l.selectpicker.current.data[v]).position?(a=o.position-o.height,!0):(a=o.position-l.sizeInfo.menuInnerHeight,o.position>f+l.sizeInfo.menuInnerHeight),(n=l.selectpicker.current.elements[v]).classList.add("active"),n.firstChild&&n.firstChild.classList.add("active"),l.activeIndex=b[_],n.firstChild.focus(),c&&(l.$menuInner[0].scrollTop=a),r.focus()}}i&&(e.which===M&&!l.selectpicker.keydown.keyHistory||e.which===N||e.which===D&&l.options.selectOnTab)&&(e.which!==M&&e.preventDefault(),l.options.liveSearch&&e.which===M||(l.$menuInner.find(".active a").trigger("click",!0),r.focus(),l.options.liveSearch||(e.preventDefault(),W(document).data("spaceSelect",!0))))},mobile:function(){this.$element.addClass("mobile-device")},refresh:function(){var e=W.extend({},this.options,this.$element.data());this.options=e,this.selectpicker.main.map.newIndex={},this.selectpicker.main.map.originalIndex={},this.createLi(),this.checkDisabled(),this.render(),this.setStyle(),this.setWidth(),this.setSize(!0),this.$element.trigger("refreshed.bs.select")},hide:function(){this.$newElement.hide()},show:function(){this.$newElement.show()},remove:function(){this.$newElement.remove(),this.$element.remove()},destroy:function(){this.$newElement.before(this.$element).remove(),this.$bsContainer?this.$bsContainer.remove():this.$menu.remove(),this.$element.off(".bs.select").removeData("selectpicker").removeClass("bs-select-hidden selectpicker")}};var u=W.fn.selectpicker;W.fn.selectpicker=s,W.fn.selectpicker.Constructor=l,W.fn.selectpicker.noConflict=function(){return W.fn.selectpicker=u,this},W(document).off("keydown.bs.dropdown.data-api").on("keydown.bs.select",'.bootstrap-select [data-toggle="dropdown"], .bootstrap-select [role="listbox"], .bs-searchbox input',l.prototype.keydown).on("focusin.modal",'.bootstrap-select [data-toggle="dropdown"], .bootstrap-select [role="listbox"], .bs-searchbox input',function(e){e.stopPropagation()}),W(window).on("load.bs.select.data-api",function(){W(".selectpicker").each(function(){var e=W(this);s.call(e,e.data())})})}(e)}),function(e,t){void 0===e&&void 0!==window&&(e=window),"function"==typeof define&&define.amd?define(["jquery"],function(e){return t(e)}):"object"==typeof module&&module.exports?module.exports=t(require("jquery")):t(e.jQuery)}(this,function(e){e.fn.selectpicker.defaults={noneSelectedText:"没有选中任何项",noneResultsText:"没有找到匹配项",countSelectedText:"选中{1}中的{0}项",maxOptionsText:["超出限制 (最多选择{n}项)","组选择超出限制(最多选择{n}组)"],multipleSeparator:", ",selectAllText:"全选",deselectAllText:"取消全选"}}),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?e(require("jquery")):e(jQuery)}(function(i){i.notifyError=function(e,t){return e="object"==typeof e?e:{message:e},i.notify(e,i.extend(!0,{},t,{type:"danger"}))},i.notifyWarning=function(e,t){return e="object"==typeof e?e:{message:e},i.notify(e,i.extend(!0,{},t,{type:"warning"}))},i.notifySuccess=function(e,t){return e="object"==typeof e?e:{message:e},i.notify(e,i.extend(!0,{},t,{type:"success"}))},i.notifyInfo=function(e,t){return e="object"==typeof e?e:{message:e},i.notify(e,i.extend(!0,{},t,{type:"info"}))}}),function(o){var t,a,r,s,n;window.Ewin=(t='<div id="[Id]" class="modal fade" role="dialog" aria-labelledby="modalLabel"><div class="modal-dialog modal-sm"><div class="modal-content"><div class="modal-header"><h4 class="modal-title" id="modalLabel">[Title]</h4><button type="button" class="close" data-dismiss="modal">&times;</button></div><div class="modal-body"><p>[Message]</p></div><div class="modal-footer"><button type="button" class="btn btn-default btn-raised cancel" data-dismiss="modal">[BtnCancel]</button><button type="button" class="btn btn-primary btn-raised ok" data-dismiss="modal">[BtnOk]</button></div></div></div></div>',a='<div id="[Id]" class="modal fade" role="dialog" aria-labelledby="modalLabel"><div class="modal-dialog"><div class="modal-content"><div class="modal-header"><h4 class="modal-title" id="modalLabel">[Title]</h4><button type="button" class="close" data-dismiss="modal">&times;</button></div><div class="modal-body"></div></div></div></div>',r=new RegExp("\\[([^\\[\\]]*?)\\]","igm"),s=function(){return"mdl"+(new Date).valueOf()},n=function(i){i=o.extend({},{title:"操作提示",message:"提示内容",btnok:"确定",btncl:"取消",width:200,auto:!1},i||{});var n=s(),e=t.replace(r,function(e,t){return{Id:n,Title:i.title,Message:i.message,BtnOk:i.btnok,BtnCancel:i.btncl}[t]});return o("body").append(e),o("#"+n).modal({width:i.width,backdrop:"static"}),o("#"+n).on("hide.bs.modal",function(e){o("body").find("#"+n).remove()}),n},{alert:function(e){"string"==typeof e&&(e={message:e});var t=n(e),i=o("#"+t);return i.find(".ok").removeClass("btn-success").addClass("btn-primary"),i.find(".cancel").hide(),{id:t,on:function(e){e&&e instanceof Function&&i.find(".ok").click(function(){e(!0)})},hide:function(t){t&&t instanceof Function&&i.on("hide.bs.modal",function(e){t(e)})}}},confirm:function(e){var t=n(e),i=o("#"+t);return i.find(".ok").removeClass("btn-primary").addClass("btn-success"),i.find(".cancel").show(),{id:t,on:function(e){e&&e instanceof Function&&(i.find(".ok").click(function(){e(!0)}),i.find(".cancel").click(function(){e(!1)}))},hide:function(t){t&&t instanceof Function&&i.on("hide.bs.modal",function(e){t(e)})}}},dialog:function(i){i=o.extend({},{title:"title",url:"",width:800,height:550,onReady:function(){},onShown:function(e){}},i||{});var n=s(),e=a.replace(r,function(e,t){return{Id:n,Title:i.title}[t]});o("body").append(e);var t=o("#"+n);t.find(".modal-body").load(i.url),i.onReady()&&i.onReady.call(t),t.modal(),t.on("shown.bs.modal",function(e){i.onReady(e)&&i.onReady.call(t,e)}),t.on("hide.bs.modal",function(e){o("body").find(t).remove()})}})}(jQuery),function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&module.exports?module.exports=e(require("jquery")):e(window.jQuery)}(function(Y){"use strict";var q,u;Y.fn.fileinputLocales={},Y.fn.fileinputThemes={},String.prototype.setTokens=function(e){var t,i,n=this.toString();for(t in e)e.hasOwnProperty(t)&&(i=new RegExp("{"+t+"}","g"),n=n.replace(i,e[t]));return n},q={FRAMES:".kv-preview-thumb",SORT_CSS:"file-sortable",OBJECT_PARAMS:'<param name="controller" value="true" />\n<param name="allowFullScreen" value="true" />\n<param name="allowScriptAccess" value="always" />\n<param name="autoPlay" value="false" />\n<param name="autoStart" value="false" />\n<param name="quality" value="high" />\n',DEFAULT_PREVIEW:'<div class="file-preview-other">\n<span class="{previewFileIconClass}">{previewFileIcon}</span>\n</div>',MODAL_ID:"kvFileinputModal",MODAL_EVENTS:["show","shown","hide","hidden","loaded"],objUrl:window.URL||window.webkitURL,compare:function(e,t,i){return void 0!==e&&(i?e===t:e.match(t))},isIE:function(e){if("Microsoft Internet Explorer"!==navigator.appName)return!1;if(10===e)return new RegExp("msie\\s"+e,"i").test(navigator.userAgent);var t,i=document.createElement("div");return i.innerHTML="\x3c!--[if IE "+e+"]> <i></i> <![endif]--\x3e",t=i.getElementsByTagName("i").length,document.body.appendChild(i),i.parentNode.removeChild(i),t},canAssignFilesToInput:function(){var e=document.createElement("input");try{return e.type="file",!(e.files=null)}catch(e){return!1}},getDragDropFolders:function(e){var t,i,n=e.length,o=0;if(0<n&&e[0].webkitGetAsEntry())for(t=0;t<n;t++)(i=e[t].webkitGetAsEntry())&&i.isDirectory&&o++;return o},initModal:function(e){var t=Y("body");t.length&&e.appendTo(t)},isEmpty:function(e,t){return null==e||0===e.length||t&&""===Y.trim(e)},isArray:function(e){return Array.isArray(e)||"[object Array]"===Object.prototype.toString.call(e)},ifSet:function(e,t,i){return i=i||"",t&&"object"==typeof t&&e in t?t[e]:i},cleanArray:function(e){return e instanceof Array||(e=[]),e.filter(function(e){return null!=e})},spliceArray:function(e,t,i){var n,o,a=0,r=[];if(!(e instanceof Array))return[];for(o=Y.extend(!0,[],e),i&&o.reverse(),n=0;n<o.length;n++)n!==t&&(r[a]=o[n],a++);return i&&r.reverse(),r},getNum:function(e,t){return t=t||0,"number"==typeof e?e:("string"==typeof e&&(e=parseFloat(e)),isNaN(e)?t:e)},hasFileAPISupport:function(){return!(!window.File||!window.FileReader)},hasDragDropSupport:function(){var e=document.createElement("div");return!q.isIE(9)&&(void 0!==e.draggable||void 0!==e.ondragstart&&void 0!==e.ondrop)},hasFileUploadSupport:function(){return q.hasFileAPISupport()&&window.FormData},hasBlobSupport:function(){try{return!!window.Blob&&Boolean(new Blob)}catch(e){return!1}},hasArrayBufferViewSupport:function(){try{return 100===new Blob([new Uint8Array(100)]).size}catch(e){return!1}},dataURI2Blob:function(e){var t,i,n,o,a,r,s=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,l=q.hasBlobSupport();if(!((l||s)&&window.atob&&window.ArrayBuffer&&window.Uint8Array))return null;for(t=0<=e.split(",")[0].indexOf("base64")?atob(e.split(",")[1]):decodeURIComponent(e.split(",")[1]),i=new ArrayBuffer(t.length),n=new Uint8Array(i),o=0;o<t.length;o+=1)n[o]=t.charCodeAt(o);return a=e.split(",")[0].split(":")[1].split(";")[0],l?new Blob([q.hasArrayBufferViewSupport()?n:i],{type:a}):((r=new s).append(i),r.getBlob(a))},arrayBuffer2String:function(e){if(window.TextDecoder)return new TextDecoder("utf-8").decode(e);var t,i,n,o,a=Array.prototype.slice.apply(new Uint8Array(e)),r="",s=0;for(t=a.length;s<t;)switch((i=a[s++])>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:r+=String.fromCharCode(i);break;case 12:case 13:n=a[s++],r+=String.fromCharCode((31&i)<<6|63&n);break;case 14:n=a[s++],o=a[s++],r+=String.fromCharCode((15&i)<<12|(63&n)<<6|(63&o)<<0)}return r},isHtml:function(e){var t=document.createElement("div");t.innerHTML=e;for(var i=t.childNodes,n=i.length;n--;)if(1===i[n].nodeType)return!0;return!1},isSvg:function(e){return e.match(/^\s*<\?xml/i)&&(e.match(/<!DOCTYPE svg/i)||e.match(/<svg/i))},getMimeType:function(e,t,i){switch(e){case"ffd8ffe0":case"ffd8ffe1":case"ffd8ffe2":return"image/jpeg";case"89504E47":return"image/png";case"47494638":return"image/gif";case"49492a00":return"image/tiff";case"52494646":return"image/webp";case"66747970":return"video/3gp";case"4f676753":return"video/ogg";case"1a45dfa3":return"video/mkv";case"000001ba":case"000001b3":return"video/mpeg";case"3026b275":return"video/wmv";case"25504446":return"application/pdf";case"25215053":return"application/ps";case"504b0304":case"504b0506":case"504b0508":return"application/zip";case"377abcaf":return"application/7z";case"75737461":return"application/tar";case"7801730d":return"application/dmg";default:switch(e.substring(0,6)){case"435753":return"application/x-shockwave-flash";case"494433":return"audio/mp3";case"425a68":return"application/bzip";default:switch(e.substring(0,4)){case"424d":return"image/bmp";case"fffb":return"audio/mp3";case"4d5a":return"application/exe";case"1f9d":case"1fa0":return"application/zip";case"1f8b":return"application/gzip";default:return t&&!t.match(/[^\u0000-\u007f]/)?"application/text-plain":i}}}},addCss:function(e,t){e.removeClass(t).addClass(t)},getElement:function(e,t,i){return q.isEmpty(e)||q.isEmpty(e[t])?i:Y(e[t])},uniqId:function(){return Math.round((new Date).getTime())+"_"+Math.round(100*Math.random())},htmlEncode:function(e,t){return void 0===e?t||null:e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")},replaceTags:function(e,t){var i=e;return t&&Y.each(t,function(e,t){"function"==typeof t&&(t=t()),i=i.split(e).join(t)}),i},cleanMemory:function(e){var t=e.is("img")?e.attr("src"):e.find("source").attr("src");q.objUrl.revokeObjectURL(t)},findFileName:function(e){var t=e.lastIndexOf("/");return-1===t&&(t=e.lastIndexOf("\\")),e.split(e.substring(t,t+1)).pop()},checkFullScreen:function(){return document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement},toggleFullScreen:function(e){var t=document,i=t.documentElement;i&&e&&!q.checkFullScreen()?i.requestFullscreen?i.requestFullscreen():i.msRequestFullscreen?i.msRequestFullscreen():i.mozRequestFullScreen?i.mozRequestFullScreen():i.webkitRequestFullscreen&&i.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT):t.exitFullscreen?t.exitFullscreen():t.msExitFullscreen?t.msExitFullscreen():t.mozCancelFullScreen?t.mozCancelFullScreen():t.webkitExitFullscreen&&t.webkitExitFullscreen()},moveArray:function(e,t,i,n){var o=Y.extend(!0,[],e);if(n&&o.reverse(),i>=o.length)for(var a=i-o.length;1+a--;)o.push(void 0);return o.splice(i,0,o.splice(t,1)[0]),n&&o.reverse(),o},cleanZoomCache:function(e){var t=e.closest(".kv-zoom-cache-theme");t.length||(t=e.closest(".kv-zoom-cache")),t.remove()},closeButton:function(e){return'<button type="button" class="'+(e=e?"close "+e:"close")+'" aria-label="Close">\n  <span aria-hidden="true">&times;</span>\n</button>'},getRotation:function(e){switch(e){case 2:return"rotateY(180deg)";case 3:return"rotate(180deg)";case 4:return"rotate(180deg) rotateY(180deg)";case 5:return"rotate(270deg) rotateY(180deg)";case 6:return"rotate(90deg)";case 7:return"rotate(90deg) rotateY(180deg)";case 8:return"rotate(270deg)";default:return""}},setTransform:function(e,t){e&&(e.style.transform=t,e.style.webkitTransform=t,e.style["-moz-transform"]=t,e.style["-ms-transform"]=t,e.style["-o-transform"]=t)},setImageOrientation:function(d,c,u){if(d&&d.length){var e="load.fileinputimageorient";d.off(e).on(e,function(){var e=d.get(0),t=c&&c.length?c.get(0):null,i=e.offsetHeight,n=e.offsetWidth,o=q.getRotation(u);if(d.data("orientation",u),t&&c.data("orientation",u),u<5)return q.setTransform(e,o),void q.setTransform(t,o);var a=Math.atan(n/i),r=Math.sqrt(Math.pow(i,2)+Math.pow(n,2)),s=r?i/Math.cos(Math.PI/2+a)/r:1,l=" scale("+Math.abs(s)+")";q.setTransform(e,o+l),q.setTransform(t,o+l)})}}},(u=function(e,t){var i=this;i.$element=Y(e),i.$parent=i.$element.parent(),i._validate()&&(i.isPreviewable=q.hasFileAPISupport(),i.isIE9=q.isIE(9),i.isIE10=q.isIE(10),(i.isPreviewable||i.isIE9)&&(i._init(t),i._listen()),i.$element.removeClass("file-loading"))}).prototype={constructor:u,_cleanup:function(){var e=this;e.reader=null,e.formdata={},e.uploadCount=0,e.uploadStatus={},e.uploadLog=[],e.uploadAsyncCount=0,e.loadedImages=[],e.totalImagesCount=0,e.ajaxRequests=[],e.clearStack(),e.fileBatchCompleted=!0,e.isPreviewable||(e.showPreview=!1),e.isError=!1,e.ajaxAborted=!1,e.cancelling=!1},_init:function(e,t){var i,n,o,a,r=this,s=r.$element;r.options=e,Y.each(e,function(e,t){switch(e){case"minFileCount":case"maxFileCount":case"minFileSize":case"maxFileSize":case"maxFilePreviewSize":case"resizeImageQuality":case"resizeIfSizeMoreThan":case"progressUploadThreshold":case"initialPreviewCount":case"zoomModalHeight":case"minImageHeight":case"maxImageHeight":case"minImageWidth":case"maxImageWidth":r[e]=q.getNum(t);break;default:r[e]=t}}),r.rtl&&(a=r.previewZoomButtonIcons.prev,r.previewZoomButtonIcons.prev=r.previewZoomButtonIcons.next,r.previewZoomButtonIcons.next=a),t||r._cleanup(),r.$form=s.closest("form"),r._initTemplateDefaults(),r.uploadFileAttr=q.isEmpty(s.attr("name"))?"file_data":s.attr("name"),o=r._getLayoutTemplate("progress"),r.progressTemplate=o.replace("{class}",r.progressClass),r.progressCompleteTemplate=o.replace("{class}",r.progressCompleteClass),r.progressErrorTemplate=o.replace("{class}",r.progressErrorClass),r.isDisabled=s.attr("disabled")||s.attr("readonly"),r.isDisabled&&s.attr("disabled",!0),r.isClickable=r.browseOnZoneClick&&r.showPreview&&(r.dropZoneEnabled||!q.isEmpty(r.defaultPreviewContent)),r.isAjaxUpload=q.hasFileUploadSupport()&&!q.isEmpty(r.uploadUrl),r.dropZoneEnabled=q.hasDragDropSupport()&&r.dropZoneEnabled,r.isAjaxUpload||(r.dropZoneEnabled=r.dropZoneEnabled&&q.canAssignFilesToInput()),r.slug="function"==typeof e.slugCallback?e.slugCallback:r._slugDefault,r.mainTemplate=r.showCaption?r._getLayoutTemplate("main1"):r._getLayoutTemplate("main2"),r.captionTemplate=r._getLayoutTemplate("caption"),r.previewGenericTemplate=r._getPreviewTemplate("generic"),!r.imageCanvas&&r.resizeImage&&(r.maxImageWidth||r.maxImageHeight)&&(r.imageCanvas=document.createElement("canvas"),r.imageCanvasContext=r.imageCanvas.getContext("2d")),q.isEmpty(s.attr("id"))&&s.attr("id",q.uniqId()),r.namespace=".fileinput_"+s.attr("id").replace(/-/g,"_"),void 0===r.$container?r.$container=r._createContainer():r._refreshContainer(),n=r.$container,r.$dropZone=n.find(".file-drop-zone"),r.$progress=n.find(".kv-upload-progress"),r.$btnUpload=n.find(".fileinput-upload"),r.$captionContainer=q.getElement(e,"elCaptionContainer",n.find(".file-caption")),r.$caption=q.getElement(e,"elCaptionText",n.find(".file-caption-name")),q.isEmpty(r.msgPlaceholder)||(i=s.attr("multiple")?r.filePlural:r.fileSingle,r.$caption.attr("placeholder",r.msgPlaceholder.replace("{files}",i))),r.$captionIcon=r.$captionContainer.find(".file-caption-icon"),r.$previewContainer=q.getElement(e,"elPreviewContainer",n.find(".file-preview")),r.$preview=q.getElement(e,"elPreviewImage",n.find(".file-preview-thumbnails")),r.$previewStatus=q.getElement(e,"elPreviewStatus",n.find(".file-preview-status")),r.$errorContainer=q.getElement(e,"elErrorContainer",r.$previewContainer.find(".kv-fileinput-error")),r._validateDisabled(),q.isEmpty(r.msgErrorClass)||q.addCss(r.$errorContainer,r.msgErrorClass),t?r._errorsExist()||r.$errorContainer.hide():(r.$errorContainer.hide(),r.previewInitId="preview-"+q.uniqId(),r._initPreviewCache(),r._initPreview(!0),r._initPreviewActions(),r.$parent.hasClass("file-loading")&&(r.$container.insertBefore(r.$parent),r.$parent.remove())),r._setFileDropZoneTitle(),s.attr("disabled")&&r.disable(),r._initZoom(),r.hideThumbnailContent&&q.addCss(r.$preview,"hide-content")},_initTemplateDefaults:function(){var e,t,i,n,o,a,r,s,l,d,c=this;e=q.closeButton("fileinput-remove"),t='<div id="'+q.MODAL_ID+'" class="file-zoom-dialog modal fade" tabindex="-1" aria-labelledby="'+q.MODAL_ID+'Label"></div>',i='<div class="file-preview-frame {frameClass}" id="{previewId}" data-fileindex="{fileindex}" data-template="{template}"',l=" {style}",n='<video class="kv-preview-data file-preview-video" controls'+l+'>\n<source src="{data}" type="{type}">\n'+q.DEFAULT_PREVIEW+"\n</video>\n",o='\x3c!--suppress ALL --\x3e<audio class="kv-preview-data file-preview-audio" controls'+l+'>\n<source src="{data}" type="{type}">\n'+q.DEFAULT_PREVIEW+"\n</audio>\n",r='<embed class="kv-preview-data file-preview-pdf" src="{data}" type="application/pdf"'+l+">\n",a='<object class="kv-preview-data file-preview-object file-object {typeCss}" data="{data}" type="{type}"'+l+'>\n<param name="movie" value="{caption}" />\n'+q.OBJECT_PARAMS+" "+q.DEFAULT_PREVIEW+"\n</object>\n",s='<div class="kv-preview-data file-preview-other-frame"'+l+">\n"+q.DEFAULT_PREVIEW+"\n</div>\n",d={width:"100%",height:"100%","min-height":"480px"},c._isPdfRendered()&&(r=c.pdfRendererTemplate.replace("{renderer}",c.pdfRendererUrl)),c.defaults={layoutTemplates:{main1:'{preview}\n<div class="kv-upload-progress kv-hidden"></div><div class="clearfix"></div>\n<div class="input-group {class}">\n  {caption}\n<div class="input-group-btn input-group-append">\n      {remove}\n      {cancel}\n      {upload}\n      {browse}\n    </div>\n</div>',main2:'{preview}\n<div class="kv-upload-progress kv-hidden"></div>\n<div class="clearfix"></div>\n{remove}\n{cancel}\n{upload}\n{browse}\n',preview:'<div class="file-preview {class}">\n    {close}    <div class="{dropClass}">\n    <div class="file-preview-thumbnails">\n    </div>\n    <div class="clearfix"></div>    <div class="file-preview-status text-center text-success"></div>\n    <div class="kv-fileinput-error"></div>\n    </div>\n</div>',close:e,fileIcon:'<i class="glyphicon glyphicon-file"></i>',caption:'<div class="file-caption form-control {class}" tabindex="500">\n  <span class="file-caption-icon"></span>\n  <input class="file-caption-name" onkeydown="return false;" onpaste="return false;">\n</div>',modalMain:t,modal:'<div class="modal-dialog modal-lg{rtl}" role="document">\n  <div class="modal-content">\n    <div class="modal-header">\n      <h5 class="modal-title">{heading}</h5>\n      <span class="kv-zoom-title"></span>\n      <div class="kv-zoom-actions">{toggleheader}{fullscreen}{borderless}{close}</div>\n    </div>\n    <div class="modal-body">\n      <div class="floating-buttons"></div>\n      <div class="kv-zoom-body file-zoom-content {zoomFrameClass}"></div>\n{prev} {next}\n    </div>\n  </div>\n</div>\n',progress:'<div class="progress">\n    <div class="{class}" role="progressbar" aria-valuenow="{percent}" aria-valuemin="0" aria-valuemax="100" style="width:{percent}%;">\n        {status}\n     </div>\n</div>',size:" <samp>({sizeText})</samp>",footer:'<div class="file-thumbnail-footer">\n    <div class="file-footer-caption" title="{caption}">\n        <div class="file-caption-info">{caption}</div>\n        <div class="file-size-info">{size}</div>\n    </div>\n    {progress}\n{indicator}\n{actions}\n</div>',indicator:'<div class="file-upload-indicator" title="{indicatorTitle}">{indicator}</div>',actions:'<div class="file-actions">\n    <div class="file-footer-buttons">\n        {download} {upload} {delete} {zoom} {other}    </div>\n</div>\n{drag}\n<div class="clearfix"></div>',actionDelete:'<button type="button" class="kv-file-remove {removeClass}" title="{removeTitle}" {dataUrl}{dataKey}>{removeIcon}</button>\n',actionUpload:'<button type="button" class="kv-file-upload {uploadClass}" title="{uploadTitle}">{uploadIcon}</button>',actionDownload:'<a class="kv-file-download {downloadClass}" title="{downloadTitle}" href="{downloadUrl}" download="{caption}" target="_blank">{downloadIcon}</a>',actionZoom:'<button type="button" class="kv-file-zoom {zoomClass}" title="{zoomTitle}">{zoomIcon}</button>',actionDrag:'<span class="file-drag-handle {dragClass}" title="{dragTitle}">{dragIcon}</span>',btnDefault:'<button type="{type}" tabindex="500" title="{title}" class="{css}" {status}>{icon} {label}</button>',btnLink:'<a href="{href}" tabindex="500" title="{title}" class="{css}" {status}>{icon} {label}</a>',btnBrowse:'<div tabindex="500" class="{css}" {status}>{icon} {label}</div>',zoomCache:'<div class="kv-zoom-cache" style="display:none">{zoomContent}</div>'},previewMarkupTags:{tagBefore1:'<div class="file-preview-frame {frameClass}" id="{previewId}" data-fileindex="{fileindex}" data-template="{template}"><div class="kv-file-content">\n',tagBefore2:'<div class="file-preview-frame {frameClass}" id="{previewId}" data-fileindex="{fileindex}" data-template="{template}" title="{caption}"><div class="kv-file-content">\n',tagAfter:"</div>{footer}\n</div>\n"},previewContentTemplates:{generic:"{content}\n",html:'<div class="kv-preview-data file-preview-html" title="{caption}" {style}>{data}</div>\n',image:'<img src="{data}" class="file-preview-image kv-preview-data" title="{caption}" alt="{caption}" {style}>\n',text:'<textarea class="kv-preview-data file-preview-text" title="{caption}" readonly {style}>{data}</textarea>\n',office:'<iframe class="kv-preview-data file-preview-office" src="https://view.officeapps.live.com/op/embed.aspx?src={data}" {style}></iframe>',gdocs:'<iframe class="kv-preview-data file-preview-gdocs" src="https://docs.google.com/gview?url={data}&embedded=true" {style}></iframe>',video:n,audio:o,flash:'<embed class="kv-preview-data file-preview-flash" src="{data}" type="application/x-shockwave-flash" {style}>\n',object:a,pdf:r,other:s},allowedPreviewTypes:["image","html","text","video","audio","flash","pdf","object"],previewTemplates:{},previewSettings:{image:{width:"auto",height:"auto","max-width":"100%","max-height":"100%"},html:{width:"213px",height:"160px"},text:{width:"213px",height:"160px"},office:{width:"213px",height:"160px"},gdocs:{width:"213px",height:"160px"},video:{width:"213px",height:"160px"},audio:{width:"100%",height:"30px"},flash:{width:"213px",height:"160px"},object:{width:"213px",height:"160px"},pdf:{width:"100%",height:"160px"},other:{width:"213px",height:"160px"}},previewSettingsSmall:{image:{width:"auto",height:"auto","max-width":"100%","max-height":"100%"},html:{width:"100%",height:"160px"},text:{width:"100%",height:"160px"},office:{width:"100%",height:"160px"},gdocs:{width:"100%",height:"160px"},video:{width:"100%",height:"auto"},audio:{width:"100%",height:"30px"},flash:{width:"100%",height:"auto"},object:{width:"100%",height:"auto"},pdf:{width:"100%",height:"160px"},other:{width:"100%",height:"160px"}},previewZoomSettings:{image:{width:"auto",height:"auto","max-width":"100%","max-height":"100%"},html:d,text:d,office:{width:"100%",height:"100%","max-width":"100%","min-height":"480px"},gdocs:{width:"100%",height:"100%","max-width":"100%","min-height":"480px"},video:{width:"auto",height:"100%","max-width":"100%"},audio:{width:"100%",height:"30px"},flash:{width:"auto",height:"480px"},object:{width:"auto",height:"100%","max-width":"100%","min-height":"480px"},pdf:d,other:{width:"auto",height:"100%","min-height":"480px"}},fileTypeSettings:{image:function(e,t){return q.compare(e,"image.*")&&!q.compare(e,/(tiff?|wmf)$/i)||q.compare(t,/\.(gif|png|jpe?g)$/i)},html:function(e,t){return q.compare(e,"text/html")||q.compare(t,/\.(htm|html)$/i)},office:function(e,t){return q.compare(e,/(word|excel|powerpoint|office)$/i)||q.compare(t,/\.(docx?|xlsx?|pptx?|pps|potx?)$/i)},gdocs:function(e,t){return q.compare(e,/(word|excel|powerpoint|office|iwork-pages|tiff?)$/i)||q.compare(t,/\.(docx?|xlsx?|pptx?|pps|potx?|rtf|ods|odt|pages|ai|dxf|ttf|tiff?|wmf|e?ps)$/i)},text:function(e,t){return q.compare(e,"text.*")||q.compare(t,/\.(xml|javascript)$/i)||q.compare(t,/\.(txt|md|csv|nfo|ini|json|php|js|css)$/i)},video:function(e,t){return q.compare(e,"video.*")&&(q.compare(e,/(ogg|mp4|mp?g|mov|webm|3gp)$/i)||q.compare(t,/\.(og?|mp4|webm|mp?g|mov|3gp)$/i))},audio:function(e,t){return q.compare(e,"audio.*")&&(q.compare(t,/(ogg|mp3|mp?g|wav)$/i)||q.compare(t,/\.(og?|mp3|mp?g|wav)$/i))},flash:function(e,t){return q.compare(e,"application/x-shockwave-flash",!0)||q.compare(t,/\.(swf)$/i)},pdf:function(e,t){return q.compare(e,"application/pdf",!0)||q.compare(t,/\.(pdf)$/i)},object:function(){return!0},other:function(){return!0}},fileActionSettings:{showRemove:!0,showUpload:!0,showDownload:!0,showZoom:!0,showDrag:!0,removeIcon:'<i class="glyphicon glyphicon-trash"></i>',removeClass:"btn btn-sm btn-kv btn-default btn-outline-secondary",removeErrorClass:"btn btn-sm btn-kv btn-danger",removeTitle:"Remove file",uploadIcon:'<i class="glyphicon glyphicon-upload"></i>',uploadClass:"btn btn-sm btn-kv btn-default btn-outline-secondary",uploadTitle:"Upload file",uploadRetryIcon:'<i class="glyphicon glyphicon-repeat"></i>',uploadRetryTitle:"Retry upload",downloadIcon:'<i class="glyphicon glyphicon-download"></i>',downloadClass:"btn btn-sm btn-kv btn-default btn-outline-secondary",downloadTitle:"Download file",zoomIcon:'<i class="glyphicon glyphicon-zoom-in"></i>',zoomClass:"btn btn-sm btn-kv btn-default btn-outline-secondary",zoomTitle:"View Details",dragIcon:'<i class="glyphicon glyphicon-move"></i>',dragClass:"text-info",dragTitle:"Move / Rearrange",dragSettings:{},indicatorNew:'<i class="glyphicon glyphicon-plus-sign text-warning"></i>',indicatorSuccess:'<i class="glyphicon glyphicon-ok-sign text-success"></i>',indicatorError:'<i class="glyphicon glyphicon-exclamation-sign text-danger"></i>',indicatorLoading:'<i class="glyphicon glyphicon-hourglass text-muted"></i>',indicatorNewTitle:"Not uploaded yet",indicatorSuccessTitle:"Uploaded",indicatorErrorTitle:"Upload Error",indicatorLoadingTitle:"Uploading ..."}},Y.each(c.defaults,function(e,t){"allowedPreviewTypes"!==e?c[e]=Y.extend(!0,{},t,c[e]):void 0===c.allowedPreviewTypes&&(c.allowedPreviewTypes=t)}),c._initPreviewTemplates()},_initPreviewTemplates:function(){var i,n=this,o=n.previewMarkupTags,a=o.tagAfter;Y.each(n.previewContentTemplates,function(e,t){q.isEmpty(n.previewTemplates[e])&&(i=o.tagBefore2,"generic"!==e&&"image"!==e&&"html"!==e&&"text"!==e||(i=o.tagBefore1),n._isPdfRendered()&&"pdf"===e&&(i=i.replace("kv-file-content","kv-file-content kv-pdf-rendered")),n.previewTemplates[e]=i+t+a)})},_initPreviewCache:function(){var x=this;x.previewCache={data:{},init:function(){var e=x.initialPreview;0<e.length&&!q.isArray(e)&&(e=e.split(x.initialPreviewDelimiter)),x.previewCache.data={content:e,config:x.initialPreviewConfig,tags:x.initialPreviewThumbTags}},count:function(){return x.previewCache.data&&x.previewCache.data.content?x.previewCache.data.content.length:0},get:function(e,t){var i,n,o,a,r,s,l,d="init_"+e,c=x.previewCache.data,u=c.config[e],h=c.content[e],f=x.previewInitId+"-"+d,p=q.ifSet("previewAsData",u,x.initialPreviewAsData),m=function(e,t,i,n,o,a,r,s,l){return s=" file-preview-initial "+q.SORT_CSS+(s?" "+s:""),x._generatePreviewTemplate(e,t,i,n,o,!1,null,s,a,r,l)};return h?(t=void 0===t||t,o=q.ifSet("type",u,x.initialPreviewFileType||"generic"),r=q.ifSet("filename",u,q.ifSet("caption",u)),s=q.ifSet("filetype",u,o),a=x.previewCache.footer(e,t,u&&u.size||null),l=q.ifSet("frameClass",u),i=p?m(o,h,r,s,f,a,d,l):m("generic",h,r,s,f,a,d,l,o).setTokens({content:c.content[e]}),c.tags.length&&c.tags[e]&&(i=q.replaceTags(i,c.tags[e])),q.isEmpty(u)||q.isEmpty(u.frameAttr)||((n=Y(document.createElement("div")).html(i)).find(".file-preview-initial").attr(u.frameAttr),i=n.html(),n.remove()),i):""},add:function(e,t,i,n){var o,a=x.previewCache.data;return q.isArray(e)||(e=e.split(x.initialPreviewDelimiter)),n?(o=a.content.push(e)-1,a.config[o]=t,a.tags[o]=i):(o=e.length-1,a.content=e,a.config=t,a.tags=i),x.previewCache.data=a,o},set:function(e,t,i,n){var o,a=x.previewCache.data;if(e&&e.length&&(q.isArray(e)||(e=e.split(x.initialPreviewDelimiter)),e.filter(function(e){return null!==e}).length)){if(void 0===a.content&&(a.content=[]),void 0===a.config&&(a.config=[]),void 0===a.tags&&(a.tags=[]),n){for(o=0;o<e.length;o++)e[o]&&a.content.push(e[o]);for(o=0;o<t.length;o++)t[o]&&a.config.push(t[o]);for(o=0;o<i.length;o++)i[o]&&a.tags.push(i[o])}else a.content=e,a.config=t,a.tags=i;x.previewCache.data=a}},unset:function(e){var t=x.previewCache.count(),i=x.reversePreviewOrder;if(t){if(1===t)return x.previewCache.data.content=[],x.previewCache.data.config=[],x.previewCache.data.tags=[],x.initialPreview=[],x.initialPreviewConfig=[],void(x.initialPreviewThumbTags=[]);x.previewCache.data.content=q.spliceArray(x.previewCache.data.content,e,i),x.previewCache.data.config=q.spliceArray(x.previewCache.data.config,e,i),x.previewCache.data.tags=q.spliceArray(x.previewCache.data.tags,e,i)}},out:function(){var e,t,i="",n=x.previewCache.count();if(0===n)return{content:"",caption:""};for(e=0;e<n;e++)t=x.previewCache.get(e),i=x.reversePreviewOrder?t+i:i+t;return{content:i,caption:x._getMsgSelected(n)}},footer:function(e,t,i){var n=x.previewCache.data||{};if(q.isEmpty(n.content))return"";(q.isEmpty(n.config)||q.isEmpty(n.config[e]))&&(n.config[e]={}),t=void 0===t||t;var o,a=n.config[e],r=q.ifSet("caption",a),s=q.ifSet("width",a,"auto"),l=q.ifSet("url",a,!1),d=q.ifSet("key",a,null),c=x.fileActionSettings,u=x.initialPreviewShowDelete||!1,h=a.downloadUrl||x.initialPreviewDownloadUrl||"",f=a.filename||a.caption||"",p=!!h,m=q.ifSet("showRemove",a,q.ifSet("showRemove",c,u)),g=q.ifSet("showDownload",a,q.ifSet("showDownload",c,p)),v=q.ifSet("showZoom",a,q.ifSet("showZoom",c,!0)),y=q.ifSet("showDrag",a,q.ifSet("showDrag",c,!0)),b=!1===l&&t;return g=g&&!1!==a.downloadUrl&&!!h,o=x._renderFileActions(!1,g,m,v,y,b,l,d,!0,h,f),x._getLayoutTemplate("footer").setTokens({progress:x._renderThumbProgress(),actions:o,caption:r,size:x._getSize(i),width:s,indicator:""})}},x.previewCache.init()},_isPdfRendered:function(){var e=this.usePdfRenderer;return("function"==typeof e?e():!!e)&&this.pdfRendererUrl},_handler:function(e,t,i){var n=this.namespace,o=t.split(" ").join(n+" ")+n;e&&e.length&&e.off(o).on(o,i)},_log:function(e){var t=this.$element.attr("id");t&&(e='"'+t+'": '+e),e="bootstrap-fileinput: "+e,void 0!==window.console.log?window.console.log(e):window.alert(e)},_validate:function(){var e="file"===this.$element.attr("type");return e||this._log('The input "type" must be set to "file" for initializing the "bootstrap-fileinput" plugin.'),e},_errorsExist:function(){var e;return!!this.$errorContainer.find("li").length||((e=Y(document.createElement("div")).html(this.$errorContainer.html())).find(".kv-error-close").remove(),e.find("ul").remove(),!!Y.trim(e.text()).length)},_errorHandler:function(e,t){var i=this,n=e.target.error,o=function(e){i._showError(e.replace("{name}",t))};n.code===n.NOT_FOUND_ERR?o(i.msgFileNotFound):n.code===n.SECURITY_ERR?o(i.msgFileSecured):n.code===n.NOT_READABLE_ERR?o(i.msgFileNotReadable):n.code===n.ABORT_ERR?o(i.msgFilePreviewAborted):o(i.msgFilePreviewError)},_addError:function(e){var t=this,i=t.$errorContainer;e&&i.length&&(i.html(t.errorCloseButton+e),t._handler(i.find(".kv-error-close"),"click",function(){setTimeout(function(){t.showPreview&&!t.getFrames().length&&t.clear(),i.fadeOut("slow")},10)}))},_setValidationError:function(e){e=(e?e+" ":"")+"has-error",this.$container.removeClass(e).addClass("has-error"),q.addCss(this.$captionContainer,"is-invalid")},_resetErrors:function(e){var t=this.$errorContainer;this.isError=!1,this.$container.removeClass("has-error"),this.$captionContainer.removeClass("is-invalid"),t.html(""),e?t.fadeOut("slow"):t.hide()},_showFolderError:function(e){var t,i=this,n=i.$errorContainer;e&&(i.isAjaxUpload||i._clearFileInput(),t=i.msgFoldersNotAllowed.replace("{n}",e),i._addError(t),i._setValidationError(),n.fadeIn(800),i._raise("filefoldererror",[e,t]))},_showUploadError:function(e,t,i){var n=this.$errorContainer,o=i||"fileuploaderror",a=t&&t.id?'<li data-file-id="'+t.id+'">'+e+"</li>":"<li>"+e+"</li>";return 0===n.find("ul").length?this._addError("<ul>"+a+"</ul>"):n.find("ul").append(a),n.fadeIn(800),this._raise(o,[t,e]),this._setValidationError("file-input-new"),!0},_showError:function(e,t,i){var n=this,o=n.$errorContainer,a=i||"fileerror";return(t=t||{}).reader=n.reader,n._addError(e),o.fadeIn(800),n._raise(a,[t,e]),n.isAjaxUpload||n._clearFileInput(),n._setValidationError("file-input-new"),n.$btnUpload.attr("disabled",!0),!0},_noFilesError:function(e){var t=this,i=1<t.minFileCount?t.filePlural:t.fileSingle,n=t.msgFilesTooLess.replace("{n}",t.minFileCount).replace("{files}",i),o=t.$errorContainer;t._addError(n),t.isError=!0,t._updateFileDetails(0),o.fadeIn(800),t._raise("fileerror",[e,n]),t._clearFileInput(),t._setValidationError()},_parseError:function(e,t,i,n){var o,a=this,r=Y.trim(i+""),s=void 0!==t.responseJSON&&void 0!==t.responseJSON.error?t.responseJSON.error:t.responseText;return a.cancelling&&a.msgUploadAborted&&(r=a.msgUploadAborted),a.showAjaxErrorDetails&&s&&(o=(s=Y.trim(s.replace(/\n\s*\n/g,"\n"))).length?"<pre>"+s+"</pre>":"",r+=r?o:s),r||(r=a.msgAjaxError.replace("{operation}",e)),a.cancelling=!1,n?"<b>"+n+": </b>"+r:r},_parseFileType:function(e,t){var i,n,o,a=this.allowedPreviewTypes||[];if("application/text-plain"===e)return"text";for(o=0;o<a.length;o++)if(n=a[o],i=(0,this.fileTypeSettings[n])(e,t)?n:"",!q.isEmpty(i))return i;return"other"},_getPreviewIcon:function(e){var i,n=this,o=null;return e&&-1<e.indexOf(".")&&(i=e.split(".").pop(),n.previewFileIconSettings&&(o=n.previewFileIconSettings[i]||n.previewFileIconSettings[i.toLowerCase()]||null),n.previewFileExtSettings&&Y.each(n.previewFileExtSettings,function(e,t){n.previewFileIconSettings[e]&&t(i)&&(o=n.previewFileIconSettings[e])})),o},_parseFilePreviewIcon:function(e,t){var i=this._getPreviewIcon(t)||this.previewFileIcon,n=e;return-1<n.indexOf("{previewFileIcon}")&&(n=n.setTokens({previewFileIconClass:this.previewFileIconClass,previewFileIcon:i})),n},_raise:function(e,t){var i=Y.Event(e);if(void 0!==t?this.$element.trigger(i,t):this.$element.trigger(i),i.isDefaultPrevented()||!1===i.result)return!1;switch(e){case"filebatchuploadcomplete":case"filebatchuploadsuccess":case"fileuploaded":case"fileclear":case"filecleared":case"filereset":case"fileerror":case"filefoldererror":case"fileuploaderror":case"filebatchuploaderror":case"filedeleteerror":case"filecustomerror":case"filesuccessremove":break;default:this.ajaxAborted||(this.ajaxAborted=i.result)}return!0},_listenFullScreen:function(e){var t,i,n=this.$modal;n&&n.length&&(t=n&&n.find(".btn-fullscreen"),i=n&&n.find(".btn-borderless"),t.length&&i.length&&(t.removeClass("active").attr("aria-pressed","false"),i.removeClass("active").attr("aria-pressed","false"),e?t.addClass("active").attr("aria-pressed","true"):i.addClass("active").attr("aria-pressed","true"),n.hasClass("file-zoom-fullscreen")?this._maximizeZoomDialog():e?this._maximizeZoomDialog():i.removeClass("active").attr("aria-pressed","false")))},_listen:function(){var e=this,t=e.$element,i=e.$form,n=e.$container;e._handler(t,"click",function(e){t.hasClass("file-no-browse")&&(t.data("zoneClicked")?t.data("zoneClicked",!1):e.preventDefault())}),e._handler(t,"change",Y.proxy(e._change,e)),e.showBrowse&&e._handler(e.$btnFile,"click",Y.proxy(e._browse,e)),e._handler(n.find(".fileinput-remove:not([disabled])"),"click",Y.proxy(e.clear,e)),e._handler(n.find(".fileinput-cancel"),"click",Y.proxy(e.cancel,e)),e._initDragDrop(),e._handler(i,"reset",Y.proxy(e.clear,e)),e.isAjaxUpload||e._handler(i,"submit",Y.proxy(e._submitForm,e)),e._handler(e.$container.find(".fileinput-upload"),"click",Y.proxy(e._uploadClick,e)),e._handler(Y(window),"resize",function(){e._listenFullScreen(screen.width===window.innerWidth&&screen.height===window.innerHeight)}),e._handler(Y(document),"webkitfullscreenchange mozfullscreenchange fullscreenchange MSFullscreenChange",function(){e._listenFullScreen(q.checkFullScreen())}),e._autoFitContent(),e._initClickable(),e._refreshPreview()},_autoFitContent:function(){var i,e=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,n=this,t=e<400?n.previewSettingsSmall||n.defaults.previewSettingsSmall:n.previewSettings||n.defaults.previewSettings;Y.each(t,function(e,t){i=".file-preview-frame .file-preview-"+e,n.$preview.find(i+".kv-preview-data,"+i+" .kv-preview-data").css(t)})},_scanDroppedItems:function(t,i,n){n=n||"";var o,e,a,r=this,s=function(e){r._log("Error scanning dropped files!"),r._log(e)};t.isFile?t.file(function(e){i.push(e)},s):t.isDirectory&&(e=t.createReader(),(a=function(){e.readEntries(function(e){if(e&&0<e.length){for(o=0;o<e.length;o++)r._scanDroppedItems(e[o],i,n+t.name+"/");a()}return null},s)})())},_initDragDrop:function(){var e=this,t=e.$dropZone;e.dropZoneEnabled&&e.showPreview&&(e._handler(t,"dragenter dragover",Y.proxy(e._zoneDragEnter,e)),e._handler(t,"dragleave",Y.proxy(e._zoneDragLeave,e)),e._handler(t,"drop",Y.proxy(e._zoneDrop,e)),e._handler(Y(document),"dragenter dragover drop",e._zoneDragDropInit))},_zoneDragDropInit:function(e){e.stopPropagation(),e.preventDefault()},_zoneDragEnter:function(e){var t=-1<Y.inArray("Files",e.originalEvent.dataTransfer.types);if(this._zoneDragDropInit(e),this.isDisabled||!t)return e.originalEvent.dataTransfer.effectAllowed="none",void(e.originalEvent.dataTransfer.dropEffect="none");q.addCss(this.$dropZone,"file-highlighted")},_zoneDragLeave:function(e){this._zoneDragDropInit(e),this.isDisabled||this.$dropZone.removeClass("file-highlighted")},_zoneDrop:function(e){var t,i=this,n=i.$element,o=e.originalEvent.dataTransfer,a=o.files,r=o.items,s=q.getDragDropFolders(r),l=function(){i.isAjaxUpload?i._change(e,a):(i.changeTriggered=!0,n.get(0).files=a,setTimeout(function(){i.changeTriggered=!1,n.trigger("change"+i.namespace)},10)),i.$dropZone.removeClass("file-highlighted")};if(e.preventDefault(),!i.isDisabled&&!q.isEmpty(a))if(0<s){if(!i.isAjaxUpload)return void i._showFolderError(s);for(a=[],t=0;t<r.length;t++){var d=r[t].webkitGetAsEntry();d&&i._scanDroppedItems(d,a)}setTimeout(function(){l()},500)}else l()},_uploadClick:function(e){var t,i=this.$container.find(".fileinput-upload"),n=!i.hasClass("disabled")&&q.isEmpty(i.attr("disabled"));e&&e.isDefaultPrevented()||(this.isAjaxUpload?(e.preventDefault(),n&&this.upload()):n&&"submit"!==i.attr("type")&&((t=i.closest("form")).length&&t.trigger("submit"),e.preventDefault()))},_submitForm:function(){return this._isFileSelectionValid()&&!this._abort({})},_clearPreview:function(){var e=this,t=e.$preview;(e.showUploadedThumbs?e.getFrames(":not(.file-preview-success)"):e.getFrames()).each(function(){var e=Y(this);e.remove(),q.cleanZoomCache(t.find("#zoom-"+e.attr("id")))}),e.getFrames().length&&e.showPreview||e._resetUpload(),e._validateDefaultPreview()},_initSortable:function(){var e,o=this,t=o.$preview,i="."+q.SORT_CSS,a=o.reversePreviewOrder;window.KvSortable&&0!==t.find(i).length&&(e={handle:".drag-handle-init",dataIdAttr:"data-preview-id",scroll:!1,draggable:i,onSort:function(e){var t=e.oldIndex,i=e.newIndex,n=0;o.initialPreview=q.moveArray(o.initialPreview,t,i,a),o.initialPreviewConfig=q.moveArray(o.initialPreviewConfig,t,i,a),o.previewCache.init(),o.getFrames(".file-preview-initial").each(function(){Y(this).attr("data-fileindex","init_"+n),n++}),o._raise("filesorted",{previewId:Y(e.item).attr("id"),oldIndex:t,newIndex:i,stack:o.initialPreviewConfig})}},t.data("kvsortable")&&t.kvsortable("destroy"),Y.extend(!0,e,o.fileActionSettings.dragSettings),t.kvsortable(e))},_setPreviewContent:function(e){this.$preview.html(e),this._autoFitContent()},_initPreview:function(e){var t,i=this,n=i.initialCaption||"";if(!i.previewCache.count())return i._clearPreview(),void(e?i._setCaption(n):i._initCaption());t=i.previewCache.out(),n=e&&i.initialCaption?i.initialCaption:t.caption,i._setPreviewContent(t.content),i._setInitThumbAttr(),i._setCaption(n),i._initSortable(),q.isEmpty(t.content)||i.$container.removeClass("file-input-new")},_getZoomButton:function(e){var t=this.previewZoomButtonIcons[e],i=this.previewZoomButtonClasses[e],n=' title="'+(this.previewZoomButtonTitles[e]||"")+'" '+("close"===e?' data-dismiss="modal" aria-hidden="true"':"");return"fullscreen"!==e&&"borderless"!==e&&"toggleheader"!==e||(n+=' data-toggle="button" aria-pressed="false" autocomplete="off"'),'<button type="button" class="'+i+" btn-"+e+'"'+n+">"+t+"</button>"},_getModalContent:function(){var e=this;return e._getLayoutTemplate("modal").setTokens({rtl:e.rtl?" kv-rtl":"",zoomFrameClass:e.frameClass,heading:e.msgZoomModalHeading,prev:e._getZoomButton("prev"),next:e._getZoomButton("next"),toggleheader:e._getZoomButton("toggleheader"),fullscreen:e._getZoomButton("fullscreen"),borderless:e._getZoomButton("borderless"),close:e._getZoomButton("close")})},_listenModalEvent:function(n){var o=this,a=o.$modal;a.on(n+".bs.modal",function(e){var t=a.find(".btn-fullscreen"),i=a.find(".btn-borderless");o._raise("filezoom"+n,{sourceEvent:e,previewId:a.data("previewId"),modal:a}),"shown"===n&&(i.removeClass("active").attr("aria-pressed","false"),t.removeClass("active").attr("aria-pressed","false"),a.hasClass("file-zoom-fullscreen")&&(o._maximizeZoomDialog(),q.checkFullScreen()?t.addClass("active").attr("aria-pressed","true"):i.addClass("active").attr("aria-pressed","true")))})},_initZoom:function(){var e,i=this,t=i._getLayoutTemplate("modalMain"),n="#"+q.MODAL_ID;i.showPreview&&(i.$modal=Y(n),i.$modal&&i.$modal.length||(e=Y(document.createElement("div")).html(t).insertAfter(i.$container),i.$modal=Y(n).insertBefore(e),e.remove()),q.initModal(i.$modal),i.$modal.html(i._getModalContent()),Y.each(q.MODAL_EVENTS,function(e,t){i._listenModalEvent(t)}))},_initZoomButtons:function(){var e,t,i=this.$modal.data("previewId")||"",n=this.getFrames().toArray(),o=n.length,a=this.$modal.find(".btn-prev"),r=this.$modal.find(".btn-next");if(n.length<2)return a.hide(),void r.hide();a.show(),r.show(),o&&(e=Y(n[0]),t=Y(n[o-1]),a.removeAttr("disabled"),r.removeAttr("disabled"),e.length&&e.attr("id")===i&&a.attr("disabled",!0),t.length&&t.attr("id")===i&&r.attr("disabled",!0))},_maximizeZoomDialog:function(){var e=this.$modal,t=e.find(".modal-header:visible"),i=e.find(".modal-footer:visible"),n=e.find(".modal-body"),o=Y(window).height();e.addClass("file-zoom-fullscreen"),t&&t.length&&(o-=t.outerHeight(!0)),i&&i.length&&(o-=i.outerHeight(!0)),n&&n.length&&(o-=n.outerHeight(!0)-n.height()),e.find(".kv-zoom-body").height(o)},_resizeZoomDialog:function(e){var t=this,i=t.$modal,n=i.find(".btn-fullscreen"),o=i.find(".btn-borderless");if(i.hasClass("file-zoom-fullscreen"))q.toggleFullScreen(!1),e?n.hasClass("active")||(i.removeClass("file-zoom-fullscreen"),t._resizeZoomDialog(!0),o.hasClass("active")&&o.removeClass("active").attr("aria-pressed","false")):n.hasClass("active")?n.removeClass("active").attr("aria-pressed","false"):(i.removeClass("file-zoom-fullscreen"),t.$modal.find(".kv-zoom-body").css("height",t.zoomModalHeight));else{if(!e)return void t._maximizeZoomDialog();q.toggleFullScreen(!0)}i.focus()},_setZoomContent:function(e,t){var i,n,o,a,r,s,l,d,c=this,u=e.attr("id"),h=c.$modal,f=h.find(".btn-prev"),p=h.find(".btn-next"),m=h.find(".btn-fullscreen"),g=h.find(".btn-borderless"),v=h.find(".btn-toggleheader"),y=c.$preview.find("#zoom-"+u);n=y.attr("data-template")||"generic",o=(i=y.find(".kv-file-content")).length?i.html():"",a=(e.data("caption")||"")+" "+(e.data("size")||""),h.find(".kv-zoom-title").attr("title",Y("<div/>").html(a).text()).html(a),r=h.find(".kv-zoom-body"),h.removeClass("kv-single-content"),t?(d=r.addClass("file-thumb-loading").clone().insertAfter(r),r.html(o).hide(),d.fadeOut("fast",function(){r.fadeIn("fast",function(){r.removeClass("file-thumb-loading")}),d.remove()})):r.html(o),(l=c.previewZoomSettings[n])&&(s=r.find(".kv-preview-data"),q.addCss(s,"file-zoom-detail"),Y.each(l,function(e,t){s.css(e,t),(s.attr("width")&&"width"===e||s.attr("height")&&"height"===e)&&s.removeAttr(e)})),h.data("previewId",u),c._handler(f,"click",function(){c._zoomSlideShow("prev",u)}),c._handler(p,"click",function(){c._zoomSlideShow("next",u)}),c._handler(m,"click",function(){c._resizeZoomDialog(!0)}),c._handler(g,"click",function(){c._resizeZoomDialog(!1)}),c._handler(v,"click",function(){var e,n=h.find(".modal-header"),t=h.find(".modal-body .floating-buttons"),i=n.find(".kv-zoom-actions"),o=function(e){var t=c.$modal.find(".kv-zoom-body"),i=c.zoomModalHeight;h.hasClass("file-zoom-fullscreen")&&(i=t.outerHeight(!0),e||(i-=n.outerHeight(!0))),t.css("height",e?i+e:i)};n.is(":visible")?(e=n.outerHeight(!0),n.slideUp("slow",function(){i.find(".btn").appendTo(t),o(e)})):(t.find(".btn").appendTo(i),n.slideDown("slow",function(){o()})),h.focus()}),c._handler(h,"keydown",function(e){var t=e.which||e.keyCode;37!==t||f.attr("disabled")||c._zoomSlideShow("prev",u),39!==t||p.attr("disabled")||c._zoomSlideShow("next",u)})},_zoomPreview:function(e){var t,i=this.$modal;if(!e.length)throw"Cannot zoom to detailed preview!";q.initModal(i),i.html(this._getModalContent()),t=e.closest(q.FRAMES),this._setZoomContent(t),i.modal("show"),this._initZoomButtons()},_zoomSlideShow:function(e,t){var i,n,o,a=this,r=a.$modal.find(".kv-zoom-actions .btn-"+e),s=a.getFrames().toArray(),l=s.length;if(!r.attr("disabled")){for(n=0;n<l;n++)if(Y(s[n]).attr("id")===t){o="prev"===e?n-1:n+1;break}o<0||l<=o||!s[o]||((i=Y(s[o])).length&&a._setZoomContent(i,!0),a._initZoomButtons(),a._raise("filezoom"+e,{previewId:t,modal:a.$modal}))}},_initZoomButton:function(){var t=this;t.$preview.find(".kv-file-zoom").each(function(){var e=Y(this);t._handler(e,"click",function(){t._zoomPreview(e)})})},_inputFileCount:function(){return this.$element.get(0).files.length},_refreshPreview:function(){var e,t=this;t._inputFileCount()&&t.showPreview&&t.isPreviewable&&(t.isAjaxUpload?(e=t.getFileStack(),t.filestack=[],e.length?t._clearFileInput():e=t.$element.get(0).files):e=t.$element.get(0).files,e&&e.length&&(t.readFiles(e),t._setFileDropZoneTitle()))},_clearObjects:function(e){e.find("video audio").each(function(){this.pause(),Y(this).remove()}),e.find("img object div").each(function(){Y(this).remove()})},_clearFileInput:function(){var e,t,i,n=this.$element;this._inputFileCount()&&(e=n.closest("form"),t=Y(document.createElement("form")),i=Y(document.createElement("div")),n.before(i),e.length?e.after(t):i.after(t),t.append(n).trigger("reset"),i.before(n).remove(),t.remove())},_resetUpload:function(){var e=this;e.uploadCache={content:[],config:[],tags:[],append:!0},e.uploadCount=0,e.uploadStatus={},e.uploadLog=[],e.uploadAsyncCount=0,e.loadedImages=[],e.totalImagesCount=0,e.$btnUpload.removeAttr("disabled"),e._setProgress(0),e.$progress.hide(),e._resetErrors(!1),e.ajaxAborted=!1,e.ajaxRequests=[],e._resetCanvas(),e.cacheInitialPreview={},e.overwriteInitial&&(e.initialPreview=[],e.initialPreviewConfig=[],e.initialPreviewThumbTags=[],e.previewCache.data={content:[],config:[],tags:[]})},_resetCanvas:function(){var e=this;e.canvas&&e.imageCanvasContext&&e.imageCanvasContext.clearRect(0,0,e.canvas.width,e.canvas.height)},_hasInitialPreview:function(){return!this.overwriteInitial&&this.previewCache.count()},_resetPreview:function(){var e,t,i=this;i.previewCache.count()?(e=i.previewCache.out(),i._setPreviewContent(e.content),i._setInitThumbAttr(),t=i.initialCaption?i.initialCaption:e.caption,i._setCaption(t)):(i._clearPreview(),i._initCaption()),i.showPreview&&(i._initZoom(),i._initSortable())},_clearDefaultPreview:function(){this.$preview.find(".file-default-preview").remove()},_validateDefaultPreview:function(){var e=this;e.showPreview&&!q.isEmpty(e.defaultPreviewContent)&&(e._setPreviewContent('<div class="file-default-preview">'+e.defaultPreviewContent+"</div>"),e.$container.removeClass("file-input-new"),e._initClickable())},_resetPreviewThumbs:function(e){var t,i=this;if(e)return i._clearPreview(),void i.clearStack();i._hasInitialPreview()?(t=i.previewCache.out(),i._setPreviewContent(t.content),i._setInitThumbAttr(),i._setCaption(t.caption),i._initPreviewActions()):i._clearPreview()},_getLayoutTemplate:function(e){var t=this.layoutTemplates[e];return q.isEmpty(this.customLayoutTags)?t:q.replaceTags(t,this.customLayoutTags)},_getPreviewTemplate:function(e){var t=this.previewTemplates[e];return q.isEmpty(this.customPreviewTags)?t:q.replaceTags(t,this.customPreviewTags)},_getOutData:function(e,t,i){var n=this;return e=e||{},t=t||{},i=i||n.filestack.slice(0)||{},{form:n.formdata,files:i,filenames:n.filenames,filescount:n.getFilesCount(),extra:n._getExtraData(),response:t,reader:n.reader,jqXHR:e}},_getMsgSelected:function(e){var t=1===e?this.fileSingle:this.filePlural;return 0<e?this.msgSelected.replace("{n}",e).replace("{files}",t):this.msgNoFilesSelected},_getFrame:function(e){var t=Y("#"+e);return t.length?t:(this._log('Invalid thumb frame with id: "'+e+'".'),null)},_getThumbs:function(e){return e=e||"",this.getFrames(":not(.file-preview-initial)"+e)},_getExtraData:function(e,t){var i=this.uploadExtraData;return"function"==typeof this.uploadExtraData&&(i=this.uploadExtraData(e,t)),i},_initXhr:function(e,o,a){var r=this;return e.upload&&e.upload.addEventListener("progress",function(e){var t=0,i=e.total,n=e.loaded||e.position;e.lengthComputable&&(t=Math.floor(n/i*100)),o?r._setAsyncUploadStatus(o,t,a):r._setProgress(t)},!1),e},_initAjaxSettings:function(){this._ajaxSettings=Y.extend(!0,{},this.ajaxSettings),this._ajaxDeleteSettings=Y.extend(!0,{},this.ajaxDeleteSettings)},_mergeAjaxCallback:function(e,t,i){var n,o=this._ajaxSettings,a=this.mergeAjaxCallbacks;"delete"===i&&(o=this._ajaxDeleteSettings,a=this.mergeAjaxDeleteCallbacks),n=o[e],o[e]=a&&"function"==typeof n?"before"===a?function(){n.apply(this,arguments),t.apply(this,arguments)}:function(){t.apply(this,arguments),n.apply(this,arguments)}:t},_ajaxSubmit:function(e,t,i,n,o,a){var r,s=this;s._raise("filepreajax",[o,a])&&(s._uploadExtra(o,a),s._initAjaxSettings(),s._mergeAjaxCallback("beforeSend",e),s._mergeAjaxCallback("success",t),s._mergeAjaxCallback("complete",i),s._mergeAjaxCallback("error",n),r=Y.extend(!0,{},{xhr:function(){var e=Y.ajaxSettings.xhr();return s._initXhr(e,o,s.getFileStack().length)},url:a&&s.uploadUrlThumb?s.uploadUrlThumb:s.uploadUrl,type:"POST",dataType:"json",data:s.formdata,cache:!1,processData:!1,contentType:!1},s._ajaxSettings),s.ajaxRequests.push(Y.ajax(r)))},_mergeArray:function(e,t){var i=q.cleanArray(this[e]),n=q.cleanArray(t);this[e]=i.concat(n)},_initUploadSuccess:function(e,t,i){var n,o,a,r,s,l,d,c,u,h=this;h.showPreview&&"object"==typeof e&&!Y.isEmptyObject(e)&&void 0!==e.initialPreview&&0<e.initialPreview.length&&(h.hasInitData=!0,l=e.initialPreview||[],d=e.initialPreviewConfig||[],c=e.initialPreviewThumbTags||[],n=void 0===e.append||e.append,0<l.length&&!q.isArray(l)&&(l=l.split(h.initialPreviewDelimiter)),h._mergeArray("initialPreview",l),h._mergeArray("initialPreviewConfig",d),h._mergeArray("initialPreviewThumbTags",c),void 0!==t?i?(u=t.attr("data-fileindex"),h.uploadCache.content[u]=l[0],h.uploadCache.config[u]=d[0]||[],h.uploadCache.tags[u]=c[0]||[],h.uploadCache.append=n):(a=h.previewCache.add(l,d[0],c[0],n),o=h.previewCache.get(a,!1),(s=(r=Y(document.createElement("div")).html(o).hide().insertAfter(t)).find(".kv-zoom-cache"))&&s.length&&s.insertAfter(t),t.fadeOut("slow",function(){var e=r.find(".file-preview-frame");e&&e.length&&e.insertBefore(t).fadeIn("slow").css("display:inline-block"),h._initPreviewActions(),h._clearFileInput(),q.cleanZoomCache(h.$preview.find("#zoom-"+t.attr("id"))),t.remove(),r.remove(),h._initSortable()})):(h.previewCache.set(l,d,c,n),h._initPreview(),h._initPreviewActions()))},_initSuccessThumbs:function(){var o=this;o.showPreview&&o._getThumbs(q.FRAMES+".file-preview-success").each(function(){var i=Y(this),n=o.$preview,e=i.find(".kv-file-remove");e.removeAttr("disabled"),o._handler(e,"click",function(){var e=i.attr("id"),t=o._raise("filesuccessremove",[e,i.attr("data-fileindex")]);q.cleanMemory(i),!1!==t&&i.fadeOut("slow",function(){q.cleanZoomCache(n.find("#zoom-"+e)),i.remove(),o.getFrames().length||o.reset()})})})},_checkAsyncComplete:function(){var e,t,i=this;for(t=0;t<i.filestack.length;t++)if(i.filestack[t]&&(e=i.previewInitId+"-"+t,-1===Y.inArray(e,i.uploadLog)))return!1;return i.uploadAsyncCount===i.uploadLog.length},_uploadExtra:function(e,t){var i=this,n=i._getExtraData(e,t);0!==n.length&&Y.each(n,function(e,t){i.formdata.append(e,t)})},_uploadSingle:function(a,r){var o,s,e,l,t,d,i,n,c,u,h,f=this,p=f.getFileStack().length,m=new FormData,g=f.previewInitId+"-"+a,v=0<f.filestack.length||!Y.isEmptyObject(f.uploadExtraData),y=Y("#"+g).find(".file-thumb-progress"),b={id:g,index:a};f.formdata=m,f.showPreview&&(s=Y("#"+g+":not(.file-preview-initial)"),l=s.find(".kv-file-upload"),t=s.find(".kv-file-remove"),y.show()),0===p||!v||l&&l.hasClass("disabled")||f._abort(b)||(h=function(e,t){d||f.updateStack(e,void 0),f.uploadLog.push(t),f._checkAsyncComplete()&&(f.fileBatchCompleted=!0)},e=function(){var t,i,n,o=f.uploadCache,a=0,r=f.cacheInitialPreview;f.fileBatchCompleted&&(r&&r.content&&(a=r.content.length),setTimeout(function(){var e=0===f.getFileStack(!0).length;if(f.showPreview){if(f.previewCache.set(o.content,o.config,o.tags,o.append),a){for(i=0;i<o.content.length;i++)n=i+a,r.content[n]=o.content[i],r.config.length&&(r.config[n]=o.config[i]),r.tags.length&&(r.tags[n]=o.tags[i]);f.initialPreview=q.cleanArray(r.content),f.initialPreviewConfig=q.cleanArray(r.config),f.initialPreviewThumbTags=q.cleanArray(r.tags)}else f.initialPreview=o.content,f.initialPreviewConfig=o.config,f.initialPreviewThumbTags=o.tags;f.cacheInitialPreview={},f.hasInitData&&(f._initPreview(),f._initPreviewActions())}f.unlock(e),e&&f._clearFileInput(),t=f.$preview.find(".file-preview-initial"),f.uploadAsync&&t.length&&(q.addCss(t,q.SORT_CSS),f._initSortable()),f._raise("filebatchuploadcomplete",[f.filestack,f._getExtraData()]),f.uploadCount=0,f.uploadStatus={},f.uploadLog=[],f._setProgress(101),f.ajaxAborted=!1},100))},i=function(e){o=f._getOutData(e),f.fileBatchCompleted=!1,r||(f.ajaxAborted=!1),f.showPreview&&(s.hasClass("file-preview-success")||(f._setThumbStatus(s,"Loading"),q.addCss(s,"file-uploading")),l.attr("disabled",!0),t.attr("disabled",!0)),r||f.lock(),f._raise("filepreupload",[o,g,a]),Y.extend(!0,b,o),f._abort(b)&&(e.abort(),r||(f._setThumbStatus(s,"New"),s.removeClass("file-uploading"),l.removeAttr("disabled"),t.removeAttr("disabled"),f.unlock()),f._setProgressCancelled())},n=function(e,t,i){var n=f.showPreview&&s.attr("id")?s.attr("id"):g;o=f._getOutData(i,e),Y.extend(!0,b,o),setTimeout(function(){q.isEmpty(e)||q.isEmpty(e.error)?(f.showPreview&&(f._setThumbStatus(s,"Success"),l.hide(),f._initUploadSuccess(e,s,r),f._setProgress(101,y)),f._raise("fileuploaded",[o,n,a]),r?h(a,n):f.updateStack(a,void 0)):(d=!0,f._showUploadError(e.error,b),f._setPreviewError(s,a,f.filestack[a],f.retryErrorUploads),f.retryErrorUploads||l.hide(),r&&h(a,n),f._setProgress(101,Y("#"+n).find(".file-thumb-progress"),f.msgUploadError))},100)},c=function(){setTimeout(function(){f.showPreview&&(l.removeAttr("disabled"),t.removeAttr("disabled"),s.removeClass("file-uploading")),r?e():(f.unlock(!1),f._clearFileInput()),f._initSuccessThumbs()},100)},u=function(e,t,i){var n=f.ajaxOperations.uploadThumb,o=f._parseError(n,e,i,r&&f.filestack[a].name?f.filestack[a].name:null);d=!0,setTimeout(function(){r&&h(a,g),f.uploadStatus[g]=100,f._setPreviewError(s,a,f.filestack[a],f.retryErrorUploads),f.retryErrorUploads||l.hide(),Y.extend(!0,b,f._getOutData(e)),f._setProgress(101,y,f.msgAjaxProgressError.replace("{operation}",n)),f._setProgress(101,Y("#"+g).find(".file-thumb-progress"),f.msgUploadError),f._showUploadError(o,b)},100)},m.append(f.uploadFileAttr,f.filestack[a],f.filenames[a]),m.append("file_id",a),f._ajaxSubmit(i,n,c,u,g,a))},_uploadBatch:function(){var e,t,i,n,s,l=this,o=l.filestack,r=o.length,a=0<l.filestack.length||!Y.isEmptyObject(l.uploadExtraData);l.formdata=new FormData,0!==r&&a&&!l._abort({})&&(s=function(){Y.each(o,function(e){l.updateStack(e,void 0)}),l._clearFileInput()},e=function(e){l.lock();var t=l._getOutData(e);l.ajaxAborted=!1,l.showPreview&&l._getThumbs().each(function(){var e=Y(this),t=e.find(".kv-file-upload"),i=e.find(".kv-file-remove");e.hasClass("file-preview-success")||(l._setThumbStatus(e,"Loading"),q.addCss(e,"file-uploading")),t.attr("disabled",!0),i.attr("disabled",!0)}),l._raise("filebatchpreupload",[t]),l._abort(t)&&(e.abort(),l._getThumbs().each(function(){var e=Y(this),t=e.find(".kv-file-upload"),i=e.find(".kv-file-remove");e.hasClass("file-preview-loading")&&(l._setThumbStatus(e,"New"),e.removeClass("file-uploading")),t.removeAttr("disabled"),i.removeAttr("disabled")}),l._setProgressCancelled())},t=function(e,t,i){var n=l._getOutData(i,e),o=0,a=l._getThumbs(":not(.file-preview-success)"),r=q.isEmpty(e)||q.isEmpty(e.errorkeys)?[]:e.errorkeys;q.isEmpty(e)||q.isEmpty(e.error)?(l._raise("filebatchuploadsuccess",[n]),s(),l.showPreview?(a.each(function(){var e=Y(this);l._setThumbStatus(e,"Success"),e.removeClass("file-uploading"),e.find(".kv-file-upload").hide().removeAttr("disabled")}),l._initUploadSuccess(e)):l.reset(),l._setProgress(101)):(l.showPreview&&(a.each(function(){var e=Y(this),t=e.attr("data-fileindex");e.removeClass("file-uploading"),e.find(".kv-file-upload").removeAttr("disabled"),e.find(".kv-file-remove").removeAttr("disabled"),0===r.length||-1!==Y.inArray(o,r)?(l._setPreviewError(e,t,l.filestack[t],l.retryErrorUploads),l.retryErrorUploads||(e.find(".kv-file-upload").hide(),l.updateStack(t,void 0))):(e.find(".kv-file-upload").hide(),l._setThumbStatus(e,"Success"),l.updateStack(t,void 0)),e.hasClass("file-preview-error")&&!l.retryErrorUploads||o++}),l._initUploadSuccess(e)),l._showUploadError(e.error,n,"filebatchuploaderror"),l._setProgress(101,l.$progress,l.msgUploadError))},n=function(){l.unlock(),l._initSuccessThumbs(),l._clearFileInput(),l._raise("filebatchuploadcomplete",[l.filestack,l._getExtraData()])},i=function(e,t,i){var n=l._getOutData(e),o=l.ajaxOperations.uploadBatch,a=l._parseError(o,e,i);l._showUploadError(a,n,"filebatchuploaderror"),l.uploadFileCount=r-1,l.showPreview&&(l._getThumbs().each(function(){var e=Y(this),t=e.attr("data-fileindex");e.removeClass("file-uploading"),void 0!==l.filestack[t]&&l._setPreviewError(e)}),l._getThumbs().removeClass("file-uploading"),l._getThumbs(" .kv-file-upload").removeAttr("disabled"),l._getThumbs(" .kv-file-delete").removeAttr("disabled"),l._setProgress(101,l.$progress,l.msgAjaxProgressError.replace("{operation}",o)))},Y.each(o,function(e,t){q.isEmpty(o[e])||l.formdata.append(l.uploadFileAttr,t,l.filenames[e])}),l._ajaxSubmit(e,t,n,i))},_uploadExtraOnly:function(){var e,t,i,n,r=this,s={};r.formdata=new FormData,r._abort(s)||(e=function(e){r.lock();var t=r._getOutData(e);r._raise("filebatchpreupload",[t]),r._setProgress(50),s.data=t,s.xhr=e,r._abort(s)&&(e.abort(),r._setProgressCancelled())},t=function(e,t,i){var n=r._getOutData(i,e);q.isEmpty(e)||q.isEmpty(e.error)?(r._raise("filebatchuploadsuccess",[n]),r._clearFileInput(),r._initUploadSuccess(e),r._setProgress(101)):r._showUploadError(e.error,n,"filebatchuploaderror")},i=function(){r.unlock(),r._clearFileInput(),r._raise("filebatchuploadcomplete",[r.filestack,r._getExtraData()])},n=function(e,t,i){var n=r._getOutData(e),o=r.ajaxOperations.uploadExtra,a=r._parseError(o,e,i);s.data=n,r._showUploadError(a,n,"filebatchuploaderror"),r._setProgress(101,r.$progress,r.msgAjaxProgressError.replace("{operation}",o))},r._ajaxSubmit(e,t,i,n))},_deleteFileIndex:function(e){var t=this,i=e.attr("data-fileindex"),n=t.reversePreviewOrder;"init_"===i.substring(0,5)&&(i=parseInt(i.replace("init_","")),t.initialPreview=q.spliceArray(t.initialPreview,i,n),t.initialPreviewConfig=q.spliceArray(t.initialPreviewConfig,i,n),t.initialPreviewThumbTags=q.spliceArray(t.initialPreviewThumbTags,i,n),t.getFrames().each(function(){var e=Y(this),t=e.attr("data-fileindex");"init_"===t.substring(0,5)&&(t=parseInt(t.replace("init_","")),i<t&&(t--,e.attr("data-fileindex","init_"+t)))}),t.uploadAsync&&(t.cacheInitialPreview=t.getPreview()))},_initFileActions:function(){var c=this,u=c.$preview;c.showPreview&&(c._initZoomButton(),c.getFrames(" .kv-file-remove").each(function(){var o,a,r,e=Y(this),s=e.closest(q.FRAMES),l=s.attr("id"),d=s.attr("data-fileindex");c._handler(e,"click",function(){if(!1===c._raise("filepreremove",[l,d])||!c._validateMinCount())return!1;o=s.hasClass("file-preview-error"),q.cleanMemory(s),s.fadeOut("slow",function(){q.cleanZoomCache(u.find("#zoom-"+l)),c.updateStack(d,void 0),c._clearObjects(s),s.remove(),l&&o&&c.$errorContainer.find('li[data-file-id="'+l+'"]').fadeOut("fast",function(){Y(this).remove(),c._errorsExist()||c._resetErrors()}),c._clearFileInput();var e=c.getFileStack(!0),t=c.previewCache.count(),i=e.length,n=c.showPreview&&c.getFrames().length;0!==i||0!==t||n?(r=1<(a=t+i)?c._getMsgSelected(a):e[0]?c._getFileNames()[0]:"",c._setCaption(r)):c.reset(),c._raise("fileremoved",[l,d])})})}),c.getFrames(" .kv-file-upload").each(function(){var i=Y(this);c._handler(i,"click",function(){var e=i.closest(q.FRAMES),t=e.attr("data-fileindex");c.$progress.hide(),e.hasClass("file-preview-error")&&!c.retryErrorUploads||c._uploadSingle(t,!1)})}))},_initPreviewActions:function(){var f=this,p=f.$preview,m=f.deleteExtraData||{},e=q.FRAMES+" .kv-file-remove",t=f.fileActionSettings,g=t.removeClass,v=t.removeErrorClass,y=function(){var e=f.isAjaxUpload?f.previewCache.count():f._inputFileCount();p.find(q.FRAMES).length||e||(f._setCaption(""),f.reset(),f.initialCaption="")};f._initZoomButton(),p.find(e).each(function(){var e,t,i,a=Y(this),n=a.data("url")||f.deleteUrl,r=a.data("key");if(!q.isEmpty(n)&&void 0!==r){var o,s,l,d,c=a.closest(q.FRAMES),u=f.previewCache.data,h=c.attr("data-fileindex");h=parseInt(h.replace("init_","")),l=q.isEmpty(u.config)&&q.isEmpty(u.config[h])?null:u.config[h],"function"==typeof(d=q.isEmpty(l)||q.isEmpty(l.extra)?m:l.extra)&&(d=d()),s={id:a.attr("id"),key:r,extra:d},e=function(e){f.ajaxAborted=!1,f._raise("filepredelete",[r,e,d]),f._abort()?e.abort():(a.removeClass(v),q.addCss(c,"file-uploading"),q.addCss(a,"disabled "+g))},t=function(e,t,i){var n,o;if(!q.isEmpty(e)&&!q.isEmpty(e.error))return s.jqXHR=i,s.response=e,f._showError(e.error,s,"filedeleteerror"),c.removeClass("file-uploading"),a.removeClass("disabled "+g).addClass(v),void y();c.removeClass("file-uploading").addClass("file-deleted"),c.fadeOut("slow",function(){h=parseInt(c.attr("data-fileindex").replace("init_","")),f.previewCache.unset(h),f._deleteFileIndex(c),n=f.previewCache.count(),o=0<n?f._getMsgSelected(n):"",f._setCaption(o),f._raise("filedeleted",[r,i,d]),q.cleanZoomCache(p.find("#zoom-"+c.attr("id"))),f._clearObjects(c),c.remove(),y()})},i=function(e,t,i){var n=f.ajaxOperations.deleteThumb,o=f._parseError(n,e,i);s.jqXHR=e,s.response={},f._showError(o,s,"filedeleteerror"),c.removeClass("file-uploading"),a.removeClass("disabled "+g).addClass(v),y()},f._initAjaxSettings(),f._mergeAjaxCallback("beforeSend",e,"delete"),f._mergeAjaxCallback("success",t,"delete"),f._mergeAjaxCallback("error",i,"delete"),o=Y.extend(!0,{},{url:n,type:"POST",dataType:"json",data:Y.extend(!0,{},{key:r},d)},f._ajaxDeleteSettings),f._handler(a,"click",function(){if(!f._validateMinCount())return!1;f.ajaxAborted=!1,f._raise("filebeforedelete",[r,d]),f.ajaxAborted instanceof Promise?f.ajaxAborted.then(function(e){e||Y.ajax(o)}):f.ajaxAborted||Y.ajax(o)})}})},_hideFileIcon:function(){this.overwriteInitial&&this.$captionContainer.removeClass("icon-visible")},_showFileIcon:function(){q.addCss(this.$captionContainer,"icon-visible")},_getSize:function(e){var t,i,n,o=parseFloat(e),a=this.fileSizeGetter;return Y.isNumeric(e)&&Y.isNumeric(o)?(n="function"==typeof a?a(o):0===o?"0.00 B":(t=Math.floor(Math.log(o)/Math.log(1024)),i=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],1*(o/Math.pow(1024,t)).toFixed(2)+" "+i[t]),this._getLayoutTemplate("size").replace("{sizeText}",n)):""},_generatePreviewTemplate:function(s,e,l,d,c,t,i,u,n,h,f){var o,p=this,m=p.slug(l),a="",g="",r=(window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth)<400?p.previewSettingsSmall[s]||p.defaults.previewSettingsSmall[s]:p.previewSettings[s]||p.defaults.previewSettings[s],v=n||p._renderFileFooter(m,i,"auto",t),y=p._getPreviewIcon(l),b="type-default",x=y&&p.preferIconicPreview,w=y&&p.preferIconicZoomPreview;return r&&Y.each(r,function(e,t){g+=e+":"+t+";"}),o=function(e,t,i,n){var o=i?"zoom-"+c:c,a=p._getPreviewTemplate(e),r=(u||"")+" "+n;return p.frameClass&&(r=p.frameClass+" "+r),i&&(r=r.replace(" "+q.SORT_CSS,"")),a=p._parseFilePreviewIcon(a,l),"text"===e&&(t=q.htmlEncode(t)),"object"!==s||d||Y.each(p.defaults.fileTypeSettings,function(e,t){"object"!==e&&"other"!==e&&t(l,d)&&(b="type-"+e)}),a.setTokens({previewId:o,caption:m,frameClass:r,type:d,fileindex:h,typeCss:b,footer:v,data:t,template:f||s,style:g?'style="'+g+'"':""})},h=h||c.slice(c.lastIndexOf("-")+1),p.fileActionSettings.showZoom&&(a=o(w?"other":s,e,!0,"kv-zoom-thumb")),a="\n"+p._getLayoutTemplate("zoomCache").replace("{zoomContent}",a),o(x?"other":s,e,!1,"kv-preview-thumb")+a},_addToPreview:function(e,t){return this.reversePreviewOrder?e.prepend(t):e.append(t)},_previewDefault:function(e,t,i){var n=this,o=n.$preview;if(n.showPreview){var a,r=e?e.name:"",s=e?e.type:"",l=e.size||0,d=n.slug(r),c=!0===i&&!n.isAjaxUpload,u=q.objUrl.createObjectURL(e);n._clearDefaultPreview(),a=n._generatePreviewTemplate("other",u,r,s,t,c,l),n._addToPreview(o,a),n._setThumbAttr(t,d,l),!0===i&&n.isAjaxUpload&&n._setThumbStatus(Y("#"+t),"Error")}},_previewFile:function(e,t,i,n,o,a){if(this.showPreview){var r,s=this,l=t?t.name:"",d=a.type,c=a.name,u=s._parseFileType(d,l),h=s.allowedPreviewTypes,f=s.allowedPreviewMimeTypes,p=s.$preview,m=t.size||0,g=h&&0<=h.indexOf(u),v=f&&-1!==f.indexOf(d),y="text"===u||"html"===u||"image"===u?i.target.result:o;if("html"===u&&s.purifyHtml&&window.DOMPurify&&(y=window.DOMPurify.sanitize(y)),g||v){r=s._generatePreviewTemplate(u,y,l,d,n,!1,m),s._clearDefaultPreview(),s._addToPreview(p,r);var b=p.find("#"+n+" img");s._validateImageOrientation(b,t,n,c,d,m,y)}else s._previewDefault(t,n);s._setThumbAttr(n,c,m),s._initSortable()}},_setThumbAttr:function(e,t,i){var n=Y("#"+e);n.length&&(i=i&&0<i?this._getSize(i):"",n.data({caption:t,size:i}))},_setInitThumbAttr:function(){var e,t,i,n,o=this.previewCache.data,a=this.previewCache.count();if(0!==a)for(var r=0;r<a;r++)e=o.config[r],n=this.previewInitId+"-init_"+r,t=q.ifSet("caption",e,q.ifSet("filename",e)),i=q.ifSet("size",e),this._setThumbAttr(n,t,i)},_slugDefault:function(e){return q.isEmpty(e)?"":String(e).replace(/[\[\]\/\{}:;#%=\(\)\*\+\?\\\^\$\|<>&"']/g,"_")},_updateFileDetails:function(e){var t=this,i=t.$element,n=t.getFileStack(),o=q.isIE(9)&&q.findFileName(i.val())||i[0].files[0]&&i[0].files[0].name||n.length&&n[0].name||"",a=t.slug(o),r=t.isAjaxUpload?n.length:e,s=t.previewCache.count()+r,l=1===r?a:t._getMsgSelected(s);t.isError?(t.$previewContainer.removeClass("file-thumb-loading"),t.$previewStatus.html(""),t.$captionContainer.removeClass("icon-visible")):t._showFileIcon(),t._setCaption(l,t.isError),t.$container.removeClass("file-input-new file-input-ajax-new"),1===arguments.length&&t._raise("fileselect",[e,a]),t.previewCache.count()&&t._initPreviewActions()},_setThumbStatus:function(e,t){if(this.showPreview){var i="indicator"+t,n=i+"Title",o="file-preview-"+t.toLowerCase(),a=e.find(".file-upload-indicator"),r=this.fileActionSettings;e.removeClass("file-preview-success file-preview-error file-preview-loading"),"Success"===t&&e.find(".file-drag-handle").remove(),a.html(r[i]),a.attr("title",r[n]),e.addClass(o),"Error"!==t||this.retryErrorUploads||e.find(".kv-file-upload").attr("disabled",!0)}},_setProgressCancelled:function(){this._setProgress(101,this.$progress,this.msgCancelled)},_setProgress:function(e,t,i){var n,o=this,a=Math.min(e,100),r=o.progressUploadThreshold,s=e<=100?o.progressTemplate:o.progressCompleteTemplate,l=a<100?o.progressTemplate:i?o.progressErrorTemplate:s;t=t||o.$progress,q.isEmpty(l)||(n=r&&r<a&&e<=100?l.setTokens({percent:r,status:o.msgUploadThreshold}):l.setTokens({percent:a,status:100<e?o.msgUploadEnd:a+"%"}),t.html(n),i&&t.find('[role="progressbar"]').html(i))},_setFileDropZoneTitle:function(){var e,t=this,i=t.$container.find(".file-drop-zone"),n=t.dropZoneTitle;t.isClickable&&(e=q.isEmpty(t.$element.attr("multiple"))?t.fileSingle:t.filePlural,n+=t.dropZoneClickTitle.replace("{files}",e)),i.find("."+t.dropZoneTitleClass).remove(),!t.showPreview||0===i.length||0<t.getFileStack().length||!t.dropZoneEnabled||!t.isAjaxUpload&&t.$element.files||(0===i.find(q.FRAMES).length&&q.isEmpty(t.defaultPreviewContent)&&i.prepend('<div class="'+t.dropZoneTitleClass+'">'+n+"</div>"),t.$container.removeClass("file-input-new"),q.addCss(t.$container,"file-input-ajax-new"))},_setAsyncUploadStatus:function(e,t,i){var n=0;this._setProgress(t,Y("#"+e).find(".file-thumb-progress")),this.uploadStatus[e]=t,Y.each(this.uploadStatus,function(e,t){n+=t}),this._setProgress(Math.floor(n/i))},_validateMinCount:function(){var e=this,t=e.isAjaxUpload?e.getFileStack().length:e._inputFileCount();return!(e.validateInitialCount&&0<e.minFileCount&&e._getFileCount(t-1)<e.minFileCount)||(e._noFilesError({}),!1)},_getFileCount:function(e){return this.validateInitialCount&&!this.overwriteInitial&&(e+=this.previewCache.count()),e},_getFileId:function(e){var t,i=this.generateFileId;return"function"==typeof i?i(e,event):e&&(t=String(e.webkitRelativePath||e.fileName||e.name||null))?e.size+"-"+t.replace(/[^0-9a-zA-Z_-]/gim,""):null},_getFileName:function(e){return e&&e.name?this.slug(e.name):void 0},_getFileIds:function(t){return this.fileids.filter(function(e){return t?void 0!==e:null!=e})},_getFileNames:function(t){return this.filenames.filter(function(e){return t?void 0!==e:null!=e})},_setPreviewError:function(e,t,i,n){var o=this;void 0!==t&&o.updateStack(t,i),o.showPreview&&(!o.removeFromPreviewOnError||n?(o._setThumbStatus(e,"Error"),o._refreshUploadButton(e,n)):e.remove())},_refreshUploadButton:function(e,t){var i=e.find(".kv-file-upload"),n=this.fileActionSettings,o=n.uploadIcon,a=n.uploadTitle;i.length&&(t&&(o=n.uploadRetryIcon,a=n.uploadRetryTitle),i.attr("title",a).html(o))},_checkDimensions:function(e,t,i,n,o,a,r){var s,l,d,c=this[("Small"===t?"min":"max")+"Image"+a];!q.isEmpty(c)&&i.length&&(d=i[0],l="Width"===a?d.naturalWidth||d.width:d.naturalHeight||d.height,("Small"===t?c<=l:l<=c)||(s=this["msgImage"+a+t].setTokens({name:o,size:c}),this._showUploadError(s,r),this._setPreviewError(n,e,null)))},_getExifObj:function(e){var t=null;try{t=window.piexif?window.piexif.load(e):null}catch(e){t=null}return t||this._log("Error loading the piexif.js library."),t},_validateImageOrientation:function(e,t,i,n,o,a,r){var s,l,d=this;(l=(s=e.length&&d.autoOrientImage?d._getExifObj(r):null)?s["0th"][piexif.ImageIFD.Orientation]:null)&&(q.setImageOrientation(e,d.$preview.find("#zoom-"+i+" img"),l),d._raise("fileimageoriented",{$img:e,file:t})),d._validateImage(i,n,o,a,r,s)},_validateImage:function(e,t,i,n,o,a){var r,s,l=this,d=l.$preview,c=d.find("#"+e),u=c.attr("data-fileindex"),h=c.find("img");t=t||"Untitled",h.one("load",function(){s=c.width(),d.width()<s&&h.css("width","100%"),r={ind:u,id:e},l._checkDimensions(u,"Small",h,c,t,"Width",r),l._checkDimensions(u,"Small",h,c,t,"Height",r),l.resizeImage||(l._checkDimensions(u,"Large",h,c,t,"Width",r),l._checkDimensions(u,"Large",h,c,t,"Height",r)),l._raise("fileimageloaded",[e]),l.loadedImages.push({ind:u,img:h,thumb:c,pid:e,typ:i,siz:n,validated:!1,imgData:o,exifObj:a}),c.data("exif",a),l._validateAllImages()}).one("error",function(){l._raise("fileimageloaderror",[e])}).each(function(){this.complete?Y(this).trigger("load"):this.error&&Y(this).trigger("error")})},_validateAllImages:function(){var e,t,i,n=this,o={val:0},a=n.loadedImages.length,r=n.resizeIfSizeMoreThan;if(a===n.totalImagesCount&&(n._raise("fileimagesloaded"),n.resizeImage))for(e=0;e<n.loadedImages.length;e++)(t=n.loadedImages[e]).validated||((i=t.siz)&&1e3*r<i&&n._getResizedImage(t,o,a),n.loadedImages[e].validated=!0)},_getResizedImage:function(e,t,i){var n,o,a,r,s,l,d=this,c=Y(e.img)[0],u=c.naturalWidth,h=c.naturalHeight,f=1,p=d.maxImageWidth||u,m=d.maxImageHeight||h,g=!(!u||!h),v=d.imageCanvas,y=d.imageCanvasContext,b=e.typ,x=e.pid,w=e.ind,_=e.thumb,C=e.exifObj;if(s=function(e,t,i){d.isAjaxUpload?d._showUploadError(e,t,i):d._showError(e,t,i),d._setPreviewError(_,w)},d.filestack[w]&&g&&!(u<=p&&h<=m)||(g&&d.filestack[w]&&d._raise("fileimageresized",[x,w]),t.val++,t.val===i&&d._raise("fileimagesresized"),g)){b=b||d.resizeDefaultImageType,o=p<u,a=m<h,f="width"===d.resizePreference?o?p/u:a?m/h:1:a?m/h:o?p/u:1,d._resetCanvas(),u*=f,h*=f,v.width=u,v.height=h;try{y.drawImage(c,0,0,u,h),r=v.toDataURL(b,d.resizeQuality),C&&(l=window.piexif.dump(C),r=window.piexif.insert(l,r)),n=q.dataURI2Blob(r),d.filestack[w]=n,d._raise("fileimageresized",[x,w]),t.val++,t.val===i&&d._raise("fileimagesresized",[void 0,void 0]),n instanceof Blob||s(d.msgImageResizeError,{id:x,index:w},"fileimageresizeerror")}catch(e){t.val++,t.val===i&&d._raise("fileimagesresized",[void 0,void 0]),s(d.msgImageResizeException.replace("{errors}",e.message),{id:x,index:w},"fileimageresizeexception")}}else s(d.msgImageResizeError,{id:x,index:w},"fileimageresizeerror")},_initBrowse:function(e){var t=this.$element;this.showBrowse?this.$btnFile=e.find(".btn-file").append(t):(t.appendTo(e).attr("tabindex",-1),q.addCss(t,"file-no-browse"))},_initClickable:function(){var i,e,n=this;n.isClickable&&(i=n.$dropZone,n.isAjaxUpload||(e=n.$preview.find(".file-default-preview")).length&&(i=e),q.addCss(i,"clickable"),i.attr("tabindex",-1),n._handler(i,"click",function(e){var t=Y(e.target);Y(n.elErrorContainer+":visible").length||t.parents(".file-preview-thumbnails").length&&!t.parents(".file-default-preview").length||(n.$element.data("zoneClicked",!0).trigger("click"),i.blur())}))},_initCaption:function(){var e=this.initialCaption||"";return this.overwriteInitial||q.isEmpty(e)?(this.$caption.val(""),!1):(this._setCaption(e),!0)},_setCaption:function(e,t){var i,n,o,a,r,s=this,l=s.getFileStack();if(s.$caption.length){if(s.$captionContainer.removeClass("icon-visible"),t)i=Y("<div>"+s.msgValidationError+"</div>").text(),r=(a=l.length)?1===a&&l[0]?s._getFileNames()[0]:s._getMsgSelected(a):s._getMsgSelected(s.msgNo),n=q.isEmpty(e)?r:e,o='<span class="'+s.msgValidationErrorClass+'">'+s.msgValidationErrorIcon+"</span>";else{if(q.isEmpty(e))return;n=i=Y("<div>"+e+"</div>").text(),o=s._getLayoutTemplate("fileIcon")}s.$captionContainer.addClass("icon-visible"),s.$caption.attr("title",i).val(n),s.$captionIcon.html(o)}},_createContainer:function(){var e=this,t={class:"file-input file-input-new"+(e.rtl?" kv-rtl":"")},i=Y(document.createElement("div")).attr(t).html(e._renderMain());return i.insertBefore(e.$element),e._initBrowse(i),e.theme&&i.addClass("theme-"+e.theme),i},_refreshContainer:function(){var e=this,t=e.$container;e.$element.insertAfter(t),t.html(e._renderMain()),e._initBrowse(t),e._validateDisabled()},_validateDisabled:function(){this.$caption.attr({readonly:this.isDisabled})},_renderMain:function(){var e=this,t=e.dropZoneEnabled?" file-drop-zone":"file-drop-disabled",i=e.showClose?e._getLayoutTemplate("close"):"",n=e.showPreview?e._getLayoutTemplate("preview").setTokens({class:e.previewClass,dropClass:t}):"",o=e.isDisabled?e.captionClass+" file-caption-disabled":e.captionClass,a=e.captionTemplate.setTokens({class:o+" kv-fileinput-caption"});return e.mainTemplate.setTokens({class:e.mainClass+(!e.showBrowse&&e.showCaption?" no-browse":""),preview:n,close:i,caption:a,upload:e._renderButton("upload"),remove:e._renderButton("remove"),cancel:e._renderButton("cancel"),browse:e._renderButton("browse")})},_renderButton:function(e){var t=this,i=t._getLayoutTemplate("btnDefault"),n=t[e+"Class"],o=t[e+"Title"],a=t[e+"Icon"],r=t[e+"Label"],s=t.isDisabled?" disabled":"",l="button";switch(e){case"remove":if(!t.showRemove)return"";break;case"cancel":if(!t.showCancel)return"";n+=" kv-hidden";break;case"upload":if(!t.showUpload)return"";t.isAjaxUpload&&!t.isDisabled?i=t._getLayoutTemplate("btnLink").replace("{href}",t.uploadUrl):l="submit";break;case"browse":if(!t.showBrowse)return"";i=t._getLayoutTemplate("btnBrowse");break;default:return""}return n+="browse"===e?" btn-file":" fileinput-"+e+" fileinput-"+e+"-button",q.isEmpty(r)||(r=' <span class="'+t.buttonLabelClass+'">'+r+"</span>"),i.setTokens({type:l,css:n,title:o,status:s,icon:a,label:r})},_renderThumbProgress:function(){return'<div class="file-thumb-progress kv-hidden">'+this.progressTemplate.setTokens({percent:"0",status:this.msgUploadBegin})+"</div>"},_renderFileFooter:function(e,t,i,n){var o,a=this,r=a.fileActionSettings,s=r.showRemove,l=r.showDrag,d=r.showUpload,c=r.showZoom,u=a._getLayoutTemplate("footer"),h=a._getLayoutTemplate("indicator"),f=n?r.indicatorError:r.indicatorNew,p=n?r.indicatorErrorTitle:r.indicatorNewTitle,m=h.setTokens({indicator:f,indicatorTitle:p});return t=a._getSize(t),o=a.isAjaxUpload?u.setTokens({actions:a._renderFileActions(d,!1,s,c,l,!1,!1,!1),caption:e,size:t,width:i,progress:a._renderThumbProgress(),indicator:m}):u.setTokens({actions:a._renderFileActions(!1,!1,!1,c,l,!1,!1,!1),caption:e,size:t,width:i,progress:"",indicator:m}),o=q.replaceTags(o,a.previewThumbTags)},_renderFileActions:function(e,t,i,n,o,a,r,s,l,d,c){if(!(e||t||i||n||o))return"";var u,h=this,f=!1===r?"":' data-url="'+r+'"',p=!1===s?"":' data-key="'+s+'"',m="",g="",v="",y="",b="",x=h._getLayoutTemplate("actions"),w=h.fileActionSettings,_=h.otherActionButtons.setTokens({dataKey:p,key:s}),C=a?w.removeClass+" disabled":w.removeClass;return i&&(m=h._getLayoutTemplate("actionDelete").setTokens({removeClass:C,removeIcon:w.removeIcon,removeTitle:w.removeTitle,dataUrl:f,dataKey:p,key:s})),e&&(g=h._getLayoutTemplate("actionUpload").setTokens({uploadClass:w.uploadClass,uploadIcon:w.uploadIcon,uploadTitle:w.uploadTitle})),t&&(v=(v=h._getLayoutTemplate("actionDownload").setTokens({downloadClass:w.downloadClass,downloadIcon:w.downloadIcon,downloadTitle:w.downloadTitle,downloadUrl:d||h.initialPreviewDownloadUrl})).setTokens({filename:c,key:s})),n&&(y=h._getLayoutTemplate("actionZoom").setTokens({zoomClass:w.zoomClass,zoomIcon:w.zoomIcon,zoomTitle:w.zoomTitle})),o&&l&&(u="drag-handle-init "+w.dragClass,b=h._getLayoutTemplate("actionDrag").setTokens({dragClass:u,dragTitle:w.dragTitle,dragIcon:w.dragIcon})),x.setTokens({delete:m,upload:g,download:v,zoom:y,drag:b,other:_})},_browse:function(e){var t=this;e&&e.isDefaultPrevented()||!t._raise("filebrowse")||(t.isError&&!t.isAjaxUpload&&t.clear(),t.$captionContainer.focus())},_filterDuplicate:function(e,t,i){var n=this._getFileId(e);n&&i&&-1<i.indexOf(n)||(i||(i=[]),t.push(e),i.push(n))},_change:function(e){var i=this;if(!i.changeTriggered){var t,n,o,a,r,s,l,d,c,u,h,f=i.$element,p=1<arguments.length,m=i.isAjaxUpload,g=[],v=p?arguments[1]:f.get(0).files,y=!m&&q.isEmpty(f.attr("multiple"))?1:i.maxFileCount,b=i.filestack.length,x=q.isEmpty(f.attr("multiple"))&&0<b,w=i._getFileIds();if(i.reader=null,i._resetUpload(),i._hideFileIcon(),i.dropZoneEnabled&&i.$container.find(".file-drop-zone ."+i.dropZoneTitleClass).remove(),m?Y.each(v,function(e,t){i._filterDuplicate(t,g,w)}):(v=e.target&&void 0===e.target.files?e.target.value?[{name:e.target.value.replace(/^.+\\/,"")}]:[]:e.target.files||{},g=v),q.isEmpty(g)||0===g.length)return m||i.clear(),void i._raise("fileselectnone");if(i._resetErrors(),n=g.length,t=i._getFileCount(m?i.getFileStack().length+n:n),0<y&&y<t){if(!i.autoReplace||y<n)return o=i.autoReplace&&y<n?n:t,a=y,h=i.msgFilesTooMany.replace("{m}",a).replace("{n}",o),i.isError=(r=h,d=l=s=null,c=Y.extend(!0,{},i._getOutData({},{},v),{id:l,index:d}),u={id:l,index:d,file:s,files:v},m?i._showUploadError(r,c):i._showError(r,u)),i.$captionContainer.removeClass("icon-visible"),i._setCaption("",!0),void i.$container.removeClass("file-input-new file-input-ajax-new");y<t&&i._resetPreviewThumbs(m)}else!m||x?(i._resetPreviewThumbs(!1),x&&i.clearStack()):!m||0!==b||i.previewCache.count()&&!i.overwriteInitial||i._resetPreviewThumbs(!0);i.isPreviewable?i.readFiles(g):i._updateFileDetails(1)}},_abort:function(e){var t,i=this;return i.ajaxAborted&&"object"==typeof i.ajaxAborted&&void 0!==i.ajaxAborted.message?((t=Y.extend(!0,{},i._getOutData(),e)).abortData=i.ajaxAborted.data||{},t.abortMessage=i.ajaxAborted.message,i._setProgress(101,i.$progress,i.msgCancelled),i._showUploadError(i.ajaxAborted.message,t,"filecustomerror"),i.cancel(),!0):!!i.ajaxAborted},_resetFileStack:function(){var o=this,a=0,r=[],s=[],l=[];o._getThumbs().each(function(){var e=Y(this),t=e.attr("data-fileindex"),i=o.filestack[t],n=e.attr("id");"-1"!==t&&-1!==t&&(void 0!==i?(r[a]=i,s[a]=o._getFileName(i),l[a]=o._getFileId(i),e.attr({id:o.previewInitId+"-"+a,"data-fileindex":a}),a++):e.attr({id:"uploaded-"+q.uniqId(),"data-fileindex":"-1"}),o.$preview.find("#zoom-"+n).attr({id:"zoom-"+e.attr("id"),"data-fileindex":e.attr("data-fileindex")}))}),o.filestack=r,o.filenames=s,o.fileids=l},_isFileSelectionValid:function(e){var t=this;return e=e||0,t.required&&!t.getFilesCount()?(t.$errorContainer.html(""),t._showUploadError(t.msgFileRequired),!1):!(0<t.minFileCount&&t._getFileCount(e)<t.minFileCount)||(t._noFilesError({}),!1)},clearStack:function(){return this.filestack=[],this.filenames=[],this.fileids=[],this.$element},updateStack:function(e,t){var i=this;return i.filestack[e]=t,i.filenames[e]=i._getFileName(t),i.fileids[e]=t&&i._getFileId(t)||null,i.$element},addToStack:function(e){var t=this;return t.filestack.push(e),t.filenames.push(t._getFileName(e)),t.fileids.push(t._getFileId(e)),t.$element},getFileStack:function(t){return this.filestack.filter(function(e){return t?void 0!==e:null!=e})},getFilesCount:function(){var e=this.isAjaxUpload?this.getFileStack().length:this._inputFileCount();return this._getFileCount(e)},readFiles:function(k){this.reader=new FileReader;var I,N=this,E=N.$element,M=N.$preview,D=N.reader,A=N.$previewContainer,L=N.$previewStatus,P=N.msgLoading,R=N.msgProgress,U=N.previewInitId,O=k.length,B=N.fileTypeSettings,z=N.filestack.length,F=N.allowedFileTypes,H=F?F.length:0,V=N.allowedFileExtensions,j=q.isEmpty(V)?"":V.join(", "),W=N.maxFilePreviewSize&&parseFloat(N.maxFilePreviewSize),$=M.length&&(!W||isNaN(W)),G=function(e,t,i,n){var o,a=Y.extend(!0,{},N._getOutData({},{},k),{id:i,index:n}),r={id:i,index:n,file:t,files:k};N._previewDefault(t,i,!0),N.isAjaxUpload?(N.addToStack(void 0),setTimeout(function(){I(n+1)},100)):O=0,N._initFileActions(),(o=Y("#"+i)).find(".kv-file-upload").hide(),N.removeFromPreviewOnError&&o.remove(),N.isError=N.isAjaxUpload?N._showUploadError(e,a):N._showError(e,r),N._updateFileDetails(O)};N.loadedImages=[],N.totalImagesCount=0,Y.each(k,function(e,t){var i=N.fileTypeSettings.image;i&&i(t.type)&&N.totalImagesCount++}),(I=function(c){if(q.isEmpty(E.attr("multiple"))&&(O=1),O<=c)return N.isAjaxUpload&&0<N.filestack.length?N._raise("filebatchselected",[N.getFileStack()]):N._raise("filebatchselected",[k]),A.removeClass("file-thumb-loading"),void L.html("");var e,u,n,t,i,o,a,r,h,f,p,m,g=U+"-"+(z+c),v=k[c],y=B.text,b=B.image,x=B.html,w=v&&v.name?N.slug(v.name):"",s=(v&&v.size||0)/1e3,l="",_=v?q.objUrl.createObjectURL(v):null,d=0,C="",S=0,T=function(){var e=R.setTokens({index:c+1,files:O,percent:50,name:w});setTimeout(function(){L.html(e),N._updateFileDetails(O),I(c+1)},100),N._raise("fileloaded",[v,g,c,D])};if(v){if(0<H)for(u=0;u<H;u++)o=F[u],a=N.msgFileTypes[o]||o,C+=0===u?a:", "+a;if(!1!==w){if(0===w.length)return n=N.msgInvalidFileName.replace("{name}",q.htmlEncode(v.name,"[unknown]")),void G(n,v,g,c);if(q.isEmpty(V)||(l=new RegExp("\\.("+V.join("|")+")$","i")),e=s.toFixed(2),0<N.maxFileSize&&s>N.maxFileSize)return n=N.msgSizeTooLarge.setTokens({name:w,size:e,maxSize:N.maxFileSize}),void G(n,v,g,c);if(null!==N.minFileSize&&s<=q.getNum(N.minFileSize))return n=N.msgSizeTooSmall.setTokens({name:w,size:e,minSize:N.minFileSize}),void G(n,v,g,c);if(!q.isEmpty(F)&&q.isArray(F)){for(u=0;u<F.length;u+=1)t=F[u],d+=(r=B[t])&&"function"==typeof r&&r(v.type,v.name)?1:0;if(0===d)return n=N.msgInvalidFileType.setTokens({name:w,types:C}),void G(n,v,g,c)}if(0===d&&!q.isEmpty(V)&&q.isArray(V)&&!q.isEmpty(l)&&(i=q.compare(w,l),0===(d+=q.isEmpty(i)?0:i.length)))return n=N.msgInvalidFileExtension.setTokens({name:w,extensions:j}),void G(n,v,g,c);if(!N.showPreview)return N.isAjaxUpload&&N.addToStack(v),setTimeout(function(){I(c+1),N._updateFileDetails(O)},100),void N._raise("fileloaded",[v,g,c,D]);if(!$&&W<s)return N.addToStack(v),A.addClass("file-thumb-loading"),N._previewDefault(v,g),N._initFileActions(),N._updateFileDetails(O),void I(c+1);M.length&&void 0!==FileReader?(h=y(v.type,w),f=x(v.type,w),p=b(v.type,w),L.html(P.replace("{index}",c+1).replace("{files}",O)),A.addClass("file-thumb-loading"),D.onerror=function(e){N._errorHandler(e,w)},D.onload=function(e){var t,i,n,o,a,r,s,l,d=[];if(i={name:w,type:v.type},Y.each(B,function(e,t){"object"!==e&&"other"!==e&&t(v.type,w)&&S++}),0===S){for(n=new Uint8Array(e.target.result),u=0;u<n.length;u++)o=n[u].toString(16),d.push(o);if(t=d.join("").toLowerCase().substring(0,8),r=q.getMimeType(t,"",""),q.isEmpty(r)&&(a=q.arrayBuffer2String(D.result),r=q.isSvg(a)?"image/svg+xml":q.getMimeType(t,a,v.type)),i={name:w,type:r},h=y(r,""),f=x(r,""),p=b(r,""),(m=h||f)||p)return s=m,(l=new FileReader).onerror=function(e){N._errorHandler(e,w)},l.onload=function(e){N._previewFile(c,v,e,g,_,i),N._initFileActions(),T()},void(s?l.readAsText(v,N.textEncoding):l.readAsDataURL(v))}N._previewFile(c,v,e,g,_,i),N._initFileActions(),T()},D.onprogress=function(e){if(e.lengthComputable){var t=e.loaded/e.total*100,i=Math.ceil(t);n=R.setTokens({index:c+1,files:O,percent:i,name:w}),setTimeout(function(){L.html(n)},100)}},h||f?D.readAsText(v,N.textEncoding):p?D.readAsDataURL(v):D.readAsArrayBuffer(v)):(N._previewDefault(v,g),setTimeout(function(){I(c+1),N._updateFileDetails(O)},100),N._raise("fileloaded",[v,g,c,D])),N.addToStack(v)}else I(c+1)}})(0),N._updateFileDetails(O,!1)},lock:function(){var e=this;return e._resetErrors(),e.disable(),e.showRemove&&e.$container.find(".fileinput-remove").hide(),e.showCancel&&e.$container.find(".fileinput-cancel").show(),e._raise("filelock",[e.filestack,e._getExtraData()]),e.$element},unlock:function(e){var t=this;return void 0===e&&(e=!0),t.enable(),t.showCancel&&t.$container.find(".fileinput-cancel").hide(),t.showRemove&&t.$container.find(".fileinput-remove").show(),e&&t._resetFileStack(),t._raise("fileunlock",[t.filestack,t._getExtraData()]),t.$element},cancel:function(){var e,i=this,t=i.ajaxRequests,n=t.length;if(0<n)for(e=0;e<n;e+=1)i.cancelling=!0,t[e].abort();return i._setProgressCancelled(),i._getThumbs().each(function(){var e=Y(this),t=e.attr("data-fileindex");e.removeClass("file-uploading"),void 0!==i.filestack[t]&&(e.find(".kv-file-upload").removeClass("disabled").removeAttr("disabled"),e.find(".kv-file-remove").removeClass("disabled").removeAttr("disabled")),i.unlock()}),i.$element},clear:function(){var e,t=this;if(t._raise("fileclear"))return t.$btnUpload.removeAttr("disabled"),t._getThumbs().find("video,audio,img").each(function(){q.cleanMemory(Y(this))}),t._clearFileInput(),t._resetUpload(),t.clearStack(),t._resetErrors(!0),t._hasInitialPreview()?(t._showFileIcon(),t._resetPreview(),t._initPreviewActions(),t.$container.removeClass("file-input-new")):(t._getThumbs().each(function(){t._clearObjects(Y(this))}),t.isAjaxUpload&&(t.previewCache.data={}),t.$preview.html(""),e=!t.overwriteInitial&&0<t.initialCaption.length?t.initialCaption:"",t.$caption.attr("title","").val(e),q.addCss(t.$container,"file-input-new"),t._validateDefaultPreview()),0===t.$container.find(q.FRAMES).length&&(t._initCaption()||t.$captionContainer.removeClass("icon-visible")),t._hideFileIcon(),t._raise("filecleared"),t.$captionContainer.focus(),t._setFileDropZoneTitle(),t.$element},reset:function(){var e=this;if(e._raise("filereset"))return e._resetPreview(),e.$container.find(".fileinput-filename").text(""),q.addCss(e.$container,"file-input-new"),(e.getFrames().length||e.dropZoneEnabled)&&e.$container.removeClass("file-input-new"),e.clearStack(),e.formdata={},e._setFileDropZoneTitle(),e.$element},disable:function(){var e=this;return e.isDisabled=!0,e._raise("filedisabled"),e.$element.attr("disabled","disabled"),e.$container.find(".kv-fileinput-caption").addClass("file-caption-disabled"),e.$container.find(".fileinput-remove, .fileinput-upload, .file-preview-frame button").attr("disabled",!0),q.addCss(e.$container.find(".btn-file"),"disabled"),e._initDragDrop(),e.$element},enable:function(){var e=this;return e.isDisabled=!1,e._raise("fileenabled"),e.$element.removeAttr("disabled"),e.$container.find(".kv-fileinput-caption").removeClass("file-caption-disabled"),e.$container.find(".fileinput-remove, .fileinput-upload, .file-preview-frame button").removeAttr("disabled"),e.$container.find(".btn-file").removeClass("disabled"),e._initDragDrop(),e.$element},upload:function(){var e,t,i,n=this,o=n.getFileStack().length,a=!Y.isEmptyObject(n._getExtraData());if(n.isAjaxUpload&&!n.isDisabled&&n._isFileSelectionValid(o))if(n._resetUpload(),0!==o||a)if(n.$progress.show(),n.uploadCount=0,n.uploadStatus={},n.uploadLog=[],n.lock(),n._setProgress(2),0===o&&a)n._uploadExtraOnly();else{if(i=n.filestack.length,n.hasInitData=!1,!n.uploadAsync)return n._uploadBatch(),n.$element;for(t=n._getOutData(),n._raise("filebatchpreupload",[t]),n.fileBatchCompleted=!1,n.uploadCache={content:[],config:[],tags:[],append:!0},n.uploadAsyncCount=n.getFileStack().length,e=0;e<i;e++)n.uploadCache.content[e]=null,n.uploadCache.config[e]=null,n.uploadCache.tags[e]=null;for(n.$preview.find(".file-preview-initial").removeClass(q.SORT_CSS),n._initSortable(),n.cacheInitialPreview=n.getPreview(),e=0;e<i;e++)n.filestack[e]&&n._uploadSingle(e,!0)}else n._showUploadError(n.msgUploadEmpty)},destroy:function(){var e=this,t=e.$form,i=e.$container,n=e.$element,o=e.namespace;return Y(document).off(o),Y(window).off(o),t&&t.length&&t.off(o),e.isAjaxUpload&&e._clearFileInput(),e._cleanup(),e._initPreviewCache(),n.insertBefore(i).off(o).removeData(),i.off().remove(),n},refresh:function(e){var t=this,i=t.$element;return e="object"!=typeof e||q.isEmpty(e)?t.options:Y.extend(!0,{},t.options,e),t._init(e,!0),t._listen(),i},zoom:function(e){var t=this,i=t._getFrame(e),n=t.$modal;i&&(q.initModal(n),n.html(t._getModalContent()),t._setZoomContent(i),n.modal("show"),t._initZoomButtons())},getExif:function(e){var t=this._getFrame(e);return t&&t.data("exif")||null},getFrames:function(e){var t;return e=e||"",t=this.$preview.find(q.FRAMES+e),this.reversePreviewOrder&&(t=Y(t.get().reverse())),t},getPreview:function(){return{content:this.initialPreview,config:this.initialPreviewConfig,tags:this.initialPreviewThumbTags}}},Y.fn.fileinput=function(l){if(q.hasFileAPISupport()||q.isIE(9)){var d=Array.apply(null,arguments),c=[];switch(d.shift(),this.each(function(){var e,t=Y(this),i=t.data("fileinput"),n="object"==typeof l&&l,o=n.theme||t.data("theme"),a={},r={},s=n.language||t.data("language")||Y.fn.fileinput.defaults.language||"en";i||(o&&(r=Y.fn.fileinputThemes[o]||{}),"en"===s||q.isEmpty(Y.fn.fileinputLocales[s])||(a=Y.fn.fileinputLocales[s]||{}),e=Y.extend(!0,{},Y.fn.fileinput.defaults,r,Y.fn.fileinputLocales.en,a,n,t.data()),i=new u(this,e),t.data("fileinput",i)),"string"==typeof l&&c.push(i[l].apply(i,d))}),c.length){case 0:return this;case 1:return c[0];default:return c}}},Y.fn.fileinput.defaults={language:"en",showCaption:!0,showBrowse:!0,showPreview:!0,showRemove:!0,showUpload:!0,showCancel:!0,showClose:!0,showUploadedThumbs:!0,browseOnZoneClick:!1,autoReplace:!1,autoOrientImage:!1,required:!1,rtl:!1,hideThumbnailContent:!1,generateFileId:null,previewClass:"",captionClass:"",frameClass:"krajee-default",mainClass:"file-caption-main",mainTemplate:null,purifyHtml:!0,fileSizeGetter:null,initialCaption:"",initialPreview:[],initialPreviewDelimiter:"*$$*",initialPreviewAsData:!1,initialPreviewFileType:"image",initialPreviewConfig:[],initialPreviewThumbTags:[],previewThumbTags:{},initialPreviewShowDelete:!0,initialPreviewDownloadUrl:"",removeFromPreviewOnError:!1,deleteUrl:"",deleteExtraData:{},overwriteInitial:!0,previewZoomButtonIcons:{prev:'<i class="glyphicon glyphicon-triangle-left"></i>',next:'<i class="glyphicon glyphicon-triangle-right"></i>',toggleheader:'<i class="glyphicon glyphicon-resize-vertical"></i>',fullscreen:'<i class="glyphicon glyphicon-fullscreen"></i>',borderless:'<i class="glyphicon glyphicon-resize-full"></i>',close:'<i class="glyphicon glyphicon-remove"></i>'},previewZoomButtonClasses:{prev:"btn btn-navigate",next:"btn btn-navigate",toggleheader:"btn btn-sm btn-kv btn-default btn-outline-secondary",fullscreen:"btn btn-sm btn-kv btn-default btn-outline-secondary",borderless:"btn btn-sm btn-kv btn-default btn-outline-secondary",close:"btn btn-sm btn-kv btn-default btn-outline-secondary"},previewTemplates:{},previewContentTemplates:{},preferIconicPreview:!1,preferIconicZoomPreview:!1,allowedPreviewTypes:void 0,allowedPreviewMimeTypes:null,allowedFileTypes:null,allowedFileExtensions:null,defaultPreviewContent:null,customLayoutTags:{},customPreviewTags:{},previewFileIcon:'<i class="glyphicon glyphicon-file"></i>',previewFileIconClass:"file-other-icon",previewFileIconSettings:{},previewFileExtSettings:{},buttonLabelClass:"hidden-xs",browseIcon:'<i class="glyphicon glyphicon-folder-open"></i>&nbsp;',browseClass:"btn btn-primary",removeIcon:'<i class="glyphicon glyphicon-trash"></i>',removeClass:"btn btn-default btn-secondary",cancelIcon:'<i class="glyphicon glyphicon-ban-circle"></i>',cancelClass:"btn btn-default btn-secondary",uploadIcon:'<i class="glyphicon glyphicon-upload"></i>',uploadClass:"btn btn-default btn-secondary",uploadUrl:null,uploadUrlThumb:null,uploadAsync:!0,uploadExtraData:{},zoomModalHeight:480,minImageWidth:null,minImageHeight:null,maxImageWidth:null,maxImageHeight:null,resizeImage:!1,resizePreference:"width",resizeQuality:.92,resizeDefaultImageType:"image/jpeg",resizeIfSizeMoreThan:0,minFileSize:0,maxFileSize:0,maxFilePreviewSize:25600,minFileCount:0,maxFileCount:0,validateInitialCount:!1,msgValidationErrorClass:"text-danger",msgValidationErrorIcon:'<i class="glyphicon glyphicon-exclamation-sign"></i> ',msgErrorClass:"file-error-message",progressThumbClass:"progress-bar bg-success progress-bar-success progress-bar-striped active",progressClass:"progress-bar bg-success progress-bar-success progress-bar-striped active",progressCompleteClass:"progress-bar bg-success progress-bar-success",progressErrorClass:"progress-bar bg-danger progress-bar-danger",progressUploadThreshold:99,previewFileType:"image",elCaptionContainer:null,elCaptionText:null,elPreviewContainer:null,elPreviewImage:null,elPreviewStatus:null,elErrorContainer:null,errorCloseButton:q.closeButton("kv-error-close"),slugCallback:null,dropZoneEnabled:!0,dropZoneTitleClass:"file-drop-zone-title",fileActionSettings:{},otherActionButtons:"",textEncoding:"UTF-8",ajaxSettings:{},ajaxDeleteSettings:{},showAjaxErrorDetails:!0,mergeAjaxCallbacks:!1,mergeAjaxDeleteCallbacks:!1,retryErrorUploads:!0,reversePreviewOrder:!1},Y.fn.fileinputLocales.en={fileSingle:"file",filePlural:"files",browseLabel:"Browse &hellip;",removeLabel:"Remove",removeTitle:"Clear selected files",cancelLabel:"Cancel",cancelTitle:"Abort ongoing upload",uploadLabel:"Upload",uploadTitle:"Upload selected files",msgNo:"No",msgNoFilesSelected:"No files selected",msgCancelled:"Cancelled",msgPlaceholder:"Select {files}...",msgZoomModalHeading:"Detailed Preview",msgFileRequired:"You must select a file to upload.",msgSizeTooSmall:'File "{name}" (<b>{size} KB</b>) is too small and must be larger than <b>{minSize} KB</b>.',msgSizeTooLarge:'File "{name}" (<b>{size} KB</b>) exceeds maximum allowed upload size of <b>{maxSize} KB</b>.',msgFilesTooLess:"You must select at least <b>{n}</b> {files} to upload.",msgFilesTooMany:"Number of files selected for upload <b>({n})</b> exceeds maximum allowed limit of <b>{m}</b>.",msgFileNotFound:'File "{name}" not found!',msgFileSecured:'Security restrictions prevent reading the file "{name}".',msgFileNotReadable:'File "{name}" is not readable.',msgFilePreviewAborted:'File preview aborted for "{name}".',msgFilePreviewError:'An error occurred while reading the file "{name}".',msgInvalidFileName:'Invalid or unsupported characters in file name "{name}".',msgInvalidFileType:'Invalid type for file "{name}". Only "{types}" files are supported.',msgInvalidFileExtension:'Invalid extension for file "{name}". Only "{extensions}" files are supported.',msgFileTypes:{image:"image",html:"HTML",text:"text",video:"video",audio:"audio",flash:"flash",pdf:"PDF",object:"object"},msgUploadAborted:"The file upload was aborted",msgUploadThreshold:"Processing...",msgUploadBegin:"Initializing...",msgUploadEnd:"Done",msgUploadEmpty:"No valid data available for upload.",msgUploadError:"Error",msgValidationError:"Validation Error",msgLoading:"Loading file {index} of {files} &hellip;",msgProgress:"Loading file {index} of {files} - {name} - {percent}% completed.",msgSelected:"{n} {files} selected",msgFoldersNotAllowed:"Drag & drop files only! {n} folder(s) dropped were skipped.",msgImageWidthSmall:'Width of image file "{name}" must be at least {size} px.',msgImageHeightSmall:'Height of image file "{name}" must be at least {size} px.',msgImageWidthLarge:'Width of image file "{name}" cannot exceed {size} px.',msgImageHeightLarge:'Height of image file "{name}" cannot exceed {size} px.',msgImageResizeError:"Could not get the image dimensions to resize.",msgImageResizeException:"Error while resizing the image.<pre>{errors}</pre>",msgAjaxError:"Something went wrong with the {operation} operation. Please try again later!",msgAjaxProgressError:"{operation} failed",ajaxOperations:{deleteThumb:"file delete",uploadThumb:"file upload",uploadBatch:"batch file upload",uploadExtra:"form data upload"},dropZoneTitle:"Drag & drop files here &hellip;",dropZoneClickTitle:"<br>(or click to select {files})",previewZoomButtonTitles:{prev:"View previous file",next:"View next file",toggleheader:"Toggle header",fullscreen:"Toggle full screen",borderless:"Toggle borderless mode",close:"Close detailed preview"},usePdfRenderer:function(){return!!navigator.userAgent.match(/(iPod|iPhone|iPad|Android)/i)},pdfRendererUrl:"",pdfRendererTemplate:'<iframe class="kv-preview-data file-preview-pdf" src="{renderer}?file={data}" {style}></iframe>'},Y.fn.fileinput.Constructor=u,Y(document).ready(function(){var e=Y("input.file[type=file]");e.length&&e.fileinput()})}),function(){"use strict";var L={};function c(e){return R(">"+m("B",e.length),e)}function u(e){return R(">"+m("H",e.length),e)}function h(e){return R(">"+m("L",e.length),e)}function p(e,t,i){var n,o,a,r,s="",l="";if("Byte"==t)(n=e.length)<=4?l=c(e)+m("\0",4-n):(l=R(">L",[i]),s=c(e));else if("Short"==t)(n=e.length)<=2?l=u(e)+m("\0\0",2-n):(l=R(">L",[i]),s=u(e));else if("Long"==t)(n=e.length)<=1?l=h(e):(l=R(">L",[i]),s=h(e));else if("Ascii"==t)4<(n=(o=e+"\0").length)?(l=R(">L",[i]),s=o):l=o+m("\0",4-n);else if("Rational"==t){if("number"==typeof e[0])n=1,a=e[0],r=e[1],o=R(">L",[a])+R(">L",[r]);else{n=e.length,o="";for(var d=0;d<n;d++)a=e[d][0],r=e[d][1],o+=R(">L",[a])+R(">L",[r])}l=R(">L",[i]),s=o}else if("SRational"==t){if("number"==typeof e[0])n=1,a=e[0],r=e[1],o=R(">l",[a])+R(">l",[r]);else{n=e.length,o="";for(d=0;d<n;d++)a=e[d][0],r=e[d][1],o+=R(">l",[a])+R(">l",[r])}l=R(">L",[i]),s=o}else"Undefined"==t&&(4<(n=e.length)?(l=R(">L",[i]),s=e):l=e+m("\0",4-n));return[R(">L",[n]),l,s]}function P(e,t,i){var n,o=Object.keys(e).length,a=R(">H",[o]);n=-1<["0th","1st"].indexOf(t)?2+12*o+4:2+12*o;var r="",s="";for(var l in e)if("string"==typeof l&&(l=parseInt(l)),!("0th"==t&&-1<[34665,34853].indexOf(l)||"Exif"==t&&40965==l||"1st"==t&&-1<[513,514].indexOf(l))){var d=e[l],c=R(">H",[l]),u=g[t][l].type,h=R(">H",[O[u]]);"number"==typeof d&&(d=[d]);var f=p(d,u,8+n+i+s.length);r+=c+h+f[0]+f[1],s+=f[2]}return[a+r,s]}function l(e){var t;if("ÿØ"==e.slice(0,2))t=function(e){for(var t,i=0;i<e.length;i++)if("ÿá"==(t=e[i]).slice(0,2)&&"Exif\0\0"==t.slice(4,10))return t;return null}(U(e)),this.tiftag=t?t.slice(10):null;else if(-1<["II","MM"].indexOf(e.slice(0,2)))this.tiftag=e;else{if("Exif"!=e.slice(0,4))throw"Given file is neither JPEG nor TIFF.";this.tiftag=e.slice(6)}}if(L.version="1.03",L.remove=function(e){var t=!1;if("ÿØ"==e.slice(0,2));else{if("data:image/jpeg;base64,"!=e.slice(0,23)&&"data:image/jpg;base64,"!=e.slice(0,22))throw"Given data is not jpeg.";e=d(e.split(",")[1]),t=!0}var i=U(e);if("ÿá"==i[1].slice(0,2)&&"Exif\0\0"==i[1].slice(4,10))i=[i[0]].concat(i.slice(2));else{if("ÿá"!=i[2].slice(0,2)||"Exif\0\0"!=i[2].slice(4,10))throw"Exif not found.";i=i.slice(0,2).concat(i.slice(3))}var n=i.join("");return t&&(n="data:image/jpeg;base64,"+a(n)),n},L.insert=function(e,t){var i=!1;if("Exif\0\0"!=e.slice(0,6))throw"Given data is not exif.";if("ÿØ"==t.slice(0,2));else{if("data:image/jpeg;base64,"!=t.slice(0,23)&&"data:image/jpg;base64,"!=t.slice(0,22))throw"Given data is not jpeg.";t=d(t.split(",")[1]),i=!0}var n="ÿá"+R(">H",[e.length+2])+e,o=function(e,t){"ÿà"==e[1].slice(0,2)&&"ÿá"==e[2].slice(0,2)&&"Exif\0\0"==e[2].slice(4,10)?e=t?(e[2]=t,["ÿØ"].concat(e.slice(2))):null==t?e.slice(0,2).concat(e.slice(3)):e.slice(0).concat(e.slice(2)):"ÿà"==e[1].slice(0,2)?t&&(e[1]=t):"ÿá"==e[1].slice(0,2)&&"Exif\0\0"==e[1].slice(4,10)?t?e[1]=t:null==t&&(e=e.slice(0).concat(e.slice(2))):t&&(e=[e[0],t].concat(e.slice(1)));return e.join("")}(U(t),n);return i&&(o="data:image/jpeg;base64,"+a(o)),o},L.load=function(e){var t;if("string"!=typeof e)throw"'load' gots invalid type argument.";if("ÿØ"==e.slice(0,2))t=e;else if("data:image/jpeg;base64,"==e.slice(0,23)||"data:image/jpg;base64,"==e.slice(0,22))t=d(e.split(",")[1]);else{if("Exif"!=e.slice(0,4))throw"'load' gots invalid file data.";t=e.slice(6)}var i={"0th":{},Exif:{},GPS:{},Interop:{},"1st":{},thumbnail:null},n=new l(t);if(null===n.tiftag)return i;"II"==n.tiftag.slice(0,2)?n.endian_mark="<":n.endian_mark=">";var o=f(n.endian_mark+"L",n.tiftag.slice(4,8))[0];i["0th"]=n.get_ifd(o,"0th");var a=i["0th"].first_ifd_pointer;if(delete i["0th"].first_ifd_pointer,34665 in i["0th"]&&(o=i["0th"][34665],i.Exif=n.get_ifd(o,"Exif")),34853 in i["0th"]&&(o=i["0th"][34853],i.GPS=n.get_ifd(o,"GPS")),40965 in i.Exif&&(o=i.Exif[40965],i.Interop=n.get_ifd(o,"Interop")),"\0\0\0\0"!=a&&(o=f(n.endian_mark+"L",a)[0],i["1st"]=n.get_ifd(o,"1st"),513 in i["1st"]&&514 in i["1st"])){var r=i["1st"][513]+i["1st"][514],s=n.tiftag.slice(i["1st"][513],r);i.thumbnail=s}return i},L.dump=function(e){var t,i,n,o,a,r,s=(t=e,JSON.parse(JSON.stringify(t))),l=!1,d=!1,c=!1,u=!1;i="0th"in s?s["0th"]:{},"Exif"in s&&Object.keys(s.Exif).length||"Interop"in s&&Object.keys(s.Interop).length?(i[34665]=1,l=!0,n=s.Exif,"Interop"in s&&Object.keys(s.Interop).length?(n[40965]=1,c=!0,o=s.Interop):-1<Object.keys(n).indexOf(L.ExifIFD.InteroperabilityTag.toString())&&delete n[40965]):-1<Object.keys(i).indexOf(L.ImageIFD.ExifTag.toString())&&delete i[34665],"GPS"in s&&Object.keys(s.GPS).length?(i[L.ImageIFD.GPSTag]=1,d=!0,a=s.GPS):-1<Object.keys(i).indexOf(L.ImageIFD.GPSTag.toString())&&delete i[L.ImageIFD.GPSTag],"1st"in s&&"thumbnail"in s&&null!=s.thumbnail&&(u=!0,s["1st"][513]=1,s["1st"][514]=1,r=s["1st"]);var h,f,p,m=P(i,"0th",0),g=m[0].length+12*l+12*d+4+m[1].length,v="",y=0,b="",x=0,w="",_=0,C="";(l&&(y=(h=P(n,"Exif",g))[0].length+12*c+h[1].length),d&&(x=(b=P(a,"GPS",g+y).join("")).length),c)&&(_=(w=P(o,"Interop",g+y+x).join("")).length);if(u&&(f=P(r,"1st",g+y+x+_),64e3<(p=function(e){var t=U(e);for(;"ÿà"<=t[1].slice(0,2)&&t[1].slice(0,2)<="ÿï";)t=[t[0]].concat(t.slice(2));return t.join("")}(s.thumbnail)).length))throw"Given thumbnail is too large. max 64kB";var S="",T="",k="",I="\0\0\0\0";if(l){var N=R(">L",[E=8+g]);S=R(">H",[34665])+R(">H",[O.Long])+R(">L",[1])+N}if(d){N=R(">L",[E=8+g+y]);T=R(">H",[34853])+R(">H",[O.Long])+R(">L",[1])+N}if(c){N=R(">L",[E=8+g+y+x]);k=R(">H",[40965])+R(">H",[O.Long])+R(">L",[1])+N}if(u){var E;I=R(">L",[E=8+g+y+x+_]);var M="\0\0\0\0"+R(">L",[E+f[0].length+24+4+f[1].length]),D="\0\0\0\0"+R(">L",[p.length]);C=f[0]+M+D+"\0\0\0\0"+f[1]+p}var A=m[0]+S+T+I+m[1];return l&&(v=h[0]+k+h[1]),"Exif\0\0MM\0*\0\0\0\b"+A+v+b+w+C},l.prototype={get_ifd:function(e,t){var i,n={},o=f(this.endian_mark+"H",this.tiftag.slice(e,e+2))[0],a=e+2;i=-1<["0th","1st"].indexOf(t)?"Image":t;for(var r=0;r<o;r++){e=a+12*r;var s=f(this.endian_mark+"H",this.tiftag.slice(e,e+2))[0],l=[f(this.endian_mark+"H",this.tiftag.slice(e+2,e+4))[0],f(this.endian_mark+"L",this.tiftag.slice(e+4,e+8))[0],this.tiftag.slice(e+8,e+12)];s in g[i]&&(n[s]=this.convert_value(l))}return"0th"==t&&(e=a+12*o,n.first_ifd_pointer=this.tiftag.slice(e,e+4)),n},convert_value:function(e){var t,i=null,n=e[0],o=e[1],a=e[2];if(1==n)i=4<o?(t=f(this.endian_mark+"L",a)[0],f(this.endian_mark+m("B",o),this.tiftag.slice(t,t+o))):f(this.endian_mark+m("B",o),a.slice(0,o));else if(2==n)i=4<o?(t=f(this.endian_mark+"L",a)[0],this.tiftag.slice(t,t+o-1)):a.slice(0,o-1);else if(3==n)i=2<o?(t=f(this.endian_mark+"L",a)[0],f(this.endian_mark+m("H",o),this.tiftag.slice(t,t+2*o))):f(this.endian_mark+m("H",o),a.slice(0,2*o));else if(4==n)i=1<o?(t=f(this.endian_mark+"L",a)[0],f(this.endian_mark+m("L",o),this.tiftag.slice(t,t+4*o))):f(this.endian_mark+m("L",o),a);else if(5==n)if(t=f(this.endian_mark+"L",a)[0],1<o){i=[];for(var r=0;r<o;r++)i.push([f(this.endian_mark+"L",this.tiftag.slice(t+8*r,t+4+8*r))[0],f(this.endian_mark+"L",this.tiftag.slice(t+4+8*r,t+8+8*r))[0]])}else i=[f(this.endian_mark+"L",this.tiftag.slice(t,t+4))[0],f(this.endian_mark+"L",this.tiftag.slice(t+4,t+8))[0]];else if(7==n)i=4<o?(t=f(this.endian_mark+"L",a)[0],this.tiftag.slice(t,t+o)):a.slice(0,o);else{if(10!=n)throw"Exif might be wrong. Got incorrect value type to decode. type:"+n;if(t=f(this.endian_mark+"L",a)[0],1<o){i=[];for(r=0;r<o;r++)i.push([f(this.endian_mark+"l",this.tiftag.slice(t+8*r,t+4+8*r))[0],f(this.endian_mark+"l",this.tiftag.slice(t+4+8*r,t+8+8*r))[0]])}else i=[f(this.endian_mark+"l",this.tiftag.slice(t,t+4))[0],f(this.endian_mark+"l",this.tiftag.slice(t+4,t+8))[0]]}return i instanceof Array&&1==i.length?i[0]:i}},"undefined"!=typeof window&&"function"==typeof window.btoa)var a=window.btoa;if(void 0===a)a=function(e){for(var t,i,n,o,a,r,s,l="",d=0,c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";d<e.length;)o=(t=e.charCodeAt(d++))>>2,a=(3&t)<<4|(i=e.charCodeAt(d++))>>4,r=(15&i)<<2|(n=e.charCodeAt(d++))>>6,s=63&n,isNaN(i)?r=s=64:isNaN(n)&&(s=64),l=l+c.charAt(o)+c.charAt(a)+c.charAt(r)+c.charAt(s);return l};if("undefined"!=typeof window&&"function"==typeof window.atob)var d=window.atob;if(void 0===d)d=function(e){var t,i,n,o,a,r,s="",l=0,d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");l<e.length;)t=d.indexOf(e.charAt(l++))<<2|(o=d.indexOf(e.charAt(l++)))>>4,i=(15&o)<<4|(a=d.indexOf(e.charAt(l++)))>>2,n=(3&a)<<6|(r=d.indexOf(e.charAt(l++))),s+=String.fromCharCode(t),64!=a&&(s+=String.fromCharCode(i)),64!=r&&(s+=String.fromCharCode(n));return s};function R(e,t){if(!(t instanceof Array))throw"'pack' error. Got invalid type argument.";if(e.length-1!=t.length)throw"'pack' error. "+(e.length-1)+" marks, "+t.length+" elements.";var i;if("<"==e[0])i=!0;else{if(">"!=e[0])throw"";i=!1}for(var n="",o=1,a=null,r=null,s=null;r=e[o];){if("b"==r.toLowerCase()){if(a=t[o-1],"b"==r&&a<0&&(a+=256),255<a||a<0)throw"'pack' error.";s=String.fromCharCode(a)}else if("H"==r){if(65535<(a=t[o-1])||a<0)throw"'pack' error.";s=String.fromCharCode(Math.floor(a%65536/256))+String.fromCharCode(a%256),i&&(s=s.split("").reverse().join(""))}else{if("l"!=r.toLowerCase())throw"'pack' error.";if(a=t[o-1],"l"==r&&a<0&&(a+=4294967296),4294967295<a||a<0)throw"'pack' error.";s=String.fromCharCode(Math.floor(a/16777216))+String.fromCharCode(Math.floor(a%16777216/65536))+String.fromCharCode(Math.floor(a%65536/256))+String.fromCharCode(a%256),i&&(s=s.split("").reverse().join(""))}n+=s,o+=1}return n}function f(e,t){if("string"!=typeof t)throw"'unpack' error. Got invalid type argument.";for(var i,n=0,o=1;o<e.length;o++)if("b"==e[o].toLowerCase())n+=1;else if("h"==e[o].toLowerCase())n+=2;else{if("l"!=e[o].toLowerCase())throw"'unpack' error. Got invalid mark.";n+=4}if(n!=t.length)throw"'unpack' error. Mismatch between symbol and string length. "+n+":"+t.length;if("<"==e[0])i=!0;else{if(">"!=e[0])throw"'unpack' error.";i=!1}for(var a=[],r=0,s=1,l=null,d=null,c=null,u="";d=e[s];){if("b"==d.toLowerCase())c=1,l=(u=t.slice(r,r+c)).charCodeAt(0),"b"==d&&128<=l&&(l-=256);else if("H"==d)c=2,u=t.slice(r,r+c),i&&(u=u.split("").reverse().join("")),l=256*u.charCodeAt(0)+u.charCodeAt(1);else{if("l"!=d.toLowerCase())throw"'unpack' error. "+d;c=4,u=t.slice(r,r+c),i&&(u=u.split("").reverse().join("")),l=16777216*u.charCodeAt(0)+65536*u.charCodeAt(1)+256*u.charCodeAt(2)+u.charCodeAt(3),"l"==d&&2147483648<=l&&(l-=4294967296)}a.push(l),r+=c,s+=1}return a}function m(e,t){for(var i="",n=0;n<t;n++)i+=e;return i}function U(e){if("ÿØ"!=e.slice(0,2))throw"Given data isn't JPEG.";for(var t=2,i=["ÿØ"];;){if("ÿÚ"==e.slice(t,t+2)){i.push(e.slice(t));break}var n=t+f(">H",e.slice(t+2,t+4))[0]+2;if(i.push(e.slice(t,n)),(t=n)>=e.length)throw"Wrong JPEG data."}return i}var O={Byte:1,Ascii:2,Short:3,Long:4,Rational:5,Undefined:7,SLong:9,SRational:10},g={Image:{11:{name:"ProcessingSoftware",type:"Ascii"},254:{name:"NewSubfileType",type:"Long"},255:{name:"SubfileType",type:"Short"},256:{name:"ImageWidth",type:"Long"},257:{name:"ImageLength",type:"Long"},258:{name:"BitsPerSample",type:"Short"},259:{name:"Compression",type:"Short"},262:{name:"PhotometricInterpretation",type:"Short"},263:{name:"Threshholding",type:"Short"},264:{name:"CellWidth",type:"Short"},265:{name:"CellLength",type:"Short"},266:{name:"FillOrder",type:"Short"},269:{name:"DocumentName",type:"Ascii"},270:{name:"ImageDescription",type:"Ascii"},271:{name:"Make",type:"Ascii"},272:{name:"Model",type:"Ascii"},273:{name:"StripOffsets",type:"Long"},274:{name:"Orientation",type:"Short"},277:{name:"SamplesPerPixel",type:"Short"},278:{name:"RowsPerStrip",type:"Long"},279:{name:"StripByteCounts",type:"Long"},282:{name:"XResolution",type:"Rational"},283:{name:"YResolution",type:"Rational"},284:{name:"PlanarConfiguration",type:"Short"},290:{name:"GrayResponseUnit",type:"Short"},291:{name:"GrayResponseCurve",type:"Short"},292:{name:"T4Options",type:"Long"},293:{name:"T6Options",type:"Long"},296:{name:"ResolutionUnit",type:"Short"},301:{name:"TransferFunction",type:"Short"},305:{name:"Software",type:"Ascii"},306:{name:"DateTime",type:"Ascii"},315:{name:"Artist",type:"Ascii"},316:{name:"HostComputer",type:"Ascii"},317:{name:"Predictor",type:"Short"},318:{name:"WhitePoint",type:"Rational"},319:{name:"PrimaryChromaticities",type:"Rational"},320:{name:"ColorMap",type:"Short"},321:{name:"HalftoneHints",type:"Short"},322:{name:"TileWidth",type:"Short"},323:{name:"TileLength",type:"Short"},324:{name:"TileOffsets",type:"Short"},325:{name:"TileByteCounts",type:"Short"},330:{name:"SubIFDs",type:"Long"},332:{name:"InkSet",type:"Short"},333:{name:"InkNames",type:"Ascii"},334:{name:"NumberOfInks",type:"Short"},336:{name:"DotRange",type:"Byte"},337:{name:"TargetPrinter",type:"Ascii"},338:{name:"ExtraSamples",type:"Short"},339:{name:"SampleFormat",type:"Short"},340:{name:"SMinSampleValue",type:"Short"},341:{name:"SMaxSampleValue",type:"Short"},342:{name:"TransferRange",type:"Short"},343:{name:"ClipPath",type:"Byte"},344:{name:"XClipPathUnits",type:"Long"},345:{name:"YClipPathUnits",type:"Long"},346:{name:"Indexed",type:"Short"},347:{name:"JPEGTables",type:"Undefined"},351:{name:"OPIProxy",type:"Short"},512:{name:"JPEGProc",type:"Long"},513:{name:"JPEGInterchangeFormat",type:"Long"},514:{name:"JPEGInterchangeFormatLength",type:"Long"},515:{name:"JPEGRestartInterval",type:"Short"},517:{name:"JPEGLosslessPredictors",type:"Short"},518:{name:"JPEGPointTransforms",type:"Short"},519:{name:"JPEGQTables",type:"Long"},520:{name:"JPEGDCTables",type:"Long"},521:{name:"JPEGACTables",type:"Long"},529:{name:"YCbCrCoefficients",type:"Rational"},530:{name:"YCbCrSubSampling",type:"Short"},531:{name:"YCbCrPositioning",type:"Short"},532:{name:"ReferenceBlackWhite",type:"Rational"},700:{name:"XMLPacket",type:"Byte"},18246:{name:"Rating",type:"Short"},18249:{name:"RatingPercent",type:"Short"},32781:{name:"ImageID",type:"Ascii"},33421:{name:"CFARepeatPatternDim",type:"Short"},33422:{name:"CFAPattern",type:"Byte"},33423:{name:"BatteryLevel",type:"Rational"},33432:{name:"Copyright",type:"Ascii"},33434:{name:"ExposureTime",type:"Rational"},34377:{name:"ImageResources",type:"Byte"},34665:{name:"ExifTag",type:"Long"},34675:{name:"InterColorProfile",type:"Undefined"},34853:{name:"GPSTag",type:"Long"},34857:{name:"Interlace",type:"Short"},34858:{name:"TimeZoneOffset",type:"Long"},34859:{name:"SelfTimerMode",type:"Short"},37387:{name:"FlashEnergy",type:"Rational"},37388:{name:"SpatialFrequencyResponse",type:"Undefined"},37389:{name:"Noise",type:"Undefined"},37390:{name:"FocalPlaneXResolution",type:"Rational"},37391:{name:"FocalPlaneYResolution",type:"Rational"},37392:{name:"FocalPlaneResolutionUnit",type:"Short"},37393:{name:"ImageNumber",type:"Long"},37394:{name:"SecurityClassification",type:"Ascii"},37395:{name:"ImageHistory",type:"Ascii"},37397:{name:"ExposureIndex",type:"Rational"},37398:{name:"TIFFEPStandardID",type:"Byte"},37399:{name:"SensingMethod",type:"Short"},40091:{name:"XPTitle",type:"Byte"},40092:{name:"XPComment",type:"Byte"},40093:{name:"XPAuthor",type:"Byte"},40094:{name:"XPKeywords",type:"Byte"},40095:{name:"XPSubject",type:"Byte"},50341:{name:"PrintImageMatching",type:"Undefined"},50706:{name:"DNGVersion",type:"Byte"},50707:{name:"DNGBackwardVersion",type:"Byte"},50708:{name:"UniqueCameraModel",type:"Ascii"},50709:{name:"LocalizedCameraModel",type:"Byte"},50710:{name:"CFAPlaneColor",type:"Byte"},50711:{name:"CFALayout",type:"Short"},50712:{name:"LinearizationTable",type:"Short"},50713:{name:"BlackLevelRepeatDim",type:"Short"},50714:{name:"BlackLevel",type:"Rational"},50715:{name:"BlackLevelDeltaH",type:"SRational"},50716:{name:"BlackLevelDeltaV",type:"SRational"},50717:{name:"WhiteLevel",type:"Short"},50718:{name:"DefaultScale",type:"Rational"},50719:{name:"DefaultCropOrigin",type:"Short"},50720:{name:"DefaultCropSize",type:"Short"},50721:{name:"ColorMatrix1",type:"SRational"},50722:{name:"ColorMatrix2",type:"SRational"},50723:{name:"CameraCalibration1",type:"SRational"},50724:{name:"CameraCalibration2",type:"SRational"},50725:{name:"ReductionMatrix1",type:"SRational"},50726:{name:"ReductionMatrix2",type:"SRational"},50727:{name:"AnalogBalance",type:"Rational"},50728:{name:"AsShotNeutral",type:"Short"},50729:{name:"AsShotWhiteXY",type:"Rational"},50730:{name:"BaselineExposure",type:"SRational"},50731:{name:"BaselineNoise",type:"Rational"},50732:{name:"BaselineSharpness",type:"Rational"},50733:{name:"BayerGreenSplit",type:"Long"},50734:{name:"LinearResponseLimit",type:"Rational"},50735:{name:"CameraSerialNumber",type:"Ascii"},50736:{name:"LensInfo",type:"Rational"},50737:{name:"ChromaBlurRadius",type:"Rational"},50738:{name:"AntiAliasStrength",type:"Rational"},50739:{name:"ShadowScale",type:"SRational"},50740:{name:"DNGPrivateData",type:"Byte"},50741:{name:"MakerNoteSafety",type:"Short"},50778:{name:"CalibrationIlluminant1",type:"Short"},50779:{name:"CalibrationIlluminant2",type:"Short"},50780:{name:"BestQualityScale",type:"Rational"},50781:{name:"RawDataUniqueID",type:"Byte"},50827:{name:"OriginalRawFileName",type:"Byte"},50828:{name:"OriginalRawFileData",type:"Undefined"},50829:{name:"ActiveArea",type:"Short"},50830:{name:"MaskedAreas",type:"Short"},50831:{name:"AsShotICCProfile",type:"Undefined"},50832:{name:"AsShotPreProfileMatrix",type:"SRational"},50833:{name:"CurrentICCProfile",type:"Undefined"},50834:{name:"CurrentPreProfileMatrix",type:"SRational"},50879:{name:"ColorimetricReference",type:"Short"},50931:{name:"CameraCalibrationSignature",type:"Byte"},50932:{name:"ProfileCalibrationSignature",type:"Byte"},50934:{name:"AsShotProfileName",type:"Byte"},50935:{name:"NoiseReductionApplied",type:"Rational"},50936:{name:"ProfileName",type:"Byte"},50937:{name:"ProfileHueSatMapDims",type:"Long"},50938:{name:"ProfileHueSatMapData1",type:"Float"},50939:{name:"ProfileHueSatMapData2",type:"Float"},50940:{name:"ProfileToneCurve",type:"Float"},50941:{name:"ProfileEmbedPolicy",type:"Long"},50942:{name:"ProfileCopyright",type:"Byte"},50964:{name:"ForwardMatrix1",type:"SRational"},50965:{name:"ForwardMatrix2",type:"SRational"},50966:{name:"PreviewApplicationName",type:"Byte"},50967:{name:"PreviewApplicationVersion",type:"Byte"},50968:{name:"PreviewSettingsName",type:"Byte"},50969:{name:"PreviewSettingsDigest",type:"Byte"},50970:{name:"PreviewColorSpace",type:"Long"},50971:{name:"PreviewDateTime",type:"Ascii"},50972:{name:"RawImageDigest",type:"Undefined"},50973:{name:"OriginalRawFileDigest",type:"Undefined"},50974:{name:"SubTileBlockSize",type:"Long"},50975:{name:"RowInterleaveFactor",type:"Long"},50981:{name:"ProfileLookTableDims",type:"Long"},50982:{name:"ProfileLookTableData",type:"Float"},51008:{name:"OpcodeList1",type:"Undefined"},51009:{name:"OpcodeList2",type:"Undefined"},51022:{name:"OpcodeList3",type:"Undefined"}},Exif:{33434:{name:"ExposureTime",type:"Rational"},33437:{name:"FNumber",type:"Rational"},34850:{name:"ExposureProgram",type:"Short"},34852:{name:"SpectralSensitivity",type:"Ascii"},34855:{name:"ISOSpeedRatings",type:"Short"},34856:{name:"OECF",type:"Undefined"},34864:{name:"SensitivityType",type:"Short"},34865:{name:"StandardOutputSensitivity",type:"Long"},34866:{name:"RecommendedExposureIndex",type:"Long"},34867:{name:"ISOSpeed",type:"Long"},34868:{name:"ISOSpeedLatitudeyyy",type:"Long"},34869:{name:"ISOSpeedLatitudezzz",type:"Long"},36864:{name:"ExifVersion",type:"Undefined"},36867:{name:"DateTimeOriginal",type:"Ascii"},36868:{name:"DateTimeDigitized",type:"Ascii"},37121:{name:"ComponentsConfiguration",type:"Undefined"},37122:{name:"CompressedBitsPerPixel",type:"Rational"},37377:{name:"ShutterSpeedValue",type:"SRational"},37378:{name:"ApertureValue",type:"Rational"},37379:{name:"BrightnessValue",type:"SRational"},37380:{name:"ExposureBiasValue",type:"SRational"},37381:{name:"MaxApertureValue",type:"Rational"},37382:{name:"SubjectDistance",type:"Rational"},37383:{name:"MeteringMode",type:"Short"},37384:{name:"LightSource",type:"Short"},37385:{name:"Flash",type:"Short"},37386:{name:"FocalLength",type:"Rational"},37396:{name:"SubjectArea",type:"Short"},37500:{name:"MakerNote",type:"Undefined"},37510:{name:"UserComment",type:"Ascii"},37520:{name:"SubSecTime",type:"Ascii"},37521:{name:"SubSecTimeOriginal",type:"Ascii"},37522:{name:"SubSecTimeDigitized",type:"Ascii"},40960:{name:"FlashpixVersion",type:"Undefined"},40961:{name:"ColorSpace",type:"Short"},40962:{name:"PixelXDimension",type:"Long"},40963:{name:"PixelYDimension",type:"Long"},40964:{name:"RelatedSoundFile",type:"Ascii"},40965:{name:"InteroperabilityTag",type:"Long"},41483:{name:"FlashEnergy",type:"Rational"},41484:{name:"SpatialFrequencyResponse",type:"Undefined"},41486:{name:"FocalPlaneXResolution",type:"Rational"},41487:{name:"FocalPlaneYResolution",type:"Rational"},41488:{name:"FocalPlaneResolutionUnit",type:"Short"},41492:{name:"SubjectLocation",type:"Short"},41493:{name:"ExposureIndex",type:"Rational"},41495:{name:"SensingMethod",type:"Short"},41728:{name:"FileSource",type:"Undefined"},41729:{name:"SceneType",type:"Undefined"},41730:{name:"CFAPattern",type:"Undefined"},41985:{name:"CustomRendered",type:"Short"},41986:{name:"ExposureMode",type:"Short"},41987:{name:"WhiteBalance",type:"Short"},41988:{name:"DigitalZoomRatio",type:"Rational"},41989:{name:"FocalLengthIn35mmFilm",type:"Short"},41990:{name:"SceneCaptureType",type:"Short"},41991:{name:"GainControl",type:"Short"},41992:{name:"Contrast",type:"Short"},41993:{name:"Saturation",type:"Short"},41994:{name:"Sharpness",type:"Short"},41995:{name:"DeviceSettingDescription",type:"Undefined"},41996:{name:"SubjectDistanceRange",type:"Short"},42016:{name:"ImageUniqueID",type:"Ascii"},42032:{name:"CameraOwnerName",type:"Ascii"},42033:{name:"BodySerialNumber",type:"Ascii"},42034:{name:"LensSpecification",type:"Rational"},42035:{name:"LensMake",type:"Ascii"},42036:{name:"LensModel",type:"Ascii"},42037:{name:"LensSerialNumber",type:"Ascii"},42240:{name:"Gamma",type:"Rational"}},GPS:{0:{name:"GPSVersionID",type:"Byte"},1:{name:"GPSLatitudeRef",type:"Ascii"},2:{name:"GPSLatitude",type:"Rational"},3:{name:"GPSLongitudeRef",type:"Ascii"},4:{name:"GPSLongitude",type:"Rational"},5:{name:"GPSAltitudeRef",type:"Byte"},6:{name:"GPSAltitude",type:"Rational"},7:{name:"GPSTimeStamp",type:"Rational"},8:{name:"GPSSatellites",type:"Ascii"},9:{name:"GPSStatus",type:"Ascii"},10:{name:"GPSMeasureMode",type:"Ascii"},11:{name:"GPSDOP",type:"Rational"},12:{name:"GPSSpeedRef",type:"Ascii"},13:{name:"GPSSpeed",type:"Rational"},14:{name:"GPSTrackRef",type:"Ascii"},15:{name:"GPSTrack",type:"Rational"},16:{name:"GPSImgDirectionRef",type:"Ascii"},17:{name:"GPSImgDirection",type:"Rational"},18:{name:"GPSMapDatum",type:"Ascii"},19:{name:"GPSDestLatitudeRef",type:"Ascii"},20:{name:"GPSDestLatitude",type:"Rational"},21:{name:"GPSDestLongitudeRef",type:"Ascii"},22:{name:"GPSDestLongitude",type:"Rational"},23:{name:"GPSDestBearingRef",type:"Ascii"},24:{name:"GPSDestBearing",type:"Rational"},25:{name:"GPSDestDistanceRef",type:"Ascii"},26:{name:"GPSDestDistance",type:"Rational"},27:{name:"GPSProcessingMethod",type:"Undefined"},28:{name:"GPSAreaInformation",type:"Undefined"},29:{name:"GPSDateStamp",type:"Ascii"},30:{name:"GPSDifferential",type:"Short"},31:{name:"GPSHPositioningError",type:"Rational"}},Interop:{1:{name:"InteroperabilityIndex",type:"Ascii"}}};g["0th"]=g.Image,g["1st"]=g.Image,L.TAGS=g,L.ImageIFD={ProcessingSoftware:11,NewSubfileType:254,SubfileType:255,ImageWidth:256,ImageLength:257,BitsPerSample:258,Compression:259,PhotometricInterpretation:262,Threshholding:263,CellWidth:264,CellLength:265,FillOrder:266,DocumentName:269,ImageDescription:270,Make:271,Model:272,StripOffsets:273,Orientation:274,SamplesPerPixel:277,RowsPerStrip:278,StripByteCounts:279,XResolution:282,YResolution:283,PlanarConfiguration:284,GrayResponseUnit:290,GrayResponseCurve:291,T4Options:292,T6Options:293,ResolutionUnit:296,TransferFunction:301,Software:305,DateTime:306,Artist:315,HostComputer:316,Predictor:317,WhitePoint:318,PrimaryChromaticities:319,ColorMap:320,HalftoneHints:321,TileWidth:322,TileLength:323,TileOffsets:324,TileByteCounts:325,SubIFDs:330,InkSet:332,InkNames:333,NumberOfInks:334,DotRange:336,TargetPrinter:337,ExtraSamples:338,SampleFormat:339,SMinSampleValue:340,SMaxSampleValue:341,TransferRange:342,ClipPath:343,XClipPathUnits:344,YClipPathUnits:345,Indexed:346,JPEGTables:347,OPIProxy:351,JPEGProc:512,JPEGInterchangeFormat:513,JPEGInterchangeFormatLength:514,JPEGRestartInterval:515,JPEGLosslessPredictors:517,JPEGPointTransforms:518,JPEGQTables:519,JPEGDCTables:520,JPEGACTables:521,YCbCrCoefficients:529,YCbCrSubSampling:530,YCbCrPositioning:531,ReferenceBlackWhite:532,XMLPacket:700,Rating:18246,RatingPercent:18249,ImageID:32781,CFARepeatPatternDim:33421,CFAPattern:33422,BatteryLevel:33423,Copyright:33432,ExposureTime:33434,ImageResources:34377,ExifTag:34665,InterColorProfile:34675,GPSTag:34853,Interlace:34857,TimeZoneOffset:34858,SelfTimerMode:34859,FlashEnergy:37387,SpatialFrequencyResponse:37388,Noise:37389,FocalPlaneXResolution:37390,FocalPlaneYResolution:37391,FocalPlaneResolutionUnit:37392,ImageNumber:37393,SecurityClassification:37394,ImageHistory:37395,ExposureIndex:37397,TIFFEPStandardID:37398,SensingMethod:37399,XPTitle:40091,XPComment:40092,XPAuthor:40093,XPKeywords:40094,XPSubject:40095,PrintImageMatching:50341,DNGVersion:50706,DNGBackwardVersion:50707,UniqueCameraModel:50708,LocalizedCameraModel:50709,CFAPlaneColor:50710,CFALayout:50711,LinearizationTable:50712,BlackLevelRepeatDim:50713,BlackLevel:50714,BlackLevelDeltaH:50715,BlackLevelDeltaV:50716,WhiteLevel:50717,DefaultScale:50718,DefaultCropOrigin:50719,DefaultCropSize:50720,ColorMatrix1:50721,ColorMatrix2:50722,CameraCalibration1:50723,CameraCalibration2:50724,ReductionMatrix1:50725,ReductionMatrix2:50726,AnalogBalance:50727,AsShotNeutral:50728,AsShotWhiteXY:50729,BaselineExposure:50730,BaselineNoise:50731,BaselineSharpness:50732,BayerGreenSplit:50733,LinearResponseLimit:50734,CameraSerialNumber:50735,LensInfo:50736,ChromaBlurRadius:50737,AntiAliasStrength:50738,ShadowScale:50739,DNGPrivateData:50740,MakerNoteSafety:50741,CalibrationIlluminant1:50778,CalibrationIlluminant2:50779,BestQualityScale:50780,RawDataUniqueID:50781,OriginalRawFileName:50827,OriginalRawFileData:50828,ActiveArea:50829,MaskedAreas:50830,AsShotICCProfile:50831,AsShotPreProfileMatrix:50832,CurrentICCProfile:50833,CurrentPreProfileMatrix:50834,ColorimetricReference:50879,CameraCalibrationSignature:50931,ProfileCalibrationSignature:50932,AsShotProfileName:50934,NoiseReductionApplied:50935,ProfileName:50936,ProfileHueSatMapDims:50937,ProfileHueSatMapData1:50938,ProfileHueSatMapData2:50939,ProfileToneCurve:50940,ProfileEmbedPolicy:50941,ProfileCopyright:50942,ForwardMatrix1:50964,ForwardMatrix2:50965,PreviewApplicationName:50966,PreviewApplicationVersion:50967,PreviewSettingsName:50968,PreviewSettingsDigest:50969,PreviewColorSpace:50970,PreviewDateTime:50971,RawImageDigest:50972,OriginalRawFileDigest:50973,SubTileBlockSize:50974,RowInterleaveFactor:50975,ProfileLookTableDims:50981,ProfileLookTableData:50982,OpcodeList1:51008,OpcodeList2:51009,OpcodeList3:51022,NoiseProfile:51041},L.ExifIFD={ExposureTime:33434,FNumber:33437,ExposureProgram:34850,SpectralSensitivity:34852,ISOSpeedRatings:34855,OECF:34856,SensitivityType:34864,StandardOutputSensitivity:34865,RecommendedExposureIndex:34866,ISOSpeed:34867,ISOSpeedLatitudeyyy:34868,ISOSpeedLatitudezzz:34869,ExifVersion:36864,DateTimeOriginal:36867,DateTimeDigitized:36868,ComponentsConfiguration:37121,CompressedBitsPerPixel:37122,ShutterSpeedValue:37377,ApertureValue:37378,BrightnessValue:37379,ExposureBiasValue:37380,MaxApertureValue:37381,SubjectDistance:37382,MeteringMode:37383,LightSource:37384,Flash:37385,FocalLength:37386,SubjectArea:37396,MakerNote:37500,UserComment:37510,SubSecTime:37520,SubSecTimeOriginal:37521,SubSecTimeDigitized:37522,FlashpixVersion:40960,ColorSpace:40961,PixelXDimension:40962,PixelYDimension:40963,RelatedSoundFile:40964,InteroperabilityTag:40965,FlashEnergy:41483,SpatialFrequencyResponse:41484,FocalPlaneXResolution:41486,FocalPlaneYResolution:41487,FocalPlaneResolutionUnit:41488,SubjectLocation:41492,ExposureIndex:41493,SensingMethod:41495,FileSource:41728,SceneType:41729,CFAPattern:41730,CustomRendered:41985,ExposureMode:41986,WhiteBalance:41987,DigitalZoomRatio:41988,FocalLengthIn35mmFilm:41989,SceneCaptureType:41990,GainControl:41991,Contrast:41992,Saturation:41993,Sharpness:41994,DeviceSettingDescription:41995,SubjectDistanceRange:41996,ImageUniqueID:42016,CameraOwnerName:42032,BodySerialNumber:42033,LensSpecification:42034,LensMake:42035,LensModel:42036,LensSerialNumber:42037,Gamma:42240},L.GPSIFD={GPSVersionID:0,GPSLatitudeRef:1,GPSLatitude:2,GPSLongitudeRef:3,GPSLongitude:4,GPSAltitudeRef:5,GPSAltitude:6,GPSTimeStamp:7,GPSSatellites:8,GPSStatus:9,GPSMeasureMode:10,GPSDOP:11,GPSSpeedRef:12,GPSSpeed:13,GPSTrackRef:14,GPSTrack:15,GPSImgDirectionRef:16,GPSImgDirection:17,GPSMapDatum:18,GPSDestLatitudeRef:19,GPSDestLatitude:20,GPSDestLongitudeRef:21,GPSDestLongitude:22,GPSDestBearingRef:23,GPSDestBearing:24,GPSDestDistanceRef:25,GPSDestDistance:26,GPSProcessingMethod:27,GPSAreaInformation:28,GPSDateStamp:29,GPSDifferential:30,GPSHPositioningError:31},L.InteropIFD={InteroperabilityIndex:1},L.GPSHelper={degToDmsRational:function(e){var t=e%1*60,i=t%1*60;return[[Math.floor(e),1],[Math.floor(t),1],[Math.round(100*i),100]]}},"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=L),exports.piexif=L):window.piexif=L}(),function(e){"use strict";"function"==typeof define&&define.amd?define(e):"undefined"!=typeof module&&void 0!==module.exports?module.exports=e():window.KvSortable=e()}(function(){"use strict";if("undefined"==typeof window||!window.document)return function(){throw new Error("KvSortable.js requires a window with a document")};var T,k,I,N,E,M,u,g,v,y,D,A,L,d,n,P,R,c,l,U,e,b={},o=/\s+/g,O=/left|right|inline/,B="KvSortable"+(new Date).getTime(),x=window,h=x.document,a=x.parseInt,z=x.setTimeout,t=x.jQuery||x.Zepto,i=x.Polymer,r=!1,s=!1,f="draggable"in h.createElement("div"),p=!navigator.userAgent.match(/(?:Trident.*rv[ :]?11\.|msie)/i)&&((e=h.createElement("x")).style.cssText="pointer-events:auto","auto"===e.style.pointerEvents),F=!1,w=Math.abs,m=Math.min,_=[],C=[],H=ne(function(e,t,i){if(i&&t.scroll){var n,o,a,r,s,l,d=i[B],c=t.scrollSensitivity,u=t.scrollSpeed,h=e.clientX,f=e.clientY,p=window.innerWidth,m=window.innerHeight;if(v!==i&&(g=t.scroll,v=i,y=t.scrollFn,!0===g)){g=i;do{if(g.offsetWidth<g.scrollWidth||g.offsetHeight<g.scrollHeight)break}while(g=g.parentNode)}g&&(o=(n=g).getBoundingClientRect(),a=(w(o.right-h)<=c)-(w(o.left-h)<=c),r=(w(o.bottom-f)<=c)-(w(o.top-f)<=c)),a||r||(r=(m-f<=c)-(f<=c),((a=(p-h<=c)-(h<=c))||r)&&(n=x)),b.vx===a&&b.vy===r&&b.el===n||(b.el=n,b.vx=a,b.vy=r,clearInterval(b.pid),n&&(b.pid=setInterval(function(){if(l=r?r*u:0,s=a?a*u:0,"function"==typeof y)return y.call(d,s,l,e);n===x?x.scrollTo(x.pageXOffset+s,x.pageYOffset+l):(n.scrollTop+=l,n.scrollLeft+=s)},24)))}},30),S=function(e){function t(n,o){return void 0!==n&&!0!==n||(n=i.name),"function"==typeof n?n:function(e,t){var i=t.options.group.name;return o?n:n&&(n.join?-1<n.indexOf(i):i==n)}}var i={},n=e.group;n&&"object"==typeof n||(n={name:n}),i.name=n.name,i.checkPull=t(n.pull,!0),i.checkPut=t(n.put),i.revertClone=n.revertClone,e.group=i};try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){r={capture:s=!1,passive:s}}}))}catch(e){}function V(e,t){if(!e||!e.nodeType||1!==e.nodeType)throw"KvSortable: `el` must be HTMLElement, and not "+{}.toString.call(e);this.el=e,this.options=t=oe({},t),e[B]=this;var i={group:Math.random(),sort:!0,disabled:!1,store:null,handle:null,scroll:!0,scrollSensitivity:30,scrollSpeed:10,draggable:/[uo]l/i.test(e.nodeName)?"li":">*",ghostClass:"kvsortable-ghost",chosenClass:"kvsortable-chosen",dragClass:"kvsortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,setData:function(e,t){e.setData("Text",t.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,forceFallback:!1,fallbackClass:"kvsortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==V.supportPointer};for(var n in i)!(n in t)&&(t[n]=i[n]);for(var o in S(t),this)"_"===o.charAt(0)&&"function"==typeof this[o]&&(this[o]=this[o].bind(this));this.nativeDraggable=!t.forceFallback&&f,$(e,"mousedown",this._onTapStart),$(e,"touchstart",this._onTapStart),t.supportPointer&&$(e,"pointerdown",this._onTapStart),this.nativeDraggable&&($(e,"dragover",this),$(e,"dragenter",this)),C.push(this._onDragOver),t.store&&this.sort(t.store.get(this))}function j(e,t){"clone"!==e.lastPullMode&&(t=!0),N&&N.state!==t&&(q(N,"display",t?"none":""),t||N.state&&(e.options.group.revertClone?(E.insertBefore(N,M),e._animate(T,N)):E.insertBefore(N,T)),N.state=t)}function W(e,t,i){if(e){i=i||h;do{if(">*"===t&&e.parentNode===i||ie(e,t))return e}while(void 0,e=(o=(n=e).host)&&o.nodeType?o:n.parentNode)}var n,o;return null}function $(e,t,i){e.addEventListener(t,i,r)}function G(e,t,i){e.removeEventListener(t,i,r)}function Y(e,t,i){if(e)if(e.classList)e.classList[i?"add":"remove"](t);else{var n=(" "+e.className+" ").replace(o," ").replace(" "+t+" "," ");e.className=(n+(i?" "+t:"")).replace(o," ")}}function q(e,t,i){var n=e&&e.style;if(n){if(void 0===i)return h.defaultView&&h.defaultView.getComputedStyle?i=h.defaultView.getComputedStyle(e,""):e.currentStyle&&(i=e.currentStyle),void 0===t?i:i[t];t in n||(t="-webkit-"+t),n[t]=i+("string"==typeof i?"":"px")}}function Z(e,t,i){if(e){var n=e.getElementsByTagName(t),o=0,a=n.length;if(i)for(;o<a;o++)i(n[o],o);return n}return[]}function X(e,t,i,n,o,a,r,s){e=e||t[B];var l=h.createEvent("Event"),d=e.options,c="on"+i.charAt(0).toUpperCase()+i.substr(1);l.initEvent(i,!0,!0),l.to=o||t,l.from=a||t,l.item=n||t,l.clone=N,l.oldIndex=r,l.newIndex=s,t.dispatchEvent(l),d[c]&&d[c].call(e,l)}function K(e,t,i,n,o,a,r,s){var l,d,c=e[B],u=c.options.onMove;return(l=h.createEvent("Event")).initEvent("move",!0,!0),l.to=t,l.from=e,l.dragged=i,l.draggedRect=n,l.related=o||t,l.relatedRect=a||t.getBoundingClientRect(),l.willInsertAfter=s,e.dispatchEvent(l),u&&(d=u.call(c,l,r)),d}function J(e){e.draggable=!1}function Q(){F=!1}function ee(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,i=t.length,n=0;i--;)n+=t.charCodeAt(i);return n.toString(36)}function te(e,t){var i=0;if(!e||!e.parentNode)return-1;for(;e&&(e=e.previousElementSibling);)"TEMPLATE"===e.nodeName.toUpperCase()||">*"!==t&&!ie(e,t)||i++;return i}function ie(e,t){if(e){var i=(t=t.split(".")).shift().toUpperCase(),n=new RegExp("\\s("+t.join("|")+")(?=\\s)","g");return!(""!==i&&e.nodeName.toUpperCase()!=i||t.length&&((" "+e.className+" ").match(n)||[]).length!=t.length)}return!1}function ne(e,t){var i,n;return function(){void 0===i&&(i=arguments,n=this,z(function(){1===i.length?e.call(n,i[0]):e.apply(n,i),i=void 0},t))}}function oe(e,t){if(e&&t)for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);return e}function ae(e){return i&&i.dom?i.dom(e).cloneNode(!0):t?t(e).clone(!0)[0]:e.cloneNode(!0)}function re(e){return z(e,0)}function se(e){return clearTimeout(e)}return V.prototype={constructor:V,_onTapStart:function(e){var t,i=this,n=this.el,o=this.options,a=o.preventOnFilter,r=e.type,s=e.touches&&e.touches[0],l=(s||e).target,d=e.target.shadowRoot&&e.path&&e.path[0]||l,c=o.filter;if(function(e){var t=e.getElementsByTagName("input"),i=t.length;for(;i--;){var n=t[i];n.checked&&_.push(n)}}(n),!T&&!(/mousedown|pointerdown/.test(r)&&0!==e.button||o.disabled)&&!d.isContentEditable&&(l=W(l,o.draggable,n))&&u!==l){if(t=te(l,o.draggable),"function"==typeof c){if(c.call(this,e,l,this))return X(i,d,"filter",l,n,n,t),void(a&&e.preventDefault())}else if(c&&(c=c.split(",").some(function(e){if(e=W(d,e.trim(),n))return X(i,e,"filter",l,n,n,t),!0})))return void(a&&e.preventDefault());o.handle&&!W(d,o.handle,n)||this._prepareDragStart(e,s,l,t)}},_prepareDragStart:function(e,t,i,n){var o,a=this,r=a.el,s=a.options,l=r.ownerDocument;i&&!T&&i.parentNode===r&&(c=e,E=r,k=(T=i).parentNode,M=T.nextSibling,u=i,P=s.group,d=n,this._lastX=(t||e).clientX,this._lastY=(t||e).clientY,T.style["will-change"]="all",o=function(){a._disableDelayedDrag(),T.draggable=a.nativeDraggable,Y(T,s.chosenClass,!0),a._triggerDragStart(e,t),X(a,E,"choose",T,E,E,d)},s.ignore.split(",").forEach(function(e){Z(T,e.trim(),J)}),$(l,"mouseup",a._onDrop),$(l,"touchend",a._onDrop),$(l,"touchcancel",a._onDrop),$(l,"selectstart",a),s.supportPointer&&$(l,"pointercancel",a._onDrop),s.delay?($(l,"mouseup",a._disableDelayedDrag),$(l,"touchend",a._disableDelayedDrag),$(l,"touchcancel",a._disableDelayedDrag),$(l,"mousemove",a._disableDelayedDrag),$(l,"touchmove",a._disableDelayedDrag),s.supportPointer&&$(l,"pointermove",a._disableDelayedDrag),a._dragStartTimer=z(o,s.delay)):o())},_disableDelayedDrag:function(){var e=this.el.ownerDocument;clearTimeout(this._dragStartTimer),G(e,"mouseup",this._disableDelayedDrag),G(e,"touchend",this._disableDelayedDrag),G(e,"touchcancel",this._disableDelayedDrag),G(e,"mousemove",this._disableDelayedDrag),G(e,"touchmove",this._disableDelayedDrag),G(e,"pointermove",this._disableDelayedDrag)},_triggerDragStart:function(e,t){(t=t||("touch"==e.pointerType?e:null))?(c={target:T,clientX:t.clientX,clientY:t.clientY},this._onDragStart(c,"touch")):this.nativeDraggable?($(T,"dragend",this),$(E,"dragstart",this._onDragStart)):this._onDragStart(c,!0);try{h.selection?re(function(){h.selection.empty()}):window.getSelection().removeAllRanges()}catch(e){}},_dragStarted:function(){if(E&&T){var e=this.options;Y(T,e.ghostClass,!0),Y(T,e.dragClass,!1),X(V.active=this,E,"start",T,E,E,d)}else this._nulling()},_emulateDragOver:function(){if(l){if(this._lastX===l.clientX&&this._lastY===l.clientY)return;this._lastX=l.clientX,this._lastY=l.clientY,p||q(I,"display","none");var e=h.elementFromPoint(l.clientX,l.clientY),t=e,i=C.length;if(e&&e.shadowRoot&&(t=e=e.shadowRoot.elementFromPoint(l.clientX,l.clientY)),t)do{if(t[B]){for(;i--;)C[i]({clientX:l.clientX,clientY:l.clientY,target:e,rootEl:t});break}e=t}while(t=t.parentNode);p||q(I,"display","")}},_onTouchMove:function(e){if(c){var t=this.options,i=t.fallbackTolerance,n=t.fallbackOffset,o=e.touches?e.touches[0]:e,a=o.clientX-c.clientX+n.x,r=o.clientY-c.clientY+n.y,s=e.touches?"translate3d("+a+"px,"+r+"px,0)":"translate("+a+"px,"+r+"px)";if(!V.active){if(i&&m(w(o.clientX-this._lastX),w(o.clientY-this._lastY))<i)return;this._dragStarted()}this._appendGhost(),U=!0,l=o,q(I,"webkitTransform",s),q(I,"mozTransform",s),q(I,"msTransform",s),q(I,"transform",s),e.preventDefault()}},_appendGhost:function(){if(!I){var e,t=T.getBoundingClientRect(),i=q(T),n=this.options;Y(I=T.cloneNode(!0),n.ghostClass,!1),Y(I,n.fallbackClass,!0),Y(I,n.dragClass,!0),q(I,"top",t.top-a(i.marginTop,10)),q(I,"left",t.left-a(i.marginLeft,10)),q(I,"width",t.width),q(I,"height",t.height),q(I,"opacity","0.8"),q(I,"position","fixed"),q(I,"zIndex","100000"),q(I,"pointerEvents","none"),n.fallbackOnBody&&h.body.appendChild(I)||E.appendChild(I),e=I.getBoundingClientRect(),q(I,"width",2*t.width-e.width),q(I,"height",2*t.height-e.height)}},_onDragStart:function(e,t){var i=this,n=e.dataTransfer,o=i.options;i._offUpEvents(),P.checkPull(i,i,T,e)&&((N=ae(T)).draggable=!1,N.style["will-change"]="",q(N,"display","none"),Y(N,i.options.chosenClass,!1),i._cloneId=re(function(){E.insertBefore(N,T),X(i,E,"clone",T)})),Y(T,o.dragClass,!0),t?("touch"===t?($(h,"touchmove",i._onTouchMove),$(h,"touchend",i._onDrop),$(h,"touchcancel",i._onDrop),o.supportPointer&&($(h,"pointermove",i._onTouchMove),$(h,"pointerup",i._onDrop))):($(h,"mousemove",i._onTouchMove),$(h,"mouseup",i._onDrop)),i._loopId=setInterval(i._emulateDragOver,50)):(n&&(n.effectAllowed="move",o.setData&&o.setData.call(i,n,T)),$(h,"drop",i),i._dragStartId=re(i._dragStarted))},_onDragOver:function(e){var t,i,n,o,a,r,s=this.el,l=this.options,d=l.group,c=V.active,u=P===d,h=!1,f=l.sort;if((void 0!==e.preventDefault&&(e.preventDefault(),!l.dragoverBubble&&e.stopPropagation()),!T.animated)&&(U=!0,c&&!l.disabled&&(u?f||(o=!E.contains(T)):R===this||(c.lastPullMode=P.checkPull(this,c,T,e))&&d.checkPut(this,c,T,e))&&(void 0===e.rootEl||e.rootEl===this.el))){if(H(e,l,this.el),F)return;if(t=W(e.target,l.draggable,s),i=T.getBoundingClientRect(),R!==this&&(R=this,h=!0),o)return j(c,!0),k=E,void(N||M?E.insertBefore(T,N||M):f||E.appendChild(T));if(0===s.children.length||s.children[0]===I||s===e.target&&(a=e,r=s.lastElementChild.getBoundingClientRect(),5<a.clientY-(r.top+r.height)||5<a.clientX-(r.left+r.width))){if(0!==s.children.length&&s.children[0]!==I&&s===e.target&&(t=s.lastElementChild),t){if(t.animated)return;n=t.getBoundingClientRect()}j(c,u),!1!==K(E,s,T,i,t,n,e)&&(T.contains(s)||(s.appendChild(T),k=s),this._animate(i,T),t&&this._animate(n,t))}else if(t&&!t.animated&&t!==T&&void 0!==t.parentNode[B]){D!==t&&(A=q(D=t),L=q(t.parentNode));var p=(n=t.getBoundingClientRect()).right-n.left,m=n.bottom-n.top,g=O.test(A.cssFloat+A.display)||"flex"==L.display&&0===L["flex-direction"].indexOf("row"),v=t.offsetWidth>T.offsetWidth,y=t.offsetHeight>T.offsetHeight,b=.5<(g?(e.clientX-n.left)/p:(e.clientY-n.top)/m),x=t.nextElementSibling,w=!1;if(g){var _=T.offsetTop,C=t.offsetTop;w=_===C?t.previousElementSibling===T&&!v||b&&v:t.previousElementSibling===T||T.previousElementSibling===t?.5<(e.clientY-n.top)/m:_<C}else h||(w=x!==T&&!y||b&&y);var S=K(E,s,T,i,t,n,e,w);!1!==S&&(1!==S&&-1!==S||(w=1===S),F=!0,z(Q,30),j(c,u),T.contains(s)||(w&&!x?s.appendChild(T):t.parentNode.insertBefore(T,w?x:t)),k=T.parentNode,this._animate(i,T),this._animate(n,t))}}},_animate:function(e,t){var i=this.options.animation;if(i){var n=t.getBoundingClientRect();1===e.nodeType&&(e=e.getBoundingClientRect()),q(t,"transition","none"),q(t,"transform","translate3d("+(e.left-n.left)+"px,"+(e.top-n.top)+"px,0)"),t.offsetWidth,q(t,"transition","all "+i+"ms"),q(t,"transform","translate3d(0,0,0)"),clearTimeout(t.animated),t.animated=z(function(){q(t,"transition",""),q(t,"transform",""),t.animated=!1},i)}},_offUpEvents:function(){var e=this.el.ownerDocument;G(h,"touchmove",this._onTouchMove),G(h,"pointermove",this._onTouchMove),G(e,"mouseup",this._onDrop),G(e,"touchend",this._onDrop),G(e,"pointerup",this._onDrop),G(e,"touchcancel",this._onDrop),G(e,"pointercancel",this._onDrop),G(e,"selectstart",this)},_onDrop:function(e){var t=this.el,i=this.options;clearInterval(this._loopId),clearInterval(b.pid),clearTimeout(this._dragStartTimer),se(this._cloneId),se(this._dragStartId),G(h,"mouseover",this),G(h,"mousemove",this._onTouchMove),this.nativeDraggable&&(G(h,"drop",this),G(t,"dragstart",this._onDragStart)),this._offUpEvents(),e&&(U&&(e.preventDefault(),!i.dropBubble&&e.stopPropagation()),I&&I.parentNode&&I.parentNode.removeChild(I),E!==k&&"clone"===V.active.lastPullMode||N&&N.parentNode&&N.parentNode.removeChild(N),T&&(this.nativeDraggable&&G(T,"dragend",this),J(T),T.style["will-change"]="",Y(T,this.options.ghostClass,!1),Y(T,this.options.chosenClass,!1),X(this,E,"unchoose",T,k,E,d),E!==k?0<=(n=te(T,i.draggable))&&(X(null,k,"add",T,k,E,d,n),X(this,E,"remove",T,k,E,d,n),X(null,k,"sort",T,k,E,d,n),X(this,E,"sort",T,k,E,d,n)):T.nextSibling!==M&&0<=(n=te(T,i.draggable))&&(X(this,E,"update",T,k,E,d,n),X(this,E,"sort",T,k,E,d,n)),V.active&&(null!=n&&-1!==n||(n=d),X(this,E,"end",T,k,E,d,n),this.save()))),this._nulling()},_nulling:function(){E=T=k=I=M=N=u=g=v=c=l=U=n=D=A=R=P=V.active=null,_.forEach(function(e){e.checked=!0}),_.length=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragover":case"dragenter":T&&(this._onDragOver(e),function(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move");e.preventDefault()}(e));break;case"mouseover":this._onDrop(e);break;case"selectstart":e.preventDefault()}},toArray:function(){for(var e,t=[],i=this.el.children,n=0,o=i.length,a=this.options;n<o;n++)W(e=i[n],a.draggable,this.el)&&t.push(e.getAttribute(a.dataIdAttr)||ee(e));return t},sort:function(e){var n={},o=this.el;this.toArray().forEach(function(e,t){var i=o.children[t];W(i,this.options.draggable,o)&&(n[e]=i)},this),e.forEach(function(e){n[e]&&(o.removeChild(n[e]),o.appendChild(n[e]))})},save:function(){var e=this.options.store;e&&e.set(this)},closest:function(e,t){return W(e,t||this.options.draggable,this.el)},option:function(e,t){var i=this.options;if(void 0===t)return i[e];i[e]=t,"group"===e&&S(i)},destroy:function(){var e=this.el;e[B]=null,G(e,"mousedown",this._onTapStart),G(e,"touchstart",this._onTapStart),G(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(G(e,"dragover",this),G(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(e){e.removeAttribute("draggable")}),C.splice(C.indexOf(this._onDragOver),1),this._onDrop(),this.el=e=null}},$(h,"touchmove",function(e){V.active&&e.preventDefault()}),V.utils={on:$,off:G,css:q,find:Z,is:function(e,t){return!!W(e,t,e)},extend:oe,throttle:ne,closest:W,toggleClass:Y,clone:ae,index:te,nextTick:re,cancelNextTick:se},V.create=function(e,t){return new V(e,t)},V.version="1.7.0",V}),function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)}(function(a){"use strict";a.fn.kvsortable=function(i){var n,o=arguments;return this.each(function(){var e=a(this),t=e.data("kvsortable");t||!(i instanceof Object)&&i||(t=new KvSortable(this,i),e.data("kvsortable",t)),t&&("widget"===i?n=t:"destroy"===i?(t.destroy(),e.removeData("kvsortable")):"function"==typeof t[i]?n=t[i].apply(t,[].slice.call(o,1)):i in t.options&&(n=t.option.apply(t,o)))}),void 0===n?this:n}}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.DOMPurify=t()}(this,function(){"use strict";var pe=["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"],me=["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","audio","canvas","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","video","view","vkern"],ge=["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"],ve=["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmuliscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mpspace","msqrt","mystyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"],ye=["#text"],be=["accept","action","align","alt","autocomplete","background","bgcolor","border","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","coords","crossorigin","datetime","default","dir","disabled","download","enctype","face","for","headers","height","hidden","high","href","hreflang","id","integrity","ismap","label","lang","list","loop","low","max","maxlength","media","method","min","multiple","name","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","type","usemap","valign","value","width","xmlns"],xe=["accent-height","accumulate","additivive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","tabindex","targetx","targety","transform","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"],we=["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"],_e=["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"];function Ce(e,t){for(var i=t.length;i--;)"string"==typeof t[i]&&(t[i]=t[i].toLowerCase()),e[t[i]]=!0;return e}function Se(e){var t={},i=void 0;for(i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}var Te=/\{\{[\s\S]*|[\s\S]*\}\}/gm,ke=/<%[\s\S]*|[\s\S]*%>/gm,Ie=/^data-[\-\w.\u00B7-\uFFFF]/,Ne=/^aria-[\-\w]+$/,Ee=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,Me=/^(?:\w+script|data):/i,De=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,Ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function Le(e){if(Array.isArray(e)){for(var t=0,i=Array(e.length);t<e.length;t++)i[t]=e[t];return i}return Array.from(e)}var Pe=function(){return"undefined"==typeof window?null:window};return function t(){var l=0<arguments.length&&void 0!==arguments[0]?arguments[0]:Pe(),c=function(e){return t(e)};if(c.version="1.0.7",c.removed=[],!l||!l.document||9!==l.document.nodeType)return c.isSupported=!1,c;var d=l.document,n=!1,o=!1,a=l.document,u=l.DocumentFragment,e=l.HTMLTemplateElement,h=l.Node,i=l.NodeFilter,r=l.NamedNodeMap,s=void 0===r?l.NamedNodeMap||l.MozNamedAttrMap:r,f=l.Text,p=l.Comment,m=l.DOMParser;if("function"==typeof e){var g=a.createElement("template");g.content&&g.content.ownerDocument&&(a=g.content.ownerDocument)}var v=a,y=v.implementation,b=v.createNodeIterator,x=v.getElementsByTagName,w=v.createDocumentFragment,_=d.importNode,C={};c.isSupported=y&&void 0!==y.createHTMLDocument&&9!==a.documentMode;var S=Te,T=ke,k=Ie,I=Ne,N=Me,E=De,M=Ee,D=null,A=Ce({},[].concat(Le(pe),Le(me),Le(ge),Le(ve),Le(ye))),L=null,P=Ce({},[].concat(Le(be),Le(xe),Le(we),Le(_e))),R=null,U=null,O=!0,B=!0,z=!1,F=!1,H=!1,V=!1,j=!1,W=!1,$=!1,G=!1,Y=!1,q=!0,Z=!0,X=!1,K={},J=Ce({},["audio","head","math","script","style","template","svg","video"]),Q=Ce({},["audio","video","img","source","image"]),ee=Ce({},["alt","class","for","id","label","name","pattern","placeholder","summary","title","value","style","xmlns"]),te=null,ie=a.createElement("form"),ne=function(e){"object"!==(void 0===e?"undefined":Ae(e))&&(e={}),D="ALLOWED_TAGS"in e?Ce({},e.ALLOWED_TAGS):A,L="ALLOWED_ATTR"in e?Ce({},e.ALLOWED_ATTR):P,R="FORBID_TAGS"in e?Ce({},e.FORBID_TAGS):{},U="FORBID_ATTR"in e?Ce({},e.FORBID_ATTR):{},K="USE_PROFILES"in e&&e.USE_PROFILES,O=!1!==e.ALLOW_ARIA_ATTR,B=!1!==e.ALLOW_DATA_ATTR,z=e.ALLOW_UNKNOWN_PROTOCOLS||!1,F=e.SAFE_FOR_JQUERY||!1,H=e.SAFE_FOR_TEMPLATES||!1,V=e.WHOLE_DOCUMENT||!1,$=e.RETURN_DOM||!1,G=e.RETURN_DOM_FRAGMENT||!1,Y=e.RETURN_DOM_IMPORT||!1,W=e.FORCE_BODY||!1,q=!1!==e.SANITIZE_DOM,Z=!1!==e.KEEP_CONTENT,X=e.IN_PLACE||!1,M=e.ALLOWED_URI_REGEXP||M,H&&(B=!1),G&&($=!0),K&&(D=Ce({},[].concat(Le(ye))),L=[],!0===K.html&&(Ce(D,pe),Ce(L,be)),!0===K.svg&&(Ce(D,me),Ce(L,xe),Ce(L,_e)),!0===K.svgFilters&&(Ce(D,ge),Ce(L,xe),Ce(L,_e)),!0===K.mathMl&&(Ce(D,ve),Ce(L,we),Ce(L,_e))),e.ADD_TAGS&&(D===A&&(D=Se(D)),Ce(D,e.ADD_TAGS)),e.ADD_ATTR&&(L===P&&(L=Se(L)),Ce(L,e.ADD_ATTR)),e.ADD_URI_SAFE_ATTR&&Ce(ee,e.ADD_URI_SAFE_ATTR),Z&&(D["#text"]=!0),V&&Ce(D,["html","head","body"]),D.table&&Ce(D,["tbody"]),Object&&"freeze"in Object&&Object.freeze(e),te=e},oe=function(t){c.removed.push({element:t});try{t.parentNode.removeChild(t)}catch(e){t.outerHTML=""}},ae=function(e,t){try{c.removed.push({attribute:t.getAttributeNode(e),from:t})}catch(e){c.removed.push({attribute:null,from:t})}t.removeAttribute(e)},re=function(e){var t=void 0;if(W&&(e="<remove></remove>"+e),n)try{t=(new m).parseFromString(e,"text/html")}catch(e){}if(o&&Ce(R,["title"]),!t||!t.documentElement){var i=(t=y.createHTMLDocument("")).body;i.parentNode.removeChild(i.parentNode.firstElementChild),i.outerHTML=e}return x.call(t,V?"html":"body")[0]};c.isSupported&&(function(){try{re('<svg><p><style><img src="</style><img src=x onerror=alert(1)//">').querySelector("svg img")&&(n=!0)}catch(e){}}(),function(){try{re("<x/><title>&lt;/title&gt;&lt;img&gt;").querySelector("title").textContent.match(/<\/title/)&&(o=!0)}catch(e){}}());var se=function(e){return b.call(e.ownerDocument||e,e,i.SHOW_ELEMENT|i.SHOW_COMMENT|i.SHOW_TEXT,function(){return i.FILTER_ACCEPT},!1)},le=function(e){return"object"===(void 0===h?"undefined":Ae(h))?e instanceof h:e&&"object"===(void 0===e?"undefined":Ae(e))&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName},de=function(e,t,i){C[e]&&C[e].forEach(function(e){e.call(c,t,i,te)})},ce=function(e){var t,i=void 0;if(de("beforeSanitizeElements",e,null),!((t=e)instanceof f||t instanceof p||"string"==typeof t.nodeName&&"string"==typeof t.textContent&&"function"==typeof t.removeChild&&t.attributes instanceof s&&"function"==typeof t.removeAttribute&&"function"==typeof t.setAttribute))return oe(e),!0;var n=e.nodeName.toLowerCase();if(de("uponSanitizeElement",e,{tagName:n,allowedTags:D}),D[n]&&!R[n])return!F||e.firstElementChild||e.content&&e.content.firstElementChild||!/</g.test(e.textContent)||(c.removed.push({element:e.cloneNode()}),e.innerHTML?e.innerHTML=e.innerHTML.replace(/</g,"&lt;"):e.innerHTML=e.textContent.replace(/</g,"&lt;")),H&&3===e.nodeType&&(i=(i=(i=e.textContent).replace(S," ")).replace(T," "),e.textContent!==i&&(c.removed.push({element:e.cloneNode()}),e.textContent=i)),de("afterSanitizeElements",e,null),!1;if(Z&&!J[n]&&"function"==typeof e.insertAdjacentHTML)try{e.insertAdjacentHTML("AfterEnd",e.innerHTML)}catch(e){}return oe(e),!0},ue=function(e,t,i){if(q&&("id"===t||"name"===t)&&(i in a||i in ie))return!1;if(H&&(i=(i=i.replace(S," ")).replace(T," ")),B&&k.test(t));else if(O&&I.test(t));else{if(!L[t]||U[t])return!1;if(ee[t]);else if(M.test(i.replace(E,"")));else if("src"!==t&&"xlink:href"!==t||0!==i.indexOf("data:")||!Q[e])if(z&&!N.test(i.replace(E,"")));else if(i)return!1}return!0},he=function(e){var t=void 0,i=void 0,n=void 0,o=void 0,a=void 0;de("beforeSanitizeAttributes",e,null);var r=e.attributes;if(r){var s={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:L};for(a=r.length;a--;){var l=(t=r[a]).name;if(i=t.value.trim(),n=l.toLowerCase(),s.attrName=n,s.attrValue=i,s.keepAttr=!0,de("uponSanitizeAttribute",e,s),i=s.attrValue,"name"===n&&"IMG"===e.nodeName&&r.id)o=r.id,r=Array.prototype.slice.apply(r),ae("id",e),ae(l,e),r.indexOf(o)>a&&e.setAttribute("id",o.value);else{if("INPUT"===e.nodeName&&"type"===n&&"file"===i&&(L[n]||!U[n]))continue;"id"===l&&e.setAttribute(l,""),ae(l,e)}if(s.keepAttr){var d=e.nodeName.toLowerCase();if(ue(d,n,i))try{e.setAttribute(l,i),c.removed.pop()}catch(e){}}}de("afterSanitizeAttributes",e,null)}},fe=function e(t){var i=void 0,n=se(t);for(de("beforeSanitizeShadowDOM",t,null);i=n.nextNode();)de("uponSanitizeShadowNode",i,null),ce(i)||(i.content instanceof u&&e(i.content),he(i));de("afterSanitizeShadowDOM",t,null)};return c.sanitize=function(e,t){var i=void 0,n=void 0,o=void 0,a=void 0,r=void 0;if(e||(e="\x3c!--\x3e"),"string"!=typeof e&&!le(e)){if("function"!=typeof e.toString)throw new TypeError("toString is not a function");if("string"!=typeof(e=e.toString()))throw new TypeError("dirty is not a string, aborting")}if(!c.isSupported){if("object"===Ae(l.toStaticHTML)||"function"==typeof l.toStaticHTML){if("string"==typeof e)return l.toStaticHTML(e);if(le(e))return l.toStaticHTML(e.outerHTML)}return e}if(j||ne(t),c.removed=[],X);else if(e instanceof h)1===(n=(i=re("\x3c!--\x3e")).ownerDocument.importNode(e,!0)).nodeType&&"BODY"===n.nodeName?i=n:i.appendChild(n);else{if(!$&&!V&&-1===e.indexOf("<"))return e;if(!(i=re(e)))return $?null:""}i&&W&&oe(i.firstChild);for(var s=se(X?e:i);o=s.nextNode();)3===o.nodeType&&o===a||ce(o)||(o.content instanceof u&&fe(o.content),he(o),a=o);if(X)return e;if($){if(G)for(r=w.call(i.ownerDocument);i.firstChild;)r.appendChild(i.firstChild);else r=i;return Y&&(r=_.call(d,r,!0)),r}return V?i.outerHTML:i.innerHTML},c.setConfig=function(e){ne(e),j=!0},c.clearConfig=function(){te=null,j=!1},c.isValidAttribute=function(e,t,i){te||ne({});var n=e.toLowerCase(),o=t.toLowerCase();return ue(n,o,i)},c.addHook=function(e,t){"function"==typeof t&&(C[e]=C[e]||[],C[e].push(t))},c.removeHook=function(e){C[e]&&C[e].pop()},c.removeHooks=function(e){C[e]&&(C[e]=[])},c.removeAllHooks=function(){C={}},c}()}),function(e){"use strict";window.jQuery.fn.fileinputThemes.fa={fileActionSettings:{removeIcon:'<i class="fa fa-trash"></i>',uploadIcon:'<i class="fa fa-upload"></i>',uploadRetryIcon:'<i class="fa fa-repeat"></i>',downloadIcon:'<i class="fa fa-download"></i>',zoomIcon:'<i class="fa fa-search-plus"></i>',dragIcon:'<i class="fa fa-arrows"></i>',indicatorNew:'<i class="fa fa-plus-circle text-warning"></i>',indicatorSuccess:'<i class="fa fa-check-circle text-success"></i>',indicatorError:'<i class="fa fa-exclamation-circle text-danger"></i>',indicatorLoading:'<i class="fa fa-hourglass text-muted"></i>'},layoutTemplates:{fileIcon:'<i class="fa fa-file kv-caption-icon"></i> '},previewZoomButtonIcons:{prev:'<i class="fa fa-caret-left fa-lg"></i>',next:'<i class="fa fa-caret-right fa-lg"></i>',toggleheader:'<i class="fa fa-fw fa-arrows-v"></i>',fullscreen:'<i class="fa fa-fw fa-arrows-alt"></i>',borderless:'<i class="fa fa-fw fa-external-link"></i>',close:'<i class="fa fa-fw fa-remove"></i>'},previewFileIcon:'<i class="fa fa-file"></i>',browseIcon:'<i class="fa fa-folder-open"></i>',removeIcon:'<i class="fa fa-trash"></i>',cancelIcon:'<i class="fa fa-ban"></i>',uploadIcon:'<i class="fa fa-upload"></i>',msgValidationErrorIcon:'<i class="fa fa-exclamation-circle"></i> '}}(),function(e){"use strict";window.jQuery.fn.fileinputLocales.zh={fileSingle:"文件",filePlural:"个文件",browseLabel:"选择 &hellip;",removeLabel:"移除",removeTitle:"清除选中文件",cancelLabel:"取消",cancelTitle:"取消进行中的上传",uploadLabel:"上传",uploadTitle:"上传选中文件",msgNo:"没有",msgNoFilesSelected:"未选择文件",msgCancelled:"取消",msgPlaceholder:"选择 {files}...",msgZoomModalHeading:"详细预览",msgFileRequired:"必须选择一个文件上传.",msgSizeTooSmall:'文件 "{name}" (<b>{size} KB</b>) 必须大于限定大小 <b>{minSize} KB</b>.',msgSizeTooLarge:'文件 "{name}" (<b>{size} KB</b>) 超过了允许大小 <b>{maxSize} KB</b>.',msgFilesTooLess:"你必须选择最少 <b>{n}</b> {files} 来上传. ",msgFilesTooMany:"选择的上传文件个数 <b>({n})</b> 超出最大文件的限制个数 <b>{m}</b>.",msgFileNotFound:'文件 "{name}" 未找到!',msgFileSecured:'安全限制，为了防止读取文件 "{name}".',msgFileNotReadable:'文件 "{name}" 不可读.',msgFilePreviewAborted:'取消 "{name}" 的预览.',msgFilePreviewError:'读取 "{name}" 时出现了一个错误.',msgInvalidFileName:'文件名 "{name}" 包含非法字符.',msgInvalidFileType:'不正确的类型 "{name}". 只支持 "{types}" 类型的文件.',msgInvalidFileExtension:'不正确的文件扩展名 "{name}". 只支持 "{extensions}" 的文件扩展名.',msgFileTypes:{image:"image",html:"HTML",text:"text",video:"video",audio:"audio",flash:"flash",pdf:"PDF",object:"object"},msgUploadAborted:"该文件上传被中止",msgUploadThreshold:"处理中...",msgUploadBegin:"正在初始化...",msgUploadEnd:"完成",msgUploadEmpty:"无效的文件上传.",msgUploadError:"上传出错",msgValidationError:"验证错误",msgLoading:"加载第 {index} 文件 共 {files} &hellip;",msgProgress:"加载第 {index} 文件 共 {files} - {name} - {percent}% 完成.",msgSelected:"{n} {files} 选中",msgFoldersNotAllowed:"只支持拖拽文件! 跳过 {n} 拖拽的文件夹.",msgImageWidthSmall:'图像文件的"{name}"的宽度必须是至少{size}像素.',msgImageHeightSmall:'图像文件的"{name}"的高度必须至少为{size}像素.',msgImageWidthLarge:'图像文件"{name}"的宽度不能超过{size}像素.',msgImageHeightLarge:'图像文件"{name}"的高度不能超过{size}像素.',msgImageResizeError:"无法获取的图像尺寸调整。",msgImageResizeException:"调整图像大小时发生错误。<pre>{errors}</pre>",msgAjaxError:"{operation} 发生错误. 请重试!",msgAjaxProgressError:"{operation} 失败",ajaxOperations:{deleteThumb:"删除文件",uploadThumb:"上传文件",uploadBatch:"批量上传",uploadExtra:"表单数据上传"},dropZoneTitle:"拖拽文件到这里 &hellip;<br>支持多文件同时上传",dropZoneClickTitle:"<br>(或点击{files}按钮选择文件)",fileActionSettings:{removeTitle:"删除文件",uploadTitle:"上传文件",uploadRetryTitle:"重试",zoomTitle:"查看详情",dragTitle:"移动 / 重置",indicatorNewTitle:"没有上传",indicatorSuccessTitle:"上传",indicatorErrorTitle:"上传错误",indicatorLoadingTitle:"上传 ..."},previewZoomButtonTitles:{prev:"预览上一个文件",next:"预览下一个文件",toggleheader:"缩放",fullscreen:"全屏",borderless:"无边界模式",close:"关闭当前预览"}}}(),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.moment=t()}(this,function(){"use strict";var e,o;function h(){return e.apply(null,arguments)}function s(e){return e instanceof Array||"[object Array]"===Object.prototype.toString.call(e)}function l(e){return null!=e&&"[object Object]"===Object.prototype.toString.call(e)}function d(e){return void 0===e}function c(e){return"number"==typeof e||"[object Number]"===Object.prototype.toString.call(e)}function u(e){return e instanceof Date||"[object Date]"===Object.prototype.toString.call(e)}function f(e,t){var i,n=[];for(i=0;i<e.length;++i)n.push(t(e[i],i));return n}function p(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function m(e,t){for(var i in t)p(t,i)&&(e[i]=t[i]);return p(t,"toString")&&(e.toString=t.toString),p(t,"valueOf")&&(e.valueOf=t.valueOf),e}function g(e,t,i,n){return kt(e,t,i,n,!0).utc()}function v(e){return null==e._pf&&(e._pf={empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null,rfc2822:!1,weekdayMismatch:!1}),e._pf}function y(e){if(null==e._isValid){var t=v(e),i=o.call(t.parsedDateParts,function(e){return null!=e}),n=!isNaN(e._d.getTime())&&t.overflow<0&&!t.empty&&!t.invalidMonth&&!t.invalidWeekday&&!t.weekdayMismatch&&!t.nullInput&&!t.invalidFormat&&!t.userInvalidated&&(!t.meridiem||t.meridiem&&i);if(e._strict&&(n=n&&0===t.charsLeftOver&&0===t.unusedTokens.length&&void 0===t.bigHour),null!=Object.isFrozen&&Object.isFrozen(e))return n;e._isValid=n}return e._isValid}function b(e){var t=g(NaN);return null!=e?m(v(t),e):v(t).userInvalidated=!0,t}o=Array.prototype.some?Array.prototype.some:function(e){for(var t=Object(this),i=t.length>>>0,n=0;n<i;n++)if(n in t&&e.call(this,t[n],n,t))return!0;return!1};var a=h.momentProperties=[];function x(e,t){var i,n,o;if(d(t._isAMomentObject)||(e._isAMomentObject=t._isAMomentObject),d(t._i)||(e._i=t._i),d(t._f)||(e._f=t._f),d(t._l)||(e._l=t._l),d(t._strict)||(e._strict=t._strict),d(t._tzm)||(e._tzm=t._tzm),d(t._isUTC)||(e._isUTC=t._isUTC),d(t._offset)||(e._offset=t._offset),d(t._pf)||(e._pf=v(t)),d(t._locale)||(e._locale=t._locale),0<a.length)for(i=0;i<a.length;i++)d(o=t[n=a[i]])||(e[n]=o);return e}var t=!1;function w(e){x(this,e),this._d=new Date(null!=e._d?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===t&&(t=!0,h.updateOffset(this),t=!1)}function _(e){return e instanceof w||null!=e&&null!=e._isAMomentObject}function C(e){return e<0?Math.ceil(e)||0:Math.floor(e)}function S(e){var t=+e,i=0;return 0!==t&&isFinite(t)&&(i=C(t)),i}function r(e,t,i){var n,o=Math.min(e.length,t.length),a=Math.abs(e.length-t.length),r=0;for(n=0;n<o;n++)(i&&e[n]!==t[n]||!i&&S(e[n])!==S(t[n]))&&r++;return r+a}function T(e){!1===h.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function i(o,a){var r=!0;return m(function(){if(null!=h.deprecationHandler&&h.deprecationHandler(null,o),r){for(var e,t=[],i=0;i<arguments.length;i++){if(e="","object"==typeof arguments[i]){for(var n in e+="\n["+i+"] ",arguments[0])e+=n+": "+arguments[0][n]+", ";e=e.slice(0,-2)}else e=arguments[i];t.push(e)}T(o+"\nArguments: "+Array.prototype.slice.call(t).join("")+"\n"+(new Error).stack),r=!1}return a.apply(this,arguments)},a)}var n,k={};function I(e,t){null!=h.deprecationHandler&&h.deprecationHandler(e,t),k[e]||(T(t),k[e]=!0)}function N(e){return e instanceof Function||"[object Function]"===Object.prototype.toString.call(e)}function E(e,t){var i,n=m({},e);for(i in t)p(t,i)&&(l(e[i])&&l(t[i])?(n[i]={},m(n[i],e[i]),m(n[i],t[i])):null!=t[i]?n[i]=t[i]:delete n[i]);for(i in e)p(e,i)&&!p(t,i)&&l(e[i])&&(n[i]=m({},n[i]));return n}function M(e){null!=e&&this.set(e)}h.suppressDeprecationWarnings=!1,h.deprecationHandler=null,n=Object.keys?Object.keys:function(e){var t,i=[];for(t in e)p(e,t)&&i.push(t);return i};var D={};function A(e,t){var i=e.toLowerCase();D[i]=D[i+"s"]=D[t]=e}function L(e){return"string"==typeof e?D[e]||D[e.toLowerCase()]:void 0}function P(e){var t,i,n={};for(i in e)p(e,i)&&(t=L(i))&&(n[t]=e[i]);return n}var R={};function U(e,t){R[e]=t}function O(e,t,i){var n=""+Math.abs(e),o=t-n.length;return(0<=e?i?"+":"":"-")+Math.pow(10,Math.max(0,o)).toString().substr(1)+n}var B=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,z=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,F={},H={};function V(e,t,i,n){var o=n;"string"==typeof n&&(o=function(){return this[n]()}),e&&(H[e]=o),t&&(H[t[0]]=function(){return O(o.apply(this,arguments),t[1],t[2])}),i&&(H[i]=function(){return this.localeData().ordinal(o.apply(this,arguments),e)})}function j(e,t){return e.isValid()?(t=W(t,e.localeData()),F[t]=F[t]||function(n){var e,o,t,a=n.match(B);for(e=0,o=a.length;e<o;e++)H[a[e]]?a[e]=H[a[e]]:a[e]=(t=a[e]).match(/\[[\s\S]/)?t.replace(/^\[|\]$/g,""):t.replace(/\\/g,"");return function(e){var t,i="";for(t=0;t<o;t++)i+=N(a[t])?a[t].call(e,n):a[t];return i}}(t),F[t](e)):e.localeData().invalidDate()}function W(e,t){var i=5;function n(e){return t.longDateFormat(e)||e}for(z.lastIndex=0;0<=i&&z.test(e);)e=e.replace(z,n),z.lastIndex=0,i-=1;return e}var $=/\d/,G=/\d\d/,Y=/\d{3}/,q=/\d{4}/,Z=/[+-]?\d{6}/,X=/\d\d?/,K=/\d\d\d\d?/,J=/\d\d\d\d\d\d?/,Q=/\d{1,3}/,ee=/\d{1,4}/,te=/[+-]?\d{1,6}/,ie=/\d+/,ne=/[+-]?\d+/,oe=/Z|[+-]\d\d:?\d\d/gi,ae=/Z|[+-]\d\d(?::?\d\d)?/gi,re=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,se={};function le(e,i,n){se[e]=N(i)?i:function(e,t){return e&&n?n:i}}function de(e,t){return p(se,e)?se[e](t._strict,t._locale):new RegExp(ce(e.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,i,n,o){return t||i||n||o})))}function ce(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}var ue={};function he(e,i){var t,n=i;for("string"==typeof e&&(e=[e]),c(i)&&(n=function(e,t){t[i]=S(e)}),t=0;t<e.length;t++)ue[e[t]]=n}function fe(e,o){he(e,function(e,t,i,n){i._w=i._w||{},o(e,i._w,i,n)})}var pe=0,me=1,ge=2,ve=3,ye=4,be=5,xe=6,we=7,_e=8;function Ce(e){return Se(e)?366:365}function Se(e){return e%4==0&&e%100!=0||e%400==0}V("Y",0,0,function(){var e=this.year();return e<=9999?""+e:"+"+e}),V(0,["YY",2],0,function(){return this.year()%100}),V(0,["YYYY",4],0,"year"),V(0,["YYYYY",5],0,"year"),V(0,["YYYYYY",6,!0],0,"year"),A("year","y"),U("year",1),le("Y",ne),le("YY",X,G),le("YYYY",ee,q),le("YYYYY",te,Z),le("YYYYYY",te,Z),he(["YYYYY","YYYYYY"],pe),he("YYYY",function(e,t){t[pe]=2===e.length?h.parseTwoDigitYear(e):S(e)}),he("YY",function(e,t){t[pe]=h.parseTwoDigitYear(e)}),he("Y",function(e,t){t[pe]=parseInt(e,10)}),h.parseTwoDigitYear=function(e){return S(e)+(68<S(e)?1900:2e3)};var Te,ke=Ie("FullYear",!0);function Ie(t,i){return function(e){return null!=e?(Ee(this,t,e),h.updateOffset(this,i),this):Ne(this,t)}}function Ne(e,t){return e.isValid()?e._d["get"+(e._isUTC?"UTC":"")+t]():NaN}function Ee(e,t,i){e.isValid()&&!isNaN(i)&&("FullYear"===t&&Se(e.year())&&1===e.month()&&29===e.date()?e._d["set"+(e._isUTC?"UTC":"")+t](i,e.month(),Me(i,e.month())):e._d["set"+(e._isUTC?"UTC":"")+t](i))}function Me(e,t){if(isNaN(e)||isNaN(t))return NaN;var i,n=(t%(i=12)+i)%i;return e+=(t-n)/12,1===n?Se(e)?29:28:31-n%7%2}Te=Array.prototype.indexOf?Array.prototype.indexOf:function(e){var t;for(t=0;t<this.length;++t)if(this[t]===e)return t;return-1},V("M",["MM",2],"Mo",function(){return this.month()+1}),V("MMM",0,0,function(e){return this.localeData().monthsShort(this,e)}),V("MMMM",0,0,function(e){return this.localeData().months(this,e)}),A("month","M"),U("month",8),le("M",X),le("MM",X,G),le("MMM",function(e,t){return t.monthsShortRegex(e)}),le("MMMM",function(e,t){return t.monthsRegex(e)}),he(["M","MM"],function(e,t){t[me]=S(e)-1}),he(["MMM","MMMM"],function(e,t,i,n){var o=i._locale.monthsParse(e,n,i._strict);null!=o?t[me]=o:v(i).invalidMonth=e});var De=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,Ae="January_February_March_April_May_June_July_August_September_October_November_December".split("_");var Le="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_");function Pe(e,t){var i;if(!e.isValid())return e;if("string"==typeof t)if(/^\d+$/.test(t))t=S(t);else if(!c(t=e.localeData().monthsParse(t)))return e;return i=Math.min(e.date(),Me(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,i),e}function Re(e){return null!=e?(Pe(this,e),h.updateOffset(this,!0),this):Ne(this,"Month")}var Ue=re;var Oe=re;function Be(){function e(e,t){return t.length-e.length}var t,i,n=[],o=[],a=[];for(t=0;t<12;t++)i=g([2e3,t]),n.push(this.monthsShort(i,"")),o.push(this.months(i,"")),a.push(this.months(i,"")),a.push(this.monthsShort(i,""));for(n.sort(e),o.sort(e),a.sort(e),t=0;t<12;t++)n[t]=ce(n[t]),o[t]=ce(o[t]);for(t=0;t<24;t++)a[t]=ce(a[t]);this._monthsRegex=new RegExp("^("+a.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+o.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+n.join("|")+")","i")}function ze(e){var t=new Date(Date.UTC.apply(null,arguments));return e<100&&0<=e&&isFinite(t.getUTCFullYear())&&t.setUTCFullYear(e),t}function Fe(e,t,i){var n=7+t-i;return-((7+ze(e,0,n).getUTCDay()-t)%7)+n-1}function He(e,t,i,n,o){var a,r,s=1+7*(t-1)+(7+i-n)%7+Fe(e,n,o);return r=s<=0?Ce(a=e-1)+s:s>Ce(e)?(a=e+1,s-Ce(e)):(a=e,s),{year:a,dayOfYear:r}}function Ve(e,t,i){var n,o,a=Fe(e.year(),t,i),r=Math.floor((e.dayOfYear()-a-1)/7)+1;return r<1?n=r+je(o=e.year()-1,t,i):r>je(e.year(),t,i)?(n=r-je(e.year(),t,i),o=e.year()+1):(o=e.year(),n=r),{week:n,year:o}}function je(e,t,i){var n=Fe(e,t,i),o=Fe(e+1,t,i);return(Ce(e)-n+o)/7}V("w",["ww",2],"wo","week"),V("W",["WW",2],"Wo","isoWeek"),A("week","w"),A("isoWeek","W"),U("week",5),U("isoWeek",5),le("w",X),le("ww",X,G),le("W",X),le("WW",X,G),fe(["w","ww","W","WW"],function(e,t,i,n){t[n.substr(0,1)]=S(e)});V("d",0,"do","day"),V("dd",0,0,function(e){return this.localeData().weekdaysMin(this,e)}),V("ddd",0,0,function(e){return this.localeData().weekdaysShort(this,e)}),V("dddd",0,0,function(e){return this.localeData().weekdays(this,e)}),V("e",0,0,"weekday"),V("E",0,0,"isoWeekday"),A("day","d"),A("weekday","e"),A("isoWeekday","E"),U("day",11),U("weekday",11),U("isoWeekday",11),le("d",X),le("e",X),le("E",X),le("dd",function(e,t){return t.weekdaysMinRegex(e)}),le("ddd",function(e,t){return t.weekdaysShortRegex(e)}),le("dddd",function(e,t){return t.weekdaysRegex(e)}),fe(["dd","ddd","dddd"],function(e,t,i,n){var o=i._locale.weekdaysParse(e,n,i._strict);null!=o?t.d=o:v(i).invalidWeekday=e}),fe(["d","e","E"],function(e,t,i,n){t[n]=S(e)});var We="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_");var $e="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_");var Ge="Su_Mo_Tu_We_Th_Fr_Sa".split("_");var Ye=re;var qe=re;var Ze=re;function Xe(){function e(e,t){return t.length-e.length}var t,i,n,o,a,r=[],s=[],l=[],d=[];for(t=0;t<7;t++)i=g([2e3,1]).day(t),n=this.weekdaysMin(i,""),o=this.weekdaysShort(i,""),a=this.weekdays(i,""),r.push(n),s.push(o),l.push(a),d.push(n),d.push(o),d.push(a);for(r.sort(e),s.sort(e),l.sort(e),d.sort(e),t=0;t<7;t++)s[t]=ce(s[t]),l[t]=ce(l[t]),d[t]=ce(d[t]);this._weekdaysRegex=new RegExp("^("+d.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+l.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+s.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+r.join("|")+")","i")}function Ke(){return this.hours()%12||12}function Je(e,t){V(e,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),t)})}function Qe(e,t){return t._meridiemParse}V("H",["HH",2],0,"hour"),V("h",["hh",2],0,Ke),V("k",["kk",2],0,function(){return this.hours()||24}),V("hmm",0,0,function(){return""+Ke.apply(this)+O(this.minutes(),2)}),V("hmmss",0,0,function(){return""+Ke.apply(this)+O(this.minutes(),2)+O(this.seconds(),2)}),V("Hmm",0,0,function(){return""+this.hours()+O(this.minutes(),2)}),V("Hmmss",0,0,function(){return""+this.hours()+O(this.minutes(),2)+O(this.seconds(),2)}),Je("a",!0),Je("A",!1),A("hour","h"),U("hour",13),le("a",Qe),le("A",Qe),le("H",X),le("h",X),le("k",X),le("HH",X,G),le("hh",X,G),le("kk",X,G),le("hmm",K),le("hmmss",J),le("Hmm",K),le("Hmmss",J),he(["H","HH"],ve),he(["k","kk"],function(e,t,i){var n=S(e);t[ve]=24===n?0:n}),he(["a","A"],function(e,t,i){i._isPm=i._locale.isPM(e),i._meridiem=e}),he(["h","hh"],function(e,t,i){t[ve]=S(e),v(i).bigHour=!0}),he("hmm",function(e,t,i){var n=e.length-2;t[ve]=S(e.substr(0,n)),t[ye]=S(e.substr(n)),v(i).bigHour=!0}),he("hmmss",function(e,t,i){var n=e.length-4,o=e.length-2;t[ve]=S(e.substr(0,n)),t[ye]=S(e.substr(n,2)),t[be]=S(e.substr(o)),v(i).bigHour=!0}),he("Hmm",function(e,t,i){var n=e.length-2;t[ve]=S(e.substr(0,n)),t[ye]=S(e.substr(n))}),he("Hmmss",function(e,t,i){var n=e.length-4,o=e.length-2;t[ve]=S(e.substr(0,n)),t[ye]=S(e.substr(n,2)),t[be]=S(e.substr(o))});var et,tt=Ie("Hours",!0),it={calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},invalidDate:"Invalid date",ordinal:"%d",dayOfMonthOrdinalParse:/\d{1,2}/,relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},months:Ae,monthsShort:Le,week:{dow:0,doy:6},weekdays:We,weekdaysMin:Ge,weekdaysShort:$e,meridiemParse:/[ap]\.?m?\.?/i},nt={},ot={};function at(e){return e?e.toLowerCase().replace("_","-"):e}function rt(e){var t=null;if(!nt[e]&&"undefined"!=typeof module&&module&&module.exports)try{t=et._abbr,require("./locale/"+e),st(t)}catch(e){}return nt[e]}function st(e,t){var i;return e&&((i=d(t)?dt(e):lt(e,t))?et=i:"undefined"!=typeof console&&console.warn&&console.warn("Locale "+e+" not found. Did you forget to load it?")),et._abbr}function lt(e,t){if(null===t)return delete nt[e],null;var i,n=it;if(t.abbr=e,null!=nt[e])I("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),n=nt[e]._config;else if(null!=t.parentLocale)if(null!=nt[t.parentLocale])n=nt[t.parentLocale]._config;else{if(null==(i=rt(t.parentLocale)))return ot[t.parentLocale]||(ot[t.parentLocale]=[]),ot[t.parentLocale].push({name:e,config:t}),null;n=i._config}return nt[e]=new M(E(n,t)),ot[e]&&ot[e].forEach(function(e){lt(e.name,e.config)}),st(e),nt[e]}function dt(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return et;if(!s(e)){if(t=rt(e))return t;e=[e]}return function(e){for(var t,i,n,o,a=0;a<e.length;){for(t=(o=at(e[a]).split("-")).length,i=(i=at(e[a+1]))?i.split("-"):null;0<t;){if(n=rt(o.slice(0,t).join("-")))return n;if(i&&i.length>=t&&r(o,i,!0)>=t-1)break;t--}a++}return et}(e)}function ct(e){var t,i=e._a;return i&&-2===v(e).overflow&&(t=i[me]<0||11<i[me]?me:i[ge]<1||i[ge]>Me(i[pe],i[me])?ge:i[ve]<0||24<i[ve]||24===i[ve]&&(0!==i[ye]||0!==i[be]||0!==i[xe])?ve:i[ye]<0||59<i[ye]?ye:i[be]<0||59<i[be]?be:i[xe]<0||999<i[xe]?xe:-1,v(e)._overflowDayOfYear&&(t<pe||ge<t)&&(t=ge),v(e)._overflowWeeks&&-1===t&&(t=we),v(e)._overflowWeekday&&-1===t&&(t=_e),v(e).overflow=t),e}function ut(e,t,i){return null!=e?e:null!=t?t:i}function ht(e){var t,i,n,o,a,r=[];if(!e._d){var s,l;for(s=e,l=new Date(h.now()),n=s._useUTC?[l.getUTCFullYear(),l.getUTCMonth(),l.getUTCDate()]:[l.getFullYear(),l.getMonth(),l.getDate()],e._w&&null==e._a[ge]&&null==e._a[me]&&function(e){var t,i,n,o,a,r,s,l;if(null!=(t=e._w).GG||null!=t.W||null!=t.E)a=1,r=4,i=ut(t.GG,e._a[pe],Ve(It(),1,4).year),n=ut(t.W,1),((o=ut(t.E,1))<1||7<o)&&(l=!0);else{a=e._locale._week.dow,r=e._locale._week.doy;var d=Ve(It(),a,r);i=ut(t.gg,e._a[pe],d.year),n=ut(t.w,d.week),null!=t.d?((o=t.d)<0||6<o)&&(l=!0):null!=t.e?(o=t.e+a,(t.e<0||6<t.e)&&(l=!0)):o=a}n<1||n>je(i,a,r)?v(e)._overflowWeeks=!0:null!=l?v(e)._overflowWeekday=!0:(s=He(i,n,o,a,r),e._a[pe]=s.year,e._dayOfYear=s.dayOfYear)}(e),null!=e._dayOfYear&&(a=ut(e._a[pe],n[pe]),(e._dayOfYear>Ce(a)||0===e._dayOfYear)&&(v(e)._overflowDayOfYear=!0),i=ze(a,0,e._dayOfYear),e._a[me]=i.getUTCMonth(),e._a[ge]=i.getUTCDate()),t=0;t<3&&null==e._a[t];++t)e._a[t]=r[t]=n[t];for(;t<7;t++)e._a[t]=r[t]=null==e._a[t]?2===t?1:0:e._a[t];24===e._a[ve]&&0===e._a[ye]&&0===e._a[be]&&0===e._a[xe]&&(e._nextDay=!0,e._a[ve]=0),e._d=(e._useUTC?ze:function(e,t,i,n,o,a,r){var s=new Date(e,t,i,n,o,a,r);return e<100&&0<=e&&isFinite(s.getFullYear())&&s.setFullYear(e),s}).apply(null,r),o=e._useUTC?e._d.getUTCDay():e._d.getDay(),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[ve]=24),e._w&&void 0!==e._w.d&&e._w.d!==o&&(v(e).weekdayMismatch=!0)}}var ft=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,pt=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,mt=/Z|[+-]\d\d(?::?\d\d)?/,gt=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],vt=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],yt=/^\/?Date\((\-?\d+)/i;function bt(e){var t,i,n,o,a,r,s=e._i,l=ft.exec(s)||pt.exec(s);if(l){for(v(e).iso=!0,t=0,i=gt.length;t<i;t++)if(gt[t][1].exec(l[1])){o=gt[t][0],n=!1!==gt[t][2];break}if(null==o)return void(e._isValid=!1);if(l[3]){for(t=0,i=vt.length;t<i;t++)if(vt[t][1].exec(l[3])){a=(l[2]||" ")+vt[t][0];break}if(null==a)return void(e._isValid=!1)}if(!n&&null!=a)return void(e._isValid=!1);if(l[4]){if(!mt.exec(l[4]))return void(e._isValid=!1);r="Z"}e._f=o+(a||"")+(r||""),St(e)}else e._isValid=!1}var xt=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/;function wt(e,t,i,n,o,a){var r=[function(e){var t=parseInt(e,10);{if(t<=49)return 2e3+t;if(t<=999)return 1900+t}return t}(e),Le.indexOf(t),parseInt(i,10),parseInt(n,10),parseInt(o,10)];return a&&r.push(parseInt(a,10)),r}var _t={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function Ct(e){var t,i,n,o=xt.exec(e._i.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").replace(/^\s\s*/,"").replace(/\s\s*$/,""));if(o){var a=wt(o[4],o[3],o[2],o[5],o[6],o[7]);if(t=o[1],i=a,n=e,t&&$e.indexOf(t)!==new Date(i[0],i[1],i[2]).getDay()&&(v(n).weekdayMismatch=!0,!(n._isValid=!1)))return;e._a=a,e._tzm=function(e,t,i){if(e)return _t[e];if(t)return 0;var n=parseInt(i,10),o=n%100;return(n-o)/100*60+o}(o[8],o[9],o[10]),e._d=ze.apply(null,e._a),e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),v(e).rfc2822=!0}else e._isValid=!1}function St(e){if(e._f!==h.ISO_8601)if(e._f!==h.RFC_2822){e._a=[],v(e).empty=!0;var t,i,n,o,a,r,s,l,d=""+e._i,c=d.length,u=0;for(n=W(e._f,e._locale).match(B)||[],t=0;t<n.length;t++)o=n[t],(i=(d.match(de(o,e))||[])[0])&&(0<(a=d.substr(0,d.indexOf(i))).length&&v(e).unusedInput.push(a),d=d.slice(d.indexOf(i)+i.length),u+=i.length),H[o]?(i?v(e).empty=!1:v(e).unusedTokens.push(o),r=o,l=e,null!=(s=i)&&p(ue,r)&&ue[r](s,l._a,l,r)):e._strict&&!i&&v(e).unusedTokens.push(o);v(e).charsLeftOver=c-u,0<d.length&&v(e).unusedInput.push(d),e._a[ve]<=12&&!0===v(e).bigHour&&0<e._a[ve]&&(v(e).bigHour=void 0),v(e).parsedDateParts=e._a.slice(0),v(e).meridiem=e._meridiem,e._a[ve]=function(e,t,i){var n;if(null==i)return t;return null!=e.meridiemHour?e.meridiemHour(t,i):(null!=e.isPM&&((n=e.isPM(i))&&t<12&&(t+=12),n||12!==t||(t=0)),t)}(e._locale,e._a[ve],e._meridiem),ht(e),ct(e)}else Ct(e);else bt(e)}function Tt(e){var t,i,n,o,a=e._i,r=e._f;return e._locale=e._locale||dt(e._l),null===a||void 0===r&&""===a?b({nullInput:!0}):("string"==typeof a&&(e._i=a=e._locale.preparse(a)),_(a)?new w(ct(a)):(u(a)?e._d=a:s(r)?function(e){var t,i,n,o,a;if(0===e._f.length)return v(e).invalidFormat=!0,e._d=new Date(NaN);for(o=0;o<e._f.length;o++)a=0,t=x({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._f=e._f[o],St(t),y(t)&&(a+=v(t).charsLeftOver,a+=10*v(t).unusedTokens.length,v(t).score=a,(null==n||a<n)&&(n=a,i=t));m(e,i||t)}(e):r?St(e):d(i=(t=e)._i)?t._d=new Date(h.now()):u(i)?t._d=new Date(i.valueOf()):"string"==typeof i?(n=t,null===(o=yt.exec(n._i))?(bt(n),!1===n._isValid&&(delete n._isValid,Ct(n),!1===n._isValid&&(delete n._isValid,h.createFromInputFallback(n)))):n._d=new Date(+o[1])):s(i)?(t._a=f(i.slice(0),function(e){return parseInt(e,10)}),ht(t)):l(i)?function(e){if(!e._d){var t=P(e._i);e._a=f([t.year,t.month,t.day||t.date,t.hour,t.minute,t.second,t.millisecond],function(e){return e&&parseInt(e,10)}),ht(e)}}(t):c(i)?t._d=new Date(i):h.createFromInputFallback(t),y(e)||(e._d=null),e))}function kt(e,t,i,n,o){var a,r={};return!0!==i&&!1!==i||(n=i,i=void 0),(l(e)&&function(e){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(e).length;var t;for(t in e)if(e.hasOwnProperty(t))return!1;return!0}(e)||s(e)&&0===e.length)&&(e=void 0),r._isAMomentObject=!0,r._useUTC=r._isUTC=o,r._l=i,r._i=e,r._f=t,r._strict=n,(a=new w(ct(Tt(r))))._nextDay&&(a.add(1,"d"),a._nextDay=void 0),a}function It(e,t,i,n){return kt(e,t,i,n,!1)}h.createFromInputFallback=i("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged and will be removed in an upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))}),h.ISO_8601=function(){},h.RFC_2822=function(){};var Nt=i("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=It.apply(null,arguments);return this.isValid()&&e.isValid()?e<this?this:e:b()}),Et=i("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var e=It.apply(null,arguments);return this.isValid()&&e.isValid()?this<e?this:e:b()});function Mt(e,t){var i,n;if(1===t.length&&s(t[0])&&(t=t[0]),!t.length)return It();for(i=t[0],n=1;n<t.length;++n)t[n].isValid()&&!t[n][e](i)||(i=t[n]);return i}var Dt=["year","quarter","month","week","day","hour","minute","second","millisecond"];function At(e){var t=P(e),i=t.year||0,n=t.quarter||0,o=t.month||0,a=t.week||0,r=t.day||0,s=t.hour||0,l=t.minute||0,d=t.second||0,c=t.millisecond||0;this._isValid=function(e){for(var t in e)if(-1===Te.call(Dt,t)||null!=e[t]&&isNaN(e[t]))return!1;for(var i=!1,n=0;n<Dt.length;++n)if(e[Dt[n]]){if(i)return!1;parseFloat(e[Dt[n]])!==S(e[Dt[n]])&&(i=!0)}return!0}(t),this._milliseconds=+c+1e3*d+6e4*l+1e3*s*60*60,this._days=+r+7*a,this._months=+o+3*n+12*i,this._data={},this._locale=dt(),this._bubble()}function Lt(e){return e instanceof At}function Pt(e){return e<0?-1*Math.round(-1*e):Math.round(e)}function Rt(e,i){V(e,0,0,function(){var e=this.utcOffset(),t="+";return e<0&&(e=-e,t="-"),t+O(~~(e/60),2)+i+O(~~e%60,2)})}Rt("Z",":"),Rt("ZZ",""),le("Z",ae),le("ZZ",ae),he(["Z","ZZ"],function(e,t,i){i._useUTC=!0,i._tzm=Ot(ae,e)});var Ut=/([\+\-]|\d\d)/gi;function Ot(e,t){var i=(t||"").match(e);if(null===i)return null;var n=((i[i.length-1]||[])+"").match(Ut)||["-",0,0],o=60*n[1]+S(n[2]);return 0===o?0:"+"===n[0]?o:-o}function Bt(e,t){var i,n;return t._isUTC?(i=t.clone(),n=(_(e)||u(e)?e.valueOf():It(e).valueOf())-i.valueOf(),i._d.setTime(i._d.valueOf()+n),h.updateOffset(i,!1),i):It(e).local()}function zt(e){return 15*-Math.round(e._d.getTimezoneOffset()/15)}function Ft(){return!!this.isValid()&&(this._isUTC&&0===this._offset)}h.updateOffset=function(){};var Ht=/^(\-|\+)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/,Vt=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;function jt(e,t){var i,n,o,a=e,r=null;return Lt(e)?a={ms:e._milliseconds,d:e._days,M:e._months}:c(e)?(a={},t?a[t]=e:a.milliseconds=e):(r=Ht.exec(e))?(i="-"===r[1]?-1:1,a={y:0,d:S(r[ge])*i,h:S(r[ve])*i,m:S(r[ye])*i,s:S(r[be])*i,ms:S(Pt(1e3*r[xe]))*i}):(r=Vt.exec(e))?(i="-"===r[1]?-1:(r[1],1),a={y:Wt(r[2],i),M:Wt(r[3],i),w:Wt(r[4],i),d:Wt(r[5],i),h:Wt(r[6],i),m:Wt(r[7],i),s:Wt(r[8],i)}):null==a?a={}:"object"==typeof a&&("from"in a||"to"in a)&&(o=function(e,t){var i;if(!e.isValid()||!t.isValid())return{milliseconds:0,months:0};t=Bt(t,e),e.isBefore(t)?i=$t(e,t):((i=$t(t,e)).milliseconds=-i.milliseconds,i.months=-i.months);return i}(It(a.from),It(a.to)),(a={}).ms=o.milliseconds,a.M=o.months),n=new At(a),Lt(e)&&p(e,"_locale")&&(n._locale=e._locale),n}function Wt(e,t){var i=e&&parseFloat(e.replace(",","."));return(isNaN(i)?0:i)*t}function $t(e,t){var i={milliseconds:0,months:0};return i.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(i.months,"M").isAfter(t)&&--i.months,i.milliseconds=+t-+e.clone().add(i.months,"M"),i}function Gt(n,o){return function(e,t){var i;return null===t||isNaN(+t)||(I(o,"moment()."+o+"(period, number) is deprecated. Please use moment()."+o+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),i=e,e=t,t=i),Yt(this,jt(e="string"==typeof e?+e:e,t),n),this}}function Yt(e,t,i,n){var o=t._milliseconds,a=Pt(t._days),r=Pt(t._months);e.isValid()&&(n=null==n||n,r&&Pe(e,Ne(e,"Month")+r*i),a&&Ee(e,"Date",Ne(e,"Date")+a*i),o&&e._d.setTime(e._d.valueOf()+o*i),n&&h.updateOffset(e,a||r))}jt.fn=At.prototype,jt.invalid=function(){return jt(NaN)};var qt=Gt(1,"add"),Zt=Gt(-1,"subtract");function Xt(e,t){var i=12*(t.year()-e.year())+(t.month()-e.month()),n=e.clone().add(i,"months");return-(i+(t-n<0?(t-n)/(n-e.clone().add(i-1,"months")):(t-n)/(e.clone().add(i+1,"months")-n)))||0}function Kt(e){var t;return void 0===e?this._locale._abbr:(null!=(t=dt(e))&&(this._locale=t),this)}h.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",h.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var Jt=i("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(e){return void 0===e?this.localeData():this.locale(e)});function Qt(){return this._locale}function ei(e,t){V(0,[e,e.length],0,t)}function ti(e,t,i,n,o){var a;return null==e?Ve(this,n,o).year:((a=je(e,n,o))<t&&(t=a),function(e,t,i,n,o){var a=He(e,t,i,n,o),r=ze(a.year,0,a.dayOfYear);return this.year(r.getUTCFullYear()),this.month(r.getUTCMonth()),this.date(r.getUTCDate()),this}.call(this,e,t,i,n,o))}V(0,["gg",2],0,function(){return this.weekYear()%100}),V(0,["GG",2],0,function(){return this.isoWeekYear()%100}),ei("gggg","weekYear"),ei("ggggg","weekYear"),ei("GGGG","isoWeekYear"),ei("GGGGG","isoWeekYear"),A("weekYear","gg"),A("isoWeekYear","GG"),U("weekYear",1),U("isoWeekYear",1),le("G",ne),le("g",ne),le("GG",X,G),le("gg",X,G),le("GGGG",ee,q),le("gggg",ee,q),le("GGGGG",te,Z),le("ggggg",te,Z),fe(["gggg","ggggg","GGGG","GGGGG"],function(e,t,i,n){t[n.substr(0,2)]=S(e)}),fe(["gg","GG"],function(e,t,i,n){t[n]=h.parseTwoDigitYear(e)}),V("Q",0,"Qo","quarter"),A("quarter","Q"),U("quarter",7),le("Q",$),he("Q",function(e,t){t[me]=3*(S(e)-1)}),V("D",["DD",2],"Do","date"),A("date","D"),U("date",9),le("D",X),le("DD",X,G),le("Do",function(e,t){return e?t._dayOfMonthOrdinalParse||t._ordinalParse:t._dayOfMonthOrdinalParseLenient}),he(["D","DD"],ge),he("Do",function(e,t){t[ge]=S(e.match(X)[0])});var ii=Ie("Date",!0);V("DDD",["DDDD",3],"DDDo","dayOfYear"),A("dayOfYear","DDD"),U("dayOfYear",4),le("DDD",Q),le("DDDD",Y),he(["DDD","DDDD"],function(e,t,i){i._dayOfYear=S(e)}),V("m",["mm",2],0,"minute"),A("minute","m"),U("minute",14),le("m",X),le("mm",X,G),he(["m","mm"],ye);var ni=Ie("Minutes",!1);V("s",["ss",2],0,"second"),A("second","s"),U("second",15),le("s",X),le("ss",X,G),he(["s","ss"],be);var oi,ai=Ie("Seconds",!1);for(V("S",0,0,function(){return~~(this.millisecond()/100)}),V(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),V(0,["SSS",3],0,"millisecond"),V(0,["SSSS",4],0,function(){return 10*this.millisecond()}),V(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),V(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),V(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),V(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),V(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),A("millisecond","ms"),U("millisecond",16),le("S",Q,$),le("SS",Q,G),le("SSS",Q,Y),oi="SSSS";oi.length<=9;oi+="S")le(oi,ie);function ri(e,t){t[xe]=S(1e3*("0."+e))}for(oi="S";oi.length<=9;oi+="S")he(oi,ri);var si=Ie("Milliseconds",!1);V("z",0,0,"zoneAbbr"),V("zz",0,0,"zoneName");var li=w.prototype;function di(e){return e}li.add=qt,li.calendar=function(e,t){var i=e||It(),n=Bt(i,this).startOf("day"),o=h.calendarFormat(this,n)||"sameElse",a=t&&(N(t[o])?t[o].call(this,i):t[o]);return this.format(a||this.localeData().calendar(o,this,It(i)))},li.clone=function(){return new w(this)},li.diff=function(e,t,i){var n,o,a;if(!this.isValid())return NaN;if(!(n=Bt(e,this)).isValid())return NaN;switch(o=6e4*(n.utcOffset()-this.utcOffset()),t=L(t)){case"year":a=Xt(this,n)/12;break;case"month":a=Xt(this,n);break;case"quarter":a=Xt(this,n)/3;break;case"second":a=(this-n)/1e3;break;case"minute":a=(this-n)/6e4;break;case"hour":a=(this-n)/36e5;break;case"day":a=(this-n-o)/864e5;break;case"week":a=(this-n-o)/6048e5;break;default:a=this-n}return i?a:C(a)},li.endOf=function(e){return void 0===(e=L(e))||"millisecond"===e?this:("date"===e&&(e="day"),this.startOf(e).add(1,"isoWeek"===e?"week":e).subtract(1,"ms"))},li.format=function(e){e||(e=this.isUtc()?h.defaultFormatUtc:h.defaultFormat);var t=j(this,e);return this.localeData().postformat(t)},li.from=function(e,t){return this.isValid()&&(_(e)&&e.isValid()||It(e).isValid())?jt({to:this,from:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()},li.fromNow=function(e){return this.from(It(),e)},li.to=function(e,t){return this.isValid()&&(_(e)&&e.isValid()||It(e).isValid())?jt({from:this,to:e}).locale(this.locale()).humanize(!t):this.localeData().invalidDate()},li.toNow=function(e){return this.to(It(),e)},li.get=function(e){return N(this[e=L(e)])?this[e]():this},li.invalidAt=function(){return v(this).overflow},li.isAfter=function(e,t){var i=_(e)?e:It(e);return!(!this.isValid()||!i.isValid())&&("millisecond"===(t=L(d(t)?"millisecond":t))?this.valueOf()>i.valueOf():i.valueOf()<this.clone().startOf(t).valueOf())},li.isBefore=function(e,t){var i=_(e)?e:It(e);return!(!this.isValid()||!i.isValid())&&("millisecond"===(t=L(d(t)?"millisecond":t))?this.valueOf()<i.valueOf():this.clone().endOf(t).valueOf()<i.valueOf())},li.isBetween=function(e,t,i,n){return("("===(n=n||"()")[0]?this.isAfter(e,i):!this.isBefore(e,i))&&(")"===n[1]?this.isBefore(t,i):!this.isAfter(t,i))},li.isSame=function(e,t){var i,n=_(e)?e:It(e);return!(!this.isValid()||!n.isValid())&&("millisecond"===(t=L(t||"millisecond"))?this.valueOf()===n.valueOf():(i=n.valueOf(),this.clone().startOf(t).valueOf()<=i&&i<=this.clone().endOf(t).valueOf()))},li.isSameOrAfter=function(e,t){return this.isSame(e,t)||this.isAfter(e,t)},li.isSameOrBefore=function(e,t){return this.isSame(e,t)||this.isBefore(e,t)},li.isValid=function(){return y(this)},li.lang=Jt,li.locale=Kt,li.localeData=Qt,li.max=Et,li.min=Nt,li.parsingFlags=function(){return m({},v(this))},li.set=function(e,t){if("object"==typeof e)for(var i=function(e){var t=[];for(var i in e)t.push({unit:i,priority:R[i]});return t.sort(function(e,t){return e.priority-t.priority}),t}(e=P(e)),n=0;n<i.length;n++)this[i[n].unit](e[i[n].unit]);else if(N(this[e=L(e)]))return this[e](t);return this},li.startOf=function(e){switch(e=L(e)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":case"date":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===e&&this.weekday(0),"isoWeek"===e&&this.isoWeekday(1),"quarter"===e&&this.month(3*Math.floor(this.month()/3)),this},li.subtract=Zt,li.toArray=function(){return[this.year(),this.month(),this.date(),this.hour(),this.minute(),this.second(),this.millisecond()]},li.toObject=function(){return{years:this.year(),months:this.month(),date:this.date(),hours:this.hours(),minutes:this.minutes(),seconds:this.seconds(),milliseconds:this.milliseconds()}},li.toDate=function(){return new Date(this.valueOf())},li.toISOString=function(e){if(!this.isValid())return null;var t=!0!==e,i=t?this.clone().utc():this;return i.year()<0||9999<i.year()?j(i,t?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):N(Date.prototype.toISOString)?t?this.toDate().toISOString():new Date(this.valueOf()+60*this.utcOffset()*1e3).toISOString().replace("Z",j(i,"Z")):j(i,t?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")},li.inspect=function(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var e="moment",t="";this.isLocal()||(e=0===this.utcOffset()?"moment.utc":"moment.parseZone",t="Z");var i="["+e+'("]',n=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",o=t+'[")]';return this.format(i+n+"-MM-DD[T]HH:mm:ss.SSS"+o)},li.toJSON=function(){return this.isValid()?this.toISOString():null},li.toString=function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},li.unix=function(){return Math.floor(this.valueOf()/1e3)},li.valueOf=function(){return this._d.valueOf()-6e4*(this._offset||0)},li.creationData=function(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}},li.year=ke,li.isLeapYear=function(){return Se(this.year())},li.weekYear=function(e){return ti.call(this,e,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)},li.isoWeekYear=function(e){return ti.call(this,e,this.isoWeek(),this.isoWeekday(),1,4)},li.quarter=li.quarters=function(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)},li.month=Re,li.daysInMonth=function(){return Me(this.year(),this.month())},li.week=li.weeks=function(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")},li.isoWeek=li.isoWeeks=function(e){var t=Ve(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")},li.weeksInYear=function(){var e=this.localeData()._week;return je(this.year(),e.dow,e.doy)},li.isoWeeksInYear=function(){return je(this.year(),1,4)},li.date=ii,li.day=li.days=function(e){if(!this.isValid())return null!=e?this:NaN;var t,i,n=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(t=e,i=this.localeData(),e="string"!=typeof t?t:isNaN(t)?"number"==typeof(t=i.weekdaysParse(t))?t:null:parseInt(t,10),this.add(e-n,"d")):n},li.weekday=function(e){if(!this.isValid())return null!=e?this:NaN;var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")},li.isoWeekday=function(e){if(!this.isValid())return null!=e?this:NaN;if(null==e)return this.day()||7;var t,i,n=(t=e,i=this.localeData(),"string"==typeof t?i.weekdaysParse(t)%7||7:isNaN(t)?null:t);return this.day(this.day()%7?n:n-7)},li.dayOfYear=function(e){var t=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")},li.hour=li.hours=tt,li.minute=li.minutes=ni,li.second=li.seconds=ai,li.millisecond=li.milliseconds=si,li.utcOffset=function(e,t,i){var n,o=this._offset||0;if(!this.isValid())return null!=e?this:NaN;if(null==e)return this._isUTC?o:zt(this);if("string"==typeof e){if(null===(e=Ot(ae,e)))return this}else Math.abs(e)<16&&!i&&(e*=60);return!this._isUTC&&t&&(n=zt(this)),this._offset=e,this._isUTC=!0,null!=n&&this.add(n,"m"),o!==e&&(!t||this._changeInProgress?Yt(this,jt(e-o,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,h.updateOffset(this,!0),this._changeInProgress=null)),this},li.utc=function(e){return this.utcOffset(0,e)},li.local=function(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(zt(this),"m")),this},li.parseZone=function(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"==typeof this._i){var e=Ot(oe,this._i);null!=e?this.utcOffset(e):this.utcOffset(0,!0)}return this},li.hasAlignedHourOffset=function(e){return!!this.isValid()&&(e=e?It(e).utcOffset():0,(this.utcOffset()-e)%60==0)},li.isDST=function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},li.isLocal=function(){return!!this.isValid()&&!this._isUTC},li.isUtcOffset=function(){return!!this.isValid()&&this._isUTC},li.isUtc=Ft,li.isUTC=Ft,li.zoneAbbr=function(){return this._isUTC?"UTC":""},li.zoneName=function(){return this._isUTC?"Coordinated Universal Time":""},li.dates=i("dates accessor is deprecated. Use date instead.",ii),li.months=i("months accessor is deprecated. Use month instead",Re),li.years=i("years accessor is deprecated. Use year instead",ke),li.zone=i("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",function(e,t){return null!=e?("string"!=typeof e&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}),li.isDSTShifted=i("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",function(){if(!d(this._isDSTShifted))return this._isDSTShifted;var e={};if(x(e,this),(e=Tt(e))._a){var t=e._isUTC?g(e._a):It(e._a);this._isDSTShifted=this.isValid()&&0<r(e._a,t.toArray())}else this._isDSTShifted=!1;return this._isDSTShifted});var ci=M.prototype;function ui(e,t,i,n){var o=dt(),a=g().set(n,t);return o[i](a,e)}function hi(e,t,i){if(c(e)&&(t=e,e=void 0),e=e||"",null!=t)return ui(e,t,i,"month");var n,o=[];for(n=0;n<12;n++)o[n]=ui(e,n,i,"month");return o}function fi(e,t,i,n){t=("boolean"==typeof e?c(t)&&(i=t,t=void 0):(t=e,e=!1,c(i=t)&&(i=t,t=void 0)),t||"");var o,a=dt(),r=e?a._week.dow:0;if(null!=i)return ui(t,(i+r)%7,n,"day");var s=[];for(o=0;o<7;o++)s[o]=ui(t,(o+r)%7,n,"day");return s}ci.calendar=function(e,t,i){var n=this._calendar[e]||this._calendar.sameElse;return N(n)?n.call(t,i):n},ci.longDateFormat=function(e){var t=this._longDateFormat[e],i=this._longDateFormat[e.toUpperCase()];return t||!i?t:(this._longDateFormat[e]=i.replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e])},ci.invalidDate=function(){return this._invalidDate},ci.ordinal=function(e){return this._ordinal.replace("%d",e)},ci.preparse=di,ci.postformat=di,ci.relativeTime=function(e,t,i,n){var o=this._relativeTime[i];return N(o)?o(e,t,i,n):o.replace(/%d/i,e)},ci.pastFuture=function(e,t){var i=this._relativeTime[0<e?"future":"past"];return N(i)?i(t):i.replace(/%s/i,t)},ci.set=function(e){var t,i;for(i in e)N(t=e[i])?this[i]=t:this["_"+i]=t;this._config=e,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)},ci.months=function(e,t){return e?s(this._months)?this._months[e.month()]:this._months[(this._months.isFormat||De).test(t)?"format":"standalone"][e.month()]:s(this._months)?this._months:this._months.standalone},ci.monthsShort=function(e,t){return e?s(this._monthsShort)?this._monthsShort[e.month()]:this._monthsShort[De.test(t)?"format":"standalone"][e.month()]:s(this._monthsShort)?this._monthsShort:this._monthsShort.standalone},ci.monthsParse=function(e,t,i){var n,o,a;if(this._monthsParseExact)return function(e,t,i){var n,o,a,r=e.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],n=0;n<12;++n)a=g([2e3,n]),this._shortMonthsParse[n]=this.monthsShort(a,"").toLocaleLowerCase(),this._longMonthsParse[n]=this.months(a,"").toLocaleLowerCase();return i?"MMM"===t?-1!==(o=Te.call(this._shortMonthsParse,r))?o:null:-1!==(o=Te.call(this._longMonthsParse,r))?o:null:"MMM"===t?-1!==(o=Te.call(this._shortMonthsParse,r))?o:-1!==(o=Te.call(this._longMonthsParse,r))?o:null:-1!==(o=Te.call(this._longMonthsParse,r))?o:-1!==(o=Te.call(this._shortMonthsParse,r))?o:null}.call(this,e,t,i);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),n=0;n<12;n++){if(o=g([2e3,n]),i&&!this._longMonthsParse[n]&&(this._longMonthsParse[n]=new RegExp("^"+this.months(o,"").replace(".","")+"$","i"),this._shortMonthsParse[n]=new RegExp("^"+this.monthsShort(o,"").replace(".","")+"$","i")),i||this._monthsParse[n]||(a="^"+this.months(o,"")+"|^"+this.monthsShort(o,""),this._monthsParse[n]=new RegExp(a.replace(".",""),"i")),i&&"MMMM"===t&&this._longMonthsParse[n].test(e))return n;if(i&&"MMM"===t&&this._shortMonthsParse[n].test(e))return n;if(!i&&this._monthsParse[n].test(e))return n}},ci.monthsRegex=function(e){return this._monthsParseExact?(p(this,"_monthsRegex")||Be.call(this),e?this._monthsStrictRegex:this._monthsRegex):(p(this,"_monthsRegex")||(this._monthsRegex=Oe),this._monthsStrictRegex&&e?this._monthsStrictRegex:this._monthsRegex)},ci.monthsShortRegex=function(e){return this._monthsParseExact?(p(this,"_monthsRegex")||Be.call(this),e?this._monthsShortStrictRegex:this._monthsShortRegex):(p(this,"_monthsShortRegex")||(this._monthsShortRegex=Ue),this._monthsShortStrictRegex&&e?this._monthsShortStrictRegex:this._monthsShortRegex)},ci.week=function(e){return Ve(e,this._week.dow,this._week.doy).week},ci.firstDayOfYear=function(){return this._week.doy},ci.firstDayOfWeek=function(){return this._week.dow},ci.weekdays=function(e,t){return e?s(this._weekdays)?this._weekdays[e.day()]:this._weekdays[this._weekdays.isFormat.test(t)?"format":"standalone"][e.day()]:s(this._weekdays)?this._weekdays:this._weekdays.standalone},ci.weekdaysMin=function(e){return e?this._weekdaysMin[e.day()]:this._weekdaysMin},ci.weekdaysShort=function(e){return e?this._weekdaysShort[e.day()]:this._weekdaysShort},ci.weekdaysParse=function(e,t,i){var n,o,a;if(this._weekdaysParseExact)return function(e,t,i){var n,o,a,r=e.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],n=0;n<7;++n)a=g([2e3,1]).day(n),this._minWeekdaysParse[n]=this.weekdaysMin(a,"").toLocaleLowerCase(),this._shortWeekdaysParse[n]=this.weekdaysShort(a,"").toLocaleLowerCase(),this._weekdaysParse[n]=this.weekdays(a,"").toLocaleLowerCase();return i?"dddd"===t?-1!==(o=Te.call(this._weekdaysParse,r))?o:null:"ddd"===t?-1!==(o=Te.call(this._shortWeekdaysParse,r))?o:null:-1!==(o=Te.call(this._minWeekdaysParse,r))?o:null:"dddd"===t?-1!==(o=Te.call(this._weekdaysParse,r))?o:-1!==(o=Te.call(this._shortWeekdaysParse,r))?o:-1!==(o=Te.call(this._minWeekdaysParse,r))?o:null:"ddd"===t?-1!==(o=Te.call(this._shortWeekdaysParse,r))?o:-1!==(o=Te.call(this._weekdaysParse,r))?o:-1!==(o=Te.call(this._minWeekdaysParse,r))?o:null:-1!==(o=Te.call(this._minWeekdaysParse,r))?o:-1!==(o=Te.call(this._weekdaysParse,r))?o:-1!==(o=Te.call(this._shortWeekdaysParse,r))?o:null}.call(this,e,t,i);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),n=0;n<7;n++){if(o=g([2e3,1]).day(n),i&&!this._fullWeekdaysParse[n]&&(this._fullWeekdaysParse[n]=new RegExp("^"+this.weekdays(o,"").replace(".","\\.?")+"$","i"),this._shortWeekdaysParse[n]=new RegExp("^"+this.weekdaysShort(o,"").replace(".","\\.?")+"$","i"),this._minWeekdaysParse[n]=new RegExp("^"+this.weekdaysMin(o,"").replace(".","\\.?")+"$","i")),this._weekdaysParse[n]||(a="^"+this.weekdays(o,"")+"|^"+this.weekdaysShort(o,"")+"|^"+this.weekdaysMin(o,""),this._weekdaysParse[n]=new RegExp(a.replace(".",""),"i")),i&&"dddd"===t&&this._fullWeekdaysParse[n].test(e))return n;if(i&&"ddd"===t&&this._shortWeekdaysParse[n].test(e))return n;if(i&&"dd"===t&&this._minWeekdaysParse[n].test(e))return n;if(!i&&this._weekdaysParse[n].test(e))return n}},ci.weekdaysRegex=function(e){return this._weekdaysParseExact?(p(this,"_weekdaysRegex")||Xe.call(this),e?this._weekdaysStrictRegex:this._weekdaysRegex):(p(this,"_weekdaysRegex")||(this._weekdaysRegex=Ye),this._weekdaysStrictRegex&&e?this._weekdaysStrictRegex:this._weekdaysRegex)},ci.weekdaysShortRegex=function(e){return this._weekdaysParseExact?(p(this,"_weekdaysRegex")||Xe.call(this),e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(p(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=qe),this._weekdaysShortStrictRegex&&e?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)},ci.weekdaysMinRegex=function(e){return this._weekdaysParseExact?(p(this,"_weekdaysRegex")||Xe.call(this),e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(p(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Ze),this._weekdaysMinStrictRegex&&e?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)},ci.isPM=function(e){return"p"===(e+"").toLowerCase().charAt(0)},ci.meridiem=function(e,t,i){return 11<e?i?"pm":"PM":i?"am":"AM"},st("en",{dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10;return e+(1===S(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")}}),h.lang=i("moment.lang is deprecated. Use moment.locale instead.",st),h.langData=i("moment.langData is deprecated. Use moment.localeData instead.",dt);var pi=Math.abs;function mi(e,t,i,n){var o=jt(t,i);return e._milliseconds+=n*o._milliseconds,e._days+=n*o._days,e._months+=n*o._months,e._bubble()}function gi(e){return e<0?Math.floor(e):Math.ceil(e)}function vi(e){return 4800*e/146097}function yi(e){return 146097*e/4800}function bi(e){return function(){return this.as(e)}}var xi=bi("ms"),wi=bi("s"),_i=bi("m"),Ci=bi("h"),Si=bi("d"),Ti=bi("w"),ki=bi("M"),Ii=bi("y");function Ni(e){return function(){return this.isValid()?this._data[e]:NaN}}var Ei=Ni("milliseconds"),Mi=Ni("seconds"),Di=Ni("minutes"),Ai=Ni("hours"),Li=Ni("days"),Pi=Ni("months"),Ri=Ni("years");var Ui=Math.round,Oi={ss:44,s:45,m:45,h:22,d:26,M:11};var Bi=Math.abs;function zi(e){return(0<e)-(e<0)||+e}function Fi(){if(!this.isValid())return this.localeData().invalidDate();var e,t,i=Bi(this._milliseconds)/1e3,n=Bi(this._days),o=Bi(this._months);t=C((e=C(i/60))/60),i%=60,e%=60;var a=C(o/12),r=o%=12,s=n,l=t,d=e,c=i?i.toFixed(3).replace(/\.?0+$/,""):"",u=this.asSeconds();if(!u)return"P0D";var h=u<0?"-":"",f=zi(this._months)!==zi(u)?"-":"",p=zi(this._days)!==zi(u)?"-":"",m=zi(this._milliseconds)!==zi(u)?"-":"";return h+"P"+(a?f+a+"Y":"")+(r?f+r+"M":"")+(s?p+s+"D":"")+(l||d||c?"T":"")+(l?m+l+"H":"")+(d?m+d+"M":"")+(c?m+c+"S":"")}var Hi=At.prototype;return Hi.isValid=function(){return this._isValid},Hi.abs=function(){var e=this._data;return this._milliseconds=pi(this._milliseconds),this._days=pi(this._days),this._months=pi(this._months),e.milliseconds=pi(e.milliseconds),e.seconds=pi(e.seconds),e.minutes=pi(e.minutes),e.hours=pi(e.hours),e.months=pi(e.months),e.years=pi(e.years),this},Hi.add=function(e,t){return mi(this,e,t,1)},Hi.subtract=function(e,t){return mi(this,e,t,-1)},Hi.as=function(e){if(!this.isValid())return NaN;var t,i,n=this._milliseconds;if("month"===(e=L(e))||"year"===e)return t=this._days+n/864e5,i=this._months+vi(t),"month"===e?i:i/12;switch(t=this._days+Math.round(yi(this._months)),e){case"week":return t/7+n/6048e5;case"day":return t+n/864e5;case"hour":return 24*t+n/36e5;case"minute":return 1440*t+n/6e4;case"second":return 86400*t+n/1e3;case"millisecond":return Math.floor(864e5*t)+n;default:throw new Error("Unknown unit "+e)}},Hi.asMilliseconds=xi,Hi.asSeconds=wi,Hi.asMinutes=_i,Hi.asHours=Ci,Hi.asDays=Si,Hi.asWeeks=Ti,Hi.asMonths=ki,Hi.asYears=Ii,Hi.valueOf=function(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*S(this._months/12):NaN},Hi._bubble=function(){var e,t,i,n,o,a=this._milliseconds,r=this._days,s=this._months,l=this._data;return 0<=a&&0<=r&&0<=s||a<=0&&r<=0&&s<=0||(a+=864e5*gi(yi(s)+r),s=r=0),l.milliseconds=a%1e3,e=C(a/1e3),l.seconds=e%60,t=C(e/60),l.minutes=t%60,i=C(t/60),l.hours=i%24,s+=o=C(vi(r+=C(i/24))),r-=gi(yi(o)),n=C(s/12),s%=12,l.days=r,l.months=s,l.years=n,this},Hi.clone=function(){return jt(this)},Hi.get=function(e){return e=L(e),this.isValid()?this[e+"s"]():NaN},Hi.milliseconds=Ei,Hi.seconds=Mi,Hi.minutes=Di,Hi.hours=Ai,Hi.days=Li,Hi.weeks=function(){return C(this.days()/7)},Hi.months=Pi,Hi.years=Ri,Hi.humanize=function(e){if(!this.isValid())return this.localeData().invalidDate();var t,i,n,o,a,r,s,l,d,c,u,h=this.localeData(),f=(i=!e,n=h,o=jt(t=this).abs(),a=Ui(o.as("s")),r=Ui(o.as("m")),s=Ui(o.as("h")),l=Ui(o.as("d")),d=Ui(o.as("M")),c=Ui(o.as("y")),(u=a<=Oi.ss&&["s",a]||a<Oi.s&&["ss",a]||r<=1&&["m"]||r<Oi.m&&["mm",r]||s<=1&&["h"]||s<Oi.h&&["hh",s]||l<=1&&["d"]||l<Oi.d&&["dd",l]||d<=1&&["M"]||d<Oi.M&&["MM",d]||c<=1&&["y"]||["yy",c])[2]=i,u[3]=0<+t,u[4]=n,function(e,t,i,n,o){return o.relativeTime(t||1,!!i,e,n)}.apply(null,u));return e&&(f=h.pastFuture(+this,f)),h.postformat(f)},Hi.toISOString=Fi,Hi.toString=Fi,Hi.toJSON=Fi,Hi.locale=Kt,Hi.localeData=Qt,Hi.toIsoString=i("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",Fi),Hi.lang=Jt,V("X",0,0,"unix"),V("x",0,0,"valueOf"),le("x",ne),le("X",/[+-]?\d+(\.\d{1,3})?/),he("X",function(e,t,i){i._d=new Date(1e3*parseFloat(e,10))}),he("x",function(e,t,i){i._d=new Date(S(e))}),h.version="2.22.2",e=It,h.fn=li,h.min=function(){return Mt("isBefore",[].slice.call(arguments,0))},h.max=function(){return Mt("isAfter",[].slice.call(arguments,0))},h.now=function(){return Date.now?Date.now():+new Date},h.utc=g,h.unix=function(e){return It(1e3*e)},h.months=function(e,t){return hi(e,t,"months")},h.isDate=u,h.locale=st,h.invalid=b,h.duration=jt,h.isMoment=_,h.weekdays=function(e,t,i){return fi(e,t,i,"weekdays")},h.parseZone=function(){return It.apply(null,arguments).parseZone()},h.localeData=dt,h.isDuration=Lt,h.monthsShort=function(e,t){return hi(e,t,"monthsShort")},h.weekdaysMin=function(e,t,i){return fi(e,t,i,"weekdaysMin")},h.defineLocale=lt,h.updateLocale=function(e,t){if(null!=t){var i,n,o=it;null!=(n=rt(e))&&(o=n._config),(i=new M(t=E(o,t))).parentLocale=nt[e],nt[e]=i,st(e)}else null!=nt[e]&&(null!=nt[e].parentLocale?nt[e]=nt[e].parentLocale:null!=nt[e]&&delete nt[e]);return nt[e]},h.locales=function(){return n(nt)},h.weekdaysShort=function(e,t,i){return fi(e,t,i,"weekdaysShort")},h.normalizeUnits=L,h.relativeTimeRounding=function(e){return void 0===e?Ui:"function"==typeof e&&(Ui=e,!0)},h.relativeTimeThreshold=function(e,t){return void 0!==Oi[e]&&(void 0===t?Oi[e]:(Oi[e]=t,"s"===e&&(Oi.ss=t-1),!0))},h.calendarFormat=function(e,t){var i=e.diff(t,"days",!0);return i<-6?"sameElse":i<-1?"lastWeek":i<0?"lastDay":i<1?"sameDay":i<2?"nextDay":i<7?"nextWeek":"sameElse"},h.prototype=li,h.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"YYYY-[W]WW",MONTH:"YYYY-MM"},h}),function(e,t){"object"==typeof exports&&"undefined"!=typeof module&&"function"==typeof require?t(require("../moment")):"function"==typeof define&&define.amd?define(["../moment"],t):t(e.moment)}(this,function(e){"use strict";return e.defineLocale("zh-cn",{months:"一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),weekdays:"星期日_星期一_星期二_星期三_星期四_星期五_星期六".split("_"),weekdaysShort:"周日_周一_周二_周三_周四_周五_周六".split("_"),weekdaysMin:"日_一_二_三_四_五_六".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYY年M月D日",LLL:"YYYY年M月D日Ah点mm分",LLLL:"YYYY年M月D日ddddAh点mm分",l:"YYYY/M/D",ll:"YYYY年M月D日",lll:"YYYY年M月D日 HH:mm",llll:"YYYY年M月D日dddd HH:mm"},meridiemParse:/凌晨|早上|上午|中午|下午|晚上/,meridiemHour:function(e,t){return 12===e&&(e=0),"凌晨"===t||"早上"===t||"上午"===t?e:"下午"===t||"晚上"===t?e+12:11<=e?e:e+12},meridiem:function(e,t,i){var n=100*e+t;return n<600?"凌晨":n<900?"早上":n<1130?"上午":n<1230?"中午":n<1800?"下午":"晚上"},calendar:{sameDay:"[今天]LT",nextDay:"[明天]LT",nextWeek:"[下]ddddLT",lastDay:"[昨天]LT",lastWeek:"[上]ddddLT",sameElse:"L"},dayOfMonthOrdinalParse:/\d{1,2}(日|月|周)/,ordinal:function(e,t){switch(t){case"d":case"D":case"DDD":return e+"日";case"M":return e+"月";case"w":case"W":return e+"周";default:return e}},relativeTime:{future:"%s内",past:"%s前",s:"几秒",ss:"%d 秒",m:"1 分钟",mm:"%d 分钟",h:"1 小时",hh:"%d 小时",d:"1 天",dd:"%d 天",M:"1 个月",MM:"%d 个月",y:"1 年",yy:"%d 年"},week:{dow:1,doy:4}})}),function(q){var I,J,K,L,M,N,v,s={},w={},x={},O={treeId:"",treeObj:null,view:{addDiyDom:null,autoCancelSelected:!0,dblClickExpand:!0,expandSpeed:"fast",fontCss:{},nameIsHTML:!1,selectedMulti:!0,showIcon:!0,showLine:!0,showTitle:!0,txtSelectedEnable:!1},data:{key:{children:"children",name:"name",title:"",url:"url",icon:"icon"},simpleData:{enable:!1,idKey:"id",pIdKey:"pId",rootPId:null},keep:{parent:!1,leaf:!1}},async:{enable:!1,contentType:"application/x-www-form-urlencoded",type:"post",dataType:"text",url:"",autoParam:[],otherParam:[],dataFilter:null},callback:{beforeAsync:null,beforeClick:null,beforeDblClick:null,beforeRightClick:null,beforeMouseDown:null,beforeMouseUp:null,beforeExpand:null,beforeCollapse:null,beforeRemove:null,onAsyncError:null,onAsyncSuccess:null,onNodeCreated:null,onClick:null,onDblClick:null,onRightClick:null,onMouseDown:null,onMouseUp:null,onExpand:null,onCollapse:null,onRemove:null}},y=[function(r){var e=r.treeObj,t=f.event;e.bind(t.NODECREATED,function(e,t,i){j.apply(r.callback.onNodeCreated,[e,t,i])}),e.bind(t.CLICK,function(e,t,i,n,o){j.apply(r.callback.onClick,[t,i,n,o])}),e.bind(t.EXPAND,function(e,t,i){j.apply(r.callback.onExpand,[e,t,i])}),e.bind(t.COLLAPSE,function(e,t,i){j.apply(r.callback.onCollapse,[e,t,i])}),e.bind(t.ASYNC_SUCCESS,function(e,t,i,n){j.apply(r.callback.onAsyncSuccess,[e,t,i,n])}),e.bind(t.ASYNC_ERROR,function(e,t,i,n,o,a){j.apply(r.callback.onAsyncError,[e,t,i,n,o,a])}),e.bind(t.REMOVE,function(e,t,i){j.apply(r.callback.onRemove,[e,t,i])}),e.bind(t.SELECTED,function(e,t,i){j.apply(r.callback.onSelected,[t,i])}),e.bind(t.UNSELECTED,function(e,t,i){j.apply(r.callback.onUnSelected,[t,i])})}],z=[function(e){var t=f.event;e.treeObj.unbind(t.NODECREATED).unbind(t.CLICK).unbind(t.EXPAND).unbind(t.COLLAPSE).unbind(t.ASYNC_SUCCESS).unbind(t.ASYNC_ERROR).unbind(t.REMOVE).unbind(t.SELECTED).unbind(t.UNSELECTED)}],A=[function(e){var t=h.getCache(e);t||(t={},h.setCache(e,t)),t.nodes=[],t.doms=[]}],B=[function(e,t,i,n,o,a){if(i){var r=h.getRoot(e),s=e.data.key.children;i.level=t,i.tId=e.treeId+"_"+ ++r.zId,i.parentTId=n?n.tId:null,i.open="string"==typeof i.open?j.eqs(i.open,"true"):!!i.open,i[s]&&0<i[s].length?(i.isParent=!0,i.zAsync=!0):(i.isParent="string"==typeof i.isParent?j.eqs(i.isParent,"true"):!!i.isParent,i.open=!(!i.isParent||e.async.enable)&&i.open,i.zAsync=!i.isParent),i.isFirstNode=o,i.isLastNode=a,i.getParentNode=function(){return h.getNodeCache(e,i.parentTId)},i.getPreNode=function(){return h.getPreNode(e,i)},i.getNextNode=function(){return h.getNextNode(e,i)},i.getIndex=function(){return h.getNodeIndex(e,i)},i.getPath=function(){return h.getNodePath(e,i)},i.isAjaxing=!1,h.fixPIdKeyValue(e,i)}}],u=[function(e){var t=e.target,i=h.getSetting(e.data.treeId),n="",o=null,a="",r="",s=null,l=null,d=null;if(j.eqs(e.type,"mousedown")?r="mousedown":j.eqs(e.type,"mouseup")?r="mouseup":j.eqs(e.type,"contextmenu")?r="contextmenu":j.eqs(e.type,"click")?j.eqs(t.tagName,"span")&&null!==t.getAttribute("treeNode"+f.id.SWITCH)?(n=j.getNodeMainDom(t).id,a="switchNode"):(d=j.getMDom(i,t,[{tagName:"a",attrName:"treeNode"+f.id.A}]))&&(n=j.getNodeMainDom(d).id,a="clickNode"):j.eqs(e.type,"dblclick")&&(r="dblclick",d=j.getMDom(i,t,[{tagName:"a",attrName:"treeNode"+f.id.A}]))&&(n=j.getNodeMainDom(d).id,a="switchNode"),0<r.length&&0==n.length&&(d=j.getMDom(i,t,[{tagName:"a",attrName:"treeNode"+f.id.A}]))&&(n=j.getNodeMainDom(d).id),0<n.length)switch(o=h.getNodeCache(i,n),a){case"switchNode":o.isParent&&(j.eqs(e.type,"click")||j.eqs(e.type,"dblclick")&&j.apply(i.view.dblClickExpand,[i.treeId,o],i.view.dblClickExpand))?s=I:a="";break;case"clickNode":s=J}switch(r){case"mousedown":l=K;break;case"mouseup":l=L;break;case"dblclick":l=M;break;case"contextmenu":l=N}return{stop:!1,node:o,nodeEventType:a,nodeEventCallback:s,treeEventType:r,treeEventCallback:l}}],C=[function(e){var t=h.getRoot(e);t||(t={},h.setRoot(e,t)),t[e.data.key.children]=[],t.expandTriggerFlag=!1,t.curSelectedList=[],t.noSelection=!0,t.createdNodes=[],t.zId=0,t._ver=(new Date).getTime()}],D=[],E=[],F=[],G=[],H=[],h={addNodeCache:function(e,t){h.getCache(e).nodes[h.getNodeCacheId(t.tId)]=t},getNodeCacheId:function(e){return e.substring(e.lastIndexOf("_")+1)},addAfterA:function(e){E.push(e)},addBeforeA:function(e){D.push(e)},addInnerAfterA:function(e){G.push(e)},addInnerBeforeA:function(e){F.push(e)},addInitBind:function(e){y.push(e)},addInitUnBind:function(e){z.push(e)},addInitCache:function(e){A.push(e)},addInitNode:function(e){B.push(e)},addInitProxy:function(e,t){t?u.splice(0,0,e):u.push(e)},addInitRoot:function(e){C.push(e)},addNodesData:function(e,t,n,o){var a=e.data.key.children;t[a]?n>=t[a].length&&(n=-1):(t[a]=[],n=-1),0<t[a].length&&0===n?(t[a][0].isFirstNode=!1,i.setNodeLineIcos(e,t[a][0])):0<t[a].length&&n<0&&(t[a][t[a].length-1].isLastNode=!1,i.setNodeLineIcos(e,t[a][t[a].length-1])),t.isParent=!0,n<0?t[a]=t[a].concat(o):(e=[n,0].concat(o),t[a].splice.apply(t[a],e))},addSelectedNode:function(e,t){var i=h.getRoot(e);h.isSelectedNode(e,t)||i.curSelectedList.push(t)},addCreatedNode:function(e,t){(e.callback.onNodeCreated||e.view.addDiyDom)&&h.getRoot(e).createdNodes.push(t)},addZTreeTools:function(e){H.push(e)},exSetting:function(e){q.extend(!0,O,e)},fixPIdKeyValue:function(e,t){e.data.simpleData.enable&&(t[e.data.simpleData.pIdKey]=t.parentTId?t.getParentNode()[e.data.simpleData.idKey]:e.data.simpleData.rootPId)},getAfterA:function(e,t,i){for(var n=0,o=E.length;n<o;n++)E[n].apply(this,arguments)},getBeforeA:function(e,t,i){for(var n=0,o=D.length;n<o;n++)D[n].apply(this,arguments)},getInnerAfterA:function(e,t,i){for(var n=0,o=G.length;n<o;n++)G[n].apply(this,arguments)},getInnerBeforeA:function(e,t,i){for(var n=0,o=F.length;n<o;n++)F[n].apply(this,arguments)},getCache:function(e){return x[e.treeId]},getNodeIndex:function(e,t){if(!t)return null;for(var i=e.data.key.children,n=t.parentTId?t.getParentNode():h.getRoot(e),o=0,a=n[i].length-1;o<=a;o++)if(n[i][o]===t)return o;return-1},getNextNode:function(e,t){if(!t)return null;for(var i=e.data.key.children,n=t.parentTId?t.getParentNode():h.getRoot(e),o=0,a=n[i].length-1;o<=a;o++)if(n[i][o]===t)return o==a?null:n[i][o+1];return null},getNodeByParam:function(e,t,i,n){if(!t||!i)return null;for(var o=e.data.key.children,a=0,r=t.length;a<r;a++){if(t[a][i]==n)return t[a];var s=h.getNodeByParam(e,t[a][o],i,n);if(s)return s}return null},getNodeCache:function(e,t){if(!t)return null;var i=x[e.treeId].nodes[h.getNodeCacheId(t)];return i||null},getNodeName:function(e,t){return""+t[e.data.key.name]},getNodePath:function(e,t){return t?((i=t.parentTId?t.getParentNode().getPath():[])&&i.push(t),i):null;var i},getNodeTitle:function(e,t){return""+t[""===e.data.key.title?e.data.key.name:e.data.key.title]},getNodes:function(e){return h.getRoot(e)[e.data.key.children]},getNodesByParam:function(e,t,i,n){if(!t||!i)return[];for(var o=e.data.key.children,a=[],r=0,s=t.length;r<s;r++)t[r][i]==n&&a.push(t[r]),a=a.concat(h.getNodesByParam(e,t[r][o],i,n));return a},getNodesByParamFuzzy:function(e,t,i,n){if(!t||!i)return[];for(var o=e.data.key.children,a=[],r=(n=n.toLowerCase(),0),s=t.length;r<s;r++)"string"==typeof t[r][i]&&-1<t[r][i].toLowerCase().indexOf(n)&&a.push(t[r]),a=a.concat(h.getNodesByParamFuzzy(e,t[r][o],i,n));return a},getNodesByFilter:function(e,t,i,n,o){if(!t)return n?null:[];for(var a=e.data.key.children,r=n?null:[],s=0,l=t.length;s<l;s++){if(j.apply(i,[t[s],o],!1)){if(n)return t[s];r.push(t[s])}var d=h.getNodesByFilter(e,t[s][a],i,n,o);if(n&&d)return d;r=n?d:r.concat(d)}return r},getPreNode:function(e,t){if(!t)return null;for(var i=e.data.key.children,n=t.parentTId?t.getParentNode():h.getRoot(e),o=0,a=n[i].length;o<a;o++)if(n[i][o]===t)return 0==o?null:n[i][o-1];return null},getRoot:function(e){return e?w[e.treeId]:null},getRoots:function(){return w},getSetting:function(e){return s[e]},getSettings:function(){return s},getZTreeTools:function(e){return(e=this.getRoot(this.getSetting(e)))?e.treeTools:null},initCache:function(e){for(var t=0,i=A.length;t<i;t++)A[t].apply(this,arguments)},initNode:function(e,t,i,n,o,a){for(var r=0,s=B.length;r<s;r++)B[r].apply(this,arguments)},initRoot:function(e){for(var t=0,i=C.length;t<i;t++)C[t].apply(this,arguments)},isSelectedNode:function(e,t){for(var i=h.getRoot(e),n=0,o=i.curSelectedList.length;n<o;n++)if(t===i.curSelectedList[n])return!0;return!1},removeNodeCache:function(e,t){var i=e.data.key.children;if(t[i])for(var n=0,o=t[i].length;n<o;n++)h.removeNodeCache(e,t[i][n]);h.getCache(e).nodes[h.getNodeCacheId(t.tId)]=null},removeSelectedNode:function(e,t){for(var i=h.getRoot(e),n=0,o=i.curSelectedList.length;n<o;n++)t!==i.curSelectedList[n]&&h.getNodeCache(e,i.curSelectedList[n].tId)||(i.curSelectedList.splice(n,1),e.treeObj.trigger(f.event.UNSELECTED,[e.treeId,t]),n--,o--)},setCache:function(e,t){x[e.treeId]=t},setRoot:function(e,t){w[e.treeId]=t},setZTreeTools:function(e,t){for(var i=0,n=H.length;i<n;i++)H[i].apply(this,arguments)},transformToArrayFormat:function(e,t){if(!t)return[];var i=e.data.key.children,n=[];if(j.isArray(t))for(var o=0,a=t.length;o<a;o++)n.push(t[o]),t[o][i]&&(n=n.concat(h.transformToArrayFormat(e,t[o][i])));else n.push(t),t[i]&&(n=n.concat(h.transformToArrayFormat(e,t[i])));return n},transformTozTreeFormat:function(e,t){var i,n,o=e.data.simpleData.idKey,a=e.data.simpleData.pIdKey,r=e.data.key.children;if(!o||""==o||!t)return[];if(j.isArray(t)){var s=[],l=[];for(i=0,n=t.length;i<n;i++)l[t[i][o]]=t[i];for(i=0,n=t.length;i<n;i++)l[t[i][a]]&&t[i][o]!=t[i][a]?(l[t[i][a]][r]||(l[t[i][a]][r]=[]),l[t[i][a]][r].push(t[i])):s.push(t[i]);return s}return[t]}},l={bindEvent:function(e){for(var t=0,i=y.length;t<i;t++)y[t].apply(this,arguments)},unbindEvent:function(e){for(var t=0,i=z.length;t<i;t++)z[t].apply(this,arguments)},bindTree:function(e){var t={treeId:e.treeId},i=e.treeObj;e.view.txtSelectedEnable||i.bind("selectstart",v).css({"-moz-user-select":"-moz-none"}),i.bind("click",t,l.proxy),i.bind("dblclick",t,l.proxy),i.bind("mouseover",t,l.proxy),i.bind("mouseout",t,l.proxy),i.bind("mousedown",t,l.proxy),i.bind("mouseup",t,l.proxy),i.bind("contextmenu",t,l.proxy)},unbindTree:function(e){e.treeObj.unbind("selectstart",v).unbind("click",l.proxy).unbind("dblclick",l.proxy).unbind("mouseover",l.proxy).unbind("mouseout",l.proxy).unbind("mousedown",l.proxy).unbind("mouseup",l.proxy).unbind("contextmenu",l.proxy)},doProxy:function(e){for(var t=[],i=0,n=u.length;i<n;i++){var o=u[i].apply(this,arguments);if(t.push(o),o.stop)break}return t},proxy:function(e){var t=h.getSetting(e.data.treeId);if(!j.uCanDo(t,e))return!0;for(var i=!0,n=0,o=(t=l.doProxy(e)).length;n<o;n++){var a=t[n];a.nodeEventCallback&&(i=a.nodeEventCallback.apply(a,[e,a.node])&&i),a.treeEventCallback&&(i=a.treeEventCallback.apply(a,[e,a.node])&&i)}return i}};I=function(e,t){var n=h.getSetting(e.data.treeId);if(t.open){if(0==j.apply(n.callback.beforeCollapse,[n.treeId,t],!0))return!0}else if(0==j.apply(n.callback.beforeExpand,[n.treeId,t],!0))return!0;return h.getRoot(n).expandTriggerFlag=!0,i.switchNode(n,t),!0},J=function(e,t){var n=h.getSetting(e.data.treeId),o=n.view.autoCancelSelected&&(e.ctrlKey||e.metaKey)&&h.isSelectedNode(n,t)?0:n.view.autoCancelSelected&&(e.ctrlKey||e.metaKey)&&n.view.selectedMulti?2:1;return 0==j.apply(n.callback.beforeClick,[n.treeId,t,o],!0)||(0===o?i.cancelPreSelectedNode(n,t):i.selectNode(n,t,2===o),n.treeObj.trigger(f.event.CLICK,[e,n.treeId,t,o])),!0},K=function(e,t){var i=h.getSetting(e.data.treeId);return j.apply(i.callback.beforeMouseDown,[i.treeId,t],!0)&&j.apply(i.callback.onMouseDown,[e,i.treeId,t]),!0},L=function(e,t){var i=h.getSetting(e.data.treeId);return j.apply(i.callback.beforeMouseUp,[i.treeId,t],!0)&&j.apply(i.callback.onMouseUp,[e,i.treeId,t]),!0},M=function(e,t){var i=h.getSetting(e.data.treeId);return j.apply(i.callback.beforeDblClick,[i.treeId,t],!0)&&j.apply(i.callback.onDblClick,[e,i.treeId,t]),!0},N=function(e,t){var i=h.getSetting(e.data.treeId);return j.apply(i.callback.beforeRightClick,[i.treeId,t],!0)&&j.apply(i.callback.onRightClick,[e,i.treeId,t]),"function"!=typeof i.callback.onRightClick},v=function(e){return"input"===(e=e.originalEvent.srcElement.nodeName.toLowerCase())||"textarea"===e};var j={apply:function(e,t,i){return"function"==typeof e?e.apply(P,t||[]):i},canAsync:function(e,t){var i=e.data.key.children;return e.async.enable&&t&&t.isParent&&!(t.zAsync||t[i]&&0<t[i].length)},clone:function(e){if(null===e)return null;var t,i=j.isArray(e)?[]:{};for(t in e)i[t]=e[t]instanceof Date?new Date(e[t].getTime()):"object"==typeof e[t]?j.clone(e[t]):e[t];return i},eqs:function(e,t){return e.toLowerCase()===t.toLowerCase()},isArray:function(e){return"[object Array]"===Object.prototype.toString.apply(e)},$:function(e,t,i){return t&&"string"!=typeof t&&(i=t,t=""),"string"==typeof e?q(e,i?i.treeObj.get(0).ownerDocument:null):q("#"+e.tId+t,i?i.treeObj:null)},getMDom:function(e,t,i){if(!t)return null;for(;t&&t.id!==e.treeId;){for(var n=0,o=i.length;t.tagName&&n<o;n++)if(j.eqs(t.tagName,i[n].tagName)&&null!==t.getAttribute(i[n].attrName))return t;t=t.parentNode}return null},getNodeMainDom:function(e){return q(e).parent("li").get(0)||q(e).parentsUntil("li").parent().get(0)},isChildOrSelf:function(e,t){return 0<q(e).closest("#"+t).length},uCanDo:function(){return!0}},i={addNodes:function(e,t,n,o,a){if(!e.data.keep.leaf||!t||t.isParent)if(j.isArray(o)||(o=[o]),e.data.simpleData.enable&&(o=h.transformTozTreeFormat(e,o)),t){var r=k(t,f.id.SWITCH,e),s=k(t,f.id.ICON,e),l=k(t,f.id.UL,e);t.open||(i.replaceSwitchClass(t,r,f.folder.CLOSE),i.replaceIcoClass(t,s,f.folder.CLOSE),t.open=!1,l.css({display:"none"})),h.addNodesData(e,t,n,o),i.createNodes(e,t.level+1,o,t,n),a||i.expandCollapseParentNode(e,t,!0)}else h.addNodesData(e,h.getRoot(e),n,o),i.createNodes(e,0,o,null,n)},appendNodes:function(e,t,n,o,a,r,s){if(!n)return[];var l,d,c=[],u=e.data.key.children,f=(o||h.getRoot(e))[u];(!f||a>=f.length)&&(a=-1);for(var p=0,m=n.length;p<m;p++){var g=n[p];r&&(l=(0===a||f.length==n.length)&&0==p,d=a<0&&p==n.length-1,h.initNode(e,t,g,o,l,d,s),h.addNodeCache(e,g)),l=[],g[u]&&0<g[u].length&&(l=i.appendNodes(e,t+1,g[u],g,-1,r,s&&g.open)),s&&(i.makeDOMNodeMainBefore(c,e,g),i.makeDOMNodeLine(c,e,g),h.getBeforeA(e,g,c),i.makeDOMNodeNameBefore(c,e,g),h.getInnerBeforeA(e,g,c),i.makeDOMNodeIcon(c,e,g),h.getInnerAfterA(e,g,c),i.makeDOMNodeNameAfter(c,e,g),h.getAfterA(e,g,c),g.isParent&&g.open&&i.makeUlHtml(e,g,c,l.join("")),i.makeDOMNodeMainAfter(c,e,g),h.addCreatedNode(e,g))}return c},appendParentULDom:function(e,t){var n=[],o=k(t,e);!o.get(0)&&t.parentTId&&(i.appendParentULDom(e,t.getParentNode()),o=k(t,e));var a=k(t,f.id.UL,e);a.get(0)&&a.remove(),a=i.appendNodes(e,t.level+1,t[e.data.key.children],t,-1,!1,!0),i.makeUlHtml(e,t,n,a.join("")),o.append(n.join(""))},asyncNode:function(b,a,c,d){var e,g;if(a&&!a.isParent)return j.apply(d),!1;if(a&&a.isAjaxing)return!1;if(0==j.apply(b.callback.beforeAsync,[b.treeId,a],!0))return j.apply(d),!1;a&&(a.isAjaxing=!0,k(a,f.id.ICON,b).attr({style:"",class:f.className.BUTTON+" "+f.className.ICO_LOADING}));var m={};for(e=0,g=b.async.autoParam.length;a&&e<g;e++){var o=b.async.autoParam[e].split("="),n=o;1<o.length&&(n=o[1],o=o[0]),m[n]=a[o]}if(j.isArray(b.async.otherParam))for(e=0,g=b.async.otherParam.length;e<g;e+=2)m[b.async.otherParam[e]]=b.async.otherParam[e+1];else for(var l in b.async.otherParam)m[l]=b.async.otherParam[l];var r=h.getRoot(b)._ver;return q.ajax({contentType:b.async.contentType,cache:!1,type:b.async.type,url:j.apply(b.async.url,[b.treeId,a],b.async.url),data:m,dataType:b.async.dataType,success:function(e){if(r==h.getRoot(b)._ver){var g=[];try{g=e&&0!=e.length?"string"==typeof e?eval("("+e+")"):e:[]}catch(t){g=e}a&&(a.isAjaxing=null,a.zAsync=!0),i.setNodeLineIcos(b,a),g&&""!==g?(g=j.apply(b.async.dataFilter,[b.treeId,a,g],g),i.addNodes(b,a,-1,g?j.clone(g):[],!!c)):i.addNodes(b,a,-1,[],!!c),b.treeObj.trigger(f.event.ASYNC_SUCCESS,[b.treeId,a,e]),j.apply(d)}},error:function(e,t,n){r==h.getRoot(b)._ver&&(a&&(a.isAjaxing=null),i.setNodeLineIcos(b,a),b.treeObj.trigger(f.event.ASYNC_ERROR,[b.treeId,a,e,t,n]))}}),!0},cancelPreSelectedNode:function(e,t,i){var n,o,a=h.getRoot(e).curSelectedList;for(n=a.length-1;0<=n;n--)if(t===(o=a[n])||!t&&(!i||i!==o)){if(k(o,f.id.A,e).removeClass(f.node.CURSELECTED),t){h.removeSelectedNode(e,t);break}a.splice(n,1),e.treeObj.trigger(f.event.UNSELECTED,[e.treeId,o])}},createNodeCallback:function(e){if(e.callback.onNodeCreated||e.view.addDiyDom)for(var t=h.getRoot(e);0<t.createdNodes.length;){var i=t.createdNodes.shift();j.apply(e.view.addDiyDom,[e.treeId,i]),e.callback.onNodeCreated&&e.treeObj.trigger(f.event.NODECREATED,[e.treeId,i])}},createNodes:function(e,t,n,o,a){if(n&&0!=n.length){var r=h.getRoot(e),s=e.data.key.children;s=!o||o.open||!!k(o[s][0],e).get(0);r.createdNodes=[];var l,d;t=i.appendNodes(e,t,n,o,a,!0,s);o?(o=k(o,f.id.UL,e)).get(0)&&(l=o):l=e.treeObj,l&&(0<=a&&(d=l.children()[a]),0<=a&&d?q(d).before(t.join("")):l.append(t.join(""))),i.createNodeCallback(e)}},destroy:function(e){e&&(h.initCache(e),h.initRoot(e),l.unbindTree(e),l.unbindEvent(e),e.treeObj.empty(),delete s[e.treeId])},expandCollapseNode:function(e,t,n,o,a){var r,s=h.getRoot(e),l=e.data.key.children;if(t)if(s.expandTriggerFlag&&(r=a,a=function(){r&&r(),t.open?e.treeObj.trigger(f.event.EXPAND,[e.treeId,t]):e.treeObj.trigger(f.event.COLLAPSE,[e.treeId,t])},s.expandTriggerFlag=!1),!t.open&&t.isParent&&(!k(t,f.id.UL,e).get(0)||t[l]&&0<t[l].length&&!k(t[l][0],e).get(0))&&(i.appendParentULDom(e,t),i.createNodeCallback(e)),t.open==n)j.apply(a,[]);else{n=k(t,f.id.UL,e),s=k(t,f.id.SWITCH,e);var d=k(t,f.id.ICON,e);t.isParent?(t.open=!t.open,t.iconOpen&&t.iconClose&&d.attr("style",i.makeNodeIcoStyle(e,t)),t.open?(i.replaceSwitchClass(t,s,f.folder.OPEN),i.replaceIcoClass(t,d,f.folder.OPEN),0==o||""==e.view.expandSpeed?(n.show(),j.apply(a,[])):t[l]&&0<t[l].length?n.slideDown(e.view.expandSpeed,a):(n.show(),j.apply(a,[]))):(i.replaceSwitchClass(t,s,f.folder.CLOSE),i.replaceIcoClass(t,d,f.folder.CLOSE),0!=o&&""!=e.view.expandSpeed&&t[l]&&0<t[l].length?n.slideUp(e.view.expandSpeed,a):(n.hide(),j.apply(a,[])))):j.apply(a,[])}else j.apply(a,[])},expandCollapseParentNode:function(e,t,n,o,a){t&&(t.parentTId?(i.expandCollapseNode(e,t,n,o),t.parentTId&&i.expandCollapseParentNode(e,t.getParentNode(),n,o,a)):i.expandCollapseNode(e,t,n,o,a))},expandCollapseSonNode:function(e,t,n,o,a){var r=h.getRoot(e),s=e.data.key.children,l=(r=t?t[s]:r[s],s=!t&&o,h.getRoot(e).expandTriggerFlag);if(h.getRoot(e).expandTriggerFlag=!1,r)for(var d=0,c=r.length;d<c;d++)r[d]&&i.expandCollapseSonNode(e,r[d],n,s);h.getRoot(e).expandTriggerFlag=l,i.expandCollapseNode(e,t,n,o,a)},isSelectedNode:function(e,t){if(!t)return!1;var i,n=h.getRoot(e).curSelectedList;for(i=n.length-1;0<=i;i--)if(t===n[i])return!0;return!1},makeDOMNodeIcon:function(e,t,n){var o=h.getNodeName(t,n);o=t.view.nameIsHTML?o:o.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");e.push("<span id='",n.tId,f.id.ICON,"' title='' treeNode",f.id.ICON," class='",i.makeNodeIcoClass(t,n),"' style='",i.makeNodeIcoStyle(t,n),"'></span><span id='",n.tId,f.id.SPAN,"' class='",f.className.NAME,"'>",o,"</span>")},makeDOMNodeLine:function(e,t,n){e.push("<span id='",n.tId,f.id.SWITCH,"' title='' class='",i.makeNodeLineClass(t,n),"' treeNode",f.id.SWITCH,"></span>")},makeDOMNodeMainAfter:function(e){e.push("</li>")},makeDOMNodeMainBefore:function(e,t,i){e.push("<li id='",i.tId,"' class='",f.className.LEVEL,i.level,"' tabindex='0' hidefocus='true' treenode>")},makeDOMNodeNameAfter:function(e){e.push("</a>")},makeDOMNodeNameBefore:function(e,t,n){var o,a=h.getNodeTitle(t,n),r=i.makeNodeUrl(t,n),s=i.makeNodeFontCss(t,n),l=[];for(o in s)l.push(o,":",s[o],";");e.push("<a id='",n.tId,f.id.A,"' class='",f.className.LEVEL,n.level,"' treeNode",f.id.A,' onclick="',n.click||"",'" ',null!=r&&0<r.length?"href='"+r+"'":""," target='",i.makeNodeTarget(n),"' style='",l.join(""),"'"),j.apply(t.view.showTitle,[t.treeId,n],t.view.showTitle)&&a&&e.push("title='",a.replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),"'"),e.push(">")},makeNodeFontCss:function(e,t){var i=j.apply(e.view.fontCss,[e.treeId,t],e.view.fontCss);return i&&"function"!=typeof i?i:{}},makeNodeIcoClass:function(e,t){var i=["ico"];return t.isAjaxing||(i[0]=(t.iconSkin?t.iconSkin+"_":"")+i[0],t.isParent?i.push(t.open?f.folder.OPEN:f.folder.CLOSE):i.push(f.folder.DOCU)),f.className.BUTTON+" "+i.join("_")},makeNodeIcoStyle:function(e,t){var i=[];if(!t.isAjaxing){var n=t.isParent&&t.iconOpen&&t.iconClose?t.open?t.iconOpen:t.iconClose:t[e.data.key.icon];n&&i.push("background:url(",n,") 0 0 no-repeat;"),(0==e.view.showIcon||!j.apply(e.view.showIcon,[e.treeId,t],!0))&&i.push("width:0px;height:0px;")}return i.join("")},makeNodeLineClass:function(e,t){var n=[];return e.view.showLine?0==t.level&&t.isFirstNode&&t.isLastNode?n.push(f.line.ROOT):0==t.level&&t.isFirstNode?n.push(f.line.ROOTS):t.isLastNode?n.push(f.line.BOTTOM):n.push(f.line.CENTER):n.push(f.line.NOLINE),t.isParent?n.push(t.open?f.folder.OPEN:f.folder.CLOSE):n.push(f.folder.DOCU),i.makeNodeLineClassEx(t)+n.join("_")},makeNodeLineClassEx:function(e){return f.className.BUTTON+" "+f.className.LEVEL+e.level+" "+f.className.SWITCH+" "},makeNodeTarget:function(e){return e.target||"_blank"},makeNodeUrl:function(e,t){var i=e.data.key.url;return t[i]?t[i]:null},makeUlHtml:function(e,t,n,o){n.push("<ul id='",t.tId,f.id.UL,"' class='",f.className.LEVEL,t.level," ",i.makeUlLineClass(e,t),"' style='display:",t.open?"block":"none","'>"),n.push(o),n.push("</ul>")},makeUlLineClass:function(e,t){return e.view.showLine&&!t.isLastNode?f.line.LINE:""},removeChildNodes:function(e,t){if(t){var n=e.data.key.children,o=t[n];if(o){for(var a=0,r=o.length;a<r;a++)h.removeNodeCache(e,o[a]);h.removeSelectedNode(e),delete t[n],e.data.keep.parent?k(t,f.id.UL,e).empty():(t.isParent=!1,t.open=!1,n=k(t,f.id.SWITCH,e),o=k(t,f.id.ICON,e),i.replaceSwitchClass(t,n,f.folder.DOCU),i.replaceIcoClass(t,o,f.folder.DOCU),k(t,f.id.UL,e).remove())}}},scrollIntoView:function(e){if(e)if(e.scrollIntoViewIfNeeded)e.scrollIntoViewIfNeeded();else if(e.scrollIntoView)e.scrollIntoView(!1);else try{e.focus().blur()}catch(e){}},setFirstNode:function(e,t){var i=e.data.key.children;0<t[i].length&&(t[i][0].isFirstNode=!0)},setLastNode:function(e,t){var i=e.data.key.children,n=t[i].length;0<n&&(t[i][n-1].isLastNode=!0)},removeNode:function(e,t){var n=h.getRoot(e),o=e.data.key.children,a=t.parentTId?t.getParentNode():n;if(t.isFirstNode=!1,t.isLastNode=!1,t.getPreNode=function(){return null},t.getNextNode=function(){return null},h.getNodeCache(e,t.tId)){k(t,e).remove(),h.removeNodeCache(e,t),h.removeSelectedNode(e,t);for(var r=0,s=a[o].length;r<s;r++)if(a[o][r].tId==t.tId){a[o].splice(r,1);break}i.setFirstNode(e,a),i.setLastNode(e,a);var l;r=a[o].length;if(e.data.keep.parent||0!=r){if(e.view.showLine&&0<r){var d=a[o][r-1];r=k(d,f.id.UL,e),s=k(d,f.id.SWITCH,e);l=k(d,f.id.ICON,e),a==n?1==a[o].length?i.replaceSwitchClass(d,s,f.line.ROOT):(n=k(a[o][0],f.id.SWITCH,e),i.replaceSwitchClass(a[o][0],n,f.line.ROOTS),i.replaceSwitchClass(d,s,f.line.BOTTOM)):i.replaceSwitchClass(d,s,f.line.BOTTOM),r.removeClass(f.line.LINE)}}else a.isParent=!1,a.open=!1,r=k(a,f.id.UL,e),s=k(a,f.id.SWITCH,e),l=k(a,f.id.ICON,e),i.replaceSwitchClass(a,s,f.folder.DOCU),i.replaceIcoClass(a,l,f.folder.DOCU),r.css("display","none")}},replaceIcoClass:function(e,t,i){if(t&&!e.isAjaxing&&null!=(e=t.attr("class"))){switch(e=e.split("_"),i){case f.folder.OPEN:case f.folder.CLOSE:case f.folder.DOCU:e[e.length-1]=i}t.attr("class",e.join("_"))}},replaceSwitchClass:function(e,t,n){if(t){var o=t.attr("class");if(null!=o){switch(o=o.split("_"),n){case f.line.ROOT:case f.line.ROOTS:case f.line.CENTER:case f.line.BOTTOM:case f.line.NOLINE:o[0]=i.makeNodeLineClassEx(e)+n;break;case f.folder.OPEN:case f.folder.CLOSE:case f.folder.DOCU:o[1]=n}t.attr("class",o.join("_")),n!==f.folder.DOCU?t.removeAttr("disabled"):t.attr("disabled","disabled")}}},selectNode:function(e,t,n){n||i.cancelPreSelectedNode(e,null,t),k(t,f.id.A,e).addClass(f.node.CURSELECTED),h.addSelectedNode(e,t),e.treeObj.trigger(f.event.SELECTED,[e.treeId,t])},setNodeFontCss:function(e,t){var n=k(t,f.id.A,e),o=i.makeNodeFontCss(e,t);o&&n.css(o)},setNodeLineIcos:function(e,t){if(t){var n=k(t,f.id.SWITCH,e),o=k(t,f.id.UL,e),a=k(t,f.id.ICON,e),r=i.makeUlLineClass(e,t);0==r.length?o.removeClass(f.line.LINE):o.addClass(r),n.attr("class",i.makeNodeLineClass(e,t)),t.isParent?n.removeAttr("disabled"):n.attr("disabled","disabled"),a.removeAttr("style"),a.attr("style",i.makeNodeIcoStyle(e,t)),a.attr("class",i.makeNodeIcoClass(e,t))}},setNodeName:function(e,t){var i=h.getNodeTitle(e,t),n=k(t,f.id.SPAN,e);n.empty(),e.view.nameIsHTML?n.html(h.getNodeName(e,t)):n.text(h.getNodeName(e,t)),j.apply(e.view.showTitle,[e.treeId,t],e.view.showTitle)&&k(t,f.id.A,e).attr("title",i||"")},setNodeTarget:function(e,t){k(t,f.id.A,e).attr("target",i.makeNodeTarget(t))},setNodeUrl:function(e,t){var n=k(t,f.id.A,e),o=i.makeNodeUrl(e,t);null==o||0==o.length?n.removeAttr("href"):n.attr("href",o)},switchNode:function(e,t){t.open||!j.canAsync(e,t)?i.expandCollapseNode(e,t,!t.open):e.async.enable?i.asyncNode(e,t)||i.expandCollapseNode(e,t,!t.open):t&&i.expandCollapseNode(e,t,!t.open)}};q.fn.zTree={consts:{className:{BUTTON:"button",LEVEL:"level",ICO_LOADING:"ico_loading",SWITCH:"switch",NAME:"node_name"},event:{NODECREATED:"ztree_nodeCreated",CLICK:"ztree_click",EXPAND:"ztree_expand",COLLAPSE:"ztree_collapse",ASYNC_SUCCESS:"ztree_async_success",ASYNC_ERROR:"ztree_async_error",REMOVE:"ztree_remove",SELECTED:"ztree_selected",UNSELECTED:"ztree_unselected"},id:{A:"_a",ICON:"_ico",SPAN:"_span",SWITCH:"_switch",UL:"_ul"},line:{ROOT:"root",ROOTS:"roots",CENTER:"center",BOTTOM:"bottom",NOLINE:"noline",LINE:"line"},folder:{OPEN:"open",CLOSE:"close",DOCU:"docu"},node:{CURSELECTED:"curSelectedNode"}},_z:{tools:j,view:i,event:l,data:h},getZTreeObj:function(e){return(e=h.getZTreeTools(e))?e:null},destroy:function(e){if(e&&0<e.length)i.destroy(h.getSetting(e));else for(var t in s)i.destroy(s[t])},init:function(e,t,n){var d=j.clone(O);return q.extend(!0,d,t),d.treeId=e.attr("id"),d.treeObj=e,d.treeObj.empty(),s[d.treeId]=d,void 0===document.body.style.maxHeight&&(d.view.expandSpeed=""),h.initRoot(d),e=h.getRoot(d),t=d.data.key.children,n=n?j.clone(j.isArray(n)?n:[n]):[],e[t]=d.data.simpleData.enable?h.transformTozTreeFormat(d,n):n,h.initCache(d),l.unbindTree(d),l.bindTree(d),l.unbindEvent(d),l.bindEvent(d),n={setting:d,addNodes:function(e,t,n,o){function a(){i.addNodes(d,e,t,s,1==o)}if(e||(e=null),e&&!e.isParent&&d.data.keep.leaf)return null;var r=parseInt(t,10);if(t=isNaN(r)?(o=!!n,n=t,-1):r,!n)return null;var s=j.clone(j.isArray(n)?n:[n]);return j.canAsync(d,e)?i.asyncNode(d,e,o,a):a(),s},cancelSelectedNode:function(e){i.cancelPreSelectedNode(d,e)},destroy:function(){i.destroy(d)},expandAll:function(e){return e=!!e,i.expandCollapseSonNode(d,null,e,!0),e},expandNode:function(t,e,n,o,a){function r(){var e=k(t,d).get(0);e&&!1!==o&&i.scrollIntoView(e)}return t&&t.isParent?(!0!==e&&!1!==e&&(e=!t.open),(a=!!a)&&e&&0==j.apply(d.callback.beforeExpand,[d.treeId,t],!0)?null:a&&!e&&0==j.apply(d.callback.beforeCollapse,[d.treeId,t],!0)?null:(e&&t.parentTId&&i.expandCollapseParentNode(d,t.getParentNode(),e,!1),e!==t.open||n?(h.getRoot(d).expandTriggerFlag=a,!j.canAsync(d,t)&&n?i.expandCollapseSonNode(d,t,e,!0,r):(t.open=!e,i.switchNode(this.setting,t),r()),e):null)):null},getNodes:function(){return h.getNodes(d)},getNodeByParam:function(e,t,i){return e?h.getNodeByParam(d,i?i[d.data.key.children]:h.getNodes(d),e,t):null},getNodeByTId:function(e){return h.getNodeCache(d,e)},getNodesByParam:function(e,t,i){return e?h.getNodesByParam(d,i?i[d.data.key.children]:h.getNodes(d),e,t):null},getNodesByParamFuzzy:function(e,t,i){return e?h.getNodesByParamFuzzy(d,i?i[d.data.key.children]:h.getNodes(d),e,t):null},getNodesByFilter:function(e,t,i,n){return t=!!t,e&&"function"==typeof e?h.getNodesByFilter(d,i?i[d.data.key.children]:h.getNodes(d),e,t,n):t?null:[]},getNodeIndex:function(e){if(!e)return null;for(var t=d.data.key.children,i=e.parentTId?e.getParentNode():h.getRoot(d),n=0,o=i[t].length;n<o;n++)if(i[t][n]==e)return n;return-1},getSelectedNodes:function(){for(var e=[],t=h.getRoot(d).curSelectedList,i=0,n=t.length;i<n;i++)e.push(t[i]);return e},isSelectedNode:function(e){return h.isSelectedNode(d,e)},reAsyncChildNodes:function(e,t,n){if(this.setting.async.enable){var o=!e;if(o&&(e=h.getRoot(d)),"refresh"==t){for(var a=0,r=e[t=this.setting.data.key.children]?e[t].length:0;a<r;a++)h.removeNodeCache(d,e[t][a]);h.removeSelectedNode(d),e[t]=[],o?this.setting.treeObj.empty():k(e,f.id.UL,d).empty()}i.asyncNode(this.setting,o?null:e,!!n)}},refresh:function(){this.setting.treeObj.empty();var e=h.getRoot(d),t=e[d.data.key.children];h.initRoot(d),e[d.data.key.children]=t,h.initCache(d),i.createNodes(d,0,e[d.data.key.children],null,-1)},removeChildNodes:function(e){if(!e)return null;var t=e[d.data.key.children];return i.removeChildNodes(d,e),t||null},removeNode:function(e,t){e&&((t=!!t)&&0==j.apply(d.callback.beforeRemove,[d.treeId,e],!0)||(i.removeNode(d,e),t&&this.setting.treeObj.trigger(f.event.REMOVE,[d.treeId,e])))},selectNode:function(t,e,n){if(t&&j.uCanDo(d)){if(e=d.view.selectedMulti&&e,t.parentTId)i.expandCollapseParentNode(d,t.getParentNode(),!0,!1,function(){if(!n){var e=k(t,d).get(0);i.scrollIntoView(e)}});else try{k(t,d).focus().blur()}catch(e){}i.selectNode(d,t,e)}},transformTozTreeNodes:function(e){return h.transformTozTreeFormat(d,e)},transformToArray:function(e){return h.transformToArrayFormat(d,e)},updateNode:function(e){e&&k(e,d).get(0)&&j.uCanDo(d)&&(i.setNodeName(d,e),i.setNodeTarget(d,e),i.setNodeUrl(d,e),i.setNodeLineIcos(d,e),i.setNodeFontCss(d,e))}},e.treeTools=n,h.setZTreeTools(d,n),e[t]&&0<e[t].length?i.createNodes(d,0,e[t],null,-1):d.async.enable&&d.async.url&&""!==d.async.url&&i.asyncNode(d),n}};var P=q.fn.zTree,k=j.$,f=P.consts}(jQuery),function(e){var s,l,d,t={event:{CHECK:"ztree_check"},id:{CHECK:"_check"},checkbox:{STYLE:"checkbox",DEFAULT:"chk",DISABLED:"disable",FALSE:"false",TRUE:"true",FULL:"full",PART:"part",FOCUS:"focus"},radio:{STYLE:"radio",TYPE_ALL:"all",TYPE_LEVEL:"level"}},i={check:{enable:!1,autoCheckTrigger:!1,chkStyle:t.checkbox.STYLE,nocheckInherit:!1,chkDisabledInherit:!1,radioType:t.radio.TYPE_LEVEL,chkboxType:{Y:"ps",N:"ps"}},data:{key:{checked:"checked"}},callback:{beforeCheck:null,onCheck:null}};s=function(e,t){if(!0===t.chkDisabled)return!1;var i=f.getSetting(e.data.treeId),n=i.data.key.checked;return 0==c.apply(i.callback.beforeCheck,[i.treeId,t],!0)||(t[n]=!t[n],h.checkNodeRelation(i,t),n=p(t,u.id.CHECK,i),h.setChkClass(i,n,t),h.repairParentChkClassWithSelf(i,t),i.treeObj.trigger(u.event.CHECK,[e,i.treeId,t])),!0},l=function(e,t){if(!0===t.chkDisabled)return!1;var i=f.getSetting(e.data.treeId),n=p(t,u.id.CHECK,i);return t.check_Focus=!0,h.setChkClass(i,n,t),!0},d=function(e,t){if(!0===t.chkDisabled)return!1;var i=f.getSetting(e.data.treeId),n=p(t,u.id.CHECK,i);return t.check_Focus=!1,h.setChkClass(i,n,t),!0},e.extend(!0,e.fn.zTree.consts,t),e.extend(!0,e.fn.zTree._z,{tools:{},view:{checkNodeRelation:function(e,t){var i,n,o,a=e.data.key.children,r=e.data.key.checked;if(i=u.radio,e.check.chkStyle==i.STYLE){var s=f.getRadioCheckedList(e);if(t[r])if(e.check.radioType==i.TYPE_ALL){for(n=s.length-1;0<=n;n--)(i=s[n])[r]&&i!=t&&(i[r]=!1,s.splice(n,1),h.setChkClass(e,p(i,u.id.CHECK,e),i),i.parentTId!=t.parentTId&&h.repairParentChkClassWithSelf(e,i));s.push(t)}else for(n=0,o=(s=t.parentTId?t.getParentNode():f.getRoot(e))[a].length;n<o;n++)(i=s[a][n])[r]&&i!=t&&(i[r]=!1,h.setChkClass(e,p(i,u.id.CHECK,e),i));else if(e.check.radioType==i.TYPE_ALL)for(n=0,o=s.length;n<o;n++)if(t==s[n]){s.splice(n,1);break}}else t[r]&&(!t[a]||0==t[a].length||-1<e.check.chkboxType.Y.indexOf("s"))&&h.setSonNodeCheckBox(e,t,!0),!t[r]&&(!t[a]||0==t[a].length||-1<e.check.chkboxType.N.indexOf("s"))&&h.setSonNodeCheckBox(e,t,!1),t[r]&&-1<e.check.chkboxType.Y.indexOf("p")&&h.setParentNodeCheckBox(e,t,!0),!t[r]&&-1<e.check.chkboxType.N.indexOf("p")&&h.setParentNodeCheckBox(e,t,!1)},makeChkClass:function(e,t){var i=e.data.key.checked,n=u.checkbox,o=u.radio,a=!0===t.chkDisabled?n.DISABLED:t.halfCheck?n.PART:e.check.chkStyle==o.STYLE?t.check_Child_State<1?n.FULL:n.PART:t[i]?2===t.check_Child_State||-1===t.check_Child_State?n.FULL:n.PART:t.check_Child_State<1?n.FULL:n.PART;i=e.check.chkStyle+"_"+(t[i]?n.TRUE:n.FALSE)+"_"+a,i=t.check_Focus&&!0!==t.chkDisabled?i+"_"+n.FOCUS:i;return u.className.BUTTON+" "+n.DEFAULT+" "+i},repairAllChk:function(e,t){if(e.check.enable&&e.check.chkStyle===u.checkbox.STYLE)for(var i=e.data.key.checked,n=e.data.key.children,o=f.getRoot(e),a=0,r=o[n].length;a<r;a++){var s=o[n][a];!0!==s.nocheck&&!0!==s.chkDisabled&&(s[i]=t),h.setSonNodeCheckBox(e,s,t)}},repairChkClass:function(e,t){if(t&&(f.makeChkFlag(e,t),!0!==t.nocheck)){var i=p(t,u.id.CHECK,e);h.setChkClass(e,i,t)}},repairParentChkClass:function(e,t){if(t&&t.parentTId){var i=t.getParentNode();h.repairChkClass(e,i),h.repairParentChkClass(e,i)}},repairParentChkClassWithSelf:function(e,t){if(t){var i=e.data.key.children;t[i]&&0<t[i].length?h.repairParentChkClass(e,t[i][0]):h.repairParentChkClass(e,t)}},repairSonChkDisabled:function(e,t,i,n){if(t){var o=e.data.key.children;if(t.chkDisabled!=i&&(t.chkDisabled=i),h.repairChkClass(e,t),t[o]&&n)for(var a=0,r=t[o].length;a<r;a++)h.repairSonChkDisabled(e,t[o][a],i,n)}},repairParentChkDisabled:function(e,t,i,n){t&&(t.chkDisabled!=i&&n&&(t.chkDisabled=i),h.repairChkClass(e,t),h.repairParentChkDisabled(e,t.getParentNode(),i,n))},setChkClass:function(e,t,i){t&&(!0===i.nocheck?t.hide():t.show(),t.attr("class",h.makeChkClass(e,i)))},setParentNodeCheckBox:function(e,t,i,n){var o=e.data.key.children,a=e.data.key.checked,r=p(t,u.id.CHECK,e);if(n||(n=t),f.makeChkFlag(e,t),!0!==t.nocheck&&!0!==t.chkDisabled&&(t[a]=i,h.setChkClass(e,r,t),e.check.autoCheckTrigger&&t!=n&&e.treeObj.trigger(u.event.CHECK,[null,e.treeId,t])),t.parentTId){if(r=!0,!i)for(var s=0,l=(o=t.getParentNode()[o]).length;s<l;s++)if(!0!==o[s].nocheck&&!0!==o[s].chkDisabled&&o[s][a]||(!0===o[s].nocheck||!0===o[s].chkDisabled)&&0<o[s].check_Child_State){r=!1;break}r&&h.setParentNodeCheckBox(e,t.getParentNode(),i,n)}},setSonNodeCheckBox:function(e,t,i,n){if(t){var o=e.data.key.children,a=e.data.key.checked,r=p(t,u.id.CHECK,e);n||(n=t);var s=!1;if(t[o])for(var l=0,d=t[o].length;l<d;l++){var c=t[o][l];h.setSonNodeCheckBox(e,c,i,n),!0===c.chkDisabled&&(s=!0)}t!=f.getRoot(e)&&!0!==t.chkDisabled&&(s&&!0!==t.nocheck&&f.makeChkFlag(e,t),!0!==t.nocheck&&!0!==t.chkDisabled?(t[a]=i,s||(t.check_Child_State=t[o]&&0<t[o].length?i?2:0:-1)):t.check_Child_State=-1,h.setChkClass(e,r,t),e.check.autoCheckTrigger&&t!=n&&!0!==t.nocheck&&!0!==t.chkDisabled&&e.treeObj.trigger(u.event.CHECK,[null,e.treeId,t]))}}},event:{},data:{getRadioCheckedList:function(e){for(var t=f.getRoot(e).radioCheckedList,i=0,n=t.length;i<n;i++)f.getNodeCache(e,t[i].tId)||(t.splice(i,1),i--,n--);return t},getCheckStatus:function(e,t){if(!e.check.enable||t.nocheck||t.chkDisabled)return null;var i=e.data.key.checked;return{checked:t[i],half:t.halfCheck?t.halfCheck:e.check.chkStyle==u.radio.STYLE?2===t.check_Child_State:t[i]?-1<t.check_Child_State&&t.check_Child_State<2:0<t.check_Child_State}},getTreeCheckedNodes:function(e,t,i,n){if(!t)return[];for(var o=e.data.key.children,a=e.data.key.checked,r=i&&e.check.chkStyle==u.radio.STYLE&&e.check.radioType==u.radio.TYPE_ALL,s=(n=n||[],0),l=t.length;s<l&&(!0===t[s].nocheck||!0===t[s].chkDisabled||t[s][a]!=i||(n.push(t[s]),!r))&&(f.getTreeCheckedNodes(e,t[s][o],i,n),!(r&&0<n.length));s++);return n},getTreeChangeCheckedNodes:function(e,t,i){if(!t)return[];for(var n=e.data.key.children,o=e.data.key.checked,a=(i=i||[],0),r=t.length;a<r;a++)!0!==t[a].nocheck&&!0!==t[a].chkDisabled&&t[a][o]!=t[a].checkedOld&&i.push(t[a]),f.getTreeChangeCheckedNodes(e,t[a][n],i);return i},makeChkFlag:function(e,t){if(t){var i=e.data.key.children,n=e.data.key.checked,o=-1;if(t[i])for(var a=0,r=t[i].length;a<r;a++){var s=t[i][a],l=-1;if(e.check.chkStyle==u.radio.STYLE){if(2==(l=!0===s.nocheck||!0===s.chkDisabled?s.check_Child_State:!0===s.halfCheck?2:s[n]?2:0<s.check_Child_State?2:0)){o=2;break}0==l&&(o=0)}else if(e.check.chkStyle==u.checkbox.STYLE){if(1===(l=!0===s.nocheck||!0===s.chkDisabled?s.check_Child_State:!0===s.halfCheck?1:s[n]?-1===s.check_Child_State||2===s.check_Child_State?2:1:0<s.check_Child_State?1:0)){o=1;break}if(2===l&&-1<o&&0<a&&l!==o){o=1;break}if(2===o&&-1<l&&l<2){o=1;break}-1<l&&(o=l)}}t.check_Child_State=o}}}});var c=(e=e.fn.zTree)._z.tools,u=e.consts,h=e._z.view,f=e._z.data,p=c.$;f.exSetting(i),f.addInitBind(function(o){o.treeObj.bind(u.event.CHECK,function(e,t,i,n){e.srcEvent=t,c.apply(o.callback.onCheck,[e,i,n])})}),f.addInitUnBind(function(e){e.treeObj.unbind(u.event.CHECK)}),f.addInitCache(function(){}),f.addInitNode(function(e,t,i,n){i&&(t=e.data.key.checked,"string"==typeof i[t]&&(i[t]=c.eqs(i[t],"true")),i[t]=!!i[t],i.checkedOld=i[t],"string"==typeof i.nocheck&&(i.nocheck=c.eqs(i.nocheck,"true")),i.nocheck=!!i.nocheck||e.check.nocheckInherit&&n&&!!n.nocheck,"string"==typeof i.chkDisabled&&(i.chkDisabled=c.eqs(i.chkDisabled,"true")),i.chkDisabled=!!i.chkDisabled||e.check.chkDisabledInherit&&n&&!!n.chkDisabled,"string"==typeof i.halfCheck&&(i.halfCheck=c.eqs(i.halfCheck,"true")),i.halfCheck=!!i.halfCheck,i.check_Child_State=-1,i.check_Focus=!1,i.getCheckStatus=function(){return f.getCheckStatus(e,i)},e.check.chkStyle==u.radio.STYLE&&e.check.radioType==u.radio.TYPE_ALL&&i[t]&&f.getRoot(e).radioCheckedList.push(i))}),f.addInitProxy(function(e){var t=e.target,i=f.getSetting(e.data.treeId),n="",o=null,a="",r=null;if(c.eqs(e.type,"mouseover")?i.check.enable&&c.eqs(t.tagName,"span")&&null!==t.getAttribute("treeNode"+u.id.CHECK)&&(n=c.getNodeMainDom(t).id,a="mouseoverCheck"):c.eqs(e.type,"mouseout")?i.check.enable&&c.eqs(t.tagName,"span")&&null!==t.getAttribute("treeNode"+u.id.CHECK)&&(n=c.getNodeMainDom(t).id,a="mouseoutCheck"):c.eqs(e.type,"click")&&i.check.enable&&c.eqs(t.tagName,"span")&&null!==t.getAttribute("treeNode"+u.id.CHECK)&&(n=c.getNodeMainDom(t).id,a="checkNode"),0<n.length)switch(o=f.getNodeCache(i,n),a){case"checkNode":r=s;break;case"mouseoverCheck":r=l;break;case"mouseoutCheck":r=d}return{stop:"checkNode"===a,node:o,nodeEventType:a,nodeEventCallback:r,treeEventType:"",treeEventCallback:null}},!0),f.addInitRoot(function(e){f.getRoot(e).radioCheckedList=[]}),f.addBeforeA(function(e,t,i){e.check.enable&&(f.makeChkFlag(e,t),i.push("<span ID='",t.tId,u.id.CHECK,"' class='",h.makeChkClass(e,t),"' treeNode",u.id.CHECK,!0===t.nocheck?" style='display:none;'":"","></span>"))}),f.addZTreeTools(function(e,n){n.checkNode=function(e,t,i,n){var o=this.setting.data.key.checked;!0===e.chkDisabled||(!0!==t&&!1!==t&&(t=!e[o]),n=!!n,e[o]===t&&!i||n&&0==c.apply(this.setting.callback.beforeCheck,[this.setting.treeId,e],!0)||!c.uCanDo(this.setting)||!this.setting.check.enable||!0===e.nocheck)||(e[o]=t,t=p(e,u.id.CHECK,this.setting),(i||this.setting.check.chkStyle===u.radio.STYLE)&&h.checkNodeRelation(this.setting,e),h.setChkClass(this.setting,t,e),h.repairParentChkClassWithSelf(this.setting,e),n&&this.setting.treeObj.trigger(u.event.CHECK,[null,this.setting.treeId,e]))},n.checkAllNodes=function(e){h.repairAllChk(this.setting,!!e)},n.getCheckedNodes=function(e){var t=this.setting.data.key.children;return f.getTreeCheckedNodes(this.setting,f.getRoot(this.setting)[t],!1!==e)},n.getChangeCheckedNodes=function(){var e=this.setting.data.key.children;return f.getTreeChangeCheckedNodes(this.setting,f.getRoot(this.setting)[e])},n.setChkDisabled=function(e,t,i,n){t=!!t,i=!!i,h.repairSonChkDisabled(this.setting,e,t,!!n),h.repairParentChkDisabled(this.setting,e.getParentNode(),t,i)};var o=n.updateNode;n.updateNode=function(e,t){if(o&&o.apply(n,arguments),e&&this.setting.check.enable&&p(e,this.setting).get(0)&&c.uCanDo(this.setting)){var i=p(e,u.id.CHECK,this.setting);(1==t||this.setting.check.chkStyle===u.radio.STYLE)&&h.checkNodeRelation(this.setting,e),h.setChkClass(this.setting,i,e),h.repairParentChkClassWithSelf(this.setting,e)}}});var a=h.createNodes;h.createNodes=function(e,t,i,n,o){a&&a.apply(h,arguments),i&&h.repairParentChkClassWithSelf(e,n)};var n=h.removeNode;h.removeNode=function(e,t){var i=t.getParentNode();n&&n.apply(h,arguments),t&&i&&(h.repairChkClass(e,i),h.repairParentChkClass(e,i))};var m=h.appendNodes;h.appendNodes=function(e,t,i,n,o,a,r){var s="";return m&&(s=m.apply(h,arguments)),n&&f.makeChkFlag(e,n),s}}(jQuery),function(z){var F={event:{DRAG:"ztree_drag",DROP:"ztree_drop",RENAME:"ztree_rename",DRAGMOVE:"ztree_dragmove"},id:{EDIT:"_edit",INPUT:"_input",REMOVE:"_remove"},move:{TYPE_INNER:"inner",TYPE_PREV:"prev",TYPE_NEXT:"next"},node:{CURSELECTED_EDIT:"curSelectedNode_Edit",TMPTARGET_TREE:"tmpTargetzTree",TMPTARGET_NODE:"tmpTargetNode"}},d={onHoverOverNode:function(e,t){var i=W.getSetting(e.data.treeId),n=W.getRoot(i);n.curHoverNode!=t&&d.onHoverOutNode(e),n.curHoverNode=t,j.addHoverDom(i,t)},onHoverOutNode:function(e){e=W.getSetting(e.data.treeId);var t=W.getRoot(e);t.curHoverNode&&!W.isSelectedNode(e,t.curHoverNode)&&(j.removeTreeDom(e,t.curHoverNode),t.curHoverNode=null)},onMousedownNode:function(e,t){function s(e){if(0==x.dragFlag&&Math.abs(U-e.clientX)<b.edit.drag.minMoveSize&&Math.abs(O-e.clientY)<b.edit.drag.minMoveSize)return!0;var t,i,n,o,a;if(a=b.data.key.children,E.css("cursor","pointer"),0==x.dragFlag){if(0==H.apply(b.callback.beforeDrag,[b.treeId,_],!0))return y(e),!0;for(t=0,i=_.length;t<i;t++)0==t&&(x.dragNodeShowBefore=[]),(n=_[t]).isParent&&n.open?(j.expandCollapseNode(b,n,!n.open),x.dragNodeShowBefore[n.tId]=!0):x.dragNodeShowBefore[n.tId]=!1;if(x.dragFlag=1,w.showHoverDom=!1,H.showIfameMask(b,!0),n=!0,o=-1,1<_.length){var r=_[0].parentTId?_[0].getParentNode()[a]:W.getNodes(b);for(a=[],t=0,i=r.length;t<i;t++)if(void 0!==x.dragNodeShowBefore[r[t].tId]&&(n&&-1<o&&o+1!==t&&(n=!1),a.push(r[t]),o=t),_.length===a.length){_=a;break}}for(n&&(k=_[0].getPreNode(),I=_[_.length-1].getNextNode()),C=$("<ul class='zTreeDragUL'></ul>",b),t=0,i=_.length;t<i;t++)(n=_[t]).editNameFlag=!1,j.selectNode(b,n,0<t),j.removeTreeDom(b,n),t>b.edit.drag.maxShowNodeNum-1||((o=$("<li id='"+n.tId+"_tmp'></li>",b)).append($(n,V.id.A,b).clone()),o.css("padding","0"),o.children("#"+n.tId+V.id.A).removeClass(V.node.CURSELECTED),C.append(o),t==b.edit.drag.maxShowNodeNum-1&&(o=$("<li id='"+n.tId+"_moretmp'><a>  ...  </a></li>",b),C.append(o)));C.attr("id",_[0].tId+V.id.UL+"_tmp"),C.addClass(b.treeObj.attr("class")),C.appendTo(E),(S=$("<span class='tmpzTreeMove_arrow'></span>",b)).attr("id","zTreeMove_arrow_tmp"),S.appendTo(E),b.treeObj.trigger(V.event.DRAG,[e,b.treeId,_])}if(1==x.dragFlag){for(var s in T&&S.attr("id")==e.target.id&&P&&e.clientX+N.scrollLeft()+2>z("#"+P+V.id.A,T).offset().left?(n=z("#"+P+V.id.A,T),e.target=0<n.length?n.get(0):e.target):T&&(T.removeClass(V.node.TMPTARGET_TREE),P&&z("#"+P+V.id.A,T).removeClass(V.node.TMPTARGET_NODE+"_"+V.move.TYPE_PREV).removeClass(V.node.TMPTARGET_NODE+"_"+F.move.TYPE_NEXT).removeClass(V.node.TMPTARGET_NODE+"_"+F.move.TYPE_INNER)),P=T=null,M=!1,D=b,n=W.getSettings())n[s].treeId&&n[s].edit.enable&&n[s].treeId!=b.treeId&&(e.target.id==n[s].treeId||0<z(e.target).parents("#"+n[s].treeId).length)&&(M=!0,D=n[s]);s=N.scrollTop(),o=N.scrollLeft(),a=D.treeObj.offset(),t=D.treeObj.get(0).scrollHeight,n=D.treeObj.get(0).scrollWidth,i=e.clientY+s-a.top;var l=D.treeObj.height()+a.top-e.clientY-s,d=e.clientX+o-a.left,c=D.treeObj.width()+a.left-e.clientX-o;a=i<b.edit.drag.borderMax&&i>b.edit.drag.borderMin;r=l<b.edit.drag.borderMax&&l>b.edit.drag.borderMin;var u=d<b.edit.drag.borderMax&&d>b.edit.drag.borderMin,h=c<b.edit.drag.borderMax&&c>b.edit.drag.borderMin,f=(l=i>b.edit.drag.borderMin&&l>b.edit.drag.borderMin&&d>b.edit.drag.borderMin&&c>b.edit.drag.borderMin,d=a&&D.treeObj.scrollTop()<=0,c=r&&D.treeObj.scrollTop()+D.treeObj.height()+10>=t,u&&D.treeObj.scrollLeft()<=0),p=h&&D.treeObj.scrollLeft()+D.treeObj.width()+10>=n;if(e.target&&H.isChildOrSelf(e.target,D.treeId)){for(var m=e.target;m&&m.tagName&&!H.eqs(m.tagName,"li")&&m.id!=D.treeId;)m=m.parentNode;var g=!0;for(t=0,i=_.length;t<i;t++){if(n=_[t],m.id===n.tId){g=!1;break}if(0<$(n,b).find("#"+m.id).length){g=!1;break}}g&&e.target&&H.isChildOrSelf(e.target,m.id+V.id.A)&&(T=z(m),P=m.id)}if(n=_[0],l&&H.isChildOrSelf(e.target,D.treeId)&&(!T&&(e.target.id==D.treeId||d||c||f||p)&&(M||!M&&n.parentTId)&&(T=D.treeObj),a?D.treeObj.scrollTop(D.treeObj.scrollTop()-10):r&&D.treeObj.scrollTop(D.treeObj.scrollTop()+10),u?D.treeObj.scrollLeft(D.treeObj.scrollLeft()-10):h&&D.treeObj.scrollLeft(D.treeObj.scrollLeft()+10),T&&T!=D.treeObj&&T.offset().left<D.treeObj.offset().left&&D.treeObj.scrollLeft(D.treeObj.scrollLeft()+T.offset().left-D.treeObj.offset().left)),C.css({top:e.clientY+s+3+"px",left:e.clientX+o+3+"px"}),i=t=0,T&&T.attr("id")!=D.treeId){var v=null==P?null:W.getNodeCache(D,P);a=(e.ctrlKey||e.metaKey)&&b.edit.drag.isMove&&b.edit.drag.isCopy||!b.edit.drag.isMove&&b.edit.drag.isCopy,o=!(!k||P!==k.tId),u=!(!I||P!==I.tId),r=n.parentTId&&n.parentTId==P,n=(a||!u)&&H.apply(D.edit.drag.prev,[D.treeId,_,v],!!D.edit.drag.prev),o=(a||!o)&&H.apply(D.edit.drag.next,[D.treeId,_,v],!!D.edit.drag.next),a=(a||!r)&&!(D.data.keep.leaf&&!v.isParent)&&H.apply(D.edit.drag.inner,[D.treeId,_,v],!!D.edit.drag.inner),r=function(){T=null,P="",R=V.move.TYPE_INNER,S.css({display:"none"}),window.zTreeMoveTimer&&(clearTimeout(window.zTreeMoveTimer),window.zTreeMoveTargetNodeTId=null)},n||o||a?(u=z("#"+P+V.id.A,T),h=v.isLastNode?null:z("#"+v.getNextNode().tId+V.id.A,T.next()),l=u.offset().top,d=u.offset().left,c=n?a?.25:o?.5:1:-1,f=o?a?.75:n?.5:0:-1,s=(e.clientY+s-l)/u.height(),(1==c||s<=c&&-.2<=s)&&n?(t=1-S.width(),i=l-S.height()/2,R=V.move.TYPE_PREV):(0==f||f<=s&&s<=1.2)&&o?(t=1-S.width(),i=null==h||v.isParent&&v.open?l+u.height()-S.height()/2:h.offset().top-S.height()/2,R=V.move.TYPE_NEXT):a?(t=5-S.width(),i=l,R=V.move.TYPE_INNER):r(),T&&(S.css({display:"block",top:i+"px",left:d+t+"px"}),u.addClass(V.node.TMPTARGET_NODE+"_"+R),A==P&&L==R||(B=(new Date).getTime()),v&&v.isParent&&R==V.move.TYPE_INNER&&(s=!0,window.zTreeMoveTimer&&window.zTreeMoveTargetNodeTId!==v.tId?(clearTimeout(window.zTreeMoveTimer),window.zTreeMoveTargetNodeTId=null):window.zTreeMoveTimer&&window.zTreeMoveTargetNodeTId===v.tId&&(s=!1),s)&&(window.zTreeMoveTimer=setTimeout(function(){R==V.move.TYPE_INNER&&v&&v.isParent&&!v.open&&(new Date).getTime()-B>D.edit.drag.autoOpenTime&&H.apply(D.callback.beforeDragOpen,[D.treeId,v],!0)&&(j.switchNode(D,v),D.edit.drag.autoExpandTrigger&&D.treeObj.trigger(V.event.EXPAND,[D.treeId,v]))},D.edit.drag.autoOpenTime+50),window.zTreeMoveTargetNodeTId=v.tId))):r()}else R=V.move.TYPE_INNER,T&&H.apply(D.edit.drag.inner,[D.treeId,_,null],!!D.edit.drag.inner)?T.addClass(V.node.TMPTARGET_TREE):T=null,S.css({display:"none"}),window.zTreeMoveTimer&&(clearTimeout(window.zTreeMoveTimer),window.zTreeMoveTargetNodeTId=null);A=P,L=R,b.treeObj.trigger(V.event.DRAGMOVE,[e,b.treeId,_])}return!1}function y(i){if(window.zTreeMoveTimer&&(clearTimeout(window.zTreeMoveTimer),window.zTreeMoveTargetNodeTId=null),L=A=null,N.unbind("mousemove",s),N.unbind("mouseup",y),N.unbind("selectstart",l),E.css("cursor","auto"),T&&(T.removeClass(V.node.TMPTARGET_TREE),P&&z("#"+P+V.id.A,T).removeClass(V.node.TMPTARGET_NODE+"_"+V.move.TYPE_PREV).removeClass(V.node.TMPTARGET_NODE+"_"+F.move.TYPE_NEXT).removeClass(V.node.TMPTARGET_NODE+"_"+F.move.TYPE_INNER)),H.showIfameMask(b,!1),w.showHoverDom=!0,0!=x.dragFlag){var e,t,n;for(e=x.dragFlag=0,t=_.length;e<t;e++)(n=_[e]).isParent&&x.dragNodeShowBefore[n.tId]&&!n.open&&(j.expandCollapseNode(b,n,!n.open),delete x.dragNodeShowBefore[n.tId]);C&&C.remove(),S&&S.remove();var o=(i.ctrlKey||i.metaKey)&&b.edit.drag.isMove&&b.edit.drag.isCopy||!b.edit.drag.isMove&&b.edit.drag.isCopy;if(!o&&T&&P&&_[0].parentTId&&P==_[0].parentTId&&R==V.move.TYPE_INNER&&(T=null),T){var a=null==P?null:W.getNodeCache(D,P);if(0==H.apply(b.callback.beforeDrop,[D.treeId,_,a,R,o],!0))j.selectNodes(d,_);else{var r=o?H.clone(_):_;e=function(){if(M){if(!o)for(var e=0,t=_.length;e<t;e++)j.removeNode(b,_[e]);R==V.move.TYPE_INNER?j.addNodes(D,a,-1,r):j.addNodes(D,a.getParentNode(),R==V.move.TYPE_PREV?a.getIndex():a.getIndex()+1,r)}else if(o&&R==V.move.TYPE_INNER)j.addNodes(D,a,-1,r);else if(o)j.addNodes(D,a.getParentNode(),R==V.move.TYPE_PREV?a.getIndex():a.getIndex()+1,r);else if(R!=V.move.TYPE_NEXT)for(e=0,t=r.length;e<t;e++)j.moveNode(D,a,r[e],R,!1);else for(e=-1,t=r.length-1;e<t;t--)j.moveNode(D,a,r[t],R,!1);j.selectNodes(D,r),e=$(r[0],b).get(0),j.scrollIntoView(e),b.treeObj.trigger(V.event.DROP,[i,D.treeId,r,a,R,o])},R==V.move.TYPE_INNER&&H.canAsync(D,a)?j.asyncNode(D,a,!1,e):e()}}else j.selectNodes(d,_),b.treeObj.trigger(V.event.DROP,[i,b.treeId,_,null,null,null])}}function l(){return!1}var i,n,b=W.getSetting(e.data.treeId),x=W.getRoot(b),w=W.getRoots();if(2==e.button||!b.edit.enable||!b.edit.drag.isCopy&&!b.edit.drag.isMove)return!0;var o=e.target,a=W.getRoot(b).curSelectedList,_=[];if(W.isSelectedNode(b,t))for(i=0,n=a.length;i<n;i++){if(a[i].editNameFlag&&H.eqs(o.tagName,"input")&&null!==o.getAttribute("treeNode"+V.id.INPUT))return!0;if(_.push(a[i]),_[0].parentTId!==a[i].parentTId){_=[t];break}}else _=[t];j.editNodeBlur=!0,j.cancelCurEditNode(b);var C,S,T,k,I,N=z(b.treeObj.get(0).ownerDocument),E=z(b.treeObj.get(0).ownerDocument.body),M=!1,D=b,d=b,A=null,L=null,P=null,R=V.move.TYPE_INNER,U=e.clientX,O=e.clientY,B=(new Date).getTime();return H.uCanDo(b)&&N.bind("mousemove",s),N.bind("mouseup",y),N.bind("selectstart",l),e.preventDefault&&e.preventDefault(),!0}};z.extend(!0,z.fn.zTree.consts,F),z.extend(!0,z.fn.zTree._z,{tools:{getAbs:function(e){return[(e=e.getBoundingClientRect()).left+(document.body.scrollLeft+document.documentElement.scrollLeft),e.top+(document.body.scrollTop+document.documentElement.scrollTop)]},inputFocus:function(e){e.get(0)&&(e.focus(),H.setCursorPosition(e.get(0),e.val().length))},inputSelect:function(e){e.get(0)&&(e.focus(),e.select())},setCursorPosition:function(e,t){if(e.setSelectionRange)e.focus(),e.setSelectionRange(t,t);else if(e.createTextRange){var i=e.createTextRange();i.collapse(!0),i.moveEnd("character",t),i.moveStart("character",t),i.select()}},showIfameMask:function(e,t){for(var i=W.getRoot(e);0<i.dragMaskList.length;)i.dragMaskList[0].remove(),i.dragMaskList.shift();if(t)for(var n=$("iframe",e),o=0,a=n.length;o<a;o++){var r=n.get(o),s=H.getAbs(r);(r=$("<div id='zTreeMask_"+o+"' class='zTreeMask' style='top:"+s[1]+"px; left:"+s[0]+"px; width:"+r.offsetWidth+"px; height:"+r.offsetHeight+"px;'></div>",e)).appendTo($("body",e)),i.dragMaskList.push(r)}}},view:{addEditBtn:function(e,t){if(!(t.editNameFlag||0<$(t,V.id.EDIT,e).length)&&H.apply(e.edit.showRenameBtn,[e.treeId,t],e.edit.showRenameBtn)){var i=$(t,V.id.A,e),n="<span class='"+V.className.BUTTON+" edit' id='"+t.tId+V.id.EDIT+"' title='"+H.apply(e.edit.renameTitle,[e.treeId,t],e.edit.renameTitle)+"' treeNode"+V.id.EDIT+" style='display:none;'></span>";i.append(n),$(t,V.id.EDIT,e).bind("click",function(){return H.uCanDo(e)&&0!=H.apply(e.callback.beforeEditName,[e.treeId,t],!0)&&j.editNode(e,t),!1}).show()}},addRemoveBtn:function(e,t){if(!(t.editNameFlag||0<$(t,V.id.REMOVE,e).length)&&H.apply(e.edit.showRemoveBtn,[e.treeId,t],e.edit.showRemoveBtn)){var i=$(t,V.id.A,e),n="<span class='"+V.className.BUTTON+" remove' id='"+t.tId+V.id.REMOVE+"' title='"+H.apply(e.edit.removeTitle,[e.treeId,t],e.edit.removeTitle)+"' treeNode"+V.id.REMOVE+" style='display:none;'></span>";i.append(n),$(t,V.id.REMOVE,e).bind("click",function(){return H.uCanDo(e)&&0!=H.apply(e.callback.beforeRemove,[e.treeId,t],!0)&&(j.removeNode(e,t),e.treeObj.trigger(V.event.REMOVE,[e.treeId,t])),!1}).bind("mousedown",function(){return!0}).show()}},addHoverDom:function(e,t){W.getRoots().showHoverDom&&(t.isHover=!0,e.edit.enable&&(j.addEditBtn(e,t),j.addRemoveBtn(e,t)),H.apply(e.view.addHoverDom,[e.treeId,t]))},cancelCurEditNode:function(e,t,i){var n=W.getRoot(e),o=e.data.key.name,a=n.curEditNode;if(a){var r=n.curEditInput;t=t||(i?a[o]:r.val());if(!1===H.apply(e.callback.beforeRename,[e.treeId,a,t,i],!0))return!1;a[o]=t,$(a,V.id.A,e).removeClass(V.node.CURSELECTED_EDIT),r.unbind(),j.setNodeName(e,a),a.editNameFlag=!1,n.curEditNode=null,n.curEditInput=null,j.selectNode(e,a,!1),e.treeObj.trigger(V.event.RENAME,[e.treeId,a,i])}return n.noSelection=!0},editNode:function(t,e){var i=W.getRoot(t);if(j.editNodeBlur=!1,W.isSelectedNode(t,e)&&i.curEditNode==e&&e.editNameFlag)setTimeout(function(){H.inputFocus(i.curEditInput)},0);else{var n=t.data.key.name;e.editNameFlag=!0,j.removeTreeDom(t,e),j.cancelCurEditNode(t),j.selectNode(t,e,!1),$(e,V.id.SPAN,t).html("<input type=text class='rename' id='"+e.tId+V.id.INPUT+"' treeNode"+V.id.INPUT+" >");var o=$(e,V.id.INPUT,t);o.attr("value",e[n]),t.edit.editNameSelectAll?H.inputSelect(o):H.inputFocus(o),o.bind("blur",function(){j.editNodeBlur||j.cancelCurEditNode(t)}).bind("keydown",function(e){"13"==e.keyCode?(j.editNodeBlur=!0,j.cancelCurEditNode(t)):"27"==e.keyCode&&j.cancelCurEditNode(t,null,!0)}).bind("click",function(){return!1}).bind("dblclick",function(){return!1}),$(e,V.id.A,t).addClass(V.node.CURSELECTED_EDIT),i.curEditInput=o,i.noSelection=!1,i.curEditNode=e}},moveNode:function(e,t,i,n,o,a){var r=W.getRoot(e),s=e.data.key.children;if(t!=i&&(!e.data.keep.leaf||!t||t.isParent||n!=V.move.TYPE_INNER)){var l,d=i.parentTId?i.getParentNode():r;(p=null===t||t==r)&&null===t&&(t=r),p&&(n=V.move.TYPE_INNER),r=t.parentTId?t.getParentNode():r,n!=V.move.TYPE_PREV&&n!=V.move.TYPE_NEXT&&(n=V.move.TYPE_INNER),n==V.move.TYPE_INNER&&(i.parentTId=p?null:(t.isParent||(t.isParent=!0,t.open=!!t.open,j.setNodeLineIcos(e,t)),t.tId)),l=p?p=e.treeObj:(a||n!=V.move.TYPE_INNER?a||j.expandCollapseNode(e,t.getParentNode(),!0,!1):j.expandCollapseNode(e,t,!0,!1),p=$(t,e),l=$(t,V.id.UL,e),p.get(0)&&!l.get(0)&&(l=[],j.makeUlHtml(e,t,l,""),p.append(l.join(""))),$(t,V.id.UL,e));var c=$(i,e);c.get(0)?p.get(0)||c.remove():c=j.appendNodes(e,i.level,[i],null,-1,!1,!0).join(""),l.get(0)&&n==V.move.TYPE_INNER?l.append(c):p.get(0)&&n==V.move.TYPE_PREV?p.before(c):p.get(0)&&n==V.move.TYPE_NEXT&&p.after(c);var u=-1,h=0,f=null,p=null,m=i.level;if(i.isFirstNode)u=0,1<d[s].length&&((f=d[s][1]).isFirstNode=!0);else if(i.isLastNode)u=d[s].length-1,(f=d[s][u-1]).isLastNode=!0;else for(l=0,c=d[s].length;l<c;l++)if(d[s][l].tId==i.tId){u=l;break}if(0<=u&&d[s].splice(u,1),n!=V.move.TYPE_INNER)for(l=0,c=r[s].length;l<c;l++)r[s][l].tId==t.tId&&(h=l);n==V.move.TYPE_INNER?(t[s]||(t[s]=[]),0<t[s].length&&((p=t[s][t[s].length-1]).isLastNode=!1),t[s].splice(t[s].length,0,i),i.isLastNode=!0,i.isFirstNode=1==t[s].length):t.isFirstNode&&n==V.move.TYPE_PREV?(r[s].splice(h,0,i),(p=t).isFirstNode=!1,i.parentTId=t.parentTId,i.isFirstNode=!0,i.isLastNode=!1):t.isLastNode&&n==V.move.TYPE_NEXT?(r[s].splice(h+1,0,i),(p=t).isLastNode=!1,i.parentTId=t.parentTId,i.isFirstNode=!1,i.isLastNode=!0):(n==V.move.TYPE_PREV?r[s].splice(h,0,i):r[s].splice(h+1,0,i),i.parentTId=t.parentTId,i.isFirstNode=!1,i.isLastNode=!1),W.fixPIdKeyValue(e,i),W.setSonNodeLevel(e,i.getParentNode(),i),j.setNodeLineIcos(e,i),j.repairNodeLevelClass(e,i,m),!e.data.keep.parent&&d[s].length<1?(d.isParent=!1,d.open=!1,t=$(d,V.id.UL,e),n=$(d,V.id.SWITCH,e),s=$(d,V.id.ICON,e),j.replaceSwitchClass(d,n,V.folder.DOCU),j.replaceIcoClass(d,s,V.folder.DOCU),t.css("display","none")):f&&j.setNodeLineIcos(e,f),p&&j.setNodeLineIcos(e,p),e.check&&e.check.enable&&j.repairChkClass&&(j.repairChkClass(e,d),j.repairParentChkClassWithSelf(e,d),d!=i.parent&&j.repairParentChkClassWithSelf(e,i)),a||j.expandCollapseParentNode(e,i.getParentNode(),!0,o)}},removeEditBtn:function(e,t){$(t,V.id.EDIT,e).unbind().remove()},removeRemoveBtn:function(e,t){$(t,V.id.REMOVE,e).unbind().remove()},removeTreeDom:function(e,t){t.isHover=!1,j.removeEditBtn(e,t),j.removeRemoveBtn(e,t),H.apply(e.view.removeHoverDom,[e.treeId,t])},repairNodeLevelClass:function(e,t,i){if(i!==t.level){var n=$(t,e),o=$(t,V.id.A,e);e=$(t,V.id.UL,e),i=V.className.LEVEL+i,t=V.className.LEVEL+t.level;n.removeClass(i),n.addClass(t),o.removeClass(i),o.addClass(t),e.removeClass(i),e.addClass(t)}},selectNodes:function(e,t){for(var i=0,n=t.length;i<n;i++)j.selectNode(e,t[i],0<i)}},event:{},data:{setSonNodeLevel:function(e,t,i){if(i){var n=e.data.key.children;if(i.level=t?t.level+1:0,i[n]){t=0;for(var o=i[n].length;t<o;t++)i[n][t]&&W.setSonNodeLevel(e,i,i[n][t])}}}}});var e=z.fn.zTree,H=e._z.tools,V=e.consts,j=e._z.view,W=e._z.data,$=H.$;W.exSetting({edit:{enable:!1,editNameSelectAll:!1,showRemoveBtn:!0,showRenameBtn:!0,removeTitle:"remove",renameTitle:"rename",drag:{autoExpandTrigger:!1,isCopy:!0,isMove:!0,prev:!0,next:!0,inner:!0,minMoveSize:5,borderMax:10,borderMin:-5,maxShowNodeNum:5,autoOpenTime:500}},view:{addHoverDom:null,removeHoverDom:null},callback:{beforeDrag:null,beforeDragOpen:null,beforeDrop:null,beforeEditName:null,beforeRename:null,onDrag:null,onDragMove:null,onDrop:null,onRename:null}}),W.addInitBind(function(s){var e=s.treeObj,t=V.event;e.bind(t.RENAME,function(e,t,i,n){H.apply(s.callback.onRename,[e,t,i,n])}),e.bind(t.DRAG,function(e,t,i,n){H.apply(s.callback.onDrag,[t,i,n])}),e.bind(t.DRAGMOVE,function(e,t,i,n){H.apply(s.callback.onDragMove,[t,i,n])}),e.bind(t.DROP,function(e,t,i,n,o,a,r){H.apply(s.callback.onDrop,[t,i,n,o,a,r])})}),W.addInitUnBind(function(e){e=e.treeObj;var t=V.event;e.unbind(t.RENAME),e.unbind(t.DRAG),e.unbind(t.DRAGMOVE),e.unbind(t.DROP)}),W.addInitCache(function(){}),W.addInitNode(function(e,t,i){i&&(i.isHover=!1,i.editNameFlag=!1)}),W.addInitProxy(function(e){var t=e.target,i=W.getSetting(e.data.treeId),n=e.relatedTarget,o="",a=null,r="",s=null,l=null;if(H.eqs(e.type,"mouseover")?(l=H.getMDom(i,t,[{tagName:"a",attrName:"treeNode"+V.id.A}]))&&(o=H.getNodeMainDom(l).id,r="hoverOverNode"):H.eqs(e.type,"mouseout")?(l=H.getMDom(i,n,[{tagName:"a",attrName:"treeNode"+V.id.A}]))||(o="remove",r="hoverOutNode"):H.eqs(e.type,"mousedown")&&(l=H.getMDom(i,t,[{tagName:"a",attrName:"treeNode"+V.id.A}]))&&(o=H.getNodeMainDom(l).id,r="mousedownNode"),0<o.length)switch(a=W.getNodeCache(i,o),r){case"mousedownNode":s=d.onMousedownNode;break;case"hoverOverNode":s=d.onHoverOverNode;break;case"hoverOutNode":s=d.onHoverOutNode}return{stop:!1,node:a,nodeEventType:r,nodeEventCallback:s,treeEventType:"",treeEventCallback:null}}),W.addInitRoot(function(e){e=W.getRoot(e);var t=W.getRoots();e.curEditNode=null,e.curEditInput=null,e.curHoverNode=null,e.dragFlag=0,e.dragNodeShowBefore=[],e.dragMaskList=[],t.showHoverDom=!0}),W.addZTreeTools(function(e,t){t.cancelEditName=function(e){W.getRoot(this.setting).curEditNode&&j.cancelCurEditNode(this.setting,e||null,!0)},t.copyNode=function(e,t,i,n){if(!t)return null;if(e&&!e.isParent&&this.setting.data.keep.leaf&&i===V.move.TYPE_INNER)return null;var o=this,a=H.clone(t);return e||(e=null,i=V.move.TYPE_INNER),i==V.move.TYPE_INNER?(t=function(){j.addNodes(o.setting,e,-1,[a],n)},H.canAsync(this.setting,e)?j.asyncNode(this.setting,e,n,t):t()):(j.addNodes(this.setting,e.parentNode,-1,[a],n),j.moveNode(this.setting,e,a,i,!1,n)),a},t.editName=function(e){e&&e.tId&&e===W.getNodeCache(this.setting,e.tId)&&(e.parentTId&&j.expandCollapseParentNode(this.setting,e.getParentNode(),!0),j.editNode(this.setting,e))},t.moveNode=function(e,t,i,n){function o(){j.moveNode(a.setting,e,t,i,!1,n)}if(!t)return t;if(e&&!e.isParent&&this.setting.data.keep.leaf&&i===V.move.TYPE_INNER)return null;if(e&&(t.parentTId==e.tId&&i==V.move.TYPE_INNER||0<$(t,this.setting).find("#"+e.tId).length))return null;e||(e=null);var a=this;return H.canAsync(this.setting,e)&&i===V.move.TYPE_INNER?j.asyncNode(this.setting,e,n,o):o(),t},t.setEditable=function(e){return this.setting.edit.enable=e,this.refresh()}});var a=j.cancelPreSelectedNode;j.cancelPreSelectedNode=function(e,t){for(var i=W.getRoot(e).curSelectedList,n=0,o=i.length;n<o&&(t&&t!==i[n]||(j.removeTreeDom(e,i[n]),!t));n++);a&&a.apply(j,arguments)};var r=j.createNodes;j.createNodes=function(e,t,i,n,o){r&&r.apply(j,arguments),i&&j.repairParentChkClassWithSelf&&j.repairParentChkClassWithSelf(e,n)};var i=j.makeNodeUrl;j.makeNodeUrl=function(e,t){return e.edit.enable?null:i.apply(j,arguments)};var n=j.removeNode;j.removeNode=function(e,t){var i=W.getRoot(e);i.curEditNode===t&&(i.curEditNode=null),n&&n.apply(j,arguments)};var o=j.selectNode;j.selectNode=function(e,t,i){var n=W.getRoot(e);return(!W.isSelectedNode(e,t)||n.curEditNode!=t||!t.editNameFlag)&&(o&&o.apply(j,arguments),j.addHoverDom(e,t),!0)};var s=H.uCanDo;H.uCanDo=function(e,t){var i=W.getRoot(e);return!(!t||!(H.eqs(t.type,"mouseover")||H.eqs(t.type,"mouseout")||H.eqs(t.type,"mousedown")||H.eqs(t.type,"mouseup")))||(i.curEditNode&&(j.editNodeBlur=!1,i.curEditInput.focus()),!i.curEditNode&&(!s||s.apply(j,arguments)))}}(jQuery),function(){"use strict";var e,t,i=window.layui&&layui.define,n={getPath:(e=document.currentScript?document.currentScript.src:function(){for(var e,t=document.scripts,i=t.length-1,n=i;0<n;n--)if("interactive"===t[n].readyState){e=t[n].src;break}return e||t[i].src}(),e.substring(0,e.lastIndexOf("/")+1)),getStyle:function(e,t){var i=e.currentStyle?e.currentStyle:window.getComputedStyle(e,null);return i[i.getPropertyValue?"getPropertyValue":"getAttribute"](t)},link:function(e,t,i){"function"==typeof t&&t()}},p={v:"5.0.9",config:{},index:window.laydate&&window.laydate.v?1e5:0,path:n.getPath,set:function(e){return this.config=E.extend({},this.config,e),this},ready:function(e){return"function"!=typeof e||e(),this}},C="layui-this",S="laydate-disabled",s="开始日期超出了结束日期<br>建议重新选择",m=[100,2e5],l="layui-laydate-static",T="layui-laydate-list",d="laydate-selected",o="layui-laydate-hint",k=".laydate-btns-confirm",I="laydate-time-text",N=".laydate-btns-time",c=function(e){var t=this;t.index=++p.index,t.config=E.extend({},t.config,p.config,e),p.ready(function(){t.init()})},E=function(e){return new a(e)},a=function(e){for(var t=0,i="object"==typeof e?[e]:(this.selector=e,document.querySelectorAll(e||null));t<i.length;t++)this.push(i[t])};a.prototype=[],a.prototype.constructor=a,E.extend=function(){var e=1,t=arguments,n=function(e,t){for(var i in e=e||(t.constructor===Array?[]:{}),t)e[i]=t[i]&&t[i].constructor===Object?n(e[i],t[i]):t[i];return e};for(t[0]="object"==typeof t[0]?t[0]:{};e<t.length;e++)"object"==typeof t[e]&&n(t[0],t[e]);return t[0]},E.ie=(t=navigator.userAgent.toLowerCase(),!!(window.ActiveXObject||"ActiveXObject"in window)&&((t.match(/msie\s(\d+)/)||[])[1]||"11")),E.stope=function(e){(e=e||window.event).stopPropagation?e.stopPropagation():e.cancelBubble=!0},E.each=function(e,t){var i;if("function"!=typeof t)return this;if((e=e||[]).constructor===Object){for(i in e)if(t.call(e[i],i,e[i]))break}else for(i=0;i<e.length&&!t.call(e[i],i,e[i]);i++);return this},E.digit=function(e,t,i){var n="";t=t||2;for(var o=(e=String(e)).length;o<t;o++)n+="0";return e<Math.pow(10,t)?n+(0|e):e},E.elem=function(e,t){var i=document.createElement(e);return E.each(t||{},function(e,t){i.setAttribute(e,t)}),i},a.addStr=function(i,e){return i=i.replace(/\s+/," "),e=e.replace(/\s+/," ").split(" "),E.each(e,function(e,t){new RegExp("\\b"+t+"\\b").test(i)||(i=i+" "+t)}),i.replace(/^\s|\s$/,"")},a.removeStr=function(n,e){return n=n.replace(/\s+/," "),e=e.replace(/\s+/," ").split(" "),E.each(e,function(e,t){var i=new RegExp("\\b"+t+"\\b");i.test(n)&&(n=n.replace(i,""))}),n.replace(/\s+/," ").replace(/^\s|\s$/,"")},a.prototype.find=function(n){var o=this,a=0,r=[],s="object"==typeof n;return this.each(function(e,t){for(var i=s?[n]:t.querySelectorAll(n||null);a<i.length;a++)r.push(i[a]);o.shift()}),s||(o.selector=(o.selector?o.selector+" ":"")+n),E.each(r,function(e,t){o.push(t)}),o},a.prototype.each=function(e){return E.each.call(this,this,e)},a.prototype.addClass=function(i,n){return this.each(function(e,t){t.className=a[n?"removeStr":"addStr"](t.className,i)})},a.prototype.removeClass=function(e){return this.addClass(e,!0)},a.prototype.hasClass=function(i){var n=!1;return this.each(function(e,t){new RegExp("\\b"+i+"\\b").test(t.className)&&(n=!0)}),n},a.prototype.attr=function(i,n){var e=this;return void 0===n?function(){if(0<e.length)return e[0].getAttribute(i)}():e.each(function(e,t){t.setAttribute(i,n)})},a.prototype.removeAttr=function(i){return this.each(function(e,t){t.removeAttribute(i)})},a.prototype.html=function(i){return this.each(function(e,t){t.innerHTML=i})},a.prototype.val=function(i){return this.each(function(e,t){t.value=i})},a.prototype.append=function(i){return this.each(function(e,t){"object"==typeof i?t.appendChild(i):t.innerHTML=t.innerHTML+i})},a.prototype.remove=function(i){return this.each(function(e,t){i?t.removeChild(i):t.parentNode.removeChild(t)})},a.prototype.on=function(i,n){return this.each(function(e,t){t.attachEvent?t.attachEvent("on"+i,function(e){e.target=e.srcElement,n.call(t,e)}):t.addEventListener(i,n,!1)})},a.prototype.off=function(i,n){return this.each(function(e,t){t.detachEvent?t.detachEvent("on"+i,n):t.removeEventListener(i,n,!1)})},c.isLeapYear=function(e){return e%4==0&&e%100!=0||e%400==0},c.prototype.config={type:"date",range:!1,format:"yyyy-MM-dd",value:null,min:"1900-1-1",max:"2099-12-31",trigger:"focus",show:!1,showBottom:!0,allowKeyword:!0,btns:["clear","now","confirm"],lang:"cn",theme:"default",position:null,calendar:!1,mark:{},zIndex:null,parse:null,done:null,change:null},c.prototype.lang=function(){var e={cn:{weeks:["日","一","二","三","四","五","六"],time:["时","分","秒"],timeTips:"选择时间",startTime:"开始时间",endTime:"结束时间",dateTips:"返回日期",month:["一","二","三","四","五","六","七","八","九","十","十一","十二"],tools:{confirm:"确定",clear:"清空",now:"现在"}},en:{weeks:["Su","Mo","Tu","We","Th","Fr","Sa"],time:["Hours","Minutes","Seconds"],timeTips:"Select Time",startTime:"Start Time",endTime:"End Time",dateTips:"Select Date",month:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],tools:{confirm:"Confirm",clear:"Clear",now:"Now"}}};return e[this.config.lang]||e.cn},c.prototype.init=function(){var n=this,s=n.config,o="yyyy|y|MM|M|dd|d|HH|H|mm|m|ss|s",e="static"===s.position,t={year:"yyyy",month:"yyyy-MM",date:"yyyy-MM-dd",time:"HH:mm:ss",datetime:"yyyy-MM-dd HH:mm:ss"};s.elem=E(s.elem),s.eventElem=E(s.eventElem),s.elem[0]&&(!0===s.range&&(s.range="-"),s.format===t.date&&(s.format=t[s.type]),n.format=s.format.match(new RegExp(o+"|.","g"))||[],n.EXP_IF="",n.EXP_SPLIT="",E.each(n.format,function(e,t){var i=new RegExp(o).test(t)?"\\d{"+(new RegExp(o).test(n.format[0===e?e+1:e-1]||"")?/^yyyy|y$/.test(t)?4:t.length:/^yyyy$/.test(t)?"1,4":/^y$/.test(t)?"1,308":"1,2")+"}":"\\"+t;n.EXP_IF=n.EXP_IF+i,n.EXP_SPLIT=n.EXP_SPLIT+"("+i+")"}),n.EXP_IF=new RegExp("^"+(s.range?n.EXP_IF+"\\s\\"+s.range+"\\s"+n.EXP_IF:n.EXP_IF)+"$"),n.EXP_SPLIT=new RegExp("^"+n.EXP_SPLIT+"$",""),n.isInput(s.elem[0])||"focus"===s.trigger&&(s.trigger="click"),s.elem.attr("lay-key")||(s.elem.attr("lay-key",n.index),s.eventElem.attr("lay-key",n.index)),s.mark=E.extend({},s.calendar&&"cn"===s.lang?{"0-1-1":"元旦","0-2-14":"情人","0-3-8":"妇女","0-3-12":"植树","0-4-1":"愚人","0-5-1":"劳动","0-5-4":"青年","0-6-1":"儿童","0-9-10":"教师","0-9-18":"国耻","0-10-1":"国庆","0-12-25":"圣诞"}:{},s.mark),E.each(["min","max"],function(e,t){var i=[],n=[];if("number"==typeof s[t]){var o=s[t],a=(new Date).getTime(),r=new Date(o?o<864e5?a+864e5*o:o:a);i=[r.getFullYear(),r.getMonth()+1,r.getDate()],o<864e5||(n=[r.getHours(),r.getMinutes(),r.getSeconds()])}else i=(s[t].match(/\d+-\d+-\d+/)||[""])[0].split("-"),n=(s[t].match(/\d+:\d+:\d+/)||[""])[0].split(":");s[t]={year:0|i[0]||(new Date).getFullYear(),month:i[1]?(0|i[1])-1:(new Date).getMonth(),date:0|i[2]||(new Date).getDate(),hours:0|n[0],minutes:0|n[1],seconds:0|n[2]}}),n.elemID="layui-laydate"+s.elem.attr("lay-key"),(s.show||e)&&n.render(),e||n.events(),s.value&&(s.value.constructor===Date?n.setValue(n.parse(0,n.systemDate(s.value))):n.setValue(s.value)))},c.prototype.render=function(){var e,n,t=this,p=t.config,m=t.lang(),o="static"===p.position,i=t.elem=E.elem("div",{id:t.elemID,class:["layui-laydate",p.range?" layui-laydate-range":"",o?" "+l:"",p.theme&&"default"!==p.theme&&!/^#/.test(p.theme)?" laydate-theme-"+p.theme:""].join("")}),g=t.elemMain=[],v=t.elemHeader=[],y=t.elemCont=[],b=t.table=[],a=t.footer=E.elem("div",{class:"layui-laydate-footer"});if(p.zIndex&&(i.style.zIndex=p.zIndex),E.each(new Array(2),function(e){if(!p.range&&0<e)return!0;var t,i,n,o,a,r,s,l=E.elem("div",{class:"layui-laydate-header"}),d=[(s=E.elem("i",{class:"layui-icon laydate-icon laydate-prev-y"}),s.innerHTML="&#xe65a;",s),(r=E.elem("i",{class:"layui-icon laydate-icon laydate-prev-m"}),r.innerHTML="&#xe603;",r),(n=E.elem("div",{class:"laydate-set-ym"}),o=E.elem("span"),a=E.elem("span"),n.appendChild(o),n.appendChild(a),n),(i=E.elem("i",{class:"layui-icon laydate-icon laydate-next-m"}),i.innerHTML="&#xe602;",i),(t=E.elem("i",{class:"layui-icon laydate-icon laydate-next-y"}),t.innerHTML="&#xe65b;",t)],c=E.elem("div",{class:"layui-laydate-content"}),u=E.elem("table"),h=E.elem("thead"),f=E.elem("tr");E.each(d,function(e,t){l.appendChild(t)}),h.appendChild(f),E.each(new Array(6),function(i){var n=u.insertRow(0);E.each(new Array(7),function(e){if(0===i){var t=E.elem("th");t.innerHTML=m.weeks[e],f.appendChild(t)}n.insertCell(e)})}),u.insertBefore(h,u.children[0]),c.appendChild(u),g[e]=E.elem("div",{class:"layui-laydate-main laydate-main-list-"+e}),g[e].appendChild(l),g[e].appendChild(c),v.push(d),y.push(c),b.push(u)}),E(a).html((e=[],n=[],"datetime"===p.type&&e.push('<span lay-type="datetime" class="laydate-btns-time">'+m.timeTips+"</span>"),E.each(p.btns,function(e,t){var i=m.tools[t]||"btn";p.range&&"now"===t||(o&&"clear"===t&&(i="cn"===p.lang?"重置":"Reset"),n.push('<span lay-type="'+t+'" class="laydate-btns-'+t+'">'+i+"</span>"))}),e.push('<div class="laydate-footer-btns">'+n.join("")+"</div>"),e.join(""))),E.each(g,function(e,t){i.appendChild(t)}),p.showBottom&&i.appendChild(a),/^#/.test(p.theme)){var r=E.elem("style"),s=["#{{id}} .layui-laydate-header{background-color:{{theme}};}","#{{id}} .layui-this{background-color:{{theme}} !important;}"].join("").replace(/{{id}}/g,t.elemID).replace(/{{theme}}/g,p.theme);"styleSheet"in r?(r.setAttribute("type","text/css"),r.styleSheet.cssText=s):r.innerHTML=s,E(i).addClass("laydate-theme-molv"),i.appendChild(r)}t.remove(c.thisElemDate),o?p.elem.append(i):(document.body.appendChild(i),t.position()),t.checkDate().calendar(),t.changeEvent(),c.thisElemDate=t.elemID,"function"==typeof p.ready&&p.ready(E.extend({},p.dateTime,{month:p.dateTime.month+1}))},c.prototype.remove=function(e){this.config;var t=E("#"+(e||this.elemID));return t.hasClass(l)||this.checkDate(function(){t.remove()}),this},c.prototype.position=function(){var e=this.config,t=(this.bindElem||e.elem[0]).getBoundingClientRect(),i=this.elem.offsetWidth,n=this.elem.offsetHeight,o=function(e){return e=e?"scrollLeft":"scrollTop",document.body[e]|document.documentElement[e]},a=function(e){return document.documentElement[e?"clientWidth":"clientHeight"]},r=t.left,s=t.bottom;r+i+5>a("width")&&(r=a("width")-i-5),s+n+5>a()&&(s=t.top>n?t.top-n:a()-n,s-=10),e.position&&(this.elem.style.position=e.position),this.elem.style.left=r+("fixed"===e.position?0:o(1))+"px",this.elem.style.top=s+("fixed"===e.position?0:o())+"px"},c.prototype.hint=function(e){var t=this,i=(t.config,E.elem("div",{class:o}));i.innerHTML=e||"",E(t.elem).find("."+o).remove(),t.elem.appendChild(i),clearTimeout(t.hinTimer),t.hinTimer=setTimeout(function(){E(t.elem).find("."+o).remove()},3e3)},c.prototype.getAsYM=function(e,t,i){return i?t--:t++,t<0&&(t=11,e--),11<t&&(t=0,e++),[e,t]},c.prototype.systemDate=function(e){var t=e||new Date;return{year:t.getFullYear(),month:t.getMonth(),date:t.getDate(),hours:e?e.getHours():0,minutes:e?e.getMinutes():0,seconds:e?e.getSeconds():0}},c.prototype.checkDate=function(e){var t,s,l=this,d=(new Date,l.config),i=d.dateTime=d.dateTime||l.systemDate(),n=l.bindElem||d.elem[0],o=(l.isInput(n),l.isInput(n)?n.value:"static"===d.position?"":n.innerHTML),c=function(e){e.year>m[1]&&(e.year=m[1],s=!0),11<e.month&&(e.month=11,s=!0),23<e.hours&&(e.hours=0,s=!0),59<e.minutes&&(e.minutes=0,e.hours++,s=!0),59<e.seconds&&(e.seconds=0,e.minutes++,s=!0),t=p.getEndDate(e.month+1,e.year),e.date>t&&(e.date=t,s=!0)},a=function(n,o,a){var r=["startTime","endTime"];o=(o.match(l.EXP_SPLIT)||[]).slice(1),a=a||0,d.range&&(l[r[a]]=l[r[a]]||{}),E.each(l.format,function(e,t){var i=parseFloat(o[e]);o[e].length<t.length&&(s=!0),/yyyy|y/.test(t)?(i<m[0]&&(i=m[0],s=!0),n.year=i):/MM|M/.test(t)?(i<1&&(i=1,s=!0),n.month=i-1):/dd|d/.test(t)?(i<1&&(i=1,s=!0),n.date=i):/HH|H/.test(t)?(i<1&&(s=!(i=0)),n.hours=i,d.range&&(l[r[a]].hours=i)):/mm|m/.test(t)?(i<1&&(s=!(i=0)),n.minutes=i,d.range&&(l[r[a]].minutes=i)):/ss|s/.test(t)&&(i<1&&(s=!(i=0)),n.seconds=i,d.range&&(l[r[a]].seconds=i))}),c(n)};return"limit"===e?c(i):("string"==typeof(o=o||d.value)&&(o=o.replace(/\s+/g," ").replace(/^\s|\s$/g,"")),l.startState&&!l.endState&&(delete l.startState,l.endState=!0),"string"==typeof o&&o?l.EXP_IF.test(o)?d.range?(o=o.split(" "+d.range+" "),l.startDate=l.startDate||l.systemDate(),l.endDate=l.endDate||l.systemDate(),d.dateTime=E.extend({},l.startDate),E.each([l.startDate,l.endDate],function(e,t){a(t,o[e],e)})):a(i,o):(l.hint("日期格式不合法<br>必须遵循下述格式：<br>"+(d.range?d.format+" "+d.range+" "+d.format:d.format)+"<br>已为你重置"),s=!0):o&&o.constructor===Date?d.dateTime=l.systemDate(o):(d.dateTime=l.systemDate(),delete l.startState,delete l.endState,delete l.startDate,delete l.endDate,delete l.startTime,delete l.endTime),c(i),s&&o&&l.setValue(d.range?l.endDate?l.parse():"":l.parse()),e&&e()),l},c.prototype.mark=function(e,n){var o,t=this.config;return E.each(t.mark,function(e,t){var i=e.split("-");i[0]!=n[0]&&0!=i[0]||i[1]!=n[1]&&0!=i[1]||i[2]!=n[2]||(o=t||n[2])}),o&&e.html('<span class="laydate-day-mark">'+o+"</span>"),this},c.prototype.limit=function(e,t,i,o){var n,a=this,r=a.config,s={},l=r[41<i?"endDate":"dateTime"],d=E.extend({},l,t||{});return E.each({now:d,min:r.min,max:r.max},function(e,i){var n;s[e]=a.newDate(E.extend({year:i.year,month:i.month,date:i.date},(n={},E.each(o,function(e,t){n[t]=i[t]}),n))).getTime()}),n=s.now<s.min||s.now>s.max,e&&e[n?"addClass":"removeClass"](S),n},c.prototype.calendar=function(e){var o,a,r,s=this,l=s.config,d=e||l.dateTime,t=new Date,i=s.lang(),n="date"!==l.type&&"datetime"!==l.type,c=e?1:0,u=E(s.table[c]).find("td"),h=E(s.elemHeader[c][2]).find("span");if(d.year<m[0]&&(d.year=m[0],s.hint("最低只能支持到公元"+m[0]+"年")),d.year>m[1]&&(d.year=m[1],s.hint("最高只能支持到公元"+m[1]+"年")),s.firstDate||(s.firstDate=E.extend({},d)),t.setFullYear(d.year,d.month,1),o=t.getDay(),a=p.getEndDate(d.month||12,d.year),r=p.getEndDate(d.month+1,d.year),E.each(u,function(e,t){var i=[d.year,d.month],n=0;(t=E(t)).removeAttr("class"),e<o?(n=a-o+e,t.addClass("laydate-day-prev"),i=s.getAsYM(d.year,d.month,"sub")):o<=e&&e<r+o?(n=e-o,l.range||n+1===d.date&&t.addClass(C)):(n=e-r-o,t.addClass("laydate-day-next"),i=s.getAsYM(d.year,d.month)),i[1]++,i[2]=n+1,t.attr("lay-ymd",i.join("-")).html(i[2]),s.mark(t,i).limit(t,{year:i[0],month:i[1]-1,date:i[2]},e)}),E(h[0]).attr("lay-ym",d.year+"-"+(d.month+1)),E(h[1]).attr("lay-ym",d.year+"-"+(d.month+1)),"cn"===l.lang?(E(h[0]).attr("lay-type","year").html(d.year+"年"),E(h[1]).attr("lay-type","month").html(d.month+1+"月")):(E(h[0]).attr("lay-type","month").html(i.month[d.month]),E(h[1]).attr("lay-type","year").html(d.year)),n&&(l.range&&(e?s.endDate=s.endDate||{year:d.year+("year"===l.type?1:0),month:d.month+("month"===l.type?0:-1)}:s.startDate=s.startDate||{year:d.year,month:d.month},e&&(s.listYM=[[s.startDate.year,s.startDate.month+1],[s.endDate.year,s.endDate.month+1]],s.list(l.type,0).list(l.type,1),"time"===l.type?s.setBtnStatus("时间",E.extend({},s.systemDate(),s.startTime),E.extend({},s.systemDate(),s.endTime)):s.setBtnStatus(!0))),l.range||(s.listYM=[[d.year,d.month+1]],s.list(l.type,0))),l.range&&!e){var f=s.getAsYM(d.year,d.month);s.calendar(E.extend({},d,{year:f[0],month:f[1]}))}return l.range||s.limit(E(s.footer).find(k),null,0,["hours","minutes","seconds"]),l.range&&e&&!n&&s.stampRange(),s},c.prototype.list=function(i,n){var o=this,a=o.config,r=a.dateTime,s=o.lang(),l=a.range&&"date"!==a.type&&"datetime"!==a.type,d=E.elem("ul",{class:T+" "+{year:"laydate-year-list",month:"laydate-month-list",time:"laydate-time-list"}[i]}),e=o.elemHeader[n],t=E(e[2]).find("span"),c=o.elemCont[n||0],u=E(c).find("."+T)[0],h="cn"===a.lang,f=h?"年":"",p=o.listYM[n]||{},m=["hours","minutes","seconds"],g=["startTime","endTime"][n];if(p[0]<1&&(p[0]=1),"year"===i){var v,y=v=p[0]-7;y<1&&(y=v=1),E.each(new Array(15),function(e){var t=E.elem("li",{"lay-ym":v}),i={year:v};v==p[0]&&E(t).addClass(C),t.innerHTML=v+f,d.appendChild(t),v<o.firstDate.year?(i.month=a.min.month,i.date=a.min.date):v>=o.firstDate.year&&(i.month=a.max.month,i.date=a.max.date),o.limit(E(t),i,n),v++}),E(t[h?0:1]).attr("lay-ym",v-8+"-"+p[1]).html(y+f+" - "+(v-1+f))}else if("month"===i)E.each(new Array(12),function(e){var t=E.elem("li",{"lay-ym":e}),i={year:p[0],month:e};e+1==p[1]&&E(t).addClass(C),t.innerHTML=s.month[e]+(h?"月":""),d.appendChild(t),p[0]<o.firstDate.year?i.date=a.min.date:p[0]>=o.firstDate.year&&(i.date=a.max.date),o.limit(E(t),i,n)}),E(t[h?0:1]).attr("lay-ym",p[0]+"-"+p[1]).html(p[0]+f);else if("time"===i){var b=function(){E(d).find("ol").each(function(i,e){E(e).find("li").each(function(e,t){o.limit(E(t),[{hours:e},{hours:o[g].hours,minutes:e},{hours:o[g].hours,minutes:o[g].minutes,seconds:e}][i],n,[["hours"],["hours","minutes"],["hours","minutes","seconds"]][i])})}),a.range||o.limit(E(o.footer).find(k),o[g],0,["hours","minutes","seconds"])};a.range?o[g]||(o[g]={hours:0,minutes:0,seconds:0}):o[g]=r,E.each([24,60,60],function(t,e){var i=E.elem("li"),n=["<p>"+s.time[t]+"</p><ol>"];E.each(new Array(e),function(e){n.push("<li"+(o[g][m[t]]===e?' class="'+C+'"':"")+">"+E.digit(e,2)+"</li>")}),i.innerHTML=n.join("")+"</ol>",d.appendChild(i)}),b()}if(u&&c.removeChild(u),c.appendChild(d),"year"===i||"month"===i)E(o.elemMain[n]).addClass("laydate-ym-show"),E(d).find("li").on("click",function(){var e=0|E(this).attr("lay-ym");if(!E(this).hasClass(S)){if(0===n)r[i]=e,l&&(o.startDate[i]=e),o.limit(E(o.footer).find(k),null,0);else if(l)o.endDate[i]=e;else{var t="year"===i?o.getAsYM(e,p[1]-1,"sub"):o.getAsYM(p[0],e,"sub");E.extend(r,{year:t[0],month:t[1]})}"year"===a.type||"month"===a.type?(E(d).find("."+C).removeClass(C),E(this).addClass(C),"month"===a.type&&"year"===i&&(o.listYM[n][0]=e,l&&(o[["startDate","endDate"][n]].year=e),o.list("month",n))):(o.checkDate("limit").calendar(),o.closeList()),o.setBtnStatus(),a.range||o.done(null,"change"),E(o.footer).find(N).removeClass(S),("month"===a.type&&"month"===i||"year"===a.type&&"year"===i)&&$(".laydate-btns-confirm").trigger("click")}});else{var x=E.elem("span",{class:I}),w=function(){E(d).find("ol").each(function(e){var i=this,t=E(i).find("li");i.scrollTop=30*(o[g][m[e]]-2),i.scrollTop<=0&&t.each(function(e,t){if(!E(this).hasClass(S))return i.scrollTop=30*(e-2),!0})})},_=E(e[2]).find("."+I);w(),x.innerHTML=a.range?[s.startTime,s.endTime][n]:s.timeTips,E(o.elemMain[n]).addClass("laydate-time-show"),_[0]&&_.remove(),e[2].appendChild(x),E(d).find("ol").each(function(t){var i=this;E(i).find("li").on("click",function(){var e=0|this.innerHTML;E(this).hasClass(S)||(a.range?o[g][m[t]]=e:r[m[t]]=e,E(i).find("."+C).removeClass(C),E(this).addClass(C),b(),w(),(o.endDate||"time"===a.type)&&o.done(null,"change"),o.setBtnStatus())})})}return o},c.prototype.listYM=[],c.prototype.closeList=function(){var i=this;i.config;E.each(i.elemCont,function(e,t){E(this).find("."+T).remove(),E(i.elemMain[e]).removeClass("laydate-ym-show laydate-time-show")}),E(i.elem).find("."+I).remove()},c.prototype.setBtnStatus=function(e,t,i){var n,o=this.config,a=E(this.footer).find(k);o.range&&"date"!==o.type&&"time"!==o.type&&(t=t||this.startDate,i=i||this.endDate,n=this.newDate(t).getTime()>this.newDate(i).getTime(),this.limit(null,t)||this.limit(null,i)?a.addClass(S):a[n?"addClass":"removeClass"](S),e&&n&&this.hint("string"==typeof e?s.replace(/日期/g,e):s))},c.prototype.parse=function(e,t){var i=this.config,n=t||(e?E.extend({},this.endDate,this.endTime):i.range?E.extend({},this.startDate,this.startTime):i.dateTime),o=this.format.concat();return E.each(o,function(e,t){/yyyy|y/.test(t)?o[e]=E.digit(n.year,t.length):/MM|M/.test(t)?o[e]=E.digit(n.month+1,t.length):/dd|d/.test(t)?o[e]=E.digit(n.date,t.length):/HH|H/.test(t)?o[e]=E.digit(n.hours,t.length):/mm|m/.test(t)?o[e]=E.digit(n.minutes,t.length):/ss|s/.test(t)&&(o[e]=E.digit(n.seconds,t.length))}),i.range&&!e?o.join("")+" "+i.range+" "+this.parse(1):o.join("")},c.prototype.newDate=function(e){return e=e||{},new Date(e.year||1,e.month||0,e.date||1,e.hours||0,e.minutes||0,e.seconds||0)},c.prototype.setValue=function(e){var t=this.config,i=this.bindElem||t.elem[0],n=this.isInput(i)?"val":"html";if("static"===t.position||E(i)[n](e||""),t.parse){var o=(0,t.parse)($(i).attr("ng-model")).assign;angular.element(i).scope().$apply(function(){o(angular.element(i).scope(),e)})}return this},c.prototype.stampRange=function(){var o,a,r=this,e=r.config,t=E(r.elem).find("td");if(e.range&&!r.endDate&&E(r.footer).find(k).addClass(S),r.endDate){if(o=r.newDate({year:r.startDate.year,month:r.startDate.month,date:r.startDate.date}).getTime(),(a=r.newDate({year:r.endDate.year,month:r.endDate.month,date:r.endDate.date}).getTime())<o)return r.hint(s);E.each(t,function(e,t){var i=E(t).attr("lay-ymd").split("-"),n=r.newDate({year:i[0],month:i[1]-1,date:i[2]}).getTime();E(t).removeClass(d+" "+C),n!==o&&n!==a||E(t).addClass(E(t).hasClass("laydate-day-prev")||E(t).hasClass("laydate-day-next")?d:C),o<n&&n<a&&E(t).addClass(d)})}},c.prototype.done=function(e,t){var i=this.config,n=E.extend({},this.startDate?E.extend(this.startDate,this.startTime):i.dateTime),o=E.extend({},E.extend(this.endDate,this.endTime));return E.each([n,o],function(e,t){"month"in t&&E.extend(t,{month:t.month+1})}),e=e||[this.parse(),n,o],"function"==typeof i[t||"done"]&&i[t||"done"].apply(i,e),this},c.prototype.choose=function(e){var i=this,t=i.config,n=t.dateTime,o=E(i.elem).find("td"),a=e.attr("lay-ymd").split("-"),r=function(e){new Date;e&&E.extend(n,a),t.range&&(i.startDate?E.extend(i.startDate,a):i.startDate=E.extend({},a,i.startTime),i.startYMD=a)};if(a={year:0|a[0],month:(0|a[1])-1,date:0|a[2]},!e.hasClass(S))if(t.range){if(E.each(["startTime","endTime"],function(e,t){i[t]=i[t]||{hours:0,minutes:0,seconds:0}}),i.endState)r(),delete i.endState,delete i.endDate,i.startState=!0,o.removeClass(C+" "+d),e.addClass(C);else if(i.startState){if(e.addClass(C),i.endDate?E.extend(i.endDate,a):i.endDate=E.extend({},a,i.endTime),i.newDate(a).getTime()<i.newDate(i.startYMD).getTime()){var s=E.extend({},i.endDate,{hours:i.startDate.hours,minutes:i.startDate.minutes,seconds:i.startDate.seconds});E.extend(i.endDate,i.startDate,{hours:i.endDate.hours,minutes:i.endDate.minutes,seconds:i.endDate.seconds}),i.startDate=s}t.showBottom||i.done(),i.stampRange(),i.endState=!0,i.done(null,"change")}else e.addClass(C),r(),i.startState=!0;E(i.footer).find(k)[i.endDate?"removeClass":"addClass"](S)}else"static"===t.position?(r(!0),i.calendar().done().done(null,"change")):"date"===t.type?(r(!0),i.setValue(i.parse()).remove().done()):"datetime"===t.type&&(r(!0),i.calendar().done(null,"change"))},c.prototype.tool=function(e,t){var i=this,n=i.config,o=n.dateTime,a="static"===n.position,r={datetime:function(){E(e).hasClass(S)||(i.list("time",0),n.range&&i.list("time",1),E(e).attr("lay-type","date").html(i.lang().dateTips))},date:function(){i.closeList(),E(e).attr("lay-type","datetime").html(i.lang().timeTips)},clear:function(){i.setValue("").remove(),a&&(E.extend(o,i.firstDate),i.calendar()),n.range&&(delete i.startState,delete i.endState,delete i.endDate,delete i.startTime,delete i.endTime),i.done(["",{},{}])},now:function(){var e=new Date;E.extend(o,i.systemDate(),{hours:e.getHours(),minutes:e.getMinutes(),seconds:e.getSeconds()}),i.setValue(i.parse()).remove(),a&&i.calendar(),i.done()},confirm:function(){if(n.range){if(!i.endDate)return i.hint("请先选择日期范围");if(E(e).hasClass(S))return i.hint("time"===n.type?s.replace(/日期/g,"时间"):s)}else if(E(e).hasClass(S))return i.hint("不在有效日期或时间范围内");i.done(),i.setValue(i.parse()).remove()}};r[t]&&r[t]()},c.prototype.change=function(o){var a=this,r=a.config,s=r.dateTime,l=r.range&&("year"===r.type||"month"===r.type),d=a.elemCont[o||0],c=a.listYM[o],e=function(e){var t=["startDate","endDate"][o],i=E(d).find(".laydate-year-list")[0],n=E(d).find(".laydate-month-list")[0];return i&&(c[0]=e?c[0]-15:c[0]+15,a.list("year",o)),n&&(e?c[0]--:c[0]++,a.list("month",o)),(i||n)&&(E.extend(s,{year:c[0]}),l&&(a[t].year=c[0]),r.range||a.done(null,"change"),a.setBtnStatus(),r.range||a.limit(E(a.footer).find(k),{year:c[0]})),i||n};return{prevYear:function(){e("sub")||(s.year--,a.checkDate("limit").calendar(),r.range||a.done(null,"change"))},prevMonth:function(){var e=a.getAsYM(s.year,s.month,"sub");E.extend(s,{year:e[0],month:e[1]}),a.checkDate("limit").calendar(),r.range||a.done(null,"change")},nextMonth:function(){var e=a.getAsYM(s.year,s.month);E.extend(s,{year:e[0],month:e[1]}),a.checkDate("limit").calendar(),r.range||a.done(null,"change")},nextYear:function(){e()||(s.year++,a.checkDate("limit").calendar(),r.range||a.done(null,"change"))}}},c.prototype.changeEvent=function(){var a=this;a.config;E(a.elem).on("click",function(e){E.stope(e)}),E.each(a.elemHeader,function(o,e){E(e[0]).on("click",function(e){a.change(o).prevYear()}),E(e[1]).on("click",function(e){a.change(o).prevMonth()}),E(e[2]).find("span").on("click",function(e){var t=E(this),i=t.attr("lay-ym"),n=t.attr("lay-type");i&&(i=i.split("-"),a.listYM[o]=[0|i[0],0|i[1]],a.list(n,o),E(a.footer).find(N).addClass(S))}),E(e[3]).on("click",function(e){a.change(o).nextMonth()}),E(e[4]).on("click",function(e){a.change(o).nextYear()})}),E.each(a.table,function(e,t){E(t).find("td").on("click",function(){a.choose(E(this))})}),E(a.footer).find("span").on("click",function(){var e=E(this).attr("lay-type");a.tool(this,e)})},c.prototype.isInput=function(e){return/input|textarea/.test(e.tagName.toLocaleLowerCase())},c.prototype.events=function(){var i=this,n=i.config,e=function(e,t){e.on(n.trigger,function(){t&&(i.bindElem=this),i.render()})};n.elem[0]&&!n.elem[0].eventHandler&&(e(n.elem,"bind"),e(n.eventElem),E(document).on("click",function(e){e.target!==n.elem[0]&&e.target!==n.eventElem[0]&&e.target!==E(n.closeStop)[0]&&i.remove()}).on("keydown",function(e){13===e.keyCode&&E("#"+i.elemID)[0]&&i.elemID===c.thisElem&&(e.preventDefault(),E(i.footer).find(k)[0].click())}),n.elem.on("keydown",function(e){n.allowKeyword||e.preventDefault()}),E(window).on("resize",function(){if(!i.elem||!E(".layui-laydate")[0])return!1;i.position()}),n.elem[0].eventHandler=!0)},p.render=function(e){var t=new c(e);return function(){var t=this;return{hint:function(e){t.hint.call(t,e)},config:t.config}}.call(t)},p.getEndDate=function(e,t){var i=new Date;return i.setFullYear(t||i.getFullYear(),e||i.getMonth()+1,1),new Date(i.getTime()-864e5).getDate()},window.lay=window.lay||E,i?(p.ready(),layui.define(function(e){p.path=layui.cache.dir,e("laydate",p)})):"function"==typeof define&&define.amd?define(function(){return p}):(p.ready(),window.laydate=p)}(),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.echarts={})}(this,function(e){"use strict";var t;"undefined"!=typeof window?t=window.__DEV__:"undefined"!=typeof global&&(t=global.__DEV__),void 0===t&&(t=!0);var I=t,i=2311,n=function(){return i++},v="object"==typeof wx&&"function"==typeof wx.getSystemInfoSync?{browser:{},os:{},node:!1,wxa:!0,canvasSupported:!0,svgSupported:!1,touchEventsSupported:!0}:"undefined"==typeof document&&"undefined"!=typeof self?{browser:{},os:{},node:!1,worker:!0,canvasSupported:!0}:"undefined"==typeof navigator?{browser:{},os:{},node:!0,worker:!1,canvasSupported:!0,svgSupported:!0}:function(e){var t={},i=e.match(/Firefox\/([\d.]+)/),n=e.match(/MSIE\s([\d.]+)/)||e.match(/Trident\/.+?rv:(([\d.]+))/),o=e.match(/Edge\/([\d.]+)/),a=/micromessenger/i.test(e);i&&(t.firefox=!0,t.version=i[1]);n&&(t.ie=!0,t.version=n[1]);o&&(t.edge=!0,t.version=o[1]);a&&(t.weChat=!0);return{browser:t,os:{},node:!1,canvasSupported:!!document.createElement("canvas").getContext,svgSupported:"undefined"!=typeof SVGRect,touchEventsSupported:"ontouchstart"in window&&!t.ie&&!t.edge,pointerEventsSupported:"onpointerdown"in window&&(t.edge||t.ie&&11<=t.version)}}(navigator.userAgent);var s={"[object Function]":1,"[object RegExp]":1,"[object Date]":1,"[object Error]":1,"[object CanvasGradient]":1,"[object CanvasPattern]":1,"[object Image]":1,"[object Canvas]":1},l={"[object Int8Array]":1,"[object Uint8Array]":1,"[object Uint8ClampedArray]":1,"[object Int16Array]":1,"[object Uint16Array]":1,"[object Int32Array]":1,"[object Uint32Array]":1,"[object Float32Array]":1,"[object Float64Array]":1},d=Object.prototype.toString,o=Array.prototype,r=o.forEach,c=o.filter,a=o.slice,u=o.map,h=o.reduce,f={};function p(e,t){"createCanvas"===e&&(y=null),f[e]=t}function N(e){if(null==e||"object"!=typeof e)return e;var t=e,i=d.call(e);if("[object Array]"===i){if(!J(e)){t=[];for(var n=0,o=e.length;n<o;n++)t[n]=N(e[n])}}else if(l[i]){if(!J(e)){var a=e.constructor;if(e.constructor.from)t=a.from(e);else{t=new a(e.length);for(n=0,o=e.length;n<o;n++)t[n]=N(e[n])}}}else if(!s[i]&&!J(e)&&!H(e))for(var r in t={},e)e.hasOwnProperty(r)&&(t[r]=N(e[r]));return t}function m(e,t,i){if(!B(t)||!B(e))return i?N(t):e;for(var n in t)if(t.hasOwnProperty(n)){var o=e[n],a=t[n];!B(a)||!B(o)||R(a)||R(o)||H(a)||H(o)||z(a)||z(o)||J(a)||J(o)?!i&&n in e||(e[n]=N(t[n])):m(o,a,i)}return e}function g(e,t){for(var i=e[0],n=1,o=e.length;n<o;n++)i=m(i,e[n],t);return i}function D(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);return e}function E(e,t,i){for(var n in t)t.hasOwnProperty(n)&&(i?null!=t[n]:null==e[n])&&(e[n]=t[n]);return e}var y,b=function(){return f.createCanvas()};function x(){return y||(y=b().getContext("2d")),y}function w(e,t){if(e){if(e.indexOf)return e.indexOf(t);for(var i=0,n=e.length;i<n;i++)if(e[i]===t)return i}return-1}function _(e,t){var i=e.prototype;function n(){}for(var o in n.prototype=t.prototype,e.prototype=new n,i)e.prototype[o]=i[o];(e.prototype.constructor=e).superClass=t}function C(e,t,i){E(e="prototype"in e?e.prototype:e,t="prototype"in t?t.prototype:t,i)}function P(e){if(e)return"string"!=typeof e&&"number"==typeof e.length}function O(e,t,i){if(e&&t)if(e.forEach&&e.forEach===r)e.forEach(t,i);else if(e.length===+e.length)for(var n=0,o=e.length;n<o;n++)t.call(i,e[n],n,e);else for(var a in e)e.hasOwnProperty(a)&&t.call(i,e[a],a,e)}function M(e,t,i){if(e&&t){if(e.map&&e.map===u)return e.map(t,i);for(var n=[],o=0,a=e.length;o<a;o++)n.push(t.call(i,e[o],o,e));return n}}function S(e,t,i,n){if(e&&t){if(e.reduce&&e.reduce===h)return e.reduce(t,i,n);for(var o=0,a=e.length;o<a;o++)i=t.call(n,i,e[o],o,e);return i}}function T(e,t,i){if(e&&t){if(e.filter&&e.filter===c)return e.filter(t,i);for(var n=[],o=0,a=e.length;o<a;o++)t.call(i,e[o],o,e)&&n.push(e[o]);return n}}function A(e,t){var i=a.call(arguments,2);return function(){return e.apply(t,i.concat(a.call(arguments)))}}function L(e){var t=a.call(arguments,1);return function(){return e.apply(this,t.concat(a.call(arguments)))}}function R(e){return"[object Array]"===d.call(e)}function k(e){return"function"==typeof e}function U(e){return"[object String]"===d.call(e)}function B(e){var t=typeof e;return"function"===t||!!e&&"object"==t}function z(e){return!!s[d.call(e)]}function F(e){return!!l[d.call(e)]}function H(e){return"object"==typeof e&&"number"==typeof e.nodeType&&"object"==typeof e.ownerDocument}function V(e){return e!=e}function j(e){for(var t=0,i=arguments.length;t<i;t++)if(null!=arguments[t])return arguments[t]}function W(e,t){return null!=e?e:t}function $(e,t,i){return null!=e?e:null!=t?t:i}function G(){return Function.call.apply(a,arguments)}function Y(e){if("number"==typeof e)return[e,e,e,e];var t=e.length;return 2===t?[e[0],e[1],e[0],e[1]]:3===t?[e[0],e[1],e[2],e[1]]:e}function q(e,t){if(!e)throw new Error(t)}function Z(e){return null==e?null:"function"==typeof e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}f.createCanvas=function(){return document.createElement("canvas")};var X="__ec_primitive__";function K(e){e[X]=!0}function J(e){return e[X]}function Q(e){var i=R(e),n=this;function t(e,t){i?n.set(e,t):n.set(t,e)}e instanceof Q?e.each(t):e&&O(e,t)}function ee(e){return new Q(e)}function te(e,t){for(var i=new e.constructor(e.length+t.length),n=0;n<e.length;n++)i[n]=e[n];var o=e.length;for(n=0;n<t.length;n++)i[n+o]=t[n];return i}function ie(){}Q.prototype={constructor:Q,get:function(e){return this.hasOwnProperty(e)?this[e]:null},set:function(e,t){return this[e]=t},each:function(e,t){for(var i in void 0!==t&&(e=A(e,t)),this)this.hasOwnProperty(i)&&e(this[i],i)},removeKey:function(e){delete this[e]}};var ne=(Object.freeze||Object)({$override:p,clone:N,merge:m,mergeAll:g,extend:D,defaults:E,createCanvas:b,getContext:x,indexOf:w,inherits:_,mixin:C,isArrayLike:P,each:O,map:M,reduce:S,filter:T,find:function(e,t,i){if(e&&t)for(var n=0,o=e.length;n<o;n++)if(t.call(i,e[n],n,e))return e[n]},bind:A,curry:L,isArray:R,isFunction:k,isString:U,isObject:B,isBuiltInObject:z,isTypedArray:F,isDom:H,eqNaN:V,retrieve:j,retrieve2:W,retrieve3:$,slice:G,normalizeCssArray:Y,assert:q,trim:Z,setAsPrimitive:K,isPrimitive:J,createHashMap:ee,concatArray:te,noop:ie}),oe="undefined"==typeof Float32Array?Array:Float32Array;function ae(e,t){var i=new oe(2);return null==e&&(e=0),null==t&&(t=0),i[0]=e,i[1]=t,i}function re(e,t){return e[0]=t[0],e[1]=t[1],e}function se(e){var t=new oe(2);return t[0]=e[0],t[1]=e[1],t}function le(e,t,i){return e[0]=t,e[1]=i,e}function de(e,t,i){return e[0]=t[0]+i[0],e[1]=t[1]+i[1],e}function ce(e,t,i,n){return e[0]=t[0]+i[0]*n,e[1]=t[1]+i[1]*n,e}function ue(e,t,i){return e[0]=t[0]-i[0],e[1]=t[1]-i[1],e}function he(e){return Math.sqrt(pe(e))}var fe=he;function pe(e){return e[0]*e[0]+e[1]*e[1]}var me=pe;function ge(e,t,i){return e[0]=t[0]*i,e[1]=t[1]*i,e}function ve(e,t){var i=he(t);return e[1]=0===i?e[0]=0:(e[0]=t[0]/i,t[1]/i),e}function ye(e,t){return Math.sqrt((e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1]))}var be=ye;function xe(e,t){return(e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1])}var we=xe;function _e(e,t,i,n){return e[0]=t[0]+n*(i[0]-t[0]),e[1]=t[1]+n*(i[1]-t[1]),e}function Ce(e,t,i){var n=t[0],o=t[1];return e[0]=i[0]*n+i[2]*o+i[4],e[1]=i[1]*n+i[3]*o+i[5],e}function Se(e,t,i){return e[0]=Math.min(t[0],i[0]),e[1]=Math.min(t[1],i[1]),e}function Te(e,t,i){return e[0]=Math.max(t[0],i[0]),e[1]=Math.max(t[1],i[1]),e}var ke=(Object.freeze||Object)({create:ae,copy:re,clone:se,set:le,add:de,scaleAndAdd:ce,sub:ue,len:he,length:fe,lenSquare:pe,lengthSquare:me,mul:function(e,t,i){return e[0]=t[0]*i[0],e[1]=t[1]*i[1],e},div:function(e,t,i){return e[0]=t[0]/i[0],e[1]=t[1]/i[1],e},dot:function(e,t){return e[0]*t[0]+e[1]*t[1]},scale:ge,normalize:ve,distance:ye,dist:be,distanceSquare:xe,distSquare:we,negate:function(e,t){return e[0]=-t[0],e[1]=-t[1],e},lerp:_e,applyTransform:Ce,min:Se,max:Te});function Ie(){this.on("mousedown",this._dragStart,this),this.on("mousemove",this._drag,this),this.on("mouseup",this._dragEnd,this),this.on("globalout",this._dragEnd,this)}function Ne(e,t){return{target:e,topTarget:t&&t.topTarget}}Ie.prototype={constructor:Ie,_dragStart:function(e){var t=e.target;t&&t.draggable&&((this._draggingTarget=t).dragging=!0,this._x=e.offsetX,this._y=e.offsetY,this.dispatchToElement(Ne(t,e),"dragstart",e.event))},_drag:function(e){var t=this._draggingTarget;if(t){var i=e.offsetX,n=e.offsetY,o=i-this._x,a=n-this._y;this._x=i,this._y=n,t.drift(o,a,e),this.dispatchToElement(Ne(t,e),"drag",e.event);var r=this.findHover(i,n,t).target,s=this._dropTarget;t!==(this._dropTarget=r)&&(s&&r!==s&&this.dispatchToElement(Ne(s,e),"dragleave",e.event),r&&r!==s&&this.dispatchToElement(Ne(r,e),"dragenter",e.event))}},_dragEnd:function(e){var t=this._draggingTarget;t&&(t.dragging=!1),this.dispatchToElement(Ne(t,e),"dragend",e.event),this._dropTarget&&this.dispatchToElement(Ne(this._dropTarget,e),"drop",e.event),this._draggingTarget=null,this._dropTarget=null}};var Ee=Array.prototype.slice,Me=function(){this._$handlers={}};Me.prototype={constructor:Me,one:function(e,t,i){var n=this._$handlers;if(!t||!e)return this;n[e]||(n[e]=[]);for(var o=0;o<n[e].length;o++)if(n[e][o].h===t)return this;return n[e].push({h:t,one:!0,ctx:i||this}),this},on:function(e,t,i){var n=this._$handlers;if(!t||!e)return this;n[e]||(n[e]=[]);for(var o=0;o<n[e].length;o++)if(n[e][o].h===t)return this;return n[e].push({h:t,one:!1,ctx:i||this}),this},isSilent:function(e){var t=this._$handlers;return t[e]&&t[e].length},off:function(e,t){var i=this._$handlers;if(!e)return this._$handlers={},this;if(t){if(i[e]){for(var n=[],o=0,a=i[e].length;o<a;o++)i[e][o].h!=t&&n.push(i[e][o]);i[e]=n}i[e]&&0===i[e].length&&delete i[e]}else delete i[e];return this},trigger:function(e){if(this._$handlers[e]){var t=arguments,i=t.length;3<i&&(t=Ee.call(t,1));for(var n=this._$handlers[e],o=n.length,a=0;a<o;){switch(i){case 1:n[a].h.call(n[a].ctx);break;case 2:n[a].h.call(n[a].ctx,t[1]);break;case 3:n[a].h.call(n[a].ctx,t[1],t[2]);break;default:n[a].h.apply(n[a].ctx,t)}n[a].one?(n.splice(a,1),o--):a++}}return this},triggerWithContext:function(e){if(this._$handlers[e]){var t=arguments,i=t.length;4<i&&(t=Ee.call(t,1,t.length-1));for(var n=t[t.length-1],o=this._$handlers[e],a=o.length,r=0;r<a;){switch(i){case 1:o[r].h.call(n);break;case 2:o[r].h.call(n,t[1]);break;case 3:o[r].h.call(n,t[1],t[2]);break;default:o[r].h.apply(n,t)}o[r].one?(o.splice(r,1),a--):r++}}return this}};var De="silent";function Ae(){}Ae.prototype.dispose=function(){};var Le=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],Pe=function(e,t,i,n){Me.call(this),this.storage=e,this.painter=t,this.painterRoot=n,i=i||new Ae,this.proxy=null,this._hovered={},this._lastTouchMoment,this._lastX,this._lastY,Ie.call(this),this.setHandlerProxy(i)};function Re(e,t,i){if(e[e.rectHover?"rectContain":"contain"](t,i)){for(var n,o=e;o;){if(o.clipPath&&!o.clipPath.contain(t,i))return!1;o.silent&&(n=!0),o=o.parent}return!n||De}return!1}Pe.prototype={constructor:Pe,setHandlerProxy:function(t){this.proxy&&this.proxy.dispose(),t&&(O(Le,function(e){t.on&&t.on(e,this[e],this)},this),t.handler=this),this.proxy=t},mousemove:function(e){var t=e.zrX,i=e.zrY,n=this._hovered,o=n.target;o&&!o.__zr&&(o=(n=this.findHover(n.x,n.y)).target);var a=this._hovered=this.findHover(t,i),r=a.target,s=this.proxy;s.setCursor&&s.setCursor(r?r.cursor:"default"),o&&r!==o&&this.dispatchToElement(n,"mouseout",e),this.dispatchToElement(a,"mousemove",e),r&&r!==o&&this.dispatchToElement(a,"mouseover",e)},mouseout:function(e){this.dispatchToElement(this._hovered,"mouseout",e);for(var t,i=e.toElement||e.relatedTarget;(i=i&&i.parentNode)&&9!=i.nodeType&&!(t=i===this.painterRoot););!t&&this.trigger("globalout",{event:e})},resize:function(e){this._hovered={}},dispatch:function(e,t){var i=this[e];i&&i.call(this,t)},dispose:function(){this.proxy.dispose(),this.storage=this.proxy=this.painter=null},setCursorStyle:function(e){var t=this.proxy;t.setCursor&&t.setCursor(e)},dispatchToElement:function(e,t,i){var n=(e=e||{}).target;if(!n||!n.silent){for(var o,a,r="on"+t,s={type:t,event:a=i,target:(o=e).target,topTarget:o.topTarget,cancelBubble:!1,offsetX:a.zrX,offsetY:a.zrY,gestureEvent:a.gestureEvent,pinchX:a.pinchX,pinchY:a.pinchY,pinchScale:a.pinchScale,wheelDelta:a.zrDelta,zrByTouch:a.zrByTouch,which:a.which};n&&(n[r]&&(s.cancelBubble=n[r].call(n,s)),n.trigger(t,s),n=n.parent,!s.cancelBubble););s.cancelBubble||(this.trigger(t,s),this.painter&&this.painter.eachOtherLayer(function(e){"function"==typeof e[r]&&e[r].call(e,s),e.trigger&&e.trigger(t,s)}))}},findHover:function(e,t,i){for(var n=this.storage.getDisplayList(),o={x:e,y:t},a=n.length-1;0<=a;a--){var r;if(n[a]!==i&&!n[a].ignore&&(r=Re(n[a],e,t))&&(!o.topTarget&&(o.topTarget=n[a]),r!==De)){o.target=n[a];break}}return o}},O(["click","mousedown","mouseup","mousewheel","dblclick","contextmenu"],function(n){Pe.prototype[n]=function(e){var t=this.findHover(e.zrX,e.zrY),i=t.target;if("mousedown"===n)this._downEl=i,this._downPoint=[e.zrX,e.zrY],this._upEl=i;else if("mouseup"===n)this._upEl=i;else if("click"===n){if(this._downEl!==this._upEl||!this._downPoint||4<be(this._downPoint,[e.zrX,e.zrY]))return;this._downPoint=null}this.dispatchToElement(t,n,e)}}),C(Pe,Me),C(Pe,Ie);var Ue="undefined"==typeof Float32Array?Array:Float32Array;function Oe(){var e=new Ue(6);return Be(e),e}function Be(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e}function ze(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function Fe(e,t,i){var n=t[0]*i[0]+t[2]*i[1],o=t[1]*i[0]+t[3]*i[1],a=t[0]*i[2]+t[2]*i[3],r=t[1]*i[2]+t[3]*i[3],s=t[0]*i[4]+t[2]*i[5]+t[4],l=t[1]*i[4]+t[3]*i[5]+t[5];return e[0]=n,e[1]=o,e[2]=a,e[3]=r,e[4]=s,e[5]=l,e}function He(e,t,i){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4]+i[0],e[5]=t[5]+i[1],e}function Ve(e,t,i){var n=t[0],o=t[2],a=t[4],r=t[1],s=t[3],l=t[5],d=Math.sin(i),c=Math.cos(i);return e[0]=n*c+r*d,e[1]=-n*d+r*c,e[2]=o*c+s*d,e[3]=-o*d+c*s,e[4]=c*a+d*l,e[5]=c*l-d*a,e}function je(e,t,i){var n=i[0],o=i[1];return e[0]=t[0]*n,e[1]=t[1]*o,e[2]=t[2]*n,e[3]=t[3]*o,e[4]=t[4]*n,e[5]=t[5]*o,e}function We(e,t){var i=t[0],n=t[2],o=t[4],a=t[1],r=t[3],s=t[5],l=i*r-a*n;return l?(l=1/l,e[0]=r*l,e[1]=-a*l,e[2]=-n*l,e[3]=i*l,e[4]=(n*s-r*o)*l,e[5]=(a*o-i*s)*l,e):null}function $e(e){var t=Oe();return ze(t,e),t}var Ge=(Object.freeze||Object)({create:Oe,identity:Be,copy:ze,mul:Fe,translate:He,rotate:Ve,scale:je,invert:We,clone:$e}),Ye=Be;function qe(e){return 5e-5<e||e<-5e-5}var Ze=function(e){(e=e||{}).position||(this.position=[0,0]),null==e.rotation&&(this.rotation=0),e.scale||(this.scale=[1,1]),this.origin=this.origin||null},Xe=Ze.prototype;Xe.transform=null,Xe.needLocalTransform=function(){return qe(this.rotation)||qe(this.position[0])||qe(this.position[1])||qe(this.scale[0]-1)||qe(this.scale[1]-1)},Xe.updateTransform=function(){var e=this.parent,t=e&&e.transform,i=this.needLocalTransform(),n=this.transform;i||t?(n=n||Oe(),i?this.getLocalTransform(n):Ye(n),t&&(i?Fe(n,e.transform,n):ze(n,e.transform)),this.transform=n,this.invTransform=this.invTransform||Oe(),We(this.invTransform,n)):n&&Ye(n)},Xe.getLocalTransform=function(e){return Ze.getLocalTransform(this,e)},Xe.setTransform=function(e){var t=this.transform,i=e.dpr||1;t?e.setTransform(i*t[0],i*t[1],i*t[2],i*t[3],i*t[4],i*t[5]):e.setTransform(i,0,0,i,0,0)},Xe.restoreTransform=function(e){var t=e.dpr||1;e.setTransform(t,0,0,t,0,0)};var Ke=[];Xe.decomposeTransform=function(){if(this.transform){var e=this.parent,t=this.transform;e&&e.transform&&(Fe(Ke,e.invTransform,t),t=Ke);var i=t[0]*t[0]+t[1]*t[1],n=t[2]*t[2]+t[3]*t[3],o=this.position,a=this.scale;qe(i-1)&&(i=Math.sqrt(i)),qe(n-1)&&(n=Math.sqrt(n)),t[0]<0&&(i=-i),t[3]<0&&(n=-n),o[0]=t[4],o[1]=t[5],a[0]=i,a[1]=n,this.rotation=Math.atan2(-t[1]/n,t[0]/i)}},Xe.getGlobalScale=function(){var e=this.transform;if(!e)return[1,1];var t=Math.sqrt(e[0]*e[0]+e[1]*e[1]),i=Math.sqrt(e[2]*e[2]+e[3]*e[3]);return e[0]<0&&(t=-t),e[3]<0&&(i=-i),[t,i]},Xe.transformCoordToLocal=function(e,t){var i=[e,t],n=this.invTransform;return n&&Ce(i,i,n),i},Xe.transformCoordToGlobal=function(e,t){var i=[e,t],n=this.transform;return n&&Ce(i,i,n),i},Ze.getLocalTransform=function(e,t){Ye(t=t||[]);var i=e.origin,n=e.scale||[1,1],o=e.rotation||0,a=e.position||[0,0];return i&&(t[4]-=i[0],t[5]-=i[1]),je(t,t,n),o&&Ve(t,t,o),i&&(t[4]+=i[0],t[5]+=i[1]),t[4]+=a[0],t[5]+=a[1],t};var Je={linear:function(e){return e},quadraticIn:function(e){return e*e},quadraticOut:function(e){return e*(2-e)},quadraticInOut:function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)},cubicIn:function(e){return e*e*e},cubicOut:function(e){return--e*e*e+1},cubicInOut:function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)},quarticIn:function(e){return e*e*e*e},quarticOut:function(e){return 1- --e*e*e*e},quarticInOut:function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)},quinticIn:function(e){return e*e*e*e*e},quinticOut:function(e){return--e*e*e*e*e+1},quinticInOut:function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)},sinusoidalIn:function(e){return 1-Math.cos(e*Math.PI/2)},sinusoidalOut:function(e){return Math.sin(e*Math.PI/2)},sinusoidalInOut:function(e){return.5*(1-Math.cos(Math.PI*e))},exponentialIn:function(e){return 0===e?0:Math.pow(1024,e-1)},exponentialOut:function(e){return 1===e?1:1-Math.pow(2,-10*e)},exponentialInOut:function(e){return 0===e?0:1===e?1:(e*=2)<1?.5*Math.pow(1024,e-1):.5*(2-Math.pow(2,-10*(e-1)))},circularIn:function(e){return 1-Math.sqrt(1-e*e)},circularOut:function(e){return Math.sqrt(1- --e*e)},circularInOut:function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)},elasticIn:function(e){var t,i=.1;return 0===e?0:1===e?1:(t=!i||i<1?(i=1,.1):.4*Math.asin(1/i)/(2*Math.PI),-i*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/.4))},elasticOut:function(e){var t,i=.1;return 0===e?0:1===e?1:(t=!i||i<1?(i=1,.1):.4*Math.asin(1/i)/(2*Math.PI),i*Math.pow(2,-10*e)*Math.sin((e-t)*(2*Math.PI)/.4)+1)},elasticInOut:function(e){var t,i=.1;return 0===e?0:1===e?1:(t=!i||i<1?(i=1,.1):.4*Math.asin(1/i)/(2*Math.PI),(e*=2)<1?i*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/.4)*-.5:i*Math.pow(2,-10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/.4)*.5+1)},backIn:function(e){return e*e*(2.70158*e-1.70158)},backOut:function(e){return--e*e*(2.70158*e+1.70158)+1},backInOut:function(e){var t=2.5949095;return(e*=2)<1?e*e*((t+1)*e-t)*.5:.5*((e-=2)*e*((t+1)*e+t)+2)},bounceIn:function(e){return 1-Je.bounceOut(1-e)},bounceOut:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},bounceInOut:function(e){return e<.5?.5*Je.bounceIn(2*e):.5*Je.bounceOut(2*e-1)+.5}};function Qe(e){this._target=e.target,this._life=e.life||1e3,this._delay=e.delay||0,this._initialized=!1,this.loop=null!=e.loop&&e.loop,this.gap=e.gap||0,this.easing=e.easing||"Linear",this.onframe=e.onframe,this.ondestroy=e.ondestroy,this.onrestart=e.onrestart,this._pausedTime=0,this._paused=!1}Qe.prototype={constructor:Qe,step:function(e,t){if(this._initialized||(this._startTime=e+this._delay,this._initialized=!0),this._paused)this._pausedTime+=t;else{var i=(e-this._startTime-this._pausedTime)/this._life;if(!(i<0)){i=Math.min(i,1);var n=this.easing,o="string"==typeof n?Je[n]:n,a="function"==typeof o?o(i):i;return this.fire("frame",a),1==i?this.loop?(this.restart(e),"restart"):(this._needsRemove=!0,"destroy"):null}}},restart:function(e){var t=(e-this._startTime-this._pausedTime)%this._life;this._startTime=e-t+this.gap,this._pausedTime=0,this._needsRemove=!1},fire:function(e,t){this[e="on"+e]&&this[e](this._target,t)},pause:function(){this._paused=!0},resume:function(){this._paused=!1}};var et=function(){this.head=null,this.tail=null,this._len=0},tt=et.prototype;tt.insert=function(e){var t=new it(e);return this.insertEntry(t),t},tt.insertEntry=function(e){this.head?((this.tail.next=e).prev=this.tail,e.next=null,this.tail=e):this.head=this.tail=e,this._len++},tt.remove=function(e){var t=e.prev,i=e.next;t?t.next=i:this.head=i,i?i.prev=t:this.tail=t,e.next=e.prev=null,this._len--},tt.len=function(){return this._len},tt.clear=function(){this.head=this.tail=null,this._len=0};var it=function(e){this.value=e,this.next,this.prev},nt=function(e){this._list=new et,this._map={},this._maxSize=e||10,this._lastRemovedEntry=null},ot=nt.prototype;ot.put=function(e,t){var i=this._list,n=this._map,o=null;if(null==n[e]){var a=i.len(),r=this._lastRemovedEntry;if(a>=this._maxSize&&0<a){var s=i.head;i.remove(s),delete n[s.key],o=s.value,this._lastRemovedEntry=s}r?r.value=t:r=new it(t),r.key=e,i.insertEntry(r),n[e]=r}return o},ot.get=function(e){var t=this._map[e],i=this._list;if(null!=t)return t!==i.tail&&(i.remove(t),i.insertEntry(t)),t.value},ot.clear=function(){this._list.clear(),this._map={}};var at={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function rt(e){return(e=Math.round(e))<0?0:255<e?255:e}function st(e){return e<0?0:1<e?1:e}function lt(e){return e.length&&"%"===e.charAt(e.length-1)?rt(parseFloat(e)/100*255):rt(parseInt(e,10))}function dt(e){return e.length&&"%"===e.charAt(e.length-1)?st(parseFloat(e)/100):st(parseFloat(e))}function ct(e,t,i){return i<0?i+=1:1<i&&(i-=1),6*i<1?e+(t-e)*i*6:2*i<1?t:3*i<2?e+(t-e)*(2/3-i)*6:e}function ut(e,t,i){return e+(t-e)*i}function ht(e,t,i,n,o){return e[0]=t,e[1]=i,e[2]=n,e[3]=o,e}function ft(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}var pt=new nt(20),mt=null;function gt(e,t){mt&&ft(mt,t),mt=pt.put(e,mt||t.slice())}function vt(e,t){if(e){t=t||[];var i=pt.get(e);if(i)return ft(t,i);var n,o=(e+="").replace(/ /g,"").toLowerCase();if(o in at)return ft(t,at[o]),gt(e,t),t;if("#"===o.charAt(0))return 4===o.length?0<=(n=parseInt(o.substr(1),16))&&n<=4095?(ht(t,(3840&n)>>4|(3840&n)>>8,240&n|(240&n)>>4,15&n|(15&n)<<4,1),gt(e,t),t):void ht(t,0,0,0,1):7===o.length?0<=(n=parseInt(o.substr(1),16))&&n<=16777215?(ht(t,(16711680&n)>>16,(65280&n)>>8,255&n,1),gt(e,t),t):void ht(t,0,0,0,1):void 0;var a=o.indexOf("("),r=o.indexOf(")");if(-1!==a&&r+1===o.length){var s=o.substr(0,a),l=o.substr(a+1,r-(a+1)).split(","),d=1;switch(s){case"rgba":if(4!==l.length)return void ht(t,0,0,0,1);d=dt(l.pop());case"rgb":return 3!==l.length?void ht(t,0,0,0,1):(ht(t,lt(l[0]),lt(l[1]),lt(l[2]),d),gt(e,t),t);case"hsla":return 4!==l.length?void ht(t,0,0,0,1):(l[3]=dt(l[3]),yt(l,t),gt(e,t),t);case"hsl":return 3!==l.length?void ht(t,0,0,0,1):(yt(l,t),gt(e,t),t);default:return}}ht(t,0,0,0,1)}}function yt(e,t){var i=(parseFloat(e[0])%360+360)%360/360,n=dt(e[1]),o=dt(e[2]),a=o<=.5?o*(n+1):o+n-o*n,r=2*o-a;return ht(t=t||[],rt(255*ct(r,a,i+1/3)),rt(255*ct(r,a,i)),rt(255*ct(r,a,i-1/3)),1),4===e.length&&(t[3]=e[3]),t}function bt(e,t){var i=vt(e);if(i){for(var n=0;n<3;n++)i[n]=t<0?i[n]*(1-t)|0:(255-i[n])*t+i[n]|0,255<i[n]?i[n]=255:e[n]<0&&(i[n]=0);return It(i,4===i.length?"rgba":"rgb")}}function xt(e){var t=vt(e);if(t)return((1<<24)+(t[0]<<16)+(t[1]<<8)+ +t[2]).toString(16).slice(1)}function wt(e,t,i){if(t&&t.length&&0<=e&&e<=1){i=i||[];var n=e*(t.length-1),o=Math.floor(n),a=Math.ceil(n),r=t[o],s=t[a],l=n-o;return i[0]=rt(ut(r[0],s[0],l)),i[1]=rt(ut(r[1],s[1],l)),i[2]=rt(ut(r[2],s[2],l)),i[3]=st(ut(r[3],s[3],l)),i}}var _t=wt;function Ct(e,t,i){if(t&&t.length&&0<=e&&e<=1){var n=e*(t.length-1),o=Math.floor(n),a=Math.ceil(n),r=vt(t[o]),s=vt(t[a]),l=n-o,d=It([rt(ut(r[0],s[0],l)),rt(ut(r[1],s[1],l)),rt(ut(r[2],s[2],l)),st(ut(r[3],s[3],l))],"rgba");return i?{color:d,leftIndex:o,rightIndex:a,value:n}:d}}var St=Ct;function Tt(e,t,i,n){if(e=vt(e))return e=function(e){if(e){var t,i,n=e[0]/255,o=e[1]/255,a=e[2]/255,r=Math.min(n,o,a),s=Math.max(n,o,a),l=s-r,d=(s+r)/2;if(0===l)i=t=0;else{i=d<.5?l/(s+r):l/(2-s-r);var c=((s-n)/6+l/2)/l,u=((s-o)/6+l/2)/l,h=((s-a)/6+l/2)/l;n===s?t=h-u:o===s?t=1/3+c-h:a===s&&(t=2/3+u-c),t<0&&(t+=1),1<t&&(t-=1)}var f=[360*t,i,d];return null!=e[3]&&f.push(e[3]),f}}(e),null!=t&&(e[0]=(o=t,(o=Math.round(o))<0?0:360<o?360:o)),null!=i&&(e[1]=dt(i)),null!=n&&(e[2]=dt(n)),It(yt(e),"rgba");var o}function kt(e,t){if((e=vt(e))&&null!=t)return e[3]=st(t),It(e,"rgba")}function It(e,t){if(e&&e.length){var i=e[0]+","+e[1]+","+e[2];return"rgba"!==t&&"hsva"!==t&&"hsla"!==t||(i+=","+e[3]),t+"("+i+")"}}var Nt=(Object.freeze||Object)({parse:vt,lift:bt,toHex:xt,fastLerp:wt,fastMapToColor:_t,lerp:Ct,mapToColor:St,modifyHSL:Tt,modifyAlpha:kt,stringify:It}),Et=Array.prototype.slice;function Mt(e,t){return e[t]}function Dt(e,t,i){e[t]=i}function At(e,t,i){return(t-e)*i+e}function Lt(e,t,i){return.5<i?t:e}function Pt(e,t,i,n,o){var a=e.length;if(1==o)for(var r=0;r<a;r++)n[r]=At(e[r],t[r],i);else{var s=a&&e[0].length;for(r=0;r<a;r++)for(var l=0;l<s;l++)n[r][l]=At(e[r][l],t[r][l],i)}}function Rt(e,t,i){var n=e.length,o=t.length;if(n!==o)if(o<n)e.length=o;else for(var a=n;a<o;a++)e.push(1===i?t[a]:Et.call(t[a]));var r=e[0]&&e[0].length;for(a=0;a<e.length;a++)if(1===i)isNaN(e[a])&&(e[a]=t[a]);else for(var s=0;s<r;s++)isNaN(e[a][s])&&(e[a][s]=t[a][s])}function Ut(e,t,i){if(e===t)return!0;var n=e.length;if(n!==t.length)return!1;if(1===i){for(var o=0;o<n;o++)if(e[o]!==t[o])return!1}else{var a=e[0].length;for(o=0;o<n;o++)for(var r=0;r<a;r++)if(e[o][r]!==t[o][r])return!1}return!0}function Ot(e,t,i,n,o,a,r,s,l){var d=e.length;if(1==l)for(var c=0;c<d;c++)s[c]=Bt(e[c],t[c],i[c],n[c],o,a,r);else{var u=e[0].length;for(c=0;c<d;c++)for(var h=0;h<u;h++)s[c][h]=Bt(e[c][h],t[c][h],i[c][h],n[c][h],o,a,r)}}function Bt(e,t,i,n,o,a,r){var s=.5*(i-e),l=.5*(n-t);return(2*(t-i)+s+l)*r+(-3*(t-i)-2*s-l)*a+s*o+t}function zt(e){if(P(e)){var t=e.length;if(P(e[0])){for(var i=[],n=0;n<t;n++)i.push(Et.call(e[n]));return i}return Et.call(e)}return e}function Ft(e){return e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.floor(e[2]),"rgba("+e.join(",")+")"}function Ht(e,t,i,n,a,o){var r=e._getter,s=e._setter,l="spline"===t,d=n.length;if(d){var c,u,h,f=P(n[0].value),p=!1,m=!1,g=f?P((u=(c=n)[c.length-1].value)&&u[0])?2:1:0;n.sort(function(e,t){return e.time-t.time}),h=n[d-1].time;for(var v=[],y=[],b=n[0].value,x=!0,w=0;w<d;w++){v.push(n[w].time/h);var _=n[w].value;if(f&&Ut(_,b,g)||!f&&_===b||(x=!1),"string"==typeof(b=_)){var C=vt(_);C?(_=C,p=!0):m=!0}y.push(_)}if(o||!x){var S=y[d-1];for(w=0;w<d-1;w++)f?Rt(y[w],S,g):!isNaN(y[w])||isNaN(S)||m||p||(y[w]=S);f&&Rt(r(e._target,a),S,g);var T,k,I,N,E,M=0,D=0;if(p)var A=[0,0,0,0];var L=new Qe({target:e._target,life:h,loop:e._loop,delay:e._delay,onframe:function(e,t){var i;if(t<0)i=0;else if(t<D){for(i=Math.min(M+1,d-1);0<=i&&!(v[i]<=t);i--);i=Math.min(i,d-2)}else{for(i=M;i<d&&!(v[i]>t);i++);i=Math.min(i-1,d-2)}D=t;var n=v[(M=i)+1]-v[i];if(0!==n)if(T=(t-v[i])/n,l)if(I=y[i],k=y[0===i?i:i-1],N=y[d-2<i?d-1:i+1],E=y[d-3<i?d-1:i+2],f)Ot(k,I,N,E,T,T*T,T*T*T,r(e,a),g);else{if(p)o=Ot(k,I,N,E,T,T*T,T*T*T,A,1),o=Ft(A);else{if(m)return Lt(I,N,T);o=Bt(k,I,N,E,T,T*T,T*T*T)}s(e,a,o)}else if(f)Pt(y[i],y[i+1],T,r(e,a),g);else{var o;if(p)Pt(y[i],y[i+1],T,A,1),o=Ft(A);else{if(m)return Lt(y[i],y[i+1],T);o=At(y[i],y[i+1],T)}s(e,a,o)}},ondestroy:i});return t&&"spline"!==t&&(L.easing=t),L}}}var Vt=function(e,t,i,n){this._tracks={},this._target=e,this._loop=t||!1,this._getter=i||Mt,this._setter=n||Dt,this._clipCount=0,this._delay=0,this._doneList=[],this._onframeList=[],this._clipList=[]};Vt.prototype={when:function(e,t){var i=this._tracks;for(var n in t)if(t.hasOwnProperty(n)){if(!i[n]){i[n]=[];var o=this._getter(this._target,n);if(null==o)continue;0!==e&&i[n].push({time:0,value:zt(o)})}i[n].push({time:e,value:t[n]})}return this},during:function(e){return this._onframeList.push(e),this},pause:function(){for(var e=0;e<this._clipList.length;e++)this._clipList[e].pause();this._paused=!0},resume:function(){for(var e=0;e<this._clipList.length;e++)this._clipList[e].resume();this._paused=!1},isPaused:function(){return!!this._paused},_doneCallback:function(){this._tracks={},this._clipList.length=0;for(var e=this._doneList,t=e.length,i=0;i<t;i++)e[i].call(this)},start:function(e,t){var i,n=this,o=0,a=function(){--o||n._doneCallback()};for(var r in this._tracks)if(this._tracks.hasOwnProperty(r)){var s=Ht(this,e,a,this._tracks[r],r,t);s&&(this._clipList.push(s),o++,this.animation&&this.animation.addClip(s),i=s)}if(i){var l=i.onframe;i.onframe=function(e,t){l(e,t);for(var i=0;i<n._onframeList.length;i++)n._onframeList[i](e,t)}}return o||this._doneCallback(),this},stop:function(e){for(var t=this._clipList,i=this.animation,n=0;n<t.length;n++){var o=t[n];e&&o.onframe(this._target,1),i&&i.removeClip(o)}t.length=0},delay:function(e){return this._delay=e,this},done:function(e){return e&&this._doneList.push(e),this},getClips:function(){return this._clipList}};var jt=1;"undefined"!=typeof window&&(jt=Math.max(window.devicePixelRatio||1,1));var Wt=jt,$t=function(){};var Gt=$t,Yt=function(){this.animators=[]};Yt.prototype={constructor:Yt,animate:function(e,t){var i,n=!1,o=this,a=this.__zr;if(e){var r=e.split("."),s=o;n="shape"===r[0];for(var l=0,d=r.length;l<d;l++)s&&(s=s[r[l]]);s&&(i=s)}else i=o;if(i){var c=o.animators,u=new Vt(i,t);return u.during(function(e){o.dirty(n)}).done(function(){c.splice(w(c,u),1)}),c.push(u),a&&a.animation.addAnimator(u),u}Gt('Property "'+e+'" is not existed in element '+o.id)},stopAnimation:function(e){for(var t=this.animators,i=t.length,n=0;n<i;n++)t[n].stop(e);return t.length=0,this},animateTo:function(e,t,i,n,o,a){U(i)?(o=n,n=i,i=0):k(n)?(o=n,n="linear",i=0):k(i)?(o=i,i=0):k(t)?(o=t,t=500):t||(t=500),this.stopAnimation(),this._animateToShallow("",this,e,t,i);var r=this.animators.slice(),s=r.length;function l(){--s||o&&o()}s||o&&o();for(var d=0;d<r.length;d++)r[d].done(l).start(n,a)},_animateToShallow:function(e,t,i,n,o){var a={},r=0;for(var s in i)if(i.hasOwnProperty(s))if(null!=t[s])B(i[s])&&!P(i[s])?this._animateToShallow(e?e+"."+s:s,t[s],i[s],n,o):(a[s]=i[s],r++);else if(null!=i[s])if(e){var l={};l[e]={},l[e][s]=i[s],this.attr(l)}else this.attr(s,i[s]);return 0<r&&this.animate(e,!1).when(null==n?500:n,a).delay(o||0),this}};var qt=function(e){Ze.call(this,e),Me.call(this,e),Yt.call(this,e),this.id=e.id||n()};qt.prototype={type:"element",name:"",__zr:null,ignore:!1,clipPath:null,isGroup:!1,drift:function(e,t){switch(this.draggable){case"horizontal":t=0;break;case"vertical":e=0}var i=this.transform;i||(i=this.transform=[1,0,0,1,0,0]),i[4]+=e,i[5]+=t,this.decomposeTransform(),this.dirty(!1)},beforeUpdate:function(){},afterUpdate:function(){},update:function(){this.updateTransform()},traverse:function(e,t){},attrKV:function(e,t){if("position"===e||"scale"===e||"origin"===e){if(t){var i=this[e];i||(i=this[e]=[]),i[0]=t[0],i[1]=t[1]}}else this[e]=t},hide:function(){this.ignore=!0,this.__zr&&this.__zr.refresh()},show:function(){this.ignore=!1,this.__zr&&this.__zr.refresh()},attr:function(e,t){if("string"==typeof e)this.attrKV(e,t);else if(B(e))for(var i in e)e.hasOwnProperty(i)&&this.attrKV(i,e[i]);return this.dirty(!1),this},setClipPath:function(e){var t=this.__zr;t&&e.addSelfToZr(t),this.clipPath&&this.clipPath!==e&&this.removeClipPath(),(this.clipPath=e).__zr=t,(e.__clipTarget=this).dirty(!1)},removeClipPath:function(){var e=this.clipPath;e&&(e.__zr&&e.removeSelfFromZr(e.__zr),e.__zr=null,e.__clipTarget=null,this.clipPath=null,this.dirty(!1))},addSelfToZr:function(e){this.__zr=e;var t=this.animators;if(t)for(var i=0;i<t.length;i++)e.animation.addAnimator(t[i]);this.clipPath&&this.clipPath.addSelfToZr(e)},removeSelfFromZr:function(e){this.__zr=null;var t=this.animators;if(t)for(var i=0;i<t.length;i++)e.animation.removeAnimator(t[i]);this.clipPath&&this.clipPath.removeSelfFromZr(e)}},C(qt,Yt),C(qt,Ze),C(qt,Me);var Zt,Xt,Kt,Jt,Qt=Ce,ei=Math.min,ti=Math.max;function ii(e,t,i,n){i<0&&(e+=i,i=-i),n<0&&(t+=n,n=-n),this.x=e,this.y=t,this.width=i,this.height=n}ii.prototype={constructor:ii,union:function(e){var t=ei(e.x,this.x),i=ei(e.y,this.y);this.width=ti(e.x+e.width,this.x+this.width)-t,this.height=ti(e.y+e.height,this.y+this.height)-i,this.x=t,this.y=i},applyTransform:(Zt=[],Xt=[],Kt=[],Jt=[],function(e){if(e){Zt[0]=Kt[0]=this.x,Zt[1]=Jt[1]=this.y,Xt[0]=Jt[0]=this.x+this.width,Xt[1]=Kt[1]=this.y+this.height,Qt(Zt,Zt,e),Qt(Xt,Xt,e),Qt(Kt,Kt,e),Qt(Jt,Jt,e),this.x=ei(Zt[0],Xt[0],Kt[0],Jt[0]),this.y=ei(Zt[1],Xt[1],Kt[1],Jt[1]);var t=ti(Zt[0],Xt[0],Kt[0],Jt[0]),i=ti(Zt[1],Xt[1],Kt[1],Jt[1]);this.width=t-this.x,this.height=i-this.y}}),calculateTransform:function(e){var t=e.width/this.width,i=e.height/this.height,n=Oe();return He(n,n,[-this.x,-this.y]),je(n,n,[t,i]),He(n,n,[e.x,e.y]),n},intersect:function(e){if(!e)return!1;e instanceof ii||(e=ii.create(e));var t=this.x,i=this.x+this.width,n=this.y,o=this.y+this.height,a=e.x,r=e.x+e.width,s=e.y,l=e.y+e.height;return!(i<a||r<t||o<s||l<n)},contain:function(e,t){return e>=this.x&&e<=this.x+this.width&&t>=this.y&&t<=this.y+this.height},clone:function(){return new ii(this.x,this.y,this.width,this.height)},copy:function(e){this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height},plain:function(){return{x:this.x,y:this.y,width:this.width,height:this.height}}},ii.create=function(e){return new ii(e.x,e.y,e.width,e.height)};var ni=function(e){for(var t in e=e||{},qt.call(this,e),e)e.hasOwnProperty(t)&&(this[t]=e[t]);this._children=[],this.__storage=null,this.__dirty=!0};ni.prototype={constructor:ni,isGroup:!0,type:"group",silent:!1,children:function(){return this._children.slice()},childAt:function(e){return this._children[e]},childOfName:function(e){for(var t=this._children,i=0;i<t.length;i++)if(t[i].name===e)return t[i]},childCount:function(){return this._children.length},add:function(e){return e&&e!==this&&e.parent!==this&&(this._children.push(e),this._doAdd(e)),this},addBefore:function(e,t){if(e&&e!==this&&e.parent!==this&&t&&t.parent===this){var i=this._children,n=i.indexOf(t);0<=n&&(i.splice(n,0,e),this._doAdd(e))}return this},_doAdd:function(e){e.parent&&e.parent.remove(e);var t=(e.parent=this).__storage,i=this.__zr;t&&t!==e.__storage&&(t.addToStorage(e),e instanceof ni&&e.addChildrenToStorage(t)),i&&i.refresh()},remove:function(e){var t=this.__zr,i=this.__storage,n=this._children,o=w(n,e);return o<0||(n.splice(o,1),e.parent=null,i&&(i.delFromStorage(e),e instanceof ni&&e.delChildrenFromStorage(i)),t&&t.refresh()),this},removeAll:function(){var e,t,i=this._children,n=this.__storage;for(t=0;t<i.length;t++)e=i[t],n&&(n.delFromStorage(e),e instanceof ni&&e.delChildrenFromStorage(n)),e.parent=null;return i.length=0,this},eachChild:function(e,t){for(var i=this._children,n=0;n<i.length;n++){var o=i[n];e.call(t,o,n)}return this},traverse:function(e,t){for(var i=0;i<this._children.length;i++){var n=this._children[i];e.call(t,n),"group"===n.type&&n.traverse(e,t)}return this},addChildrenToStorage:function(e){for(var t=0;t<this._children.length;t++){var i=this._children[t];e.addToStorage(i),i instanceof ni&&i.addChildrenToStorage(e)}},delChildrenFromStorage:function(e){for(var t=0;t<this._children.length;t++){var i=this._children[t];e.delFromStorage(i),i instanceof ni&&i.delChildrenFromStorage(e)}},dirty:function(){return this.__dirty=!0,this.__zr&&this.__zr.refresh(),this},getBoundingRect:function(e){for(var t=null,i=new ii(0,0,0,0),n=e||this._children,o=[],a=0;a<n.length;a++){var r=n[a];if(!r.ignore&&!r.invisible){var s=r.getBoundingRect(),l=r.getLocalTransform(o);l?(i.copy(s),i.applyTransform(l),(t=t||i.clone()).union(i)):(t=t||s.clone()).union(s)}}return t||i}},_(ni,qt);var oi=32,ai=7;function ri(e,t,i,n){var o=t+1;if(o===i)return 1;if(n(e[o++],e[t])<0){for(;o<i&&n(e[o],e[o-1])<0;)o++;!function(e,t,i){i--;for(;t<i;){var n=e[t];e[t++]=e[i],e[i--]=n}}(e,t,o)}else for(;o<i&&0<=n(e[o],e[o-1]);)o++;return o-t}function si(e,t,i,n,o){for(n===t&&n++;n<i;n++){for(var a,r=e[n],s=t,l=n;s<l;)o(r,e[a=s+l>>>1])<0?l=a:s=a+1;var d=n-s;switch(d){case 3:e[s+3]=e[s+2];case 2:e[s+2]=e[s+1];case 1:e[s+1]=e[s];break;default:for(;0<d;)e[s+d]=e[s+d-1],d--}e[s]=r}}function li(e,t,i,n,o,a){var r=0,s=0,l=1;if(0<a(e,t[i+o])){for(s=n-o;l<s&&0<a(e,t[i+o+l]);)(l=1+((r=l)<<1))<=0&&(l=s);s<l&&(l=s),r+=o,l+=o}else{for(s=o+1;l<s&&a(e,t[i+o-l])<=0;)(l=1+((r=l)<<1))<=0&&(l=s);s<l&&(l=s);var d=r;r=o-l,l=o-d}for(r++;r<l;){var c=r+(l-r>>>1);0<a(e,t[i+c])?r=c+1:l=c}return l}function di(e,t,i,n,o,a){var r=0,s=0,l=1;if(a(e,t[i+o])<0){for(s=o+1;l<s&&a(e,t[i+o-l])<0;)(l=1+((r=l)<<1))<=0&&(l=s);s<l&&(l=s);var d=r;r=o-l,l=o-d}else{for(s=n-o;l<s&&0<=a(e,t[i+o+l]);)(l=1+((r=l)<<1))<=0&&(l=s);s<l&&(l=s),r+=o,l+=o}for(r++;r<l;){var c=r+(l-r>>>1);a(e,t[i+c])<0?l=c:r=c+1}return l}function ci(p,m){var r,s,g=ai,l=0,v=[];function t(e){var t=r[e],i=s[e],n=r[e+1],o=s[e+1];s[e]=i+o,e===l-3&&(r[e+1]=r[e+2],s[e+1]=s[e+2]),l--;var a=di(p[n],p,t,i,0,m);t+=a,0!==(i-=a)&&0!==(o=li(p[t+i-1],p,n,o,o-1,m))&&(i<=o?function(e,t,i,n){var o=0;for(o=0;o<t;o++)v[o]=p[e+o];var a=0,r=i,s=e;if(p[s++]=p[r++],0==--n){for(o=0;o<t;o++)p[s+o]=v[a+o];return}if(1===t){for(o=0;o<n;o++)p[s+o]=p[r+o];return p[s+n]=v[a]}var l,d,c,u=g;for(;;){d=l=0,c=!1;do{if(m(p[r],v[a])<0){if(p[s++]=p[r++],d++,(l=0)==--n){c=!0;break}}else if(p[s++]=v[a++],l++,d=0,1==--t){c=!0;break}}while((l|d)<u);if(c)break;do{if(0!==(l=di(p[r],v,a,t,0,m))){for(o=0;o<l;o++)p[s+o]=v[a+o];if(s+=l,a+=l,(t-=l)<=1){c=!0;break}}if(p[s++]=p[r++],0==--n){c=!0;break}if(0!==(d=li(v[a],p,r,n,0,m))){for(o=0;o<d;o++)p[s+o]=p[r+o];if(s+=d,r+=d,0===(n-=d)){c=!0;break}}if(p[s++]=v[a++],1==--t){c=!0;break}u--}while(ai<=l||ai<=d);if(c)break;u<0&&(u=0),u+=2}if((g=u)<1&&(g=1),1===t){for(o=0;o<n;o++)p[s+o]=p[r+o];p[s+n]=v[a]}else{if(0===t)throw new Error;for(o=0;o<t;o++)p[s+o]=v[a+o]}}(t,i,n,o):function(e,t,i,n){var o=0;for(o=0;o<n;o++)v[o]=p[i+o];var a=e+t-1,r=n-1,s=i+n-1,l=0,d=0;if(p[s--]=p[a--],0==--t){for(l=s-(n-1),o=0;o<n;o++)p[l+o]=v[o];return}if(1===n){for(d=(s-=t)+1,l=(a-=t)+1,o=t-1;0<=o;o--)p[d+o]=p[l+o];return p[s]=v[r]}var c=g;for(;;){var u=0,h=0,f=!1;do{if(m(v[r],p[a])<0){if(p[s--]=p[a--],u++,(h=0)==--t){f=!0;break}}else if(p[s--]=v[r--],h++,u=0,1==--n){f=!0;break}}while((u|h)<c);if(f)break;do{if(0!==(u=t-di(v[r],p,e,t,t-1,m))){for(t-=u,d=(s-=u)+1,l=(a-=u)+1,o=u-1;0<=o;o--)p[d+o]=p[l+o];if(0===t){f=!0;break}}if(p[s--]=v[r--],1==--n){f=!0;break}if(0!==(h=n-li(p[a],v,0,n,n-1,m))){for(n-=h,d=(s-=h)+1,l=(r-=h)+1,o=0;o<h;o++)p[d+o]=v[l+o];if(n<=1){f=!0;break}}if(p[s--]=p[a--],0==--t){f=!0;break}c--}while(ai<=u||ai<=h);if(f)break;c<0&&(c=0),c+=2}(g=c)<1&&(g=1);if(1===n){for(d=(s-=t)+1,l=(a-=t)+1,o=t-1;0<=o;o--)p[d+o]=p[l+o];p[s]=v[r]}else{if(0===n)throw new Error;for(l=s-(n-1),o=0;o<n;o++)p[l+o]=v[o]}}(t,i,n,o))}r=[],s=[],this.mergeRuns=function(){for(;1<l;){var e=l-2;if(1<=e&&s[e-1]<=s[e]+s[e+1]||2<=e&&s[e-2]<=s[e]+s[e-1])s[e-1]<s[e+1]&&e--;else if(s[e]>s[e+1])break;t(e)}},this.forceMergeRuns=function(){for(;1<l;){var e=l-2;0<e&&s[e-1]<s[e+1]&&e--,t(e)}},this.pushRun=function(e,t){r[l]=e,s[l]=t,l+=1}}function ui(e,t,i,n){i||(i=0),n||(n=e.length);var o=n-i;if(!(o<2)){var a=0;if(o<oi)si(e,i,n,i+(a=ri(e,i,n,t)),t);else{var r=new ci(e,t),s=function(e){for(var t=0;oi<=e;)t|=1&e,e>>=1;return e+t}(o);do{if((a=ri(e,i,n,t))<s){var l=o;s<l&&(l=s),si(e,i,i+l,i+a,t),a=l}r.pushRun(i,a),r.mergeRuns(),o-=a,i+=a}while(0!==o);r.forceMergeRuns()}}}function hi(e,t){return e.zlevel===t.zlevel?e.z===t.z?e.z2-t.z2:e.z-t.z:e.zlevel-t.zlevel}var fi=function(){this._roots=[],this._displayList=[],this._displayListLen=0};fi.prototype={constructor:fi,traverse:function(e,t){for(var i=0;i<this._roots.length;i++)this._roots[i].traverse(e,t)},getDisplayList:function(e,t){return t=t||!1,e&&this.updateDisplayList(t),this._displayList},updateDisplayList:function(e){this._displayListLen=0;for(var t=this._roots,i=this._displayList,n=0,o=t.length;n<o;n++)this._updateAndAddDisplayable(t[n],null,e);i.length=this._displayListLen,v.canvasSupported&&ui(i,hi)},_updateAndAddDisplayable:function(e,t,i){if(!e.ignore||i){e.beforeUpdate(),e.__dirty&&e.update(),e.afterUpdate();var n=e.clipPath;if(n){t=t?t.slice():[];for(var o=n,a=e;o;)o.parent=a,o.updateTransform(),t.push(o),o=(a=o).clipPath}if(e.isGroup){for(var r=e._children,s=0;s<r.length;s++){var l=r[s];e.__dirty&&(l.__dirty=!0),this._updateAndAddDisplayable(l,t,i)}e.__dirty=!1}else e.__clipPaths=t,this._displayList[this._displayListLen++]=e}},addRoot:function(e){e.__storage!==this&&(e instanceof ni&&e.addChildrenToStorage(this),this.addToStorage(e),this._roots.push(e))},delRoot:function(e){if(null==e){for(var t=0;t<this._roots.length;t++){var i=this._roots[t];i instanceof ni&&i.delChildrenFromStorage(this)}return this._roots=[],this._displayList=[],void(this._displayListLen=0)}if(e instanceof Array){t=0;for(var n=e.length;t<n;t++)this.delRoot(e[t])}else{var o=w(this._roots,e);0<=o&&(this.delFromStorage(e),this._roots.splice(o,1),e instanceof ni&&e.delChildrenFromStorage(this))}},addToStorage:function(e){return e&&(e.__storage=this,e.dirty(!1)),this},delFromStorage:function(e){return e&&(e.__storage=null),this},dispose:function(){this._renderList=this._roots=null},displayableSortFunc:hi};var pi={shadowBlur:1,shadowOffsetX:1,shadowOffsetY:1,textShadowBlur:1,textShadowOffsetX:1,textShadowOffsetY:1,textBoxShadowBlur:1,textBoxShadowOffsetX:1,textBoxShadowOffsetY:1},mi=function(e,t,i){return pi.hasOwnProperty(t)?i*e.dpr:i},gi=[["shadowBlur",0],["shadowOffsetX",0],["shadowOffsetY",0],["shadowColor","#000"],["lineCap","butt"],["lineJoin","miter"],["miterLimit",10]],vi=function(e,t){this.extendFrom(e,!1),this.host=t};function yi(e,t,i){var n=null==t.x?0:t.x,o=null==t.x2?1:t.x2,a=null==t.y?0:t.y,r=null==t.y2?0:t.y2;return t.global||(n=n*i.width+i.x,o=o*i.width+i.x,a=a*i.height+i.y,r=r*i.height+i.y),n=isNaN(n)?0:n,o=isNaN(o)?1:o,a=isNaN(a)?0:a,r=isNaN(r)?0:r,e.createLinearGradient(n,a,o,r)}function bi(e,t,i){var n=i.width,o=i.height,a=Math.min(n,o),r=null==t.x?.5:t.x,s=null==t.y?.5:t.y,l=null==t.r?.5:t.r;return t.global||(r=r*n+i.x,s=s*o+i.y,l*=a),e.createRadialGradient(r,s,0,r,s,l)}vi.prototype={constructor:vi,host:null,fill:"#000",stroke:null,opacity:1,lineDash:null,lineDashOffset:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,lineWidth:1,strokeNoScale:!1,text:null,font:null,textFont:null,fontStyle:null,fontWeight:null,fontSize:null,fontFamily:null,textTag:null,textFill:"#000",textStroke:null,textWidth:null,textHeight:null,textStrokeWidth:0,textLineHeight:null,textPosition:"inside",textRect:null,textOffset:null,textAlign:null,textVerticalAlign:null,textDistance:5,textShadowColor:"transparent",textShadowBlur:0,textShadowOffsetX:0,textShadowOffsetY:0,textBoxShadowColor:"transparent",textBoxShadowBlur:0,textBoxShadowOffsetX:0,textBoxShadowOffsetY:0,transformText:!1,textRotation:0,textOrigin:null,textBackgroundColor:null,textBorderColor:null,textBorderWidth:0,textBorderRadius:0,textPadding:null,rich:null,truncate:null,blend:null,bind:function(e,t,i){for(var n=this,o=i&&i.style,a=!o,r=0;r<gi.length;r++){var s=gi[r],l=s[0];(a||n[l]!==o[l])&&(e[l]=mi(e,l,n[l]||s[1]))}if((a||n.fill!==o.fill)&&(e.fillStyle=n.fill),(a||n.stroke!==o.stroke)&&(e.strokeStyle=n.stroke),(a||n.opacity!==o.opacity)&&(e.globalAlpha=null==n.opacity?1:n.opacity),(a||n.blend!==o.blend)&&(e.globalCompositeOperation=n.blend||"source-over"),this.hasStroke()){var d=n.lineWidth;e.lineWidth=d/(this.strokeNoScale&&t&&t.getLineScale?t.getLineScale():1)}},hasFill:function(){var e=this.fill;return null!=e&&"none"!==e},hasStroke:function(){var e=this.stroke;return null!=e&&"none"!==e&&0<this.lineWidth},extendFrom:function(e,t){if(e)for(var i in e)!e.hasOwnProperty(i)||!0!==t&&(!1===t?this.hasOwnProperty(i):null==e[i])||(this[i]=e[i])},set:function(e,t){"string"==typeof e?this[e]=t:this.extendFrom(e,!0)},clone:function(){var e=new this.constructor;return e.extendFrom(this,!0),e},getGradient:function(e,t,i){for(var n=("radial"===t.type?bi:yi)(e,t,i),o=t.colorStops,a=0;a<o.length;a++)n.addColorStop(o[a].offset,o[a].color);return n}};for(var xi=vi.prototype,wi=0;wi<gi.length;wi++){var _i=gi[wi];_i[0]in xi||(xi[_i[0]]=_i[1])}vi.getGradient=xi.getGradient;var Ci=function(e,t){this.image=e,this.repeat=t,this.type="pattern"};function Si(){return!1}function Ti(e,t,i){var n=b(),o=t.getWidth(),a=t.getHeight(),r=n.style;return r&&(r.position="absolute",r.left=0,r.top=0,r.width=o+"px",r.height=a+"px",n.setAttribute("data-zr-dom-id",e)),n.width=o*i,n.height=a*i,n}var ki=function(e,t,i){var n;i=i||Wt,"string"==typeof e?n=Ti(e,t,i):B(e)&&(e=(n=e).id),this.id=e;var o=(this.dom=n).style;o&&(n.onselectstart=Si,o["-webkit-user-select"]="none",o["user-select"]="none",o["-webkit-touch-callout"]="none",o["-webkit-tap-highlight-color"]="rgba(0,0,0,0)",o.padding=0,o.margin=0,o["border-width"]=0),this.domBack=null,this.ctxBack=null,this.painter=t,this.config=null,this.clearColor=0,this.motionBlur=!1,this.lastFrameAlpha=.7,this.dpr=i};ki.prototype={constructor:ki,__dirty:!0,__used:!(Ci.prototype.getCanvasPattern=function(e){return e.createPattern(this.image,this.repeat||"repeat")}),__drawIndex:0,__startIndex:0,__endIndex:0,incremental:!1,getElementCount:function(){return this.__endIndex-this.__startIndex},initContext:function(){this.ctx=this.dom.getContext("2d"),this.ctx.dpr=this.dpr},createBackBuffer:function(){var e=this.dpr;this.domBack=Ti("back-"+this.id,this.painter,e),this.ctxBack=this.domBack.getContext("2d"),1!=e&&this.ctxBack.scale(e,e)},resize:function(e,t){var i=this.dpr,n=this.dom,o=n.style,a=this.domBack;o&&(o.width=e+"px",o.height=t+"px"),n.width=e*i,n.height=t*i,a&&(a.width=e*i,a.height=t*i,1!=i&&this.ctxBack.scale(i,i))},clear:function(e,t){var i,n=this.dom,o=this.ctx,a=n.width,r=n.height,s=(t=t||this.clearColor,this.motionBlur&&!e),l=this.lastFrameAlpha,d=this.dpr;(s&&(this.domBack||this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(n,0,0,a/d,r/d)),o.clearRect(0,0,a,r),t&&"transparent"!==t)&&(t.colorStops?(i=t.__canvasGradient||vi.getGradient(o,t,{x:0,y:0,width:a,height:r}),t.__canvasGradient=i):t.image&&(i=Ci.prototype.getCanvasPattern.call(t,o)),o.save(),o.fillStyle=i||t,o.fillRect(0,0,a,r),o.restore());if(s){var c=this.domBack;o.save(),o.globalAlpha=l,o.drawImage(c,0,0,a,r),o.restore()}}};var Ii="undefined"!=typeof window&&(window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.msRequestAnimationFrame&&window.msRequestAnimationFrame.bind(window)||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame)||function(e){setTimeout(e,16)},Ni=new nt(50);function Ei(e){if("string"!=typeof e)return e;var t=Ni.get(e);return t&&t.image}function Mi(e,t,i,n,o){if(e){if("string"!=typeof e)return e;if(t&&t.__zrImageSrc===e||!i)return t;var a=Ni.get(e),r={hostEl:i,cb:n,cbPayload:o};return a?!Ai(t=a.image)&&a.pending.push(r):(!t&&(t=new Image),t.onload=Di,Ni.put(e,t.__cachedImgObj={image:t,pending:[r]}),t.src=t.__zrImageSrc=e),t}return t}function Di(){var e=this.__cachedImgObj;this.onload=this.__cachedImgObj=null;for(var t=0;t<e.pending.length;t++){var i=e.pending[t],n=i.cb;n&&n(this,i.cbPayload),i.hostEl.dirty()}e.pending.length=0}function Ai(e){return e&&e.width&&e.height}var Li={},Pi=0,Ri=5e3,Ui=/\{([a-zA-Z0-9_]+)\|([^}]*)\}/g,Oi="12px sans-serif",Bi={};function zi(e,t){var i=e+":"+(t=t||Oi);if(Li[i])return Li[i];for(var n,o,a=(e+"").split("\n"),r=0,s=0,l=a.length;s<l;s++)r=Math.max((n=a[s],o=t,Bi.measureText(n,o)).width,r);return Ri<Pi&&(Pi=0,Li={}),Pi++,Li[i]=r}function Fi(e,t,i,n,o,a,r){return a?(l=n,d=Xi(e,{rich:a,truncate:r,font:t,textAlign:s=i,textPadding:o}),c=d.outerWidth,u=d.outerHeight,h=Hi(0,c,s),f=Vi(0,u,l),new ii(h,f,c,u)):function(e,t,i,n,o,a){var r=Zi(e,t,o,a),s=zi(e,t);o&&(s+=o[1]+o[3]);var l=r.outerHeight,d=Hi(0,s,i),c=Vi(0,l,n),u=new ii(d,c,s,l);return u.lineHeight=r.lineHeight,u}(e,t,i,n,o,r);var s,l,d,c,u,h,f}function Hi(e,t,i){return"right"===i?e-=t:"center"===i&&(e-=t/2),e}function Vi(e,t,i){return"middle"===i?e-=t/2:"bottom"===i&&(e-=t),e}function ji(e,t,i){var n=t.x,o=t.y,a=t.height,r=t.width,s=a/2,l="left",d="top";switch(e){case"left":n-=i,o+=s,l="right",d="middle";break;case"right":n+=i+r,o+=s,d="middle";break;case"top":n+=r/2,o-=i,l="center",d="bottom";break;case"bottom":n+=r/2,o+=a+i,l="center";break;case"inside":n+=r/2,o+=s,l="center",d="middle";break;case"insideLeft":n+=i,o+=s,d="middle";break;case"insideRight":n+=r-i,o+=s,l="right",d="middle";break;case"insideTop":n+=r/2,o+=i,l="center";break;case"insideBottom":n+=r/2,o+=a-i,l="center",d="bottom";break;case"insideTopLeft":n+=i,o+=i;break;case"insideTopRight":n+=r-i,o+=i,l="right";break;case"insideBottomLeft":n+=i,o+=a-i,d="bottom";break;case"insideBottomRight":n+=r-i,o+=a-i,l="right",d="bottom"}return{x:n,y:o,textAlign:l,textVerticalAlign:d}}function Wi(e,t,i,n,o){if(!t)return"";var a=(e+"").split("\n");o=$i(t,i,n,o);for(var r=0,s=a.length;r<s;r++)a[r]=Gi(a[r],o);return a.join("\n")}function $i(e,t,i,n){(n=D({},n)).font=t;i=W(i,"...");n.maxIterations=W(n.maxIterations,2);var o=n.minChar=W(n.minChar,0);n.cnCharWidth=zi("国",t);var a=n.ascCharWidth=zi("a",t);n.placeholder=W(n.placeholder,"");for(var r=e=Math.max(0,e-1),s=0;s<o&&a<=r;s++)r-=a;var l=zi(i);return r<l&&(i="",l=0),r=e-l,n.ellipsis=i,n.ellipsisWidth=l,n.contentWidth=r,n.containerWidth=e,n}function Gi(e,t){var i=t.containerWidth,n=t.font,o=t.contentWidth;if(!i)return"";var a=zi(e,n);if(a<=i)return e;for(var r=0;;r++){if(a<=o||r>=t.maxIterations){e+=t.ellipsis;break}var s=0===r?Yi(e,o,t.ascCharWidth,t.cnCharWidth):0<a?Math.floor(e.length*o/a):0;a=zi(e=e.substr(0,s),n)}return""===e&&(e=t.placeholder),e}function Yi(e,t,i,n){for(var o=0,a=0,r=e.length;a<r&&o<t;a++){var s=e.charCodeAt(a);o+=0<=s&&s<=127?i:n}return a}function qi(e){return zi("国",e)}function Zi(e,t,i,n){null!=e&&(e+="");var o=qi(t),a=e?e.split("\n"):[],r=a.length*o,s=r;if(i&&(s+=i[0]+i[2]),e&&n){var l=n.outerHeight,d=n.outerWidth;if(null!=l&&l<s)e="",a=[];else if(null!=d)for(var c=$i(d-(i?i[1]+i[3]:0),t,n.ellipsis,{minChar:n.minChar,placeholder:n.placeholder}),u=0,h=a.length;u<h;u++)a[u]=Gi(a[u],c)}return{lines:a,height:r,outerHeight:s,lineHeight:o}}function Xi(e,t){var i={lines:[],width:0,height:0};if(null!=e&&(e+=""),!e)return i;for(var n,o=Ui.lastIndex=0;null!=(n=Ui.exec(e));){var a=n.index;o<a&&Ki(i,e.substring(o,a)),Ki(i,n[2],n[1]),o=Ui.lastIndex}o<e.length&&Ki(i,e.substring(o,e.length));var r=i.lines,s=0,l=0,d=[],c=t.textPadding,u=t.truncate,h=u&&u.outerWidth,f=u&&u.outerHeight;c&&(null!=h&&(h-=c[1]+c[3]),null!=f&&(f-=c[0]+c[2]));for(var p=0;p<r.length;p++){for(var m=r[p],g=0,v=0,y=0;y<m.tokens.length;y++){var b=(E=m.tokens[y]).styleName&&t.rich[E.styleName]||{},x=E.textPadding=b.textPadding,w=E.font=b.font||t.font,_=E.textHeight=W(b.textHeight,qi(w));if(x&&(_+=x[0]+x[2]),E.height=_,E.lineHeight=$(b.textLineHeight,t.textLineHeight,_),E.textAlign=b&&b.textAlign||t.textAlign,E.textVerticalAlign=b&&b.textVerticalAlign||"middle",null!=f&&s+E.lineHeight>f)return{lines:[],width:0,height:0};E.textWidth=zi(E.text,w);var C=b.textWidth,S=null==C||"auto"===C;if("string"==typeof C&&"%"===C.charAt(C.length-1))E.percentWidth=C,d.push(E),C=0;else{if(S){C=E.textWidth;var T=b.textBackgroundColor,k=T&&T.image;k&&Ai(k=Ei(k))&&(C=Math.max(C,k.width*_/k.height))}var I=x?x[1]+x[3]:0;C+=I;var N=null!=h?h-v:null;null!=N&&N<C&&(!S||N<I?(E.text="",E.textWidth=C=0):(E.text=Wi(E.text,N-I,w,u.ellipsis,{minChar:u.minChar}),E.textWidth=zi(E.text,w),C=E.textWidth+I))}v+=E.width=C,b&&(g=Math.max(g,E.lineHeight))}m.width=v,s+=m.lineHeight=g,l=Math.max(l,v)}i.outerWidth=i.width=W(t.textWidth,l),i.outerHeight=i.height=W(t.textHeight,s),c&&(i.outerWidth+=c[1]+c[3],i.outerHeight+=c[0]+c[2]);for(p=0;p<d.length;p++){var E,M=(E=d[p]).percentWidth;E.width=parseInt(M,10)/100*l}return i}function Ki(e,t,i){for(var n=""===t,o=t.split("\n"),a=e.lines,r=0;r<o.length;r++){var s=o[r],l={styleName:i,text:s,isLineHolder:!s&&!n};if(r)a.push({tokens:[l]});else{var d=(a[a.length-1]||(a[0]={tokens:[]})).tokens,c=d.length;1===c&&d[0].isLineHolder?d[0]=l:(s||!c||n)&&d.push(l)}}}function Ji(e){var t=(e.fontSize||e.fontFamily)&&[e.fontStyle,e.fontWeight,(e.fontSize||12)+"px",e.fontFamily||"sans-serif"].join(" ");return t&&Z(t)||e.textFont||e.font}function Qi(e,t){var i,n,o,a,r,s=t.x,l=t.y,d=t.width,c=t.height,u=t.r;d<0&&(s+=d,d=-d),c<0&&(l+=c,c=-c),"number"==typeof u?i=n=o=a=u:u instanceof Array?1===u.length?i=n=o=a=u[0]:2===u.length?(i=o=u[0],n=a=u[1]):3===u.length?(i=u[0],n=a=u[1],o=u[2]):(i=u[0],n=u[1],o=u[2],a=u[3]):i=n=o=a=0,d<i+n&&(i*=d/(r=i+n),n*=d/r),d<o+a&&(o*=d/(r=o+a),a*=d/r),c<n+o&&(n*=c/(r=n+o),o*=c/r),c<i+a&&(i*=c/(r=i+a),a*=c/r),e.moveTo(s+i,l),e.lineTo(s+d-n,l),0!==n&&e.arc(s+d-n,l+n,n,-Math.PI/2,0),e.lineTo(s+d,l+c-o),0!==o&&e.arc(s+d-o,l+c-o,o,0,Math.PI/2),e.lineTo(s+a,l+c),0!==a&&e.arc(s+a,l+c-a,a,Math.PI/2,Math.PI),e.lineTo(s,l+i),0!==i&&e.arc(s+i,l+i,i,Math.PI,1.5*Math.PI)}Bi.measureText=function(e,t){var i=x();return i.font=t||Oi,i.measureText(e)};var en={left:1,right:1,center:1},tn={top:1,bottom:1,middle:1};function nn(e){return on(e),O(e.rich,on),e}function on(e){if(e){e.font=Ji(e);var t=e.textAlign;"middle"===t&&(t="center"),e.textAlign=null==t||en[t]?t:"left";var i=e.textVerticalAlign||e.textBaseline;"center"===i&&(i="middle"),e.textVerticalAlign=null==i||tn[i]?i:"top",e.textPadding&&(e.textPadding=Y(e.textPadding))}}function an(e,t,i,n,o){n.rich?function(e,t,i,n,o){var a=e.__textCotentBlock;a&&!e.__dirty||(a=e.__textCotentBlock=Xi(i,n));!function(e,t,i,n,o){var a=i.width,r=i.outerWidth,s=i.outerHeight,l=n.textPadding,d=un(s,n,o),c=d.baseX,u=d.baseY,h=d.textAlign,f=d.textVerticalAlign;rn(t,n,o,c,u);var p=Hi(c,r,h),m=Vi(u,s,f),g=p,v=m;l&&(g+=l[3],v+=l[0]);var y=g+a;ln(n)&&dn(e,t,n,p,m,r,s);for(var b=0;b<i.lines.length;b++){for(var x,w=i.lines[b],_=w.tokens,C=_.length,S=w.lineHeight,T=w.width,k=0,I=g,N=y,E=C-1;k<C&&(!(x=_[k]).textAlign||"left"===x.textAlign);)sn(e,t,x,n,S,v,I,"left"),T-=x.width,I+=x.width,k++;for(;0<=E&&"right"===(x=_[E]).textAlign;)sn(e,t,x,n,S,v,N,"right"),T-=x.width,N-=x.width,E--;for(I+=(a-(I-g)-(y-N)-T)/2;k<=E;)x=_[k],sn(e,t,x,n,S,v,I+x.width/2,"center"),I+=x.width,k++;v+=S}}(e,t,a,n,o)}(e,t,i,n,o):function(e,t,i,n,o){var a=hn(t,"font",n.font||Oi),r=n.textPadding,s=e.__textCotentBlock;s&&!e.__dirty||(s=e.__textCotentBlock=Zi(i,a,r,n.truncate));var l=s.outerHeight,d=s.lines,c=s.lineHeight,u=un(l,n,o),h=u.baseX,f=u.baseY,p=u.textAlign,m=u.textVerticalAlign;rn(t,n,o,h,f);var g=Vi(f,l,m),v=h,y=g,b=ln(n);if(b||r){var x=zi(i,a),w=x;r&&(w+=r[1]+r[3]);var _=Hi(h,w,p);b&&dn(e,t,n,_,g,w,l),r&&(v=gn(h,p,r),y+=r[0])}hn(t,"textAlign",p||"left"),hn(t,"textBaseline","middle"),hn(t,"shadowBlur",n.textShadowBlur||0),hn(t,"shadowColor",n.textShadowColor||"transparent"),hn(t,"shadowOffsetX",n.textShadowOffsetX||0),hn(t,"shadowOffsetY",n.textShadowOffsetY||0),y+=c/2;var C=n.textStrokeWidth,S=fn(n.textStroke,C),T=pn(n.textFill);S&&(hn(t,"lineWidth",C),hn(t,"strokeStyle",S));T&&hn(t,"fillStyle",T);for(var k=0;k<d.length;k++)S&&t.strokeText(d[k],v,y),T&&t.fillText(d[k],v,y),y+=c}(e,t,i,n,o)}function rn(e,t,i,n,o){if(i&&t.textRotation){var a=t.textOrigin;"center"===a?(n=i.width/2+i.x,o=i.height/2+i.y):a&&(n=a[0]+i.x,o=a[1]+i.y),e.translate(n,o),e.rotate(-t.textRotation),e.translate(-n,-o)}}function sn(e,t,i,n,o,a,r,s){var l=n.rich[i.styleName]||{},d=i.textVerticalAlign,c=a+o/2;"top"===d?c=a+i.height/2:"bottom"===d&&(c=a+o-i.height/2),!i.isLineHolder&&ln(l)&&dn(e,t,l,"right"===s?r-i.width:"center"===s?r-i.width/2:r,c-i.height/2,i.width,i.height);var u=i.textPadding;u&&(r=gn(r,s,u),c-=i.height/2-u[2]-i.textHeight/2),hn(t,"shadowBlur",$(l.textShadowBlur,n.textShadowBlur,0)),hn(t,"shadowColor",l.textShadowColor||n.textShadowColor||"transparent"),hn(t,"shadowOffsetX",$(l.textShadowOffsetX,n.textShadowOffsetX,0)),hn(t,"shadowOffsetY",$(l.textShadowOffsetY,n.textShadowOffsetY,0)),hn(t,"textAlign",s),hn(t,"textBaseline","middle"),hn(t,"font",i.font||Oi);var h=fn(l.textStroke||n.textStroke,p),f=pn(l.textFill||n.textFill),p=W(l.textStrokeWidth,n.textStrokeWidth);h&&(hn(t,"lineWidth",p),hn(t,"strokeStyle",h),t.strokeText(i.text,r,c)),f&&(hn(t,"fillStyle",f),t.fillText(i.text,r,c))}function ln(e){return e.textBackgroundColor||e.textBorderWidth&&e.textBorderColor}function dn(e,t,i,n,o,a,r){var s=i.textBackgroundColor,l=i.textBorderWidth,d=i.textBorderColor,c=U(s);if(hn(t,"shadowBlur",i.textBoxShadowBlur||0),hn(t,"shadowColor",i.textBoxShadowColor||"transparent"),hn(t,"shadowOffsetX",i.textBoxShadowOffsetX||0),hn(t,"shadowOffsetY",i.textBoxShadowOffsetY||0),c||l&&d){t.beginPath();var u=i.textBorderRadius;u?Qi(t,{x:n,y:o,width:a,height:r,r:u}):t.rect(n,o,a,r),t.closePath()}if(c)hn(t,"fillStyle",s),t.fill();else if(B(s)){var h=s.image;(h=Mi(h,null,e,cn,s))&&Ai(h)&&t.drawImage(h,n,o,a,r)}l&&d&&(hn(t,"lineWidth",l),hn(t,"strokeStyle",d),t.stroke())}function cn(e,t){t.image=e}function un(e,t,i){var n=t.x||0,o=t.y||0,a=t.textAlign,r=t.textVerticalAlign;if(i){var s=t.textPosition;if(s instanceof Array)n=i.x+mn(s[0],i.width),o=i.y+mn(s[1],i.height);else{var l=ji(s,i,t.textDistance);n=l.x,o=l.y,a=a||l.textAlign,r=r||l.textVerticalAlign}var d=t.textOffset;d&&(n+=d[0],o+=d[1])}return{baseX:n,baseY:o,textAlign:a,textVerticalAlign:r}}function hn(e,t,i){return e[t]=mi(e,t,i),e[t]}function fn(e,t){return null==e||t<=0||"transparent"===e||"none"===e?null:e.image||e.colorStops?"#000":e}function pn(e){return null==e||"none"===e?null:e.image||e.colorStops?"#000":e}function mn(e,t){return"string"==typeof e?0<=e.lastIndexOf("%")?parseFloat(e)/100*t:parseFloat(e):e}function gn(e,t,i){return"right"===t?e-i[1]:"center"===t?e+i[3]/2-i[1]/2:e+i[3]}function vn(e,t){return null!=e&&(e||t.textBackgroundColor||t.textBorderWidth&&t.textBorderColor||t.textPadding)}var yn=new ii,bn=function(){};function xn(e){for(var t in e=e||{},qt.call(this,e),e)e.hasOwnProperty(t)&&"style"!==t&&(this[t]=e[t]);this.style=new vi(e.style,this),this._rect=null,this.__clipPaths=[]}function wn(e){xn.call(this,e)}xn.prototype={constructor:xn,type:"displayable",__dirty:!0,invisible:!(bn.prototype={constructor:bn,drawRectText:function(e,t){var i=this.style;t=i.textRect||t,this.__dirty&&nn(i);var n=i.text;if(null!=n&&(n+=""),vn(n,i)){e.save();var o=this.transform;i.transformText?this.setTransform(e):o&&(yn.copy(t),yn.applyTransform(o),t=yn),an(this,e,n,i,t),e.restore()}}}),z:0,z2:0,zlevel:0,draggable:!1,dragging:!1,silent:!1,culling:!1,cursor:"pointer",rectHover:!1,progressive:!1,incremental:!1,inplace:!1,beforeBrush:function(e){},afterBrush:function(e){},brush:function(e,t){},getBoundingRect:function(){},contain:function(e,t){return this.rectContain(e,t)},traverse:function(e,t){e.call(t,this)},rectContain:function(e,t){var i=this.transformCoordToLocal(e,t);return this.getBoundingRect().contain(i[0],i[1])},dirty:function(){this.__dirty=!0,this._rect=null,this.__zr&&this.__zr.refresh()},animateStyle:function(e){return this.animate("style",e)},attrKV:function(e,t){"style"!==e?qt.prototype.attrKV.call(this,e,t):this.style.set(t)},setStyle:function(e,t){return this.style.set(e,t),this.dirty(!1),this},useStyle:function(e){return this.style=new vi(e,this),this.dirty(!1),this}},_(xn,qt),C(xn,bn),wn.prototype={constructor:wn,type:"image",brush:function(e,t){var i=this.style,n=i.image;i.bind(e,this,t);var o=this._image=Mi(n,this._image,this,this.onload);if(o&&Ai(o)){var a=i.x||0,r=i.y||0,s=i.width,l=i.height,d=o.width/o.height;if(null==s&&null!=l?s=l*d:null==l&&null!=s?l=s/d:null==s&&null==l&&(s=o.width,l=o.height),this.setTransform(e),i.sWidth&&i.sHeight){var c=i.sx||0,u=i.sy||0;e.drawImage(o,c,u,i.sWidth,i.sHeight,a,r,s,l)}else if(i.sx&&i.sy){var h=s-(c=i.sx),f=l-(u=i.sy);e.drawImage(o,c,u,h,f,a,r,s,l)}else e.drawImage(o,a,r,s,l);null!=i.text&&(this.restoreTransform(e),this.drawRectText(e,this.getBoundingRect()))}},getBoundingRect:function(){var e=this.style;return this._rect||(this._rect=new ii(e.x||0,e.y||0,e.width||0,e.height||0)),this._rect}},_(wn,xn);var _n=314159;function Cn(e){return parseInt(e,10)}var Sn=new ii(0,0,0,0),Tn=new ii(0,0,0,0);var kn=function(e,t,i){this.type="canvas";var n=!e.nodeName||"CANVAS"===e.nodeName.toUpperCase();this._opts=i=D({},i||{}),this.dpr=i.devicePixelRatio||Wt,this._singleCanvas=n;var o=(this.root=e).style;o&&(o["-webkit-tap-highlight-color"]="transparent",o["-webkit-user-select"]=o["user-select"]=o["-webkit-touch-callout"]="none",e.innerHTML=""),this.storage=t;var a,r,s,l=this._zlevelList=[],d=this._layers={};if(this._layerConfig={},this._needsManuallyCompositing=!1,n){var c=e.width,u=e.height;null!=i.width&&(c=i.width),null!=i.height&&(u=i.height),this.dpr=i.devicePixelRatio||1,e.width=c*this.dpr,e.height=u*this.dpr,this._width=c,this._height=u;var h=new ki(e,this,this.dpr);h.__builtin__=!0,h.initContext(),(d[_n]=h).zlevel=_n,l.push(_n),this._domRoot=e}else{this._width=this._getSize(0),this._height=this._getSize(1);var f=this._domRoot=(a=this._width,r=this._height,(s=document.createElement("div")).style.cssText=["position:relative","overflow:hidden","width:"+a+"px","height:"+r+"px","padding:0","margin:0","border-width:0"].join(";")+";",s);e.appendChild(f)}this._hoverlayer=null,this._hoverElements=[]};kn.prototype={constructor:kn,getType:function(){return"canvas"},isSingleCanvas:function(){return this._singleCanvas},getViewportRoot:function(){return this._domRoot},getViewportRootOffset:function(){var e=this.getViewportRoot();if(e)return{offsetLeft:e.offsetLeft||0,offsetTop:e.offsetTop||0}},refresh:function(e){var t=this.storage.getDisplayList(!0),i=this._zlevelList;this._redrawId=Math.random(),this._paintList(t,e,this._redrawId);for(var n=0;n<i.length;n++){var o=i[n],a=this._layers[o];if(!a.__builtin__&&a.refresh){var r=0===n?this._backgroundColor:null;a.refresh(r)}}return this.refreshHover(),this},addHover:function(e,t){if(!e.__hoverMir){var i=new e.constructor({style:e.style,shape:e.shape});((i.__from=e).__hoverMir=i).setStyle(t),this._hoverElements.push(i)}},removeHover:function(e){var t=e.__hoverMir,i=this._hoverElements,n=w(i,t);0<=n&&i.splice(n,1),e.__hoverMir=null},clearHover:function(e){for(var t=this._hoverElements,i=0;i<t.length;i++){var n=t[i].__from;n&&(n.__hoverMir=null)}t.length=0},refreshHover:function(){var e=this._hoverElements,t=e.length,i=this._hoverlayer;if(i&&i.clear(),t){ui(e,this.storage.displayableSortFunc),i||(i=this._hoverlayer=this.getLayer(1e5));var n={};i.ctx.save();for(var o=0;o<t;){var a=e[o],r=a.__from;r&&r.__zr?(o++,r.invisible||(a.transform=r.transform,a.invTransform=r.invTransform,a.__clipPaths=r.__clipPaths,this._doPaintEl(a,i,!0,n))):(e.splice(o,1),r.__hoverMir=null,t--)}i.ctx.restore()}},getHoverLayer:function(){return this.getLayer(1e5)},_paintList:function(e,t,i){if(this._redrawId===i){t=t||!1,this._updateLayerStatus(e);var n=this._doPaintList(e,t);if(this._needsManuallyCompositing&&this._compositeManually(),!n){var o=this;Ii(function(){o._paintList(e,t,i)})}}},_compositeManually:function(){var t=this.getLayer(_n).ctx,i=this._domRoot.width,n=this._domRoot.height;t.clearRect(0,0,i,n),this.eachBuiltinLayer(function(e){e.virtual&&t.drawImage(e.dom,0,0,i,n)})},_doPaintList:function(e,t){for(var i=[],n=0;n<this._zlevelList.length;n++){var o=this._zlevelList[n];(s=this._layers[o]).__builtin__&&s!==this._hoverlayer&&(s.__dirty||t)&&i.push(s)}for(var a=!0,r=0;r<i.length;r++){var s,l=(s=i[r]).ctx,d={};l.save();var c=t?s.__startIndex:s.__drawIndex,u=!t&&s.incremental&&Date.now,h=u&&Date.now(),f=s.zlevel===this._zlevelList[0]?this._backgroundColor:null;if(s.__startIndex===s.__endIndex)s.clear(!1,f);else if(c===s.__startIndex){var p=e[c];p.incremental&&p.notClear&&!t||s.clear(!1,f)}-1===c&&(console.error("For some unknown reason. drawIndex is -1"),c=s.__startIndex);for(var m=c;m<s.__endIndex;m++){var g=e[m];if(this._doPaintEl(g,s,t,d),g.__dirty=!1,u)if(15<Date.now()-h)break}s.__drawIndex=m,s.__drawIndex<s.__endIndex&&(a=!1),d.prevElClipPaths&&l.restore(),l.restore()}return v.wxa&&O(this._layers,function(e){e&&e.ctx&&e.ctx.draw&&e.ctx.draw()}),a},_doPaintEl:function(e,t,i,n){var o,a,r,s=t.ctx,l=e.transform;if((t.__dirty||i)&&!e.invisible&&0!==e.style.opacity&&(!l||l[0]||l[3])&&(!e.culling||(o=e,a=this._width,r=this._height,Sn.copy(o.getBoundingRect()),o.transform&&Sn.applyTransform(o.transform),Tn.width=a,Tn.height=r,Sn.intersect(Tn)))){var d=e.__clipPaths;n.prevElClipPaths&&!function(e,t){if(e==t)return!1;if(!e||!t||e.length!==t.length)return!0;for(var i=0;i<e.length;i++)if(e[i]!==t[i])return!0}(d,n.prevElClipPaths)||(n.prevElClipPaths&&(t.ctx.restore(),n.prevElClipPaths=null,n.prevEl=null),d&&(s.save(),function(e,t){for(var i=0;i<e.length;i++){var n=e[i];n.setTransform(t),t.beginPath(),n.buildPath(t,n.shape),t.clip(),n.restoreTransform(t)}}(d,s),n.prevElClipPaths=d)),e.beforeBrush&&e.beforeBrush(s),e.brush(s,n.prevEl||null),(n.prevEl=e).afterBrush&&e.afterBrush(s)}},getLayer:function(e,t){this._singleCanvas&&!this._needsManuallyCompositing&&(e=_n);var i=this._layers[e];return i||((i=new ki("zr_"+e,this,this.dpr)).zlevel=e,i.__builtin__=!0,this._layerConfig[e]&&m(i,this._layerConfig[e],!0),t&&(i.virtual=t),this.insertLayer(e,i),i.initContext()),i},insertLayer:function(e,t){var i=this._layers,n=this._zlevelList,o=n.length,a=null,r=-1,s=this._domRoot;if(i[e])Gt("ZLevel "+e+" has been used already");else if((l=t)&&(l.__builtin__||"function"==typeof l.resize&&"function"==typeof l.refresh)){var l;if(0<o&&e>n[0]){for(r=0;r<o-1&&!(n[r]<e&&n[r+1]>e);r++);a=i[n[r]]}if(n.splice(r+1,0,e),!(i[e]=t).virtual)if(a){var d=a.dom;d.nextSibling?s.insertBefore(t.dom,d.nextSibling):s.appendChild(t.dom)}else s.firstChild?s.insertBefore(t.dom,s.firstChild):s.appendChild(t.dom)}else Gt("Layer of zlevel "+e+" is not valid")},eachLayer:function(e,t){var i,n,o=this._zlevelList;for(n=0;n<o.length;n++)i=o[n],e.call(t,this._layers[i],i)},eachBuiltinLayer:function(e,t){var i,n,o,a=this._zlevelList;for(o=0;o<a.length;o++)n=a[o],(i=this._layers[n]).__builtin__&&e.call(t,i,n)},eachOtherLayer:function(e,t){var i,n,o,a=this._zlevelList;for(o=0;o<a.length;o++)n=a[o],(i=this._layers[n]).__builtin__||e.call(t,i,n)},getLayers:function(){return this._layers},_updateLayerStatus:function(e){function t(e){n&&(n.__endIndex!==e&&(n.__dirty=!0),n.__endIndex=e)}if(this.eachBuiltinLayer(function(e,t){e.__dirty=e.__used=!1}),this._singleCanvas)for(var i=1;i<e.length;i++){if((a=e[i]).zlevel!==e[i-1].zlevel||a.incremental){this._needsManuallyCompositing=!0;break}}var n=null,o=0;for(i=0;i<e.length;i++){var a,r,s=(a=e[i]).zlevel;a.incremental?((r=this.getLayer(s+.001,this._needsManuallyCompositing)).incremental=!0,o=1):r=this.getLayer(s+(0<o?.01:0),this._needsManuallyCompositing),r.__builtin__||Gt("ZLevel "+s+" has been used by unkown layer "+r.id),r!==n&&(r.__used=!0,r.__startIndex!==i&&(r.__dirty=!0),r.__startIndex=i,r.incremental?r.__drawIndex=-1:r.__drawIndex=i,t(i),n=r),a.__dirty&&(r.__dirty=!0,r.incremental&&r.__drawIndex<0&&(r.__drawIndex=i))}t(i),this.eachBuiltinLayer(function(e,t){!e.__used&&0<e.getElementCount()&&(e.__dirty=!0,e.__startIndex=e.__endIndex=e.__drawIndex=0),e.__dirty&&e.__drawIndex<0&&(e.__drawIndex=e.__startIndex)})},clear:function(){return this.eachBuiltinLayer(this._clearLayer),this},_clearLayer:function(e){e.clear()},setBackgroundColor:function(e){this._backgroundColor=e},configLayer:function(e,t){if(t){var i=this._layerConfig;i[e]?m(i[e],t,!0):i[e]=t;for(var n=0;n<this._zlevelList.length;n++){var o=this._zlevelList[n];if(o===e||o===e+.01)m(this._layers[o],i[e],!0)}}},delLayer:function(e){var t=this._layers,i=this._zlevelList,n=t[e];n&&(n.dom.parentNode.removeChild(n.dom),delete t[e],i.splice(w(i,e),1))},resize:function(t,i){if(this._domRoot.style){var e=this._domRoot;e.style.display="none";var n=this._opts;if(null!=t&&(n.width=t),null!=i&&(n.height=i),t=this._getSize(0),i=this._getSize(1),e.style.display="",this._width!=t||i!=this._height){for(var o in e.style.width=t+"px",e.style.height=i+"px",this._layers)this._layers.hasOwnProperty(o)&&this._layers[o].resize(t,i);O(this._progressiveLayers,function(e){e.resize(t,i)}),this.refresh(!0)}this._width=t,this._height=i}else{if(null==t||null==i)return;this._width=t,this._height=i,this.getLayer(_n).resize(t,i)}return this},clearLayer:function(e){var t=this._layers[e];t&&t.clear()},dispose:function(){this.root.innerHTML="",this.root=this.storage=this._domRoot=this._layers=null},getRenderedCanvas:function(e){if(e=e||{},this._singleCanvas&&!this._compositeManually)return this._layers[_n].dom;var t=new ki("image",this,e.pixelRatio||this.dpr);if(t.initContext(),t.clear(!1,e.backgroundColor||this._backgroundColor),e.pixelRatio<=this.dpr){this.refresh();var i=t.dom.width,n=t.dom.height,o=t.ctx;this.eachLayer(function(e){e.__builtin__?o.drawImage(e.dom,0,0,i,n):e.renderToCanvas&&(t.ctx.save(),e.renderToCanvas(t.ctx),t.ctx.restore())})}else for(var a={},r=this.storage.getDisplayList(!0),s=0;s<r.length;s++){var l=r[s];this._doPaintEl(l,t,!0,a)}return t.dom},getWidth:function(){return this._width},getHeight:function(){return this._height},_getSize:function(e){var t=this._opts,i=["width","height"][e],n=["clientWidth","clientHeight"][e],o=["paddingLeft","paddingTop"][e],a=["paddingRight","paddingBottom"][e];if(null!=t[i]&&"auto"!==t[i])return parseFloat(t[i]);var r=this.root,s=document.defaultView.getComputedStyle(r);return(r[n]||Cn(s[i])||Cn(r.style[i]))-(Cn(s[o])||0)-(Cn(s[a])||0)|0},pathToImage:function(e,t){t=t||this.dpr;var i=document.createElement("canvas"),n=i.getContext("2d"),o=e.getBoundingRect(),a=e.style,r=a.shadowBlur*t,s=a.shadowOffsetX*t,l=a.shadowOffsetY*t,d=a.hasStroke()?a.lineWidth:0,c=Math.max(d/2,-s+r),u=Math.max(d/2,s+r),h=Math.max(d/2,-l+r),f=Math.max(d/2,l+r),p=o.width+c+u,m=o.height+h+f;i.width=p*t,i.height=m*t,n.scale(t,t),n.clearRect(0,0,p,m),n.dpr=t;var g={position:e.position,rotation:e.rotation,scale:e.scale};e.position=[c-o.x,h-o.y],e.rotation=0,e.scale=[1,1],e.updateTransform(),e&&e.brush(n);var v=new wn({style:{x:0,y:0,image:i}});return null!=g.position&&(v.position=e.position=g.position),null!=g.rotation&&(v.rotation=e.rotation=g.rotation),null!=g.scale&&(v.scale=e.scale=g.scale),v}};var In="undefined"!=typeof window&&!!window.addEventListener,Nn=/^(?:mouse|pointer|contextmenu|drag|drop)|click/;function En(e,t,i,n){return i=i||{},n||!v.canvasSupported?Mn(e,t,i):v.browser.firefox&&null!=t.layerX&&t.layerX!==t.offsetX?(i.zrX=t.layerX,i.zrY=t.layerY):null!=t.offsetX?(i.zrX=t.offsetX,i.zrY=t.offsetY):Mn(e,t,i),i}function Mn(e,t,i){var n,o=(n=e).getBoundingClientRect?n.getBoundingClientRect():{left:0,top:0};i.zrX=t.clientX-o.left,i.zrY=t.clientY-o.top}function Dn(e,t,i){if(null!=(t=t||window.event).zrX)return t;var n=t.type;if(n&&0<=n.indexOf("touch")){var o="touchend"!=n?t.targetTouches[0]:t.changedTouches[0];o&&En(e,o,t,i)}else En(e,t,t,i),t.zrDelta=t.wheelDelta?t.wheelDelta/120:-(t.detail||0)/3;var a=t.button;return null==t.which&&void 0!==a&&Nn.test(t.type)&&(t.which=1&a?1:2&a?3:4&a?2:0),t}function An(e,t,i){In?e.addEventListener(t,i):e.attachEvent("on"+t,i)}var Ln=In?function(e){e.preventDefault(),e.stopPropagation(),e.cancelBubble=!0}:function(e){e.returnValue=!1,e.cancelBubble=!0};function Pn(e){return 1<e.which}var Rn=function(e){e=e||{},this.stage=e.stage||{},this.onframe=e.onframe||function(){},this._clips=[],this._running=!1,this._time,this._pausedTime,this._pauseStart,this._paused=!1,Me.call(this)};Rn.prototype={constructor:Rn,addClip:function(e){this._clips.push(e)},addAnimator:function(e){e.animation=this;for(var t=e.getClips(),i=0;i<t.length;i++)this.addClip(t[i])},removeClip:function(e){var t=w(this._clips,e);0<=t&&this._clips.splice(t,1)},removeAnimator:function(e){for(var t=e.getClips(),i=0;i<t.length;i++)this.removeClip(t[i]);e.animation=null},_update:function(){for(var e=(new Date).getTime()-this._pausedTime,t=e-this._time,i=this._clips,n=i.length,o=[],a=[],r=0;r<n;r++){var s=i[r],l=s.step(e,t);l&&(o.push(l),a.push(s))}for(r=0;r<n;)i[r]._needsRemove?(i[r]=i[n-1],i.pop(),n--):r++;n=o.length;for(r=0;r<n;r++)a[r].fire(o[r]);this._time=e,this.onframe(t),this.trigger("frame",t),this.stage.update&&this.stage.update()},_startLoop:function(){var t=this;this._running=!0,Ii(function e(){t._running&&(Ii(e),!t._paused&&t._update())})},start:function(){this._time=(new Date).getTime(),this._pausedTime=0,this._startLoop()},stop:function(){this._running=!1},pause:function(){this._paused||(this._pauseStart=(new Date).getTime(),this._paused=!0)},resume:function(){this._paused&&(this._pausedTime+=(new Date).getTime()-this._pauseStart,this._paused=!1)},clear:function(){this._clips=[]},isFinished:function(){return!this._clips.length},animate:function(e,t){var i=new Vt(e,(t=t||{}).loop,t.getter,t.setter);return this.addAnimator(i),i}},C(Rn,Me);var Un=function(){this._track=[]};function On(e){var t=e[1][0]-e[0][0],i=e[1][1]-e[0][1];return Math.sqrt(t*t+i*i)}Un.prototype={constructor:Un,recognize:function(e,t,i){return this._doTrack(e,t,i),this._recognize(e)},clear:function(){return this._track.length=0,this},_doTrack:function(e,t,i){var n=e.touches;if(n){for(var o={points:[],touches:[],target:t,event:e},a=0,r=n.length;a<r;a++){var s=n[a],l=En(i,s,{});o.points.push([l.zrX,l.zrY]),o.touches.push(s)}this._track.push(o)}},_recognize:function(e){for(var t in Bn)if(Bn.hasOwnProperty(t)){var i=Bn[t](this._track,e);if(i)return i}}};var Bn={pinch:function(e,t){var i=e.length;if(i){var n,o=(e[i-1]||{}).points,a=(e[i-2]||{}).points||o;if(a&&1<a.length&&o&&1<o.length){var r=On(o)/On(a);!isFinite(r)&&(r=1),t.pinchScale=r;var s=[((n=o)[0][0]+n[1][0])/2,(n[0][1]+n[1][1])/2];return t.pinchX=s[0],t.pinchY=s[1],{type:"pinch",target:e[0].target,event:t}}}}},zn=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],Fn=["touchstart","touchend","touchmove"],Hn={pointerdown:1,pointerup:1,pointermove:1,pointerout:1},Vn=M(zn,function(e){var t=e.replace("mouse","pointer");return Hn[t]?t:e});function jn(e){return"mousewheel"===e&&v.browser.firefox?"DOMMouseScroll":e}function Wn(e,t,i){var n=e._gestureMgr;"start"===i&&n.clear();var o=n.recognize(t,e.handler.findHover(t.zrX,t.zrY,null).target,e.dom);if("end"===i&&n.clear(),o){var a=o.type;t.gestureEvent=a,e.handler.dispatchToElement({target:o.target},a,o.event)}}function $n(e){e._touching=!0,clearTimeout(e._touchTimer),e._touchTimer=setTimeout(function(){e._touching=!1},700)}var Gn={mousemove:function(e){e=Dn(this.dom,e),this.trigger("mousemove",e)},mouseout:function(e){var t=(e=Dn(this.dom,e)).toElement||e.relatedTarget;if(t!=this.dom)for(;t&&9!=t.nodeType;){if(t===this.dom)return;t=t.parentNode}this.trigger("mouseout",e)},touchstart:function(e){(e=Dn(this.dom,e)).zrByTouch=!0,this._lastTouchMoment=new Date,Wn(this,e,"start"),Gn.mousemove.call(this,e),Gn.mousedown.call(this,e),$n(this)},touchmove:function(e){(e=Dn(this.dom,e)).zrByTouch=!0,Wn(this,e,"change"),Gn.mousemove.call(this,e),$n(this)},touchend:function(e){(e=Dn(this.dom,e)).zrByTouch=!0,Wn(this,e,"end"),Gn.mouseup.call(this,e),+new Date-this._lastTouchMoment<300&&Gn.click.call(this,e),$n(this)},pointerdown:function(e){Gn.mousedown.call(this,e)},pointermove:function(e){Yn(e)||Gn.mousemove.call(this,e)},pointerup:function(e){Gn.mouseup.call(this,e)},pointerout:function(e){Yn(e)||Gn.mouseout.call(this,e)}};function Yn(e){var t=e.pointerType;return"pen"===t||"touch"===t}function qn(i){var n;function e(e,t){O(e,function(e){An(i,jn(e),t._handlers[e])},t)}Me.call(this),this.dom=i,this._touching=!1,this._touchTimer,this._gestureMgr=new Un,this._handlers={},n=this,O(Fn,function(e){n._handlers[e]=A(Gn[e],n)}),O(Vn,function(e){n._handlers[e]=A(Gn[e],n)}),O(zn,function(e){var t,i;n._handlers[e]=(t=Gn[e],i=n,function(){if(!i._touching)return t.apply(i,arguments)})}),v.pointerEventsSupported?e(Vn,this):(v.touchEventsSupported&&e(Fn,this),e(zn,this))}O(["click","mousedown","mouseup","mousewheel","dblclick","contextmenu"],function(t){Gn[t]=function(e){e=Dn(this.dom,e),this.trigger(t,e)}});var Zn=qn.prototype;Zn.dispose=function(){for(var e,t,i,n=zn.concat(Fn),o=0;o<n.length;o++){var a=n[o];e=this.dom,t=jn(a),i=this._handlers[a],In?e.removeEventListener(t,i):e.detachEvent("on"+t,i)}},Zn.setCursor=function(e){this.dom.style&&(this.dom.style.cursor=e||"default")},C(qn,Me);var Xn=!v.canvasSupported,Kn={canvas:kn},Jn={};function Qn(e,t){var i=new to(n(),e,t);return Jn[i.id]=i}function eo(e,t){Kn[e]=t}var to=function(e,t,i){i=i||{},this.dom=t,this.id=e;var n=this,o=new fi,a=i.renderer;if(Xn){if(!Kn.vml)throw new Error("You need to require 'zrender/vml/vml' to support IE8");a="vml"}else a&&Kn[a]||(a="canvas");var r=new Kn[a](t,o,i,e);this.storage=o,this.painter=r;var s=v.node||v.worker?null:new qn(r.getViewportRoot());this.handler=new Pe(o,r,s,r.root),this.animation=new Rn({stage:{update:A(this.flush,this)}}),this.animation.start(),this._needsRefresh;var l=o.delFromStorage,d=o.addToStorage;o.delFromStorage=function(e){l.call(o,e),e&&e.removeSelfFromZr(n)},o.addToStorage=function(e){d.call(o,e),e.addSelfToZr(n)}};to.prototype={constructor:to,getId:function(){return this.id},add:function(e){this.storage.addRoot(e),this._needsRefresh=!0},remove:function(e){this.storage.delRoot(e),this._needsRefresh=!0},configLayer:function(e,t){this.painter.configLayer&&this.painter.configLayer(e,t),this._needsRefresh=!0},setBackgroundColor:function(e){this.painter.setBackgroundColor&&this.painter.setBackgroundColor(e),this._needsRefresh=!0},refreshImmediately:function(){this._needsRefresh=!1,this.painter.refresh(),this._needsRefresh=!1},refresh:function(){this._needsRefresh=!0},flush:function(){var e;this._needsRefresh&&(e=!0,this.refreshImmediately()),this._needsRefreshHover&&(e=!0,this.refreshHoverImmediately()),e&&this.trigger("rendered")},addHover:function(e,t){this.painter.addHover&&(this.painter.addHover(e,t),this.refreshHover())},removeHover:function(e){this.painter.removeHover&&(this.painter.removeHover(e),this.refreshHover())},clearHover:function(){this.painter.clearHover&&(this.painter.clearHover(),this.refreshHover())},refreshHover:function(){this._needsRefreshHover=!0},refreshHoverImmediately:function(){this._needsRefreshHover=!1,this.painter.refreshHover&&this.painter.refreshHover()},resize:function(e){e=e||{},this.painter.resize(e.width,e.height),this.handler.resize()},clearAnimation:function(){this.animation.clear()},getWidth:function(){return this.painter.getWidth()},getHeight:function(){return this.painter.getHeight()},pathToImage:function(e,t){return this.painter.pathToImage(e,t)},setCursorStyle:function(e){this.handler.setCursorStyle(e)},findHover:function(e,t){return this.handler.findHover(e,t)},on:function(e,t,i){this.handler.on(e,t,i)},off:function(e,t){this.handler.off(e,t)},trigger:function(e,t){this.handler.trigger(e,t)},clear:function(){this.storage.delRoot(),this.painter.clear()},dispose:function(){var e;this.animation.stop(),this.clear(),this.storage.dispose(),this.painter.dispose(),this.handler.dispose(),this.animation=this.storage=this.painter=this.handler=null,e=this.id,delete Jn[e]}};var io=(Object.freeze||Object)({version:"4.0.4",init:Qn,dispose:function(e){if(e)e.dispose();else{for(var t in Jn)Jn.hasOwnProperty(t)&&Jn[t].dispose();Jn={}}return this},getInstance:function(e){return Jn[e]},registerPainter:eo}),no=O,oo=B,ao=R,ro="series\0";function so(e){return e instanceof Array?e:null==e?[]:[e]}function lo(e,t,i){if(e){e[t]=e[t]||{},e.emphasis=e.emphasis||{},e.emphasis[t]=e.emphasis[t]||{};for(var n=0,o=i.length;n<o;n++){var a=i[n];!e.emphasis[t].hasOwnProperty(a)&&e[t].hasOwnProperty(a)&&(e.emphasis[t][a]=e[t][a])}}}var co=["fontStyle","fontWeight","fontSize","fontFamily","rich","tag","color","textBorderColor","textBorderWidth","width","height","lineHeight","align","verticalAlign","baseline","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY","backgroundColor","borderColor","borderWidth","borderRadius","padding"];function uo(e){return!oo(e)||ao(e)||e instanceof Date?e:e.value}function ho(e,o){o=(o||[]).slice();var a=M(e||[],function(e,t){return{exist:e}});return no(o,function(e,t){if(oo(e)){for(var i=0;i<a.length;i++)if(!a[i].option&&null!=e.id&&a[i].exist.id===e.id+"")return a[i].option=e,void(o[t]=null);for(i=0;i<a.length;i++){var n=a[i].exist;if(!(a[i].option||null!=n.id&&null!=e.id||null==e.name||mo(e)||mo(n)||n.name!==e.name+""))return a[i].option=e,void(o[t]=null)}}}),no(o,function(e,t){if(oo(e)){for(var i=0;i<a.length;i++){var n=a[i].exist;if(!a[i].option&&!mo(n)&&null==e.id){a[i].option=e;break}}i>=a.length&&a.push({option:e})}}),a}function fo(e){var r=ee();no(e,function(e,t){var i=e.exist;i&&r.set(i.id,e)}),no(e,function(e,t){var i=e.option;q(!i||null==i.id||!r.get(i.id)||r.get(i.id)===e,"id duplicates: "+(i&&i.id)),i&&null!=i.id&&r.set(i.id,e),!e.keyInfo&&(e.keyInfo={})}),no(e,function(e,t){var i=e.exist,n=e.option,o=e.keyInfo;if(oo(n)){if(o.name=null!=n.name?n.name+"":i?i.name:ro+t,i)o.id=i.id;else if(null!=n.id)o.id=n.id+"";else for(var a=0;o.id="\0"+o.name+"\0"+a++,r.get(o.id););r.set(o.id,e)}})}function po(e){var t=e.name;return!(!t||!t.indexOf(ro))}function mo(e){return oo(e)&&e.id&&0===(e.id+"").indexOf("\0_ec_\0")}function go(t,e){return null!=e.dataIndexInside?e.dataIndexInside:null!=e.dataIndex?R(e.dataIndex)?M(e.dataIndex,function(e){return t.indexOfRawIndex(e)}):t.indexOfRawIndex(e.dataIndex):null!=e.name?R(e.name)?M(e.name,function(e){return t.indexOfName(e)}):t.indexOfName(e.name):void 0}function vo(){var t="__\0ec_inner_"+yo+++"_"+Math.random().toFixed(5);return function(e){return e[t]||(e[t]={})}}var yo=0;function bo(s,l,d){if(U(l)){var e={};e[l+"Index"]=0,l=e}var t=d&&d.defaultMainType;!t||xo(l,t+"Index")||xo(l,t+"Id")||xo(l,t+"Name")||(l[t+"Index"]=0);var c={};return no(l,function(e,t){e=l[t];if("dataIndex"!==t&&"dataIndexInside"!==t){var i=t.match(/^(\w+)(Index|Id|Name)$/)||[],n=i[1],o=(i[2]||"").toLowerCase();if(!(!n||!o||null==e||"index"===o&&"none"===e||d&&d.includeMainTypes&&w(d.includeMainTypes,n)<0)){var a={mainType:n};"index"===o&&"all"===e||(a[o]=e);var r=s.queryComponents(a);c[n+"Models"]=r,c[n+"Model"]=r[0]}}else c[t]=e}),c}function xo(e,t){return e&&e.hasOwnProperty(t)}function wo(e,t,i){e.setAttribute?e.setAttribute(t,i):e[t]=i}var _o=".",Co="___EC__COMPONENT__CONTAINER___";function So(e){var t={main:"",sub:""};return e&&(e=e.split(_o),t.main=e[0]||"",t.sub=e[1]||""),t}function To(e,n){(e.$constructor=e).extend=function(t){I&&O(n,function(e){t[e]||console.warn("Method `"+e+"` should be implemented"+(t.type?" in "+t.type:"")+".")});var e=this,i=function(){t.$constructor?t.$constructor.apply(this,arguments):e.apply(this,arguments)};return D(i.prototype,t),i.extend=this.extend,i.superCall=No,i.superApply=Eo,_(i,this),i.superClass=e,i}}var ko=0;function Io(e){var t=["__\0is_clz",ko++,Math.random().toFixed(3)].join("_");e.prototype[t]=!0,I&&q(!e.isInstance,'The method "is" can not be defined.'),e.isInstance=function(e){return!(!e||!e[t])}}function No(e,t){var i=G(arguments,2);return this.superClass.prototype[t].apply(e,i)}function Eo(e,t,i){return this.superClass.prototype[t].apply(e,i)}function Mo(i,e){e=e||{};var o={};if(i.registerClass=function(e,t){if(t)if(q(/^[a-zA-Z0-9_]+([.][a-zA-Z0-9_]+)?$/.test(i=t),'componentType "'+i+'" illegal'),(t=So(t)).sub){if(t.sub!==Co){(function(e){var t=o[e.main];t&&t[Co]||((t=o[e.main]={})[Co]=!0);return t})(t)[t.sub]=e}}else I&&o[t.main]&&console.warn(t.main+" exists."),o[t.main]=e;var i;return e},i.getClass=function(e,t,i){var n=o[e];if(n&&n[Co]&&(n=t?n[t]:null),i&&!n)throw new Error(t?"Component "+e+"."+(t||"")+" not exists. Load it first.":e+".type should be specified.");return n},i.getClassesByMainType=function(e){e=So(e);var i=[],t=o[e.main];return t&&t[Co]?O(t,function(e,t){t!==Co&&i.push(e)}):i.push(t),i},i.hasClass=function(e){return e=So(e),!!o[e.main]},i.getAllClassMainTypes=function(){var i=[];return O(o,function(e,t){i.push(t)}),i},i.hasSubTypes=function(e){e=So(e);var t=o[e.main];return t&&t[Co]},i.parseClassType=So,e.registerWhenExtend){var n=i.extend;n&&(i.extend=function(e){var t=n.call(this,e);return i.registerClass(t,e.type)})}return i}var Do=function(s){for(var e=0;e<s.length;e++)s[e][1]||(s[e][1]=s[e][0]);return function(e,t,i){for(var n={},o=0;o<s.length;o++){var a=s[o][1];if(!(t&&0<=w(t,a)||i&&w(i,a)<0)){var r=e.getShallow(a);null!=r&&(n[s[o][0]]=r)}}return n}},Ao=Do([["lineWidth","width"],["stroke","color"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]),Lo={getLineStyle:function(e){var t=Ao(this,e),i=this.getLineDash(t.lineWidth);return i&&(t.lineDash=i),t},getLineDash:function(e){null==e&&(e=1);var t=this.get("type"),i=Math.max(e,2),n=4*e;return"solid"===t||null==t?null:"dashed"===t?[n,n]:[i,i]}},Po=Do([["fill","color"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["opacity"],["shadowColor"]]),Ro={getAreaStyle:function(e,t){return Po(this,e,t)}},Uo=Math.pow,Oo=Math.sqrt,Bo=1e-8,zo=1e-4,Fo=Oo(3),Ho=1/3,Vo=ae(),jo=ae(),Wo=ae();function $o(e){return-Bo<e&&e<Bo}function Go(e){return Bo<e||e<-Bo}function Yo(e,t,i,n,o){var a=1-o;return a*a*(a*e+3*o*t)+o*o*(o*n+3*a*i)}function qo(e,t,i,n,o){var a=1-o;return 3*(((t-e)*a+2*(i-t)*o)*a+(n-i)*o*o)}function Zo(e,t,i,n,o){var a=6*i-12*t+6*e,r=9*t+3*n-3*e-9*i,s=3*t-3*e,l=0;if($o(r)){if(Go(a))0<=(c=-s/a)&&c<=1&&(o[l++]=c)}else{var d=a*a-4*r*s;if($o(d))o[0]=-a/(2*r);else if(0<d){var c,u=Oo(d),h=(-a-u)/(2*r);0<=(c=(-a+u)/(2*r))&&c<=1&&(o[l++]=c),0<=h&&h<=1&&(o[l++]=h)}}return l}function Xo(e,t,i,n,o,a){var r=(t-e)*o+e,s=(i-t)*o+t,l=(n-i)*o+i,d=(s-r)*o+r,c=(l-s)*o+s,u=(c-d)*o+d;a[0]=e,a[1]=r,a[2]=d,a[3]=u,a[4]=u,a[5]=c,a[6]=l,a[7]=n}function Ko(e,t,i,n){var o=1-n;return o*(o*e+2*n*t)+n*n*i}function Jo(e,t,i,n){return 2*((1-n)*(t-e)+n*(i-t))}function Qo(e,t,i){var n=e+i-2*t;return 0===n?.5:(e-t)/n}function ea(e,t,i,n,o){var a=(t-e)*n+e,r=(i-t)*n+t,s=(r-a)*n+a;o[0]=e,o[1]=a,o[2]=s,o[3]=s,o[4]=r,o[5]=i}var ta=Math.min,ia=Math.max,na=Math.sin,oa=Math.cos,aa=2*Math.PI,ra=ae(),sa=ae(),la=ae();function da(e,t,i){if(0!==e.length){var n,o=e[0],a=o[0],r=o[0],s=o[1],l=o[1];for(n=1;n<e.length;n++)o=e[n],a=ta(a,o[0]),r=ia(r,o[0]),s=ta(s,o[1]),l=ia(l,o[1]);t[0]=a,t[1]=s,i[0]=r,i[1]=l}}function ca(e,t,i,n,o,a){o[0]=ta(e,i),o[1]=ta(t,n),a[0]=ia(e,i),a[1]=ia(t,n)}var ua=[],ha=[];function fa(e,t,i,n,o,a,r,s,l,d){var c,u=Zo,h=Yo,f=u(e,i,o,r,ua);for(l[0]=1/0,l[1]=1/0,d[0]=-1/0,d[1]=-1/0,c=0;c<f;c++){var p=h(e,i,o,r,ua[c]);l[0]=ta(p,l[0]),d[0]=ia(p,d[0])}for(f=u(t,n,a,s,ha),c=0;c<f;c++){var m=h(t,n,a,s,ha[c]);l[1]=ta(m,l[1]),d[1]=ia(m,d[1])}l[0]=ta(e,l[0]),d[0]=ia(e,d[0]),l[0]=ta(r,l[0]),d[0]=ia(r,d[0]),l[1]=ta(t,l[1]),d[1]=ia(t,d[1]),l[1]=ta(s,l[1]),d[1]=ia(s,d[1])}function pa(e,t,i,n,o,a,r,s,l){var d=Se,c=Te,u=Math.abs(o-a);if(u%aa<1e-4&&1e-4<u)return s[0]=e-i,s[1]=t-n,l[0]=e+i,void(l[1]=t+n);if(ra[0]=oa(o)*i+e,ra[1]=na(o)*n+t,sa[0]=oa(a)*i+e,sa[1]=na(a)*n+t,d(s,ra,sa),c(l,ra,sa),(o%=aa)<0&&(o+=aa),(a%=aa)<0&&(a+=aa),a<o&&!r?a+=aa:o<a&&r&&(o+=aa),r){var h=a;a=o,o=h}for(var f=0;f<a;f+=Math.PI/2)o<f&&(la[0]=oa(f)*i+e,la[1]=na(f)*n+t,d(s,la,s),c(l,la,l))}var ma={M:1,L:2,C:3,Q:4,A:5,Z:6,R:7},ga=[],va=[],ya=[],ba=[],xa=Math.min,wa=Math.max,_a=Math.cos,Ca=Math.sin,Sa=Math.sqrt,Ta=Math.abs,ka="undefined"!=typeof Float32Array,Ia=function(e){this._saveData=!e,this._saveData&&(this.data=[]),this._ctx=null};function Na(e,t,i,n,o,a,r){if(0===o)return!1;var s=o,l=0;if(t+s<r&&n+s<r||r<t-s&&r<n-s||e+s<a&&i+s<a||a<e-s&&a<i-s)return!1;if(e===i)return Math.abs(a-e)<=s/2;var d=(l=(t-n)/(e-i))*a-r+(e*n-i*t)/(e-i);return d*d/(l*l+1)<=s/2*s/2}function Ea(e,t,i,n,o,a,r,s,l,d,c){if(0===l)return!1;var u=l;return!(t+u<c&&n+u<c&&a+u<c&&s+u<c||c<t-u&&c<n-u&&c<a-u&&c<s-u||e+u<d&&i+u<d&&o+u<d&&r+u<d||d<e-u&&d<i-u&&d<o-u&&d<r-u)&&function(e,t,i,n,o,a,r,s,l,d,c){var u,h,f,p,m,g=.005,v=1/0;Vo[0]=l,Vo[1]=d;for(var y=0;y<1;y+=.05)jo[0]=Yo(e,i,o,r,y),jo[1]=Yo(t,n,a,s,y),(p=we(Vo,jo))<v&&(u=y,v=p);v=1/0;for(var b=0;b<32&&!(g<zo);b++)h=u-g,f=u+g,jo[0]=Yo(e,i,o,r,h),jo[1]=Yo(t,n,a,s,h),p=we(jo,Vo),0<=h&&p<v?(u=h,v=p):(Wo[0]=Yo(e,i,o,r,f),Wo[1]=Yo(t,n,a,s,f),m=we(Wo,Vo),f<=1&&m<v?(u=f,v=m):g*=.5);return c&&(c[0]=Yo(e,i,o,r,u),c[1]=Yo(t,n,a,s,u)),Oo(v)}(e,t,i,n,o,a,r,s,d,c,null)<=u/2}function Ma(e,t,i,n,o,a,r,s,l){if(0===r)return!1;var d=r;return!(t+d<l&&n+d<l&&a+d<l||l<t-d&&l<n-d&&l<a-d||e+d<s&&i+d<s&&o+d<s||s<e-d&&s<i-d&&s<o-d)&&function(e,t,i,n,o,a,r,s,l){var d,c=.005,u=1/0;Vo[0]=r,Vo[1]=s;for(var h=0;h<1;h+=.05)jo[0]=Ko(e,i,o,h),jo[1]=Ko(t,n,a,h),(g=we(Vo,jo))<u&&(d=h,u=g);u=1/0;for(var f=0;f<32&&!(c<zo);f++){var p=d-c,m=d+c;jo[0]=Ko(e,i,o,p),jo[1]=Ko(t,n,a,p);var g=we(jo,Vo);if(0<=p&&g<u)d=p,u=g;else{Wo[0]=Ko(e,i,o,m),Wo[1]=Ko(t,n,a,m);var v=we(Wo,Vo);m<=1&&v<u?(d=m,u=v):c*=.5}}return l&&(l[0]=Ko(e,i,o,d),l[1]=Ko(t,n,a,d)),Oo(u)}(e,t,i,n,o,a,s,l,null)<=d/2}Ia.prototype={constructor:Ia,_xi:0,_yi:0,_x0:0,_y0:0,_ux:0,_uy:0,_len:0,_lineDash:null,_dashOffset:0,_dashIdx:0,_dashSum:0,setScale:function(e,t){this._ux=Ta(1/Wt/e)||0,this._uy=Ta(1/Wt/t)||0},getContext:function(){return this._ctx},beginPath:function(e){return(this._ctx=e)&&e.beginPath(),e&&(this.dpr=e.dpr),this._saveData&&(this._len=0),this._lineDash&&(this._lineDash=null,this._dashOffset=0),this},moveTo:function(e,t){return this.addData(ma.M,e,t),this._ctx&&this._ctx.moveTo(e,t),this._x0=e,this._y0=t,this._xi=e,this._yi=t,this},lineTo:function(e,t){var i=Ta(e-this._xi)>this._ux||Ta(t-this._yi)>this._uy||this._len<5;return this.addData(ma.L,e,t),this._ctx&&i&&(this._needsDash()?this._dashedLineTo(e,t):this._ctx.lineTo(e,t)),i&&(this._xi=e,this._yi=t),this},bezierCurveTo:function(e,t,i,n,o,a){return this.addData(ma.C,e,t,i,n,o,a),this._ctx&&(this._needsDash()?this._dashedBezierTo(e,t,i,n,o,a):this._ctx.bezierCurveTo(e,t,i,n,o,a)),this._xi=o,this._yi=a,this},quadraticCurveTo:function(e,t,i,n){return this.addData(ma.Q,e,t,i,n),this._ctx&&(this._needsDash()?this._dashedQuadraticTo(e,t,i,n):this._ctx.quadraticCurveTo(e,t,i,n)),this._xi=i,this._yi=n,this},arc:function(e,t,i,n,o,a){return this.addData(ma.A,e,t,i,i,n,o-n,0,a?0:1),this._ctx&&this._ctx.arc(e,t,i,n,o,a),this._xi=_a(o)*i+e,this._yi=Ca(o)*i+e,this},arcTo:function(e,t,i,n,o){return this._ctx&&this._ctx.arcTo(e,t,i,n,o),this},rect:function(e,t,i,n){return this._ctx&&this._ctx.rect(e,t,i,n),this.addData(ma.R,e,t,i,n),this},closePath:function(){this.addData(ma.Z);var e=this._ctx,t=this._x0,i=this._y0;return e&&(this._needsDash()&&this._dashedLineTo(t,i),e.closePath()),this._xi=t,this._yi=i,this},fill:function(e){e&&e.fill(),this.toStatic()},stroke:function(e){e&&e.stroke(),this.toStatic()},setLineDash:function(e){if(e instanceof Array){this._lineDash=e;for(var t=this._dashIdx=0,i=0;i<e.length;i++)t+=e[i];this._dashSum=t}return this},setLineDashOffset:function(e){return this._dashOffset=e,this},len:function(){return this._len},setData:function(e){var t=e.length;this.data&&this.data.length==t||!ka||(this.data=new Float32Array(t));for(var i=0;i<t;i++)this.data[i]=e[i];this._len=t},appendPath:function(e){e instanceof Array||(e=[e]);for(var t=e.length,i=0,n=this._len,o=0;o<t;o++)i+=e[o].len();ka&&this.data instanceof Float32Array&&(this.data=new Float32Array(n+i));for(o=0;o<t;o++)for(var a=e[o].data,r=0;r<a.length;r++)this.data[n++]=a[r];this._len=n},addData:function(e){if(this._saveData){var t=this.data;this._len+arguments.length>t.length&&(this._expandData(),t=this.data);for(var i=0;i<arguments.length;i++)t[this._len++]=arguments[i];this._prevCmd=e}},_expandData:function(){if(!(this.data instanceof Array)){for(var e=[],t=0;t<this._len;t++)e[t]=this.data[t];this.data=e}},_needsDash:function(){return this._lineDash},_dashedLineTo:function(e,t){var i,n,o=this._dashSum,a=this._dashOffset,r=this._lineDash,s=this._ctx,l=this._xi,d=this._yi,c=e-l,u=t-d,h=Sa(c*c+u*u),f=l,p=d,m=r.length;for(a<0&&(a=o+a),f-=(a%=o)*(c/=h),p-=a*(u/=h);0<c&&f<=e||c<0&&e<=f||0==c&&(0<u&&p<=t||u<0&&t<=p);)f+=c*(i=r[n=this._dashIdx]),p+=u*i,this._dashIdx=(n+1)%m,0<c&&f<l||c<0&&l<f||0<u&&p<d||u<0&&d<p||s[n%2?"moveTo":"lineTo"](0<=c?xa(f,e):wa(f,e),0<=u?xa(p,t):wa(p,t));c=f-e,u=p-t,this._dashOffset=-Sa(c*c+u*u)},_dashedBezierTo:function(e,t,i,n,o,a){var r,s,l,d,c,u=this._dashSum,h=this._dashOffset,f=this._lineDash,p=this._ctx,m=this._xi,g=this._yi,v=Yo,y=0,b=this._dashIdx,x=f.length,w=0;for(h<0&&(h=u+h),h%=u,r=0;r<1;r+=.1)s=v(m,e,i,o,r+.1)-v(m,e,i,o,r),l=v(g,t,n,a,r+.1)-v(g,t,n,a,r),y+=Sa(s*s+l*l);for(;b<x&&!(h<(w+=f[b]));b++);for(r=(w-h)/y;r<=1;)d=v(m,e,i,o,r),c=v(g,t,n,a,r),b%2?p.moveTo(d,c):p.lineTo(d,c),r+=f[b]/y,b=(b+1)%x;b%2!=0&&p.lineTo(o,a),s=o-d,l=a-c,this._dashOffset=-Sa(s*s+l*l)},_dashedQuadraticTo:function(e,t,i,n){var o=i,a=n;i=(i+2*e)/3,n=(n+2*t)/3,e=(this._xi+2*e)/3,t=(this._yi+2*t)/3,this._dashedBezierTo(e,t,i,n,o,a)},toStatic:function(){var e=this.data;e instanceof Array&&(e.length=this._len,ka&&(this.data=new Float32Array(e)))},getBoundingRect:function(){ga[0]=ga[1]=ya[0]=ya[1]=Number.MAX_VALUE,va[0]=va[1]=ba[0]=ba[1]=-Number.MAX_VALUE;for(var e,t,i,n,o,a,r,s,l,d,c,u,h,f,p=this.data,m=0,g=0,v=0,y=0,b=0;b<p.length;){var x=p[b++];switch(1==b&&(v=m=p[b],y=g=p[b+1]),x){case ma.M:m=v=p[b++],g=y=p[b++],ya[0]=v,ya[1]=y,ba[0]=v,ba[1]=y;break;case ma.L:ca(m,g,p[b],p[b+1],ya,ba),m=p[b++],g=p[b++];break;case ma.C:fa(m,g,p[b++],p[b++],p[b++],p[b++],p[b],p[b+1],ya,ba),m=p[b++],g=p[b++];break;case ma.Q:e=m,t=g,i=p[b++],n=p[b++],o=p[b],a=p[b+1],r=ya,s=ba,d=l=void 0,d=Ko,c=ia(ta((l=Qo)(e,i,o),1),0),u=ia(ta(l(t,n,a),1),0),h=d(e,i,o,c),f=d(t,n,a,u),r[0]=ta(e,o,h),r[1]=ta(t,a,f),s[0]=ia(e,o,h),s[1]=ia(t,a,f),m=p[b++],g=p[b++];break;case ma.A:var w=p[b++],_=p[b++],C=p[b++],S=p[b++],T=p[b++],k=p[b++]+T,I=(p[b++],1-p[b++]);1==b&&(v=_a(T)*C+w,y=Ca(T)*S+_),pa(w,_,C,S,T,k,I,ya,ba),m=_a(k)*C+w,g=Ca(k)*S+_;break;case ma.R:ca(v=m=p[b++],y=g=p[b++],v+p[b++],y+p[b++],ya,ba);break;case ma.Z:m=v,g=y}Se(ga,ga,ya),Te(va,va,ba)}return 0===b&&(ga[0]=ga[1]=va[0]=va[1]=0),new ii(ga[0],ga[1],va[0]-ga[0],va[1]-ga[1])},rebuildPath:function(e){for(var t,i,n,o,a,r,s=this.data,l=this._ux,d=this._uy,c=this._len,u=0;u<c;){var h=s[u++];switch(1==u&&(t=n=s[u],i=o=s[u+1]),h){case ma.M:t=n=s[u++],i=o=s[u++],e.moveTo(n,o);break;case ma.L:a=s[u++],r=s[u++],(Ta(a-n)>l||Ta(r-o)>d||u===c-1)&&(e.lineTo(a,r),n=a,o=r);break;case ma.C:e.bezierCurveTo(s[u++],s[u++],s[u++],s[u++],s[u++],s[u++]),n=s[u-2],o=s[u-1];break;case ma.Q:e.quadraticCurveTo(s[u++],s[u++],s[u++],s[u++]),n=s[u-2],o=s[u-1];break;case ma.A:var f=s[u++],p=s[u++],m=s[u++],g=s[u++],v=s[u++],y=s[u++],b=s[u++],x=s[u++],w=g<m?m:g,_=g<m?1:m/g,C=g<m?g/m:1,S=v+y;.001<Math.abs(m-g)?(e.translate(f,p),e.rotate(b),e.scale(_,C),e.arc(0,0,w,v,S,1-x),e.scale(1/_,1/C),e.rotate(-b),e.translate(-f,-p)):e.arc(f,p,w,v,S,1-x),1==u&&(t=_a(v)*m+f,i=Ca(v)*g+p),n=_a(S)*m+f,o=Ca(S)*g+p;break;case ma.R:t=n=s[u],i=o=s[u+1],e.rect(s[u++],s[u++],s[u++],s[u++]);break;case ma.Z:e.closePath(),n=t,o=i}}}},Ia.CMD=ma;var Da=2*Math.PI;function Aa(e){return(e%=Da)<0&&(e+=Da),e}var La=2*Math.PI;function Pa(e,t,i,n,o,a,r,s,l){if(0===r)return!1;var d=r;s-=e,l-=t;var c=Math.sqrt(s*s+l*l);if(i<c-d||c+d<i)return!1;if(Math.abs(n-o)%La<1e-4)return!0;if(a){var u=n;n=Aa(o),o=Aa(u)}else n=Aa(n),o=Aa(o);o<n&&(o+=La);var h=Math.atan2(l,s);return h<0&&(h+=La),n<=h&&h<=o||n<=h+La&&h+La<=o}function Ra(e,t,i,n,o,a){if(t<a&&n<a||a<t&&a<n)return 0;if(n===t)return 0;var r=n<t?1:-1,s=(a-t)/(n-t);1!==s&&0!==s||(r=n<t?.5:-.5);var l=s*(i-e)+e;return l===o?1/0:o<l?r:0}var Ua=Ia.CMD,Oa=2*Math.PI,Ba=1e-4;var za=[-1,-1,-1],Fa=[-1,-1];function Ha(e,t,i,n,o,a,r,s,l,d){if(t<d&&n<d&&a<d&&s<d||d<t&&d<n&&d<a&&d<s)return 0;var c,u=function(e,t,i,n,o,a){var r=n+3*(t-i)-e,s=3*(i-2*t+e),l=3*(t-e),d=e-o,c=s*s-3*r*l,u=s*l-9*r*d,h=l*l-3*s*d,f=0;if($o(c)&&$o(u))$o(s)?a[0]=0:0<=(S=-l/s)&&S<=1&&(a[f++]=S);else{var p=u*u-4*c*h;if($o(p)){var m=u/c,g=-m/2;0<=(S=-s/r+m)&&S<=1&&(a[f++]=S),0<=g&&g<=1&&(a[f++]=g)}else if(0<p){var v=Oo(p),y=c*s+1.5*r*(-u+v),b=c*s+1.5*r*(-u-v);0<=(S=(-s-((y=y<0?-Uo(-y,Ho):Uo(y,Ho))+(b=b<0?-Uo(-b,Ho):Uo(b,Ho))))/(3*r))&&S<=1&&(a[f++]=S)}else{var x=(2*c*s-3*r*u)/(2*Oo(c*c*c)),w=Math.acos(x)/3,_=Oo(c),C=Math.cos(w),S=(-s-2*_*C)/(3*r),T=(g=(-s+_*(C+Fo*Math.sin(w)))/(3*r),(-s+_*(C-Fo*Math.sin(w)))/(3*r));0<=S&&S<=1&&(a[f++]=S),0<=g&&g<=1&&(a[f++]=g),0<=T&&T<=1&&(a[f++]=T)}}return f}(t,n,a,s,d,za);if(0===u)return 0;for(var h,f,p=0,m=-1,g=0;g<u;g++){var v=za[g],y=0===v||1===v?.5:1;Yo(e,i,o,r,v)<l||(m<0&&(m=Zo(t,n,a,s,Fa),Fa[1]<Fa[0]&&1<m&&(void 0,c=Fa[0],Fa[0]=Fa[1],Fa[1]=c),h=Yo(t,n,a,s,Fa[0]),1<m&&(f=Yo(t,n,a,s,Fa[1]))),2==m?v<Fa[0]?p+=h<t?y:-y:v<Fa[1]?p+=f<h?y:-y:p+=s<f?y:-y:v<Fa[0]?p+=h<t?y:-y:p+=s<h?y:-y)}return p}function Va(e,t,i,n,o,a,r,s){if(t<s&&n<s&&a<s||s<t&&s<n&&s<a)return 0;var l=function(e,t,i,n,o){var a=e-2*t+i,r=2*(t-e),s=e-n,l=0;if($o(a))Go(r)&&0<=(c=-s/r)&&c<=1&&(o[l++]=c);else{var d=r*r-4*a*s;if($o(d))0<=(c=-r/(2*a))&&c<=1&&(o[l++]=c);else if(0<d){var c,u=Oo(d),h=(-r-u)/(2*a);0<=(c=(-r+u)/(2*a))&&c<=1&&(o[l++]=c),0<=h&&h<=1&&(o[l++]=h)}}return l}(t,n,a,s,za);if(0===l)return 0;var d=Qo(t,n,a);if(0<=d&&d<=1){for(var c=0,u=Ko(t,n,a,d),h=0;h<l;h++){var f=0===za[h]||1===za[h]?.5:1;Ko(e,i,o,za[h])<r||(za[h]<d?c+=u<t?f:-f:c+=a<u?f:-f)}return c}f=0===za[0]||1===za[0]?.5:1;return Ko(e,i,o,za[0])<r?0:a<t?f:-f}function ja(e,t,i,n,o,a,r,s){if(i<(s-=t)||s<-i)return 0;var l=Math.sqrt(i*i-s*s);za[0]=-l,za[1]=l;var d=Math.abs(n-o);if(d<1e-4)return 0;if(d%Oa<1e-4){o=Oa;var c=a?1:-1;return r>=za[n=0]+e&&r<=za[1]+e?c:0}if(a){l=n;n=Aa(o),o=Aa(l)}else n=Aa(n),o=Aa(o);o<n&&(o+=Oa);for(var u=0,h=0;h<2;h++){var f=za[h];if(r<f+e){var p=Math.atan2(s,f);c=a?1:-1;p<0&&(p=Oa+p),(n<=p&&p<=o||n<=p+Oa&&p+Oa<=o)&&(p>Math.PI/2&&p<1.5*Math.PI&&(c=-c),u+=c)}}return u}function Wa(e,t,i,n,o){for(var a,r,s=0,l=0,d=0,c=0,u=0,h=0;h<e.length;){var f=e[h++];switch(f===Ua.M&&1<h&&(i||(s+=Ra(l,d,c,u,n,o))),1==h&&(c=l=e[h],u=d=e[h+1]),f){case Ua.M:l=c=e[h++],d=u=e[h++];break;case Ua.L:if(i){if(Na(l,d,e[h],e[h+1],t,n,o))return!0}else s+=Ra(l,d,e[h],e[h+1],n,o)||0;l=e[h++],d=e[h++];break;case Ua.C:if(i){if(Ea(l,d,e[h++],e[h++],e[h++],e[h++],e[h],e[h+1],t,n,o))return!0}else s+=Ha(l,d,e[h++],e[h++],e[h++],e[h++],e[h],e[h+1],n,o)||0;l=e[h++],d=e[h++];break;case Ua.Q:if(i){if(Ma(l,d,e[h++],e[h++],e[h],e[h+1],t,n,o))return!0}else s+=Va(l,d,e[h++],e[h++],e[h],e[h+1],n,o)||0;l=e[h++],d=e[h++];break;case Ua.A:var p=e[h++],m=e[h++],g=e[h++],v=e[h++],y=e[h++],b=e[h++],x=(e[h++],1-e[h++]),w=Math.cos(y)*g+p,_=Math.sin(y)*v+m;1<h?s+=Ra(l,d,w,_,n,o):(c=w,u=_);var C=(n-p)*v/g+p;if(i){if(Pa(p,m,v,y,y+b,x,t,C,o))return!0}else s+=ja(p,m,v,y,y+b,x,C,o);l=Math.cos(y+b)*g+p,d=Math.sin(y+b)*v+m;break;case Ua.R:c=l=e[h++],u=d=e[h++];w=c+e[h++],_=u+e[h++];if(i){if(Na(c,u,w,u,t,n,o)||Na(w,u,w,_,t,n,o)||Na(w,_,c,_,t,n,o)||Na(c,_,c,u,t,n,o))return!0}else s+=Ra(w,u,w,_,n,o),s+=Ra(c,_,c,u,n,o);break;case Ua.Z:if(i){if(Na(l,d,c,u,t,n,o))return!0}else s+=Ra(l,d,c,u,n,o);l=c,d=u}}return i||(a=d,r=u,Math.abs(a-r)<Ba)||(s+=Ra(l,d,c,u,n,o)||0),0!==s}var $a=Ci.prototype.getCanvasPattern,Ga=Math.abs,Ya=new Ia(!0);function qa(e){xn.call(this,e),this.path=null}qa.prototype={constructor:qa,type:"path",__dirtyPath:!0,strokeContainThreshold:5,brush:function(e,t){var i,n=this.style,o=this.path||Ya,a=n.hasStroke(),r=n.hasFill(),s=n.fill,l=n.stroke,d=r&&!!s.colorStops,c=a&&!!l.colorStops,u=r&&!!s.image,h=a&&!!l.image;(n.bind(e,this,t),this.setTransform(e),this.__dirty)&&(d&&(i=i||this.getBoundingRect(),this._fillGradient=n.getGradient(e,s,i)),c&&(i=i||this.getBoundingRect(),this._strokeGradient=n.getGradient(e,l,i)));d?e.fillStyle=this._fillGradient:u&&(e.fillStyle=$a.call(s,e)),c?e.strokeStyle=this._strokeGradient:h&&(e.strokeStyle=$a.call(l,e));var f=n.lineDash,p=n.lineDashOffset,m=!!e.setLineDash,g=this.getGlobalScale();o.setScale(g[0],g[1]),this.__dirtyPath||f&&!m&&a?(o.beginPath(e),f&&!m&&(o.setLineDash(f),o.setLineDashOffset(p)),this.buildPath(o,this.shape,!1),this.path&&(this.__dirtyPath=!1)):(e.beginPath(),this.path.rebuildPath(e)),r&&o.fill(e),f&&m&&(e.setLineDash(f),e.lineDashOffset=p),a&&o.stroke(e),f&&m&&e.setLineDash([]),null!=n.text&&(this.restoreTransform(e),this.drawRectText(e,this.getBoundingRect()))},buildPath:function(e,t,i){},createPathProxy:function(){this.path=new Ia},getBoundingRect:function(){var e=this._rect,t=this.style,i=!e;if(i){var n=this.path;n||(n=this.path=new Ia),this.__dirtyPath&&(n.beginPath(),this.buildPath(n,this.shape,!1)),e=n.getBoundingRect()}if(this._rect=e,t.hasStroke()){var o=this._rectWithStroke||(this._rectWithStroke=e.clone());if(this.__dirty||i){o.copy(e);var a=t.lineWidth,r=t.strokeNoScale?this.getLineScale():1;t.hasFill()||(a=Math.max(a,this.strokeContainThreshold||4)),1e-10<r&&(o.width+=a/r,o.height+=a/r,o.x-=a/r/2,o.y-=a/r/2)}return o}return e},contain:function(e,t){var i=this.transformCoordToLocal(e,t),n=this.getBoundingRect(),o=this.style;if(e=i[0],t=i[1],n.contain(e,t)){var a=this.path.data;if(o.hasStroke()){var r=o.lineWidth,s=o.strokeNoScale?this.getLineScale():1;if(1e-10<s&&(o.hasFill()||(r=Math.max(r,this.strokeContainThreshold)),Wa(a,r/s,!0,e,t)))return!0}if(o.hasFill())return Wa(a,0,!1,e,t)}return!1},dirty:function(e){null==e&&(e=!0),e&&(this.__dirtyPath=e,this._rect=null),this.__dirty=!0,this.__zr&&this.__zr.refresh(),this.__clipTarget&&this.__clipTarget.dirty()},animateShape:function(e){return this.animate("shape",e)},attrKV:function(e,t){"shape"===e?(this.setShape(t),this.__dirtyPath=!0,this._rect=null):xn.prototype.attrKV.call(this,e,t)},setShape:function(e,t){var i=this.shape;if(i){if(B(e))for(var n in e)e.hasOwnProperty(n)&&(i[n]=e[n]);else i[e]=t;this.dirty(!0)}return this},getLineScale:function(){var e=this.transform;return e&&1e-10<Ga(e[0]-1)&&1e-10<Ga(e[3]-1)?Math.sqrt(Ga(e[0]*e[3]-e[2]*e[1])):1}},qa.extend=function(o){var e=function(e){qa.call(this,e),o.style&&this.style.extendFrom(o.style,!1);var t=o.shape;if(t){this.shape=this.shape||{};var i=this.shape;for(var n in t)!i.hasOwnProperty(n)&&t.hasOwnProperty(n)&&(i[n]=t[n])}o.init&&o.init.call(this,e)};for(var t in _(e,qa),o)"style"!==t&&"shape"!==t&&(e.prototype[t]=o[t]);return e},_(qa,xn);var Za=Ia.CMD,Xa=[[],[],[]],Ka=Math.sqrt,Ja=Math.atan2,Qa=function(e,t){var i,n,o,a,r,s=e.data,l=Za.M,d=Za.C,c=Za.L,u=Za.R,h=Za.A,f=Za.Q;for(a=o=0;o<s.length;){switch(i=s[o++],a=o,n=0,i){case l:case c:n=1;break;case d:n=3;break;case f:n=2;break;case h:var p=t[4],m=t[5],g=Ka(t[0]*t[0]+t[1]*t[1]),v=Ka(t[2]*t[2]+t[3]*t[3]),y=Ja(-t[1]/v,t[0]/g);s[o]*=g,s[o++]+=p,s[o]*=v,s[o++]+=m,s[o++]*=g,s[o++]*=v,s[o++]+=y,s[o++]+=y,a=o+=2;break;case u:b[0]=s[o++],b[1]=s[o++],Ce(b,b,t),s[a++]=b[0],s[a++]=b[1],b[0]+=s[o++],b[1]+=s[o++],Ce(b,b,t),s[a++]=b[0],s[a++]=b[1]}for(r=0;r<n;r++){var b;(b=Xa[r])[0]=s[o++],b[1]=s[o++],Ce(b,b,t),s[a++]=b[0],s[a++]=b[1]}}},er=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"],tr=Math.sqrt,ir=Math.sin,nr=Math.cos,or=Math.PI,ar=function(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])},rr=function(e,t){return(e[0]*t[0]+e[1]*t[1])/(ar(e)*ar(t))},sr=function(e,t){return(e[0]*t[1]<e[1]*t[0]?-1:1)*Math.acos(rr(e,t))};function lr(e,t,i,n,o,a,r,s,l,d,c){var u=l*(or/180),h=nr(u)*(e-i)/2+ir(u)*(t-n)/2,f=-1*ir(u)*(e-i)/2+nr(u)*(t-n)/2,p=h*h/(r*r)+f*f/(s*s);1<p&&(r*=tr(p),s*=tr(p));var m=(o===a?-1:1)*tr((r*r*(s*s)-r*r*(f*f)-s*s*(h*h))/(r*r*(f*f)+s*s*(h*h)))||0,g=m*r*f/s,v=m*-s*h/r,y=(e+i)/2+nr(u)*g-ir(u)*v,b=(t+n)/2+ir(u)*g+nr(u)*v,x=sr([1,0],[(h-g)/r,(f-v)/s]),w=[(h-g)/r,(f-v)/s],_=[(-1*h-g)/r,(-1*f-v)/s],C=sr(w,_);rr(w,_)<=-1&&(C=or),1<=rr(w,_)&&(C=0),0===a&&0<C&&(C-=2*or),1===a&&C<0&&(C+=2*or),c.addData(d,y,b,r,s,x,C,u,a)}function dr(e,t){var i=function(e){if(!e)return[];var t,i=e.replace(/-/g," -").replace(/  /g," ").replace(/ /g,",").replace(/,,/g,",");for(t=0;t<er.length;t++)i=i.replace(new RegExp(er[t],"g"),"|"+er[t]);var n,o=i.split("|"),a=0,r=0,s=new Ia,l=Ia.CMD;for(t=1;t<o.length;t++){var d,c=o[t],u=c.charAt(0),h=0,f=c.slice(1).replace(/e,-/g,"e-").split(",");0<f.length&&""===f[0]&&f.shift();for(var p=0;p<f.length;p++)f[p]=parseFloat(f[p]);for(;h<f.length&&!isNaN(f[h])&&!isNaN(f[0]);){var m,g,v,y,b,x,w,_=a,C=r;switch(u){case"l":a+=f[h++],r+=f[h++],d=l.L,s.addData(d,a,r);break;case"L":a=f[h++],r=f[h++],d=l.L,s.addData(d,a,r);break;case"m":a+=f[h++],r+=f[h++],d=l.M,s.addData(d,a,r),u="l";break;case"M":a=f[h++],r=f[h++],d=l.M,s.addData(d,a,r),u="L";break;case"h":a+=f[h++],d=l.L,s.addData(d,a,r);break;case"H":a=f[h++],d=l.L,s.addData(d,a,r);break;case"v":r+=f[h++],d=l.L,s.addData(d,a,r);break;case"V":r=f[h++],d=l.L,s.addData(d,a,r);break;case"C":d=l.C,s.addData(d,f[h++],f[h++],f[h++],f[h++],f[h++],f[h++]),a=f[h-2],r=f[h-1];break;case"c":d=l.C,s.addData(d,f[h++]+a,f[h++]+r,f[h++]+a,f[h++]+r,f[h++]+a,f[h++]+r),a+=f[h-2],r+=f[h-1];break;case"S":m=a,g=r;var S=s.len(),T=s.data;n===l.C&&(m+=a-T[S-4],g+=r-T[S-3]),d=l.C,_=f[h++],C=f[h++],a=f[h++],r=f[h++],s.addData(d,m,g,_,C,a,r);break;case"s":m=a,g=r,S=s.len(),T=s.data,n===l.C&&(m+=a-T[S-4],g+=r-T[S-3]),d=l.C,_=a+f[h++],C=r+f[h++],a+=f[h++],r+=f[h++],s.addData(d,m,g,_,C,a,r);break;case"Q":_=f[h++],C=f[h++],a=f[h++],r=f[h++],d=l.Q,s.addData(d,_,C,a,r);break;case"q":_=f[h++]+a,C=f[h++]+r,a+=f[h++],r+=f[h++],d=l.Q,s.addData(d,_,C,a,r);break;case"T":m=a,g=r,S=s.len(),T=s.data,n===l.Q&&(m+=a-T[S-4],g+=r-T[S-3]),a=f[h++],r=f[h++],d=l.Q,s.addData(d,m,g,a,r);break;case"t":m=a,g=r,S=s.len(),T=s.data,n===l.Q&&(m+=a-T[S-4],g+=r-T[S-3]),a+=f[h++],r+=f[h++],d=l.Q,s.addData(d,m,g,a,r);break;case"A":v=f[h++],y=f[h++],b=f[h++],x=f[h++],w=f[h++],lr(_=a,C=r,a=f[h++],r=f[h++],x,w,v,y,b,d=l.A,s);break;case"a":v=f[h++],y=f[h++],b=f[h++],x=f[h++],w=f[h++],lr(_=a,C=r,a+=f[h++],r+=f[h++],x,w,v,y,b,d=l.A,s)}}"z"!==u&&"Z"!==u||(d=l.Z,s.addData(d)),n=d}return s.toStatic(),s}(e);return(t=t||{}).buildPath=function(e){if(e.setData){e.setData(i.data),(t=e.getContext())&&e.rebuildPath(t)}else{var t=e;i.rebuildPath(t)}},t.applyTransform=function(e){Qa(i,e),this.dirty(!0)},t}var cr=function(e){xn.call(this,e)};cr.prototype={constructor:cr,type:"text",brush:function(e,t){var i=this.style;this.__dirty&&nn(i),i.fill=i.stroke=i.shadowBlur=i.shadowColor=i.shadowOffsetX=i.shadowOffsetY=null;var n=i.text;null!=n&&(n+=""),i.bind(e,this,t),vn(n,i)&&(this.setTransform(e),an(this,e,n,i),this.restoreTransform(e))},getBoundingRect:function(){var e=this.style;if(this.__dirty&&nn(e),!this._rect){var t=e.text;null!=t?t+="":t="";var i=Fi(e.text+"",e.font,e.textAlign,e.textVerticalAlign,e.textPadding,e.rich);if(i.x+=e.x||0,i.y+=e.y||0,fn(e.textStroke,e.textStrokeWidth)){var n=e.textStrokeWidth;i.x-=n/2,i.y-=n/2,i.width+=n,i.height+=n}this._rect=i}return this._rect}},_(cr,xn);var ur=qa.extend({type:"circle",shape:{cx:0,cy:0,r:0},buildPath:function(e,t,i){i&&e.moveTo(t.cx+t.r,t.cy),e.arc(t.cx,t.cy,t.r,0,2*Math.PI,!0)}}),hr=[["shadowBlur",0],["shadowColor","#000"],["shadowOffsetX",0],["shadowOffsetY",0]],fr=function(l){return v.browser.ie&&11<=v.browser.version?function(){var e,t=this.__clipPaths,i=this.style;if(t)for(var n=0;n<t.length;n++){var o=t[n],a=o&&o.shape,r=o&&o.type;if(a&&("sector"===r&&a.startAngle===a.endAngle||"rect"===r&&(!a.width||!a.height))){for(var s=0;s<hr.length;s++)hr[s][2]=i[hr[s][0]],i[hr[s][0]]=hr[s][1];e=!0;break}}if(l.apply(this,arguments),e)for(s=0;s<hr.length;s++)i[hr[s][0]]=hr[s][2]}:l},pr=qa.extend({type:"sector",shape:{cx:0,cy:0,r0:0,r:0,startAngle:0,endAngle:2*Math.PI,clockwise:!0},brush:fr(qa.prototype.brush),buildPath:function(e,t){var i=t.cx,n=t.cy,o=Math.max(t.r0||0,0),a=Math.max(t.r,0),r=t.startAngle,s=t.endAngle,l=t.clockwise,d=Math.cos(r),c=Math.sin(r);e.moveTo(d*o+i,c*o+n),e.lineTo(d*a+i,c*a+n),e.arc(i,n,a,r,s,!l),e.lineTo(Math.cos(s)*o+i,Math.sin(s)*o+n),0!==o&&e.arc(i,n,o,s,r,l),e.closePath()}}),mr=qa.extend({type:"ring",shape:{cx:0,cy:0,r:0,r0:0},buildPath:function(e,t){var i=t.cx,n=t.cy,o=2*Math.PI;e.moveTo(i+t.r,n),e.arc(i,n,t.r,0,o,!1),e.moveTo(i+t.r0,n),e.arc(i,n,t.r0,0,o,!0)}});function gr(e,t,i,n,o,a,r){var s=.5*(i-e),l=.5*(n-t);return(2*(t-i)+s+l)*r+(-3*(t-i)-2*s-l)*a+s*o+t}function vr(e,t,i){var n=t.points,o=t.smooth;if(n&&2<=n.length){if(o&&"spline"!==o){var a=function(e,t,i,n){var o,a,r,s,l=[],d=[],c=[],u=[];if(n){r=[1/0,1/0],s=[-1/0,-1/0];for(var h=0,f=e.length;h<f;h++)Se(r,r,e[h]),Te(s,s,e[h]);Se(r,r,n[0]),Te(s,s,n[1])}for(h=0,f=e.length;h<f;h++){var p=e[h];if(i)o=e[h?h-1:f-1],a=e[(h+1)%f];else{if(0===h||h===f-1){l.push(se(e[h]));continue}o=e[h-1],a=e[h+1]}ue(d,a,o),ge(d,d,t);var m=ye(p,o),g=ye(p,a),v=m+g;0!==v&&(m/=v,g/=v),ge(c,d,-m),ge(u,d,g);var y=de([],p,c),b=de([],p,u);n&&(Te(y,y,r),Se(y,y,s),Te(b,b,r),Se(b,b,s)),l.push(y),l.push(b)}return i&&l.push(l.shift()),l}(n,o,i,t.smoothConstraint);e.moveTo(n[0][0],n[0][1]);for(var r=n.length,s=0;s<(i?r:r-1);s++){var l=a[2*s],d=a[2*s+1],c=n[(s+1)%r];e.bezierCurveTo(l[0],l[1],d[0],d[1],c[0],c[1])}}else{"spline"===o&&(n=function(e,t){for(var i=e.length,n=[],o=0,a=1;a<i;a++)o+=ye(e[a-1],e[a]);var r=o/2;r=r<i?i:r;for(a=0;a<r;a++){var s,l,d,c=a/(r-1)*(t?i:i-1),u=Math.floor(c),h=c-u,f=e[u%i];d=t?(s=e[(u-1+i)%i],l=e[(u+1)%i],e[(u+2)%i]):(s=e[0===u?u:u-1],l=e[i-2<u?i-1:u+1],e[i-3<u?i-1:u+2]);var p=h*h,m=h*p;n.push([gr(s[0],f[0],l[0],d[0],h,p,m),gr(s[1],f[1],l[1],d[1],h,p,m)])}return n}(n,i)),e.moveTo(n[0][0],n[0][1]);s=1;for(var u=n.length;s<u;s++)e.lineTo(n[s][0],n[s][1])}i&&e.closePath()}}var yr=qa.extend({type:"polygon",shape:{points:null,smooth:!1,smoothConstraint:null},buildPath:function(e,t){vr(e,t,!0)}}),br=qa.extend({type:"polyline",shape:{points:null,smooth:!1,smoothConstraint:null},style:{stroke:"#000",fill:null},buildPath:function(e,t){vr(e,t,!1)}}),xr=qa.extend({type:"rect",shape:{r:0,x:0,y:0,width:0,height:0},buildPath:function(e,t){var i=t.x,n=t.y,o=t.width,a=t.height;t.r?Qi(e,t):e.rect(i,n,o,a),e.closePath()}}),wr=qa.extend({type:"line",shape:{x1:0,y1:0,x2:0,y2:0,percent:1},style:{stroke:"#000",fill:null},buildPath:function(e,t){var i=t.x1,n=t.y1,o=t.x2,a=t.y2,r=t.percent;0!==r&&(e.moveTo(i,n),r<1&&(o=i*(1-r)+o*r,a=n*(1-r)+a*r),e.lineTo(o,a))},pointAt:function(e){var t=this.shape;return[t.x1*(1-e)+t.x2*e,t.y1*(1-e)+t.y2*e]}}),_r=[];function Cr(e,t,i){var n=e.cpx2,o=e.cpy2;return null===n||null===o?[(i?qo:Yo)(e.x1,e.cpx1,e.cpx2,e.x2,t),(i?qo:Yo)(e.y1,e.cpy1,e.cpy2,e.y2,t)]:[(i?Jo:Ko)(e.x1,e.cpx1,e.x2,t),(i?Jo:Ko)(e.y1,e.cpy1,e.y2,t)]}var Sr=qa.extend({type:"bezier-curve",shape:{x1:0,y1:0,x2:0,y2:0,cpx1:0,cpy1:0,percent:1},style:{stroke:"#000",fill:null},buildPath:function(e,t){var i=t.x1,n=t.y1,o=t.x2,a=t.y2,r=t.cpx1,s=t.cpy1,l=t.cpx2,d=t.cpy2,c=t.percent;0!==c&&(e.moveTo(i,n),null==l||null==d?(c<1&&(ea(i,r,o,c,_r),r=_r[1],o=_r[2],ea(n,s,a,c,_r),s=_r[1],a=_r[2]),e.quadraticCurveTo(r,s,o,a)):(c<1&&(Xo(i,r,l,o,c,_r),r=_r[1],l=_r[2],o=_r[3],Xo(n,s,d,a,c,_r),s=_r[1],d=_r[2],a=_r[3]),e.bezierCurveTo(r,s,l,d,o,a)))},pointAt:function(e){return Cr(this.shape,e,!1)},tangentAt:function(e){var t=Cr(this.shape,e,!0);return ve(t,t)}}),Tr=qa.extend({type:"arc",shape:{cx:0,cy:0,r:0,startAngle:0,endAngle:2*Math.PI,clockwise:!0},style:{stroke:"#000",fill:null},buildPath:function(e,t){var i=t.cx,n=t.cy,o=Math.max(t.r,0),a=t.startAngle,r=t.endAngle,s=t.clockwise,l=Math.cos(a),d=Math.sin(a);e.moveTo(l*o+i,d*o+n),e.arc(i,n,o,a,r,!s)}}),kr=qa.extend({type:"compound",shape:{paths:null},_updatePathDirty:function(){for(var e=this.__dirtyPath,t=this.shape.paths,i=0;i<t.length;i++)e=e||t[i].__dirtyPath;this.__dirtyPath=e,this.__dirty=this.__dirty||e},beforeBrush:function(){this._updatePathDirty();for(var e=this.shape.paths||[],t=this.getGlobalScale(),i=0;i<e.length;i++)e[i].path||e[i].createPathProxy(),e[i].path.setScale(t[0],t[1])},buildPath:function(e,t){for(var i=t.paths||[],n=0;n<i.length;n++)i[n].buildPath(e,i[n].shape,!0)},afterBrush:function(){for(var e=this.shape.paths||[],t=0;t<e.length;t++)e[t].__dirtyPath=!1},getBoundingRect:function(){return this._updatePathDirty(),qa.prototype.getBoundingRect.call(this)}}),Ir=function(e){this.colorStops=e||[]};Ir.prototype={constructor:Ir,addColorStop:function(e,t){this.colorStops.push({offset:e,color:t})}};var Nr=function(e,t,i,n,o,a){this.x=null==e?0:e,this.y=null==t?0:t,this.x2=null==i?1:i,this.y2=null==n?0:n,this.type="linear",this.global=a||!1,Ir.call(this,o)};Nr.prototype={constructor:Nr},_(Nr,Ir);var Er=function(e,t,i,n,o){this.x=null==e?.5:e,this.y=null==t?.5:t,this.r=null==i?.5:i,this.type="radial",this.global=o||!1,Ir.call(this,n)};function Mr(e){xn.call(this,e),this._displayables=[],this._temporaryDisplayables=[],this._cursor=0,this.notClear=!0}Er.prototype={constructor:Er},_(Er,Ir),Mr.prototype.incremental=!0,Mr.prototype.clearDisplaybles=function(){this._displayables=[],this._temporaryDisplayables=[],this._cursor=0,this.dirty(),this.notClear=!1},Mr.prototype.addDisplayable=function(e,t){t?this._temporaryDisplayables.push(e):this._displayables.push(e),this.dirty()},Mr.prototype.addDisplayables=function(e,t){t=t||!1;for(var i=0;i<e.length;i++)this.addDisplayable(e[i],t)},Mr.prototype.eachPendingDisplayable=function(e){for(var t=this._cursor;t<this._displayables.length;t++)e&&e(this._displayables[t]);for(t=0;t<this._temporaryDisplayables.length;t++)e&&e(this._temporaryDisplayables[t])},Mr.prototype.update=function(){this.updateTransform();for(var e=this._cursor;e<this._displayables.length;e++){(t=this._displayables[e]).parent=this,t.update(),t.parent=null}for(e=0;e<this._temporaryDisplayables.length;e++){var t;(t=this._temporaryDisplayables[e]).parent=this,t.update(),t.parent=null}},Mr.prototype.brush=function(e,t){for(var i=this._cursor;i<this._displayables.length;i++){(n=this._displayables[i]).beforeBrush&&n.beforeBrush(e),n.brush(e,i===this._cursor?null:this._displayables[i-1]),n.afterBrush&&n.afterBrush(e)}this._cursor=i;for(i=0;i<this._temporaryDisplayables.length;i++){var n;(n=this._temporaryDisplayables[i]).beforeBrush&&n.beforeBrush(e),n.brush(e,0===i?null:this._temporaryDisplayables[i-1]),n.afterBrush&&n.afterBrush(e)}this._temporaryDisplayables=[],this.notClear=!0};var Dr=[];Mr.prototype.getBoundingRect=function(){if(!this._rect){for(var e=new ii(1/0,1/0,-1/0,-1/0),t=0;t<this._displayables.length;t++){var i=this._displayables[t],n=i.getBoundingRect().clone();i.needLocalTransform()&&n.applyTransform(i.getLocalTransform(Dr)),e.union(n)}this._rect=e}return this._rect},Mr.prototype.contain=function(e,t){var i=this.transformCoordToLocal(e,t);if(this.getBoundingRect().contain(i[0],i[1]))for(var n=0;n<this._displayables.length;n++){if(this._displayables[n].contain(e,t))return!0}return!1},_(Mr,xn);var Ar=Math.round,Lr=Math.max,Pr=Math.min,Rr={};function Ur(e){return qa.extend(e)}function Or(e,t,i,n){var o=new qa(dr(e,t)),a=o.getBoundingRect();return i&&("center"===n&&(i=zr(i,a)),Hr(o,i)),o}function Br(e,i,n){var o=new wn({style:{image:e,x:i.x,y:i.y,width:i.width,height:i.height},onload:function(e){if("center"===n){var t={width:e.width,height:e.height};o.setStyle(zr(i,t))}}});return o}function zr(e,t){var i,n=t.width/t.height,o=e.height*n;return i=o<=e.width?e.height:(o=e.width)/n,{x:e.x+e.width/2-o/2,y:e.y+e.height/2-i/2,width:o,height:i}}var Fr=function(e,t){for(var i=[],n=e.length,o=0;o<n;o++){var a=e[o];a.path||a.createPathProxy(),a.__dirtyPath&&a.buildPath(a.path,a.shape,!0),i.push(a.path)}var r=new qa(t);return r.createPathProxy(),r.buildPath=function(e){e.appendPath(i);var t=e.getContext();t&&e.rebuildPath(t)},r};function Hr(e,t){if(e.applyTransform){var i=e.getBoundingRect().calculateTransform(t);e.applyTransform(i)}}function Vr(e){var t=e.shape,i=e.style.lineWidth;return Ar(2*t.x1)===Ar(2*t.x2)&&(t.x1=t.x2=Wr(t.x1,i,!0)),Ar(2*t.y1)===Ar(2*t.y2)&&(t.y1=t.y2=Wr(t.y1,i,!0)),e}function jr(e){var t=e.shape,i=e.style.lineWidth,n=t.x,o=t.y,a=t.width,r=t.height;return t.x=Wr(t.x,i,!0),t.y=Wr(t.y,i,!0),t.width=Math.max(Wr(n+a,i,!1)-t.x,0===a?0:1),t.height=Math.max(Wr(o+r,i,!1)-t.y,0===r?0:1),e}function Wr(e,t,i){var n=Ar(2*e);return(n+Ar(t))%2==0?n/2:(n+(i?1:-1))/2}function $r(e){return null!=e&&"none"!=e}function Gr(e){return"string"==typeof e?bt(e,-.1):e}function Yr(e){if(e.__hoverStlDirty){var t=e.style.stroke,i=e.style.fill,n=e.__hoverStl;n.fill=n.fill||($r(i)?Gr(i):null),n.stroke=n.stroke||($r(t)?Gr(t):null);var o={};for(var a in n)null!=n[a]&&(o[a]=e.style[a]);e.__normalStl=o,e.__hoverStlDirty=!1}}function qr(e){if(!e.__isHover){if(Yr(e),e.useHoverLayer)e.__zr&&e.__zr.addHover(e,e.__hoverStl);else{var t=e.style,i=t.insideRollbackOpt;i&&((o=(n=t).insideRollback)&&(n.textFill=o.textFill,n.textStroke=o.textStroke,n.textStrokeWidth=o.textStrokeWidth)),t.extendFrom(e.__hoverStl),i&&(ds(t,t.insideOriginalTextPosition,i),null==t.textFill&&(t.textFill=i.autoColor)),e.dirty(!1),e.z2+=1}var n,o;e.__isHover=!0}}function Zr(e){if(e.__isHover){var t=e.__normalStl;e.useHoverLayer?e.__zr&&e.__zr.removeHover(e):(t&&e.setStyle(t),e.z2-=1),e.__isHover=!1}}function Xr(e){"group"===e.type?e.traverse(function(e){"group"!==e.type&&qr(e)}):qr(e)}function Kr(e){"group"===e.type?e.traverse(function(e){"group"!==e.type&&Zr(e)}):Zr(e)}function Jr(e,t){e.__hoverStl=e.hoverStyle||t||{},e.__hoverStlDirty=!0,e.__isHover&&Yr(e)}function Qr(e){this.__hoverSilentOnTouch&&e.zrByTouch||!this.__isEmphasis&&Xr(this)}function es(e){this.__hoverSilentOnTouch&&e.zrByTouch||!this.__isEmphasis&&Kr(this)}function ts(){this.__isEmphasis=!0,Xr(this)}function is(){this.__isEmphasis=!1,Kr(this)}function ns(e,t,i){e.__hoverSilentOnTouch=i&&i.hoverSilentOnTouch,"group"===e.type?e.traverse(function(e){"group"!==e.type&&Jr(e,t)}):Jr(e,t),e.on("mouseover",Qr).on("mouseout",es),e.on("emphasis",ts).on("normal",is)}function os(e,t,i,n,o,a,r){var s,l=(o=o||Rr).labelFetcher,d=o.labelDataIndex,c=o.labelDimIndex,u=i.getShallow("show"),h=n.getShallow("show");(u||h)&&(l&&(s=l.getFormattedLabel(d,"normal",null,c)),null==s&&(s=k(o.defaultText)?o.defaultText(d,o):o.defaultText));var f=u?s:null,p=h?W(l?l.getFormattedLabel(d,"emphasis",null,c):null,s):null;null==f&&null==p||(as(e,i,a,o),as(t,n,r,o,!0)),e.text=f,t.text=p}function as(e,t,i,n,o){return rs(e,t,n,o),i&&D(e,i),e.host&&e.host.dirty&&e.host.dirty(!1),e}function rs(e,t,i,n){if((i=i||Rr).isRectText){var o=t.getShallow("position")||(n?null:"inside");"outside"===o&&(o="top"),e.textPosition=o,e.textOffset=t.getShallow("offset");var a=t.getShallow("rotate");null!=a&&(a*=Math.PI/180),e.textRotation=a,e.textDistance=W(t.getShallow("distance"),n?null:5)}var r,s=t.ecModel,l=s&&s.option.textStyle,d=function(e){var t;for(;e&&e!==e.ecModel;){var i=(e.option||Rr).rich;if(i)for(var n in t=t||{},i)i.hasOwnProperty(n)&&(t[n]=1);e=e.parentModel}return t}(t);if(d)for(var c in r={},d)if(d.hasOwnProperty(c)){var u=t.getModel(["rich",c]);ss(r[c]={},u,l,i,n)}return e.rich=r,ss(e,t,l,i,n,!0),i.forceRich&&!i.textStyle&&(i.textStyle={}),e}function ss(e,t,i,n,o,a){if(i=!o&&i||Rr,e.textFill=ls(t.getShallow("color"),n)||i.color,e.textStroke=ls(t.getShallow("textBorderColor"),n)||i.textBorderColor,e.textStrokeWidth=W(t.getShallow("textBorderWidth"),i.textBorderWidth),!o){if(a){var r=e.textPosition;e.insideRollback=ds(e,r,n),e.insideOriginalTextPosition=r,e.insideRollbackOpt=n}null==e.textFill&&(e.textFill=n.autoColor)}e.fontStyle=t.getShallow("fontStyle")||i.fontStyle,e.fontWeight=t.getShallow("fontWeight")||i.fontWeight,e.fontSize=t.getShallow("fontSize")||i.fontSize,e.fontFamily=t.getShallow("fontFamily")||i.fontFamily,e.textAlign=t.getShallow("align"),e.textVerticalAlign=t.getShallow("verticalAlign")||t.getShallow("baseline"),e.textLineHeight=t.getShallow("lineHeight"),e.textWidth=t.getShallow("width"),e.textHeight=t.getShallow("height"),e.textTag=t.getShallow("tag"),a&&n.disableBox||(e.textBackgroundColor=ls(t.getShallow("backgroundColor"),n),e.textPadding=t.getShallow("padding"),e.textBorderColor=ls(t.getShallow("borderColor"),n),e.textBorderWidth=t.getShallow("borderWidth"),e.textBorderRadius=t.getShallow("borderRadius"),e.textBoxShadowColor=t.getShallow("shadowColor"),e.textBoxShadowBlur=t.getShallow("shadowBlur"),e.textBoxShadowOffsetX=t.getShallow("shadowOffsetX"),e.textBoxShadowOffsetY=t.getShallow("shadowOffsetY")),e.textShadowColor=t.getShallow("textShadowColor")||i.textShadowColor,e.textShadowBlur=t.getShallow("textShadowBlur")||i.textShadowBlur,e.textShadowOffsetX=t.getShallow("textShadowOffsetX")||i.textShadowOffsetX,e.textShadowOffsetY=t.getShallow("textShadowOffsetY")||i.textShadowOffsetY}function ls(e,t){return"auto"!==e?e:t&&t.autoColor?t.autoColor:null}function ds(e,t,i){var n,o=i.useInsideStyle;return null==e.textFill&&!1!==o&&(!0===o||i.isRectText&&t&&"string"==typeof t&&0<=t.indexOf("inside"))&&(n={textFill:null,textStroke:e.textStroke,textStrokeWidth:e.textStrokeWidth},e.textFill="#fff",null==e.textStroke&&(e.textStroke=i.autoColor,null==e.textStrokeWidth&&(e.textStrokeWidth=2))),n}function cs(e,t){var i=t||t.getModel("textStyle");return Z([e.fontStyle||i&&i.getShallow("fontStyle")||"",e.fontWeight||i&&i.getShallow("fontWeight")||"",(e.fontSize||i&&i.getShallow("fontSize")||12)+"px",e.fontFamily||i&&i.getShallow("fontFamily")||"sans-serif"].join(" "))}function us(e,t,i,n,o,a){if("function"==typeof o&&(a=o,o=null),n&&n.isAnimationEnabled()){var r=e?"Update":"",s=n.getShallow("animationDuration"+r),l=n.getShallow("animationEasing"+r),d=n.getShallow("animationDelay"+r);"function"==typeof d&&(d=d(o,n.getAnimationDelayParams?n.getAnimationDelayParams(t,o):null)),"function"==typeof s&&(s=s(o)),0<s?t.animateTo(i,s,d||0,l,a,!!a):(t.stopAnimation(),t.attr(i),a&&a())}else t.stopAnimation(),t.attr(i),a&&a()}function hs(e,t,i,n,o){us(!0,e,t,i,n,o)}function fs(e,t,i,n,o){us(!1,e,t,i,n,o)}function ps(e,t){for(var i=Be([]);e&&e!==t;)Fe(i,e.getLocalTransform(),i),e=e.parent;return i}function ms(e,t,i){return t&&!P(t)&&(t=Ze.getLocalTransform(t)),i&&(t=We([],t)),Ce([],e,t)}function gs(e,t,i){var n=0===t[4]||0===t[5]||0===t[0]?1:Math.abs(2*t[4]/t[0]),o=0===t[4]||0===t[5]||0===t[2]?1:Math.abs(2*t[4]/t[2]),a=["left"===e?-n:"right"===e?n:0,"top"===e?-o:"bottom"===e?o:0];return a=ms(a,t,i),Math.abs(a[0])>Math.abs(a[1])?0<a[0]?"right":"left":0<a[1]?"bottom":"top"}function vs(e,t,n,i){if(e&&t){var o,a=(o={},e.traverse(function(e){!e.isGroup&&e.anid&&(o[e.anid]=e)}),o);t.traverse(function(e){if(!e.isGroup&&e.anid){var t=a[e.anid];if(t){var i=r(e);e.attr(r(t)),hs(e,i,n,e.dataIndex)}}})}function r(e){var t={position:se(e.position),rotation:e.rotation};return e.shape&&(t.shape=D({},e.shape)),t}}function ys(e,n){return M(e,function(e){var t=e[0];t=Lr(t,n.x),t=Pr(t,n.x+n.width);var i=e[1];return i=Lr(i,n.y),[t,i=Pr(i,n.y+n.height)]})}function bs(e,t,i){var n=(t=D({rectHover:!0},t)).style={strokeNoScale:!0};if(i=i||{x:-1,y:-1,width:2,height:2},e)return 0===e.indexOf("image://")?(n.image=e.slice(8),E(n,i),new wn(t)):Or(e.replace("path://",""),t,i,"center")}var xs=(Object.freeze||Object)({extendShape:Ur,extendPath:function(e,t){return qa.extend(dr(e,t))},makePath:Or,makeImage:Br,mergePath:Fr,resizePath:Hr,subPixelOptimizeLine:Vr,subPixelOptimizeRect:jr,subPixelOptimize:Wr,setHoverStyle:ns,setLabelStyle:os,setTextStyle:as,setText:function(e,t,i){var n,o={isRectText:!0};!1===i?n=!0:o.autoColor=i,rs(e,t,o,n),e.host&&e.host.dirty&&e.host.dirty(!1)},getFont:cs,updateProps:hs,initProps:fs,getTransform:ps,applyTransform:ms,transformDirection:gs,groupTransition:vs,clipPointsByRect:ys,clipRectByRect:function(e,t){var i=Lr(e.x,t.x),n=Pr(e.x+e.width,t.x+t.width),o=Lr(e.y,t.y),a=Pr(e.y+e.height,t.y+t.height);if(i<=n&&o<=a)return{x:i,y:o,width:n-i,height:a-o}},createIcon:bs,Group:ni,Image:wn,Text:cr,Circle:ur,Sector:pr,Ring:mr,Polygon:yr,Polyline:br,Rect:xr,Line:wr,BezierCurve:Sr,Arc:Tr,IncrementalDisplayable:Mr,CompoundPath:kr,LinearGradient:Nr,RadialGradient:Er,BoundingRect:ii}),ws=["textStyle","color"],_s={getTextColor:function(e){var t=this.ecModel;return this.getShallow("color")||(!e&&t?t.get(ws):null)},getFont:function(){return cs({fontStyle:this.getShallow("fontStyle"),fontWeight:this.getShallow("fontWeight"),fontSize:this.getShallow("fontSize"),fontFamily:this.getShallow("fontFamily")},this.ecModel)},getTextRect:function(e){return Fi(e,this.getFont(),this.getShallow("align"),this.getShallow("verticalAlign")||this.getShallow("baseline"),this.getShallow("padding"),this.getShallow("rich"),this.getShallow("truncateText"))}},Cs=Do([["fill","color"],["stroke","borderColor"],["lineWidth","borderWidth"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["textPosition"],["textAlign"]]),Ss={getItemStyle:function(e,t){var i=Cs(this,e,t),n=this.getBorderLineDash();return n&&(i.lineDash=n),i},getBorderLineDash:function(){var e=this.get("borderType");return"solid"===e||null==e?null:"dashed"===e?[5,5]:[1,1]}},Ts=C,ks=vo();function Is(e,t,i){this.parentModel=t,this.ecModel=i,this.option=e}function Ns(e,t,i){for(var n=0;n<t.length&&(!t[n]||null!=(e=e&&"object"==typeof e?e[t[n]]:null));n++);return null==e&&i&&(e=i.get(t)),e}function Es(e,t){var i=ks(e).getParent;return i?i.call(e,t):e.parentModel}Is.prototype={constructor:Is,init:null,mergeOption:function(e){m(this.option,e,!0)},get:function(e,t){return null==e?this.option:Ns(this.option,this.parsePath(e),!t&&Es(this,e))},getShallow:function(e,t){var i=this.option,n=null==i?i:i[e],o=!t&&Es(this,e);return null==n&&o&&(n=o.getShallow(e)),n},getModel:function(e,t){var i;return new Is(null==e?this.option:Ns(this.option,e=this.parsePath(e)),t=t||(i=Es(this,e))&&i.getModel(e),this.ecModel)},isEmpty:function(){return null==this.option},restoreData:function(){},clone:function(){return new this.constructor(N(this.option))},setReadOnly:function(e){},parsePath:function(e){return"string"==typeof e&&(e=e.split(".")),e},customizeGetParent:function(e){ks(this).getParent=e},isAnimationEnabled:function(){if(!v.node){if(null!=this.option.animation)return!!this.option.animation;if(this.parentModel)return this.parentModel.isAnimationEnabled()}}},To(Is),Io(Is),Ts(Is,Lo),Ts(Is,Ro),Ts(Is,_s),Ts(Is,Ss);var Ms=0;function Ds(e){return[e||"",Ms++,Math.random().toFixed(5)].join("_")}var As=1e-4;function Ls(e,t,i,n){var o=t[1]-t[0],a=i[1]-i[0];if(0===o)return 0===a?i[0]:(i[0]+i[1])/2;if(n)if(0<o){if(e<=t[0])return i[0];if(e>=t[1])return i[1]}else{if(e>=t[0])return i[0];if(e<=t[1])return i[1]}else{if(e===t[0])return i[0];if(e===t[1])return i[1]}return(e-t[0])/o*a+i[0]}function Ps(e,t){switch(e){case"center":case"middle":e="50%";break;case"left":case"top":e="0%";break;case"right":case"bottom":e="100%"}return"string"==typeof e?(i=e,i.replace(/^\s+/,"").replace(/\s+$/,"")).match(/%$/)?parseFloat(e)/100*t:parseFloat(e):null==e?NaN:+e;var i}function Rs(e,t,i){return null==t&&(t=10),t=Math.min(Math.max(0,t),20),e=(+e).toFixed(t),i?e:+e}function Us(e){return e.sort(function(e,t){return e-t}),e}function Os(e){if(e=+e,isNaN(e))return 0;for(var t=1,i=0;Math.round(e*t)/t!==e;)t*=10,i++;return i}function Bs(e){var t=e.toString(),i=t.indexOf("e");if(0<i){var n=+t.slice(i+1);return n<0?-n:0}var o=t.indexOf(".");return o<0?0:t.length-1-o}function zs(e,t){var i=Math.log,n=Math.LN10,o=Math.floor(i(e[1]-e[0])/n),a=Math.round(i(Math.abs(t[1]-t[0]))/n),r=Math.min(Math.max(-o+a,0),20);return isFinite(r)?r:20}function Fs(e,t,i){if(!e[t])return 0;var n=S(e,function(e,t){return e+(isNaN(t)?0:t)},0);if(0===n)return 0;for(var o=Math.pow(10,i),a=M(e,function(e){return(isNaN(e)?0:e)/n*o*100}),r=100*o,s=M(a,function(e){return Math.floor(e)}),l=S(s,function(e,t){return e+t},0),d=M(a,function(e,t){return e-s[t]});l<r;){for(var c=Number.NEGATIVE_INFINITY,u=null,h=0,f=d.length;h<f;++h)d[h]>c&&(c=d[h],u=h);++s[u],d[u]=0,++l}return s[t]/o}var Hs=9007199254740991;function Vs(e){var t=2*Math.PI;return(e%t+t)%t}function js(e){return-As<e&&e<As}var Ws=/^(?:(\d{4})(?:[-\/](\d{1,2})(?:[-\/](\d{1,2})(?:[T ](\d{1,2})(?::(\d\d)(?::(\d\d)(?:[.,](\d+))?)?)?(Z|[\+\-]\d\d:?\d\d)?)?)?)?)?$/;function $s(e){if(e instanceof Date)return e;if("string"!=typeof e)return null==e?new Date(NaN):new Date(Math.round(e));var t=Ws.exec(e);if(!t)return new Date(NaN);if(t[8]){var i=+t[4]||0;return"Z"!==t[8].toUpperCase()&&(i-=t[8].slice(0,3)),new Date(Date.UTC(+t[1],+(t[2]||1)-1,+t[3]||1,i,+(t[5]||0),+t[6]||0,+t[7]||0))}return new Date(+t[1],+(t[2]||1)-1,+t[3]||1,+t[4]||0,+(t[5]||0),+t[6]||0,+t[7]||0)}function Gs(e){return Math.pow(10,Ys(e))}function Ys(e){return Math.floor(Math.log(e)/Math.LN10)}function qs(e,t){var i=Ys(e),n=Math.pow(10,i),o=e/n;return e=(t?o<1.5?1:o<2.5?2:o<4?3:o<7?5:10:o<1?1:o<2?2:o<3?3:o<5?5:10)*n,-20<=i?+e.toFixed(i<0?-i:0):e}function Zs(e){e.sort(function(e,t){return function e(t,i,n){return t.interval[n]<i.interval[n]||t.interval[n]===i.interval[n]&&(t.close[n]-i.close[n]==(n?-1:1)||!n&&e(t,i,1))}(e,t,0)?-1:1});for(var t=-1/0,i=1,n=0;n<e.length;){for(var o=e[n].interval,a=e[n].close,r=0;r<2;r++)o[r]<=t&&(o[r]=t,a[r]=r?1:1-i),t=o[r],i=a[r];o[0]===o[1]&&a[0]*a[1]!=1?e.splice(n,1):n++}return e}function Xs(e){return 0<=e-parseFloat(e)}var Ks=(Object.freeze||Object)({linearMap:Ls,parsePercent:Ps,round:Rs,asc:Us,getPrecision:Os,getPrecisionSafe:Bs,getPixelPrecision:zs,getPercentWithPrecision:Fs,MAX_SAFE_INTEGER:Hs,remRadian:Vs,isRadianAroundZero:js,parseDate:$s,quantity:Gs,nice:qs,reformIntervals:Zs,isNumeric:Xs});function Js(e){return isNaN(e)?"-":(e=(e+"").split("."))[0].replace(/(\d{1,3})(?=(?:\d{3})+(?!\d))/g,"$1,")+(1<e.length?"."+e[1]:"")}function Qs(e,t){return e=(e||"").toLowerCase().replace(/-(.)/g,function(e,t){return t.toUpperCase()}),t&&e&&(e=e.charAt(0).toUpperCase()+e.slice(1)),e}var el=Y,tl=/([&<>"'])/g,il={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function nl(e){return null==e?"":(e+"").replace(tl,function(e,t){return il[t]})}var ol=["a","b","c","d","e","f","g"],al=function(e,t){return"{"+e+(null==t?"":t)+"}"};function rl(e,t,i){R(t)||(t=[t]);var n=t.length;if(!n)return"";for(var o=t[0].$vars||[],a=0;a<o.length;a++){var r=ol[a];e=e.replace(al(r),al(r,0))}for(var s=0;s<n;s++)for(var l=0;l<o.length;l++){var d=t[s][o[l]];e=e.replace(al(ol[l],s),i?nl(d):d)}return e}function sl(i,e,n){return O(e,function(e,t){i=i.replace("{"+t+"}",n?nl(e):e)}),i}function ll(e,t){var i=(e=U(e)?{color:e,extraCssText:t}:e||{}).color,n=e.type;t=e.extraCssText;return i?"subItem"===n?'<span style="display:inline-block;vertical-align:middle;margin-right:8px;margin-left:3px;border-radius:4px;width:4px;height:4px;background-color:'+nl(i)+";"+(t||"")+'"></span>':'<span style="display:inline-block;margin-right:5px;border-radius:10px;width:10px;height:10px;background-color:'+nl(i)+";"+(t||"")+'"></span>':""}function dl(e,t){return"0000".substr(0,t-(e+="").length)+e}function cl(e,t,i){"week"!==e&&"month"!==e&&"quarter"!==e&&"half-year"!==e&&"year"!==e||(e="MM-dd\nyyyy");var n=$s(t),o=i?"UTC":"",a=n["get"+o+"FullYear"](),r=n["get"+o+"Month"]()+1,s=n["get"+o+"Date"](),l=n["get"+o+"Hours"](),d=n["get"+o+"Minutes"](),c=n["get"+o+"Seconds"](),u=n["get"+o+"Milliseconds"]();return e=e.replace("MM",dl(r,2)).replace("M",r).replace("yyyy",a).replace("yy",a%100).replace("dd",dl(s,2)).replace("d",s).replace("hh",dl(l,2)).replace("h",l).replace("mm",dl(d,2)).replace("m",d).replace("ss",dl(c,2)).replace("s",c).replace("SSS",dl(u,3))}function ul(e){return e?e.charAt(0).toUpperCase()+e.substr(1):e}var hl=Wi,fl=Fi,pl=(Object.freeze||Object)({addCommas:Js,toCamelCase:Qs,normalizeCssArray:el,encodeHTML:nl,formatTpl:rl,formatTplSimple:sl,getTooltipMarker:ll,formatTime:cl,capitalFirst:ul,truncateText:hl,getTextRect:fl}),ml=O,gl=["left","right","top","bottom","width","height"],vl=[["width","left","right"],["height","top","bottom"]];function yl(c,u,h,f,p){var m=0,g=0;null==f&&(f=1/0),null==p&&(p=1/0);var v=0;u.eachChild(function(e,t){var i,n,o=e.position,a=e.getBoundingRect(),r=u.childAt(t+1),s=r&&r.getBoundingRect();if("horizontal"===c){var l=a.width+(s?-s.x+a.x:0);v=f<(i=m+l)||e.newline?(m=0,i=l,g+=v+h,a.height):Math.max(v,a.height)}else{var d=a.height+(s?-s.y+a.y:0);v=p<(n=g+d)||e.newline?(m+=v+h,g=0,n=d,a.width):Math.max(v,a.width)}e.newline||(o[0]=m,o[1]=g,"horizontal"===c?m=i+h:g=n+h)})}var bl=yl;L(yl,"vertical"),L(yl,"horizontal");function xl(e,t,i){i=el(i||0);var n=t.width,o=t.height,a=Ps(e.left,n),r=Ps(e.top,o),s=Ps(e.right,n),l=Ps(e.bottom,o),d=Ps(e.width,n),c=Ps(e.height,o),u=i[2]+i[0],h=i[1]+i[3],f=e.aspect;switch(isNaN(d)&&(d=n-s-h-a),isNaN(c)&&(c=o-l-u-r),null!=f&&(isNaN(d)&&isNaN(c)&&(n/o<f?d=.8*n:c=.8*o),isNaN(d)&&(d=f*c),isNaN(c)&&(c=d/f)),isNaN(a)&&(a=n-s-d-h),isNaN(r)&&(r=o-l-c-u),e.left||e.right){case"center":a=n/2-d/2-i[3];break;case"right":a=n-d-h}switch(e.top||e.bottom){case"middle":case"center":r=o/2-c/2-i[0];break;case"bottom":r=o-c-u}a=a||0,r=r||0,isNaN(d)&&(d=n-h-a-(s||0)),isNaN(c)&&(c=o-u-r-(l||0));var p=new ii(a+i[3],r+i[0],d,c);return p.margin=i,p}function wl(e,t,i,n,o){var a=!o||!o.hv||o.hv[0],r=!o||!o.hv||o.hv[1],s=o&&o.boundingMode||"all";if(a||r){var l;if("raw"===s)l="group"===e.type?new ii(0,0,+t.width||0,+t.height||0):e.getBoundingRect();else if(l=e.getBoundingRect(),e.needLocalTransform()){var d=e.getLocalTransform();(l=l.clone()).applyTransform(d)}t=xl(E({width:l.width,height:l.height},t),i,n);var c=e.position,u=a?t.x-l.x:0,h=r?t.y-l.y:0;e.attr("position","raw"===s?[u,h]:[c[0]+u,c[1]+h])}}function _l(l,d,e){!B(e)&&(e={});var c=e.ignoreSize;!R(c)&&(c=[c,c]);var t=n(vl[0],0),i=n(vl[1],1);function n(e,t){var i={},n=0,o={},a=0;if(ml(e,function(e){o[e]=l[e]}),ml(e,function(e){u(d,e)&&(i[e]=o[e]=d[e]),h(i,e)&&n++,h(o,e)&&a++}),c[t])return h(d,e[1])?o[e[2]]=null:h(d,e[2])&&(o[e[1]]=null),o;if(2!==a&&n){if(2<=n)return i;for(var r=0;r<e.length;r++){var s=e[r];if(!u(i,s)&&u(l,s)){i[s]=l[s];break}}return i}return o}function u(e,t){return e.hasOwnProperty(t)}function h(e,t){return null!=e[t]&&"auto"!==e[t]}function o(e,t,i){ml(e,function(e){t[e]=i[e]})}o(vl[0],l,t),o(vl[1],l,i)}function Cl(e){return Sl({},e)}function Sl(t,i){return i&&t&&ml(gl,function(e){i.hasOwnProperty(e)&&(t[e]=i[e])}),t}var Tl,kl,Il=vo(),Nl=Is.extend({type:"component",id:"",name:"",mainType:"",subType:"",componentIndex:0,defaultOption:null,ecModel:null,dependentModels:[],uid:null,layoutMode:null,$constructor:function(e,t,i,n){Is.call(this,e,t,i,n),this.uid=Ds("ec_cpt_model")},init:function(e,t,i,n){this.mergeDefaultAndTheme(e,i)},mergeDefaultAndTheme:function(e,t){var i=this.layoutMode,n=i?Cl(e):{};m(e,t.getTheme().get(this.mainType)),m(e,this.getDefaultOption()),i&&_l(e,n,i)},mergeOption:function(e,t){m(this.option,e,!0);var i=this.layoutMode;i&&_l(this.option,e,i)},optionUpdated:function(e,t){},getDefaultOption:function(){var e=Il(this);if(!e.defaultOption){for(var t=[],i=this.constructor;i;){var n=i.prototype.defaultOption;n&&t.push(n),i=i.superClass}for(var o={},a=t.length-1;0<=a;a--)o=m(o,t[a],!0);e.defaultOption=o}return e.defaultOption},getReferringComponents:function(e){return this.ecModel.queryComponents({mainType:e,index:this.get(e+"Index",!0),id:this.get(e+"Id",!0)})}});Mo(Nl,{registerWhenExtend:!0}),kl={},(Tl=Nl).registerSubTypeDefaulter=function(e,t){e=So(e),kl[e.main]=t},Tl.determineSubType=function(e,t){var i=t.type;if(!i){var n=So(e).main;Tl.hasSubTypes(e)&&kl[n]&&(i=kl[n](t))}return i},function(e,g){function v(e,t){return e[t]||(e[t]={predecessor:[],successor:[]}),e[t]}e.topologicalTravel=function(e,t,i,n){if(e.length){var r,s,l,o=(s={},l=[],O(r=t,function(i){var t,n,o=v(s,i),e=o.originalDeps=g(i),a=(t=r,n=[],O(e,function(e){0<=w(t,e)&&n.push(e)}),n);o.entryCount=a.length,0===o.entryCount&&l.push(i),O(a,function(e){w(o.predecessor,e)<0&&o.predecessor.push(e);var t=v(s,e);w(t.successor,e)<0&&t.successor.push(i)})}),{graph:s,noEntryList:l}),a=o.graph,d=o.noEntryList,c={};for(O(e,function(e){c[e]=!0});d.length;){var u=d.pop(),h=a[u],f=!!c[u];f&&(i.call(n,u,h.originalDeps.slice()),delete c[u]),O(h.successor,f?m:p)}O(c,function(){throw new Error("Circle dependency may exists")})}function p(e){a[e].entryCount--,0===a[e].entryCount&&d.push(e)}function m(e){c[e]=!0,p(e)}}}(Nl,function(e){var t=[];O(Nl.getClassesByMainType(e),function(e){t=t.concat(e.prototype.dependencies||[])}),t=M(t,function(e){return So(e).main}),"dataset"!==e&&w(t,"dataset")<=0&&t.unshift("dataset");return t}),C(Nl,{getBoxLayoutParams:function(){return{left:this.get("left"),top:this.get("top"),right:this.get("right"),bottom:this.get("bottom"),width:this.get("width"),height:this.get("height")}}});var El="";"undefined"!=typeof navigator&&(El=navigator.platform||"");var Ml={color:["#c23531","#2f4554","#61a0a8","#d48265","#91c7ae","#749f83","#ca8622","#bda29a","#6e7074","#546570","#c4ccd3"],gradientColor:["#f6efa6","#d88273","#bf444c"],textStyle:{fontFamily:El.match(/^Win/)?"Microsoft YaHei":"sans-serif",fontSize:12,fontStyle:"normal",fontWeight:"normal"},blendMode:null,animation:"auto",animationDuration:1e3,animationDurationUpdate:300,animationEasing:"exponentialOut",animationEasingUpdate:"cubicOut",animationThreshold:2e3,progressiveThreshold:3e3,progressive:400,hoverLayerThreshold:3e3,useUTC:!1},Dl=vo();var Al={clearColorPalette:function(){Dl(this).colorIdx=0,Dl(this).colorNameMap={}},getColorFromPalette:function(e,t,i){var n=Dl(t=t||this),o=n.colorIdx||0,a=n.colorNameMap=n.colorNameMap||{};if(a.hasOwnProperty(e))return a[e];var r=so(this.get("color",!0)),s=this.get("colorLayer",!0),l=null!=i&&s?function(e,t){for(var i=e.length,n=0;n<i;n++)if(e[n].length>t)return e[n];return e[i-1]}(s,i):r;if((l=l||r)&&l.length){var d=l[o];return e&&(a[e]=d),n.colorIdx=(o+1)%l.length,d}}};function Ll(e){var t=e.get("coordinateSystem"),i={coordSysName:t,coordSysDims:[],axisMap:ee(),categoryAxisMap:ee()},n=Pl[t];if(n)return n(e,i,i.axisMap,i.categoryAxisMap),i}var Pl={cartesian2d:function(e,t,i,n){var o=e.getReferringComponents("xAxis")[0],a=e.getReferringComponents("yAxis")[0];if(I){if(!o)throw new Error('xAxis "'+j(e.get("xAxisIndex"),e.get("xAxisId"),0)+'" not found');if(!a)throw new Error('yAxis "'+j(e.get("xAxisIndex"),e.get("yAxisId"),0)+'" not found')}t.coordSysDims=["x","y"],i.set("x",o),i.set("y",a),Rl(o)&&(n.set("x",o),t.firstCategoryDimIndex=0),Rl(a)&&(n.set("y",a),t.firstCategoryDimIndex=1)},singleAxis:function(e,t,i,n){var o=e.getReferringComponents("singleAxis")[0];if(I&&!o)throw new Error("singleAxis should be specified.");t.coordSysDims=["single"],i.set("single",o),Rl(o)&&(n.set("single",o),t.firstCategoryDimIndex=0)},polar:function(e,t,i,n){var o=e.getReferringComponents("polar")[0],a=o.findAxisModel("radiusAxis"),r=o.findAxisModel("angleAxis");if(I){if(!r)throw new Error("angleAxis option not found");if(!a)throw new Error("radiusAxis option not found")}t.coordSysDims=["radius","angle"],i.set("radius",a),i.set("angle",r),Rl(a)&&(n.set("radius",a),t.firstCategoryDimIndex=0),Rl(r)&&(n.set("angle",r),t.firstCategoryDimIndex=1)},geo:function(e,t,i,n){t.coordSysDims=["lng","lat"]},parallel:function(e,o,a,r){var s=e.ecModel,t=s.getComponent("parallel",e.get("parallelIndex")),l=o.coordSysDims=t.dimensions.slice();O(t.parallelAxisIndex,function(e,t){var i=s.getComponent("parallelAxis",e),n=l[t];a.set(n,i),Rl(i)&&null==o.firstCategoryDimIndex&&(r.set(n,i),o.firstCategoryDimIndex=t)})}};function Rl(e){return"category"===e.get("type")}var Ul="original",Ol="arrayRows",Bl="objectRows",zl="keyedColumns",Fl="unknown",Hl="typedArray",Vl="column",jl="row";function Wl(e){this.fromDataset=e.fromDataset,this.data=e.data||(e.sourceFormat===zl?{}:[]),this.sourceFormat=e.sourceFormat||Fl,this.seriesLayoutBy=e.seriesLayoutBy||Vl,this.dimensionsDefine=e.dimensionsDefine,this.encodeDefine=e.encodeDefine&&ee(e.encodeDefine),this.startIndex=e.startIndex||0,this.dimensionsDetectCount=e.dimensionsDetectCount}Wl.seriesDataToSource=function(e){return new Wl({data:e,sourceFormat:F(e)?Hl:Ul,fromDataset:!1})},Io(Wl);var $l=vo();function Gl(e){var t=e.option,i=t.data,n=F(i)?Hl:Ul,o=!1,a=t.seriesLayoutBy,r=t.sourceHeader,s=t.dimensions,l=function(e){var t=e.option;if(!t.data)return e.ecModel.getComponent("dataset",t.datasetIndex||0)}(e);if(l){var d=l.option;i=d.source,n=$l(l).sourceFormat,o=!0,a=a||d.seriesLayoutBy,null==r&&(r=d.sourceHeader),s=s||d.dimensions}var c=function(e,t,i,n,o){if(!e)return{dimensionsDefine:Yl(o)};var a,r,s,l;if(t===Ol)"auto"===n||null==n?ql(function(e){null!=e&&"-"!==e&&(U(e)?null==r&&(r=1):r=0)},i,e,10):r=n?1:0,o||1!==r||(o=[],ql(function(e,t){o[t]=null!=e?e:""},i,e)),a=o?o.length:i===jl?e.length:e[0]?e[0].length:null;else if(t===Bl)o||(o=function(e){var t,i=0;for(;i<e.length&&!(t=e[i++]););if(t){var n=[];return O(t,function(e,t){n.push(t)}),n}}(e),s=!0);else if(t===zl)o||(o=[],s=!0,O(e,function(e,t){o.push(t)}));else if(t===Ul){var d=uo(e[0]);a=R(d)&&d.length||1}else t===Hl&&I&&q(!!o,"dimensions must be given if data is TypedArray.");s&&O(o,function(e,t){"name"===(B(e)?e.name:e)&&(l=t)});return{startIndex:r,dimensionsDefine:Yl(o),dimensionsDetectCount:a,potentialNameDimIndex:l}}(i,n,a,r,s),u=t.encode;!u&&l&&(u=function(e,t,i,n,o,a){var r=Ll(e),s={},l=[],d=[],c=e.subType,u=ee(["pie","map","funnel"]),h=ee(["line","bar","pictorialBar","scatter","effectScatter","candlestick","boxplot"]);if(r&&null!=h.get(c)){var f=e.ecModel,p=$l(f).datasetMap,m=t.uid+"_"+o,g=p.get(m)||p.set(m,{categoryWayDim:1,valueWayDim:0});O(r.coordSysDims,function(e){if(null==r.firstCategoryDimIndex){var t=g.valueWayDim++;s[e]=t,d.push(t)}else if(r.categoryAxisMap.get(e))s[e]=0,l.push(0);else{var t=g.categoryWayDim++;s[e]=t,d.push(t)}})}else if(null!=u.get(c)){for(var v,y=0;y<5&&null==v;y++)Zl(i,n,o,a.dimensionsDefine,a.startIndex,y)||(v=y);if(null!=v){s.value=v;var b=a.potentialNameDimIndex||Math.max(v-1,0);d.push(b),l.push(b)}}return l.length&&(s.itemName=l),d.length&&(s.seriesName=d),s}(e,l,i,n,a,c)),$l(e).source=new Wl({data:i,fromDataset:o,seriesLayoutBy:a,sourceFormat:n,dimensionsDefine:c.dimensionsDefine,startIndex:c.startIndex,dimensionsDetectCount:c.dimensionsDetectCount,encodeDefine:u})}function Yl(e){if(e){var n=ee();return M(e,function(e,t){if(null==(e=D({},B(e)?e:{name:e})).name)return e;e.name+="",null==e.displayName&&(e.displayName=e.name);var i=n.get(e.name);return i?e.name+="-"+i.count++:n.set(e.name,{count:1}),e})}}function ql(e,t,i,n){if(null==n&&(n=1/0),t===jl)for(var o=0;o<i.length&&o<n;o++)e(i[o]?i[o][0]:null,o);else{var a=i[0]||[];for(o=0;o<a.length&&o<n;o++)e(a[o],o)}}function Zl(e,t,i,n,o,a){var r,s;if(F(e))return!1;if(n&&(s=B(s=n[a])?s.name:s),t===Ol)if(i===jl){for(var l=e[a],d=0;d<(l||[]).length&&d<5;d++)if(null!=(r=f(l[o+d])))return r}else for(d=0;d<e.length&&d<5;d++){var c=e[o+d];if(c&&null!=(r=f(c[a])))return r}else if(t===Bl){if(!s)return;for(d=0;d<e.length&&d<5;d++){if((u=e[d])&&null!=(r=f(u[s])))return r}}else if(t===zl){if(!s)return;if(!(l=e[s])||F(l))return!1;for(d=0;d<l.length&&d<5;d++)if(null!=(r=f(l[d])))return r}else if(t===Ul)for(d=0;d<e.length&&d<5;d++){var u,h=uo(u=e[d]);if(!R(h))return!1;if(null!=(r=f(h[a])))return r}function f(e){return(null==e||!isFinite(e)||""===e)&&(!(!U(e)||"-"===e)||void 0)}return!1}var Xl="\0_ec_inner",Kl=Is.extend({init:function(e,t,i,n){i=i||{},this.option=null,this._theme=new Is(i),this._optionManager=n},setOption:function(e,t){q(!(Xl in e),"please use chart.getOption()"),this._optionManager.setOption(e,t),this.resetOption(null)},resetOption:function(e){var t=!1,i=this._optionManager;if(!e||"recreate"===e){var n=i.mountOption("recreate"===e);this.option&&"recreate"!==e?(this.restoreData(),this.mergeOption(n)):function(e){e=e,this.option={},this.option[Xl]=1,this._componentsMap=ee({series:[]}),this._seriesIndices,this._seriesIndicesMap,i=e,t=this._theme.option,n=i.color&&!i.colorLayer,O(t,function(e,t){"colorLayer"===t&&n||Nl.hasClass(t)||("object"==typeof e?i[t]=i[t]?m(i[t],e,!1):N(e):null==i[t]&&(i[t]=e))}),m(e,Ml,!1),this.mergeOption(e);var i,t,n}.call(this,n),t=!0}if("timeline"!==e&&"media"!==e||this.restoreData(),!e||"recreate"===e||"timeline"===e){var o=i.getTimelineOption(this);o&&(this.mergeOption(o),t=!0)}if(!e||"recreate"===e||"media"===e){var a=i.getMediaOption(this,this._api);a.length&&O(a,function(e){this.mergeOption(e,t=!0)},this)}return t},mergeOption:function(n){var l=this.option,d=this._componentsMap,i=[];$l(this).datasetMap=ee(),O(n,function(e,t){null!=e&&(Nl.hasClass(t)?t&&i.push(t):l[t]=null==l[t]?N(e):m(l[t],e,!0))}),Nl.topologicalTravel(i,Nl.getAllClassMainTypes(),function(r,e){var t=so(n[r]),i=ho(d.get(r),t);fo(i),O(i,function(e,t){var i,n,o,a=e.option;B(a)&&(e.keyInfo.mainType=r,e.keyInfo.subType=(i=r,n=a,o=e.exist,n.type?n.type:o?o.subType:Nl.determineSubType(i,n)))});var s=function(t,e){R(e)||(e=e?[e]:[]);var i={};return O(e,function(e){i[e]=(t.get(e)||[]).slice()}),i}(d,e);l[r]=[],d.set(r,[]),O(i,function(e,t){var i=e.exist,n=e.option;if(q(B(n)||i,"Empty component definition"),n){var o=Nl.getClass(r,e.keyInfo.subType,!0);if(i&&i instanceof o)i.name=e.keyInfo.name,i.mergeOption(n,this),i.optionUpdated(n,!1);else{var a=D({dependentModels:s,componentIndex:t},e.keyInfo);D(i=new o(n,this,this,a),a),i.init(n,this,this,a),i.optionUpdated(null,!0)}}else i.mergeOption({},this),i.optionUpdated({},!1);d.get(r)[t]=i,l[r][t]=i.option},this),"series"===r&&Jl(this,d.get("series"))},this),this._seriesIndicesMap=ee(this._seriesIndices=this._seriesIndices||[])},getOption:function(){var n=N(this.option);return O(n,function(e,t){if(Nl.hasClass(t)){for(var i=(e=so(e)).length-1;0<=i;i--)mo(e[i])&&e.splice(i,1);n[t]=e}}),delete n[Xl],n},getTheme:function(){return this._theme},getComponent:function(e,t){var i=this._componentsMap.get(e);if(i)return i[t||0]},queryComponents:function(e){var t=e.mainType;if(!t)return[];var i,n=e.index,o=e.id,a=e.name,r=this._componentsMap.get(t);if(!r||!r.length)return[];if(null!=n)R(n)||(n=[n]),i=T(M(n,function(e){return r[e]}),function(e){return!!e});else if(null!=o){var s=R(o);i=T(r,function(e){return s&&0<=w(o,e.id)||!s&&e.id===o})}else if(null!=a){var l=R(a);i=T(r,function(e){return l&&0<=w(a,e.name)||!l&&e.name===a})}else i=r.slice();return Ql(i,e)},findComponents:function(e){var t,i,n,o,a,r=e.query,s=e.mainType,l=(i=s+"Index",n=s+"Id",o=s+"Name",!(t=r)||null==t[i]&&null==t[n]&&null==t[o]?null:{mainType:s,index:t[i],id:t[n],name:t[o]}),d=l?this.queryComponents(l):this._componentsMap.get(s);return a=Ql(d,e),e.filter?T(a,e.filter):a},eachComponent:function(e,n,o){var t=this._componentsMap;if("function"==typeof e)o=n,n=e,t.each(function(e,i){O(e,function(e,t){n.call(o,i,e,t)})});else if(U(e))O(t.get(e),n,o);else if(B(e)){O(this.findComponents(e),n,o)}},getSeriesByName:function(t){return T(this._componentsMap.get("series"),function(e){return e.name===t})},getSeriesByIndex:function(e){return this._componentsMap.get("series")[e]},getSeriesByType:function(t){return T(this._componentsMap.get("series"),function(e){return e.subType===t})},getSeries:function(){return this._componentsMap.get("series").slice()},getSeriesCount:function(){return this._componentsMap.get("series").length},eachSeries:function(i,n){ed(this),O(this._seriesIndices,function(e){var t=this._componentsMap.get("series")[e];i.call(n,t,e)},this)},eachRawSeries:function(e,t){O(this._componentsMap.get("series"),e,t)},eachSeriesByType:function(i,n,o){ed(this),O(this._seriesIndices,function(e){var t=this._componentsMap.get("series")[e];t.subType===i&&n.call(o,t,e)},this)},eachRawSeriesByType:function(e,t,i){return O(this.getSeriesByType(e),t,i)},isSeriesFiltered:function(e){return ed(this),null==this._seriesIndicesMap.get(e.componentIndex)},getCurrentSeriesIndices:function(){return(this._seriesIndices||[]).slice()},filterSeries:function(e,t){ed(this),Jl(this,T(this._componentsMap.get("series"),e,t))},restoreData:function(i){var n=this._componentsMap;Jl(this,n.get("series"));var o=[];n.each(function(e,t){o.push(t)}),Nl.topologicalTravel(o,Nl.getAllClassMainTypes(),function(t,e){O(n.get(t),function(e){("series"!==t||!function(e,t){if(t){var i=t.seiresIndex,n=t.seriesId,o=t.seriesName;return null!=i&&e.componentIndex!==i||null!=n&&e.id!==n||null!=o&&e.name!==o}}(e,i))&&e.restoreData()})})}});function Jl(e,t){e._seriesIndicesMap=ee(e._seriesIndices=M(t,function(e){return e.componentIndex})||[])}function Ql(e,t){return t.hasOwnProperty("subType")?T(e,function(e){return e.subType===t.subType}):e}function ed(e){if(I&&!e._seriesIndices)throw new Error("Option should contains series.")}C(Kl,Al);var td=["getDom","getZr","getWidth","getHeight","getDevicePixelRatio","dispatchAction","isDisposed","on","off","getDataURL","getConnectedDataURL","getModel","getOption","getViewOfComponentModel","getViewOfSeriesModel"];function id(t){O(td,function(e){this[e]=A(t[e],t)},this)}var nd={};function od(){this._coordinateSystems=[]}od.prototype={constructor:od,create:function(n,o){var a=[];O(nd,function(e,t){var i=e.create(n,o);a=a.concat(i||[])}),this._coordinateSystems=a},update:function(t,i){O(this._coordinateSystems,function(e){e.update&&e.update(t,i)})},getCoordinateSystems:function(){return this._coordinateSystems.slice()}},od.register=function(e,t){nd[e]=t},od.get=function(e){return nd[e]};var ad=O,rd=N,sd=M,ld=m,dd=/^(min|max)?(.+)$/;function cd(e){this._api=e,this._timelineOptions=[],this._mediaList=[],this._mediaDefault,this._currentMediaIndices=[],this._optionBackup,this._newBaseOption}function ud(e,t,i){var l={width:t,height:i,aspectratio:t/i},d=!0;return O(e,function(e,t){var i=t.match(dd);if(i&&i[1]&&i[2]){var n,o,a,r=i[1],s=i[2].toLowerCase();n=l[s],o=e,("min"===(a=r)?o<=n:"max"===a?n<=o:n===o)||(d=!1)}}),d}cd.prototype={constructor:cd,setOption:function(e,t){e&&O(so(e.series),function(e){e&&e.data&&F(e.data)&&K(e.data)}),e=rd(e,!0);var o,i,n=this._optionBackup,a=function(e,i,n){var t,o,a=[],r=[],s=e.timeline;e.baseOption&&(o=e.baseOption);(s||e.options)&&(o=o||{},a=(e.options||[]).slice());if(e.media){o=o||{};var l=e.media;ad(l,function(e){e&&e.option&&(e.query?r.push(e):t||(t=e))})}o||(o=e);o.timeline||(o.timeline=s);return ad([o].concat(a).concat(M(r,function(e){return e.option})),function(t){ad(i,function(e){e(t,n)})}),{baseOption:o,timelineOptions:a,mediaDefault:t,mediaList:r}}.call(this,e,t,!n);this._newBaseOption=a.baseOption,n?(o=n.baseOption,i=a.baseOption,ad(i=i||{},function(e,t){if(null!=e){var i=o[t];if(Nl.hasClass(t)){e=so(e);var n=ho(i=so(i),e);o[t]=sd(n,function(e){return e.option&&e.exist?ld(e.exist,e.option,!0):e.exist||e.option})}else o[t]=ld(i,e,!0)}}),a.timelineOptions.length&&(n.timelineOptions=a.timelineOptions),a.mediaList.length&&(n.mediaList=a.mediaList),a.mediaDefault&&(n.mediaDefault=a.mediaDefault)):this._optionBackup=a},mountOption:function(e){var t=this._optionBackup;return this._timelineOptions=sd(t.timelineOptions,rd),this._mediaList=sd(t.mediaList,rd),this._mediaDefault=rd(t.mediaDefault),this._currentMediaIndices=[],rd(e?t.baseOption:this._newBaseOption)},getTimelineOption:function(e){var t,i=this._timelineOptions;if(i.length){var n=e.getComponent("timeline");n&&(t=rd(i[n.getCurrentIndex()],!0))}return t},getMediaOption:function(e){var t,i,n=this._api.getWidth(),o=this._api.getHeight(),a=this._mediaList,r=this._mediaDefault,s=[],l=[];if(!a.length&&!r)return l;for(var d=0,c=a.length;d<c;d++)ud(a[d].query,n,o)&&s.push(d);return!s.length&&r&&(s=[-1]),s.length&&(t=s,i=this._currentMediaIndices,t.join(",")!==i.join(","))&&(l=sd(s,function(e){return rd(-1===e?r.option:a[e].option)})),this._currentMediaIndices=s,l}};var hd=O,fd=B,pd=["areaStyle","lineStyle","nodeStyle","linkStyle","chordStyle","label","labelLine"];function md(e){var t=e&&e.itemStyle;if(t)for(var i=0,n=pd.length;i<n;i++){var o=pd[i],a=t.normal,r=t.emphasis;a&&a[o]&&(e[o]=e[o]||{},e[o].normal?m(e[o].normal,a[o]):e[o].normal=a[o],a[o]=null),r&&r[o]&&(e[o]=e[o]||{},e[o].emphasis?m(e[o].emphasis,r[o]):e[o].emphasis=r[o],r[o]=null)}}function gd(e,t,i){if(e&&e[t]&&(e[t].normal||e[t].emphasis)){var n=e[t].normal,o=e[t].emphasis;n&&(i?(e[t].normal=e[t].emphasis=null,E(e[t],n)):e[t]=n),o&&(e.emphasis=e.emphasis||{},e.emphasis[t]=o)}}function vd(e){gd(e,"itemStyle"),gd(e,"lineStyle"),gd(e,"areaStyle"),gd(e,"label"),gd(e,"labelLine"),gd(e,"upperLabel"),gd(e,"edgeLabel")}function yd(e,t){var i=fd(e)&&e[t],n=fd(i)&&i.textStyle;if(n)for(var o=0,a=co.length;o<a;o++){t=co[o];n.hasOwnProperty(t)&&(i[t]=n[t])}}function bd(e){e&&(vd(e),yd(e,"label"),e.emphasis&&yd(e.emphasis,"label"))}function xd(e){return R(e)?e:e?[e]:[]}function wd(e){return(R(e)?e[0]:e)||{}}var _d=function(t,e){hd(xd(t.series),function(e){fd(e)&&function(e){if(fd(e)){md(e),vd(e),yd(e,"label"),yd(e,"upperLabel"),yd(e,"edgeLabel"),e.emphasis&&(yd(e.emphasis,"label"),yd(e.emphasis,"upperLabel"),yd(e.emphasis,"edgeLabel")),(i=e.markPoint)&&(md(i),bd(i)),(n=e.markLine)&&(md(n),bd(n));var t=e.markArea;t&&bd(t);var i,n,o=e.data;if("graph"===e.type){o=o||e.nodes;var a=e.links||e.edges;if(a&&!F(a))for(var r=0;r<a.length;r++)bd(a[r]);O(e.categories,function(e){vd(e)})}if(o&&!F(o))for(r=0;r<o.length;r++)bd(o[r]);if((i=e.markPoint)&&i.data){var s=i.data;for(r=0;r<s.length;r++)bd(s[r])}if((n=e.markLine)&&n.data){var l=n.data;for(r=0;r<l.length;r++)R(l[r])?(bd(l[r][0]),bd(l[r][1])):bd(l[r])}"gauge"===e.type?(yd(e,"axisLabel"),yd(e,"title"),yd(e,"detail")):"treemap"===e.type?(gd(e.breadcrumb,"itemStyle"),O(e.levels,function(e){vd(e)})):"tree"===e.type&&vd(e.leaves)}}(e)});var i=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","parallelAxis","radar"];e&&i.push("valueAxis","categoryAxis","logAxis","timeAxis"),hd(i,function(e){hd(xd(t[e]),function(e){e&&(yd(e,"axisLabel"),yd(e.axisPointer,"label"))})}),hd(xd(t.parallel),function(e){var t=e&&e.parallelAxisDefault;yd(t,"axisLabel"),yd(t&&t.axisPointer,"label")}),hd(xd(t.calendar),function(e){gd(e,"itemStyle"),yd(e,"dayLabel"),yd(e,"monthLabel"),yd(e,"yearLabel")}),hd(xd(t.radar),function(e){yd(e,"name")}),hd(xd(t.geo),function(e){fd(e)&&(bd(e),hd(xd(e.regions),function(e){bd(e)}))}),hd(xd(t.timeline),function(e){bd(e),gd(e,"label"),gd(e,"itemStyle"),gd(e,"controlStyle",!0);var t=e.data;R(t)&&O(t,function(e){B(e)&&(gd(e,"label"),gd(e,"itemStyle"))})}),hd(xd(t.toolbox),function(e){gd(e,"iconStyle"),hd(e.feature,function(e){gd(e,"iconStyle")})}),yd(wd(t.axisPointer),"label"),yd(wd(t.tooltip).axisPointer,"label")};function Cd(t){O(Sd,function(e){e[0]in t&&!(e[1]in t)&&(t[e[1]]=t[e[0]])})}var Sd=[["x","left"],["y","top"],["x2","right"],["y2","bottom"]],Td=["grid","geo","parallel","legend","toolbox","title","visualMap","dataZoom","timeline"],kd=function(i,e){_d(i,e),i.series=so(i.series),O(i.series,function(e){if(B(e)){var t=e.type;if("pie"!==t&&"gauge"!==t||null!=e.clockWise&&(e.clockwise=e.clockWise),"gauge"===t){var i=function(e,t){t=t.split(",");for(var i=e,n=0;n<t.length&&null!=(i=i&&i[t[n]]);n++);return i}(e,"pointer.color");null!=i&&function(e,t,i,n){t=t.split(",");for(var o,a=e,r=0;r<t.length-1;r++)null==a[o=t[r]]&&(a[o]={}),a=a[o];(n||null==a[t[r]])&&(a[t[r]]=i)}(e,"itemStyle.normal.color",i)}Cd(e)}}),i.dataRange&&(i.visualMap=i.dataRange),O(Td,function(e){var t=i[e];t&&(R(t)||(t=[t]),O(t,function(e){Cd(e)}))})};function Id(g){O(g,function(c,u){var h=[],f=[NaN,NaN],e=[c.stackResultDimension,c.stackedOverDimension],p=c.data,m=c.isStackedByIndex,t=p.map(e,function(e,t,i){var n,o,a=p.get(c.stackedDimension,i);if(isNaN(a))return f;m?o=p.getRawIndex(i):n=p.get(c.stackedByDimension,i);for(var r=NaN,s=u-1;0<=s;s--){var l=g[s];if(m||(o=l.data.rawIndexOf(l.stackedByDimension,n)),0<=o){var d=l.data.getByRawIndex(l.stackResultDimension,o);if(0<=a&&0<d||a<=0&&d<0){a+=d,r=d;break}}}return h[0]=a,h[1]=r,h});p.hostModel.setData(t),c.data=t})}function Nd(e,t){Wl.isInstance(e)||(e=Wl.seriesDataToSource(e)),this._source=e;var i=this._data=e.data,n=e.sourceFormat;if(n===Hl){if(I&&null==t)throw new Error("Typed array data must specify dimension size");this._offset=0,this._dimSize=t,this._data=i}var o=Md[n===Ol?n+"_"+e.seriesLayoutBy:n];I&&q(o,"Invalide sourceFormat: "+n),D(this,o)}var Ed=Nd.prototype;Ed.pure=!1;var Md={arrayRows_column:{pure:Ed.persistent=!0,count:function(){return Math.max(0,this._data.length-this._source.startIndex)},getItem:function(e){return this._data[e+this._source.startIndex]},appendData:Ld},arrayRows_row:{pure:!0,count:function(){var e=this._data[0];return e?Math.max(0,e.length-this._source.startIndex):0},getItem:function(e){e+=this._source.startIndex;for(var t=[],i=this._data,n=0;n<i.length;n++){var o=i[n];t.push(o?o[e]:null)}return t},appendData:function(){throw new Error('Do not support appendData when set seriesLayoutBy: "row".')}},objectRows:{pure:!0,count:Dd,getItem:Ad,appendData:Ld},keyedColumns:{pure:!0,count:function(){var e=this._source.dimensionsDefine[0].name,t=this._data[e];return t?t.length:0},getItem:function(e){for(var t=[],i=this._source.dimensionsDefine,n=0;n<i.length;n++){var o=this._data[i[n].name];t.push(o?o[e]:null)}return t},appendData:function(e){var o=this._data;O(e,function(e,t){for(var i=o[t]||(o[t]=[]),n=0;n<(e||[]).length;n++)i.push(e[n])})}},original:{count:Dd,getItem:Ad,appendData:Ld},typedArray:{persistent:!(Ed.getSource=function(){return this._source}),pure:!0,count:function(){return this._data?this._data.length/this._dimSize:0},getItem:function(e,t){e-=this._offset,t=t||[];for(var i=this._dimSize*e,n=0;n<this._dimSize;n++)t[n]=this._data[i+n];return t},appendData:function(e){I&&q(F(e),"Added data must be TypedArray if data in initialization is TypedArray"),this._data=e},clean:function(){this._offset+=this.count(),this._data=null}}};function Dd(){return this._data.length}function Ad(e){return this._data[e]}function Ld(e){for(var t=0;t<e.length;t++)this._data.push(e[t])}var Pd={arrayRows:Rd,objectRows:function(e,t,i,n){return null!=i?e[n]:e},keyedColumns:Rd,original:function(e,t,i,n){var o=uo(e);return null!=i&&o instanceof Array?o[i]:o},typedArray:Rd};function Rd(e,t,i,n){return null!=i?e[i]:e}var Ud={arrayRows:Od,objectRows:function(e,t,i,n){return Bd(e[t],this._dimensionInfos[t])},keyedColumns:Od,original:function(e,t,i,n){var o,a=e&&(null==e.value?e:e.value);return this._rawData.pure||(!oo(o=e)||o instanceof Array)||(this.hasItemOption=!0),Bd(a instanceof Array?a[n]:a,this._dimensionInfos[t])},typedArray:function(e,t,i,n){return e[n]}};function Od(e,t,i,n){return Bd(e[n],this._dimensionInfos[t])}function Bd(e,t){var i=t&&t.type;if("ordinal"!==i)return"time"===i&&"number"!=typeof e&&null!=e&&"-"!==e&&(e=+$s(e)),null==e||""===e?NaN:+e;var n=t&&t.ordinalMeta;return n?n.parseAndCollect(e):e}function zd(e,t,i){if(e){var n=e.getRawDataItem(t);if(null!=n){var o,a,r=e.getProvider().getSource().sourceFormat,s=e.getDimensionInfo(i);return s&&(o=s.name,a=s.index),Pd[r](n,t,a,o)}}}function Fd(e,t,i){if(e){var n=e.getProvider().getSource().sourceFormat;if(n===Ul||n===Bl){var o=e.getRawDataItem(t);return n!==Ul||B(o)||(o=null),o?o[i]:void 0}}}var Hd=/\{@(.+?)\}/g,Vd={getDataParams:function(e,t){var i=this.getData(t),n=this.getRawValue(e,t),o=i.getRawIndex(e),a=i.getName(e),r=i.getRawDataItem(e),s=i.getItemVisual(e,"color");return{componentType:this.mainType,componentSubType:this.subType,seriesType:"series"===this.mainType?this.subType:null,seriesIndex:this.seriesIndex,seriesId:this.id,seriesName:this.name,name:a,dataIndex:o,data:r,dataType:t,value:n,color:s,marker:ll(s),$vars:["seriesName","name","value"]}},getFormattedLabel:function(n,e,t,i,o){e=e||"normal";var a=this.getData(t),r=a.getItemModel(n),s=this.getDataParams(n,t);null!=i&&s.value instanceof Array&&(s.value=s.value[i]);var l=r.get("normal"===e?[o||"label","formatter"]:[e,o||"label","formatter"]);return"function"==typeof l?(s.status=e,l(s)):"string"==typeof l?rl(l,s).replace(Hd,function(e,t){var i=t.length;return"["===t.charAt(0)&&"]"===t.charAt(i-1)&&(t=+t.slice(1,i-1)),zd(a,n,t)}):void 0},getRawValue:function(e,t){return zd(this.getData(t),e)},formatTooltip:function(){}};function jd(e){return new Wd(e)}function Wd(e){e=e||{},this._reset=e.reset,this._plan=e.plan,this._count=e.count,this._onDirty=e.onDirty,this._dirty=!0,this.context}var $d=Wd.prototype;$d.perform=function(e){var t,i=this._upstream,n=e&&e.skip;if(this._dirty&&i){var o=this.context;o.data=o.outputData=i.context.outputData}this.__pipeline&&(this.__pipeline.currentTask=this),this._plan&&!n&&(t=this._plan(this.context));var a,r=c(this._modBy),s=this._modDataCount||0,l=c(e&&e.modBy),d=e&&e.modDataCount||0;function c(e){return!(1<=e)&&(e=1),e}r===l&&s===d||(t="reset"),(this._dirty||"reset"===t)&&(this._dirty=!1,a=function(e,t){var i,n;e._dueIndex=e._outputDueEnd=e._dueEnd=0,e._settedOutputEnd=null,!t&&e._reset&&((i=e._reset(e.context))&&i.progress&&(n=i.forceFirstProgress,i=i.progress),R(i)&&!i.length&&(i=null));e._progress=i,e._modBy=e._modDataCount=null;var o=e._downstream;return o&&o.dirty(),n}(this,n)),this._modBy=l,this._modDataCount=d;var u=e&&e.step;if(this._dueEnd=i?(I&&q(null!=i._outputDueEnd),i._outputDueEnd):(I&&q(!this._progress||this._count),this._count?this._count(this.context):1/0),this._progress){var h=this._dueIndex,f=Math.min(null!=u?this._dueIndex+u:1/0,this._dueEnd);if(!n&&(a||h<f)){var p=this._progress;if(R(p))for(var m=0;m<p.length;m++)Yd(this,p[m],h,f,l,d);else Yd(this,p,h,f,l,d)}this._dueIndex=f;var g=null!=this._settedOutputEnd?this._settedOutputEnd:f;I&&q(g>=this._outputDueEnd),this._outputDueEnd=g}else this._dueIndex=this._outputDueEnd=null!=this._settedOutputEnd?this._settedOutputEnd:this._dueEnd;return this.unfinished()};var Gd=function(){var o,a,r,s,l,d={reset:function(e,t,i,n){a=e,o=t,r=i,s=n,l=Math.ceil(s/r),d.next=1<r&&0<s?u:c}};return d;function c(){return a<o?a++:null}function u(){var e=a%l*r+Math.ceil(a/l),t=o<=a?null:e<s?e:a;return a++,t}}();function Yd(e,t,i,n,o,a){Gd.reset(i,n,o,a),e._callingProgress=t,e._callingProgress({start:i,end:n,count:n-i,next:Gd.next},e.context)}$d.dirty=function(){this._dirty=!0,this._onDirty&&this._onDirty(this.context)},$d.unfinished=function(){return this._progress&&this._dueIndex<this._dueEnd},$d.pipe=function(e){I&&q(e&&!e._disposed&&e!==this),(this._downstream!==e||this._dirty)&&((this._downstream=e)._upstream=this,e.dirty())},$d.dispose=function(){this._disposed||(this._upstream&&(this._upstream._downstream=null),this._downstream&&(this._downstream._upstream=null),this._dirty=!1,this._disposed=!0)},$d.getUpstream=function(){return this._upstream},$d.getDownstream=function(){return this._downstream},$d.setOutputEnd=function(e){this._outputDueEnd=this._settedOutputEnd=e};var qd=vo(),Zd=Nl.extend({type:"series.__base__",seriesIndex:0,coordinateSystem:null,defaultOption:null,legendDataProvider:null,visualColorAccessPath:"itemStyle.color",layoutMode:null,init:function(e,t,i,n){this.seriesIndex=this.componentIndex,this.dataTask=jd({count:Kd,reset:Jd}),this.dataTask.context={model:this},this.mergeDefaultAndTheme(e,i),Gl(this);var o=this.getInitialData(e,i);ec(o,this),this.dataTask.context.data=o,I&&q(o,"getInitialData returned invalid data."),qd(this).dataBeforeProcessed=o,Xd(this)},mergeDefaultAndTheme:function(e,t){var i=this.layoutMode,n=i?Cl(e):{},o=this.subType;Nl.hasClass(o)&&(o+="Series"),m(e,t.getTheme().get(this.subType)),m(e,this.getDefaultOption()),lo(e,"label",["show"]),this.fillDataTextStyle(e.data),i&&_l(e,n,i)},mergeOption:function(e,t){e=m(this.option,e,!0),this.fillDataTextStyle(e.data);var i=this.layoutMode;i&&_l(this.option,e,i),Gl(this);var n=this.getInitialData(e,t);ec(n,this),this.dataTask.dirty(),this.dataTask.context.data=n,qd(this).dataBeforeProcessed=n,Xd(this)},fillDataTextStyle:function(e){if(e&&!F(e))for(var t=["show"],i=0;i<e.length;i++)e[i]&&e[i].label&&lo(e[i],"label",t)},getInitialData:function(){},appendData:function(e){this.getRawData().appendData(e.data)},getData:function(e){var t=ic(this);if(t){var i=t.context.data;return null==e?i:i.getLinkedData(e)}return qd(this).data},setData:function(e){var t=ic(this);if(t){var i=t.context;i.data!==e&&t.modifyOutputEnd&&t.setOutputEnd(e.count()),i.outputData=e,t!==this.dataTask&&(i.data=e)}qd(this).data=e},getSource:function(){return $l(this).source},getRawData:function(){return qd(this).dataBeforeProcessed},getBaseAxis:function(){var e=this.coordinateSystem;return e&&e.getBaseAxis&&e.getBaseAxis()},formatTooltip:function(i,l,e){function t(e){return nl(Js(e))}var d=this.getData(),n=d.mapDimension("defaultedTooltip",!0),o=n.length,a=this.getRawValue(i),r=R(a),c=d.getItemVisual(i,"color");B(c)&&c.colorStops&&(c=(c.colorStops[0]||{}).color),c=c||"transparent";var s=1<o||r&&!o?function(e){var r=S(e,function(e,t,i){var n=d.getDimensionInfo(i);return e|(n&&!1!==n.tooltip&&null!=n.displayName)},0),s=[];function t(e,t){var i=d.getDimensionInfo(t);if(i&&!1!==i.otherDims.tooltip){var n=i.type,o=ll({color:c,type:"subItem"}),a=(r?o+nl(i.displayName||"-")+": ":"")+nl("ordinal"===n?e+"":"time"===n?l?"":cl("yyyy/MM/dd hh:mm:ss",e):Js(e));a&&s.push(a)}}return n.length?O(n,function(e){t(zd(d,i,e),e)}):O(e,t),(r?"<br/>":"")+s.join(r?"<br/>":", ")}(a):t(o?zd(d,i,n[0]):r?a[0]:a),u=ll(c),h=d.getName(i),f=this.name;return po(this)||(f=""),f=f?nl(f)+(l?": ":"<br/>"):"",l?u+f+s:f+u+(h?nl(h)+": "+s:s)},isAnimationEnabled:function(){if(v.node)return!1;var e=this.getShallow("animation");return e&&this.getData().count()>this.getShallow("animationThreshold")&&(e=!1),e},restoreData:function(){this.dataTask.dirty()},getColorFromPalette:function(e,t,i){var n=this.ecModel,o=Al.getColorFromPalette.call(this,e,t,i);return o||(o=n.getColorFromPalette(e,t,i)),o},coordDimToDataDim:function(e){return this.getRawData().mapDimension(e,!0)},getProgressive:function(){return this.get("progressive")},getProgressiveThreshold:function(){return this.get("progressiveThreshold")},getAxisTooltipData:null,getTooltipPosition:null,pipeTask:null,preventIncremental:null,pipelineContext:null});function Xd(e){var i,t,n,o=e.name;po(e)||(e.name=(i=e.getRawData(),t=i.mapDimension("seriesName",!0),n=[],O(t,function(e){var t=i.getDimensionInfo(e);t.displayName&&n.push(t.displayName)}),n.join(" ")||o))}function Kd(e){return e.model.getRawData().count()}function Jd(e){var t=e.model;return t.setData(t.getRawData().cloneShallow()),Qd}function Qd(e,t){e.end>t.outputData.count()&&t.model.getRawData().cloneShallow(t.outputData)}function ec(t,i){O(t.CHANGABLE_METHODS,function(e){t.wrapMethod(e,L(tc,i))})}function tc(e){var t=ic(e);t&&t.setOutputEnd(this.count())}function ic(e){var t=(e.ecModel||{}).scheduler,i=t&&t.getPipeline(e.uid);if(i){var n=i.currentTask;if(n){var o=n.agentStubMap;o&&(n=o.get(e.uid))}return n}}C(Zd,Vd),C(Zd,Al);var nc=function(){this.group=new ni,this.uid=Ds("viewComponent")};nc.prototype={constructor:nc,init:function(e,t){},render:function(e,t,i,n){},dispose:function(){}};var oc=nc.prototype;oc.updateView=oc.updateLayout=oc.updateVisual=function(e,t,i,n){},To(nc),Mo(nc,{registerWhenExtend:!0});var ac=function(){var s=vo();return function(e){var t=s(e),i=e.pipelineContext,n=t.large,o=t.progressiveRender,a=t.large=i.large,r=t.progressiveRender=i.progressiveRender;return!!(n^a||o^r)&&"reset"}},rc=vo(),sc=ac();function lc(){this.group=new ni,this.uid=Ds("viewChart"),this.renderTask=jd({plan:hc,reset:fc}),this.renderTask.context={view:this}}var dc=lc.prototype={type:"chart",init:function(e,t){},render:function(e,t,i,n){},highlight:function(e,t,i,n){uc(e.getData(),n,"emphasis")},downplay:function(e,t,i,n){uc(e.getData(),n,"normal")},remove:function(e,t){this.group.removeAll()},dispose:function(){},incrementalPrepareRender:null,incrementalRender:null,updateTransform:null};function cc(e,t){if(e&&(e.trigger(t),"group"===e.type))for(var i=0;i<e.childCount();i++)cc(e.childAt(i),t)}function uc(t,e,i){var n=go(t,e);null!=n?O(so(n),function(e){cc(t.getItemGraphicEl(e),i)}):t.eachItemGraphicEl(function(e){cc(e,i)})}function hc(e){return sc(e.model)}function fc(e){var t=e.model,i=e.ecModel,n=e.api,o=e.payload,a=t.pipelineContext.progressiveRender,r=e.view,s=o&&rc(o).updateMethod,l=a?"incrementalPrepareRender":s&&r[s]?s:"render";return"render"!==l&&r[l](t,i,n,o),pc[l]}dc.updateView=dc.updateLayout=dc.updateVisual=function(e,t,i,n){this.render(e,t,i,n)},To(lc,["dispose"]),Mo(lc,{registerWhenExtend:!0}),lc.markUpdateMethod=function(e,t){rc(e).updateMethod=t};var pc={incrementalPrepareRender:{progress:function(e,t){t.view.incrementalRender(e,t.model,t.ecModel,t.api,t.payload)}},render:{forceFirstProgress:!0,progress:function(e,t){t.view.render(t.model,t.ecModel,t.api,t.payload)}}},mc="\0__throttleOriginMethod",gc="\0__throttleRate",vc="\0__throttleType";function yc(e,i,n){var o,a,r,s,l,d=0,c=0,u=null;function h(){c=(new Date).getTime(),u=null,e.apply(r,s||[])}i=i||0;var t=function(){o=(new Date).getTime(),r=this,s=arguments;var e=l||i,t=l||n;l=null,a=o-(t?d:c)-e,clearTimeout(u),t?u=setTimeout(h,e):0<=a?h():u=setTimeout(h,-a),d=o};return t.clear=function(){u&&(clearTimeout(u),u=null)},t.debounceNextCall=function(e){l=e},t}function bc(e,t,i,n){var o=e[t];if(o){var a=o[mc]||o,r=o[vc];if(o[gc]!==i||r!==n){if(null==i||!n)return e[t]=a;(o=e[t]=yc(a,i,"debounce"===n))[mc]=a,o[vc]=n,o[gc]=i}return o}}function xc(e,t){var i=e[t];i&&i[mc]&&(e[t]=i[mc])}var wc={createOnAllSeries:!0,performRawSeries:!0,reset:function(t,e){var i=t.getData(),n=(t.visualColorAccessPath||"itemStyle.color").split("."),o=t.get(n)||t.getColorFromPalette(t.name,null,e.getSeriesCount());if(i.setVisual("color",o),!e.isSeriesFiltered(t)){"function"!=typeof o||o instanceof Ir||i.each(function(e){i.setItemVisual(e,"color",o(t.getDataParams(e)))});return{dataEach:i.hasItemOption?function(e,t){var i=e.getItemModel(t).get(n,!0);null!=i&&e.setItemVisual(t,"color",i)}:null}}}},_c={toolbox:{brush:{title:{rect:"矩形选择",polygon:"圈选",lineX:"横向选择",lineY:"纵向选择",keep:"保持选择",clear:"清除选择"}},dataView:{title:"数据视图",lang:["数据视图","关闭","刷新"]},dataZoom:{title:{zoom:"区域缩放",back:"区域缩放还原"}},magicType:{title:{line:"切换为折线图",bar:"切换为柱状图",stack:"切换为堆叠",tiled:"切换为平铺"}},restore:{title:"还原"},saveAsImage:{title:"保存为图片",lang:["右键另存为图片"]}},series:{typeNames:{pie:"饼图",bar:"柱状图",line:"折线图",scatter:"散点图",effectScatter:"涟漪散点图",radar:"雷达图",tree:"树图",treemap:"矩形树图",boxplot:"箱型图",candlestick:"K线图",k:"K线图",heatmap:"热力图",map:"地图",parallel:"平行坐标图",lines:"线图",graph:"关系图",sankey:"桑基图",funnel:"漏斗图",gauge:"仪表盘图",pictorialBar:"象形柱图",themeRiver:"主题河流图",sunburst:"旭日图"}},aria:{general:{withTitle:"这是一个关于“{title}”的图表。",withoutTitle:"这是一个图表，"},series:{single:{prefix:"",withName:"图表类型是{seriesType}，表示{seriesName}。",withoutName:"图表类型是{seriesType}。"},multiple:{prefix:"它由{seriesCount}个图表系列组成。",withName:"第{seriesId}个系列是一个表示{seriesName}的{seriesType}，",withoutName:"第{seriesId}个系列是一个{seriesType}，",separator:{middle:"；",end:"。"}}},data:{allData:"其数据是——",partialData:"其中，前{displayCnt}项是——",withName:"{name}的数据是{value}",withoutName:"{value}",separator:{middle:"，",end:""}}}},Cc=function(e,t){var a=t.getModel("aria");if(a.get("show"))if(a.get("description"))e.setAttribute("aria-label",a.get("description"));else{var u=0;t.eachSeries(function(e,t){++u},this);var i,h=a.get("data.maxCount")||10,n=a.get("series.maxCount")||10,f=Math.min(u,n);if(!(u<1)){var o=function(){var e=t.getModel("title").option;e&&e.length&&(e=e[0]);return e&&e.text}();i=o?m(g("general.withTitle"),{title:o}):g("general.withoutTitle");var p=[];i+=m(g(1<u?"series.multiple.prefix":"series.single.prefix"),{seriesCount:u}),t.eachSeries(function(e,t){if(t<f){var i,n=e.get("name"),o="series."+(1<u?"multiple":"single")+".";i=m(i=g(n?o+"withName":o+"withoutName"),{seriesId:e.seriesIndex,seriesName:e.get("name"),seriesType:(c=e.subType,_c.series.typeNames[c]||"自定义图")});var a=e.getData();(window.data=a).count()>h?i+=m(g("data.partialData"),{displayCnt:h}):i+=g("data.allData");for(var r=[],s=0;s<a.count();s++)if(s<h){var l=a.getName(s),d=zd(a,s);r.push(m(g(l?"data.withName":"data.withoutName"),{name:l,value:d}))}i+=r.join(g("data.separator.middle"))+g("data.separator.end"),p.push(i)}var c}),i+=p.join(g("series.multiple.separator.middle"))+g("series.multiple.separator.end"),e.setAttribute("aria-label",i)}}function m(e,t){if("string"!=typeof e)return e;var i=e;return O(t,function(e,t){i=i.replace(new RegExp("\\{\\s*"+t+"\\s*\\}","g"),e)}),i}function g(e){var t=a.get(e);if(null!=t)return t;for(var i=e.split("."),n=_c.aria,o=0;o<i.length;++o)n=n[i[o]];return n}},Sc=Math.PI;function Tc(e,t,i,n){this.ecInstance=e,this.api=t,this.unfinished;i=this._dataProcessorHandlers=i.slice(),n=this._visualHandlers=n.slice();this._allHandlers=i.concat(n),this._stageTaskMap=ee()}var kc=Tc.prototype;function Ic(l,e,d,c,u){var h;function f(e,t){return e.setDirty&&(!e.dirtyMap||e.dirtyMap.get(t.__pipeline.id))}u=u||{},O(e,function(n,e){if(!u.visualType||u.visualType===n.visualType){var t=l._stageTaskMap.get(n.uid),i=t.seriesTaskMap,o=t.overallTask;if(o){var a,r=o.agentStubMap;r.each(function(e){f(u,e)&&(e.dirty(),a=!0)}),a&&o.dirty(),Nc(o,c);var s=l.getPerformArgs(o,u.block);r.each(function(e){e.perform(s)}),h|=o.perform(s)}else i&&i.each(function(e,t){f(u,e)&&e.dirty();var i=l.getPerformArgs(e,u.block);i.skip=!n.performRawSeries&&d.isSeriesFiltered(e.context.model),Nc(e,c),h|=e.perform(i)})}}),l.unfinished|=h}kc.restoreData=function(e,t){e.restoreData(t),this._stageTaskMap.each(function(e){var t=e.overallTask;t&&t.dirty()})},kc.getPerformArgs=function(e,t){if(e.__pipeline){var i=this._pipelineMap.get(e.__pipeline.id),n=i.context,o=!t&&i.progressiveEnabled&&(!n||n.progressiveRender)&&e.__idxInPipeline>i.blockIndex?i.step:null,a=n&&n.modDataCount;return{step:o,modBy:null!=a?Math.ceil(a/o):null,modDataCount:a}}},kc.getPipeline=function(e){return this._pipelineMap.get(e)},kc.updateStreamModes=function(e,t){var i=this._pipelineMap.get(e.uid),n=e.getData().count(),o=i.progressiveEnabled&&t.incrementalPrepareRender&&n>=i.threshold,a=e.get("large")&&n>=e.get("largeThreshold"),r="mod"===e.get("progressiveChunkMode")?n:null;e.pipelineContext=i.context={progressiveRender:o,modDataCount:r,large:a}},kc.restorePipelines=function(e){var n=this,o=n._pipelineMap=ee();e.eachSeries(function(e){var t=e.getProgressive(),i=e.uid;o.set(i,{id:i,head:null,tail:null,threshold:e.getProgressiveThreshold(),progressiveEnabled:t&&!(e.preventIncremental&&e.preventIncremental()),blockIndex:-1,step:Math.round(t||700),count:0}),Bc(n,e,e.dataTask)})},kc.prepareStageTasks=function(){var i=this._stageTaskMap,n=this.ecInstance.getModel(),o=this.api;O(this._allHandlers,function(e){var t=i.get(e.uid)||i.set(e.uid,[]);e.reset&&function(n,o,e,a,r){var s=e.seriesTaskMap||(e.seriesTaskMap=ee()),t=o.seriesType,i=o.getTargetSeries;o.createOnAllSeries?a.eachRawSeries(l):t?a.eachRawSeriesByType(t,l):i&&i(a,r).each(l);function l(e){var t=e.uid,i=s.get(t)||s.set(t,jd({plan:Lc,reset:Pc,count:Oc}));i.context={model:e,ecModel:a,api:r,useClearVisual:o.isVisual&&!o.isLayout,plan:o.plan,reset:o.reset,scheduler:n},Bc(n,e,i)}var d=n._pipelineMap;s.each(function(e,t){d.get(t)||(e.dispose(),s.removeKey(t))})}(this,e,t,n,o),e.overallReset&&function(n,e,t,i,o){var a=t.overallTask=t.overallTask||jd({reset:Ec});a.context={ecModel:i,api:o,overallReset:e.overallReset,scheduler:n};var r=a.agentStubMap=a.agentStubMap||ee(),s=e.seriesType,l=e.getTargetSeries,d=!0,c=e.modifyOutputEnd;s?i.eachRawSeriesByType(s,u):l?l(i,o).each(u):(d=!1,O(i.getSeries(),u));function u(e){var t=e.uid,i=r.get(t);i||(i=r.set(t,jd({reset:Mc,onDirty:Ac})),a.dirty()),i.context={model:e,overallProgress:d,modifyOutputEnd:c},i.agent=a,i.__block=d,Bc(n,e,i)}var h=n._pipelineMap;r.each(function(e,t){h.get(t)||(e.dispose(),a.dirty(),r.removeKey(t))})}(this,e,t,n,o)},this)},kc.prepareView=function(e,t,i,n){var o=e.renderTask,a=o.context;a.model=t,a.ecModel=i,a.api=n,o.__block=!e.incrementalPrepareRender,Bc(this,t,o)},kc.performDataProcessorTasks=function(e,t){Ic(this,this._dataProcessorHandlers,e,t,{block:!0})},kc.performVisualTasks=function(e,t,i){Ic(this,this._visualHandlers,e,t,i)},kc.performSeriesTasks=function(e){var t;e.eachSeries(function(e){t|=e.dataTask.perform()}),this.unfinished|=t},kc.plan=function(){this._pipelineMap.each(function(e){var t=e.tail;do{if(t.__block){e.blockIndex=t.__idxInPipeline;break}t=t.getUpstream()}while(t)})};var Nc=kc.updatePayload=function(e,t){"remain"!==t&&(e.context.payload=t)};function Ec(e){e.overallReset(e.ecModel,e.api,e.payload)}function Mc(e,t){return e.overallProgress&&Dc}function Dc(){this.agent.dirty(),this.getDownstream().dirty()}function Ac(){this.agent&&this.agent.dirty()}function Lc(e){return e.plan&&e.plan(e.model,e.ecModel,e.api,e.payload)}function Pc(e){e.useClearVisual&&e.data.clearAllVisual();var t=e.resetDefines=so(e.reset(e.model,e.ecModel,e.api,e.payload));return 1<t.length?M(t,function(e,t){return Uc(t)}):Rc}var Rc=Uc(0);function Uc(a){return function(e,t){var i=t.data,n=t.resetDefines[a];if(n&&n.dataEach)for(var o=e.start;o<e.end;o++)n.dataEach(i,o);else n&&n.progress&&n.progress(e,i)}}function Oc(e){return e.data.count()}function Bc(e,t,i){var n=t.uid,o=e._pipelineMap.get(n);!o.head&&(o.head=i),o.tail&&o.tail.pipe(i),(o.tail=i).__idxInPipeline=o.count++,i.__pipeline=o}Tc.wrapStageHandler=function(e,t){return k(e)&&(e={overallReset:e,seriesType:function(e){zc=null;try{e(Fc,Hc)}catch(e){}return zc}(e)}),e.uid=Ds("stageHandler"),t&&(e.visualType=t),e};var zc,Fc={},Hc={};function Vc(e,t){for(var i in t.prototype)e[i]=ie}Vc(Fc,Kl),Vc(Hc,id),Fc.eachSeriesByType=Fc.eachRawSeriesByType=function(e){zc=e},Fc.eachComponent=function(e){"series"===e.mainType&&e.subType&&(zc=e.subType)};var jc=["#37A2DA","#32C5E9","#67E0E3","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#E062AE","#E690D1","#e7bcf3","#9d96f5","#8378EA","#96BFFF"],Wc={color:jc,colorLayer:[["#37A2DA","#ffd85c","#fd7b5f"],["#37A2DA","#67E0E3","#FFDB5C","#ff9f7f","#E062AE","#9d96f5"],["#37A2DA","#32C5E9","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#e7bcf3","#8378EA","#96BFFF"],jc]},$c="#eee",Gc=function(){return{axisLine:{lineStyle:{color:$c}},axisTick:{lineStyle:{color:$c}},axisLabel:{textStyle:{color:$c}},splitLine:{lineStyle:{type:"dashed",color:"#aaa"}},splitArea:{areaStyle:{color:$c}}}},Yc=["#dd6b66","#759aa0","#e69d87","#8dc1a9","#ea7e53","#eedd78","#73a373","#73b9bc","#7289ab","#91ca8c","#f49f42"],qc={color:Yc,backgroundColor:"#333",tooltip:{axisPointer:{lineStyle:{color:$c},crossStyle:{color:$c}}},legend:{textStyle:{color:$c}},textStyle:{color:$c},title:{textStyle:{color:$c}},toolbox:{iconStyle:{normal:{borderColor:$c}}},dataZoom:{textStyle:{color:$c}},visualMap:{textStyle:{color:$c}},timeline:{lineStyle:{color:$c},itemStyle:{normal:{color:Yc[1]}},label:{normal:{textStyle:{color:$c}}},controlStyle:{normal:{color:$c,borderColor:$c}}},timeAxis:Gc(),logAxis:Gc(),valueAxis:Gc(),categoryAxis:Gc(),line:{symbol:"circle"},graph:{color:Yc},gauge:{title:{textStyle:{color:$c}}},candlestick:{itemStyle:{normal:{color:"#FD1050",color0:"#0CF49B",borderColor:"#FD1050",borderColor0:"#0CF49B"}}}};qc.categoryAxis.splitLine.show=!1,Nl.extend({type:"dataset",defaultOption:{seriesLayoutBy:Vl,sourceHeader:null,dimensions:null,source:null},optionUpdated:function(){!function(e){var t=e.option.source,i=Fl;if(F(t))i=Hl;else if(R(t))for(var n=0,o=t.length;n<o;n++){var a=t[n];if(null!=a){if(R(a)){i=Ol;break}if(B(a)){i=Bl;break}}}else if(B(t)){for(var r in t)if(t.hasOwnProperty(r)&&P(t[r])){i=zl;break}}else if(null!=t)throw new Error("Invalid data");$l(e).sourceFormat=i}(this)}}),nc.extend({type:"dataset"});var Zc=q,Xc=O,Kc=k,Jc=B,Qc=Nl.parseClassType,eu={zrender:"4.0.4"},tu={PROCESSOR:{FILTER:1e3,STATISTIC:5e3},VISUAL:{LAYOUT:1e3,GLOBAL:2e3,CHART:3e3,COMPONENT:4e3,BRUSH:5e3}},iu="__flagInMainProcess",nu="__optionUpdated",ou=/^[a-zA-Z0-9_]+$/;function au(n){return function(e,t,i){e=e&&e.toLowerCase(),Me.prototype[n].call(this,e,t,i)}}function ru(){Me.call(this)}function su(e,t,i){i=i||{},"string"==typeof t&&(t=Mu[t]),this.id,this.group,this._dom=e;var n="canvas";I&&(n=("undefined"==typeof window?global:window).__ECHARTS__DEFAULT__RENDERER__||n);var o=this._zr=Qn(e,{renderer:i.renderer||n,devicePixelRatio:i.devicePixelRatio,width:i.width,height:i.height});this._throttledZrFlush=yc(A(o.flush,o),17),(t=N(t))&&kd(t,!0),this._theme=t,this._chartsViews=[],this._chartsMap={},this._componentsViews=[],this._componentsMap={},this._coordSysMgr=new od;var a,r,s,l,d=this._api=(r=(a=this)._coordSysMgr,D(new id(a),{getCoordinateSystems:A(r.getCoordinateSystems,r),getComponentByElement:function(e){for(;e;){var t=e.__ecComponentInfo;if(null!=t)return a._model.getComponent(t.mainType,t.index);e=e.parent}}}));function c(e,t){return e.__prio-t.__prio}ui(Eu,c),ui(ku,c),this._scheduler=new Tc(this,d,ku,Eu),Me.call(this),this._messageCenter=new ru,this._initEvents(),this.resize=A(this.resize,this),this._pendingActions=[],o.animation.on("frame",this._onframe,this),l=this,(s=o).on("rendered",function(){l.trigger("rendered"),!s.animation.isFinished()||l[nu]||l._scheduler.unfinished||l._pendingActions.length||l.trigger("finished")}),K(this)}ru.prototype.on=au("on"),ru.prototype.off=au("off"),ru.prototype.one=au("one"),C(ru,Me);var lu=su.prototype;function du(e,t,i){var n,o=this._model,a=this._coordSysMgr.getCoordinateSystems();t=bo(o,t);for(var r=0;r<a.length;r++){var s=a[r];if(s[e]&&null!=(n=s[e](o,t,i)))return n}I&&console.warn("No coordinate system that supports "+e+" found by the given finder.")}lu._onframe=function(){if(!this._disposed){var e=this._scheduler;if(this[nu]){var t=this[nu].silent;this[iu]=!0,uu(this),cu.update.call(this),this[iu]=!1,this[nu]=!1,mu.call(this,t),gu.call(this,t)}else if(e.unfinished){var i=1,n=this._model,o=this._api;e.unfinished=!1;do{var a=+new Date;e.performSeriesTasks(n),e.performDataProcessorTasks(n),fu(this,n),e.performVisualTasks(n),xu(this,this._model,o,"remain"),i-=+new Date-a}while(0<i&&e.unfinished);e.unfinished||this._zr.flush()}}},lu.getDom=function(){return this._dom},lu.getZr=function(){return this._zr},lu.setOption=function(e,t,i){var n;if(I&&Zc(!this[iu],"`setOption` should not be called during main process."),Jc(t)&&(i=t.lazyUpdate,n=t.silent,t=t.notMerge),this[iu]=!0,!this._model||t){var o=new cd(this._api),a=this._theme,r=this._model=new Kl(null,null,a,o);r.scheduler=this._scheduler,r.init(null,null,a,o)}this._model.setOption(e,Iu),i?(this[nu]={silent:n},this[iu]=!1):(uu(this),cu.update.call(this),this._zr.flush(),this[nu]=!1,this[iu]=!1,mu.call(this,n),gu.call(this,n))},lu.setTheme=function(){console.log("ECharts#setTheme() is DEPRECATED in ECharts 3.0")},lu.getModel=function(){return this._model},lu.getOption=function(){return this._model&&this._model.getOption()},lu.getWidth=function(){return this._zr.getWidth()},lu.getHeight=function(){return this._zr.getHeight()},lu.getDevicePixelRatio=function(){return this._zr.painter.dpr||window.devicePixelRatio||1},lu.getRenderedCanvas=function(e){if(v.canvasSupported)return(e=e||{}).pixelRatio=e.pixelRatio||1,e.backgroundColor=e.backgroundColor||this._model.get("backgroundColor"),this._zr.painter.getRenderedCanvas(e)},lu.getSvgDataUrl=function(){if(v.svgSupported){var e=this._zr;return O(e.storage.getDisplayList(),function(e){e.stopAnimation(!0)}),e.painter.pathToDataUrl()}},lu.getDataURL=function(e){var t=(e=e||{}).excludeComponents,i=this._model,n=[],o=this;Xc(t,function(e){i.eachComponent({mainType:e},function(e){var t=o._componentsMap[e.__viewId];t.group.ignore||(n.push(t),t.group.ignore=!0)})});var a="svg"===this._zr.painter.getType()?this.getSvgDataUrl():this.getRenderedCanvas(e).toDataURL("image/"+(e&&e.type||"png"));return Xc(n,function(e){e.group.ignore=!1}),a},lu.getConnectedDataURL=function(o){if(v.canvasSupported){var a=this.group,r=Math.min,s=Math.max;if(Lu[a]){var l=1/0,d=1/0,c=-1/0,u=-1/0,h=[],i=o&&o.pixelRatio||1;O(Au,function(e,t){if(e.group===a){var i=e.getRenderedCanvas(N(o)),n=e.getDom().getBoundingClientRect();l=r(n.left,l),d=r(n.top,d),c=s(n.right,c),u=s(n.bottom,u),h.push({dom:i,left:n.left,top:n.top})}});var e=(c*=i)-(l*=i),t=(u*=i)-(d*=i),n=b();n.width=e,n.height=t;var f=Qn(n);return Xc(h,function(e){var t=new wn({style:{x:e.left*i-l,y:e.top*i-d,image:e.dom}});f.add(t)}),f.refreshImmediately(),n.toDataURL("image/"+(o&&o.type||"png"))}return this.getDataURL(o)}},lu.convertToPixel=L(du,"convertToPixel"),lu.convertFromPixel=L(du,"convertFromPixel"),lu.containPixel=function(e,o){var a;return O(e=bo(this._model,e),function(e,n){0<=n.indexOf("Models")&&O(e,function(e){var t=e.coordinateSystem;if(t&&t.containPoint)a|=!!t.containPoint(o);else if("seriesModels"===n){var i=this._chartsMap[e.__viewId];i&&i.containPoint?a|=i.containPoint(o,e):I&&console.warn(n+": "+(i?"The found component do not support containPoint.":"No view mapping to the found component."))}else I&&console.warn(n+": containPoint is not supported")},this)},this),!!a},lu.getVisual=function(e,t){var i=(e=bo(this._model,e,{defaultMainType:"series"})).seriesModel;I&&(i||console.warn("There is no specified seires model"));var n=i.getData(),o=e.hasOwnProperty("dataIndexInside")?e.dataIndexInside:e.hasOwnProperty("dataIndex")?n.indexOfRawIndex(e.dataIndex):null;return null!=o?n.getItemVisual(o,t):n.getVisual(t)},lu.getViewOfComponentModel=function(e){return this._componentsMap[e.__viewId]},lu.getViewOfSeriesModel=function(e){return this._chartsMap[e.__viewId]};var cu={prepareAndUpdate:function(e){uu(this),cu.update.call(this,e)},update:function(e){var t=this._model,i=this._api,n=this._zr,o=this._coordSysMgr,a=this._scheduler;if(t){a.restoreData(t,e),a.performSeriesTasks(t),o.create(t,i),a.performDataProcessorTasks(t,e),fu(this,t),o.update(t,i),yu(t),a.performVisualTasks(t,e),bu(this,t,i,e);var r=t.get("backgroundColor")||"transparent";if(v.canvasSupported)n.setBackgroundColor(r);else{var s=vt(r);r=It(s,"rgb"),0===s[3]&&(r="transparent")}wu(t,i)}},updateTransform:function(o){var a=this._model,r=this,s=this._api;if(a){var l=[];a.eachComponent(function(e,t){var i=r.getViewOfComponentModel(t);if(i&&i.__alive)if(i.updateTransform){var n=i.updateTransform(t,a,s,o);n&&n.update&&l.push(i)}else l.push(i)});var n=ee();a.eachSeries(function(e){var t=r._chartsMap[e.__viewId];if(t.updateTransform){var i=t.updateTransform(e,a,s,o);i&&i.update&&n.set(e.uid,1)}else n.set(e.uid,1)}),yu(a),this._scheduler.performVisualTasks(a,o,{setDirty:!0,dirtyMap:n}),xu(r,a,s,o,n),wu(a,this._api)}},updateView:function(e){var t=this._model;t&&(lc.markUpdateMethod(e,"updateView"),yu(t),this._scheduler.performVisualTasks(t,e,{setDirty:!0}),bu(this,this._model,this._api,e),wu(t,this._api))},updateVisual:function(e){cu.update.call(this,e)},updateLayout:function(e){cu.update.call(this,e)}};function uu(e){var t=e._model,i=e._scheduler;i.restorePipelines(t),i.prepareStageTasks(),vu(e,"component",t,i),vu(e,"chart",t,i),i.plan()}function hu(t,i,n,o,e){var a=t._model;if(o){var r={};r[o+"Id"]=n[o+"Id"],r[o+"Index"]=n[o+"Index"],r[o+"Name"]=n[o+"Name"];var s={mainType:o,query:r};e&&(s.subType=e);var l=n.excludeSeriesId;null!=l&&(l=ee(so(l))),a&&a.eachComponent(s,function(e){l&&null!=l.get(e.id)||d(t["series"===o?"_chartsMap":"_componentsMap"][e.__viewId])},t)}else Xc(t._componentsViews.concat(t._chartsViews),d);function d(e){e&&e.__alive&&e[i]&&e[i](e.__model,a,t._api,n)}}function fu(e,t){var i=e._chartsMap,n=e._scheduler;t.eachSeries(function(e){n.updateStreamModes(e,i[e.__viewId])})}function pu(t,e){var i=t.type,n=t.escapeConnect,o=Su[i],a=o.actionInfo,r=(a.update||"update").split(":"),s=r.pop();r=null!=r[0]&&Qc(r[0]),this[iu]=!0;var l=[t],d=!1;t.batch&&(d=!0,l=M(t.batch,function(e){return(e=E(D({},e),t)).batch=null,e}));var c,u=[],h="highlight"===i||"downplay"===i;Xc(l,function(e){(c=(c=o.action(e,this._model,this._api))||D({},e)).type=a.event||c.type,u.push(c),h?hu(this,s,e,"series"):r&&hu(this,s,e,r.main,r.sub)},this),"none"===s||h||r||(this[nu]?(uu(this),cu.update.call(this,t),this[nu]=!1):cu[s].call(this,t)),c=d?{type:a.event||i,escapeConnect:n,batch:u}:u[0],this[iu]=!1,!e&&this._messageCenter.trigger(c.type,c)}function mu(e){for(var t=this._pendingActions;t.length;){var i=t.shift();pu.call(this,i,e)}}function gu(e){!e&&this.trigger("updated")}function vu(e,t,a,r){for(var s="component"===t,l=s?e._componentsViews:e._chartsViews,d=s?e._componentsMap:e._chartsMap,c=e._zr,u=e._api,i=0;i<l.length;i++)l[i].__alive=!1;function n(e){var t="_ec_"+e.id+"_"+e.type,i=d[t];if(!i){var n=Qc(e.type),o=s?nc.getClass(n.main,n.sub):lc.getClass(n.sub);I&&Zc(o,n.sub+" does not exist."),(i=new o).init(a,u),d[t]=i,l.push(i),c.add(i.group)}e.__viewId=i.__id=t,i.__alive=!0,i.__model=e,i.group.__ecComponentInfo={mainType:e.mainType,index:e.componentIndex},!s&&r.prepareView(i,e,a,u)}s?a.eachComponent(function(e,t){"series"!==e&&n(t)}):a.eachSeries(n);for(i=0;i<l.length;){var o=l[i];o.__alive?i++:(!s&&o.renderTask.dispose(),c.remove(o.group),o.dispose(a,u),l.splice(i,1),delete d[o.__id],o.__id=o.group.__ecComponentInfo=null)}}function yu(e){e.clearColorPalette(),e.eachSeries(function(e){e.clearColorPalette()})}function bu(e,t,i,n){var o,a,r,s,l;o=e,a=t,r=i,s=n,Xc(l||o._componentsViews,function(e){var t=e.__model;e.render(t,a,r,s),Cu(t,e)}),Xc(e._chartsViews,function(e){e.__alive=!1}),xu(e,t,i,n),Xc(e._chartsViews,function(e){e.__alive||e.remove(t,i)})}function xu(n,e,t,o,a){var r,i,s,l,d,c=n._scheduler;e.eachSeries(function(e){var t=n._chartsMap[e.__viewId];t.__alive=!0;var i=t.renderTask;c.updatePayload(i,o),a&&a.get(e.uid)&&i.dirty(),r|=i.perform(c.getPerformArgs(i)),t.group.silent=!!e.get("silent"),Cu(e,t),function(e,t){var i=e.get("blendMode")||null;I&&!v.canvasSupported&&i&&"source-over"!==i&&console.warn("Only canvas support blendMode");t.group.traverse(function(e){e.isGroup||e.style.blend!==i&&e.setStyle("blend",i),e.eachPendingDisplayable&&e.eachPendingDisplayable(function(e){e.setStyle("blend",i)})})}(e,t)}),c.unfinished|=r,i=n._zr,s=e,l=i.storage,d=0,l.traverse(function(e){e.isGroup||d++}),d>s.get("hoverLayerThreshold")&&!v.node&&l.traverse(function(e){e.isGroup||(e.useHoverLayer=!0)}),Cc(n._zr.dom,e)}function wu(t,i){Xc(Nu,function(e){e(t,i)})}lu.resize=function(e){I&&Zc(!this[iu],"`resize` should not be called during main process."),this._zr.resize(e);var t=this._model;if(this._loadingFX&&this._loadingFX.resize(),t){var i=t.resetOption("media"),n=e&&e.silent;this[iu]=!0,i&&uu(this),cu.update.call(this),this[iu]=!1,mu.call(this,n),gu.call(this,n)}},lu.showLoading=function(e,t){if(Jc(e)&&(t=e,e=""),e=e||"default",this.hideLoading(),Du[e]){var i=Du[e](this._api,t),n=this._zr;this._loadingFX=i,n.add(i)}else I&&console.warn("Loading effects "+e+" not exists.")},lu.hideLoading=function(){this._loadingFX&&this._zr.remove(this._loadingFX),this._loadingFX=null},lu.makeActionFromEvent=function(e){var t=D({},e);return t.type=Tu[e.type],t},lu.dispatchAction=function(e,t){Jc(t)||(t={silent:!!t}),Su[e.type]&&this._model&&(this[iu]?this._pendingActions.push(e):(pu.call(this,e,t.silent),t.flush?this._zr.flush(!0):!1!==t.flush&&v.browser.weChat&&this._throttledZrFlush(),mu.call(this,t.silent),gu.call(this,t.silent)))},lu.appendData=function(e){var t=e.seriesIndex,i=this.getModel().getSeriesByIndex(t);I&&Zc(e.data&&i),i.appendData(e),this._scheduler.unfinished=!0},lu.on=au("on"),lu.off=au("off"),lu.one=au("one");var _u=["click","dblclick","mouseover","mouseout","mousemove","mousedown","mouseup","globalout","contextmenu"];function Cu(e,t){var i=e.get("z"),n=e.get("zlevel");t.group.traverse(function(e){"group"!==e.type&&(null!=i&&(e.z=i),null!=n&&(e.zlevel=n))})}lu._initEvents=function(){Xc(_u,function(a){this._zr.on(a,function(e){var t,i=this.getModel(),n=e.target;if("globalout"===a)t={};else if(n&&null!=n.dataIndex){var o=n.dataModel||i.getSeriesByIndex(n.seriesIndex);t=o&&o.getDataParams(n.dataIndex,n.dataType)||{}}else n&&n.eventData&&(t=D({},n.eventData));t&&(t.event=e,t.type=a,this.trigger(a,t))},this)},this),Xc(Tu,function(e,t){this._messageCenter.on(t,function(e){this.trigger(t,e)},this)},this)},lu.isDisposed=function(){return this._disposed},lu.clear=function(){this.setOption({series:[]},!0)},lu.dispose=function(){if(this._disposed)I&&console.warn("Instance "+this.id+" has been disposed");else{this._disposed=!0,wo(this.getDom(),Uu,"");var t=this._api,i=this._model;Xc(this._componentsViews,function(e){e.dispose(i,t)}),Xc(this._chartsViews,function(e){e.dispose(i,t)}),this._zr.dispose(),delete Au[this.id]}},C(su,Me);var Su={},Tu={},ku=[],Iu=[],Nu=[],Eu=[],Mu={},Du={},Au={},Lu={},Pu=new Date-0,Ru=new Date-0,Uu="_echarts_instance_",Ou={};function Bu(e){Lu[e]=!1}var zu=Bu;function Fu(e){return Au[(t=e,i=Uu,t.getAttribute?t.getAttribute(i):t[i])];var t,i}function Hu(e,t){Mu[e]=t}function Vu(e){Iu.push(e)}function ju(e,t){qu(ku,e,t,1e3)}function Wu(e,t,i){"function"==typeof t&&(i=t,t="");var n=Jc(e)?e.type:[e,e={event:t}][0];e.event=(e.event||n).toLowerCase(),t=e.event,Zc(ou.test(n)&&ou.test(t)),Su[n]||(Su[n]={action:i,actionInfo:e}),Tu[t]=n}function $u(e,t){od.register(e,t)}function Gu(e,t){qu(Eu,e,t,1e3,"layout")}function Yu(e,t){qu(Eu,e,t,3e3,"visual")}function qu(e,t,i,n,o){if((Kc(t)||Jc(t))&&(i=t,t=n),I){if(isNaN(t)||null==t)throw new Error("Illegal priority");Xc(e,function(e){Zc(e.__raw!==i)})}var a=Tc.wrapStageHandler(i,o);return a.__prio=t,a.__raw=i,e.push(a),a}function Zu(e,t){Du[e]=t}function Xu(e){return Nl.extend(e)}function Ku(e){return nc.extend(e)}function Ju(e){return Zd.extend(e)}function Qu(e){return lc.extend(e)}function eh(e){return Ou[e]}Yu(2e3,wc),Vu(kd),ju(5e3,function(e){var a=ee();e.eachSeries(function(e){var t=e.get("stack");if(t){var i=a.get(t)||a.set(t,[]),n=e.getData(),o={stackResultDimension:n.getCalculationInfo("stackResultDimension"),stackedOverDimension:n.getCalculationInfo("stackedOverDimension"),stackedDimension:n.getCalculationInfo("stackedDimension"),stackedByDimension:n.getCalculationInfo("stackedByDimension"),isStackedByIndex:n.getCalculationInfo("isStackedByIndex"),data:n,seriesModel:e};if(!o.stackedDimension||!o.isStackedByIndex&&!o.stackedByDimension)return;i.length&&n.setCalculationInfo("stackedOnSeries",i[i.length-1].seriesModel),i.push(o)}}),a.each(Id)}),Zu("default",function(n,e){E(e=e||{},{text:"loading",color:"#c23531",textColor:"#000",maskColor:"rgba(255, 255, 255, 0.8)",zlevel:0});var o=new xr({style:{fill:e.maskColor},zlevel:e.zlevel,z:1e4}),a=new Tr({shape:{startAngle:-Sc/2,endAngle:-Sc/2+.1,r:10},style:{stroke:e.color,lineCap:"round",lineWidth:5},zlevel:e.zlevel,z:10001}),r=new xr({style:{fill:"none",text:e.text,textPosition:"right",textDistance:10,textFill:e.textColor},zlevel:e.zlevel,z:10001});a.animateShape(!0).when(1e3,{endAngle:3*Sc/2}).start("circularInOut"),a.animateShape(!0).when(1e3,{startAngle:3*Sc/2}).delay(300).start("circularInOut");var t=new ni;return t.add(a),t.add(r),t.add(o),t.resize=function(){var e=n.getWidth()/2,t=n.getHeight()/2;a.setShape({cx:e,cy:t});var i=a.shape.r;r.setShape({x:e-i,y:t-i,width:2*i,height:2*i}),o.setShape({x:0,y:0,width:n.getWidth(),height:n.getHeight()})},t.resize(),t}),Wu({type:"highlight",event:"highlight",update:"highlight"},ie),Wu({type:"downplay",event:"downplay",update:"downplay"},ie),Hu("light",Wc),Hu("dark",qc);function th(e){return e}function ih(e,t,i,n,o){this._old=e,this._new=t,this._oldKeyGetter=i||th,this._newKeyGetter=n||th,this.context=o}function nh(e,t,i,n,o){for(var a=0;a<e.length;a++){var r="_ec_"+o[n](e[a],a),s=t[r];null==s?(i.push(r),t[r]=a):(s.length||(t[r]=s=[s]),s.push(a))}}ih.prototype={constructor:ih,add:function(e){return this._add=e,this},update:function(e){return this._update=e,this},remove:function(e){return this._remove=e,this},execute:function(){var e=this._old,t=this._new,i={},n=[],o=[];for(nh(e,{},n,"_oldKeyGetter",this),nh(t,i,o,"_newKeyGetter",this),a=0;a<e.length;a++){if(null!=(s=i[r=n[a]]))(d=s.length)?(1===d&&(i[r]=null),s=s.unshift()):i[r]=null,this._update&&this._update(s,a);else this._remove&&this._remove(a)}for(var a=0;a<o.length;a++){var r=o[a];if(i.hasOwnProperty(r)){var s;if(null==(s=i[r]))continue;if(s.length)for(var l=0,d=s.length;l<d;l++)this._add&&this._add(s[l]);else this._add&&this._add(s)}}}};var oh=ee(["tooltip","label","itemName","itemId","seriesName"]);function ah(e){return"category"===e?"ordinal":"time"===e?"time":"float"}var rh=B,sh="undefined",lh={float:typeof Float64Array===sh?Array:Float64Array,int:typeof Int32Array===sh?Array:Int32Array,ordinal:Array,number:Array,time:Array},dh=typeof Uint32Array===sh?Array:Uint32Array,ch=typeof Uint16Array===sh?Array:Uint16Array;function uh(e){return 65535<e._rawCount?dh:ch}var hh=["hasItemOption","_nameList","_idList","_invertedIndicesMap","_rawData","_chunkSize","_chunkCount","_dimValueGetter","_count","_rawCount","_nameDimIdx","_idDimIdx"],fh=["_extent","_approximateExtent","_rawExtent"];function ph(t,i){O(hh.concat(i.__wrappedMethods||[]),function(e){i.hasOwnProperty(e)&&(t[e]=i[e])}),t.__wrappedMethods=i.__wrappedMethods,O(fh,function(e){t[e]=N(i[e])}),t._calculationInfo=D(i._calculationInfo)}var mh=function(e,t){e=e||["x","y"];for(var i={},n=[],o={},a=0;a<e.length;a++){var r=e[a];U(r)&&(r={name:r});var s=r.name;r.type=r.type||"float",r.coordDim||(r.coordDim=s,r.coordDimIndex=0),r.otherDims=r.otherDims||{},n.push(s),(i[s]=r).index=a,r.createInvertedIndices&&(o[s]=[])}this.dimensions=n,this._dimensionInfos=i,this.hostModel=t,this.dataType,this._indices=null,this._count=0,this._rawCount=0,this._storage={},this._nameList=[],this._idList=[],this._optionModels=[],this._visual={},this._layout={},this._itemVisuals=[],this.hasItemVisual={},this._itemLayouts=[],this._graphicEls=[],this._chunkSize=1e5,this._chunkCount=0,this._rawData,this._rawExtent={},this._extent={},this._approximateExtent={},this._dimensionsSummary=function(a){var e={},r=e.encode={},s=ee(),l=[],d=[];O(a.dimensions,function(e){var t,o=a.getDimensionInfo(e),i=o.coordDim;if(i){I&&q(null==oh.get(i));var n=r[i];r.hasOwnProperty(i)||(n=r[i]=[]),n[o.coordDimIndex]=e,o.isExtraCoord||(s.set(i,1),"ordinal"!==(t=o.type)&&"time"!==t&&(l[0]=e)),o.defaultTooltip&&d.push(e)}oh.each(function(e,t){var i=r[t];r.hasOwnProperty(t)||(i=r[t]=[]);var n=o.otherDims[t];null!=n&&!1!==n&&(i[n]=o.name)})});var n=[],o={};s.each(function(e,t){var i=r[t];o[t]=i[0],n=n.concat(i)}),e.dataDimsOnCoord=n,e.encodeFirstDimNotExtra=o;var t=r.label;t&&t.length&&(l=t.slice());var i=r.tooltip;return i&&i.length?d=i.slice():d.length||(d=l.slice()),r.defaultedLabel=l,r.defaultedTooltip=d,e}(this),this._invertedIndicesMap=o,this._calculationInfo={}},gh=mh.prototype;function vh(e,t,i){var n;if(null!=t){var o=e._chunkSize,a=Math.floor(i/o),r=i%o,s=e.dimensions[t],l=e._storage[s][a];if(l){n=l[r];var d=e._dimensionInfos[s].ordinalMeta;d&&d.categories.length&&(n=d.categories[n])}}return n}function yh(e){return e}function bh(e){return e<this._count&&0<=e?this._indices[e]:-1}function xh(e,t){var i=e._idList[t];return null==i&&(i=vh(e,e._idDimIdx,t)),null==i&&(i="e\0\0"+t),i}function wh(e){return R(e)||(e=[e]),e}function _h(e,t){for(var i=0;i<t.length;i++)e._dimensionInfos[t[i]]||console.error("Unkown dimension "+t[i])}function Ch(e,t){var i=e.dimensions,n=new mh(M(i,e.getDimensionInfo,e),e.hostModel);ph(n,e);for(var o=n._storage={},a=e._storage,r=0;r<i.length;r++){var s=i[r];a[s]&&(0<=w(t,s)?(o[s]=Sh(a[s]),n._rawExtent[s]=Th(),n._extent[s]=null):o[s]=a[s])}return n}function Sh(e){for(var t,i,n=new Array(e.length),o=0;o<e.length;o++)n[o]=(t=e[o],i=void 0,(i=t.constructor)===Array?t.slice():new i(t));return n}function Th(){return[1/0,-1/0]}gh.type="list",gh.hasItemOption=!0,gh.getDimension=function(e){return isNaN(e)||(e=this.dimensions[e]||e),e},gh.getDimensionInfo=function(e){return this._dimensionInfos[this.getDimension(e)]},gh.getDimensionsOnCoord=function(){return this._dimensionsSummary.dataDimsOnCoord.slice()},gh.mapDimension=function(e,t){var i=this._dimensionsSummary;if(null==t)return i.encodeFirstDimNotExtra[e];var n=i.encode[e];return!0===t?(n||[]).slice():n&&n[t]},gh.initData=function(e,t,i){var n=Wl.isInstance(e)||P(e);if(n&&(e=new Nd(e,this.dimensions.length)),I&&!n&&("function"!=typeof e.getItem||"function"!=typeof e.count))throw new Error("Inavlid data provider.");this._rawData=e,this._storage={},this._indices=null,this._nameList=t||[],this._idList=[],this._nameRepeatCount={},i||(this.hasItemOption=!1),this.defaultDimValueGetter=Ud[this._rawData.getSource().sourceFormat],this._dimValueGetter=i=i||this.defaultDimValueGetter,this._rawExtent={},this._initDataFromProvider(0,e.count()),e.pure&&(this.hasItemOption=!1)},gh.getProvider=function(){return this._rawData},gh.appendData=function(e){I&&q(!this._indices,"appendData can only be called on raw data.");var t=this._rawData,i=this.count();t.appendData(e);var n=t.count();t.persistent||(n+=i),this._initDataFromProvider(i,n)},gh._initDataFromProvider=function(e,t){if(!(t<=e)){for(var i,n=this._chunkSize,o=this._rawData,a=this._storage,r=this.dimensions,s=r.length,l=this._dimensionInfos,d=this._nameList,c=this._idList,u=this._rawExtent,h=this._nameRepeatCount={},f=this._chunkCount,p=f-1,m=0;m<s;m++){u[N=r[m]]||(u[N]=Th());var g=l[N];0===g.otherDims.itemName&&(i=this._nameDimIdx=m),0===g.otherDims.itemId&&(this._idDimIdx=m);var v=lh[g.type];a[N]||(a[N]=[]);var y=a[N][p];if(y&&y.length<n){for(var b=new v(Math.min(t-p*n,n)),x=0;x<y.length;x++)b[x]=y[x];a[N][p]=b}for(var w=f*n;w<t;w+=n)a[N].push(new v(Math.min(t-w,n)));this._chunkCount=a[N].length}for(var _,C,S=new Array(s),T=e;T<t;T++){S=o.getItem(T,S);var k=Math.floor(T/n),I=T%n;for(w=0;w<s;w++){var N,E=a[N=r[w]][k],M=this._dimValueGetter(S,N,T,w);E[I]=M;var D=u[N];M<D[0]&&(D[0]=M),M>D[1]&&(D[1]=M)}if(!o.pure){var A=d[T];if(S&&null==A)if(null!=S.name)d[T]=A=S.name;else if(null!=i){var L=r[i],P=a[L][k];if(P){A=P[I];var R=l[L].ordinalMeta;R&&R.categories.length&&(A=R.categories[A])}}var U=null==S?null:S.id;null==U&&null!=A&&(h[A]=h[A]||0,0<h[U=A]&&(U+="__ec__"+h[A]),h[A]++),null!=U&&(c[T]=U)}}!o.persistent&&o.clean&&o.clean(),this._rawCount=this._count=t,this._extent={},O(C=(_=this)._invertedIndicesMap,function(e,t){var i=_._dimensionInfos[t],n=i.ordinalMeta;if(n){e=C[t]=new dh(n.categories.length);for(var o=0;o<e.length;o++)e[o]=NaN;for(var o=0;o<_._count;o++)e[_.get(t,o)]=o}})}},gh.count=function(){return this._count},gh.getIndices=function(){var e=this._indices;if(e){var t=e.constructor,i=this._count;if(t===Array){o=new t(i);for(var n=0;n<i;n++)o[n]=e[n]}else o=new t(e.buffer,0,i)}else{var o=new(t=uh(this))(this.count());for(n=0;n<o.length;n++)o[n]=n}return o},gh.get=function(e,t){if(!(0<=t&&t<this._count))return NaN;var i=this._storage;if(!i[e])return NaN;t=this.getRawIndex(t);var n=Math.floor(t/this._chunkSize),o=t%this._chunkSize;return i[e][n][o]},gh.getByRawIndex=function(e,t){if(!(0<=t&&t<this._rawCount))return NaN;var i=this._storage[e];if(!i)return NaN;var n=Math.floor(t/this._chunkSize),o=t%this._chunkSize;return i[n][o]},gh._getFast=function(e,t){var i=Math.floor(t/this._chunkSize),n=t%this._chunkSize;return this._storage[e][i][n]},gh.getValues=function(e,t){var i=[];R(e)||(t=e,e=this.dimensions);for(var n=0,o=e.length;n<o;n++)i.push(this.get(e[n],t));return i},gh.hasValue=function(e){for(var t=this._dimensionsSummary.dataDimsOnCoord,i=this._dimensionInfos,n=0,o=t.length;n<o;n++)if("ordinal"!==i[t[n]].type&&isNaN(this.get(t[n],e)))return!1;return!0},gh.getDataExtent=function(e){e=this.getDimension(e);var t=this._storage[e],i=Th();if(!t)return i;var n,o=this.count();if(!this._indices)return this._rawExtent[e].slice();if(n=this._extent[e])return n.slice();for(var a=(n=i)[0],r=n[1],s=0;s<o;s++){var l=this._getFast(e,this.getRawIndex(s));l<a&&(a=l),r<l&&(r=l)}return n=[a,r],this._extent[e]=n},gh.getApproximateExtent=function(e){return e=this.getDimension(e),this._approximateExtent[e]||this.getDataExtent(e)},gh.setApproximateExtent=function(e,t){t=this.getDimension(t),this._approximateExtent[t]=e.slice()},gh.getCalculationInfo=function(e){return this._calculationInfo[e]},gh.setCalculationInfo=function(e,t){rh(e)?D(this._calculationInfo,e):this._calculationInfo[e]=t},gh.getSum=function(e){var t=0;if(this._storage[e])for(var i=0,n=this.count();i<n;i++){var o=this.get(e,i);isNaN(o)||(t+=o)}return t},gh.getMedian=function(e){var i=[];this.each(e,function(e,t){isNaN(e)||i.push(e)});var t=[].concat(i).sort(function(e,t){return e-t}),n=this.count();return 0===n?0:n%2==1?t[(n-1)/2]:(t[n/2]+t[n/2-1])/2},gh.rawIndexOf=function(e,t){var i=e&&this._invertedIndicesMap[e];if(I&&!i)throw new Error("Do not supported yet");var n=i[t];return null==n||isNaN(n)?-1:n},gh.indexOfName=function(e){for(var t=0,i=this.count();t<i;t++)if(this.getName(t)===e)return t;return-1},gh.indexOfRawIndex=function(e){if(!this._indices)return e;if(e>=this._rawCount||e<0)return-1;var t=this._indices,i=t[e];if(null!=i&&i<this._count&&i===e)return e;for(var n=0,o=this._count-1;n<=o;){var a=(n+o)/2|0;if(t[a]<e)n=a+1;else{if(!(t[a]>e))return a;o=a-1}}return-1},gh.indicesOfNearest=function(e,t,i){var n=[];if(!this._storage[e])return n;null==i&&(i=1/0);for(var o=Number.MAX_VALUE,a=-1,r=0,s=this.count();r<s;r++){var l=t-this.get(e,r),d=Math.abs(l);l<=i&&d<=o&&((d<o||0<=l&&a<0)&&(o=d,a=l,n.length=0),n.push(r))}return n},gh.getRawIndex=yh,gh.getRawDataItem=function(e){if(this._rawData.persistent)return this._rawData.getItem(this.getRawIndex(e));for(var t=[],i=0;i<this.dimensions.length;i++){var n=this.dimensions[i];t.push(this.get(n,e))}return t},gh.getName=function(e){var t=this.getRawIndex(e);return this._nameList[t]||vh(this,this._nameDimIdx,t)||""},gh.getId=function(e){return xh(this,this.getRawIndex(e))},gh.each=function(e,t,i,n){if(this._count){"function"==typeof e&&(n=i,i=t,t=e,e=[]),i=i||n||this,e=M(wh(e),this.getDimension,this),I&&_h(this,e);for(var o=e.length,a=0;a<this.count();a++)switch(o){case 0:t.call(i,a);break;case 1:t.call(i,this.get(e[0],a),a);break;case 2:t.call(i,this.get(e[0],a),this.get(e[1],a),a);break;default:for(var r=0,s=[];r<o;r++)s[r]=this.get(e[r],a);s[r]=a,t.apply(i,s)}}},gh.filterSelf=function(e,t,i,n){if(this._count){"function"==typeof e&&(n=i,i=t,t=e,e=[]),i=i||n||this,e=M(wh(e),this.getDimension,this),I&&_h(this,e);for(var o=this.count(),a=new(uh(this))(o),r=[],s=e.length,l=0,d=e[0],c=0;c<o;c++){var u,h=this.getRawIndex(c);if(0===s)u=t.call(i,c);else if(1===s){var f=this._getFast(d,h);u=t.call(i,f,c)}else{for(var p=0;p<s;p++)r[p]=this._getFast(d,h);r[p]=c,u=t.apply(i,r)}u&&(a[l++]=h)}return l<o&&(this._indices=a),this._count=l,this._extent={},this.getRawIndex=this._indices?bh:yh,this}},gh.selectRange=function(e){if(this._count){var t=[];for(var i in e)e.hasOwnProperty(i)&&t.push(i);I&&_h(this,t);var n=t.length;if(n){var o=this.count(),a=new(uh(this))(o),r=0,s=t[0],l=e[s][0],d=e[s][1],c=!1;if(!this._indices){var u=0;if(1===n){for(var h=this._storage[t[0]],f=0;f<this._chunkCount;f++)for(var p=h[f],m=Math.min(this._count-f*this._chunkSize,this._chunkSize),g=0;g<m;g++){(l<=(w=p[g])&&w<=d||isNaN(w))&&(a[r++]=u),u++}c=!0}else if(2===n){h=this._storage[s];var v=this._storage[t[1]],y=e[t[1]][0],b=e[t[1]][1];for(f=0;f<this._chunkCount;f++){p=h[f];var x=v[f];for(m=Math.min(this._count-f*this._chunkSize,this._chunkSize),g=0;g<m;g++){var w=p[g],_=x[g];(l<=w&&w<=d||isNaN(w))&&(y<=_&&_<=b||isNaN(_))&&(a[r++]=u),u++}}c=!0}}if(!c)if(1===n)for(g=0;g<o;g++){var C=this.getRawIndex(g);(l<=(w=this._getFast(s,C))&&w<=d||isNaN(w))&&(a[r++]=C)}else for(g=0;g<o;g++){var S=!0;for(C=this.getRawIndex(g),f=0;f<n;f++){var T=t[f];((w=this._getFast(i,C))<e[T][0]||w>e[T][1])&&(S=!1)}S&&(a[r++]=this.getRawIndex(g))}return r<o&&(this._indices=a),this._count=r,this._extent={},this.getRawIndex=this._indices?bh:yh,this}}},gh.mapArray=function(e,t,i,n){"function"==typeof e&&(n=i,i=t,t=e,e=[]),i=i||n||this;var o=[];return this.each(e,function(){o.push(t&&t.apply(this,arguments))},i),o},gh.map=function(e,t,i,n){i=i||n||this,e=M(wh(e),this.getDimension,this),I&&_h(this,e);var o=Ch(this,e);o._indices=this._indices,o.getRawIndex=o._indices?bh:yh;for(var a=o._storage,r=[],s=this._chunkSize,l=e.length,d=this.count(),c=[],u=o._rawExtent,h=0;h<d;h++){for(var f=0;f<l;f++)c[f]=this.get(e[f],h);c[l]=h;var p=t&&t.apply(i,c);if(null!=p){"object"!=typeof p&&(r[0]=p,p=r);for(var m=this.getRawIndex(h),g=Math.floor(m/s),v=m%s,y=0;y<p.length;y++){var b=e[y],x=p[y],w=u[b],_=a[b];_&&(_[g][v]=x),x<w[0]&&(w[0]=x),x>w[1]&&(w[1]=x)}}}return o},gh.downSample=function(e,t,i,n){for(var o=Ch(this,[e]),a=o._storage,r=[],s=Math.floor(1/t),l=a[e],d=this.count(),c=this._chunkSize,u=o._rawExtent[e],h=new(uh(this))(d),f=0,p=0;p<d;p+=s){d-p<s&&(s=d-p,r.length=s);for(var m=0;m<s;m++){var g=this.getRawIndex(p+m),v=Math.floor(g/c),y=g%c;r[m]=l[v][y]}var b=i(r),x=this.getRawIndex(Math.min(p+n(r,b)||0,d-1)),w=x%c;(l[Math.floor(x/c)][w]=b)<u[0]&&(u[0]=b),b>u[1]&&(u[1]=b),h[f++]=x}return o._count=f,o._indices=h,o.getRawIndex=bh,o},gh.getItemModel=function(e){var t=this.hostModel;return new Is(this.getRawDataItem(e),t,t&&t.ecModel)},gh.diff=function(t){var i=this;return new ih(t?t.getIndices():[],this.getIndices(),function(e){return xh(t,e)},function(e){return xh(i,e)})},gh.getVisual=function(e){var t=this._visual;return t&&t[e]},gh.setVisual=function(e,t){if(rh(e))for(var i in e)e.hasOwnProperty(i)&&this.setVisual(i,e[i]);else this._visual=this._visual||{},this._visual[e]=t},gh.setLayout=function(e,t){if(rh(e))for(var i in e)e.hasOwnProperty(i)&&this.setLayout(i,e[i]);else this._layout[e]=t},gh.getLayout=function(e){return this._layout[e]},gh.getItemLayout=function(e){return this._itemLayouts[e]},gh.setItemLayout=function(e,t,i){this._itemLayouts[e]=i?D(this._itemLayouts[e]||{},t):t},gh.clearItemLayouts=function(){this._itemLayouts.length=0},gh.getItemVisual=function(e,t,i){var n=this._itemVisuals[e],o=n&&n[t];return null!=o||i?o:this.getVisual(t)},gh.setItemVisual=function(e,t,i){var n=this._itemVisuals[e]||{},o=this.hasItemVisual;if(this._itemVisuals[e]=n,rh(t))for(var a in t)t.hasOwnProperty(a)&&(n[a]=t[a],o[a]=!0);else n[t]=i,o[t]=!0},gh.clearAllVisual=function(){this._visual={},this._itemVisuals=[],this.hasItemVisual={}};var kh=function(e){e.seriesIndex=this.seriesIndex,e.dataIndex=this.dataIndex,e.dataType=this.dataType};function Ih(e,t,i){Wl.isInstance(t)||(t=Wl.seriesDataToSource(t)),i=i||{},e=(e||[]).slice();for(var n,o,a,r,s,l=(i.dimsDef||[]).slice(),d=ee(i.encodeDef),c=ee(),u=ee(),h=[],f=(n=t,o=e,a=l,r=i.dimCount,s=Math.max(n.dimensionsDetectCount||1,o.length,a.length,r||0),O(o,function(e){var t=e.dimsDef;t&&(s=Math.max(s,t.length))}),s),p=0;p<f;p++){var m=l[p]=D({},B(l[p])?l[p]:{name:l[p]}),g=m.name,v=h[p]={otherDims:{}};null!=g&&null==c.get(g)&&(v.name=v.displayName=g,c.set(g,p)),null!=m.type&&(v.type=m.type),null!=m.displayName&&(v.displayName=m.displayName)}d.each(function(e,i){e=so(e).slice();var n=d.set(i,[]);O(e,function(e,t){U(e)&&(e=c.get(e)),null!=e&&e<f&&(n[t]=e,b(h[e],i,t))})});var y=0;function b(e,t,i){null!=oh.get(t)?e.otherDims[t]=i:(e.coordDim=t,e.coordDimIndex=i,u.set(t,!0))}O(e,function(o,e){var a,r,s;if(U(o))a=o,o={};else{a=o.name;var t=o.ordinalMeta;o.ordinalMeta=null,(o=N(o)).ordinalMeta=t,r=o.dimsDef,s=o.otherDims,o.name=o.coordDim=o.coordDimIndex=o.dimsDef=o.otherDims=null}var i=so(d.get(a));if(!i.length)for(var n=0;n<(r&&r.length||1);n++){for(;y<h.length&&null!=h[y].coordDim;)y++;y<h.length&&i.push(y++)}O(i,function(e,t){var i=h[e];if(b(E(i,o),a,t),null==i.name&&r){var n=r[t];!B(n)&&(n={name:n}),i.name=i.displayName=n.name,i.defaultTooltip=n.defaultTooltip}s&&E(i.otherDims,s)})});var x=i.generateCoord,w=i.generateCoordCount,_=null!=w;w=x?w||1:0;for(var C,S,T=x||"value",k=0;k<f;k++){null==(v=h[k]=h[k]||{}).coordDim&&(v.coordDim=Nh(T,u,_),v.coordDimIndex=0,(!x||w<=0)&&(v.isExtraCoord=!0),w--),null==v.name&&(v.name=Nh(v.coordDim,c)),null==v.type&&(C=t,S=k,v.name,Zl(C.data,C.sourceFormat,C.seriesLayoutBy,C.dimensionsDefine,C.startIndex,S))&&(v.type="ordinal")}return h}function Nh(e,t,i){if(i||null!=t.get(e)){for(var n=0;null!=t.get(e+n);)n++;e+=n}return t.set(e,!0),e}gh.setItemGraphicEl=function(e,t){var i=this.hostModel;t&&(t.dataIndex=e,t.dataType=this.dataType,t.seriesIndex=i&&i.seriesIndex,"group"===t.type&&t.traverse(kh,t)),this._graphicEls[e]=t},gh.getItemGraphicEl=function(e){return this._graphicEls[e]},gh.eachItemGraphicEl=function(i,n){O(this._graphicEls,function(e,t){e&&i&&i.call(n,e,t)})},gh.cloneShallow=function(e){if(!e){var t=M(this.dimensions,this.getDimensionInfo,this);e=new mh(t,this.hostModel)}if(e._storage=this._storage,ph(e,this),this._indices){var i=this._indices.constructor;e._indices=new i(this._indices)}else e._indices=null;return e.getRawIndex=e._indices?bh:yh,e},gh.wrapMethod=function(e,t){var i=this[e];"function"==typeof i&&(this.__wrappedMethods=this.__wrappedMethods||[],this.__wrappedMethods.push(e),this[e]=function(){var e=i.apply(this,arguments);return t.apply(this,[e].concat(G(arguments)))})},gh.TRANSFERABLE_METHODS=["cloneShallow","downSample","map"],gh.CHANGABLE_METHODS=["filterSelf","selectRange"];var Eh=function(e,t){return Ih((t=t||{}).coordDimensions||[],e,{dimsDef:t.dimensionsDefine||e.dimensionsDefine,encodeDef:t.encodeDefine||e.encodeDefine,dimCount:t.dimensionsCount,generateCoord:t.generateCoord,generateCoordCount:t.generateCoordCount})};function Mh(e,i,t){var n,o,a,r,s=(t=t||{}).byIndex,l=t.stackedCoordDimension,d=!(!e||!e.get("stack"));if(O(i,function(e,t){U(e)&&(i[t]=e={name:e}),d&&!e.isExtraCoord&&(s||n||!e.ordinalMeta||(n=e),o||"ordinal"===e.type||"time"===e.type||l&&l!==e.coordDim||(o=e))}),!o||s||n||(s=!0),o){a="__\0ecstackresult",r="__\0ecstackedover",n&&(n.createInvertedIndices=!0);var c=o.coordDim,u=o.type,h=0;O(i,function(e){e.coordDim===c&&h++}),i.push({name:a,coordDim:c,coordDimIndex:h,type:u,isExtraCoord:!0,isCalculationCoord:!0}),h++,i.push({name:r,coordDim:r,coordDimIndex:h,type:u,isExtraCoord:!0,isCalculationCoord:!0})}return{stackedDimension:o&&o.name,stackedByDimension:n&&n.name,isStackedByIndex:s,stackedOverDimension:r,stackResultDimension:a}}function Dh(e,t){return!!t&&t===e.getCalculationInfo("stackedDimension")}function Ah(e,t){return Dh(e,t)?e.getCalculationInfo("stackResultDimension"):t}function Lh(e,t,i){i=i||{},Wl.isInstance(e)||(e=Wl.seriesDataToSource(e));var n,o=t.get("coordinateSystem"),a=od.get(o),r=Ll(t);r&&(n=M(r.coordSysDims,function(e){var t={name:e},i=r.axisMap.get(e);if(i){var n=i.get("type");t.type=ah(n)}return t})),n||(n=a&&(a.getDimensionsInfo?a.getDimensionsInfo():a.dimensions.slice())||["x","y"]);var s,l,d=Eh(e,{coordDimensions:n,generateCoord:i.generateCoord});r&&O(d,function(e,t){var i=e.coordDim,n=r.categoryAxisMap.get(i);n&&(null==s&&(s=t),e.ordinalMeta=n.getOrdinalMeta()),null!=e.otherDims.itemName&&(l=!0)}),l||null==s||(d[s].otherDims.itemName=0);var c=Mh(t,d),u=new mh(d,t);u.setCalculationInfo(c);var h=null!=s&&function(e){if(e.sourceFormat===Ul){var t=function(e){var t=0;for(;t<e.length&&null==e[t];)t++;return e[t]}(e.data||[]);return null!=t&&!R(uo(t))}}(e)?function(e,t,i,n){return n===s?i:this.defaultDimValueGetter(e,t,i,n)}:null;return u.hasItemOption=!1,u.initData(e,null,h),u}function Ph(e){this._setting=e||{},this._extent=[1/0,-1/0],this._interval=0,this.init&&this.init.apply(this,arguments)}function Rh(e){this.categories=e.categories||[],this._needCollect=e.needCollect,this._deduplication=e.deduplication,this._map}Ph.prototype.parse=function(e){return e},Ph.prototype.getSetting=function(e){return this._setting[e]},Ph.prototype.contain=function(e){var t=this._extent;return e>=t[0]&&e<=t[1]},Ph.prototype.normalize=function(e){var t=this._extent;return t[1]===t[0]?.5:(e-t[0])/(t[1]-t[0])},Ph.prototype.scale=function(e){var t=this._extent;return e*(t[1]-t[0])+t[0]},Ph.prototype.unionExtent=function(e){var t=this._extent;e[0]<t[0]&&(t[0]=e[0]),e[1]>t[1]&&(t[1]=e[1])},Ph.prototype.unionExtentFromData=function(e,t){this.unionExtent(e.getApproximateExtent(t))},Ph.prototype.getExtent=function(){return this._extent.slice()},Ph.prototype.setExtent=function(e,t){var i=this._extent;isNaN(e)||(i[0]=e),isNaN(t)||(i[1]=t)},Ph.prototype.isBlank=function(){return this._isBlank},Ph.prototype.setBlank=function(e){this._isBlank=e},Ph.prototype.getLabel=null,To(Ph),Mo(Ph,{registerWhenExtend:!0}),Rh.createByAxisModel=function(e){var t=e.option,i=t.data,n=i&&M(i,Bh);return new Rh({categories:n,needCollect:!n,deduplication:!1!==t.dedplication})};var Uh=Rh.prototype;function Oh(e){return e._map||(e._map=ee(e.categories))}function Bh(e){return B(e)&&null!=e.value?e.value:e+""}Uh.getOrdinal=function(e){return Oh(this).get(e)},Uh.parseAndCollect=function(e){var t,i=this._needCollect;if("string"!=typeof e&&!i)return e;if(i&&!this._deduplication)return t=this.categories.length,this.categories[t]=e,t;var n=Oh(this);return null==(t=n.get(e))&&(i?(t=this.categories.length,this.categories[t]=e,n.set(e,t)):t=NaN),t};var zh=Ph.prototype,Fh=Ph.extend({type:"ordinal",init:function(e,t){e&&!R(e)||(e=new Rh({categories:e})),this._ordinalMeta=e,this._extent=t||[0,e.categories.length-1]},parse:function(e){return"string"==typeof e?this._ordinalMeta.getOrdinal(e):Math.round(e)},contain:function(e){return e=this.parse(e),zh.contain.call(this,e)&&null!=this._ordinalMeta.categories[e]},normalize:function(e){return zh.normalize.call(this,this.parse(e))},scale:function(e){return Math.round(zh.scale.call(this,e))},getTicks:function(){for(var e=[],t=this._extent,i=t[0];i<=t[1];)e.push(i),i++;return e},getLabel:function(e){if(!this.isBlank())return this._ordinalMeta.categories[e]},count:function(){return this._extent[1]-this._extent[0]+1},unionExtentFromData:function(e,t){this.unionExtent(e.getApproximateExtent(t))},getOrdinalMeta:function(){return this._ordinalMeta},niceTicks:ie,niceExtent:ie});Fh.create=function(){return new Fh};var Hh=Rs;function Vh(e){return Bs(e)+2}function jh(e,t,i){e[t]=Math.max(Math.min(e[t],i[1]),i[0])}function Wh(e,t){!isFinite(e[0])&&(e[0]=t[0]),!isFinite(e[1])&&(e[1]=t[1]),jh(e,0,t),jh(e,1,t),e[0]>e[1]&&(e[0]=e[1])}var $h=Rs,Gh=Ph.extend({type:"interval",_interval:0,_intervalPrecision:2,setExtent:function(e,t){var i=this._extent;isNaN(e)||(i[0]=parseFloat(e)),isNaN(t)||(i[1]=parseFloat(t))},unionExtent:function(e){var t=this._extent;e[0]<t[0]&&(t[0]=e[0]),e[1]>t[1]&&(t[1]=e[1]),Gh.prototype.setExtent.call(this,t[0],t[1])},getInterval:function(){return this._interval},setInterval:function(e){this._interval=e,this._niceExtent=this._extent.slice(),this._intervalPrecision=Vh(e)},getTicks:function(){return function(e,t,i,n){var o=[];if(!e)return o;t[0]<i[0]&&o.push(t[0]);for(var a=i[0];a<=i[1]&&(o.push(a),(a=Hh(a+e,n))!==o[o.length-1]);)if(1e4<o.length)return[];return t[1]>(o.length?o[o.length-1]:i[1])&&o.push(t[1]),o}(this._interval,this._extent,this._niceExtent,this._intervalPrecision)},getLabel:function(e,t){if(null==e)return"";var i=t&&t.precision;return null==i?i=Bs(e)||0:"auto"===i&&(i=this._intervalPrecision),Js(e=$h(e,i,!0))},niceTicks:function(e,t,i){e=e||5;var n=this._extent,o=n[1]-n[0];if(isFinite(o)){o<0&&(o=-o,n.reverse());var a=function(e,t,i,n){var o={},a=e[1]-e[0],r=o.interval=qs(a/t,!0);null!=i&&r<i&&(r=o.interval=i),null!=n&&n<r&&(r=o.interval=n);var s=o.intervalPrecision=Vh(r);return Wh(o.niceTickExtent=[Hh(Math.ceil(e[0]/r)*r,s),Hh(Math.floor(e[1]/r)*r,s)],e),o}(n,e,t,i);this._intervalPrecision=a.intervalPrecision,this._interval=a.interval,this._niceExtent=a.niceTickExtent}},niceExtent:function(e){var t=this._extent;if(t[0]===t[1])if(0!==t[0]){var i=t[0];e.fixMax||(t[1]+=i/2),t[0]-=i/2}else t[1]=1;var n=t[1]-t[0];isFinite(n)||(t[0]=0,t[1]=1),this.niceTicks(e.splitNumber,e.minInterval,e.maxInterval);var o=this._interval;e.fixMin||(t[0]=$h(Math.floor(t[0]/o)*o)),e.fixMax||(t[1]=$h(Math.ceil(t[1]/o)*o))}});Gh.create=function(){return new Gh};var Yh="__ec_stack_",qh="undefined"!=typeof Float32Array?Float32Array:Array;function Zh(e){return e.get("stack")||Yh+e.seriesIndex}function Xh(e){return e.dim+e.index}function Kh(e,t){var i=[];return t.eachSeriesByType(e,function(e){of(e)&&!af(e)&&i.push(e)}),i}function Jh(e){var d=[];return O(e,function(e){var t=e.getData(),i=e.coordinateSystem.getBaseAxis(),n=i.getExtent(),o="category"===i.type?i.getBandWidth():Math.abs(n[1]-n[0])/t.count(),a=Ps(e.get("barWidth"),o),r=Ps(e.get("barMaxWidth"),o),s=e.get("barGap"),l=e.get("barCategoryGap");d.push({bandWidth:o,barWidth:a,barMaxWidth:r,barGap:s,barCategoryGap:l,axisKey:Xh(i),stackId:Zh(e)})}),Qh(d)}function Qh(e){var u={};O(e,function(e,t){var i=e.axisKey,n=e.bandWidth,o=u[i]||{bandWidth:n,remainedWidth:n,autoWidthCount:0,categoryGap:"20%",gap:"30%",stacks:{}},a=o.stacks;u[i]=o;var r=e.stackId;a[r]||o.autoWidthCount++,a[r]=a[r]||{width:0,maxWidth:0};var s=e.barWidth;s&&!a[r].width&&(a[r].width=s,s=Math.min(o.remainedWidth,s),o.remainedWidth-=s);var l=e.barMaxWidth;l&&(a[r].maxWidth=l);var d=e.barGap;null!=d&&(o.gap=d);var c=e.barCategoryGap;null!=c&&(o.categoryGap=c)});var h={};return O(u,function(e,i){h[i]={};var t=e.stacks,n=e.bandWidth,o=Ps(e.categoryGap,n),a=Ps(e.gap,1),r=e.remainedWidth,s=e.autoWidthCount,l=(r-o)/(s+(s-1)*a);l=Math.max(l,0),O(t,function(e,t){var i=e.maxWidth;i&&i<l&&(i=Math.min(i,r),e.width&&(i=Math.min(i,e.width)),r-=i,e.width=i,s--)}),l=(r-o)/(s+(s-1)*a),l=Math.max(l,0);var d,c=0;O(t,function(e,t){e.width||(e.width=l),c+=(d=e).width*(1+a)}),d&&(c-=d.width*a);var u=-c/2;O(t,function(e,t){h[i][t]=h[i][t]||{offset:u,width:e.width},u+=e.width*(1+a)})}),h}function ef(e,t,i){if(e&&t){var n=e[Xh(t)];return null!=n&&null!=i&&(n=n[Zh(i)]),n}}function tf(e,t){var i=Kh(e,t),k=Jh(i),I={};O(i,function(e){var t=e.getData(),i=e.coordinateSystem,n=i.getBaseAxis(),o=Zh(e),a=k[Xh(n)][o],r=a.offset,s=a.width,l=i.getOtherAxis(n),d=e.get("barMinHeight")||0;I[o]=I[o]||[],t.setLayout({offset:r,size:s});for(var c=t.mapDimension(l.dim),u=t.mapDimension(n.dim),h=Dh(t,c),f=l.isHorizontal(),p=rf(n,l,h),m=0,g=t.count();m<g;m++){var v=t.get(c,m),y=t.get(u,m);if(!isNaN(v)){var b,x,w,_,C,S=0<=v?"p":"n",T=p;if(h&&(I[o][y]||(I[o][y]={p:p,n:p}),T=I[o][y][S]),f)b=T,x=(C=i.dataToPoint([v,y]))[1]+r,w=C[0]-p,_=s,Math.abs(w)<d&&(w=(w<0?-1:1)*d),h&&(I[o][y][S]+=w);else b=(C=i.dataToPoint([y,v]))[0]+r,x=T,w=s,_=C[1]-p,Math.abs(_)<d&&(_=(_<=0?-1:1)*d),h&&(I[o][y][S]+=_);t.setItemLayout(m,{x:b,y:x,width:w,height:_})}}},this)}var nf={seriesType:"bar",plan:ac(),reset:function(e){if(of(e)&&af(e)){var t=e.getData(),s=e.coordinateSystem,l=s.getBaseAxis(),d=s.getOtherAxis(l),c=t.mapDimension(d.dim),u=t.mapDimension(l.dim),h=d.isHorizontal(),f=h?0:1,p=ef(Jh([e]),l,e).width;return.5<p||(p=.5),{progress:function(e,t){var i,n=new qh(2*e.count),o=[],a=[],r=0;for(;null!=(i=e.next());)a[f]=t.get(c,i),a[1-f]=t.get(u,i),o=s.dataToPoint(a,null,o),n[r++]=o[0],n[r++]=o[1];t.setLayout({largePoints:n,barWidth:p,valueAxisStart:rf(l,d,!1),valueAxisHorizontal:h})}}}}};function of(e){return e.coordinateSystem&&"cartesian2d"===e.coordinateSystem.type}function af(e){return e.pipelineContext&&e.pipelineContext.large}function rf(e,t,i){return 0<=w(e.getAxesOnZeroOf(),t)||i?t.toGlobalCoord(t.dataToCoord(0)):t.getGlobalExtent()[0]}var sf=Gh.prototype,lf=Math.ceil,df=Math.floor,cf=864e5,uf=Gh.extend({type:"time",getLabel:function(e){var t=this._stepLvl,i=new Date(e);return cl(t[0],i,this.getSetting("useUTC"))},niceExtent:function(e){var t=this._extent;if(t[0]===t[1]&&(t[0]-=cf,t[1]+=cf),t[1]===-1/0&&t[0]===1/0){var i=new Date;t[1]=+new Date(i.getFullYear(),i.getMonth(),i.getDate()),t[0]=t[1]-cf}this.niceTicks(e.splitNumber,e.minInterval,e.maxInterval);var n=this._interval;e.fixMin||(t[0]=Rs(df(t[0]/n)*n)),e.fixMax||(t[1]=Rs(lf(t[1]/n)*n))},niceTicks:function(e,t,i){e=e||10;var n=this._extent,o=n[1]-n[0],a=o/e;null!=t&&a<t&&(a=t),null!=i&&i<a&&(a=i);var r=hf.length,s=function(e,t,i,n){for(;i<n;){var o=i+n>>>1;e[o][1]<t?i=o+1:n=o}return i}(hf,a,0,r),l=hf[Math.min(s,r-1)],d=l[1];"year"===l[0]&&(d*=qs(o/d/e,!0));var c=this.getSetting("useUTC")?0:60*new Date(+n[0]||+n[1]).getTimezoneOffset()*1e3,u=[Math.round(lf((n[0]-c)/d)*d+c),Math.round(df((n[1]-c)/d)*d+c)];Wh(u,n),this._stepLvl=l,this._interval=d,this._niceExtent=u},parse:function(e){return+$s(e)}});O(["contain","normalize"],function(t){uf.prototype[t]=function(e){return sf[t].call(this,this.parse(e))}});var hf=[["hh:mm:ss",1e3],["hh:mm:ss",5e3],["hh:mm:ss",1e4],["hh:mm:ss",15e3],["hh:mm:ss",3e4],["hh:mm\nMM-dd",6e4],["hh:mm\nMM-dd",3e5],["hh:mm\nMM-dd",6e5],["hh:mm\nMM-dd",9e5],["hh:mm\nMM-dd",18e5],["hh:mm\nMM-dd",36e5],["hh:mm\nMM-dd",72e5],["hh:mm\nMM-dd",216e5],["hh:mm\nMM-dd",432e5],["MM-dd\nyyyy",cf],["MM-dd\nyyyy",2*cf],["MM-dd\nyyyy",3*cf],["MM-dd\nyyyy",4*cf],["MM-dd\nyyyy",432e6],["MM-dd\nyyyy",6*cf],["week",7*cf],["MM-dd\nyyyy",864e6],["week",14*cf],["week",21*cf],["month",31*cf],["week",42*cf],["month",62*cf],["week",42*cf],["quarter",8208e6],["month",107136e5],["month",13392e6],["half-year",16416e6],["month",214272e5],["month",26784e6],["year",32832e6]];uf.create=function(e){return new uf({useUTC:e.ecModel.get("useUTC")})};var ff=Ph.prototype,pf=Gh.prototype,mf=Bs,gf=Rs,vf=Math.floor,yf=Math.ceil,bf=Math.pow,xf=Math.log,wf=Ph.extend({type:"log",base:10,$constructor:function(){Ph.apply(this,arguments),this._originalScale=new Gh},getTicks:function(){var i=this._originalScale,n=this._extent,o=i.getExtent();return M(pf.getTicks.call(this),function(e){var t=Rs(bf(this.base,e));return t=e===n[0]&&i.__fixMin?_f(t,o[0]):t,t=e===n[1]&&i.__fixMax?_f(t,o[1]):t},this)},getLabel:pf.getLabel,scale:function(e){return e=ff.scale.call(this,e),bf(this.base,e)},setExtent:function(e,t){var i=this.base;e=xf(e)/xf(i),t=xf(t)/xf(i),pf.setExtent.call(this,e,t)},getExtent:function(){var e=this.base,t=ff.getExtent.call(this);t[0]=bf(e,t[0]),t[1]=bf(e,t[1]);var i=this._originalScale,n=i.getExtent();return i.__fixMin&&(t[0]=_f(t[0],n[0])),i.__fixMax&&(t[1]=_f(t[1],n[1])),t},unionExtent:function(e){this._originalScale.unionExtent(e);var t=this.base;e[0]=xf(e[0])/xf(t),e[1]=xf(e[1])/xf(t),ff.unionExtent.call(this,e)},unionExtentFromData:function(e,t){this.unionExtent(e.getApproximateExtent(t))},niceTicks:function(e){e=e||10;var t=this._extent,i=t[1]-t[0];if(!(i===1/0||i<=0)){var n=Gs(i);for(e/i*n<=.5&&(n*=10);!isNaN(n)&&Math.abs(n)<1&&0<Math.abs(n);)n*=10;var o=[Rs(yf(t[0]/n)*n),Rs(vf(t[1]/n)*n)];this._interval=n,this._niceExtent=o}},niceExtent:function(e){pf.niceExtent.call(this,e);var t=this._originalScale;t.__fixMin=e.fixMin,t.__fixMax=e.fixMax}});function _f(e,t){return gf(e,mf(t))}function Cf(e,t){var i,n,o,a=e.type,r=t.getMin(),s=t.getMax(),l=null!=r,d=null!=s,c=e.getExtent();"ordinal"===a?i=t.getCategories().length:(R(n=t.get("boundaryGap"))||(n=[n||0,n||0]),"boolean"==typeof n[0]&&(I&&console.warn('Boolean type for boundaryGap is only allowed for ordinal axis. Please use string in percentage instead, e.g., "20%". Currently, boundaryGap is set to be 0.'),n=[0,0]),n[0]=Ps(n[0],1),n[1]=Ps(n[1],1),o=c[1]-c[0]||Math.abs(c[0])),null==r&&(r="ordinal"===a?i?0:NaN:c[0]-n[0]*o),null==s&&(s="ordinal"===a?i?i-1:NaN:c[1]+n[1]*o),"dataMin"===r?r=c[0]:"function"==typeof r&&(r=r({min:c[0],max:c[1]})),"dataMax"===s?s=c[1]:"function"==typeof s&&(s=s({min:c[0],max:c[1]})),(null==r||!isFinite(r))&&(r=NaN),(null==s||!isFinite(s))&&(s=NaN),e.setBlank(V(r)||V(s)||"ordinal"===a&&!e.getOrdinalMeta().categories.length),t.getNeedCrossZero()&&(0<r&&0<s&&!l&&(r=0),r<0&&s<0&&!d&&(s=0));var u=t.ecModel;if(u&&"time"===a){var h,f=Kh("bar",u);if(O(f,function(e){h|=e.getBaseAxis()===t.axis}),h){var p=Jh(f),m=function(e,t,i,n){var o=i.axis.getExtent(),a=o[1]-o[0],r=ef(n,i.axis);if(void 0===r)return{min:e,max:t};var s=1/0;O(r,function(e){s=Math.min(e.offset,s)});var l=-1/0;O(r,function(e){l=Math.max(e.offset+e.width,l)}),s=Math.abs(s),l=Math.abs(l);var d=s+l,c=t-e,u=c/(1-(s+l)/a)-c;return{min:e-=u*(s/d),max:t+=u*(l/d)}}(r,s,t,p);r=m.min,s=m.max}}return[r,s]}function Sf(e,t){var i=Cf(e,t),n=null!=t.getMin(),o=null!=t.getMax(),a=t.get("splitNumber");"log"===e.type&&(e.base=t.get("logBase"));var r=e.type;e.setExtent(i[0],i[1]),e.niceExtent({splitNumber:a,fixMin:n,fixMax:o,minInterval:"interval"===r||"time"===r?t.get("minInterval"):null,maxInterval:"interval"===r||"time"===r?t.get("maxInterval"):null});var s=t.get("interval");null!=s&&e.setInterval&&e.setInterval(s)}function Tf(e,t){if(t=t||e.get("type"))switch(t){case"category":return new Fh(e.getOrdinalMeta?e.getOrdinalMeta():e.getCategories(),[1/0,-1/0]);case"value":return new Gh;default:return(Ph.getClass(t)||Gh).create(e)}}function kf(i){var t,n=i.getLabelModel().get("formatter"),o="category"===i.type?i.scale.getExtent()[0]:null;return"string"==typeof n?(t=n,n=function(e){return t.replace("{value}",null!=e?e:"")}):"function"==typeof n?function(e,t){return null!=o&&(t=e-o),n(If(i,e),t)}:function(e){return i.scale.getLabel(e)}}function If(e,t){return"category"===e.type?e.scale.getLabel(t):t}O(["contain","normalize"],function(t){wf.prototype[t]=function(e){return e=xf(e)/xf(this.base),ff[t].call(this,e)}}),wf.create=function(){return new wf};var Nf={getMin:function(e){var t=this.option,i=e||null==t.rangeStart?t.min:t.rangeStart;return this.axis&&null!=i&&"dataMin"!==i&&"function"!=typeof i&&!V(i)&&(i=this.axis.scale.parse(i)),i},getMax:function(e){var t=this.option,i=e||null==t.rangeEnd?t.max:t.rangeEnd;return this.axis&&null!=i&&"dataMax"!==i&&"function"!=typeof i&&!V(i)&&(i=this.axis.scale.parse(i)),i},getNeedCrossZero:function(){var e=this.option;return null==e.rangeStart&&null==e.rangeEnd&&!e.scale},getCoordSysModel:ie,setRange:function(e,t){this.option.rangeStart=e,this.option.rangeEnd=t},resetRange:function(){this.option.rangeStart=this.option.rangeEnd=null}},Ef=Ur({type:"triangle",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(e,t){var i=t.cx,n=t.cy,o=t.width/2,a=t.height/2;e.moveTo(i,n-a),e.lineTo(i+o,n+a),e.lineTo(i-o,n+a),e.closePath()}}),Mf=Ur({type:"diamond",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(e,t){var i=t.cx,n=t.cy,o=t.width/2,a=t.height/2;e.moveTo(i,n-a),e.lineTo(i+o,n),e.lineTo(i,n+a),e.lineTo(i-o,n),e.closePath()}}),Df=Ur({type:"pin",shape:{x:0,y:0,width:0,height:0},buildPath:function(e,t){var i=t.x,n=t.y,o=t.width/5*3,a=Math.max(o,t.height),r=o/2,s=r*r/(a-r),l=n-a+r+s,d=Math.asin(s/r),c=Math.cos(d)*r,u=Math.sin(d),h=Math.cos(d),f=.6*r,p=.7*r;e.moveTo(i-c,l+s),e.arc(i,l,r,Math.PI-d,2*Math.PI+d),e.bezierCurveTo(i+c-u*f,l+s+h*f,i,n-p,i,n),e.bezierCurveTo(i,n-p,i-c+u*f,l+s+h*f,i-c,l+s),e.closePath()}}),Af=Ur({type:"arrow",shape:{x:0,y:0,width:0,height:0},buildPath:function(e,t){var i=t.height,n=t.width,o=t.x,a=t.y,r=n/3*2;e.moveTo(o,a),e.lineTo(o+r,a+i),e.lineTo(o,a+i/4*3),e.lineTo(o-r,a+i),e.lineTo(o,a),e.closePath()}}),Lf={line:function(e,t,i,n,o){o.x1=e,o.y1=t+n/2,o.x2=e+i,o.y2=t+n/2},rect:function(e,t,i,n,o){o.x=e,o.y=t,o.width=i,o.height=n},roundRect:function(e,t,i,n,o){o.x=e,o.y=t,o.width=i,o.height=n,o.r=Math.min(i,n)/4},square:function(e,t,i,n,o){var a=Math.min(i,n);o.x=e,o.y=t,o.width=a,o.height=a},circle:function(e,t,i,n,o){o.cx=e+i/2,o.cy=t+n/2,o.r=Math.min(i,n)/2},diamond:function(e,t,i,n,o){o.cx=e+i/2,o.cy=t+n/2,o.width=i,o.height=n},pin:function(e,t,i,n,o){o.x=e+i/2,o.y=t+n/2,o.width=i,o.height=n},arrow:function(e,t,i,n,o){o.x=e+i/2,o.y=t+n/2,o.width=i,o.height=n},triangle:function(e,t,i,n,o){o.cx=e+i/2,o.cy=t+n/2,o.width=i,o.height=n}},Pf={};O({line:wr,rect:xr,roundRect:xr,square:xr,circle:ur,diamond:Mf,pin:Df,arrow:Af,triangle:Ef},function(e,t){Pf[t]=new e});var Rf=Ur({type:"symbol",shape:{symbolType:"",x:0,y:0,width:0,height:0},beforeBrush:function(){var e=this.style;"pin"===this.shape.symbolType&&"inside"===e.textPosition&&(e.textPosition=["50%","40%"],e.textAlign="center",e.textVerticalAlign="middle")},buildPath:function(e,t,i){var n=t.symbolType,o=Pf[n];"none"!==t.symbolType&&(o||(o=Pf[n="rect"]),Lf[n](t.x,t.y,t.width,t.height,o.shape),o.buildPath(e,o.shape,i))}});function Uf(e,t){if("image"!==this.type){var i=this.style,n=this.shape;n&&"line"===n.symbolType?i.stroke=e:this.__isEmptyBrush?(i.stroke=e,i.fill=t||"#fff"):(i.fill&&(i.fill=e),i.stroke&&(i.stroke=e)),this.dirty(!1)}}function Of(e,t,i,n,o,a,r){var s,l=0===e.indexOf("empty");return l&&(e=e.substr(5,1).toLowerCase()+e.substr(6)),(s=0===e.indexOf("image://")?Br(e.slice(8),new ii(t,i,n,o),r?"center":"cover"):0===e.indexOf("path://")?Or(e.slice(7),{},new ii(t,i,n,o),r?"center":"cover"):new Rf({shape:{symbolType:e,x:t,y:i,width:n,height:o}})).__isEmptyBrush=l,s.setColor=Uf,s.setColor(a),s}var Bf={isDimensionStacked:Dh,enableDataStack:Mh,getStackedDimension:Ah};var zf=(Object.freeze||Object)({createList:function(e){return Lh(e.getSource(),e)},getLayoutRect:xl,dataStack:Bf,createScale:function(e,t){var i=t;Is.isInstance(t)||C(i=new Is(t),Nf);var n=Tf(i);return n.setExtent(e[0],e[1]),Sf(n,i),n},mixinAxisModelCommonMethods:function(e){C(e,Nf)},completeDimensions:Ih,createDimensions:Eh,createSymbol:Of}),Ff=1e-8;function Hf(e,t){return Math.abs(e-t)<Ff}function Vf(e,t,i){var n=0,o=e[0];if(!o)return!1;for(var a=1;a<e.length;a++){var r=e[a];n+=Ra(o[0],o[1],r[0],r[1],t,i),o=r}var s=e[0];return Hf(o[0],s[0])&&Hf(o[1],s[1])||(n+=Ra(o[0],o[1],s[0],s[1],t,i)),0!==n}function jf(e,t,i){if(this.name=e,this.geometries=t,i)i=[i[0],i[1]];else{var n=this.getBoundingRect();i=[n.x+n.width/2,n.y+n.height/2]}this.center=i}function Wf(e,t,i){for(var n=[],o=t[0],a=t[1],r=0;r<e.length;r+=2){var s=e.charCodeAt(r)-64,l=e.charCodeAt(r+1)-64;s=s>>1^-(1&s),l=l>>1^-(1&l),o=s+=o,a=l+=a,n.push([s/i,l/i])}return n}jf.prototype={constructor:jf,properties:null,getBoundingRect:function(){var e=this._rect;if(e)return e;for(var t=Number.MAX_VALUE,i=[t,t],n=[-t,-t],o=[],a=[],r=this.geometries,s=0;s<r.length;s++){if("polygon"===r[s].type)da(r[s].exterior,o,a),Se(i,i,o),Te(n,n,a)}return 0===s&&(i[0]=i[1]=n[0]=n[1]=0),this._rect=new ii(i[0],i[1],n[0]-i[0],n[1]-i[1])},contain:function(e){var t=this.getBoundingRect(),i=this.geometries;if(!t.contain(e[0],e[1]))return!1;e:for(var n=0,o=i.length;n<o;n++)if("polygon"===i[n].type){var a=i[n].exterior,r=i[n].interiors;if(Vf(a,e[0],e[1])){for(var s=0;s<(r?r.length:0);s++)if(Vf(r[s]))continue e;return!0}}return!1},transformTo:function(e,t,i,n){var o=this.getBoundingRect(),a=o.width/o.height;i?n||(n=i/a):i=a*n;for(var r=new ii(e,t,i,n),s=o.calculateTransform(r),l=this.geometries,d=0;d<l.length;d++)if("polygon"===l[d].type){for(var c=l[d].exterior,u=l[d].interiors,h=0;h<c.length;h++)Ce(c[h],c[h],s);for(var f=0;f<(u?u.length:0);f++)for(h=0;h<u[f].length;h++)Ce(u[f][h],u[f][h],s)}(o=this._rect).copy(r),this.center=[o.x+o.width/2,o.y+o.height/2]}};var $f=function(e){return function(e){if(!e.UTF8Encoding)return;var t=e.UTF8Scale;null==t&&(t=1024);for(var i=e.features,n=0;n<i.length;n++)for(var o=i[n].geometry,a=o.coordinates,r=o.encodeOffsets,s=0;s<a.length;s++){var l=a[s];if("Polygon"===o.type)a[s]=Wf(l,r[s],t);else if("MultiPolygon"===o.type)for(var d=0;d<l.length;d++){var c=l[d];l[d]=Wf(c,r[s][d],t)}}e.UTF8Encoding=!1}(e),M(T(e.features,function(e){return e.geometry&&e.properties&&0<e.geometry.coordinates.length}),function(e){var t=e.properties,i=e.geometry,n=i.coordinates,o=[];"Polygon"===i.type&&o.push({type:"polygon",exterior:n[0],interiors:n.slice(1)}),"MultiPolygon"===i.type&&O(n,function(e){e[0]&&o.push({type:"polygon",exterior:e[0],interiors:e.slice(1)})});var a=new jf(t.name,o,t.cp);return a.properties=t,a})},Gf=vo();function Yf(e){return"category"===e.type?(a=(o=e).getLabelModel(),r=Zf(o,a),!a.get("show")||o.scale.isBlank()?{labels:[],labelCategoryInterval:r.labelCategoryInterval}:r):(t=(i=e).scale.getTicks(),n=kf(i),{labels:M(t,function(e,t){return{formattedLabel:n(e,t),rawLabel:i.scale.getLabel(e),tickValue:e}})});var i,t,n,o,a,r}function qf(e,t){return"category"===e.type?function(e,t){var i,n,o=Xf(e,"ticks"),a=tp(t),r=Kf(o,a);if(r)return r;t.get("show")&&!e.scale.isBlank()||(i=[]);if(k(a))i=ep(e,a,!0);else if("auto"===a){var s=Zf(e,e.getLabelModel());n=s.labelCategoryInterval,i=M(s.labels,function(e){return e.tickValue})}else i=Qf(e,n=a,!0);return Jf(o,a,{ticks:i,tickCategoryInterval:n})}(e,t):{ticks:e.scale.getTicks()}}function Zf(e,t){var i,n,o,a=Xf(e,"labels"),r=tp(t),s=Kf(a,r);return s||Jf(a,r,{labels:k(r)?ep(e,r):Qf(e,i="auto"===r?null!=(o=Gf(n=e).autoInterval)?o:Gf(n).autoInterval=n.calculateCategoryInterval():r),labelCategoryInterval:i})}function Xf(e,t){return Gf(e)[t]||(Gf(e)[t]=[])}function Kf(e,t){for(var i=0;i<e.length;i++)if(e[i].key===t)return e[i].value}function Jf(e,t,i){return e.push({key:t,value:i}),i}function Qf(e,t,i){var n=kf(e),o=e.scale,a=o.getExtent(),r=e.getLabelModel(),s=[],l=Math.max((t||0)+1,1),d=a[0],c=o.count();0!==d&&1<l&&2<c/l&&(d=Math.round(Math.ceil(d/l)*l));var u=r.get("showMinLabel"),h=r.get("showMaxLabel");u&&d!==a[0]&&p(a[0]);for(var f=d;f<=a[1];f+=l)p(f);function p(e){s.push(i?e:{formattedLabel:n(e),rawLabel:o.getLabel(e),tickValue:e})}return h&&f!==a[1]&&p(a[1]),s}function ep(e,i,n){var o=e.scale,a=kf(e),r=[];return O(o.getTicks(),function(e){var t=o.getLabel(e);i(e,t)&&r.push(n?e:{formattedLabel:a(e),rawLabel:t,tickValue:e})}),r}function tp(e){var t=e.get("interval");return null==t?"auto":t}var ip=[0,1],np=function(e,t,i){this.dim=e,this.scale=t,this._extent=i||[0,0],this.inverse=!1,this.onBand=!1};function op(e,t){var i=(e[1]-e[0])/t/2;e[0]+=i,e[1]-=i}np.prototype={constructor:np,contain:function(e){var t=this._extent,i=Math.min(t[0],t[1]),n=Math.max(t[0],t[1]);return i<=e&&e<=n},containData:function(e){return this.contain(this.dataToCoord(e))},getExtent:function(){return this._extent.slice()},getPixelPrecision:function(e){return zs(e||this.scale.getExtent(),this._extent)},setExtent:function(e,t){var i=this._extent;i[0]=e,i[1]=t},dataToCoord:function(e,t){var i=this._extent,n=this.scale;return e=n.normalize(e),this.onBand&&"ordinal"===n.type&&op(i=i.slice(),n.count()),Ls(e,ip,i,t)},coordToData:function(e,t){var i=this._extent,n=this.scale;this.onBand&&"ordinal"===n.type&&op(i=i.slice(),n.count());var o=Ls(e,i,ip,t);return this.scale.scale(o)},pointToData:function(e,t){},getTicksCoords:function(e){var t=(e=e||{}).tickModel||this.getTickModel(),i=qf(this,t),n=M(i.ticks,function(e){return{coord:this.dataToCoord(e),tickValue:e}},this),o=t.get("alignWithLabel");return function(e,t,i,n,o){var a=t.length;if(!e.onBand||n||!a)return;var r,s=e.getExtent();if(1===a)t[0].coord=s[0],r=t[1]={coord:s[0]};else{var l=t[1].coord-t[0].coord;O(t,function(e){e.coord-=l/2;var t=t||0;0<t%2&&(e.coord-=l/(2*(t+1)))}),r={coord:t[a-1].coord+l},t.push(r)}var d=s[0]>s[1];c(t[0].coord,s[0])&&(o?t[0].coord=s[0]:t.shift());o&&c(s[0],t[0].coord)&&t.unshift({coord:s[0]});c(s[1],r.coord)&&(o?r.coord=s[1]:t.pop());o&&c(r.coord,s[1])&&t.push({coord:s[1]});function c(e,t){return d?t<e:e<t}}(this,n,i.tickCategoryInterval,o,e.clamp),n},getViewLabels:function(){return Yf(this).labels},getLabelModel:function(){return this.model.getModel("axisLabel")},getTickModel:function(){return this.model.getModel("axisTick")},getBandWidth:function(){var e=this._extent,t=this.scale.getExtent(),i=t[1]-t[0]+(this.onBand?1:0);0===i&&(i=1);var n=Math.abs(e[1]-e[0]);return Math.abs(n)/i},isHorizontal:null,getRotate:null,calculateCategoryInterval:function(){return function(e){var t,i,n=(i=(t=e).getLabelModel(),{axisRotate:t.getRotate?t.getRotate():t.isHorizontal&&!t.isHorizontal()?90:0,labelRotate:i.get("rotate")||0,font:i.getFont()}),o=kf(e),a=(n.axisRotate-n.labelRotate)/180*Math.PI,r=e.scale,s=r.getExtent(),l=r.count();if(s[1]-s[0]<1)return 0;var d=1;40<l&&(d=Math.max(1,Math.floor(l/40)));for(var c=s[0],u=e.dataToCoord(c+1)-e.dataToCoord(c),h=Math.abs(u*Math.cos(a)),f=Math.abs(u*Math.sin(a)),p=0,m=0;c<=s[1];c+=d){var g,v,y=Fi(o(c),n.font,"center","top");g=1.3*y.width,v=1.3*y.height,p=Math.max(p,g,7),m=Math.max(m,v,7)}var b=p/h,x=m/f;isNaN(b)&&(b=1/0),isNaN(x)&&(x=1/0);var w=Math.max(0,Math.floor(Math.min(b,x))),_=Gf(e.model),C=_.lastAutoInterval,S=_.lastTickCount;return null!=C&&null!=S&&Math.abs(C-w)<=1&&Math.abs(S-l)<=1&&w<C?w=C:(_.lastTickCount=l,_.lastAutoInterval=w),w}(this)}};var ap=$f,rp={};function sp(e,t){var i=e.mapDimension("defaultedLabel",!0),n=i.length;if(1===n)return zd(e,t,i[0]);if(n){for(var o=[],a=0;a<i.length;a++){var r=zd(e,t,i[a]);o.push(r)}return o.join(" ")}}function lp(e,t,i){ni.call(this),this.updateData(e,t,i)}O(["map","each","filter","indexOf","inherits","reduce","filter","bind","curry","isArray","isString","isObject","isFunction","extend","defaults","clone","merge"],function(e){rp[e]=ne[e]}),Zd.extend({type:"series.line",dependencies:["grid","polar"],getInitialData:function(e,t){if(I){var i=e.coordinateSystem;if("polar"!==i&&"cartesian2d"!==i)throw new Error("Line not support coordinateSystem besides cartesian and polar")}return Lh(this.getSource(),this)},defaultOption:{zlevel:0,z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,hoverAnimation:!0,clipOverflow:!0,label:{position:"top"},lineStyle:{width:2,type:"solid"},step:!1,smooth:!1,smoothMonotone:null,symbol:"emptyCircle",symbolSize:4,symbolRotate:null,showSymbol:!0,showAllSymbol:"auto",connectNulls:!1,sampling:"none",animationEasing:"linear",progressive:0,hoverLayerThreshold:1/0}});var dp=lp.prototype,cp=lp.getSymbolSize=function(e,t){var i=e.getItemVisual(t,"symbolSize");return i instanceof Array?i.slice():[+i,+i]};function up(e){return[e[0]/2,e[1]/2]}function hp(e,t){this.parent.drift(e,t)}dp._createSymbol=function(e,t,i,n,o){this.removeAll();var a=Of(e,-1,-1,2,2,t.getItemVisual(i,"color"),o);a.attr({z2:100,culling:!0,scale:up(n)}),a.drift=hp,this._symbolType=e,this.add(a)},dp.stopSymbolAnimation=function(e){this.childAt(0).stopAnimation(e)},dp.getSymbolPath=function(){return this.childAt(0)},dp.getScale=function(){return this.childAt(0).scale},dp.highlight=function(){this.childAt(0).trigger("emphasis")},dp.downplay=function(){this.childAt(0).trigger("normal")},dp.setZ=function(e,t){var i=this.childAt(0);i.zlevel=e,i.z=t},dp.setDraggable=function(e){var t=this.childAt(0);t.draggable=e,t.cursor=e?"move":"pointer"},dp.updateData=function(e,t,i){this.silent=!1;var n=e.getItemVisual(t,"symbol")||"circle",o=e.hostModel,a=cp(e,t),r=n!==this._symbolType;if(r){var s=e.getItemVisual(t,"symbolKeepAspect");this._createSymbol(n,e,t,a,s)}else{(l=this.childAt(0)).silent=!1,hs(l,{scale:up(a)},o,t)}if(this._updateCommon(e,t,a,i),r){var l=this.childAt(0),d=i&&i.fadeIn,c={scale:l.scale.slice()};d&&(c.style={opacity:l.style.opacity}),l.scale=[0,0],d&&(l.style.opacity=0),fs(l,c,o,t)}this._seriesModel=o};var fp=["itemStyle"],pp=["emphasis","itemStyle"],mp=["label"],gp=["emphasis","label"];function vp(e){this.group=new ni,this._symbolCtor=e||lp}dp._updateCommon=function(i,e,t,n){var o=this.childAt(0),a=i.hostModel,r=i.getItemVisual(e,"color");"image"!==o.type&&o.useStyle({strokeNoScale:!0});var s=n&&n.itemStyle,l=n&&n.hoverItemStyle,d=n&&n.symbolRotate,c=n&&n.symbolOffset,u=n&&n.labelModel,h=n&&n.hoverLabelModel,f=n&&n.hoverAnimation,p=n&&n.cursorStyle;if(!n||i.hasItemOption){var m=n&&n.itemModel?n.itemModel:i.getItemModel(e);s=m.getModel(fp).getItemStyle(["color"]),l=m.getModel(pp).getItemStyle(),d=m.getShallow("symbolRotate"),c=m.getShallow("symbolOffset"),u=m.getModel(mp),h=m.getModel(gp),f=m.getShallow("hoverAnimation"),p=m.getShallow("cursor")}else l=D({},l);var g=o.style;o.attr("rotation",(d||0)*Math.PI/180||0),c&&o.attr("position",[Ps(c[0],t[0]),Ps(c[1],t[1])]),p&&o.attr("cursor",p),o.setColor(r,n&&n.symbolInnerColor),o.setStyle(s);var v=i.getItemVisual(e,"opacity");null!=v&&(g.opacity=v);var y=i.getItemVisual(e,"liftZ"),b=o.__z2Origin;null!=y?null==b&&(o.__z2Origin=o.z2,o.z2+=y):null!=b&&(o.z2=b,o.__z2Origin=null);var x=n&&n.useNameLabel;os(g,l,u,h,{labelFetcher:a,labelDataIndex:e,defaultText:function(e,t){return x?i.getName(e):sp(i,e)},isRectText:!0,autoColor:r}),o.off("mouseover").off("mouseout").off("emphasis").off("normal"),o.hoverStyle=l,ns(o);var w=up(t);if(f&&a.isAnimationEnabled()){var _=function(){if(!this.incremental){var e=w[1]/w[0];this.animateTo({scale:[Math.max(1.1*w[0],w[0]+3),Math.max(1.1*w[1],w[1]+3*e)]},400,"elasticOut")}},C=function(){this.incremental||this.animateTo({scale:w},400,"elasticOut")};o.on("mouseover",_).on("mouseout",C).on("emphasis",_).on("normal",C)}},dp.fadeOut=function(e,t){var i=this.childAt(0);this.silent=i.silent=!0,(!t||!t.keepLabel)&&(i.style.text=null),hs(i,{style:{opacity:0},scale:[0,0]},this._seriesModel,this.dataIndex,e)},_(lp,ni);var yp=vp.prototype;function bp(e,t,i,n){return t&&!isNaN(t[0])&&!isNaN(t[1])&&!(n.isIgnore&&n.isIgnore(i))&&!(n.clipShape&&!n.clipShape.contain(t[0],t[1]))&&"none"!==e.getItemVisual(i,"symbol")}function xp(e){return null==e||B(e)||(e={isIgnore:e}),e||{}}function wp(e){var t=e.hostModel;return{itemStyle:t.getModel("itemStyle").getItemStyle(["color"]),hoverItemStyle:t.getModel("emphasis.itemStyle").getItemStyle(),symbolRotate:t.get("symbolRotate"),symbolOffset:t.get("symbolOffset"),hoverAnimation:t.get("hoverAnimation"),labelModel:t.getModel("label"),hoverLabelModel:t.getModel("emphasis.label"),cursorStyle:t.get("cursor")}}function _p(e,t,i){var n,o=e.getBaseAxis(),a=e.getOtherAxis(o),r=function(e,t){var i=0,n=e.scale.getExtent();"start"===t?i=n[0]:"end"===t?i=n[1]:0<n[0]?i=n[0]:n[1]<0&&(i=n[1]);return i}(a,i),s=o.dim,l=a.dim,d=t.mapDimension(l),c=t.mapDimension(s),u="x"===l||"radius"===l?1:0,h=M(e.dimensions,function(e){return t.mapDimension(e)}),f=t.getCalculationInfo("stackResultDimension");return(n|=Dh(t,h[0]))&&(h[0]=f),(n|=Dh(t,h[1]))&&(h[1]=f),{dataDimsForPoint:h,valueStart:r,valueAxisDim:l,baseAxisDim:s,stacked:!!n,valueDim:d,baseDim:c,baseDataOffset:u,stackedOverDimension:t.getCalculationInfo("stackedOverDimension")}}function Cp(e,t,i,n){var o=NaN;e.stacked&&(o=i.get(i.getCalculationInfo("stackedOverDimension"),n)),isNaN(o)&&(o=e.valueStart);var a=e.baseDataOffset,r=[];return r[a]=i.get(e.baseDim,n),r[1-a]=o,t.dataToPoint(r)}yp.updateData=function(o,a){a=xp(a);var r=this.group,s=o.hostModel,l=this._data,d=this._symbolCtor,c=wp(o);l||r.removeAll(),o.diff(l).add(function(e){var t=o.getItemLayout(e);if(bp(o,t,e,a)){var i=new d(o,e,c);i.attr("position",t),o.setItemGraphicEl(e,i),r.add(i)}}).update(function(e,t){var i=l.getItemGraphicEl(t),n=o.getItemLayout(e);bp(o,n,e,a)?(i?(i.updateData(o,e,c),hs(i,{position:n},s)):(i=new d(o,e)).attr("position",n),r.add(i),o.setItemGraphicEl(e,i)):r.remove(i)}).remove(function(e){var t=l.getItemGraphicEl(e);t&&t.fadeOut(function(){r.remove(t)})}).execute(),this._data=o},yp.isPersistent=function(){return!0},yp.updateLayout=function(){var n=this._data;n&&n.eachItemGraphicEl(function(e,t){var i=n.getItemLayout(t);e.attr("position",i)})},yp.incrementalPrepareUpdate=function(e){this._seriesScope=wp(e),this._data=null,this.group.removeAll()},yp.incrementalUpdate=function(e,t,i){function n(e){e.isGroup||(e.incremental=e.useHoverLayer=!0)}i=xp(i);for(var o=e.start;o<e.end;o++){var a=t.getItemLayout(o);if(bp(t,a,o,i)){var r=new this._symbolCtor(t,o,this._seriesScope);r.traverse(n),r.attr("position",a),this.group.add(r),t.setItemGraphicEl(o,r)}}},yp.remove=function(e){var t=this.group,i=this._data;i&&e?i.eachItemGraphicEl(function(e){e.fadeOut(function(){t.remove(e)})}):t.removeAll()};var Sp=Se,Tp=Te,kp=ce,Ip=re,Np=[],Ep=[],Mp=[];function Dp(e){return isNaN(e[0])||isNaN(e[1])}function Ap(e,t,i,n,o,a,r,s,l,d,c){return"none"!==d&&d?function(e,t,i,n,o,a,r,s,l,d,c){for(var u=0,h=i,f=0;f<n;f++){var p=t[h];if(o<=h||h<0)break;if(Dp(p)){if(c){h+=a;continue}break}if(h===i)e[0<a?"moveTo":"lineTo"](p[0],p[1]);else if(0<l){var m=t[u],g="y"===d?1:0,v=(p[g]-m[g])*l;Ip(Ep,m),Ep[g]=m[g]+v,Ip(Mp,p),Mp[g]=p[g]-v,e.bezierCurveTo(Ep[0],Ep[1],Mp[0],Mp[1],p[0],p[1])}else e.lineTo(p[0],p[1]);u=h,h+=a}return f}.apply(this,arguments):function(e,t,i,n,o,a,r,s,l,d,c){for(var u=0,h=i,f=0;f<n;f++){var p=t[h];if(o<=h||h<0)break;if(Dp(p)){if(c){h+=a;continue}break}if(h===i)e[0<a?"moveTo":"lineTo"](p[0],p[1]),Ip(Ep,p);else if(0<l){var m=h+a,g=t[m];if(c)for(;g&&Dp(t[m]);)g=t[m+=a];var v=.5,y=t[u],g=t[m];if(!g||Dp(g))Ip(Mp,p);else{var b,x;if(Dp(g)&&!c&&(g=p),ue(Np,g,y),"x"===d||"y"===d){var w="x"===d?0:1;b=Math.abs(p[w]-y[w]),x=Math.abs(p[w]-g[w])}else b=be(p,y),x=be(p,g);kp(Mp,p,Np,-l*(1-(v=x/(x+b))))}Sp(Ep,Ep,s),Tp(Ep,Ep,r),Sp(Mp,Mp,s),Tp(Mp,Mp,r),e.bezierCurveTo(Ep[0],Ep[1],Mp[0],Mp[1],p[0],p[1]),kp(Ep,p,Np,l*v)}else e.lineTo(p[0],p[1]);u=h,h+=a}return f}.apply(this,arguments)}function Lp(e,t){var i=[1/0,1/0],n=[-1/0,-1/0];if(t)for(var o=0;o<e.length;o++){var a=e[o];a[0]<i[0]&&(i[0]=a[0]),a[1]<i[1]&&(i[1]=a[1]),a[0]>n[0]&&(n[0]=a[0]),a[1]>n[1]&&(n[1]=a[1])}return{min:t?i:n,max:t?n:i}}var Pp=qa.extend({type:"ec-polyline",shape:{points:[],smooth:0,smoothConstraint:!0,smoothMonotone:null,connectNulls:!1},style:{fill:null,stroke:"#000"},brush:fr(qa.prototype.brush),buildPath:function(e,t){var i=t.points,n=0,o=i.length,a=Lp(i,t.smoothConstraint);if(t.connectNulls){for(;0<o&&Dp(i[o-1]);o--);for(;n<o&&Dp(i[n]);n++);}for(;n<o;)n+=Ap(e,i,n,o,o,1,a.min,a.max,t.smooth,t.smoothMonotone,t.connectNulls)+1}}),Rp=qa.extend({type:"ec-polygon",shape:{points:[],stackedOnPoints:[],smooth:0,stackedOnSmooth:0,smoothConstraint:!0,smoothMonotone:null,connectNulls:!1},brush:fr(qa.prototype.brush),buildPath:function(e,t){var i=t.points,n=t.stackedOnPoints,o=0,a=i.length,r=t.smoothMonotone,s=Lp(i,t.smoothConstraint),l=Lp(n,t.smoothConstraint);if(t.connectNulls){for(;0<a&&Dp(i[a-1]);a--);for(;o<a&&Dp(i[o]);o++);}for(;o<a;){var d=Ap(e,i,o,a,a,1,s.min,s.max,t.smooth,r,t.connectNulls);Ap(e,n,o+d-1,d,a,-1,l.min,l.max,t.stackedOnSmooth,r,t.connectNulls),o+=d+1,e.closePath()}}});function Up(e,t){if(e.length===t.length){for(var i=0;i<e.length;i++){var n=e[i],o=t[i];if(n[0]!==o[0]||n[1]!==o[1])return}return!0}}function Op(e){return"number"==typeof e?e:e?.5:0}function Bp(e){var t=e.getGlobalExtent();if(e.onBand){var i=e.getBandWidth()/2-1,n=t[1]>t[0]?1:-1;t[0]+=n*i,t[1]-=n*i}return t}function zp(e,t,i,n){return"polar"===e.type?function(e,t,i,n){var o=e.getAngleAxis(),a=e.getRadiusAxis().getExtent().slice();a[0]>a[1]&&a.reverse();var r=o.getExtent(),s=Math.PI/180;i&&(a[0]-=.5,a[1]+=.5);var l=new pr({shape:{cx:Rs(e.cx,1),cy:Rs(e.cy,1),r0:Rs(a[0],1),r:Rs(a[1],1),startAngle:-r[0]*s,endAngle:-r[1]*s,clockwise:o.inverse}});return t&&(l.shape.endAngle=-r[0]*s,fs(l,{shape:{endAngle:-r[1]*s}},n)),l}(e,t,i,n):function(e,t,i,n){var o=Bp(e.getAxis("x")),a=Bp(e.getAxis("y")),r=e.getBaseAxis().isHorizontal(),s=Math.min(o[0],o[1]),l=Math.min(a[0],a[1]),d=Math.max(o[0],o[1])-s,c=Math.max(a[0],a[1])-l;if(i)s-=.5,d+=.5,l-=.5,c+=.5;else{var u=n.get("lineStyle.width")||2,h=n.get("clipOverflow")?u/2:Math.max(d,c);r?(l-=h,c+=2*h):(s-=h,d+=2*h)}var f=new xr({shape:{x:s,y:l,width:d,height:c}});return t&&(f.shape[r?"width":"height"]=0,fs(f,{shape:{width:d,height:c}},n)),f}(e,t,i,n)}function Fp(e,t,i){for(var n=t.getBaseAxis(),o="x"===n.dim||"radius"===n.dim?0:1,a=[],r=0;r<e.length-1;r++){var s=e[r+1],l=e[r];a.push(l);var d=[];switch(i){case"end":d[o]=s[o],d[1-o]=l[1-o],a.push(d);break;case"middle":var c=(l[o]+s[o])/2,u=[];d[o]=u[o]=c,d[1-o]=l[1-o],u[1-o]=s[1-o],a.push(d),a.push(u);break;default:d[o]=l[o],d[1-o]=s[1-o],a.push(d)}}return e[r]&&a.push(e[r]),a}function Hp(e,t,i){var n=e.get("showAllSymbol"),o="auto"===n;if(!n||o){var a=i.getAxesByScale("ordinal")[0];if(a&&(!o||!function(e,t){var i=e.getExtent(),n=Math.abs(i[1]-i[0])/e.scale.count();isNaN(n)&&(n=0);for(var o=t.count(),a=Math.max(1,Math.round(o/5)),r=0;r<o;r+=a)if(1.5*lp.getSymbolSize(t,r)[e.isHorizontal()?1:0]>n)return!1;return!0}(a,t))){var r=t.mapDimension(a.dim),s={};return O(a.getViewLabels(),function(e){s[e.tickValue]=1}),function(e){return!s.hasOwnProperty(t.get(r,e))}}}}lc.extend({type:"line",init:function(){var e=new ni,t=new vp;this.group.add(t.group),this._symbolDraw=t,this._lineGroup=e},render:function(e,t,i){var n=e.coordinateSystem,o=this.group,a=e.getData(),r=e.getModel("lineStyle"),s=e.getModel("areaStyle"),l=a.mapArray(a.getItemLayout),d="polar"===n.type,c=this._coordSys,u=this._symbolDraw,h=this._polyline,f=this._polygon,p=this._lineGroup,m=e.get("animation"),g=!s.isEmpty(),v=s.get("origin"),y=function(e,t,i){if(!i.valueDim)return[];for(var n=[],o=0,a=t.count();o<a;o++)n.push(Cp(i,e,t,o));return n}(n,a,_p(n,a,v)),b=e.get("showSymbol"),x=b&&!d&&Hp(e,a,n),w=this._data;w&&w.eachItemGraphicEl(function(e,t){e.__temp&&(o.remove(e),w.setItemGraphicEl(t,null))}),b||u.remove(),o.add(p);var _=!d&&e.get("step");h&&c.type===n.type&&_===this._step?(g&&!f?f=this._newPolygon(l,y,n,m):f&&!g&&(p.remove(f),f=this._polygon=null),p.setClipPath(zp(n,!1,!1,e)),b&&u.updateData(a,{isIgnore:x,clipShape:zp(n,!1,!0,e)}),a.eachItemGraphicEl(function(e){e.stopAnimation(!0)}),Up(this._stackedOnPoints,y)&&Up(this._points,l)||(m?this._updateAnimation(a,y,n,i,_,v):(_&&(l=Fp(l,n,_),y=Fp(y,n,_)),h.setShape({points:l}),f&&f.setShape({points:l,stackedOnPoints:y})))):(b&&u.updateData(a,{isIgnore:x,clipShape:zp(n,!1,!0,e)}),_&&(l=Fp(l,n,_),y=Fp(y,n,_)),h=this._newPolyline(l,n,m),g&&(f=this._newPolygon(l,y,n,m)),p.setClipPath(zp(n,!0,!1,e)));var C=function(e,t){var i=e.getVisual("visualMeta");if(i&&i.length&&e.count())if("cartesian2d"===t.type){for(var n,o,a=i.length-1;0<=a;a--){var r=i[a].dimension,s=e.dimensions[r],l=e.getDimensionInfo(s);if("x"===(n=l&&l.coordDim)||"y"===n){o=i[a];break}}if(o){var d=t.getAxis(n),c=M(o.stops,function(e){return{coord:d.toGlobalCoord(d.dataToCoord(e.value)),color:e.color}}),u=c.length,h=o.outerColors.slice();u&&c[0].coord>c[u-1].coord&&(c.reverse(),h.reverse());var f=c[0].coord-10,p=c[u-1].coord+10,m=p-f;if(m<.001)return"transparent";O(c,function(e){e.offset=(e.coord-f)/m}),c.push({offset:u?c[u-1].offset:.5,color:h[1]||"transparent"}),c.unshift({offset:u?c[0].offset:.5,color:h[0]||"transparent"});var g=new Nr(0,0,0,0,c,!0);return g[n]=f,g[n+"2"]=p,g}I&&console.warn("Visual map on line style only support x or y dimension.")}else I&&console.warn("Visual map on line style is only supported on cartesian2d.")}(a,n)||a.getVisual("color");h.useStyle(E(r.getLineStyle(),{fill:"none",stroke:C,lineJoin:"bevel"}));var S=e.get("smooth");if(S=Op(e.get("smooth")),h.setShape({smooth:S,smoothMonotone:e.get("smoothMonotone"),connectNulls:e.get("connectNulls")}),f){var T=a.getCalculationInfo("stackedOnSeries"),k=0;f.useStyle(E(s.getAreaStyle(),{fill:C,opacity:.7,lineJoin:"bevel"})),T&&(k=Op(T.get("smooth"))),f.setShape({smooth:S,stackedOnSmooth:k,smoothMonotone:e.get("smoothMonotone"),connectNulls:e.get("connectNulls")})}this._data=a,this._coordSys=n,this._stackedOnPoints=y,this._points=l,this._step=_,this._valueOrigin=v},dispose:function(){},highlight:function(e,t,i,n){var o=e.getData(),a=go(o,n);if(!(a instanceof Array)&&null!=a&&0<=a){var r=o.getItemGraphicEl(a);if(!r){var s=o.getItemLayout(a);if(!s)return;(r=new lp(o,a)).position=s,r.setZ(e.get("zlevel"),e.get("z")),r.ignore=isNaN(s[0])||isNaN(s[1]),r.__temp=!0,o.setItemGraphicEl(a,r),r.stopSymbolAnimation(!0),this.group.add(r)}r.highlight()}else lc.prototype.highlight.call(this,e,t,i,n)},downplay:function(e,t,i,n){var o=e.getData(),a=go(o,n);if(null!=a&&0<=a){var r=o.getItemGraphicEl(a);r&&(r.__temp?(o.setItemGraphicEl(a,null),this.group.remove(r)):r.downplay())}else lc.prototype.downplay.call(this,e,t,i,n)},_newPolyline:function(e){var t=this._polyline;return t&&this._lineGroup.remove(t),t=new Pp({shape:{points:e},silent:!0,z2:10}),this._lineGroup.add(t),this._polyline=t},_newPolygon:function(e,t){var i=this._polygon;return i&&this._lineGroup.remove(i),i=new Rp({shape:{points:e,stackedOnPoints:t},silent:!0}),this._lineGroup.add(i),this._polygon=i},_updateAnimation:function(e,t,i,n,o,a){var r=this._polyline,s=this._polygon,l=e.hostModel,d=function(e,t,i,n,o,a,r,s){for(var l,d,c=(l=e,d=[],t.diff(l).add(function(e){d.push({cmd:"+",idx:e})}).update(function(e,t){d.push({cmd:"=",idx:t,idx1:e})}).remove(function(e){d.push({cmd:"-",idx:e})}).execute(),d),u=[],h=[],f=[],p=[],m=[],g=[],v=[],y=_p(o,t,r),b=_p(a,e,s),x=0;x<c.length;x++){var w=c[x],_=!0;switch(w.cmd){case"=":var C=e.getItemLayout(w.idx),S=t.getItemLayout(w.idx1);(isNaN(C[0])||isNaN(C[1]))&&(C=S.slice()),u.push(C),h.push(S),f.push(i[w.idx]),p.push(n[w.idx1]),v.push(t.getRawIndex(w.idx1));break;case"+":var T=w.idx;u.push(o.dataToPoint([t.get(y.dataDimsForPoint[0],T),t.get(y.dataDimsForPoint[1],T)])),h.push(t.getItemLayout(T).slice()),f.push(Cp(y,o,t,T)),p.push(n[T]),v.push(t.getRawIndex(T));break;case"-":T=w.idx;var k=e.getRawIndex(T);k!==T?(u.push(e.getItemLayout(T)),h.push(a.dataToPoint([e.get(b.dataDimsForPoint[0],T),e.get(b.dataDimsForPoint[1],T)])),f.push(i[T]),p.push(Cp(b,a,e,T)),v.push(k)):_=!1}_&&(m.push(w),g.push(g.length))}g.sort(function(e,t){return v[e]-v[t]});var I=[],N=[],E=[],M=[],D=[];for(x=0;x<g.length;x++)T=g[x],I[x]=u[T],N[x]=h[T],E[x]=f[T],M[x]=p[T],D[x]=m[T];return{current:I,next:N,stackedOnCurrent:E,stackedOnNext:M,status:D}}(this._data,e,this._stackedOnPoints,t,this._coordSys,i,this._valueOrigin,a),c=d.current,u=d.stackedOnCurrent,h=d.next,f=d.stackedOnNext;o&&(c=Fp(d.current,i,o),u=Fp(d.stackedOnCurrent,i,o),h=Fp(d.next,i,o),f=Fp(d.stackedOnNext,i,o)),r.shape.__points=d.current,r.shape.points=c,hs(r,{shape:{points:h}},l),s&&(s.setShape({points:c,stackedOnPoints:u}),hs(s,{shape:{points:h,stackedOnPoints:f}},l));for(var p=[],m=d.status,g=0;g<m.length;g++){if("="===m[g].cmd){var v=e.getItemGraphicEl(m[g].idx1);v&&p.push({el:v,ptIdx:g})}}r.animators&&r.animators.length&&r.animators[0].during(function(){for(var e=0;e<p.length;e++){p[e].el.attr("position",r.shape.__points[p[e].ptIdx])}})},remove:function(e){var i=this.group,n=this._data;this._lineGroup.removeAll(),this._symbolDraw.remove(!0),n&&n.eachItemGraphicEl(function(e,t){e.__temp&&(i.remove(e),n.setItemGraphicEl(t,null))}),this._polyline=this._polygon=this._coordSys=this._points=this._stackedOnPoints=this._data=null}});var Vp=function(e,r,s){return{seriesType:e,performRawSeries:!0,reset:function(l,e,t){var i=l.getData(),n=l.get("symbol")||r,d=l.get("symbolSize"),o=l.get("symbolKeepAspect");if(i.setVisual({legendSymbol:s||n,symbol:n,symbolSize:d,symbolKeepAspect:o}),!e.isSeriesFiltered(l)){var a="function"==typeof d;return{dataEach:i.hasItemOption||a?function(e,t){if("function"==typeof d){var i=l.getRawValue(t),n=l.getDataParams(t);e.setItemVisual(t,"symbolSize",d(i,n))}if(e.hasItemOption){var o=e.getItemModel(t),a=o.getShallow("symbol",!0),r=o.getShallow("symbolSize",!0),s=o.getShallow("symbolKeepAspect",!0);null!=a&&e.setItemVisual(t,"symbol",a),null!=r&&e.setItemVisual(t,"symbolSize",r),null!=s&&e.setItemVisual(t,"symbolKeepAspect",s)}}:null}}}}},jp=function(e){return{seriesType:e,plan:ac(),reset:function(e){var t=e.getData(),u=e.coordinateSystem,h=e.pipelineContext.large;if(u){var f=M(u.dimensions,function(e){return t.mapDimension(e)}).slice(0,2),p=f.length,i=t.getCalculationInfo("stackResultDimension");return Dh(t,f[0])&&(f[0]=i),Dh(t,f[1])&&(f[1]=i),p&&{progress:function(e,t){for(var i=e.end-e.start,n=h&&new Float32Array(i*p),o=e.start,a=0,r=[],s=[];o<e.end;o++){var l;if(1===p){var d=t.get(f[0],o);l=!isNaN(d)&&u.dataToPoint(d,null,s)}else{d=r[0]=t.get(f[0],o);var c=r[1]=t.get(f[1],o);l=!isNaN(d)&&!isNaN(c)&&u.dataToPoint(r,null,s)}h?(n[a++]=l?l[0]:NaN,n[a++]=l?l[1]:NaN):t.setItemLayout(o,l&&l.slice()||[NaN,NaN])}h&&t.setLayout("symbolPoints",n)}}}}}},Wp={average:function(e){for(var t=0,i=0,n=0;n<e.length;n++)isNaN(e[n])||(t+=e[n],i++);return 0===i?NaN:t/i},sum:function(e){for(var t=0,i=0;i<e.length;i++)t+=e[i]||0;return t},max:function(e){for(var t=-1/0,i=0;i<e.length;i++)e[i]>t&&(t=e[i]);return isFinite(t)?t:NaN},min:function(e){for(var t=1/0,i=0;i<e.length;i++)e[i]<t&&(t=e[i]);return isFinite(t)?t:NaN},nearest:function(e){return e[0]}},$p=function(e,t){return Math.round(e.length/2)};function Gp(e){return this._axes[e]}var Yp=function(e){this._axes={},this._dimList=[],this.name=e||""};function qp(e){Yp.call(this,e)}Yp.prototype={constructor:Yp,type:"cartesian",getAxis:function(e){return this._axes[e]},getAxes:function(){return M(this._dimList,Gp,this)},getAxesByScale:function(t){return t=t.toLowerCase(),T(this.getAxes(),function(e){return e.scale.type===t})},addAxis:function(e){var t=e.dim;this._axes[t]=e,this._dimList.push(t)},dataToCoord:function(e){return this._dataCoordConvert(e,"dataToCoord")},coordToData:function(e){return this._dataCoordConvert(e,"coordToData")},_dataCoordConvert:function(e,t){for(var i=this._dimList,n=e instanceof Array?[]:{},o=0;o<i.length;o++){var a=i[o],r=this._axes[a];n[a]=r[t](e[a])}return n}},qp.prototype={constructor:qp,type:"cartesian2d",dimensions:["x","y"],getBaseAxis:function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAxis("x")},containPoint:function(e){var t=this.getAxis("x"),i=this.getAxis("y");return t.contain(t.toLocalCoord(e[0]))&&i.contain(i.toLocalCoord(e[1]))},containData:function(e){return this.getAxis("x").containData(e[0])&&this.getAxis("y").containData(e[1])},dataToPoint:function(e,t,i){var n=this.getAxis("x"),o=this.getAxis("y");return(i=i||[])[0]=n.toGlobalCoord(n.dataToCoord(e[0])),i[1]=o.toGlobalCoord(o.dataToCoord(e[1])),i},clampData:function(e,t){var i=this.getAxis("x").scale,n=this.getAxis("y").scale,o=i.getExtent(),a=n.getExtent(),r=i.parse(e[0]),s=n.parse(e[1]);return(t=t||[])[0]=Math.min(Math.max(Math.min(o[0],o[1]),r),Math.max(o[0],o[1])),t[1]=Math.min(Math.max(Math.min(a[0],a[1]),s),Math.max(a[0],a[1])),t},pointToData:function(e,t){var i=this.getAxis("x"),n=this.getAxis("y");return(t=t||[])[0]=i.coordToData(i.toLocalCoord(e[0])),t[1]=n.coordToData(n.toLocalCoord(e[1])),t},getOtherAxis:function(e){return this.getAxis("x"===e.dim?"y":"x")}},_(qp,Yp);var Zp=function(e,t,i,n,o){np.call(this,e,t,i),this.type=n||"value",this.position=o||"bottom"};Zp.prototype={constructor:Zp,index:0,getAxesOnZeroOf:null,model:null,isHorizontal:function(){var e=this.position;return"top"===e||"bottom"===e},getGlobalExtent:function(e){var t=this.getExtent();return t[0]=this.toGlobalCoord(t[0]),t[1]=this.toGlobalCoord(t[1]),e&&t[0]>t[1]&&t.reverse(),t},getOtherAxis:function(){this.grid.getOtherAxis()},pointToData:function(e,t){return this.coordToData(this.toLocalCoord(e["x"===this.dim?0:1]),t)},toLocalCoord:null,toGlobalCoord:null},_(Zp,np);var Xp={show:!0,zlevel:0,z:0,inverse:!1,name:"",nameLocation:"end",nameRotate:null,nameTruncate:{maxWidth:null,ellipsis:"...",placeholder:"."},nameTextStyle:{},nameGap:15,silent:!1,triggerEvent:!1,tooltip:{show:!1},axisPointer:{},axisLine:{show:!0,onZero:!0,onZeroAxisIndex:null,lineStyle:{color:"#333",width:1,type:"solid"},symbol:["none","none"],symbolSize:[10,15]},axisTick:{show:!0,inside:!1,length:5,lineStyle:{width:1}},axisLabel:{show:!0,inside:!1,rotate:0,showMinLabel:null,showMaxLabel:null,margin:8,fontSize:12},splitLine:{show:!0,lineStyle:{color:["#ccc"],width:1,type:"solid"}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]}}},Kp={};Kp.categoryAxis=m({boundaryGap:!0,deduplication:null,splitLine:{show:!1},axisTick:{alignWithLabel:!1,interval:"auto"},axisLabel:{interval:"auto"}},Xp),Kp.valueAxis=m({boundaryGap:[0,0],splitNumber:5},Xp),Kp.timeAxis=E({scale:!0,min:"dataMin",max:"dataMax"},Kp.valueAxis),Kp.logAxis=E({scale:!0,logBase:10},Kp.valueAxis);var Jp=["value","category","time","log"],Qp=function(a,e,r,t){O(Jp,function(o){e.extend({type:a+"Axis."+o,mergeDefaultAndTheme:function(e,t){var i=this.layoutMode,n=i?Cl(e):{};m(e,t.getTheme().get(o+"Axis")),m(e,this.getDefaultOption()),e.type=r(a,e),i&&_l(e,n,i)},optionUpdated:function(){"category"===this.option.type&&(this.__ordinalMeta=Rh.createByAxisModel(this))},getCategories:function(e){var t=this.option;if("category"===t.type)return e?t.data:this.__ordinalMeta.categories},getOrdinalMeta:function(){return this.__ordinalMeta},defaultOption:g([{},Kp[o+"Axis"],t],!0)})}),Nl.registerSubTypeDefaulter(a+"Axis",L(r,a))},em=Nl.extend({type:"cartesian2dAxis",axis:null,init:function(){em.superApply(this,"init",arguments),this.resetRange()},mergeOption:function(){em.superApply(this,"mergeOption",arguments),this.resetRange()},restoreData:function(){em.superApply(this,"restoreData",arguments),this.resetRange()},getCoordSysModel:function(){return this.ecModel.queryComponents({mainType:"grid",index:this.option.gridIndex,id:this.option.gridId})[0]}});function tm(e,t){return t.type||(t.data?"category":"value")}m(em.prototype,Nf);var im={offset:0};function nm(e,t,i){return e.getCoordSysModel()===t}function om(e,t,i){this._coordsMap={},this._coordsList=[],this._axesMap={},this._axesList=[],this._initCartesian(e,t,i),this.model=e}Qp("x",em,tm,im),Qp("y",em,tm,im),Nl.extend({type:"grid",dependencies:["xAxis","yAxis"],layoutMode:"box",coordinateSystem:null,defaultOption:{show:!1,zlevel:0,z:0,left:"10%",top:60,right:"10%",bottom:60,containLabel:!1,backgroundColor:"rgba(0,0,0,0)",borderWidth:1,borderColor:"#ccc"}});var am=om.prototype;function rm(e,t,i){i.getAxesOnZeroOf=function(){return n?[n]:[]};var n,o=e[t],a=i.model,r=a.get("axisLine.onZero"),s=a.get("axisLine.onZeroAxisIndex");if(r)if(null==s){for(var l in o)if(o.hasOwnProperty(l)&&sm(o[l])){n=o[l];break}}else sm(o[s])&&(n=o[s])}function sm(e){return e&&"category"!==e.type&&"time"!==e.type&&(t=e.scale.getExtent(),i=t[0],n=t[1],!(0<i&&0<n||i<0&&n<0));var t,i,n}am.type="grid",am.axisPointerEnabled=!0,am.getRect=function(){return this._rect},am.update=function(e,t){var i=this._axesMap;this._updateScale(e,this.model),O(i.x,function(e){Sf(e.scale,e.model)}),O(i.y,function(e){Sf(e.scale,e.model)}),O(i.x,function(e){rm(i,"y",e)}),O(i.y,function(e){rm(i,"x",e)}),this.resize(this.model,t)},am.resize=function(e,t,i){var l=xl(e.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()});this._rect=l;var n=this._axesList;function o(){O(n,function(e){var t,i,n,o,a=e.isHorizontal(),r=a?[0,l.width]:[0,l.height],s=e.inverse?1:0;e.setExtent(r[s],r[1-s]),t=e,i=a?l.x:l.y,n=t.getExtent(),o=n[0]+n[1],t.toGlobalCoord="x"===t.dim?function(e){return e+i}:function(e){return o-e+i},t.toLocalCoord="x"===t.dim?function(e){return e-i}:function(e){return o-e+i}})}o(),!i&&e.get("containLabel")&&(O(n,function(e){if(!e.model.get("axisLabel.inside")){var t=function(e){var t=e.model,i=e.scale;if(t.get("axisLabel.show")&&!i.isBlank()){var n,o,a="category"===e.type,r=i.getExtent();o=a?i.count():(n=i.getTicks()).length;var s,l,d,c,u,h,f,p,m,g=e.getLabelModel(),v=kf(e),y=1;40<o&&(y=Math.ceil(o/40));for(var b=0;b<o;b+=y){var x=v(n?n[b]:r[0]+b),w=g.getTextRect(x),_=(l=w,d=g.get("rotate")||0,c=d*Math.PI/180,u=l.plain(),h=u.width,f=u.height,p=h*Math.cos(c)+f*Math.sin(c),m=h*Math.sin(c)+f*Math.cos(c),new ii(u.x,u.y,p,m));s?s.union(_):s=_}return s}}(e);if(t){var i=e.isHorizontal()?"height":"width",n=e.model.get("axisLabel.margin");l[i]-=t[i]+n,"top"===e.position?l.y+=t.height+n:"left"===e.position&&(l.x+=t.width+n)}}}),o())},am.getAxis=function(e,t){var i=this._axesMap[e];if(null!=i){if(null==t)for(var n in i)if(i.hasOwnProperty(n))return i[n];return i[t]}},am.getAxes=function(){return this._axesList.slice()},am.getCartesian=function(e,t){if(null!=e&&null!=t){var i="x"+e+"y"+t;return this._coordsMap[i]}B(e)&&(t=e.yAxisIndex,e=e.xAxisIndex);for(var n=0,o=this._coordsList;n<o.length;n++)if(o[n].getAxis("x").index===e||o[n].getAxis("y").index===t)return o[n]},am.getCartesians=function(){return this._coordsList.slice()},am.convertToPixel=function(e,t,i){var n=this._findConvertTarget(e,t);return n.cartesian?n.cartesian.dataToPoint(i):n.axis?n.axis.toGlobalCoord(n.axis.dataToCoord(i)):null},am.convertFromPixel=function(e,t,i){var n=this._findConvertTarget(e,t);return n.cartesian?n.cartesian.pointToData(i):n.axis?n.axis.coordToData(n.axis.toLocalCoord(i)):null},am._findConvertTarget=function(e,t){var i,n,o=t.seriesModel,a=t.xAxisModel||o&&o.getReferringComponents("xAxis")[0],r=t.yAxisModel||o&&o.getReferringComponents("yAxis")[0],s=t.gridModel,l=this._coordsList;if(o)w(l,i=o.coordinateSystem)<0&&(i=null);else if(a&&r)i=this.getCartesian(a.componentIndex,r.componentIndex);else if(a)n=this.getAxis("x",a.componentIndex);else if(r)n=this.getAxis("y",r.componentIndex);else if(s){s.coordinateSystem===this&&(i=this._coordsList[0])}return{cartesian:i,axis:n}},am.containPoint=function(e){var t=this._coordsList[0];if(t)return t.containPoint(e)},am._initCartesian=function(r,e,t){var s={left:!1,right:!1,top:!1,bottom:!1},l={x:{},y:{}},d={x:0,y:0};if(e.eachComponent("xAxis",i("x"),this),e.eachComponent("yAxis",i("y"),this),!d.x||!d.y)return this._axesMap={},void(this._axesList=[]);function i(a){return function(e,t){if(nm(e,r)){var i=e.get("position");"x"===a?"top"!==i&&"bottom"!==i&&s[i="bottom"]&&(i="top"===i?"bottom":"top"):"left"!==i&&"right"!==i&&s[i="left"]&&(i="left"===i?"right":"left"),s[i]=!0;var n=new Zp(a,Tf(e),[0,0],e.get("type"),i),o="category"===n.type;n.onBand=o&&e.get("boundaryGap"),n.inverse=e.get("inverse"),(e.axis=n).model=e,n.grid=this,n.index=t,this._axesList.push(n),l[a][t]=n,d[a]++}}}O((this._axesMap=l).x,function(o,a){O(l.y,function(e,t){var i="x"+a+"y"+t,n=new qp(i);n.grid=this,n.model=r,this._coordsMap[i]=n,this._coordsList.push(n),n.addAxis(o),n.addAxis(e)},this)},this)},am._updateScale=function(l,d){function c(t,i,e){O(t.mapDimension(i.dim,!0),function(e){i.scale.unionExtentFromData(t,Ah(t,e))})}O(this._axesList,function(e){e.scale.setExtent(1/0,-1/0)}),l.eachSeries(function(e){if(cm(e)){var t=dm(e,l),i=t[0],n=t[1];if(!nm(i,d)||!nm(n,d))return;var o=this.getCartesian(i.componentIndex,n.componentIndex),a=e.getData(),r=o.getAxis("x"),s=o.getAxis("y");"list"===a.type&&(c(a,r,e),c(a,s,e))}},this)},am.getTooltipAxes=function(n){var o=[],a=[];return O(this.getCartesians(),function(e){var t=null!=n&&"auto"!==n?e.getAxis(n):e.getBaseAxis(),i=e.getOtherAxis(t);w(o,t)<0&&o.push(t),w(a,i)<0&&a.push(i)}),{baseAxes:o,otherAxes:a}};var lm=["xAxis","yAxis"];function dm(i,e){return M(lm,function(e){var t=i.getReferringComponents(e)[0];if(I&&!t)throw new Error(e+' "'+j(i.get(e+"Index"),i.get(e+"Id"),0)+'" not found');return t})}function cm(e){return"cartesian2d"===e.get("coordinateSystem")}om.create=function(n,o){var a=[];return n.eachComponent("grid",function(e,t){var i=new om(e,n,o);i.name="grid_"+t,i.resize(e,o,!0),e.coordinateSystem=i,a.push(i)}),n.eachSeries(function(e){if(cm(e)){var t=dm(e),i=t[0],n=t[1],o=i.getCoordSysModel();if(I){if(!o)throw new Error('Grid "'+j(i.get("gridIndex"),i.get("gridId"),0)+'" not found');if(i.getCoordSysModel()!==n.getCoordSysModel())throw new Error("xAxis and yAxis must use the same grid")}var a=o.coordinateSystem;e.coordinateSystem=a.getCartesian(i.componentIndex,n.componentIndex)}}),a},om.dimensions=om.prototype.dimensions=qp.prototype.dimensions,od.register("cartesian2d",om);var um=Math.PI;function hm(e){var t={componentType:e.mainType};return t[e.mainType+"Index"]=e.componentIndex,t}var fm=function(e,t){this.opt=t,this.axisModel=e,E(t,{labelOffset:0,nameDirection:1,tickDirection:1,labelDirection:1,silent:!0}),this.group=new ni;var i=new ni({position:t.position.slice(),rotation:t.rotation});i.updateTransform(),this._transform=i.transform,this._dumbGroup=i};fm.prototype={constructor:fm,hasBuilder:function(e){return!!pm[e]},add:function(e){pm[e].call(this)},getGroup:function(){return this.group}};var pm={axisLine:function(){var a=this.opt,e=this.axisModel;if(e.get("axisLine.show")){var t=this.axisModel.axis.getExtent(),i=this._transform,r=[t[0],0],n=[t[1],0];i&&(Ce(r,r,i),Ce(n,n,i));var s=D({lineCap:"round"},e.getModel("axisLine.lineStyle").getLineStyle());this.group.add(new wr(Vr({anid:"line",shape:{x1:r[0],y1:r[1],x2:n[0],y2:n[1]},style:s,strokeContainThreshold:a.strokeContainThreshold||5,silent:!0,z2:1})));var l=e.get("axisLine.symbol"),o=e.get("axisLine.symbolSize"),d=e.get("axisLine.symbolOffset")||0;if("number"==typeof d&&(d=[d,d]),null!=l){"string"==typeof l&&(l=[l,l]),"string"!=typeof o&&"number"!=typeof o||(o=[o,o]);var c=o[0],u=o[1];O([{rotate:a.rotation+Math.PI/2,offset:d[0],r:0},{rotate:a.rotation-Math.PI/2,offset:d[1],r:Math.sqrt((r[0]-n[0])*(r[0]-n[0])+(r[1]-n[1])*(r[1]-n[1]))}],function(e,t){if("none"!==l[t]&&null!=l[t]){var i=Of(l[t],-c/2,-u/2,c,u,s.stroke,!0),n=e.r+e.offset,o=[r[0]+n*Math.cos(a.rotation),r[1]-n*Math.sin(a.rotation)];i.attr({rotation:e.rotate,position:o,silent:!0}),this.group.add(i)}},this)}}},axisTickLabel:function(){var e=this.axisModel,t=this.opt,i=function(e,t,i){var n=t.axis;if(!t.get("axisTick.show")||n.scale.isBlank())return;for(var o=t.getModel("axisTick"),a=o.getModel("lineStyle"),r=o.get("length"),s=n.getTicksCoords(),l=[],d=[],c=e._transform,u=[],h=0;h<s.length;h++){var f=s[h].coord;l[0]=f,l[1]=0,d[0]=f,d[1]=i.tickDirection*r,c&&(Ce(l,l,c),Ce(d,d,c));var p=new wr(Vr({anid:"tick_"+s[h].tickValue,shape:{x1:l[0],y1:l[1],x2:d[0],y2:d[1]},style:E(a.getLineStyle(),{stroke:t.get("axisLine.lineStyle.color")}),z2:2,silent:!0}));e.group.add(p),u.push(p)}return u}(this,e,t);!function(e,t,i){var n=e.get("axisLabel.showMinLabel"),o=e.get("axisLabel.showMaxLabel");i=i||[];var a=(t=t||[])[0],r=t[1],s=t[t.length-1],l=t[t.length-2],d=i[0],c=i[1],u=i[i.length-1],h=i[i.length-2];!1===n?(vm(a),vm(d)):ym(a,r)&&(n?(vm(r),vm(c)):(vm(a),vm(d)));!1===o?(vm(s),vm(u)):ym(l,s)&&(o?(vm(l),vm(h)):(vm(s),vm(u)))}(e,function(d,c,u){var h=c.axis;if(!j(u.axisLabelShow,c.get("axisLabel.show"))||h.scale.isBlank())return;var f=c.getModel("axisLabel"),p=f.get("margin"),e=h.getViewLabels(),t=(j(u.labelRotate,f.get("rotate"))||0)*um/180,m=mm(u.rotation,t,u.labelDirection),g=c.getCategories(!0),v=[],y=gm(c),b=c.get("triggerEvent");return O(e,function(e,t){var i=e.tickValue,n=e.formattedLabel,o=e.rawLabel,a=f;g&&g[i]&&g[i].textStyle&&(a=new Is(g[i].textStyle,f,c.ecModel));var r=a.getTextColor()||c.get("axisLine.lineStyle.color"),s=[h.dataToCoord(i),u.labelOffset+u.labelDirection*p],l=new cr({anid:"label_"+i,position:s,rotation:m.rotation,silent:y,z2:10});as(l.style,a,{text:n,textAlign:a.getShallow("align",!0)||m.textAlign,textVerticalAlign:a.getShallow("verticalAlign",!0)||a.getShallow("baseline",!0)||m.textVerticalAlign,textFill:"function"==typeof r?r("category"===h.type?o:"value"===h.type?i+"":i,t):r}),b&&(l.eventData=hm(c),l.eventData.targetType="axisLabel",l.eventData.value=o),d._dumbGroup.add(l),l.updateTransform(),v.push(l),d.group.add(l),l.decomposeTransform()}),v}(this,e,t),i)},axisName:function(){var e=this.opt,t=this.axisModel,i=j(e.axisName,t.get("name"));if(i){var n,o,a=t.get("nameLocation"),r=e.nameDirection,s=t.getModel("nameTextStyle"),l=t.get("nameGap")||0,d=this.axisModel.axis.getExtent(),c=d[0]>d[1]?-1:1,u=["start"===a?d[0]-c*l:"end"===a?d[1]+c*l:(d[0]+d[1])/2,bm(a)?e.labelOffset+r*l:0],h=t.get("nameRotate");null!=h&&(h=h*um/180),bm(a)?n=mm(e.rotation,null!=h?h:e.rotation,r):(n=function(e,t,i,n){var o,a,r=Vs(i-e.rotation),s=n[0]>n[1],l="start"===t&&!s||"start"!==t&&s;o=js(r-um/2)?(a=l?"bottom":"top","center"):js(r-1.5*um)?(a=l?"top":"bottom","center"):(a="middle",r<1.5*um&&um/2<r?l?"left":"right":l?"right":"left");return{rotation:r,textAlign:o,textVerticalAlign:a}}(e,a,h||0,d),null!=(o=e.axisNameAvailableWidth)&&(o=Math.abs(o/Math.sin(n.rotation)),!isFinite(o)&&(o=null)));var f=s.getFont(),p=t.get("nameTruncate",!0)||{},m=p.ellipsis,g=j(e.nameTruncateMaxWidth,p.maxWidth,o),v=null!=m&&null!=g?hl(i,g,f,m,{minChar:2,placeholder:p.placeholder}):i,y=t.get("tooltip",!0),b=t.mainType,x={componentType:b,name:i,$vars:["name"]};x[b+"Index"]=t.componentIndex;var w=new cr({anid:"name",__fullText:i,__truncatedText:v,position:u,rotation:n.rotation,silent:gm(t),z2:1,tooltip:y&&y.show?D({content:i,formatter:function(){return i},formatterParams:x},y):null});as(w.style,s,{text:v,textFont:f,textFill:s.getTextColor()||t.get("axisLine.lineStyle.color"),textAlign:n.textAlign,textVerticalAlign:n.textVerticalAlign}),t.get("triggerEvent")&&(w.eventData=hm(t),w.eventData.targetType="axisName",w.eventData.name=i),this._dumbGroup.add(w),w.updateTransform(),this.group.add(w),w.decomposeTransform()}}},mm=fm.innerTextLayout=function(e,t,i){var n,o=Vs(t-e);return{rotation:o,textAlign:js(o)?(n=0<i?"top":"bottom","center"):js(o-um)?(n=0<i?"bottom":"top","center"):(n="middle",0<o&&o<um?0<i?"right":"left":0<i?"left":"right"),textVerticalAlign:n}};function gm(e){var t=e.get("tooltip");return e.get("silent")||!(e.get("triggerEvent")||t&&t.show)}function vm(e){e&&(e.ignore=!0)}function ym(e,t,i){var n=e&&e.getBoundingRect().clone(),o=t&&t.getBoundingRect().clone();if(n&&o){var a=Be([]);return Ve(a,a,-e.rotation),n.applyTransform(Fe([],a,e.getLocalTransform())),o.applyTransform(Fe([],a,t.getLocalTransform())),n.intersect(o)}}function bm(e){return"middle"===e||"center"===e}var xm=O,wm=L;function _m(e,t){var p,m,i,r,g,v,y,n={axesInfo:{},seriesInvolved:!1,coordSysAxesInfo:{},coordSysMap:{}};return p=n,i=t,r=(m=e).getComponent("tooltip"),g=m.getComponent("axisPointer"),v=g.get("link",!0)||[],y=[],xm(i.getCoordinateSystems(),function(u){if(u.axisPointerEnabled){var e=km(u.model),h=p.coordSysAxesInfo[e]={},t=(p.coordSysMap[e]=u).model,f=t.getModel("tooltip",r);if(xm(u.getAxes(),wm(a,!1,null)),u.getTooltipAxes&&r&&f.get("show")){var i="axis"===f.get("trigger"),n="cross"===f.get("axisPointer.type"),o=u.getTooltipAxes(f.get("axisPointer.axis"));(i||n)&&xm(o.baseAxes,wm(a,!n||"cross",i)),n&&xm(o.otherAxes,wm(a,"cross",!1))}}function a(e,t,i){var n=i.model.getModel("axisPointer",g),o=n.get("show");if(o&&("auto"!==o||e||Tm(n))){null==t&&(t=n.get("triggerTooltip"));var a=(n=e?function(e,t,i,n,o,a){var r=t.getModel("axisPointer"),s={};xm(["type","snap","lineStyle","shadowStyle","label","animation","animationDurationUpdate","animationEasingUpdate","z"],function(e){s[e]=N(r.get(e))}),s.snap="category"!==e.type&&!!a,"cross"===r.get("type")&&(s.type="line");var l=s.label||(s.label={});if(null==l.show&&(l.show=!1),"cross"===o){var d=r.get("label.show");if(l.show=null==d||d,!a){var c=s.lineStyle=r.get("crossStyle");c&&E(l,c.textStyle)}}return e.model.getModel("axisPointer",new Is(s,i,n))}(i,f,g,m,e,t):n).get("snap"),r=km(i.model),s=t||a||"category"===i.type,l=p.axesInfo[r]={key:r,axis:i,coordSys:u,axisPointerModel:n,triggerTooltip:t,involveSeries:s,snap:a,useHandle:Tm(n),seriesModels:[]};h[r]=l,p.seriesInvolved|=s;var d=function(e,t){for(var i=t.model,n=t.dim,o=0;o<e.length;o++){var a=e[o]||{};if(Cm(a[n+"AxisId"],i.id)||Cm(a[n+"AxisIndex"],i.componentIndex)||Cm(a[n+"AxisName"],i.name))return o}}(v,i);if(null!=d){var c=y[d]||(y[d]={axesInfo:{}});c.axesInfo[r]=l,c.mapper=v[d].mapper,l.linkGroup=c}}}}),n.seriesInvolved&&function(o,e){e.eachSeries(function(i){var n=i.coordinateSystem,e=i.get("tooltip.trigger",!0),t=i.get("tooltip.show",!0);n&&"none"!==e&&!1!==e&&"item"!==e&&!1!==t&&!1!==i.get("axisPointer.show",!0)&&xm(o.coordSysAxesInfo[km(n.model)],function(e){var t=e.axis;n.getAxis(t.dim)===t&&(e.seriesModels.push(i),null==e.seriesDataCount&&(e.seriesDataCount=0),e.seriesDataCount+=i.getData().count())})},this)}(n,e),n}function Cm(e,t){return"all"===e||R(e)&&0<=w(e,t)||e===t}function Sm(e){var t=(e.ecModel.getComponent("axisPointer")||{}).coordSysAxesInfo;return t&&t.axesInfo[km(e)]}function Tm(e){return!!e.get("handle.show")}function km(e){return e.type+"||"+e.id}var Im=Ku({type:"axis",_axisPointer:null,axisPointerClass:null,render:function(e,t,i,n){this.axisPointerClass&&function(e){var t=Sm(e);if(t){var i=t.axisPointerModel,n=t.axis.scale,o=i.option,a=i.get("status"),r=i.get("value");null!=r&&(r=n.parse(r));var s=Tm(i);null==a&&(o.status=s?"show":"hide");var l=n.getExtent().slice();l[0]>l[1]&&l.reverse(),(null==r||r>l[1])&&(r=l[1]),r<l[0]&&(r=l[0]),o.value=r,s&&(o.status=t.axis.scale.isBlank()?"hide":"show")}}(e),Im.superApply(this,"render",arguments),Nm(this,e,t,i,n,!0)},updateAxisPointer:function(e,t,i,n,o){Nm(this,e,t,i,n,!1)},remove:function(e,t){var i=this._axisPointer;i&&i.remove(t),Im.superApply(this,"remove",arguments)},dispose:function(e,t){Em(this,t),Im.superApply(this,"dispose",arguments)}});function Nm(e,t,i,n,o,a){var r=Im.getAxisPointerClass(e.axisPointerClass);if(r){var s,l=(s=Sm(t))&&s.axisPointerModel;l?(e._axisPointer||(e._axisPointer=new r)).render(t,l,n,a):Em(e,n)}}function Em(e,t,i){var n=e._axisPointer;n&&n.dispose(t,i),e._axisPointer=null}var Mm=[];function Dm(e,t,i){i=i||{};var n=e.coordinateSystem,o=t.axis,a={},r=o.getAxesOnZeroOf()[0],s=o.position,l=r?"onZero":s,d=o.dim,c=n.getRect(),u=[c.x,c.x+c.width,c.y,c.y+c.height],h={left:0,right:1,top:0,bottom:1,onZero:2},f=t.get("offset")||0,p="x"===d?[u[2]-f,u[3]+f]:[u[0]-f,u[1]+f];if(r){var m=r.toGlobalCoord(r.dataToCoord(0));p[h.onZero]=Math.max(Math.min(m,p[1]),p[0])}a.position=["y"===d?p[h[l]]:u[0],"x"===d?p[h[l]]:u[3]],a.rotation=Math.PI/2*("x"===d?0:1);a.labelDirection=a.tickDirection=a.nameDirection={top:-1,bottom:1,left:-1,right:1}[s],a.labelOffset=r?p[h[s]]-p[h.onZero]:0,t.get("axisTick.inside")&&(a.tickDirection=-a.tickDirection),j(i.labelInside,t.get("axisLabel.inside"))&&(a.labelDirection=-a.labelDirection);var g=t.get("axisLabel.rotate");return a.labelRotate="top"===l?-g:g,a.z2=1,a}Im.registerAxisPointerClass=function(e,t){if(I&&Mm[e])throw new Error("axisPointer "+e+" exists");Mm[e]=t},Im.getAxisPointerClass=function(e){return e&&Mm[e]};var Am=["axisLine","axisTickLabel","axisName"],Lm=["splitArea","splitLine"],Pm=Im.extend({type:"cartesianAxis",axisPointerClass:"CartesianAxisPointer",render:function(t,e,i,n){this.group.removeAll();var o=this._axisGroup;if(this._axisGroup=new ni,this.group.add(this._axisGroup),t.get("show")){var a=t.getCoordSysModel(),r=Dm(a,t),s=new fm(t,r);O(Am,s.add,s),this._axisGroup.add(s.getGroup()),O(Lm,function(e){t.get(e+".show")&&this["_"+e](t,a)},this),vs(o,this._axisGroup,t),Pm.superCall(this,"render",t,e,i,n)}},remove:function(){this._splitAreaColors=null},_splitLine:function(e,t){var i=e.axis;if(!i.scale.isBlank()){var n=e.getModel("splitLine"),o=n.getModel("lineStyle"),a=o.get("color");a=R(a)?a:[a];for(var r=t.coordinateSystem.getRect(),s=i.isHorizontal(),l=0,d=i.getTicksCoords({tickModel:n}),c=[],u=[],h=o.getLineStyle(),f=0;f<d.length;f++){var p=i.toGlobalCoord(d[f].coord);u[1]=s?(c[0]=p,c[1]=r.y,u[0]=p,r.y+r.height):(c[0]=r.x,c[1]=p,u[0]=r.x+r.width,p);var m=l++%a.length,g=d[f].tickValue;this._axisGroup.add(new wr(Vr({anid:null!=g?"line_"+d[f].tickValue:null,shape:{x1:c[0],y1:c[1],x2:u[0],y2:u[1]},style:E({stroke:a[m]},h),silent:!0})))}}},_splitArea:function(e,t){var i=e.axis;if(!i.scale.isBlank()){var n=e.getModel("splitArea"),o=n.getModel("areaStyle"),a=o.get("color"),r=t.coordinateSystem.getRect(),s=i.getTicksCoords({tickModel:n,clamp:!0});if(s.length){var l=a.length,d=this._splitAreaColors,c=ee(),u=0;if(d)for(var h=0;h<s.length;h++){var f=d.get(s[h].tickValue);if(null!=f){u=(f+(l-1)*h)%l;break}}var p=i.toGlobalCoord(s[0].coord),m=o.getAreaStyle();a=R(a)?a:[a];for(h=1;h<s.length;h++){var g,v,y,b,x=i.toGlobalCoord(s[h].coord);p=i.isHorizontal()?(g=p,v=r.y,y=x-g,b=r.height,g+y):(g=r.x,v=p,y=r.width,v+(b=x-v));var w=s[h-1].tickValue;null!=w&&c.set(w,u),this._axisGroup.add(new xr({anid:null!=w?"area_"+w:null,shape:{x:g,y:v,width:y,height:b},style:E({fill:a[u]},m),silent:!0})),u=(u+1)%l}this._splitAreaColors=c}}}});Pm.extend({type:"xAxis"}),Pm.extend({type:"yAxis"}),Ku({type:"grid",render:function(e,t){this.group.removeAll(),e.get("show")&&this.group.add(new xr({shape:e.coordinateSystem.getRect(),style:E({fill:e.get("backgroundColor")},e.getItemStyle()),silent:!0,z2:-1}))}}),Vu(function(e){e.xAxis&&e.yAxis&&!e.grid&&(e.grid={})}),Yu(Vp("line","circle","line")),Gu(jp("line")),ju(tu.PROCESSOR.STATISTIC,{seriesType:"line",modifyOutputEnd:!0,reset:function(e,t,i){var n=e.getData(),o=e.get("sampling"),a=e.coordinateSystem;if("cartesian2d"===a.type&&o){var r,s=a.getBaseAxis(),l=a.getOtherAxis(s),d=s.getExtent(),c=d[1]-d[0],u=Math.round(n.count()/c);1<u&&("string"==typeof o?r=Wp[o]:"function"==typeof o&&(r=o),r&&e.setData(n.downSample(n.mapDimension(l.dim),1/u,r,$p)))}}});var Rm=Zd.extend({type:"series.__base_bar__",getInitialData:function(e,t){return Lh(this.getSource(),this)},getMarkerPosition:function(e){var t=this.coordinateSystem;if(t){var i=t.dataToPoint(t.clampData(e)),n=this.getData(),o=n.getLayout("offset"),a=n.getLayout("size");return i[t.getBaseAxis().isHorizontal()?0:1]+=o+a/2,i}return[NaN,NaN]},defaultOption:{zlevel:0,z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,barMinHeight:0,barMinAngle:0,large:!1,largeThreshold:400,progressive:5e3,progressiveChunkMode:"mod",itemStyle:{},emphasis:{}}});function Um(e,t,i,n,o,a,r){os(e,t,i.getModel("label"),i.getModel("emphasis.label"),{labelFetcher:o,labelDataIndex:a,defaultText:sp(o.getData(),a),isRectText:!0,autoColor:n}),Om(e),Om(t)}function Om(e,t){"outside"===e.textPosition&&(e.textPosition=t)}Rm.extend({type:"series.bar",dependencies:["grid","polar"],brushSelector:"rect",getProgressive:function(){return!!this.get("large")&&this.get("progressive")},getProgressiveThreshold:function(){var e=this.get("progressiveThreshold"),t=this.get("largeThreshold");return e<t&&(e=t),e}});var Bm=Do([["fill","color"],["stroke","borderColor"],["lineWidth","borderWidth"],["stroke","barBorderColor"],["lineWidth","barBorderWidth"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]),zm=["itemStyle","barBorderWidth"];D(Is.prototype,{getBarItemStyle:function(e){var t=Bm(this,e);if(this.getBorderLineDash){var i=this.getBorderLineDash();i&&(t.lineDash=i)}return t}}),Qu({type:"bar",render:function(e,t,i){this._updateDrawMode(e);var n=e.get("coordinateSystem");return"cartesian2d"===n||"polar"===n?this._isLargeDraw?this._renderLarge(e,t,i):this._renderNormal(e,t,i):I&&console.warn("Only cartesian2d and polar supported for bar."),this.group},incrementalPrepareRender:function(e,t,i){this._clear(),this._updateDrawMode(e)},incrementalRender:function(e,t,i,n){this._incrementalRenderLarge(e,t)},_updateDrawMode:function(e){var t=e.pipelineContext.large;(null==this._isLargeDraw||t^this._isLargeDraw)&&(this._isLargeDraw=t,this._clear())},_renderNormal:function(a,e,t){var r,s=this.group,l=a.getData(),d=this._data,c=a.coordinateSystem,i=c.getBaseAxis();"cartesian2d"===c.type?r=i.isHorizontal():"polar"===c.type&&(r="angle"===i.dim);var u=a.isAnimationEnabled()?a:null;l.diff(d).add(function(e){if(l.hasValue(e)){var t=l.getItemModel(e),i=jm[c.type](l,e,t),n=Fm[c.type](l,e,t,i,r,u);l.setItemGraphicEl(e,n),s.add(n),Wm(n,l,e,t,i,a,r,"polar"===c.type)}}).update(function(e,t){var i=d.getItemGraphicEl(t);if(l.hasValue(e)){var n=l.getItemModel(e),o=jm[c.type](l,e,n);i?hs(i,{shape:o},u,e):i=Fm[c.type](l,e,n,o,r,u,!0),l.setItemGraphicEl(e,i),s.add(i),Wm(i,l,e,n,o,a,r,"polar"===c.type)}else s.remove(i)}).remove(function(e){var t=d.getItemGraphicEl(e);"cartesian2d"===c.type?t&&Hm(e,u,t):t&&Vm(e,u,t)}).execute(),this._data=l},_renderLarge:function(e,t,i){this._clear(),Gm(e,this.group)},_incrementalRenderLarge:function(e,t){Gm(t,this.group,!0)},dispose:ie,remove:function(e){this._clear(e)},_clear:function(t){var e=this.group,i=this._data;t&&t.get("animation")&&i&&!this._isLargeDraw?i.eachItemGraphicEl(function(e){"sector"===e.type?Vm(e.dataIndex,t,e):Hm(e.dataIndex,t,e)}):e.removeAll(),this._data=null}});var Fm={cartesian2d:function(e,t,i,n,o,a,r){var s=new xr({shape:D({},n)});if(a){var l=o?"height":"width",d={};s.shape[l]=0,d[l]=n[l],xs[r?"updateProps":"initProps"](s,{shape:d},a,t)}return s},polar:function(e,t,i,n,o,a,r){var s=n.startAngle<n.endAngle,l=new pr({shape:E({clockwise:s},n)});if(a){var d=o?"r":"endAngle",c={};l.shape[d]=o?0:n.startAngle,c[d]=n[d],xs[r?"updateProps":"initProps"](l,{shape:c},a,t)}return l}};function Hm(e,t,i){i.style.text=null,hs(i,{shape:{width:0}},t,e,function(){i.parent&&i.parent.remove(i)})}function Vm(e,t,i){i.style.text=null,hs(i,{shape:{r:i.shape.r0}},t,e,function(){i.parent&&i.parent.remove(i)})}var jm={cartesian2d:function(e,t,i){var n,o,a=e.getItemLayout(t),r=(n=a,o=i.get(zm)||0,Math.min(o,Math.abs(n.width),Math.abs(n.height))),s=0<a.width?1:-1,l=0<a.height?1:-1;return{x:a.x+s*r/2,y:a.y+l*r/2,width:a.width-s*r,height:a.height-l*r}},polar:function(e,t,i){var n=e.getItemLayout(t);return{cx:n.cx,cy:n.cy,r0:n.r0,r:n.r,startAngle:n.startAngle,endAngle:n.endAngle}}};function Wm(e,t,i,n,o,a,r,s){var l=t.getItemVisual(i,"color"),d=t.getItemVisual(i,"opacity"),c=n.getModel("itemStyle"),u=n.getModel("emphasis.itemStyle").getBarItemStyle();s||e.setShape("r",c.get("barBorderRadius")||0),e.useStyle(E({fill:l,opacity:d},c.getBarItemStyle()));var h=n.getShallow("cursor");h&&e.attr("cursor",h);r?o.height:o.width;s||Um(e.style,u,n,l,a,i),ns(e,u)}var $m=qa.extend({type:"largeBar",shape:{points:[]},buildPath:function(e,t){for(var i=t.points,n=this.__startPoint,o=this.__valueIdx,a=0;a<i.length;a+=2)n[this.__valueIdx]=i[a+o],e.moveTo(n[0],n[1]),e.lineTo(i[a],i[a+1])}});function Gm(e,t,i){var n=e.getData(),o=[],a=n.getLayout("valueAxisHorizontal")?1:0;o[1-a]=n.getLayout("valueAxisStart");var r,s,l,d,c,u=new $m({shape:{points:n.getLayout("largePoints")},incremental:!!i,__startPoint:o,__valueIdx:a});t.add(u),r=u,s=e,d=(l=n).getVisual("borderColor")||l.getVisual("color"),c=s.getModel("itemStyle").getItemStyle(["color","borderColor"]),r.useStyle(c),r.style.fill=null,r.style.stroke=d,r.style.lineWidth=l.getLayout("barWidth")}Gu(L(tf,"bar")),Gu(nf),Yu({seriesType:"bar",reset:function(e){e.getData().setVisual("legendSymbol","roundRect")}});var Ym=function(e,t,i){t=R(t)&&{coordDimensions:t}||D({},t);var n=e.getSource(),o=Eh(n,t),a=new mh(o,e);return a.initData(n,i),a},qm={updateSelectedMap:function(e){this._targetList=R(e)?e.slice():[],this._selectTargetMap=S(e||[],function(e,t){return e.set(t.name,t),e},ee())},select:function(e,t){var i=null!=t?this._targetList[t]:this._selectTargetMap.get(e);"single"===this.get("selectedMode")&&this._selectTargetMap.each(function(e){e.selected=!1}),i&&(i.selected=!0)},unSelect:function(e,t){var i=null!=t?this._targetList[t]:this._selectTargetMap.get(e);i&&(i.selected=!1)},toggleSelected:function(e,t){var i=null!=t?this._targetList[t]:this._selectTargetMap.get(e);if(null!=i)return this[i.selected?"unSelect":"select"](e,t),i.selected},isSelected:function(e,t){var i=null!=t?this._targetList[t]:this._selectTargetMap.get(e);return i&&i.selected}},Zm=Ju({type:"series.pie",init:function(e){Zm.superApply(this,"init",arguments),this.legendDataProvider=function(){return this.getRawData()},this.updateSelectedMap(this._createSelectableList()),this._defaultLabelLine(e)},mergeOption:function(e){Zm.superCall(this,"mergeOption",e),this.updateSelectedMap(this._createSelectableList())},getInitialData:function(e,t){return Ym(this,["value"])},_createSelectableList:function(){for(var e=this.getRawData(),t=e.mapDimension("value"),i=[],n=0,o=e.count();n<o;n++)i.push({name:e.getName(n),value:e.get(t,n),selected:Fd(e,n,"selected")});return i},getDataParams:function(e){var t=this.getData(),i=Zm.superCall(this,"getDataParams",e),n=[];return t.each(t.mapDimension("value"),function(e){n.push(e)}),i.percent=Fs(n,e,t.hostModel.get("percentPrecision")),i.$vars.push("percent"),i},_defaultLabelLine:function(e){lo(e,"labelLine",["show"]);var t=e.labelLine,i=e.emphasis.labelLine;t.show=t.show&&e.label.show,i.show=i.show&&e.emphasis.label.show},defaultOption:{zlevel:0,z:2,legendHoverLink:!0,hoverAnimation:!0,center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,selectedOffset:10,hoverOffset:10,avoidLabelOverlap:!0,percentPrecision:2,stillShowZeroSum:!0,label:{rotate:!1,show:!0,position:"outer"},labelLine:{show:!0,length:15,length2:15,smooth:!1,lineStyle:{width:1,type:"solid"}},itemStyle:{borderWidth:1},animationType:"expansion",animationEasing:"cubicOut"}});function Xm(e,t,i,n){var o=t.getData(),a=this.dataIndex,r=o.getName(a),s=t.get("selectedOffset");n.dispatchAction({type:"pieToggleSelect",from:e,name:r,seriesId:t.id}),o.each(function(e){Km(o.getItemGraphicEl(e),o.getItemLayout(e),t.isSelected(o.getName(e)),s,i)})}function Km(e,t,i,n,o){var a=(t.startAngle+t.endAngle)/2,r=i?n:0,s=[Math.cos(a)*r,Math.sin(a)*r];o?e.animate().when(200,{position:s}).start("bounceOut"):e.attr("position",s)}function Jm(e,t){ni.call(this);var i=new pr({z2:2}),n=new br,o=new cr;function a(){n.ignore=n.hoverIgnore,o.ignore=o.hoverIgnore}function r(){n.ignore=n.normalIgnore,o.ignore=o.normalIgnore}this.add(i),this.add(n),this.add(o),this.updateData(e,t,!0),this.on("emphasis",a).on("normal",r).on("mouseover",a).on("mouseout",r)}C(Zm,qm);var Qm=Jm.prototype;Qm.updateData=function(e,t,i){var n=this.childAt(0),o=e.hostModel,a=e.getItemModel(t),r=e.getItemLayout(t),s=D({},r);(s.label=null,i)?(n.setShape(s),"scale"===o.getShallow("animationType")?(n.shape.r=r.r0,fs(n,{shape:{r:r.r}},o,t)):(n.shape.endAngle=r.startAngle,hs(n,{shape:{endAngle:r.endAngle}},o,t))):hs(n,{shape:s},o,t);var l=e.getItemVisual(t,"color");n.useStyle(E({lineJoin:"bevel",fill:l},a.getModel("itemStyle").getItemStyle())),n.hoverStyle=a.getModel("emphasis.itemStyle").getItemStyle();var d=a.getShallow("cursor");function c(){n.stopAnimation(!0),n.animateTo({shape:{r:r.r+o.get("hoverOffset")}},300,"elasticOut")}function u(){n.stopAnimation(!0),n.animateTo({shape:{r:r.r}},300,"elasticOut")}d&&n.attr("cursor",d),Km(this,e.getItemLayout(t),o.isSelected(null,t),o.get("selectedOffset"),o.get("animation")),n.off("mouseover").off("mouseout").off("emphasis").off("normal"),a.get("hoverAnimation")&&o.isAnimationEnabled()&&n.on("mouseover",c).on("mouseout",u).on("emphasis",c).on("normal",u),this._updateLabel(e,t),ns(this)},Qm._updateLabel=function(e,t){var i=this.childAt(1),n=this.childAt(2),o=e.hostModel,a=e.getItemModel(t),r=e.getItemLayout(t).label,s=e.getItemVisual(t,"color");hs(i,{shape:{points:r.linePoints||[[r.x,r.y],[r.x,r.y],[r.x,r.y]]}},o,t),hs(n,{style:{x:r.x,y:r.y}},o,t),n.attr({rotation:r.rotation,origin:[r.x,r.y],z2:10});var l=a.getModel("label"),d=a.getModel("emphasis.label"),c=a.getModel("labelLine"),u=a.getModel("emphasis.labelLine");s=e.getItemVisual(t,"color");os(n.style,n.hoverStyle={},l,d,{labelFetcher:e.hostModel,labelDataIndex:t,defaultText:e.getName(t),autoColor:s,useInsideStyle:!!r.inside},{textAlign:r.textAlign,textVerticalAlign:r.verticalAlign,opacity:e.getItemVisual(t,"opacity")}),n.ignore=n.normalIgnore=!l.get("show"),n.hoverIgnore=!d.get("show"),i.ignore=i.normalIgnore=!c.get("show"),i.hoverIgnore=!u.get("show"),i.setStyle({stroke:s,opacity:e.getItemVisual(t,"opacity")}),i.setStyle(c.getModel("lineStyle").getLineStyle()),i.hoverStyle=u.getModel("lineStyle").getLineStyle();var h=c.get("smooth");h&&!0===h&&(h=.4),i.setShape({smooth:h})},_(Jm,ni);lc.extend({type:"pie",init:function(){var e=new ni;this._sectorGroup=e},render:function(e,t,i,n){if(!n||n.from!==this.uid){var o=e.getData(),a=this._data,r=this.group,s=t.get("animation"),l=!a,d=e.get("animationType"),c=L(Xm,this.uid,e,s,i),u=e.get("selectedMode");if(o.diff(a).add(function(e){var t=new Jm(o,e);l&&"scale"!==d&&t.eachChild(function(e){e.stopAnimation(!0)}),u&&t.on("click",c),o.setItemGraphicEl(e,t),r.add(t)}).update(function(e,t){var i=a.getItemGraphicEl(t);i.updateData(o,e),i.off("click"),u&&i.on("click",c),r.add(i),o.setItemGraphicEl(e,i)}).remove(function(e){var t=a.getItemGraphicEl(e);r.remove(t)}).execute(),s&&l&&0<o.count()&&"scale"!==d){var h=o.getItemLayout(0),f=Math.max(i.getWidth(),i.getHeight())/2,p=A(r.removeClipPath,r);r.setClipPath(this._createClipPath(h.cx,h.cy,f,h.startAngle,h.clockwise,p,e))}this._data=o}},dispose:function(){},_createClipPath:function(e,t,i,n,o,a,r){var s=new pr({shape:{cx:e,cy:t,r0:0,r:i,startAngle:n,endAngle:n,clockwise:o}});return fs(s,{shape:{endAngle:n+(o?1:-1)*Math.PI*2}},r,a),s},containPoint:function(e,t){var i=t.getData().getItemLayout(0);if(i){var n=e[0]-i.cx,o=e[1]-i.cy,a=Math.sqrt(n*n+o*o);return a<=i.r&&a>=i.r0}}});var eg=function(i,e){O(e,function(a){a.update="updateView",Wu(a,function(e,t){var o={};return t.eachComponent({mainType:"series",subType:i,query:e},function(i){i[a.method]&&i[a.method](e.name,e.dataIndex);var n=i.getData();n.each(function(e){var t=n.getName(e);o[t]=i.isSelected(t)||!1})}),{name:e.name,selected:o}})})},tg=function(n){return{getTargetSeries:function(e){var t={},i=ee();return e.eachSeriesByType(n,function(e){e.__paletteScope=t,i.set(e.uid,e)}),i},reset:function(o,e){var a=o.getRawData(),r={},s=o.getData();s.each(function(e){var t=s.getRawIndex(e);r[t]=e}),a.each(function(e){var t=r[e],i=null!=t&&s.getItemVisual(t,"color",!0);if(i)a.setItemVisual(e,"color",i);else{var n=a.getItemModel(e).get("itemStyle.color")||o.getColorFromPalette(a.getName(e)||e+"",o.__paletteScope,a.count());a.setItemVisual(e,"color",n),null!=t&&s.setItemVisual(t,"color",n)}})}}};function ig(a,e,t,i,n,o,r){function s(e,t,i,n){for(var o=e;o<t;o++)if(a[o].y+=i,e<o&&o+1<t&&a[o+1].y>a[o].y+a[o].height)return void l(o,i/2);l(t-1,i/2)}function l(e,t){for(var i=e;0<=i&&(a[i].y-=t,!(0<i&&a[i].y>a[i-1].y+a[i-1].height));i--);}function d(e,t,i,n,o,a){for(var r=t?Number.MAX_VALUE:0,s=0,l=e.length;s<l;s++)if("center"!==e[s].position){var d=Math.abs(e[s].y-n),c=e[s].len,u=e[s].len2,h=d<o+c?Math.sqrt((o+c+u)*(o+c+u)-d*d):Math.abs(e[s].x-i);t&&r<=h&&(h=r-10),!t&&h<=r&&(h=r+10),e[s].x=i+h*a,r=h}}a.sort(function(e,t){return e.y-t.y});for(var c,u=0,h=a.length,f=[],p=[],m=0;m<h;m++)(c=a[m].y-u)<0&&s(m,h,-c),u=a[m].y+a[m].height;r-u<0&&l(h-1,u-r);for(m=0;m<h;m++)a[m].y>=t?p.push(a[m]):f.push(a[m]);d(f,!1,e,t,i,n),d(p,!0,e,t,i,n)}var ng=function(S,T,e,t){var k,I,N=S.getData(),E=[],M=!1;N.each(function(e){var t,i,n,o,a=N.getItemLayout(e),r=N.getItemModel(e),s=r.getModel("label"),l=s.get("position")||r.get("emphasis.label.position"),d=r.getModel("labelLine"),c=d.get("length"),u=d.get("length2"),h=(a.startAngle+a.endAngle)/2,f=Math.cos(h),p=Math.sin(h);k=a.cx,I=a.cy;var m="inside"===l||"inner"===l;if("center"===l)t=a.cx,i=a.cy,o="center";else{var g=(m?(a.r+a.r0)/2*f:a.r*f)+k,v=(m?(a.r+a.r0)/2*p:a.r*p)+I;if(t=g+3*f,i=v+3*p,!m){var y=g+f*(c+T-a.r),b=v+p*(c+T-a.r),x=y+(f<0?-1:1)*u;t=x+(f<0?-5:5),n=[[g,v],[y,b],[x,i=b]]}o=m?"center":0<f?"left":"right"}var w=s.getFont(),_=s.get("rotate")?f<0?-h+Math.PI:-h:0,C=Fi(S.getFormattedLabel(e,"normal")||N.getName(e),w,o,"top");M=!!_,a.label={x:t,y:i,position:l,height:C.height,len:c,len2:u,linePoints:n,textAlign:o,verticalAlign:"middle",rotation:_,inside:m},m||E.push(a.label)}),!M&&S.get("avoidLabelOverlap")&&function(e,t,i,n,o,a){for(var r=[],s=[],l=0;l<e.length;l++)e[l].x<t?r.push(e[l]):s.push(e[l]);for(ig(s,t,i,n,1,0,a),ig(r,t,i,n,-1,0,a),l=0;l<e.length;l++){var d=e[l].linePoints;if(d){var c=d[1][0]-d[2][0];e[l].x<t?d[2][0]=e[l].x+3:d[2][0]=e[l].x-3,d[1][1]=d[2][1]=e[l].y,d[1][0]=d[2][0]+c}}}(E,k,I,T,0,t)},og=2*Math.PI,ag=Math.PI/180,rg=function(e){return{seriesType:e,reset:function(e,t){var n=t.findComponents({mainType:"legend"});if(n&&n.length){var o=e.getData();o.filterSelf(function(e){for(var t=o.getName(e),i=0;i<n.length;i++)if(!n[i].isSelected(t))return!1;return!0})}}}};eg("pie",[{type:"pieToggleSelect",event:"pieselectchanged",method:"toggleSelected"},{type:"pieSelect",event:"pieselected",method:"select"},{type:"pieUnSelect",event:"pieunselected",method:"unSelect"}]),Yu(tg("pie")),Gu(L(function(e,t,k,i){t.eachSeriesByType(e,function(e){var o=e.getData(),t=o.mapDimension("value"),i=e.get("center"),n=e.get("radius");R(n)||(n=[0,n]),R(i)||(i=[i,i]);var a=k.getWidth(),r=k.getHeight(),s=Math.min(a,r),l=Ps(i[0],a),d=Ps(i[1],r),c=Ps(n[0],s/2),u=Ps(n[1],s/2),h=-e.get("startAngle")*ag,f=e.get("minAngle")*ag,p=0;o.each(t,function(e){!isNaN(e)&&p++});var m=o.getSum(t),g=Math.PI/(m||p)*2,v=e.get("clockwise"),y=e.get("roseType"),b=e.get("stillShowZeroSum"),x=o.getDataExtent(t);x[0]=0;var w=og,_=0,C=h,S=v?1:-1;if(o.each(t,function(e,t){var i;if(isNaN(e))o.setItemLayout(t,{angle:NaN,startAngle:NaN,endAngle:NaN,clockwise:v,cx:l,cy:d,r0:c,r:y?NaN:u});else{(i="area"!==y?0===m&&b?g:e*g:og/p)<f?w-=i=f:_+=e;var n=C+S*i;o.setItemLayout(t,{angle:i,startAngle:C,endAngle:n,clockwise:v,cx:l,cy:d,r0:c,r:y?Ls(e,x,[c,u]):u}),C=n}}),w<og&&p)if(w<=.001){var T=og/p;o.each(t,function(e,t){if(!isNaN(e)){var i=o.getItemLayout(t);i.angle=T,i.startAngle=h+S*t*T,i.endAngle=h+S*(t+1)*T}})}else g=w/_,C=h,o.each(t,function(e,t){if(!isNaN(e)){var i=o.getItemLayout(t),n=i.angle===f?f:e*g;i.startAngle=C,i.endAngle=C+S*n,C+=S*n}});ng(e,u,0,r)})},"pie")),ju(rg("pie")),Zd.extend({type:"series.scatter",dependencies:["grid","polar","geo","singleAxis","calendar"],getInitialData:function(e,t){return Lh(this.getSource(),this)},brushSelector:"point",getProgressive:function(){var e=this.option.progressive;return null==e?this.option.large?5e3:this.get("progressive"):e},getProgressiveThreshold:function(){var e=this.option.progressiveThreshold;return null==e?this.option.large?1e4:this.get("progressiveThreshold"):e},defaultOption:{coordinateSystem:"cartesian2d",zlevel:0,z:2,legendHoverLink:!0,hoverAnimation:!0,symbolSize:10,large:!1,largeThreshold:2e3,itemStyle:{opacity:.8}}});var sg=Ur({shape:{points:null},symbolProxy:null,buildPath:function(e,t){var i=t.points,n=t.size,o=this.symbolProxy,a=o.shape;if(!((e.getContext?e.getContext():e)&&n[0]<4))for(var r=0;r<i.length;){var s=i[r++],l=i[r++];isNaN(s)||isNaN(l)||(a.x=s-n[0]/2,a.y=l-n[1]/2,a.width=n[0],a.height=n[1],o.buildPath(e,a,!0))}},afterBrush:function(e){var t=this.shape,i=t.points,n=t.size;if(n[0]<4){this.setTransform(e);for(var o=0;o<i.length;){var a=i[o++],r=i[o++];isNaN(a)||isNaN(r)||e.fillRect(a-n[0]/2,r-n[1]/2,n[0],n[1])}this.restoreTransform(e)}},findDataIndex:function(e,t){for(var i=this.shape,n=i.points,o=i.size,a=Math.max(o[0],4),r=Math.max(o[1],4),s=n.length/2-1;0<=s;s--){var l=2*s,d=n[l]-a/2,c=n[l+1]-r/2;if(d<=e&&c<=t&&e<=d+a&&t<=c+r)return s}return-1}});function lg(){this.group=new ni}var dg=lg.prototype;function cg(e,t,i){np.call(this,e,t,i),this.type="value",this.angle=0,this.name="",this.model}function ug(e,t,i){this._model=e,this.dimensions=[],this._indicatorAxes=M(e.getIndicatorModels(),function(e,t){var i="indicator_"+t,n=new cg(i,new Gh);return n.name=e.get("name"),(n.model=e).axis=n,this.dimensions.push(i),n},this),this.resize(e,i),this.cx,this.cy,this.r,this.startAngle}dg.isPersistent=function(){return!this._incremental},dg.updateData=function(e){this.group.removeAll();var t=new sg({rectHover:!0,cursor:"default"});t.setShape({points:e.getLayout("symbolPoints")}),this._setCommon(t,e),this.group.add(t),this._incremental=null},dg.updateLayout=function(e){if(!this._incremental){var n=e.getLayout("symbolPoints");this.group.eachChild(function(e){if(null!=e.startIndex){var t=2*(e.endIndex-e.startIndex),i=4*e.startIndex*2;n=new Float32Array(n.buffer,i,t)}e.setShape("points",n)})}},dg.incrementalPrepareUpdate=function(e){this.group.removeAll(),this._clearIncremental(),2e6<e.count()?(this._incremental||(this._incremental=new Mr({silent:!0})),this.group.add(this._incremental)):this._incremental=null},dg.incrementalUpdate=function(e,t){var i;this._incremental?(i=new sg,this._incremental.addDisplayable(i,!0)):((i=new sg({rectHover:!0,cursor:"default",startIndex:e.start,endIndex:e.end})).incremental=!0,this.group.add(i)),i.setShape({points:t.getLayout("symbolPoints")}),this._setCommon(i,t,!!this._incremental)},dg._setCommon=function(i,e,t){var n=e.hostModel,o=e.getVisual("symbolSize");i.setShape("size",o instanceof Array?o:[o,o]),i.symbolProxy=Of(e.getVisual("symbol"),0,0,0,0),i.setColor=i.symbolProxy.setColor;var a=i.shape.size[0]<4;i.useStyle(n.getModel("itemStyle").getItemStyle(a?["color","shadowBlur","shadowColor"]:["color"]));var r=e.getVisual("color");r&&i.setColor(r),t||(i.seriesIndex=n.seriesIndex,i.on("mousemove",function(e){i.dataIndex=null;var t=i.findDataIndex(e.offsetX,e.offsetY);0<=t&&(i.dataIndex=t+(i.startIndex||0))}))},dg.remove=function(){this._clearIncremental(),this._incremental=null,this.group.removeAll()},dg._clearIncremental=function(){var e=this._incremental;e&&e.clearDisplaybles()},Qu({type:"scatter",render:function(e,t,i){var n=e.getData();this._updateSymbolDraw(n,e).updateData(n),this._finished=!0},incrementalPrepareRender:function(e,t,i){var n=e.getData();this._updateSymbolDraw(n,e).incrementalPrepareUpdate(n),this._finished=!1},incrementalRender:function(e,t,i){this._symbolDraw.incrementalUpdate(e,t.getData()),this._finished=e.end===t.getData().count()},updateTransform:function(e,t,i){var n=e.getData();if(this.group.dirty(),!this._finished||1e4<n.count()||!this._symbolDraw.isPersistent())return{update:!0};var o=jp().reset(e);o.progress&&o.progress({start:0,end:n.count()},n),this._symbolDraw.updateLayout(n)},_updateSymbolDraw:function(e,t){var i=this._symbolDraw,n=t.pipelineContext.large;return i&&n===this._isLargeDraw||(i&&i.remove(),i=this._symbolDraw=n?new lg:new vp,this._isLargeDraw=n,this.group.removeAll()),this.group.add(i.group),i},remove:function(e,t){this._symbolDraw&&this._symbolDraw.remove(!0),this._symbolDraw=null},dispose:function(){}}),Yu(Vp("scatter","circle")),Gu(jp("scatter")),_(cg,np),ug.prototype.getIndicatorAxes=function(){return this._indicatorAxes},ug.prototype.dataToPoint=function(e,t){var i=this._indicatorAxes[t];return this.coordToPoint(i.dataToCoord(e),t)},ug.prototype.coordToPoint=function(e,t){var i=this._indicatorAxes[t].angle;return[this.cx+e*Math.cos(i),this.cy-e*Math.sin(i)]},ug.prototype.pointToData=function(e){var t=e[0]-this.cx,i=e[1]-this.cy,n=Math.sqrt(t*t+i*i);t/=n,i/=n;for(var o,a=Math.atan2(-i,t),r=1/0,s=-1,l=0;l<this._indicatorAxes.length;l++){var d=this._indicatorAxes[l],c=Math.abs(a-d.angle);c<r&&(o=d,s=l,r=c)}return[s,+(o&&o.coodToData(n))]},ug.prototype.resize=function(e,t){var i=e.get("center"),n=t.getWidth(),o=t.getHeight(),a=Math.min(n,o)/2;this.cx=Ps(i[0],n),this.cy=Ps(i[1],o),this.startAngle=e.get("startAngle")*Math.PI/180,this.r=Ps(e.get("radius"),a),O(this._indicatorAxes,function(e,t){e.setExtent(0,this.r);var i=this.startAngle+t*Math.PI*2/this._indicatorAxes.length;i=Math.atan2(Math.sin(i),Math.cos(i)),e.angle=i},this)},ug.prototype.update=function(n,e){var o=this._indicatorAxes,a=this._model;O(o,function(e){e.scale.setExtent(1/0,-1/0)}),n.eachSeriesByType("radar",function(e,t){if("radar"===e.get("coordinateSystem")&&n.getComponent("radar",e.get("radarIndex"))===a){var i=e.getData();O(o,function(e){e.scale.unionExtentFromData(i,i.mapDimension(e.dim))})}},this);var f=a.get("splitNumber");function p(e){var t=Math.pow(10,Math.floor(Math.log(e)/Math.LN10)),i=e/t;return 2===i?i=5:i*=2,i*t}O(o,function(e,t){var i=Cf(e.scale,e.model);Sf(e.scale,e.model);var n=e.model,o=e.scale,a=n.getMin(),r=n.getMax(),s=o.getInterval();if(null!=a&&null!=r)o.setExtent(+a,+r),o.setInterval((r-a)/f);else if(null!=a)for(var l;l=a+s*f,o.setExtent(+a,l),o.setInterval(s),s=p(s),l<i[1]&&isFinite(l)&&isFinite(i[1]););else if(null!=r)for(var d;d=r-s*f,o.setExtent(d,+r),o.setInterval(s),s=p(s),d>i[0]&&isFinite(d)&&isFinite(i[0]););else{var c=o.getTicks().length-1;f<c&&(s=p(s));var u=Math.round((i[0]+i[1])/2/s)*s,h=Math.round(f/2);o.setExtent(Rs(u-h*s),Rs(u+(f-h)*s)),o.setInterval(s)}})},ug.dimensions=[],ug.create=function(i,n){var o=[];return i.eachComponent("radar",function(e){var t=new ug(e,i,n);o.push(t),e.coordinateSystem=t}),i.eachSeriesByType("radar",function(e){"radar"===e.get("coordinateSystem")&&(e.coordinateSystem=o[e.get("radarIndex")||0])}),o},od.register("radar",ug);var hg=Kp.valueAxis;function fg(e,t){return E({show:t},e)}Xu({type:"radar",optionUpdated:function(){var o=this.get("boundaryGap"),a=this.get("splitNumber"),r=this.get("scale"),s=this.get("axisLine"),l=this.get("axisTick"),d=this.get("axisLabel"),c=this.get("name"),u=this.get("name.show"),h=this.get("name.formatter"),f=this.get("nameGap"),p=this.get("triggerEvent"),e=M(this.get("indicator")||[],function(e){null!=e.max&&0<e.max&&!e.min?e.min=0:null!=e.min&&e.min<0&&!e.max&&(e.max=0);var t=c;if(null!=e.color&&(t=E({color:e.color},c)),e=m(N(e),{boundaryGap:o,splitNumber:a,scale:r,axisLine:s,axisTick:l,axisLabel:d,name:e.text,nameLocation:"end",nameGap:f,nameTextStyle:t,triggerEvent:p},!1),u||(e.name=""),"string"==typeof h){var i=e.name;e.name=h.replace("{value}",null!=i?i:"")}else"function"==typeof h&&(e.name=h(e.name,e));var n=D(new Is(e,null,this.ecModel),Nf);return n.mainType="radar",n.componentIndex=this.componentIndex,n},this);this.getIndicatorModels=function(){return e}},defaultOption:{zlevel:0,z:0,center:["50%","50%"],radius:"75%",startAngle:90,name:{show:!0},boundaryGap:[0,0],splitNumber:5,nameGap:15,scale:!1,shape:"polygon",axisLine:m({lineStyle:{color:"#bbb"}},hg.axisLine),axisLabel:fg(hg.axisLabel,!1),axisTick:fg(hg.axisTick,!1),splitLine:fg(hg.splitLine,!0),splitArea:fg(hg.splitArea,!0),indicator:[]}});var pg=["axisLine","axisTickLabel","axisName"];Ku({type:"radar",render:function(e,t,i){this.group.removeAll(),this._buildAxes(e),this._buildSplitLineAndArea(e)},_buildAxes:function(e){var t=e.coordinateSystem;O(M(t.getIndicatorAxes(),function(e){return new fm(e.model,{position:[t.cx,t.cy],rotation:e.angle,labelDirection:-1,tickDirection:-1,nameDirection:1})}),function(e){O(pg,e.add,e),this.group.add(e.getGroup())},this)},_buildSplitLineAndArea:function(e){var n=e.coordinateSystem,t=n.getIndicatorAxes();if(t.length){var i=e.get("shape"),o=e.getModel("splitLine"),a=e.getModel("splitArea"),r=o.getModel("lineStyle"),s=a.getModel("areaStyle"),l=o.get("show"),d=a.get("show"),c=r.get("color"),u=s.get("color");c=R(c)?c:[c],u=R(u)?u:[u];var h=[],f=[];if("circle"===i)for(var p=t[0].getTicksCoords(),m=n.cx,g=n.cy,v=0;v<p.length;v++){if(l)h[T(h,c,v)].push(new ur({shape:{cx:m,cy:g,r:p[v].coord}}));if(d&&v<p.length-1)f[T(f,u,v)].push(new mr({shape:{cx:m,cy:g,r0:p[v].coord,r:p[v+1].coord}}))}else{var y,b=M(t,function(e,t){var i=e.getTicksCoords();return y=null==y?i.length-1:Math.min(i.length-1,y),M(i,function(e){return n.coordToPoint(e.coord,t)})}),x=[];for(v=0;v<=y;v++){for(var w=[],_=0;_<t.length;_++)w.push(b[_][v]);if(w[0]?w.push(w[0].slice()):I&&console.error("Can't draw value axis "+v),l)h[T(h,c,v)].push(new br({shape:{points:w}}));if(d&&x)f[T(f,u,v-1)].push(new yr({shape:{points:w.concat(x)}}));x=w.slice().reverse()}}var C=r.getLineStyle(),S=s.getAreaStyle();O(f,function(e,t){this.group.add(Fr(e,{style:E({stroke:"none",fill:u[t%u.length]},S),silent:!0}))},this),O(h,function(e,t){this.group.add(Fr(e,{style:E({fill:"none",stroke:c[t%c.length]},C),silent:!0}))},this)}function T(e,t,i){var n=i%t.length;return e[n]=e[n]||[],n}}});var mg=Zd.extend({type:"series.radar",dependencies:["radar"],init:function(e){mg.superApply(this,"init",arguments),this.legendDataProvider=function(){return this.getRawData()}},getInitialData:function(e,t){return Ym(this,{generateCoord:"indicator_",generateCoordCount:1/0})},formatTooltip:function(n){var o=this.getData(),e=this.coordinateSystem.getIndicatorAxes(),t=this.getData().getName(n);return nl(""===t?this.name:t)+"<br/>"+M(e,function(e,t){var i=o.get(o.mapDimension(e.dim),n);return nl(e.name+" : "+i)}).join("<br />")},defaultOption:{zlevel:0,z:2,coordinateSystem:"radar",legendHoverLink:!0,radarIndex:0,lineStyle:{width:2,type:"solid"},label:{position:"top"},symbol:"emptyCircle",symbolSize:4}});Qu({type:"radar",render:function(l,e,t){var i=l.coordinateSystem,v=this.group,y=l.getData(),s=this._data;function d(e,t){var i=e.getItemVisual(t,"symbol")||"circle",n=e.getItemVisual(t,"color");if("none"!==i){var o,a=(R(o=e.getItemVisual(t,"symbolSize"))||(o=[+o,+o]),o),r=Of(i,-1,-1,2,2,n);return r.attr({style:{strokeNoScale:!0},z2:100,scale:[a[0]/2,a[1]/2]}),r}}function c(e,t,i,n,o,a){i.removeAll();for(var r=0;r<t.length-1;r++){var s=d(n,o);s&&(e[s.__dimIdx=r]?(s.attr("position",e[r]),xs[a?"initProps":"updateProps"](s,{position:t[r]},l,o)):s.attr("position",t[r]),i.add(s))}}function u(e){return M(e,function(e){return[i.cx,i.cy]})}y.diff(s).add(function(e){var t=y.getItemLayout(e);if(t){var i=new yr,n=new br,o={shape:{points:t}};i.shape.points=u(t),n.shape.points=u(t),fs(i,o,l,e),fs(n,o,l,e);var a=new ni,r=new ni;a.add(n),a.add(i),a.add(r),c(n.shape.points,t,r,y,e,!0),y.setItemGraphicEl(e,a)}}).update(function(e,t){var i=s.getItemGraphicEl(t),n=i.childAt(0),o=i.childAt(1),a=i.childAt(2),r={shape:{points:y.getItemLayout(e)}};r.shape.points&&(c(n.shape.points,r.shape.points,a,y,e,!1),hs(n,r,l),hs(o,r,l),y.setItemGraphicEl(e,i))}).remove(function(e){v.remove(s.getItemGraphicEl(e))}).execute(),y.eachItemGraphicEl(function(e,t){var i=y.getItemModel(t),n=e.childAt(0),o=e.childAt(1),a=e.childAt(2),r=y.getItemVisual(t,"color");v.add(e),n.useStyle(E(i.getModel("lineStyle").getLineStyle(),{fill:"none",stroke:r})),n.hoverStyle=i.getModel("emphasis.lineStyle").getLineStyle();var s=i.getModel("areaStyle"),l=i.getModel("emphasis.areaStyle"),d=s.isEmpty()&&s.parentModel.isEmpty(),c=l.isEmpty()&&l.parentModel.isEmpty();c=c&&d,o.ignore=d,o.useStyle(E(s.getAreaStyle(),{fill:r,opacity:.7})),o.hoverStyle=l.getAreaStyle();var u=i.getModel("itemStyle").getItemStyle(["color"]),h=i.getModel("emphasis.itemStyle").getItemStyle(),f=i.getModel("label"),p=i.getModel("emphasis.label");function m(){o.attr("ignore",c)}function g(){o.attr("ignore",d)}a.eachChild(function(e){e.setStyle(u),e.hoverStyle=N(h),os(e.style,e.hoverStyle,f,p,{labelFetcher:y.hostModel,labelDataIndex:t,labelDimIndex:e.__dimIdx,defaultText:y.get(y.dimensions[e.__dimIdx],t),autoColor:r,isRectText:!0})}),e.off("mouseover").off("mouseout").off("normal").off("emphasis"),e.on("emphasis",m).on("mouseover",m).on("normal",g).on("mouseout",g),ns(e)}),this._data=y},remove:function(){this.group.removeAll(),this._data=null},dispose:function(){}});Yu(tg("radar")),Yu(Vp("radar","circle")),Gu(function(e){e.eachSeriesByType("radar",function(e){var t=e.getData(),i=[],n=e.coordinateSystem;if(n){for(var o=n.getIndicatorAxes(),a=0;a<o.length;a++)t.each(t.mapDimension(o[a].dim),r);t.each(function(e){i[e][0]&&i[e].push(i[e][0].slice()),t.setItemLayout(e,i[e])})}function r(e,t){i[t]=i[t]||[],i[t][a]=n.dataToPoint(e,a)}})}),ju(rg("radar")),Vu(function(i){var e=i.polar;if(e){R(e)||(e=[e]);var n=[];O(e,function(e,t){e.indicator?(e.type&&!e.shape&&(e.shape=e.type),i.radar=i.radar||[],R(i.radar)||(i.radar=[i.radar]),i.radar.push(e)):n.push(e)}),i.polar=n}O(i.series,function(e){e&&"radar"===e.type&&e.polarIndex&&(e.radarIndex=e.polarIndex)})});var gg=Ce;function vg(){Ze.call(this)}function yg(e){this.name=e,this.zoomLimit,Ze.call(this),this._roamTransformable=new vg,this._rawTransformable=new vg,this._center,this._zoom}function bg(e,t,i,n){var o=i.seriesModel,a=o?o.coordinateSystem:null;return a===this?a[e](n):null}C(vg,Ze),yg.prototype={constructor:yg,type:"view",dimensions:["x","y"],setBoundingRect:function(e,t,i,n){return this._rect=new ii(e,t,i,n),this._rect},getBoundingRect:function(){return this._rect},setViewRect:function(e,t,i,n){this.transformTo(e,t,i,n),this._viewRect=new ii(e,t,i,n)},transformTo:function(e,t,i,n){var o=this.getBoundingRect(),a=this._rawTransformable;a.transform=o.calculateTransform(new ii(e,t,i,n)),a.decomposeTransform(),this._updateTransform()},setCenter:function(e){e&&(this._center=e,this._updateCenterAndZoom())},setZoom:function(e){e=e||1;var t=this.zoomLimit;t&&(null!=t.max&&(e=Math.min(t.max,e)),null!=t.min&&(e=Math.max(t.min,e))),this._zoom=e,this._updateCenterAndZoom()},getDefaultCenter:function(){var e=this.getBoundingRect();return[e.x+e.width/2,e.y+e.height/2]},getCenter:function(){return this._center||this.getDefaultCenter()},getZoom:function(){return this._zoom||1},getRoamTransform:function(){return this._roamTransformable.getLocalTransform()},_updateCenterAndZoom:function(){var e=this._rawTransformable.getLocalTransform(),t=this._roamTransformable,i=this.getDefaultCenter(),n=this.getCenter(),o=this.getZoom();n=Ce([],n,e),i=Ce([],i,e),t.origin=n,t.position=[i[0]-n[0],i[1]-n[1]],t.scale=[o,o],this._updateTransform()},_updateTransform:function(){var e=this._roamTransformable,t=this._rawTransformable;(t.parent=e).updateTransform(),t.updateTransform(),ze(this.transform||(this.transform=[]),t.transform||Oe()),this._rawTransform=t.getLocalTransform(),this.invTransform=this.invTransform||[],We(this.invTransform,this.transform),this.decomposeTransform()},getViewRect:function(){return this._viewRect},getViewRectAfterRoam:function(){var e=this.getBoundingRect().clone();return e.applyTransform(this.transform),e},dataToPoint:function(e,t,i){var n=t?this._rawTransform:this.transform;return i=i||[],n?gg(i,e,n):re(i,e)},pointToData:function(e){var t=this.invTransform;return t?gg([],e,t):[e[0],e[1]]},convertToPixel:L(bg,"dataToPoint"),convertFromPixel:L(bg,"pointToData"),containPoint:function(e){return this.getViewRectAfterRoam().contain(e[0],e[1])}},C(yg,Ze);for(var xg=[126,25],wg=[[[0,3.5],[7,11.2],[15,11.9],[30,7],[42,.7],[52,.7],[56,7.7],[59,.7],[64,.7],[64,0],[5,0],[0,3.5]],[[13,16.1],[19,14.7],[16,21.7],[11,23.1],[13,16.1]],[[12,32.2],[14,38.5],[15,38.5],[13,32.2],[12,32.2]],[[16,47.6],[12,53.2],[13,53.2],[18,47.6],[16,47.6]],[[6,64.4],[8,70],[9,70],[8,64.4],[6,64.4]],[[23,82.6],[29,79.8],[30,79.8],[25,82.6],[23,82.6]],[[37,70.7],[43,62.3],[44,62.3],[39,70.7],[37,70.7]],[[48,51.1],[51,45.5],[53,45.5],[50,51.1],[48,51.1]],[[51,35],[51,28.7],[53,28.7],[53,35],[51,35]],[[52,22.4],[55,17.5],[56,17.5],[53,22.4],[52,22.4]],[[58,12.6],[62,7],[63,7],[60,12.6],[58,12.6]],[[0,3.5],[0,93.1],[64,93.1],[64,0],[63,0],[63,92.4],[1,92.4],[1,3.5],[0,3.5]]],_g=0;_g<wg.length;_g++)for(var Cg=0;Cg<wg[_g].length;Cg++)wg[_g][Cg][0]/=10.5,wg[_g][Cg][1]/=-14,wg[_g][Cg][0]+=xg[0],wg[_g][Cg][1]+=xg[1];var Sg={"南海诸岛":[32,80],"广东":[0,-10],"香港":[10,5],"澳门":[-10,10],"天津":[5,5]},Tg={Russia:[100,60],"United States":[-99,38],"United States of America":[-99,38]},kg=[[[123.45165252685547,25.73527164402261],[123.49731445312499,25.73527164402261],[123.49731445312499,25.750734064600884],[123.45165252685547,25.750734064600884],[123.45165252685547,25.73527164402261]]],Ig=[function(e){"china"===e.map&&e.regions.push(new jf("南海诸岛",M(wg,function(e){return{type:"polygon",exterior:e}}),xg))},function(e){O(e.regions,function(e){var t=Sg[e.name];if(t){var i=e.center;i[0]+=t[0]/10.5,i[1]+=-t[1]/14}})},function(e){O(e.regions,function(e){var t=Tg[e.name];if(t){var i=e.center;i[0]=t[0],i[1]=t[1]}})},function(e){if("china"===e.map)for(var t=0,i=e.regions.length;t<i;++t)"台湾"===e.regions[t].name&&e.regions[t].geometries.push({type:"polygon",exterior:kg[0]})}];function Ng(e,t,i,n,o){yg.call(this,e),this.map=t,this._nameCoordMap=ee(),this.loadGeoJson(i,n,o)}function Eg(e,t,i,n){var o=i.geoModel,a=i.seriesModel,r=o?o.coordinateSystem:a?a.coordinateSystem||(a.getReferringComponents("geo")[0]||{}).coordinateSystem:null;return r===this?r[e](n):null}function Mg(e,t){var i=e.get("boundingCoords");if(null!=i){var n=i[0],o=i[1];isNaN(n[0])||isNaN(n[1])||isNaN(o[0])||isNaN(o[1])?I&&console.error("Invalid boundingCoords"):this.setBoundingRect(n[0],n[1],o[0]-n[0],o[1]-n[1])}var a,r=this.getBoundingRect(),s=e.get("layoutCenter"),l=e.get("layoutSize"),d=t.getWidth(),c=t.getHeight(),u=e.get("aspectScale")||.75,h=r.width/r.height*u,f=!1;if(s&&l&&(s=[Ps(s[0],d),Ps(s[1],c)],l=Ps(l,Math.min(d,c)),isNaN(s[0])||isNaN(s[1])||isNaN(l)?I&&console.warn("Given layoutCenter or layoutSize data are invalid. Use left/top/width/height instead."):f=!0),f){var p={};1<h?(p.width=l,p.height=l/h):(p.height=l,p.width=l*h),p.y=s[1]-p.height/2,p.x=s[0]-p.width/2}else(a=e.getBoxLayoutParams()).aspect=h,p=xl(a,{width:d,height:c});this.setViewRect(p.x,p.y,p.width,p.height),this.setCenter(e.get("center")),this.setZoom(e.get("zoom"))}function Dg(i,e){O(e.get("geoCoord"),function(e,t){i.addGeoCoord(t,e)})}if(Ng.prototype={constructor:Ng,type:"geo",dimensions:["lng","lat"],containCoord:function(e){for(var t=this.regions,i=0;i<t.length;i++)if(t[i].contain(e))return!0;return!1},loadGeoJson:function(e,t,i){try{this.regions=e?$f(e):[]}catch(e){throw"Invalid geoJson format\n"+e.message}t=t||{},i=i||{};for(var n=this.regions,o=ee(),a=0;a<n.length;a++){var r=n[a].name;r=i.hasOwnProperty(r)?i[r]:r,n[a].name=r,o.set(r,n[a]),this.addGeoCoord(r,n[a].center);var s=t[r];s&&n[a].transformTo(s.left,s.top,s.width,s.height)}this._regionsMap=o,this._rect=null,O(Ig,function(e){e(this)},this)},transformTo:function(e,t,i,n){var o=this.getBoundingRect();(o=o.clone()).y=-o.y-o.height;var a=this._rawTransformable;a.transform=o.calculateTransform(new ii(e,t,i,n)),a.decomposeTransform();var r=a.scale;r[1]=-r[1],a.updateTransform(),this._updateTransform()},getRegion:function(e){return this._regionsMap.get(e)},getRegionByCoord:function(e){for(var t=this.regions,i=0;i<t.length;i++)if(t[i].contain(e))return t[i]},addGeoCoord:function(e,t){this._nameCoordMap.set(e,t)},getGeoCoord:function(e){return this._nameCoordMap.get(e)},getBoundingRect:function(){if(this._rect)return this._rect;for(var e,t=this.regions,i=0;i<t.length;i++){var n=t[i].getBoundingRect();(e=e||n.clone()).union(n)}return this._rect=e||new ii(0,0,0,0)},dataToPoint:function(e,t,i){if("string"==typeof e&&(e=this.getGeoCoord(e)),e)return yg.prototype.dataToPoint.call(this,e,t,i)},convertToPixel:L(Eg,"dataToPoint"),convertFromPixel:L(Eg,"pointToData")},C(Ng,yg),I)var Ag=function(e){console.error("Map "+e+" not exists. You can download map file on http://echarts.baidu.com/download-map.html")};var Lg={dimensions:Ng.prototype.dimensions,create:function(e,a){var r=[];e.eachComponent("geo",function(e,t){var i=e.get("map"),n=eh(i);I&&(n||Ag(i));var o=new Ng(i+t,i,n&&n.geoJson,n&&n.specialAreas,e.get("nameMap"));o.zoomLimit=e.get("scaleLimit"),r.push(o),Dg(o,e),(e.coordinateSystem=o).model=e,o.resize=Mg,o.resize(e,a)}),e.eachSeries(function(e){if("geo"===e.get("coordinateSystem")){var t=e.get("geoIndex")||0;e.coordinateSystem=r[t]}});var i={};return e.eachSeriesByType("map",function(e){if(!e.getHostGeoModel()){var t=e.getMapType();i[t]=i[t]||[],i[t].push(e)}}),O(i,function(e,t){var i=eh(t);I&&(i||Ag(e[0].get("map")));var n=M(e,function(e){return e.get("nameMap")}),o=new Ng(t,t,i&&i.geoJson,i&&i.specialAreas,g(n));o.zoomLimit=j.apply(null,M(e,function(e){return e.get("scaleLimit")})),r.push(o),o.resize=Mg,o.resize(e[0],a),O(e,function(e){Dg(e.coordinateSystem=o,e)})}),r},getFilledRegions:function(e,t,i){var n=(e||[]).slice();i=i||{};var o=eh(t),a=o&&o.geoJson;if(!a)return I&&Ag(t),e;for(var r=ee(),s=a.features,l=0;l<n.length;l++)r.set(n[l].name,n[l]);for(l=0;l<s.length;l++){var d=s[l].properties.name;r.get(d)||(i.hasOwnProperty(d)&&(d=i[d]),n.push({name:d}))}return n}};$u("geo",Lg);var Pg=Zd.extend({type:"series.map",dependencies:["geo"],layoutMode:"box",needsDrawMap:!1,seriesGroup:[],init:function(e){Pg.superApply(this,"init",arguments),this.updateSelectedMap(this._createSelectableList())},getInitialData:function(e){return Ym(this,["value"])},mergeOption:function(e){Pg.superApply(this,"mergeOption",arguments),this.updateSelectedMap(this._createSelectableList())},_createSelectableList:function(){for(var e=this.getRawData(),t=e.mapDimension("value"),i=[],n=0,o=e.count();n<o;n++)i.push({name:e.getName(n),value:e.get(t,n),selected:Fd(e,n,"selected")});return i=Lg.getFilledRegions(i,this.getMapType(),this.option.nameMap)},getHostGeoModel:function(){var e=this.option.geoIndex;return null!=e?this.dependentModels.geo[e]:null},getMapType:function(){return(this.getHostGeoModel()||this).option.map},_fillOption:function(e,t){},getRawValue:function(e){var t=this.getData();return t.get(t.mapDimension("value"),e)},getRegionModel:function(e){var t=this.getData();return t.getItemModel(t.indexOfName(e))},formatTooltip:function(e){for(var t=this.getData(),i=Js(this.getRawValue(e)),n=t.getName(e),o=this.seriesGroup,a=[],r=0;r<o.length;r++){var s=o[r].originalData.indexOfName(n),l=t.mapDimension("value");isNaN(o[r].originalData.get(l,s))||a.push(nl(o[r].name))}return a.join(", ")+"<br />"+nl(n+" : "+i)},getTooltipPosition:function(e){if(null!=e){var t=this.getData().getName(e),i=this.coordinateSystem,n=i.getRegion(t);return n&&i.dataToPoint(n.center)}},setZoom:function(e){this.option.zoom=e},setCenter:function(e){this.option.center=e},defaultOption:{zlevel:0,z:2,coordinateSystem:"geo",map:"",left:"center",top:"center",aspectScale:.75,showLegendSymbol:!0,dataRangeHoverLink:!0,boundingCoords:null,center:null,zoom:1,scaleLimit:null,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444",areaColor:"#eee"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{areaColor:"rgba(255,215,0,0.8)"}}}});C(Pg,qm);var Rg="\0_ec_interaction_mutex";function Ug(e,t){return!!Og(e)[t]}function Og(e){return e[Rg]||(e[Rg]={})}function Bg(i){this.pointerChecker,this._zr=i,this._opt={};var e=A,n=e(zg,this),o=e(Fg,this),a=e(Hg,this),r=e(Vg,this),s=e(jg,this);Me.call(this),this.setPointerChecker=function(e){this.pointerChecker=e},this.enable=function(e,t){this.disable(),this._opt=E(N(t)||{},{zoomOnMouseWheel:!0,moveOnMouseMove:!0,preventDefaultMouseMove:!0}),null==e&&(e=!0),!0!==e&&"move"!==e&&"pan"!==e||(i.on("mousedown",n),i.on("mousemove",o),i.on("mouseup",a)),!0!==e&&"scale"!==e&&"zoom"!==e||(i.on("mousewheel",r),i.on("pinch",s))},this.disable=function(){i.off("mousedown",n),i.off("mousemove",o),i.off("mouseup",a),i.off("mousewheel",r),i.off("pinch",s)},this.dispose=this.disable,this.isDragging=function(){return this._dragging},this.isPinching=function(){return this._pinching}}function zg(e){if(!(Pn(e)||e.target&&e.target.draggable)){var t=e.offsetX,i=e.offsetY;this.pointerChecker&&this.pointerChecker(e,t,i)&&(this._x=t,this._y=i,this._dragging=!0)}}function Fg(e){if(!Pn(e)&&$g(this,"moveOnMouseMove",e)&&this._dragging&&"pinch"!==e.gestureEvent&&!Ug(this._zr,"globalPan")){var t=e.offsetX,i=e.offsetY,n=this._x,o=this._y,a=t-n,r=i-o;this._x=t,this._y=i,this._opt.preventDefaultMouseMove&&Ln(e.event),this.trigger("pan",a,r,n,o,t,i)}}function Hg(e){Pn(e)||(this._dragging=!1)}function Vg(e){if($g(this,"zoomOnMouseWheel",e)&&0!==e.wheelDelta){var t=0<e.wheelDelta?1.1:1/1.1;Wg.call(this,e,t,e.offsetX,e.offsetY)}}function jg(e){if(!Ug(this._zr,"globalPan")){var t=1<e.pinchScale?1.1:1/1.1;Wg.call(this,e,t,e.pinchX,e.pinchY)}}function Wg(e,t,i,n){this.pointerChecker&&this.pointerChecker(e,i,n)&&(Ln(e.event),this.trigger("zoom",t,i,n))}function $g(e,t,i){var n=e._opt[t];return n&&(!U(n)||i.event[n+"Key"])}function Gg(e,t,i){var n=e.target,o=n.position;o[0]+=t,o[1]+=i,n.dirty()}function Yg(e,t,i,n){var o=e.target,a=e.zoomLimit,r=o.position,s=o.scale,l=e.zoom=e.zoom||1;if(l*=t,a){var d=a.min||0,c=a.max||1/0;l=Math.max(Math.min(c,l),d)}var u=l/e.zoom;e.zoom=l,r[0]-=(i-r[0])*(u-1),r[1]-=(n-r[1])*(u-1),s[0]*=u,s[1]*=u,o.dirty()}Wu({type:"takeGlobalCursor",event:"globalCursorTaken",update:"update"},function(){}),C(Bg,Me);var qg={axisPointer:1,tooltip:1,brush:1};function Zg(e,t,i){var n=t.getComponentByElement(e.topTarget),o=n&&n.coordinateSystem;return n&&n!==i&&!qg[n.mainType]&&o&&o.model!==i}function Xg(e,t){var i=e.getItemStyle(),n=e.get("areaColor");return null!=n&&(i.fill=n),i}function Kg(i,e){e.eachChild(function(t){O(t.__regions,function(e){t.trigger(i.isSelected(e.name)?"emphasis":"normal")})})}function Jg(e,t){var i=new ni;this._controller=new Bg(e.getZr()),this._controllerHost={target:t?i:null},this.group=i,this._updateGroup=t,this._mouseDownFlag}function Qg(e,t,i){var n=e.getZoom(),o=e.getCenter(),a=t.zoom,r=e.dataToPoint(o);if(null!=t.dx&&null!=t.dy){r[0]-=t.dx,r[1]-=t.dy;o=e.pointToData(r);e.setCenter(o)}if(null!=a){if(i){var s=i.min||0,l=i.max||1/0;a=Math.max(Math.min(n*a,l),s)/n}e.scale[0]*=a,e.scale[1]*=a;var d=e.position,c=(t.originX-d[0])*(a-1),u=(t.originY-d[1])*(a-1);d[0]-=c,d[1]-=u,e.updateTransform();o=e.pointToData(r);e.setCenter(o),e.setZoom(a*n)}return{center:e.getCenter(),zoom:e.getZoom()}}Jg.prototype={constructor:Jg,draw:function(b,e,t,i,n){var x="geo"===b.mainType,w=b.getData&&b.getData();x&&e.eachComponent({mainType:"series",subType:"map"},function(e){w||e.getHostGeoModel()!==b||(w=e.getData())});var o=b.coordinateSystem,_=this.group,C=o.scale,a={position:o.position,scale:C};!_.childAt(0)||n?_.attr(a):hs(_,a,b),_.removeAll();var r,s,l,d,c,S=["itemStyle"],T=["emphasis","itemStyle"],k=["label"],I=["emphasis","label"],N=ee();O(o.regions,function(e){var t=N.get(e.name)||N.set(e.name,new ni),i=new kr({shape:{paths:[]}});t.add(i);var n,o=(y=b.getRegionModel(e.name)||b).getModel(S),a=y.getModel(T),r=Xg(o),s=Xg(a),l=y.getModel(k),d=y.getModel(I);if(w){n=w.indexOfName(e.name);var c=w.getItemVisual(n,"color",!0);c&&(r.fill=c)}O(e.geometries,function(e){if("polygon"===e.type){i.shape.paths.push(new yr({shape:{points:e.exterior}}));for(var t=0;t<(e.interiors?e.interiors.length:0);t++)i.shape.paths.push(new yr({shape:{points:e.interiors[t]}}))}}),i.setStyle(r),i.style.strokeNoScale=!0,i.culling=!0;var u=l.get("show"),h=d.get("show"),f=w&&isNaN(w.get(w.mapDimension("value"),n)),p=w&&w.getItemLayout(n);if(x||f&&(u||h)||p&&p.showLabel){var m,g=x?e.name:n;(!w||0<=n)&&(m=b);var v=new cr({position:e.center.slice(),scale:[1/C[0],1/C[1]],z2:10,silent:!0});os(v.style,v.hoverStyle={},l,d,{labelFetcher:m,labelDataIndex:g,defaultText:e.name,useInsideStyle:!1},{textAlign:"center",textVerticalAlign:"middle"}),t.add(v)}if(w)w.setItemGraphicEl(n,t);else{var y=b.getRegionModel(e.name);i.eventData={componentType:"geo",geoIndex:b.componentIndex,name:e.name,region:y&&y.option||{}}}(t.__regions||(t.__regions=[])).push(e),ns(t,s,{hoverSilentOnTouch:!!b.get("selectedMode")}),_.add(t)}),this._updateController(b,e,t),r=this,s=b,d=t,c=i,(l=_).off("click"),l.off("mousedown"),s.get("selectedMode")&&(l.on("mousedown",function(){r._mouseDownFlag=!0}),l.on("click",function(e){if(r._mouseDownFlag){r._mouseDownFlag=!1;for(var t=e.target;!t.__regions;)t=t.parent;if(t){var i={type:("geo"===s.mainType?"geo":"map")+"ToggleSelect",batch:M(t.__regions,function(e){return{name:e.name,from:c.uid}})};i[s.mainType+"Id"]=s.id,d.dispatchAction(i),Kg(s,l)}}})),Kg(b,_)},remove:function(){this.group.removeAll(),this._controller.dispose(),this._controllerHost={}},_updateController:function(n,e,a){var o=n.coordinateSystem,t=this._controller,r=this._controllerHost;r.zoomLimit=n.get("scaleLimit"),r.zoom=o.getZoom(),t.enable(n.get("roam")||!1);var i=n.mainType;function s(){var e={type:"geoRoam",componentType:i};return e[i+"Id"]=n.id,e}t.off("pan").on("pan",function(e,t){this._mouseDownFlag=!1,Gg(r,e,t),a.dispatchAction(D(s(),{dx:e,dy:t}))},this),t.off("zoom").on("zoom",function(e,t,i){if(this._mouseDownFlag=!1,Yg(r,e,t,i),a.dispatchAction(D(s(),{zoom:e,originX:t,originY:i})),this._updateGroup){var n=this.group,o=n.scale;n.traverse(function(e){"text"===e.type&&e.attr("scale",[1/o[0],1/o[1]])})}},this),t.setPointerChecker(function(e,t,i){return o.getViewRectAfterRoam().contain(t,i)&&!Zg(e,a,n)})}},Qu({type:"map",render:function(e,t,i,n){if(!n||"mapToggleSelect"!==n.type||n.from!==this.uid){var o=this.group;if(o.removeAll(),!e.getHostGeoModel()){if(n&&"geoRoam"===n.type&&"series"===n.componentType&&n.seriesId===e.id)(a=this._mapDraw)&&o.add(a.group);else if(e.needsDrawMap){var a=this._mapDraw||new Jg(i,!0);o.add(a.group),a.draw(e,t,i,this,n),this._mapDraw=a}else this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null;e.get("showLegendSymbol")&&t.getComponent("legend")&&this._renderSymbols(e,t,i)}}},remove:function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null,this.group.removeAll()},dispose:function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null},_renderSymbols:function(v,e,t){var y=v.originalData,b=this.group;y.each(y.mapDimension("value"),function(e,t){if(!isNaN(e)){var i=y.getItemLayout(t);if(i&&i.point){var n=i.point,o=i.offset,a=new ur({style:{fill:v.getData().getVisual("color")},shape:{cx:n[0]+9*o,cy:n[1],r:3},silent:!0,z2:o?8:10});if(!o){var r=v.mainSeries.getData(),s=y.getName(t),l=r.indexOfName(s),d=y.getItemModel(t),c=d.getModel("label"),u=d.getModel("emphasis.label"),h=r.getItemGraphicEl(l),f=W(v.getFormattedLabel(t,"normal"),s),p=W(v.getFormattedLabel(t,"emphasis"),f),m=function(){var e=as({},u,{text:u.get("show")?p:null},{isRectText:!0,useInsideStyle:!1},!0);a.style.extendFrom(e),a.__mapOriginalZ2=a.z2,a.z2+=1},g=function(){as(a.style,c,{text:c.get("show")?f:null,textPosition:c.getShallow("position")||"bottom"},{isRectText:!0,useInsideStyle:!1}),null!=a.__mapOriginalZ2&&(a.z2=a.__mapOriginalZ2,a.__mapOriginalZ2=null)};h.on("mouseover",m).on("mouseout",g).on("emphasis",m).on("normal",g),g()}b.add(a)}}})}}),Wu({type:"geoRoam",event:"geoRoam",update:"updateTransform"},function(n,e){var o=n.componentType||"series";e.eachComponent({mainType:o,query:n},function(e){var t=e.coordinateSystem;if("geo"===t.type){var i=Qg(t,n,e.get("scaleLimit"));e.setCenter&&e.setCenter(i.center),e.setZoom&&e.setZoom(i.zoom),"series"===o&&O(e.seriesGroup,function(e){e.setCenter(i.center),e.setZoom(i.zoom)})}})});Gu(function(i){var o={};i.eachSeriesByType("map",function(e){var t=e.getMapType();if(!e.getHostGeoModel()&&!o[t]){var l={};O(e.seriesGroup,function(e){var r=e.coordinateSystem,s=e.originalData;e.get("showLegendSymbol")&&i.getComponent("legend")&&s.each(s.mapDimension("value"),function(e,t){var i=s.getName(t),n=r.getRegion(i);if(n&&!isNaN(e)){var o=l[i]||0,a=r.dataToPoint(n.center);l[i]=o+1,s.setItemLayout(t,{point:a,offset:o})}})});var n=e.getData();n.each(function(e){var t=n.getName(e),i=n.getItemLayout(e)||{};i.showLabel=!l[t],n.setItemLayout(e,i)}),o[t]=!0}})}),Yu(function(e){e.eachSeriesByType("map",function(e){var t=e.get("color"),i=e.getModel("itemStyle"),n=i.get("areaColor"),o=i.get("color")||t[e.seriesIndex%t.length];e.getData().setVisual({areaColor:n,color:o})})}),ju(tu.PROCESSOR.STATISTIC,function(e){var n={};e.eachSeriesByType("map",function(e){var t=e.getHostGeoModel(),i=t?"o"+t.id:"i"+e.getMapType();(n[i]=n[i]||[]).push(e)}),O(n,function(e,t){for(var d,c,u,i=(d=M(e,function(e){return e.getData()}),c=e[0].get("mapValueCalculation"),u={},O(d,function(n){n.each(n.mapDimension("value"),function(e,t){var i="ec-"+n.getName(t);u[i]=u[i]||[],isNaN(e)||u[i].push(e)})}),d[0].map(d[0].mapDimension("value"),function(e,t){for(var i,n="ec-"+d[0].getName(t),o=0,a=1/0,r=-1/0,s=u[n].length,l=0;l<s;l++)a=Math.min(a,u[n][l]),r=Math.max(r,u[n][l]),o+=u[n][l];return i="min"===c?a:"max"===c?r:"average"===c?o/s:o,0===s?NaN:i})),n=0;n<e.length;n++)e[n].originalData=e[n].getData();for(n=0;n<e.length;n++)(e[n].seriesGroup=e)[n].needsDrawMap=0===n&&!e[n].getHostGeoModel(),e[n].setData(i.cloneShallow()),e[n].mainSeries=e[0]})}),Vu(function(e){var t=[];O(e.series,function(e){e&&"map"===e.type&&(t.push(e),e.map=e.map||e.mapType,E(e,e.mapLocation))})}),eg("map",[{type:"mapToggleSelect",event:"mapselectchanged",method:"toggleSelected"},{type:"mapSelect",event:"mapselected",method:"select"},{type:"mapUnSelect",event:"mapunselected",method:"unSelect"}]);var ev=O,tv="\0__link_datas",iv="\0__link_mainData";function nv(i){var n=i.mainData,e=i.datas;e||(e={main:n},i.datasAttr={main:"data"}),i.datas=i.mainData=null,lv(n,e,i),ev(e,function(t){ev(n.TRANSFERABLE_METHODS,function(e){t.wrapMethod(e,L(ov,i))})}),n.wrapMethod("cloneShallow",L(rv,i)),ev(n.CHANGABLE_METHODS,function(e){n.wrapMethod(e,L(av,i))}),q(e[n.dataType]===n)}function ov(e,t){if((n=this)[iv]===n){var i=D({},this[tv]);lv(i[this.dataType]=t,i,e)}else dv(t,this.dataType,this[iv],e);var n;return t}function av(e,t){return e.struct&&e.struct.update(this),t}function rv(i,n){return ev(n[tv],function(e,t){e!==n&&dv(e.cloneShallow(),t,n,i)}),n}function sv(e){var t=this[iv];return null==e||null==t?t:t[tv][e]}function lv(i,e,n){i[tv]={},ev(e,function(e,t){dv(e,t,i,n)})}function dv(e,t,i,n){(i[tv][t]=e)[iv]=i,e.dataType=t,n.struct&&(e[n.structAttr]=n.struct,n.struct[n.datasAttr[t]]=e),e.getLinkedData=sv}var cv=function(e,t){this.name=e||"",this.depth=0,this.height=0,this.parentNode=null,this.dataIndex=-1,this.children=[],this.viewChildren=[],this.hostTree=t};function uv(t,e,i){this.root,this.data,this._nodes=[],this.hostModel=t,this.levelModels=M(e||[],function(e){return new Is(e,t,t.ecModel)}),this.leavesModel=new Is(i||{},t,t.ecModel)}function hv(e,t){var i=t.children;e.parentNode!==t&&(i.push(e),e.parentNode=t)}function fv(e,t){var i=e.isExpand?e.children:[],n=e.parentNode.children,o=e.hierNode.i?n[e.hierNode.i-1]:null;if(i.length){!function(e){var t=e.children,i=t.length,n=0,o=0;for(;0<=--i;){var a=t[i];a.hierNode.prelim+=n,a.hierNode.modifier+=n,o+=a.hierNode.change,n+=a.hierNode.shift+o}}(e);var a=(i[0].hierNode.prelim+i[i.length-1].hierNode.prelim)/2;o?(e.hierNode.prelim=o.hierNode.prelim+t(e,o),e.hierNode.modifier=e.hierNode.prelim-a):e.hierNode.prelim=a}else o&&(e.hierNode.prelim=o.hierNode.prelim+t(e,o));e.parentNode.hierNode.defaultAncestor=function(e,t,i,n){if(t){for(var o=e,a=e,r=a.parentNode.children[0],s=t,l=o.hierNode.modifier,d=a.hierNode.modifier,c=r.hierNode.modifier,u=s.hierNode.modifier;s=vv(s),a=yv(a),s&&a;){o=vv(o),r=yv(r),o.hierNode.ancestor=e;var h=s.hierNode.prelim+u-a.hierNode.prelim-d+n(s,a);0<h&&(bv((p=e,m=i,(f=s).hierNode.ancestor.parentNode===p.parentNode?f.hierNode.ancestor:m),e,h),d+=h,l+=h),u+=s.hierNode.modifier,d+=a.hierNode.modifier,l+=o.hierNode.modifier,c+=r.hierNode.modifier}s&&!vv(o)&&(o.hierNode.thread=s,o.hierNode.modifier+=u-l),a&&!yv(r)&&(r.hierNode.thread=a,r.hierNode.modifier+=d-c,i=e)}var f,p,m;return i}(e,o,e.parentNode.hierNode.defaultAncestor||n[0],t)}function pv(e){var t=e.hierNode.prelim+e.parentNode.hierNode.modifier;e.setLayout({x:t},!0),e.hierNode.modifier+=e.parentNode.hierNode.modifier}function mv(e){return arguments.length?e:xv}function gv(e,t){var i={};return e-=Math.PI/2,i.x=t*Math.cos(e),i.y=t*Math.sin(e),i}function vv(e){var t=e.children;return t.length&&e.isExpand?t[t.length-1]:e.hierNode.thread}function yv(e){var t=e.children;return t.length&&e.isExpand?t[0]:e.hierNode.thread}function bv(e,t,i){var n=i/(t.hierNode.i-e.hierNode.i);t.hierNode.change-=n,t.hierNode.shift+=i,t.hierNode.modifier+=i,t.hierNode.prelim+=i,e.hierNode.change+=n}function xv(e,t){return e.parentNode===t.parentNode?1:2}function wv(e,t){var i=e.getItemLayout(t);return i&&!isNaN(i.x)&&!isNaN(i.y)&&"none"!==e.getItemVisual(t,"symbol")}function _v(e,t,i){return i.itemModel=t,i.itemStyle=t.getModel("itemStyle").getItemStyle(),i.hoverItemStyle=t.getModel("emphasis.itemStyle").getItemStyle(),i.lineStyle=t.getModel("lineStyle").getLineStyle(),i.labelModel=t.getModel("label"),i.hoverLabelModel=t.getModel("emphasis.label"),!1===e.isExpand&&0!==e.children.length?i.symbolInnerColor=i.itemStyle.fill:i.symbolInnerColor="#fff",i}function Cv(e,t,i,n,o,a){var r=!i,s=e.tree.getNodeByDataIndex(t),l=(a=_v(s,s.getModel(),a),e.tree.root),d=s.parentNode===l?s:s.parentNode||s,c=e.getItemGraphicEl(d.dataIndex),u=d.getLayout(),h=c?{x:c.position[0],y:c.position[1],rawX:c.__radialOldRawX,rawY:c.__radialOldRawY}:u,f=s.getLayout();r?(i=new lp(e,t,a)).attr("position",[h.x,h.y]):i.updateData(e,t,a),i.__radialOldRawX=i.__radialRawX,i.__radialOldRawY=i.__radialRawY,i.__radialRawX=f.rawX,i.__radialRawY=f.rawY,n.add(i),e.setItemGraphicEl(t,i),hs(i,{position:[f.x,f.y]},o);var p=i.getSymbolPath();if("radial"===a.layout){var m,g,v=l.children[0],y=v.getLayout(),b=v.children.length;if(f.x===y.x&&!0===s.isExpand){var x={};x.x=(v.children[0].getLayout().x+v.children[b-1].getLayout().x)/2,x.y=(v.children[0].getLayout().y+v.children[b-1].getLayout().y)/2,(m=Math.atan2(x.y-y.y,x.x-y.x))<0&&(m=2*Math.PI+m),(g=x.x<y.x)&&(m-=Math.PI)}else(m=Math.atan2(f.y-y.y,f.x-y.x))<0&&(m=2*Math.PI+m),0===s.children.length||0!==s.children.length&&!1===s.isExpand?(g=f.x<y.x)&&(m-=Math.PI):(g=f.x>y.x)||(m-=Math.PI);var w=g?"left":"right";p.setStyle({textPosition:w,textRotation:-m,textOrigin:"center",verticalAlign:"middle"})}if(s.parentNode&&s.parentNode!==l){var _=i.__edge;_||(_=i.__edge=new Sr({shape:Tv(a,h,h),style:E({opacity:0},a.lineStyle)})),hs(_,{shape:Tv(a,u,f),style:{opacity:1}},o),n.add(_)}}function Sv(e,t,i,n,o,a){for(var r,s=e.tree.getNodeByDataIndex(t),l=e.tree.root,d=(a=_v(s,s.getModel(),a),s.parentNode===l?s:s.parentNode||s);null==(r=d.getLayout());)d=d.parentNode===l?d:d.parentNode||d;hs(i,{position:[r.x+1,r.y+1]},o,function(){n.remove(i),e.setItemGraphicEl(t,null)}),i.fadeOut(null,{keepLabel:!0});var c=i.__edge;c&&hs(c,{shape:Tv(a,r,r),style:{opacity:0}},o,function(){n.remove(c)})}function Tv(e,t,i){var n,o,a,r,s=e.orient;if("radial"===e.layout){var l=t.rawX,d=t.rawY,c=i.rawX,u=i.rawY,h=gv(l,d),f=gv(l,d+(u-d)*e.curvature),p=gv(c,u+(d-u)*e.curvature),m=gv(c,u);return{x1:h.x,y1:h.y,x2:m.x,y2:m.y,cpx1:f.x,cpy1:f.y,cpx2:p.x,cpy2:p.y}}l=t.x,d=t.y,c=i.x,u=i.y;return"LR"!==s&&"RL"!==s||(n=l+(c-l)*e.curvature,o=d,a=c+(l-c)*e.curvature,r=u),"TB"!==s&&"BT"!==s||(n=l,o=d+(u-d)*e.curvature,a=c,r=u+(d-u)*e.curvature),{x1:l,y1:d,x2:c,y2:u,cpx1:n,cpy1:o,cpx2:a,cpy2:r}}function kv(e,t){for(var i,n=[e];i=n.pop();)if(t(i),i.isExpand){var o=i.children;if(o.length)for(var a=o.length-1;0<=a;a--)n.push(o[a])}}cv.prototype={constructor:cv,isRemoved:function(){return this.dataIndex<0},eachNode:function(e,t,i){"function"==typeof e&&(i=t,t=e,e=null),U(e=e||{})&&(e={order:e});var n,o=e.order||"preorder",a=this[e.attr||"children"];"preorder"===o&&(n=t.call(i,this));for(var r=0;!n&&r<a.length;r++)a[r].eachNode(e,t,i);"postorder"===o&&t.call(i,this)},updateDepthAndHeight:function(e){var t=0;this.depth=e;for(var i=0;i<this.children.length;i++){var n=this.children[i];n.updateDepthAndHeight(e+1),n.height>t&&(t=n.height)}this.height=t+1},getNodeById:function(e){if(this.getId()===e)return this;for(var t=0,i=this.children,n=i.length;t<n;t++){var o=i[t].getNodeById(e);if(o)return o}},contains:function(e){if(e===this)return!0;for(var t=0,i=this.children,n=i.length;t<n;t++){var o=i[t].contains(e);if(o)return o}},getAncestors:function(e){for(var t=[],i=e?this:this.parentNode;i;)t.push(i),i=i.parentNode;return t.reverse(),t},getValue:function(e){var t=this.hostTree.data;return t.get(t.getDimension(e||"value"),this.dataIndex)},setLayout:function(e,t){0<=this.dataIndex&&this.hostTree.data.setItemLayout(this.dataIndex,e,t)},getLayout:function(){return this.hostTree.data.getItemLayout(this.dataIndex)},getModel:function(e){if(!(this.dataIndex<0)){var t,i=this.hostTree,n=i.data.getItemModel(this.dataIndex),o=this.getLevelModel();return o||0!==this.children.length&&(0===this.children.length||!1!==this.isExpand)||(t=this.getLeavesModel()),n.getModel(e,(o||t||i.hostModel).getModel(e))}},getLevelModel:function(){return(this.hostTree.levelModels||[])[this.depth]},getLeavesModel:function(){return this.hostTree.leavesModel},setVisual:function(e,t){0<=this.dataIndex&&this.hostTree.data.setItemVisual(this.dataIndex,e,t)},getVisual:function(e,t){return this.hostTree.data.getItemVisual(this.dataIndex,e,t)},getRawIndex:function(){return this.hostTree.data.getRawIndex(this.dataIndex)},getId:function(){return this.hostTree.data.getId(this.dataIndex)},isAncestorOf:function(e){for(var t=e.parentNode;t;){if(t===this)return!0;t=t.parentNode}return!1},isDescendantOf:function(e){return e!==this&&e.isAncestorOf(this)}},uv.prototype={constructor:uv,type:"tree",eachNode:function(e,t,i){this.root.eachNode(e,t,i)},getNodeByDataIndex:function(e){var t=this.data.getRawIndex(e);return this._nodes[t]},getNodeByName:function(e){return this.root.getNodeByName(e)},update:function(){for(var e=this.data,t=this._nodes,i=0,n=t.length;i<n;i++)t[i].dataIndex=-1;for(i=0,n=e.count();i<n;i++)t[e.getRawIndex(i)].dataIndex=i},clearLayouts:function(){this.data.clearItemLayouts()}},uv.createTree=function(e,t,i){var s=new uv(t,i.levels,i.leaves),l=[],d=1;!function e(t,i){var n=t.value;d=Math.max(d,R(n)?n.length:1);l.push(t);var o=new cv(t.name,s);i?hv(o,i):s.root=o;s._nodes.push(o);var a=t.children;if(a)for(var r=0;r<a.length;r++)e(a[r],o)}(e),s.root.updateDepthAndHeight(0);var n=Eh(l,{coordDimensions:["value"],dimensionsCount:d}),o=new mh(n,t);return o.initData(l),nv({mainData:o,struct:s,structAttr:"tree"}),s.update(),s},Zd.extend({type:"series.tree",layoutInfo:null,layoutMode:"box",getInitialData:function(e){var t={name:e.name,children:e.data},i=e.leaves||{},n={};n.leaves=i;var o=uv.createTree(t,this,n),a=0;o.eachNode("preorder",function(e){e.depth>a&&(a=e.depth)});var r=e.expandAndCollapse&&0<=e.initialTreeDepth?e.initialTreeDepth:a;return o.root.eachNode("preorder",function(e){var t=e.hostTree.data.getRawDataItem(e.dataIndex);e.isExpand=t&&null!=t.collapsed?!t.collapsed:e.depth<=r}),o.data},getOrient:function(){var e=this.get("orient");return"horizontal"===e?e="LR":"vertical"===e&&(e="TB"),e},formatTooltip:function(e){for(var t=this.getData().tree,i=t.root.children[0],n=t.getNodeByDataIndex(e),o=n.getValue(),a=n.name;n&&n!==i;)a=n.parentNode.name+"."+a,n=n.parentNode;return nl(a+(isNaN(o)||null==o?"":" : "+o))},defaultOption:{zlevel:0,z:2,left:"12%",top:"12%",right:"12%",bottom:"12%",layout:"orthogonal",orient:"LR",symbol:"emptyCircle",symbolSize:7,expandAndCollapse:!0,initialTreeDepth:2,lineStyle:{color:"#ccc",width:1.5,curveness:.5},itemStyle:{color:"lightsteelblue",borderColor:"#c23531",borderWidth:1.5},label:{show:!0,color:"#555"},leaves:{label:{show:!0}},animationEasing:"linear",animationDuration:700,animationDurationUpdate:1e3}}),Qu({type:"tree",init:function(e,t){this._oldTree,this._mainGroup=new ni,this.group.add(this._mainGroup)},render:function(n,e,i,t){var o=n.getData(),a=n.layoutInfo,r=this._mainGroup,s=n.get("layout");"radial"===s?r.attr("position",[a.x+a.width/2,a.y+a.height/2]):r.attr("position",[a.x,a.y]);var l=this._data,d={expandAndCollapse:n.get("expandAndCollapse"),layout:s,orient:n.getOrient(),curvature:n.get("lineStyle.curveness"),symbolRotate:n.get("symbolRotate"),symbolOffset:n.get("symbolOffset"),hoverAnimation:n.get("hoverAnimation"),useNameLabel:!0,fadeIn:!0};o.diff(l).add(function(e){wv(o,e)&&Cv(o,e,null,r,n,d)}).update(function(e,t){var i=l.getItemGraphicEl(t);wv(o,e)?Cv(o,e,i,r,n,d):i&&Sv(l,t,i,r,n,d)}).remove(function(e){var t=l.getItemGraphicEl(e);t&&Sv(l,e,t,r,n,d)}).execute(),!0===d.expandAndCollapse&&o.eachItemGraphicEl(function(e,t){e.off("click").on("click",function(){i.dispatchAction({type:"treeExpandAndCollapse",seriesId:n.id,dataIndex:t})})}),this._data=o},dispose:function(){},remove:function(){this._mainGroup.removeAll(),this._data=null}}),Wu({type:"treeExpandAndCollapse",event:"treeExpandAndCollapse",update:"update"},function(n,e){e.eachComponent({mainType:"series",subType:"tree",query:n},function(e){var t=n.dataIndex,i=e.getData().tree.getNodeByDataIndex(t);i.isExpand=!i.isExpand})});function Iv(e,t,i){if(e&&0<=w(t,e.type)){var n=i.getData().tree.root,o=e.targetNode;if(o&&n.contains(o))return{node:o};var a=e.targetNodeId;if(null!=a&&(o=n.getNodeById(a)))return{node:o}}}function Nv(e){for(var t=[];e;)(e=e.parentNode)&&t.push(e);return t.reverse()}function Ev(e,t){return 0<=w(Nv(e),t)}function Mv(e,t){for(var i=[];e;){var n=e.dataIndex;i.push({name:e.name,dataIndex:n,value:t.getRawValue(n)}),e=e.parentNode}return i.reverse(),i}Yu(Vp("tree","circle")),Gu(function(e,t){e.eachSeriesByType("tree",function(e){!function(e,t){var i,n=(i=t,xl(e.getBoxLayoutParams(),{width:i.getWidth(),height:i.getHeight()}));e.layoutInfo=n;var o=e.get("layout"),a=0,r=0,s=null;s="radial"===o?(a=2*Math.PI,r=Math.min(n.height,n.width)/2,mv(function(e,t){return(e.parentNode===t.parentNode?1:2)/e.depth})):(a=n.width,r=n.height,mv());var l=e.getData().tree.root,d=l.children[0];if(d){!function(e){e.hierNode={defaultAncestor:null,ancestor:e,prelim:0,modifier:0,change:0,shift:0,i:0,thread:null};for(var t,i,n=[e];t=n.pop();)if(i=t.children,t.isExpand&&i.length)for(var o=i.length-1;0<=o;o--){var a=i[o];a.hierNode={defaultAncestor:null,ancestor:a,prelim:0,modifier:0,change:0,shift:0,i:o,thread:null},n.push(a)}}(l),function(e,t,i){for(var n,o=[e],a=[];n=o.pop();)if(a.push(n),n.isExpand){var r=n.children;if(r.length)for(var s=0;s<r.length;s++)o.push(r[s])}for(;n=a.pop();)t(n,i)}(d,fv,s),l.hierNode.modifier=-d.hierNode.prelim,kv(d,pv);var c=d,u=d,h=d;kv(d,function(e){var t=e.getLayout().x;t<c.getLayout().x&&(c=e),t>u.getLayout().x&&(u=e),e.depth>h.depth&&(h=e)});var f=c===u?1:s(c,u)/2,p=f-c.getLayout().x,m=0,g=0,v=0,y=0;if("radial"===o)m=a/(u.getLayout().x+f+p),g=r/(h.depth-1||1),kv(d,function(e){v=(e.getLayout().x+p)*m,y=(e.depth-1)*g;var t=gv(v,y);e.setLayout({x:t.x,y:t.y,rawX:v,rawY:y},!0)});else{var b=e.getOrient();"RL"===b||"LR"===b?(g=r/(u.getLayout().x+f+p),m=a/(h.depth-1||1),kv(d,function(e){y=(e.getLayout().x+p)*g,v="LR"===b?(e.depth-1)*m:a-(e.depth-1)*m,e.setLayout({x:v,y:y},!0)})):"TB"!==b&&"BT"!==b||(m=a/(u.getLayout().x+f+p),g=r/(h.depth-1||1),kv(d,function(e){v=(e.getLayout().x+p)*m,y="TB"===b?(e.depth-1)*g:r-(e.depth-1)*g,e.setLayout({x:v,y:y},!0)}))}}}(e,t)})}),Zd.extend({type:"series.treemap",layoutMode:"box",dependencies:["grid","polar"],_viewRoot:null,defaultOption:{progressive:0,hoverLayerThreshold:1/0,left:"center",top:"middle",right:null,bottom:null,width:"80%",height:"80%",sort:!0,clipWindow:"origin",squareRatio:.5*(1+Math.sqrt(5)),leafDepth:null,drillDownIcon:"▶",zoomToNodeRatio:.1024,roam:!0,nodeClick:"zoomToNode",animation:!0,animationDurationUpdate:900,animationEasing:"quinticInOut",breadcrumb:{show:!0,height:22,left:"center",top:"bottom",emptyItemWidth:25,itemStyle:{color:"rgba(0,0,0,0.7)",borderColor:"rgba(255,255,255,0.7)",borderWidth:1,shadowColor:"rgba(150,150,150,1)",shadowBlur:3,shadowOffsetX:0,shadowOffsetY:0,textStyle:{color:"#fff"}},emphasis:{textStyle:{}}},label:{show:!0,distance:0,padding:5,position:"inside",color:"#fff",ellipsis:!0},upperLabel:{show:!1,position:[0,"50%"],height:20,color:"#fff",ellipsis:!0,verticalAlign:"middle"},itemStyle:{color:null,colorAlpha:null,colorSaturation:null,borderWidth:0,gapWidth:0,borderColor:"#fff",borderColorSaturation:null},emphasis:{upperLabel:{show:!0,position:[0,"50%"],color:"#fff",ellipsis:!0,verticalAlign:"middle"}},visualDimension:0,visualMin:null,visualMax:null,color:[],colorAlpha:null,colorSaturation:null,colorMappingBy:"index",visibleMin:10,childrenVisibleMin:null,levels:[]},getInitialData:function(e,t){var i={name:e.name,children:e.data};!function i(e){var n=0;O(e.children,function(e){i(e);var t=e.value;R(t)&&(t=t[0]),n+=t});var t=e.value;R(t)&&(t=t[0]);(null==t||isNaN(t))&&(t=n);t<0&&(t=0);R(e.value)?e.value[0]=t:e.value=t}(i);var n=e.levels||[];n=e.levels=function(e,t){var n,i=t.get("color");if(!i)return;if(O(e=e||[],function(e){var t=new Is(e),i=t.get("color");(t.get("itemStyle.color")||i&&"none"!==i)&&(n=!0)}),!n){var o=e[0]||(e[0]={});o.color=i.slice()}return e}(n,t);var o={};return o.levels=n,uv.createTree(i,this,o).data},optionUpdated:function(){this.resetViewRoot()},formatTooltip:function(e){var t=this.getData(),i=this.getRawValue(e),n=R(i)?Js(i[0]):Js(i);return nl(t.getName(e)+": "+n)},getDataParams:function(e){var t=Zd.prototype.getDataParams.apply(this,arguments),i=this.getData().tree.getNodeByDataIndex(e);return t.treePathInfo=Mv(i,this),t},setLayoutInfo:function(e){this.layoutInfo=this.layoutInfo||{},D(this.layoutInfo,e)},mapIdToIndex:function(e){var t=this._idIndexMap;t||(t=this._idIndexMap=ee(),this._idIndexMapCount=0);var i=t.get(e);return null==i&&t.set(e,i=this._idIndexMapCount++),i},getViewRoot:function(){return this._viewRoot},resetViewRoot:function(e){e?this._viewRoot=e:e=this._viewRoot;var t=this.getRawData().tree.root;e&&(e===t||t.contains(e))||(this._viewRoot=t)}});var Dv=5;function Av(e){this.group=new ni,e.add(this.group)}function Lv(e,t,i,n,o,a){var r=[[o?e:e-Dv,t],[e+i,t],[e+i,t+n],[o?e:e-Dv,t+n]];return!a&&r.splice(2,0,[e+i+Dv,t+n/2]),!o&&r.push([e,t+n/2]),r}Av.prototype={constructor:Av,render:function(e,t,i,n){var o=e.getModel("breadcrumb"),a=this.group;if(a.removeAll(),o.get("show")&&i){var r=o.getModel("itemStyle"),s=r.getModel("textStyle"),l={pos:{left:o.get("left"),right:o.get("right"),top:o.get("top"),bottom:o.get("bottom")},box:{width:t.getWidth(),height:t.getHeight()},emptyItemWidth:o.get("emptyItemWidth"),totalWidth:0,renderList:[]};this._prepare(i,l,s),this._renderContent(e,l,r,s,n),wl(a,l.pos,l.box)}},_prepare:function(e,t,i){for(var n=e;n;n=n.parentNode){var o=n.getModel().get("name"),a=i.getTextRect(o),r=Math.max(a.width+16,t.emptyItemWidth);t.totalWidth+=r+8,t.renderList.push({node:n,text:o,width:r})}},_renderContent:function(e,t,i,n,o){for(var a,r,s,l,d,c,u,h,f,p,m,g=0,v=t.emptyItemWidth,y=e.get("breadcrumb.height"),b=(a=t.pos,r=t.box,l=r.width,d=r.height,c=Ps(a.x,l),u=Ps(a.y,d),h=Ps(a.x2,l),f=Ps(a.y2,d),(isNaN(c)||isNaN(parseFloat(a.x)))&&(c=0),(isNaN(h)||isNaN(parseFloat(a.x2)))&&(h=l),(isNaN(u)||isNaN(parseFloat(a.y)))&&(u=0),(isNaN(f)||isNaN(parseFloat(a.y2)))&&(f=d),s=el(s||0),{width:Math.max(h-c-s[1]-s[3],0),height:Math.max(f-u-s[0]-s[2],0)}),x=t.totalWidth,w=t.renderList,_=w.length-1;0<=_;_--){var C=w[_],S=C.node,T=C.width,k=C.text;b.width<x&&(x-=T-v,T=v,k=null);var I=new yr({shape:{points:Lv(g,0,T,y,_===w.length-1,0===_)},style:E(i.getItemStyle(),{lineJoin:"bevel",text:k,textFill:n.getTextColor(),textFont:n.getFont()}),z:10,onclick:L(o,S)});this.group.add(I),p=e,m=S,I.eventData={componentType:"series",componentSubType:"treemap",seriesIndex:p.componentIndex,seriesName:p.name,seriesType:"treemap",selfType:"breadcrumb",nodeData:{dataIndex:m&&m.dataIndex,name:m&&m.name},treePathInfo:m&&Mv(m,p)},g+=T+8}},remove:function(){this.group.removeAll()}};var Pv=A,Rv=ni,Uv=xr,Ov=O,Bv=["label"],zv=["emphasis","label"],Fv=["upperLabel"],Hv=["emphasis","upperLabel"],Vv=10,jv=Do([["fill","color"],["stroke","strokeColor"],["lineWidth","strokeWidth"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]),Wv=function(e){var t=jv(e);return t.stroke=t.fill=t.lineWidth=null,t};function $v(h,u,f,p,m,i,g,e,t,n){if(g){var v=g.getLayout();if(v&&v.isInView){var s=v.width,l=v.height,d=v.borderWidth,y=v.invisible,b=g.getRawIndex(),x=e&&e.getRawIndex(),o=g.viewChildren,c=v.upperHeight,a=o&&o.length,w=g.getModel("itemStyle"),_=g.getModel("emphasis.itemStyle"),r=I("nodeGroup",Rv);if(r){if(t.add(r),r.attr("position",[v.x||0,v.y||0]),r.__tmNodeWidth=s,r.__tmNodeHeight=l,v.isAboveViewRoot)return r;var C=I("background",Uv,n,1);if(C&&function(e,n,o){n.dataIndex=g.dataIndex,n.seriesIndex=h.seriesIndex,n.setShape({x:0,y:0,width:s,height:l});var a=g.getVisual("borderColor",!0),r=_.get("borderColor");T(n,function(){var e=Wv(w);e.fill=a;var t=jv(_);if(t.fill=r,o){var i=s-2*d;k(e,t,a,i,c,{x:d,y:0,width:i,height:c})}else e.text=t.text=null;n.setStyle(e),ns(n,t)}),e.add(n)}(r,C,a&&v.upperHeight),!a){var S=I("content",Uv,n,2);S&&function(e,i){i.dataIndex=g.dataIndex,i.seriesIndex=h.seriesIndex;var n=Math.max(s-2*d,0),o=Math.max(l-2*d,0);i.culling=!0,i.setShape({x:d,y:d,width:n,height:o});var a=g.getVisual("color",!0);T(i,function(){var e=Wv(w);e.fill=a;var t=jv(_);k(e,t,a,n,o),i.setStyle(e),ns(i,t)}),e.add(i)}(r,S)}return r}}}function T(e,t){y?!e.invisible&&i.push(e):(t(),e.__tmWillVisible||(e.invisible=!1))}function k(e,t,i,n,o,a){var r=g.getModel(),s=j(h.getFormattedLabel(g.dataIndex,"normal",null,null,a?"upperLabel":"label"),r.get("name"));if(!a&&v.isLeafRoot){var l=h.get("drillDownIcon",!0);s=l?l+" "+s:s}var d=r.getModel(a?Fv:Bv),c=r.getModel(a?Hv:zv),u=d.getShallow("show");os(e,t,d,c,{defaultText:u?s:null,autoColor:i,isRectText:!0}),a&&(e.textRect=N(a)),e.truncate=u&&d.get("ellipsis")?{outerWidth:n,outerHeight:o,minChar:2}:null}function I(e,t,i,n){var o,a,r,s,l,d=null!=x&&f[e][x],c=m[e];return d?(f[e][x]=null,s=d,l=e,(c[b]={}).old="nodeGroup"===l?s.position.slice():D({},s.shape)):y||((d=new t({z:(o=i,a=n,r=o*Vv+a,(r-1)/r)})).__tmDepth=i,function(e,t,i){var n=e[b]={},o=g.parentNode;if(o&&(!p||"drillDown"===p.direction)){var a=0,r=0,s=m.background[o.getRawIndex()];!p&&s&&s.old&&(a=s.old.width,r=s.old.height),n.old="nodeGroup"===i?[0,r]:{x:a,y:r,width:0,height:0}}n.fadein="nodeGroup"!==i}(c,0,d.__tmStorageName=e)),u[e][b]=d}}Qu({type:"treemap",init:function(e,t){this._containerGroup,this._storage={nodeGroup:[],background:[],content:[]},this._oldTree,this._breadcrumb,this._controller,this._state="ready"},render:function(e,t,i,n){if(!(w(t.findComponents({mainType:"series",subType:"treemap",query:n}),e)<0)){this.seriesModel=e,this.api=i,this.ecModel=t;var o=Iv(n,["treemapZoomToNode","treemapRootToNode"],e),a=n&&n.type,r=e.layoutInfo,s=!this._oldTree,l=this._storage,d="treemapRootToNode"===a&&o&&l?{rootNodeGroup:l.nodeGroup[o.node.getRawIndex()],direction:n.direction}:null,c=this._giveContainerGroup(r),u=this._doRender(c,e,d);s||a&&"treemapZoomToNode"!==a&&"treemapRootToNode"!==a?u.renderFinally():this._doAnimation(c,u,e,d),this._resetController(i),this._renderBreadcrumb(e,i,o)}},_giveContainerGroup:function(e){var t=this._containerGroup;return t||(t=this._containerGroup=new Rv,this._initEvents(t),this.group.add(t)),t.attr("position",[e.x,e.y]),t},_doRender:function(e,t,i){var n=t.getData().tree,o=this._oldTree,a={nodeGroup:[],background:[],content:[]},r={nodeGroup:[],background:[],content:[]},s=this._storage,l=[],u=L($v,t,r,s,i,a,l);!function a(r,s,l,d,c){d?Ov(s=r,function(e,t){!e.isRemoved()&&i(t,t)}):new ih(s,r,e,e).add(i).update(i).remove(L(i,null)).execute();function e(e){return e.getId()}function i(e,t){var i=null!=e?r[e]:null,n=null!=t?s[t]:null,o=u(i,n,l,c);o&&a(i&&i.viewChildren||[],n&&n.viewChildren||[],o,d,c+1)}}(n.root?[n.root]:[],o&&o.root?[o.root]:[],e,n===o||!o,0);var d,c,h=(c={nodeGroup:[],background:[],content:[]},(d=s)&&Ov(d,function(e,t){var i=c[t];Ov(e,function(e){e&&(i.push(e),e.__tmWillDelete=1)})}),c);return this._oldTree=n,this._storage=r,{lastsForAnimation:a,willDeleteEls:h,renderFinally:function(){Ov(h,function(e){Ov(e,function(e){e.parent&&e.parent.remove(e)})}),Ov(l,function(e){e.invisible=!0,e.dirty()})}}},_doAnimation:function(e,a,t,s){if(t.get("animation")){var r,l,d,c=t.get("animationDurationUpdate"),u=t.get("animationEasing"),h=(l=[],d={},{add:function(e,t,i,n,o){return U(n)&&(o=n,n=0),!d[e.id]&&(d[e.id]=1,l.push({el:e,target:t,time:i,delay:n,easing:o}),!0)},done:function(e){return r=e,this},start:function(){for(var e=l.length,t=0,i=l.length;t<i;t++){var n=l[t];n.el.animateTo(n.target,n.time,n.delay,n.easing,o)}return this;function o(){--e||(l.length=0,d={},r&&r())}}});Ov(a.willDeleteEls,function(e,r){Ov(e,function(e,t){if(!e.invisible){var i,n=e.parent;if(s&&"drillDown"===s.direction)i=n===s.rootNodeGroup?{shape:{x:0,y:0,width:n.__tmNodeWidth,height:n.__tmNodeHeight},style:{opacity:0}}:{style:{opacity:0}};else{var o=0,a=0;n.__tmWillDelete||(o=n.__tmNodeWidth/2,a=n.__tmNodeHeight/2),i="nodeGroup"===r?{position:[o,a],style:{opacity:0}}:{shape:{x:o,y:a,width:0,height:0},style:{opacity:0}}}i&&h.add(e,i,c,u)}})}),Ov(this._storage,function(e,o){Ov(e,function(e,t){var i=a.lastsForAnimation[o][t],n={};i&&("nodeGroup"===o?i.old&&(n.position=e.position.slice(),e.attr("position",i.old)):(i.old&&(n.shape=D({},e.shape),e.setShape(i.old)),i.fadein?(e.setStyle("opacity",0),n.style={opacity:1}):1!==e.style.opacity&&(n.style={opacity:1})),h.add(e,n,c,u))})},this),this._state="animating",h.done(Pv(function(){this._state="ready",a.renderFinally()},this)).start()}},_resetController:function(e){var t=this._controller;t||((t=this._controller=new Bg(e.getZr())).enable(this.seriesModel.get("roam")),t.on("pan",Pv(this._onPan,this)),t.on("zoom",Pv(this._onZoom,this)));var n=new ii(0,0,e.getWidth(),e.getHeight());t.setPointerChecker(function(e,t,i){return n.contain(t,i)})},_clearController:function(){var e=this._controller;e&&(e.dispose(),e=null)},_onPan:function(e,t){if("animating"!==this._state&&(3<Math.abs(e)||3<Math.abs(t))){var i=this.seriesModel.getData().tree.root;if(!i)return;var n=i.getLayout();if(!n)return;this.api.dispatchAction({type:"treemapMove",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:n.x+e,y:n.y+t,width:n.width,height:n.height}})}},_onZoom:function(e,t,i){if("animating"!==this._state){var n=this.seriesModel.getData().tree.root;if(!n)return;var o=n.getLayout();if(!o)return;var a=new ii(o.x,o.y,o.width,o.height),r=this.seriesModel.layoutInfo;t-=r.x,i-=r.y;var s=Oe();He(s,s,[-t,-i]),je(s,s,[e,e]),He(s,s,[t,i]),a.applyTransform(s),this.api.dispatchAction({type:"treemapRender",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:a.x,y:a.y,width:a.width,height:a.height}})}},_initEvents:function(e){e.on("click",function(e){if("ready"===this._state){var t=this.seriesModel.get("nodeClick",!0);if(t){var i=this.findTarget(e.offsetX,e.offsetY);if(i){var n=i.node;if(n.getLayout().isLeafRoot)this._rootToNode(i);else if("zoomToNode"===t)this._zoomToNode(i);else if("link"===t){var o=n.hostTree.data.getItemModel(n.dataIndex),a=o.get("link",!0),r=o.get("target",!0)||"blank";a&&window.open(a,r)}}}}},this)},_renderBreadcrumb:function(t,e,i){i||(i=null!=t.get("leafDepth",!0)?{node:t.getViewRoot()}:this.findTarget(e.getWidth()/2,e.getHeight()/2))||(i={node:t.getData().tree.root}),(this._breadcrumb||(this._breadcrumb=new Av(this.group))).render(t,e,i.node,Pv(function(e){"animating"!==this._state&&(Ev(t.getViewRoot(),e)?this._rootToNode({node:e}):this._zoomToNode({node:e}))},this))},remove:function(){this._clearController(),this._containerGroup&&this._containerGroup.removeAll(),this._storage={nodeGroup:[],background:[],content:[]},this._state="ready",this._breadcrumb&&this._breadcrumb.remove()},dispose:function(){this._clearController()},_zoomToNode:function(e){this.api.dispatchAction({type:"treemapZoomToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:e.node})},_rootToNode:function(e){this.api.dispatchAction({type:"treemapRootToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:e.node})},findTarget:function(o,a){var r;return this.seriesModel.getViewRoot().eachNode({attr:"viewChildren",order:"preorder"},function(e){var t=this._storage.background[e.getRawIndex()];if(t){var i=t.transformCoordToLocal(o,a),n=t.shape;if(!(n.x<=i[0]&&i[0]<=n.x+n.width&&n.y<=i[1]&&i[1]<=n.y+n.height))return!1;r={node:e,offsetX:i[0],offsetY:i[1]}}},this),r}});for(var Gv=function(){},Yv=["treemapZoomToNode","treemapRender","treemapMove"],qv=0;qv<Yv.length;qv++)Wu({type:Yv[qv],update:"updateView"},Gv);Wu({type:"treemapRootToNode",update:"updateView"},function(o,e){e.eachComponent({mainType:"series",subType:"treemap",query:o},function(e,t){var i=Iv(o,["treemapZoomToNode","treemapRootToNode"],e);if(i){var n=e.getViewRoot();n&&(o.direction=Ev(n,i.node)?"rollUp":"drillDown"),e.resetViewRoot(i.node)}})});var Zv=O,Xv=B,Kv=-1,Jv=function(e){var t=e.mappingMethod,i=e.type,n=this.option=N(e);this.type=i,this.mappingMethod=t,this._normalizeData=dy[t];var o,a,r=Qv[i];this.applyVisual=r.applyVisual,this.getColorMapper=r.getColorMapper,this._doMap=r._doMap[t],"piecewise"===t?(ey(n),a=(o=n).pieceList,o.hasSpecialVisual=!1,O(a,function(e,t){e.originIndex=t,null!=e.visual&&(o.hasSpecialVisual=!0)})):"category"===t?n.categories?function(e){var t=e.categories,i=e.visual,n=e.categoryMap={};if(Zv(t,function(e,t){n[e]=t}),!R(i)){var o=[];B(i)?Zv(i,function(e,t){var i=n[t];o[null!=i?i:Kv]=e}):o[Kv]=i,i=ly(e,o)}for(var a=t.length-1;0<=a;a--)null==i[a]&&(delete n[t[a]],t.pop())}(n):ey(n,!0):(q("linear"!==t||n.dataExtent),ey(n))};Jv.prototype={constructor:Jv,mapValueToVisual:function(e){var t=this._normalizeData(e);return this._doMap(t,e)},getNormalizer:function(){return A(this._normalizeData,this)}};var Qv=Jv.visualHandlers={color:{applyVisual:ny("color"),getColorMapper:function(){var o=this.option;return A("category"===o.mappingMethod?function(e,t){return!t&&(e=this._normalizeData(e)),oy.call(this,e)}:function(e,t,i){var n=!!i;return!t&&(e=this._normalizeData(e)),i=wt(e,o.parsedVisual,i),n?i:It(i,"rgba")},this)},_doMap:{linear:function(e){return It(wt(e,this.option.parsedVisual),"rgba")},category:oy,piecewise:function(e,t){var i=sy.call(this,t);return null==i&&(i=It(wt(e,this.option.parsedVisual),"rgba")),i},fixed:ay}},colorHue:ty(function(e,t){return Tt(e,t)}),colorSaturation:ty(function(e,t){return Tt(e,null,t)}),colorLightness:ty(function(e,t){return Tt(e,null,null,t)}),colorAlpha:ty(function(e,t){return kt(e,t)}),opacity:{applyVisual:ny("opacity"),_doMap:ry([0,1])},liftZ:{applyVisual:ny("liftZ"),_doMap:{linear:ay,category:ay,piecewise:ay,fixed:ay}},symbol:{applyVisual:function(e,t,i){var n=this.mapValueToVisual(e);if(U(n))i("symbol",n);else if(Xv(n))for(var o in n)n.hasOwnProperty(o)&&i(o,n[o])},_doMap:{linear:iy,category:oy,piecewise:function(e,t){var i=sy.call(this,t);return null==i&&(i=iy.call(this,e)),i},fixed:ay}},symbolSize:{applyVisual:ny("symbolSize"),_doMap:ry([0,1])}};function ey(e,t){var i=e.visual,n=[];B(i)?Zv(i,function(e){n.push(e)}):null!=i&&n.push(i);t||1!==n.length||{color:1,symbol:1}.hasOwnProperty(e.type)||(n[1]=n[0]),ly(e,n)}function ty(n){return{applyVisual:function(e,t,i){e=this.mapValueToVisual(e),i("color",n(t("color"),e))},_doMap:ry([0,1])}}function iy(e){var t=this.option.visual;return t[Math.round(Ls(e,[0,1],[0,t.length-1],!0))]||{}}function ny(n){return function(e,t,i){i(n,this.mapValueToVisual(e))}}function oy(e){var t=this.option.visual;return t[this.option.loop&&e!==Kv?e%t.length:e]}function ay(){return this.option.visual[0]}function ry(n){return{linear:function(e){return Ls(e,n,this.option.visual,!0)},category:oy,piecewise:function(e,t){var i=sy.call(this,t);return null==i&&(i=Ls(e,n,this.option.visual,!0)),i},fixed:ay}}function sy(e){var t=this.option,i=t.pieceList;if(t.hasSpecialVisual){var n=i[Jv.findPieceIndex(e,i)];if(n&&n.visual)return n.visual[this.type]}}function ly(e,t){return e.visual=t,"color"===e.type&&(e.parsedVisual=M(t,function(e){return vt(e)})),t}var dy={linear:function(e){return Ls(e,this.option.dataExtent,[0,1],!0)},piecewise:function(e){var t=this.option.pieceList,i=Jv.findPieceIndex(e,t,!0);if(null!=i)return Ls(i,[0,t.length-1],[0,1],!0)},category:function(e){var t=this.option.categories?this.option.categoryMap[e]:e;return null==t?Kv:t},fixed:ie};function cy(e,t,i){return e?t<=i:t<i}Jv.listVisualTypes=function(){var i=[];return O(Qv,function(e,t){i.push(t)}),i},Jv.addVisualHandler=function(e,t){Qv[e]=t},Jv.isValidType=function(e){return Qv.hasOwnProperty(e)},Jv.eachVisual=function(e,t,i){B(e)?O(e,t,i):t.call(i,e)},Jv.mapVisual=function(e,n,o){var a,r=R(e)?[]:B(e)?{}:(a=!0,null);return Jv.eachVisual(e,function(e,t){var i=n.call(o,e,t);a?r=i:r[t]=i}),r},Jv.retrieveVisuals=function(i){var n,o={};return i&&Zv(Qv,function(e,t){i.hasOwnProperty(t)&&(o[t]=i[t],n=!0)}),n?o:null},Jv.prepareVisualTypes=function(e){if(Xv(e)){var i=[];Zv(e,function(e,t){i.push(t)}),e=i}else{if(!R(e))return[];e=e.slice()}return e.sort(function(e,t){return"color"===t&&"color"!==e&&0===e.indexOf("color")?1:-1}),e},Jv.dependsOn=function(e,t){return"color"===t?!(!e||0!==e.indexOf(t)):e===t},Jv.findPieceIndex=function(n,e,t){for(var o,a=1/0,i=0,r=e.length;i<r;i++){var s=e[i].value;if(null!=s){if(s===n||"string"==typeof s&&s===n+"")return i;t&&u(s,i)}}for(i=0,r=e.length;i<r;i++){var l=e[i],d=l.interval,c=l.close;if(d){if(d[0]===-1/0){if(cy(c[1],n,d[1]))return i}else if(d[1]===1/0){if(cy(c[0],d[0],n))return i}else if(cy(c[0],d[0],n)&&cy(c[1],n,d[1]))return i;t&&u(d[0],i),t&&u(d[1],i)}}if(t)return n===1/0?e.length-1:n===-1/0?0:o;function u(e,t){var i=Math.abs(e-n);i<a&&(a=i,o=t)}};var uy=R,hy="itemStyle",fy={seriesType:"treemap",reset:function(e,t,i,n){var o=e.getData().tree,a=o.root,r=e.getModel(hy);a.isRemoved()||function n(e,t,o,a,r,s){var l=e.getModel();var i=e.getLayout();if(!i||i.invisible||!i.isInView)return;var d=e.getModel(hy);var c=o[e.depth];var u=py(d,t,c,a);var h=d.get("borderColor");var f=d.get("borderColorSaturation");var p;null!=f&&(p=my(u),m=f,h=null!=(g=p)?Tt(g,null,null,m):null);var m,g;e.setVisual("borderColor",h);var v=e.viewChildren;if(v&&v.length){var y=vy(e,l,i,d,u,v);O(v,function(e,t){if(e.depth>=r.length||e===r[e.depth]){var i=by(l,u,e,t,y,s);n(e,i,o,a,r,s)}})}else p=my(u),e.setVisual("color",p)}(a,{},M(o.levelModels,function(e){return e?e.get(hy):null}),r,e.getViewRoot().getAncestors(),e)}};function py(i,n,o,a){var r=D({},n);return O(["color","colorAlpha","colorSaturation"],function(e){var t=i.get(e,!0);null==t&&o&&(t=o[e]),null==t&&(t=n[e]),null==t&&(t=a.get(e)),null!=t&&(r[e]=t)}),r}function my(e){var t=gy(e,"color");if(t){var i=gy(e,"colorAlpha"),n=gy(e,"colorSaturation");return n&&(t=Tt(t,null,null,n)),i&&(t=kt(t,i)),t}}function gy(e,t){var i=e[t];if(null!=i&&"none"!==i)return i}function vy(e,t,i,n,o,a){if(a&&a.length){var r=yy(t,"color")||null!=o.color&&"none"!==o.color&&(yy(t,"colorAlpha")||yy(t,"colorSaturation"));if(r){var s=t.get("visualMin"),l=t.get("visualMax"),d=i.dataExtent.slice();null!=s&&s<d[0]&&(d[0]=s),null!=l&&l>d[1]&&(d[1]=l);var c=t.get("colorMappingBy"),u={type:r.name,dataExtent:d,visual:r.range};"color"!==u.type||"index"!==c&&"id"!==c?u.mappingMethod="linear":(u.mappingMethod="category",u.loop=!0);var h=new Jv(u);return h.__drColorMappingBy=c,h}}}function yy(e,t){var i=e.get(t);return uy(i)&&i.length?{name:t,range:i}:null}function by(e,t,i,n,o,a){var r=D({},t);if(o){var s=o.type,l="color"===s&&o.__drColorMappingBy,d="index"===l?n:"id"===l?a.mapIdToIndex(i.getId()):i.getValue(e.get("visualDimension"));r[s]=o.mapValueToVisual(d)}return r}var xy=Math.max,wy=Math.min,_y=j,Cy=O,Sy=["itemStyle","borderWidth"],Ty=["itemStyle","gapWidth"],ky=["upperLabel","show"],Iy=["upperLabel","height"],Ny={seriesType:"treemap",reset:function(e,t,i,n){var o=i.getWidth(),a=i.getHeight(),r=e.option,s=xl(e.getBoxLayoutParams(),{width:i.getWidth(),height:i.getHeight()}),l=r.size||[],d=Ps(_y(s.width,l[0]),o),c=Ps(_y(s.height,l[1]),a),u=n&&n.type,h=Iv(n,["treemapZoomToNode","treemapRootToNode"],e),f="treemapRender"===u||"treemapMove"===u?n.rootRect:null,p=e.getViewRoot(),m=Nv(p);if("treemapMove"!==u){var g="treemapZoomToNode"===u?function(e,t,i,n,o){var a,r=(t||{}).node,s=[n,o];if(!r||r===i)return s;var l=n*o,d=l*e.option.zoomToNodeRatio;for(;a=r.parentNode;){for(var c=0,u=a.children,h=0,f=u.length;h<f;h++)c+=u[h].getValue();var p=r.getValue();if(0===p)return s;d*=c/p;var m=a.getModel(),g=m.get(Sy),v=Math.max(g,Ay(m));d+=4*g*g+(3*g+v)*Math.pow(d,.5),Hs<d&&(d=Hs),r=a}d<l&&(d=l);var y=Math.pow(d/l,.5);return[n*y,o*y]}(e,h,p,d,c):f?[f.width,f.height]:[d,c],v=r.sort;v&&"asc"!==v&&"desc"!==v&&(v="desc");var y={squareRatio:r.squareRatio,sort:v,leafDepth:r.leafDepth};p.hostTree.clearLayouts();var b={x:0,y:0,width:g[0],height:g[1],area:g[0]*g[1]};p.setLayout(b),function e(t,i,n,o){var a;var r;if(t.isRemoved())return;var s=t.getLayout();a=s.width;r=s.height;var l=t.getModel();var d=l.get(Sy);var c=l.get(Ty)/2;var u=Ay(l);var h=Math.max(d,u);var f=d-c;var p=h-c;var l=t.getModel();t.setLayout({borderWidth:d,upperHeight:h,upperLabelHeight:u},!0);a=xy(a-2*f,0);r=xy(r-f-p,0);var m=a*r;var g=Ey(t,l,m,i,n,o);if(!g.length)return;var v={x:f,y:p,width:a,height:r};var y=wy(a,r);var b=1/0;var x=[];x.area=0;for(var w=0,_=g.length;w<_;){var C=g[w];x.push(C),x.area+=C.getLayout().area;var S=My(x,y,i.squareRatio);b=S<=b?(w++,S):(x.area-=x.pop().getLayout().area,Dy(x,y,v,c,!1),y=wy(v.width,v.height),x.length=x.area=0,1/0)}x.length&&Dy(x,y,v,c,!0);if(!n){var T=l.get("childrenVisibleMin");null!=T&&m<T&&(n=!0)}for(var w=0,_=g.length;w<_;w++)e(g[w],i,n,o+1)}(p,y,!1,0);b=p.getLayout();Cy(m,function(e,t){var i=(m[t+1]||p).getValue();e.setLayout(D({dataExtent:[i,i],borderWidth:0,upperHeight:0},b))})}var x=e.getData().tree.root;x.setLayout(function(e,t,i){if(t)return{x:t.x,y:t.y};var n={x:0,y:0};if(!i)return n;var o=i.node,a=o.getLayout();if(!a)return n;var r=[a.width/2,a.height/2],s=o;for(;s;){var l=s.getLayout();r[0]+=l.x,r[1]+=l.y,s=s.parentNode}return{x:e.width/2-r[0],y:e.height/2-r[1]}}(s,f,h),!0),e.setLayoutInfo(s),function t(e,i,n,o,a){var r=e.getLayout();var s=n[a];var l=s&&s===e;if(s&&!l||a===n.length&&e!==o)return;e.setLayout({isInView:!0,invisible:!l&&!i.intersect(r),isAboveViewRoot:l},!0);var d=new ii(i.x-r.x,i.y-r.y,i.width,i.height);Cy(e.viewChildren||[],function(e){t(e,d,n,o,a+1)})}(x,new ii(-s.x,-s.y,o,a),m,p,0)}};function Ey(e,t,i,n,o,a){var r=e.children||[],s=n.sort;"asc"!==s&&"desc"!==s&&(s=null);var l,d,c=null!=n.leafDepth&&n.leafDepth<=a;if(o&&!c)return e.viewChildren=[];r=T(r,function(e){return!e.isRemoved()}),l=r,(d=s)&&l.sort(function(e,t){var i="asc"===d?e.getValue()-t.getValue():t.getValue()-e.getValue();return 0===i?"asc"===d?e.dataIndex-t.dataIndex:t.dataIndex-e.dataIndex:i});var u=function(e,t,i){for(var n=0,o=0,a=t.length;o<a;o++)n+=t[o].getValue();var r=e.get("visualDimension");if(t&&t.length)if("value"===r&&i)s=[t[t.length-1].getValue(),t[0].getValue()],"asc"===i&&s.reverse();else{var s=[1/0,-1/0];Cy(t,function(e){var t=e.getValue(r);t<s[0]&&(s[0]=t),t>s[1]&&(s[1]=t)})}else s=[NaN,NaN];return{sum:n,dataExtent:s}}(t,r,s);if(0===u.sum)return e.viewChildren=[];if(u.sum=function(e,t,i,n,o){if(!n)return i;for(var a=e.get("visibleMin"),r=o.length,s=r,l=r-1;0<=l;l--){var d=o["asc"===n?r-l-1:l].getValue();d/i*t<a&&(s=l,i-=d)}return"asc"===n?o.splice(0,r-s):o.splice(s,r-s),i}(t,i,u.sum,s,r),0===u.sum)return e.viewChildren=[];for(var h=0,f=r.length;h<f;h++){var p=r[h].getValue()/u.sum*i;r[h].setLayout({area:p})}return c&&(r.length&&e.setLayout({isLeafRoot:!0},!0),r.length=0),e.viewChildren=r,e.setLayout({dataExtent:u.dataExtent},!0),r}function My(e,t,i){for(var n,o=0,a=1/0,r=0,s=e.length;r<s;r++)(n=e[r].getLayout().area)&&(n<a&&(a=n),o<n&&(o=n));var l=e.area*e.area,d=t*t*i;return l?xy(d*o/l,l/(d*a)):1/0}function Dy(e,t,i,n,o){var a=t===i.width?0:1,r=1-a,s=["x","y"],l=["width","height"],d=i[s[a]],c=t?e.area/t:0;(o||c>i[l[r]])&&(c=i[l[r]]);for(var u=0,h=e.length;u<h;u++){var f=e[u],p={},m=c?f.getLayout().area/c:0,g=p[l[r]]=xy(c-2*n,0),v=i[s[a]]+i[l[a]]-d,y=u===h-1||v<m?v:m,b=p[l[a]]=xy(y-2*n,0);p[s[r]]=i[s[r]]+wy(n,g/2),p[s[a]]=d+wy(n,b/2),d+=y,f.setLayout(p,!0)}i[s[r]]+=c,i[l[r]]-=c}function Ay(e){return e.get(ky)?e.get(Iy):0}function Ly(e){return"_EC_"+e}Yu(fy),Gu(Ny);var Py=function(e){this._directed=e||!1,this.nodes=[],this.edges=[],this._nodesMap={},this._edgesMap={},this.data,this.edgeData},Ry=Py.prototype;function Uy(e,t){this.id=null==e?"":e,this.inEdges=[],this.outEdges=[],this.edges=[],this.hostGraph,this.dataIndex=null==t?-1:t}function Oy(e,t,i){this.node1=e,this.node2=t,this.dataIndex=null==i?-1:i}Ry.type="graph",Ry.isDirected=function(){return this._directed},Ry.addNode=function(e,t){e=e||""+t;var i=this._nodesMap;if(!i[Ly(e)]){var n=new Uy(e,t);return(n.hostGraph=this).nodes.push(n),i[Ly(e)]=n}I&&console.error("Graph nodes have duplicate name or id")},Ry.getNodeByIndex=function(e){var t=this.data.getRawIndex(e);return this.nodes[t]},Ry.getNodeById=function(e){return this._nodesMap[Ly(e)]},Ry.addEdge=function(e,t,i){var n=this._nodesMap,o=this._edgesMap;if("number"==typeof e&&(e=this.nodes[e]),"number"==typeof t&&(t=this.nodes[t]),Uy.isInstance(e)||(e=n[Ly(e)]),Uy.isInstance(t)||(t=n[Ly(t)]),e&&t){var a=e.id+"-"+t.id;if(!o[a]){var r=new Oy(e,t,i);return(r.hostGraph=this)._directed&&(e.outEdges.push(r),t.inEdges.push(r)),e.edges.push(r),e!==t&&t.edges.push(r),this.edges.push(r),o[a]=r}}},Ry.getEdgeByIndex=function(e){var t=this.edgeData.getRawIndex(e);return this.edges[t]},Ry.getEdge=function(e,t){Uy.isInstance(e)&&(e=e.id),Uy.isInstance(t)&&(t=t.id);var i=this._edgesMap;return this._directed?i[e+"-"+t]:i[e+"-"+t]||i[t+"-"+e]},Ry.eachNode=function(e,t){for(var i=this.nodes,n=i.length,o=0;o<n;o++)0<=i[o].dataIndex&&e.call(t,i[o],o)},Ry.eachEdge=function(e,t){for(var i=this.edges,n=i.length,o=0;o<n;o++)0<=i[o].dataIndex&&0<=i[o].node1.dataIndex&&0<=i[o].node2.dataIndex&&e.call(t,i[o],o)},Ry.breadthFirstTraverse=function(e,t,i,n){if(Uy.isInstance(t)||(t=this._nodesMap[Ly(t)]),t){for(var o="out"===i?"outEdges":"in"===i?"inEdges":"edges",a=0;a<this.nodes.length;a++)this.nodes[a].__visited=!1;if(!e.call(n,t,null))for(var r=[t];r.length;){var s=r.shift(),l=s[o];for(a=0;a<l.length;a++){var d=l[a],c=d.node1===s?d.node2:d.node1;if(!c.__visited){if(e.call(n,c,s))return;r.push(c),c.__visited=!0}}}}},Ry.update=function(){for(var e=this.data,i=this.edgeData,t=this.nodes,n=this.edges,o=0,a=t.length;o<a;o++)t[o].dataIndex=-1;for(o=0,a=e.count();o<a;o++)t[e.getRawIndex(o)].dataIndex=o;i.filterSelf(function(e){var t=n[i.getRawIndex(e)];return 0<=t.node1.dataIndex&&0<=t.node2.dataIndex});for(o=0,a=n.length;o<a;o++)n[o].dataIndex=-1;for(o=0,a=i.count();o<a;o++)n[i.getRawIndex(o)].dataIndex=o},Ry.clone=function(){for(var e=new Py(this._directed),t=this.nodes,i=this.edges,n=0;n<t.length;n++)e.addNode(t[n].id,t[n].dataIndex);for(n=0;n<i.length;n++){var o=i[n];e.addEdge(o.node1.id,o.node2.id,o.dataIndex)}return e},Uy.prototype={constructor:Uy,degree:function(){return this.edges.length},inDegree:function(){return this.inEdges.length},outDegree:function(){return this.outEdges.length},getModel:function(e){if(!(this.dataIndex<0))return this.hostGraph.data.getItemModel(this.dataIndex).getModel(e)}},Oy.prototype.getModel=function(e){if(!(this.dataIndex<0))return this.hostGraph.edgeData.getItemModel(this.dataIndex).getModel(e)};var By=function(i,n){return{getValue:function(e){var t=this[i][n];return t.get(t.getDimension(e||"value"),this.dataIndex)},setVisual:function(e,t){0<=this.dataIndex&&this[i][n].setItemVisual(this.dataIndex,e,t)},getVisual:function(e,t){return this[i][n].getItemVisual(this.dataIndex,e,t)},setLayout:function(e,t){0<=this.dataIndex&&this[i][n].setItemLayout(this.dataIndex,e,t)},getLayout:function(){return this[i][n].getItemLayout(this.dataIndex)},getGraphicEl:function(){return this[i][n].getItemGraphicEl(this.dataIndex)},getRawIndex:function(){return this[i][n].getRawIndex(this.dataIndex)}}};C(Uy,By("hostGraph","data")),C(Oy,By("hostGraph","edgeData")),Py.Node=Uy,Py.Edge=Oy,Io(Uy),Io(Oy);var zy=function(e,t,i,n,o){for(var a=new Py(n),r=0;r<e.length;r++)a.addNode(j(e[r].id,e[r].name,r),r);var s=[],l=[],d=0;for(r=0;r<t.length;r++){var c=t[r],u=c.source,h=c.target;a.addEdge(u,h,d)&&(l.push(c),s.push(j(c.id,u+" > "+h)),d++)}var f,p=i.get("coordinateSystem");if("cartesian2d"===p||"polar"===p)f=Lh(e,i);else{var m=od.get(p),g=m&&"view"!==m.type&&m.dimensions||[];w(g,"value")<0&&g.concat(["value"]);var v=Eh(e,{coordDimensions:g});(f=new mh(v,i)).initData(e)}var y=new mh(["value"],i);return y.initData(l,s),o&&o(f,y),nv({mainData:f,struct:a,structAttr:"graph",datas:{node:f,edge:y},datasAttr:{node:"data",edge:"edgeData"}}),a.update(),a},Fy=Ju({type:"series.graph",init:function(e){Fy.superApply(this,"init",arguments),this.legendDataProvider=function(){return this._categoriesData},this.fillDataTextStyle(e.edges||e.links),this._updateCategoriesData()},mergeOption:function(e){Fy.superApply(this,"mergeOption",arguments),this.fillDataTextStyle(e.edges||e.links),this._updateCategoriesData()},mergeDefaultAndTheme:function(e){Fy.superApply(this,"mergeDefaultAndTheme",arguments),lo(e,["edgeLabel"],["show"])},getInitialData:function(e,s){var t=e.edges||e.links||[],i=e.data||e.nodes||[],l=this;if(i&&t)return zy(i,t,this,!0,function(e,t){e.wrapMethod("getItemModel",function(e){var t=l._categoriesModels,i=e.getShallow("category"),n=t[i];return n&&(n.parentModel=e.parentModel,e.parentModel=n),e});var i=l.getModel("edgeLabel"),n=new Is({label:i.option},i.parentModel,s),o=l.getModel("emphasis.edgeLabel"),a=new Is({emphasis:{label:o.option}},o.parentModel,s);function r(e){return(e=this.parsePath(e))&&"label"===e[0]?n:e&&"emphasis"===e[0]&&"label"===e[1]?a:this.parentModel}t.wrapMethod("getItemModel",function(e){return e.customizeGetParent(r),e})}).data},getGraph:function(){return this.getData().graph},getEdgeData:function(){return this.getGraph().edgeData},getCategoriesData:function(){return this._categoriesData},formatTooltip:function(e,t,i){if("edge"!==i)return Fy.superApply(this,"formatTooltip",arguments);var n=this.getData(),o=this.getDataParams(e,i),a=n.graph.getEdgeByIndex(e),r=n.getName(a.node1.dataIndex),s=n.getName(a.node2.dataIndex),l=[];return null!=r&&l.push(r),null!=s&&l.push(s),l=nl(l.join(" > ")),o.value&&(l+=" : "+nl(o.value)),l},_updateCategoriesData:function(){var e=M(this.option.categories||[],function(e){return null!=e.value?e:D({value:0},e)}),t=new mh(["value"],this);t.initData(e),this._categoriesData=t,this._categoriesModels=t.mapArray(function(e){return t.getItemModel(e,!0)})},setZoom:function(e){this.option.zoom=e},setCenter:function(e){this.option.center=e},isAnimationEnabled:function(){return Fy.superCall(this,"isAnimationEnabled")&&!("force"===this.get("layout")&&this.get("force.layoutAnimation"))},defaultOption:{zlevel:0,z:2,coordinateSystem:"view",legendHoverLink:!0,hoverAnimation:!0,layout:null,focusNodeAdjacency:!1,circular:{rotateLabel:!1},force:{initLayout:null,repulsion:[0,50],gravity:.1,edgeLength:30,layoutAnimation:!0},left:"center",top:"center",symbol:"circle",symbolSize:10,edgeSymbol:["none","none"],edgeSymbolSize:10,edgeLabel:{position:"middle"},draggable:!1,roam:!1,center:null,zoom:1,nodeScaleRatio:.6,label:{show:!1,formatter:"{b}"},itemStyle:{},lineStyle:{color:"#aaa",width:1,curveness:0,opacity:.5},emphasis:{label:{show:!0}}}}),Hy=wr.prototype,Vy=Sr.prototype;function jy(e){return isNaN(+e.cpx1)||isNaN(+e.cpy1)}var Wy=Ur({type:"ec-line",style:{stroke:"#000",fill:null},shape:{x1:0,y1:0,x2:0,y2:0,percent:1,cpx1:null,cpy1:null},buildPath:function(e,t){(jy(t)?Hy:Vy).buildPath(e,t)},pointAt:function(e){return jy(this.shape)?Hy.pointAt.call(this,e):Vy.pointAt.call(this,e)},tangentAt:function(e){var t=this.shape,i=jy(t)?[t.x2-t.x1,t.y2-t.y1]:Vy.tangentAt.call(this,e);return ve(i,i)}}),$y=["fromSymbol","toSymbol"];function Gy(e){return"_"+e+"Type"}function Yy(e,t,i){var n=t.getItemVisual(i,"color"),o=t.getItemVisual(i,e),a=t.getItemVisual(i,e+"Size");if(o&&"none"!==o){R(a)||(a=[a,a]);var r=Of(o,-a[0]/2,-a[1]/2,a[0],a[1],n);return r.name=e,r}}function qy(e,t){var i=t[0],n=t[1],o=t[2];e.x1=i[0],e.y1=i[1],e.x2=n[0],e.y2=n[1],e.percent=1,e.cpy1=o?(e.cpx1=o[0],o[1]):e.cpx1=NaN}function Zy(e,t,i){ni.call(this),this._createLine(e,t,i)}var Xy=Zy.prototype;function Ky(e){this._ctor=e||Zy,this.group=new ni}Xy.beforeUpdate=function(){var e=this.childOfName("fromSymbol"),t=this.childOfName("toSymbol"),i=this.childOfName("label");if(e||t||!i.ignore){for(var n=1,o=this.parent;o;)o.scale&&(n/=o.scale[0]),o=o.parent;var a=this.childOfName("line");if(this.__dirty||a.__dirty){var r=a.shape.percent,s=a.pointAt(0),l=a.pointAt(r),d=ue([],l,s);if(ve(d,d),e){e.attr("position",s);var c=a.tangentAt(0);e.attr("rotation",Math.PI/2-Math.atan2(c[1],c[0])),e.attr("scale",[n*r,n*r])}if(t&&(t.attr("position",l),c=a.tangentAt(1),t.attr("rotation",-Math.PI/2-Math.atan2(c[1],c[0])),t.attr("scale",[n*r,n*r])),!i.ignore){var u,h,f;i.attr("position",l);var p=5*n;if("end"===i.__position)u=[d[0]*p+l[0],d[1]*p+l[1]],h=.8<d[0]?"left":d[0]<-.8?"right":"center",f=.8<d[1]?"top":d[1]<-.8?"bottom":"middle";else if("middle"===i.__position){var m=r/2,g=[(c=a.tangentAt(m))[1],-c[0]],v=a.pointAt(m);0<g[1]&&(g[0]=-g[0],g[1]=-g[1]),u=[v[0]+g[0]*p,v[1]+g[1]*p],h="center",f="bottom";var y=-Math.atan2(c[1],c[0]);l[0]<s[0]&&(y=Math.PI+y),i.attr("rotation",y)}else u=[-d[0]*p+s[0],-d[1]*p+s[1]],h=.8<d[0]?"right":d[0]<-.8?"left":"center",f=.8<d[1]?"bottom":d[1]<-.8?"top":"middle";i.attr({style:{textVerticalAlign:i.__verticalAlign||f,textAlign:i.__textAlign||h},position:u,scale:[n,n]})}}}},Xy._createLine=function(i,n,e){var t,o,a=i.hostModel,r=i.getItemLayout(n),s=(t=r,qy((o=new Wy({name:"line"})).shape,t),o);s.shape.percent=0,fs(s,{shape:{percent:1}},a,n),this.add(s);var l=new cr({name:"label"});this.add(l),O($y,function(e){var t=Yy(e,i,n);this.add(t),this[Gy(e)]=i.getItemVisual(n,e)},this),this._updateCommonStl(i,n,e)},Xy.updateData=function(o,a,e){var t=o.hostModel,i=this.childOfName("line"),n=o.getItemLayout(a),r={shape:{}};qy(r.shape,n),hs(i,r,t,a),O($y,function(e){var t=o.getItemVisual(a,e),i=Gy(e);if(this[i]!==t){this.remove(this.childOfName(e));var n=Yy(e,o,a);this.add(n)}this[i]=t},this),this._updateCommonStl(o,a,e)},Xy._updateCommonStl=function(e,t,i){var n=e.hostModel,o=this.childOfName("line"),a=i&&i.lineStyle,r=i&&i.hoverLineStyle,s=i&&i.labelModel,l=i&&i.hoverLabelModel;if(!i||e.hasItemOption){var d=e.getItemModel(t);a=d.getModel("lineStyle").getLineStyle(),r=d.getModel("emphasis.lineStyle").getLineStyle(),s=d.getModel("label"),l=d.getModel("emphasis.label")}var c=e.getItemVisual(t,"color"),u=$(e.getItemVisual(t,"opacity"),a.opacity,1);o.useStyle(E({strokeNoScale:!0,fill:"none",stroke:c,opacity:u},a)),o.hoverStyle=r,O($y,function(e){var t=this.childOfName(e);t&&(t.setColor(c),t.setStyle({opacity:u}))},this);var h,f,p=s.getShallow("show"),m=l.getShallow("show"),g=this.childOfName("label");if((p||m)&&(h=c||"#000",null==(f=n.getFormattedLabel(t,"normal",e.dataType)))){var v=n.getRawValue(t);f=null==v?e.getName(t):isFinite(v)?Rs(v):v}var y=p?f:null,b=m?W(n.getFormattedLabel(t,"emphasis",e.dataType),f):null,x=g.style;null==y&&null==b||(as(g.style,s,{text:y},{autoColor:h}),g.__textAlign=x.textAlign,g.__verticalAlign=x.textVerticalAlign,g.__position=s.get("position")||"middle"),g.hoverStyle=null!=b?{text:b,textFill:l.getTextColor(!0),fontStyle:l.getShallow("fontStyle"),fontWeight:l.getShallow("fontWeight"),fontSize:l.getShallow("fontSize"),fontFamily:l.getShallow("fontFamily")}:{text:null},g.ignore=!p&&!m,ns(this)},Xy.highlight=function(){this.trigger("emphasis")},Xy.downplay=function(){this.trigger("normal")},Xy.updateLayout=function(e,t){this.setLinePoints(e.getItemLayout(t))},Xy.setLinePoints=function(e){var t=this.childOfName("line");qy(t.shape,e),t.dirty()},_(Zy,ni);var Jy=Ky.prototype;function Qy(e){var t=e.hostModel;return{lineStyle:t.getModel("lineStyle").getLineStyle(),hoverLineStyle:t.getModel("emphasis.lineStyle").getLineStyle(),labelModel:t.getModel("label"),hoverLabelModel:t.getModel("emphasis.label")}}function eb(e){return isNaN(e[0])||isNaN(e[1])}function tb(e){return!eb(e[0])&&!eb(e[1])}Jy.isPersistent=function(){return!0},Jy.updateData=function(i){var n=this,t=n.group,o=n._lineData;n._lineData=i,o||t.removeAll();var a=Qy(i);i.diff(o).add(function(e){!function(e,t,i,n){if(!tb(t.getItemLayout(i)))return;var o=new e._ctor(t,i,n);t.setItemGraphicEl(i,o),e.group.add(o)}(n,i,e,a)}).update(function(e,t){!function(e,t,i,n,o,a){var r=t.getItemGraphicEl(n);if(!tb(i.getItemLayout(o)))return e.group.remove(r);r?r.updateData(i,o,a):r=new e._ctor(i,o,a);i.setItemGraphicEl(o,r),e.group.add(r)}(n,o,i,t,e,a)}).remove(function(e){t.remove(o.getItemGraphicEl(e))}).execute()},Jy.updateLayout=function(){var i=this._lineData;i&&i.eachItemGraphicEl(function(e,t){e.updateLayout(i,t)},this)},Jy.incrementalPrepareUpdate=function(e){this._seriesScope=Qy(e),this._lineData=null,this.group.removeAll()},Jy.incrementalUpdate=function(e,t){function i(e){e.isGroup||(e.incremental=e.useHoverLayer=!0)}for(var n=e.start;n<e.end;n++){if(tb(t.getItemLayout(n))){var o=new this._ctor(t,n,this._seriesScope);o.traverse(i),this.group.add(o),t.setItemGraphicEl(n,o)}}},Jy.remove=function(){this._clearIncremental(),this._incremental=null,this.group.removeAll()},Jy._clearIncremental=function(){var e=this._incremental;e&&e.clearDisplaybles()};var ib=[],nb=[],ob=[],ab=Ko,rb=we,sb=Math.abs;function lb(e,t,i){for(var n,o=e[0],a=e[1],r=e[2],s=1/0,l=i*i,d=.1,c=.1;c<=.9;c+=.1){ib[0]=ab(o[0],a[0],r[0],c),ib[1]=ab(o[1],a[1],r[1],c),(f=sb(rb(ib,t)-l))<s&&(s=f,n=c)}for(var u=0;u<32;u++){var h=n+d;nb[0]=ab(o[0],a[0],r[0],n),nb[1]=ab(o[1],a[1],r[1],n),ob[0]=ab(o[0],a[0],r[0],h),ob[1]=ab(o[1],a[1],r[1],h);var f=rb(nb,t)-l;if(sb(f)<.01)break;var p=rb(ob,t)-l;d/=2,f<0?0<=p?n+=d:n-=d:0<=p?n-=d:n+=d}return n}var db=function(e,l){var d=[],c=ea,u=[[],[],[]],h=[[],[]],f=[];function p(e){var t=e.getVisual("symbolSize");return t instanceof Array&&(t=(t[0]+t[1])/2),t}l/=2,e.eachEdge(function(e,t){var i=e.getLayout(),n=e.getVisual("fromSymbol"),o=e.getVisual("toSymbol");i.__original||(i.__original=[se(i[0]),se(i[1])],i[2]&&i.__original.push(se(i[2])));var a=i.__original;if(null!=i[2]){if(re(u[0],a[0]),re(u[1],a[2]),re(u[2],a[1]),n&&"none"!=n){var r=p(e.node1),s=lb(u,a[0],r*l);c(u[0][0],u[1][0],u[2][0],s,d),u[0][0]=d[3],u[1][0]=d[4],c(u[0][1],u[1][1],u[2][1],s,d),u[0][1]=d[3],u[1][1]=d[4]}if(o&&"none"!=o){r=p(e.node2),s=lb(u,a[1],r*l);c(u[0][0],u[1][0],u[2][0],s,d),u[1][0]=d[1],u[2][0]=d[2],c(u[0][1],u[1][1],u[2][1],s,d),u[1][1]=d[1],u[2][1]=d[2]}re(i[0],u[0]),re(i[1],u[2]),re(i[2],u[1])}else{if(re(h[0],a[0]),re(h[1],a[1]),ue(f,h[1],h[0]),ve(f,f),n&&"none"!=n){r=p(e.node1);ce(h[0],h[0],f,r*l)}if(o&&"none"!=o){r=p(e.node2);ce(h[1],h[1],f,-r*l)}re(i[0],h[0]),re(i[1],h[1])}})},cb=["itemStyle","opacity"],ub=["lineStyle","opacity"];function hb(e,t){return e.getVisual("opacity")||e.getModel().get(t)}function fb(e,t,i){var n=e.getGraphicEl(),o=hb(e,t);null!=i&&(null==o&&(o=1),o*=i),n.downplay&&n.downplay(),n.traverse(function(e){"group"!==e.type&&e.setStyle("opacity",o)})}function pb(e,t){var i=hb(e,t),n=e.getGraphicEl();n.highlight&&n.highlight(),n.traverse(function(e){"group"!==e.type&&e.setStyle("opacity",i)})}Qu({type:"graph",init:function(e,t){var i=new vp,n=new Ky,o=this.group;this._controller=new Bg(t.getZr()),this._controllerHost={target:o},o.add(i.group),o.add(n.group),this._symbolDraw=i,this._lineDraw=n,this._firstRender=!0},render:function(o,e,a){var t=o.coordinateSystem;this._model=o,this._nodeScaleRatio=o.get("nodeScaleRatio");var i=this._symbolDraw,n=this._lineDraw,r=this.group;if("view"===t.type){var s={position:t.position,scale:t.scale};this._firstRender?r.attr(s):hs(r,s,o)}db(o.getGraph(),this._getNodeGlobalScale(o));var l=o.getData();i.updateData(l);var d=o.getEdgeData();n.updateData(d),this._updateNodeAndLinkScale(),this._updateController(o,e,a),clearTimeout(this._layoutTimeout);var c=o.forceLayout,u=o.get("force.layoutAnimation");c&&this._startForceLayoutIteration(c,u),l.eachItemGraphicEl(function(e,t){var i=l.getItemModel(t);e.off("drag").off("dragend");var n=l.getItemModel(t).get("draggable");n&&e.on("drag",function(){c&&(c.warmUp(),!this._layouting&&this._startForceLayoutIteration(c,u),c.setFixed(t),l.setItemLayout(t,e.position))},this).on("dragend",function(){c&&c.setUnfixed(t)},this),e.setDraggable(n&&c),e.off("mouseover",e.__focusNodeAdjacency),e.off("mouseout",e.__unfocusNodeAdjacency),i.get("focusNodeAdjacency")&&(e.on("mouseover",e.__focusNodeAdjacency=function(){a.dispatchAction({type:"focusNodeAdjacency",seriesId:o.id,dataIndex:e.dataIndex})}),e.on("mouseout",e.__unfocusNodeAdjacency=function(){a.dispatchAction({type:"unfocusNodeAdjacency",seriesId:o.id})}))},this),l.graph.eachEdge(function(e){var t=e.getGraphicEl();t.off("mouseover",t.__focusNodeAdjacency),t.off("mouseout",t.__unfocusNodeAdjacency),e.getModel().get("focusNodeAdjacency")&&(t.on("mouseover",t.__focusNodeAdjacency=function(){a.dispatchAction({type:"focusNodeAdjacency",seriesId:o.id,edgeDataIndex:e.dataIndex})}),t.on("mouseout",t.__unfocusNodeAdjacency=function(){a.dispatchAction({type:"unfocusNodeAdjacency",seriesId:o.id})}))});var h="circular"===o.get("layout")&&o.get("circular.rotateLabel"),f=l.getLayout("cx"),p=l.getLayout("cy");l.eachItemGraphicEl(function(e,t){var i=e.getSymbolPath();if(h){var n=l.getItemLayout(t),o=Math.atan2(n[1]-p,n[0]-f);o<0&&(o=2*Math.PI+o);var a=n[0]<f;a&&(o-=Math.PI);var r=a?"left":"right";i.setStyle({textRotation:-o,textPosition:r,textOrigin:"center"}),i.hoverStyle&&(i.hoverStyle.textPosition=r)}else i.setStyle({textRotation:0})}),this._firstRender=!1},dispose:function(){this._controller&&this._controller.dispose(),this._controllerHost={}},focusNodeAdjacency:function(e,t,i,n){var o=this._model.getData().graph,a=n.dataIndex,r=n.edgeDataIndex,s=o.getNodeByIndex(a),l=o.getEdgeByIndex(r);(s||l)&&(o.eachNode(function(e){fb(e,cb,.1)}),o.eachEdge(function(e){fb(e,ub,.1)}),s&&(pb(s,cb),O(s.edges,function(e){e.dataIndex<0||(pb(e,ub),pb(e.node1,cb),pb(e.node2,cb))})),l&&(pb(l,ub),pb(l.node1,cb),pb(l.node2,cb)))},unfocusNodeAdjacency:function(e,t,i,n){var o=this._model.getData().graph;o.eachNode(function(e){fb(e,cb)}),o.eachEdge(function(e){fb(e,ub)})},_startForceLayoutIteration:function(e,i){var n=this;!function t(){e.step(function(e){n.updateLayout(n._model),(n._layouting=!e)&&(i?n._layoutTimeout=setTimeout(t,16):t())})}()},_updateController:function(o,e,a){var t=this._controller,n=this._controllerHost,r=this.group;t.setPointerChecker(function(e,t,i){var n=r.getBoundingRect();return n.applyTransform(r.transform),n.contain(t,i)&&!Zg(e,a,o)}),"view"===o.coordinateSystem.type?(t.enable(o.get("roam")),n.zoomLimit=o.get("scaleLimit"),n.zoom=o.coordinateSystem.getZoom(),t.off("pan").off("zoom").on("pan",function(e,t){Gg(n,e,t),a.dispatchAction({seriesId:o.id,type:"graphRoam",dx:e,dy:t})}).on("zoom",function(e,t,i){Yg(n,e,t,i),a.dispatchAction({seriesId:o.id,type:"graphRoam",zoom:e,originX:t,originY:i}),this._updateNodeAndLinkScale(),db(o.getGraph(),this._getNodeGlobalScale(o)),this._lineDraw.updateLayout()},this)):t.disable()},_updateNodeAndLinkScale:function(){var e=this._model,t=e.getData(),i=this._getNodeGlobalScale(e),n=[i,i];t.eachItemGraphicEl(function(e,t){e.attr("scale",n)})},_getNodeGlobalScale:function(e){var t=e.coordinateSystem;if("view"!==t.type)return 1;var i=this._nodeScaleRatio,n=t.scale,o=n&&n[0]||1;return((t.getZoom()-1)*i+1)/o},updateLayout:function(e){db(e.getGraph(),this._getNodeGlobalScale(e)),this._symbolDraw.updateLayout(),this._lineDraw.updateLayout()},remove:function(e,t){this._symbolDraw&&this._symbolDraw.remove(),this._lineDraw&&this._lineDraw.remove()}});Wu({type:"graphRoam",event:"graphRoam",update:"none"},function(i,e){e.eachComponent({mainType:"series",query:i},function(e){var t=Qg(e.coordinateSystem,i);e.setCenter&&e.setCenter(t.center),e.setZoom&&e.setZoom(t.zoom)})}),Wu({type:"focusNodeAdjacency",event:"focusNodeAdjacency",update:"series.graph:focusNodeAdjacency"},function(){}),Wu({type:"unfocusNodeAdjacency",event:"unfocusNodeAdjacency",update:"series.graph:unfocusNodeAdjacency"},function(){});function mb(e){return e instanceof Array||(e=[e,e]),e}function gb(e){var t=e.coordinateSystem;if(!t||"view"===t.type){var i=e.getGraph();i.eachNode(function(e){var t=e.getModel();e.setLayout([+t.get("x"),+t.get("y")])}),vb(i)}}function vb(e){e.eachEdge(function(e){var t=e.getModel().get("lineStyle.curveness")||0,i=se(e.node1.getLayout()),n=se(e.node2.getLayout()),o=[i,n];+t&&o.push([(i[0]+n[0])/2-(i[1]-n[1])*t,(i[1]+n[1])/2-(n[0]-i[0])*t]),e.setLayout(o)})}function yb(e){var t=e.coordinateSystem;if(!t||"view"===t.type){var i=t.getBoundingRect(),n=e.getData(),o=n.graph,a=0,r=n.getSum("value"),s=2*Math.PI/(r||n.count()),l=i.width/2+i.x,d=i.height/2+i.y,c=Math.min(i.width,i.height)/2;o.eachNode(function(e){var t=e.getValue("value");a+=s*(r?t:1)/2,e.setLayout([c*Math.cos(a)+l,c*Math.sin(a)+d]),a+=s*(r?t:1)/2}),n.setLayout({cx:l,cy:d}),o.eachEdge(function(e){var t,i=e.getModel().get("lineStyle.curveness")||0,n=se(e.node1.getLayout()),o=se(e.node2.getLayout()),a=(n[0]+o[0])/2,r=(n[1]+o[1])/2;+i&&(t=[l*(i*=3)+a*(1-i),d*i+r*(1-i)]),e.setLayout([n,o,t])})}}var bb=ce;ju(function(e){var a=e.findComponents({mainType:"legend"});a&&a.length&&e.eachSeriesByType("graph",function(e){var t=e.getCategoriesData(),n=e.getGraph().data,o=t.mapArray(t.getName);n.filterSelf(function(e){var t=n.getItemModel(e).getShallow("category");if(null!=t){"number"==typeof t&&(t=o[t]);for(var i=0;i<a.length;i++)if(!a[i].isSelected(t))return!1}return!0})},this)}),Yu(Vp("graph","circle",null)),Yu(function(e){var r={};e.eachSeriesByType("graph",function(n){var o=n.getCategoriesData(),i=n.getData(),a={};o.each(function(e){var t=o.getName(e);a["ec-"+t]=e;var i=o.getItemModel(e).get("itemStyle.color")||n.getColorFromPalette(t,r);o.setItemVisual(e,"color",i)}),o.count()&&i.each(function(e){var t=i.getItemModel(e).getShallow("category");null!=t&&("string"==typeof t&&(t=a["ec-"+t]),i.getItemVisual(e,"color",!0)||i.setItemVisual(e,"color",o.getItemVisual(t,"color")))})})}),Yu(function(e){e.eachSeriesByType("graph",function(e){var s=e.getGraph(),l=e.getEdgeData(),t=mb(e.get("edgeSymbol")),i=mb(e.get("edgeSymbolSize")),d="lineStyle.color".split("."),c="lineStyle.opacity".split(".");l.setVisual("fromSymbol",t&&t[0]),l.setVisual("toSymbol",t&&t[1]),l.setVisual("fromSymbolSize",i&&i[0]),l.setVisual("toSymbolSize",i&&i[1]),l.setVisual("color",e.get(d)),l.setVisual("opacity",e.get(c)),l.each(function(e){var t=l.getItemModel(e),i=s.getEdgeByIndex(e),n=mb(t.getShallow("symbol",!0)),o=mb(t.getShallow("symbolSize",!0)),a=t.get(d),r=t.get(c);switch(a){case"source":a=i.node1.getVisual("color");break;case"target":a=i.node2.getVisual("color")}n[0]&&i.setVisual("fromSymbol",n[0]),n[1]&&i.setVisual("toSymbol",n[1]),o[0]&&i.setVisual("fromSymbolSize",o[0]),o[1]&&i.setVisual("toSymbolSize",o[1]),i.setVisual("color",a),i.setVisual("opacity",r)})})}),Gu(function(e,t){e.eachSeriesByType("graph",function(e){var t=e.get("layout"),i=e.coordinateSystem;if(i&&"view"!==i.type){var n=e.getData(),o=[];O(i.dimensions,function(e){o=o.concat(n.mapDimension(e,!0))});for(var a=0;a<n.count();a++){for(var r=[],s=!1,l=0;l<o.length;l++){var d=n.get(o[l],a);isNaN(d)||(s=!0),r.push(d)}s?n.setItemLayout(a,i.dataToPoint(r)):n.setItemLayout(a,[NaN,NaN])}vb(n.graph)}else t&&"none"!==t||gb(e)})}),Gu(function(e){e.eachSeriesByType("graph",function(e){"circular"===e.get("layout")&&yb(e)})}),Gu(function(e){e.eachSeriesByType("graph",function(e){if(!(l=e.coordinateSystem)||"view"===l.type)if("force"===e.get("layout")){var u=e.preservedPoints||{},h=e.getGraph(),f=h.data,t=h.edgeData,i=e.getModel("force"),n=i.get("initLayout");e.preservedPoints?f.each(function(e){var t=f.getId(e);f.setItemLayout(e,u[t]||[NaN,NaN])}):n&&"none"!==n?"circular"===n&&yb(e):gb(e);var o=f.getDataExtent("value"),a=t.getDataExtent("value"),r=i.get("repulsion"),s=i.get("edgeLength");R(r)||(r=[r,r]),R(s)||(s=[s,s]),s=[s[1],s[0]];var l,d=f.mapArray("value",function(e,t){var i=f.getItemLayout(t),n=Ls(e,o,r);return isNaN(n)&&(n=(r[0]+r[1])/2),{w:n,rep:n,fixed:f.getItemModel(t).get("fixed"),p:!i||isNaN(i[0])||isNaN(i[1])?null:i}}),c=t.mapArray("value",function(e,t){var i=h.getEdgeByIndex(t),n=Ls(e,a,s);return isNaN(n)&&(n=(s[0]+s[1])/2),{n1:d[i.node1.dataIndex],n2:d[i.node2.dataIndex],d:n,curveness:i.getModel().get("lineStyle.curveness")||0}}),p=(l=e.coordinateSystem).getBoundingRect(),m=function(f,p,e){for(var t=e.rect,i=t.width,n=t.height,m=[t.x+i/2,t.y+n/2],g=null==e.gravity?.1:e.gravity,o=0;o<f.length;o++){var a=f[o];a.p||(a.p=ae(i*(Math.random()-.5)+m[0],n*(Math.random()-.5)+m[1])),a.pp=se(a.p),a.edges=null}var v=.6;return{warmUp:function(){v=.5},setFixed:function(e){f[e].fixed=!0},setUnfixed:function(e){f[e].fixed=!1},step:function(e){for(var t=[],i=f.length,n=0;n<p.length;n++){var o=p[n],a=o.n1;ue(t,(d=o.n2).p,a.p);var r=he(t)-o.d,s=d.w/(a.w+d.w);isNaN(s)&&(s=0),ve(t,t),!a.fixed&&bb(a.p,a.p,t,s*r*v),!d.fixed&&bb(d.p,d.p,t,-(1-s)*r*v)}for(n=0;n<i;n++)(h=f[n]).fixed||(ue(t,m,h.p),bb(h.p,h.p,t,g*v));for(n=0;n<i;n++){a=f[n];for(var l=n+1;l<i;l++){var d;ue(t,(d=f[l]).p,a.p),0===(r=he(t))&&(le(t,Math.random()-.5,Math.random()-.5),r=1);var c=(a.rep+d.rep)/r/r;!a.fixed&&bb(a.pp,a.pp,t,c),!d.fixed&&bb(d.pp,d.pp,t,-c)}}var u=[];for(n=0;n<i;n++){var h;(h=f[n]).fixed||(ue(u,h.p,h.pp),bb(h.p,h.p,u,v),re(h.pp,h.p))}v*=.992,e&&e(f,p,v<.01)}}}(d,c,{rect:p,gravity:i.get("gravity")}),g=m.step;m.step=function(c){for(var e=0,t=d.length;e<t;e++)d[e].fixed&&re(d[e].p,h.getNodeByIndex(e).getLayout());g(function(e,t,i){for(var n=0,o=e.length;n<o;n++)e[n].fixed||h.getNodeByIndex(n).setLayout(e[n].p),u[f.getId(n)]=e[n].p;for(n=0,o=t.length;n<o;n++){var a=t[n],r=h.getEdgeByIndex(n),s=a.n1.p,l=a.n2.p,d=r.getLayout();(d=d?d.slice():[])[0]=d[0]||[],d[1]=d[1]||[],re(d[0],s),re(d[1],l),+a.curveness&&(d[2]=[(s[0]+l[0])/2-(s[1]-l[1])*a.curveness,(s[1]+l[1])/2-(l[0]-s[0])*a.curveness]),r.setLayout(d)}c&&c(i)})},e.forceLayout=m,e.preservedPoints=u,m.step()}else e.forceLayout=null})}),$u("graphView",{create:function(e,m){var g=[];return e.eachSeriesByType("graph",function(e){var t,i,n,o=e.get("coordinateSystem");if(!o||"view"===o){var a=e.getData(),r=[],s=[];da(a.mapArray(function(e){var t=a.getItemModel(e);return[+t.get("x"),+t.get("y")]}),r,s),s[0]-r[0]==0&&(s[0]+=1,r[0]-=1),s[1]-r[1]==0&&(s[1]+=1,r[1]-=1);var l=(s[0]-r[0])/(s[1]-r[1]),d=(t=m,i=l,(n=e.getBoxLayoutParams()).aspect=i,xl(n,{width:t.getWidth(),height:t.getHeight()}));isNaN(l)&&(r=[d.x,d.y],s=[d.x+d.width,d.y+d.height]);var c=s[0]-r[0],u=s[1]-r[1],h=d.width,f=d.height,p=e.coordinateSystem=new yg;p.zoomLimit=e.get("scaleLimit"),p.setBoundingRect(r[0],r[1],c,u),p.setViewRect(d.x,d.y,h,f),p.setCenter(e.get("center")),p.setZoom(e.get("zoom")),g.push(p)}}),g}});Zd.extend({type:"series.gauge",getInitialData:function(e,t){var i=e.data||[];return R(i)||(i=[i]),e.data=i,Ym(this,["value"])},defaultOption:{zlevel:0,z:2,center:["50%","50%"],legendHoverLink:!0,radius:"75%",startAngle:225,endAngle:-45,clockwise:!0,min:0,max:100,splitNumber:10,axisLine:{show:!0,lineStyle:{color:[[.2,"#91c7ae"],[.8,"#63869e"],[1,"#c23531"]],width:30}},splitLine:{show:!0,length:30,lineStyle:{color:"#eee",width:2,type:"solid"}},axisTick:{show:!0,splitNumber:5,length:8,lineStyle:{color:"#eee",width:1,type:"solid"}},axisLabel:{show:!0,distance:5,color:"auto"},pointer:{show:!0,length:"80%",width:8},itemStyle:{color:"auto"},title:{show:!0,offsetCenter:[0,"-40%"],color:"#333",fontSize:15},detail:{show:!0,backgroundColor:"rgba(0,0,0,0)",borderWidth:0,borderColor:"#ccc",width:100,height:null,padding:[5,10],offsetCenter:[0,"40%"],color:"auto",fontSize:30}}});var xb=qa.extend({type:"echartsGaugePointer",shape:{angle:0,width:10,r:10,x:0,y:0},buildPath:function(e,t){var i=Math.cos,n=Math.sin,o=t.r,a=t.width,r=t.angle,s=t.x-i(r)*a*(o/3<=a?1:2),l=t.y-n(r)*a*(o/3<=a?1:2);r=t.angle-Math.PI/2,e.moveTo(s,l),e.lineTo(t.x+i(r)*a,t.y+n(r)*a),e.lineTo(t.x+i(t.angle)*o,t.y+n(t.angle)*o),e.lineTo(t.x-i(r)*a,t.y-n(r)*a),e.lineTo(s,l)}});function wb(e,t){return t&&("string"==typeof t?e=t.replace("{value}",null!=e?e:""):"function"==typeof t&&(e=t(e))),e}var _b=2*Math.PI,Cb=(lc.extend({type:"gauge",render:function(e,t,i){this.group.removeAll();var n,o,a,r,s,l,d=e.get("axisLine.lineStyle.color"),c=(o=i,a=(n=e).get("center"),r=o.getWidth(),s=o.getHeight(),l=Math.min(r,s),{cx:Ps(a[0],o.getWidth()),cy:Ps(a[1],o.getHeight()),r:Ps(n.get("radius"),l/2)});this._renderMain(e,t,i,d,c)},dispose:function(){},_renderMain:function(e,t,i,n,o){for(var a=this.group,r=e.getModel("axisLine").getModel("lineStyle"),s=e.get("clockwise"),l=-e.get("startAngle")/180*Math.PI,d=((f=-e.get("endAngle")/180*Math.PI)-l)%_b,c=l,u=r.get("width"),h=0;h<n.length;h++){var f,p=Math.min(Math.max(n[h][0],0),1),m=new pr({shape:{startAngle:c,endAngle:f=l+d*p,cx:o.cx,cy:o.cy,clockwise:s,r0:o.r-u,r:o.r},silent:!0});m.setStyle({fill:n[h][1]}),m.setStyle(r.getLineStyle(["color","borderWidth","borderColor"])),a.add(m),c=f}var g=function(e){if(e<=0)return n[0][1];for(var t=0;t<n.length;t++)if(n[t][0]>=e&&(0===t?0:n[t-1][0])<e)return n[t][1];return n[t-1][1]};if(!s){var v=l;l=f,f=v}this._renderTicks(e,t,i,g,o,l,f,s),this._renderPointer(e,t,i,g,o,l,f,s),this._renderTitle(e,t,i,g,o),this._renderDetail(e,t,i,g,o)},_renderTicks:function(e,t,i,n,o,a,r,s){for(var l=this.group,d=o.cx,c=o.cy,u=o.r,h=+e.get("min"),f=+e.get("max"),p=e.getModel("splitLine"),m=e.getModel("axisTick"),g=e.getModel("axisLabel"),v=e.get("splitNumber"),y=m.get("splitNumber"),b=Ps(p.get("length"),u),x=Ps(m.get("length"),u),w=a,_=(r-a)/v,C=_/y,S=p.getModel("lineStyle").getLineStyle(),T=m.getModel("lineStyle").getLineStyle(),k=0;k<=v;k++){var I=Math.cos(w),N=Math.sin(w);if(p.get("show")){var E=new wr({shape:{x1:I*u+d,y1:N*u+c,x2:I*(u-b)+d,y2:N*(u-b)+c},style:S,silent:!0});"auto"===S.stroke&&E.setStyle({stroke:n(k/v)}),l.add(E)}if(g.get("show")){var M=wb(Rs(k/v*(f-h)+h),g.get("formatter")),D=g.get("distance"),A=n(k/v);l.add(new cr({style:as({},g,{text:M,x:I*(u-b-D)+d,y:N*(u-b-D)+c,textVerticalAlign:N<-.4?"top":.4<N?"bottom":"middle",textAlign:I<-.4?"left":.4<I?"right":"center"},{autoColor:A}),silent:!0}))}if(m.get("show")&&k!==v){for(var L=0;L<=y;L++){I=Math.cos(w),N=Math.sin(w);var P=new wr({shape:{x1:I*u+d,y1:N*u+c,x2:I*(u-x)+d,y2:N*(u-x)+c},silent:!0,style:T});"auto"===T.stroke&&P.setStyle({stroke:n((k+L/y)/v)}),l.add(P),w+=C}w-=C}else w+=_}},_renderPointer:function(n,e,t,o,a,i,r,s){var l=this.group,d=this._data;if(n.get("pointer.show")){var c=[+n.get("min"),+n.get("max")],u=[i,r],h=n.getData(),f=h.mapDimension("value");h.diff(d).add(function(e){var t=new xb({shape:{angle:i}});fs(t,{shape:{angle:Ls(h.get(f,e),c,u,!0)}},n),l.add(t),h.setItemGraphicEl(e,t)}).update(function(e,t){var i=d.getItemGraphicEl(t);hs(i,{shape:{angle:Ls(h.get(f,e),c,u,!0)}},n),l.add(i),h.setItemGraphicEl(e,i)}).remove(function(e){var t=d.getItemGraphicEl(e);l.remove(t)}).execute(),h.eachItemGraphicEl(function(e,t){var i=h.getItemModel(t),n=i.getModel("pointer");e.setShape({x:a.cx,y:a.cy,width:Ps(n.get("width"),a.r),r:Ps(n.get("length"),a.r)}),e.useStyle(i.getModel("itemStyle").getItemStyle()),"auto"===e.style.fill&&e.setStyle("fill",o(Ls(h.get(f,t),c,[0,1],!0))),ns(e,i.getModel("emphasis.itemStyle").getItemStyle())}),this._data=h}else d&&d.eachItemGraphicEl(function(e){l.remove(e)})},_renderTitle:function(e,t,i,n,o){var a=e.getData(),r=a.mapDimension("value"),s=e.getModel("title");if(s.get("show")){var l=s.get("offsetCenter"),d=o.cx+Ps(l[0],o.r),c=o.cy+Ps(l[1],o.r),u=+e.get("min"),h=+e.get("max"),f=n(Ls(e.getData().get(r,0),[u,h],[0,1],!0));this.group.add(new cr({silent:!0,style:as({},s,{x:d,y:c,text:a.getName(0),textAlign:"center",textVerticalAlign:"middle"},{autoColor:f,forceRich:!0})}))}},_renderDetail:function(e,t,i,n,o){var a=e.getModel("detail"),r=+e.get("min"),s=+e.get("max");if(a.get("show")){var l=a.get("offsetCenter"),d=o.cx+Ps(l[0],o.r),c=o.cy+Ps(l[1],o.r),u=Ps(a.get("width"),o.r),h=Ps(a.get("height"),o.r),f=e.getData(),p=f.get(f.mapDimension("value"),0),m=n(Ls(p,[r,s],[0,1],!0));this.group.add(new cr({silent:!0,style:as({},a,{x:d,y:c,text:wb(p,a.get("formatter")),textWidth:isNaN(u)?null:u,textHeight:isNaN(h)?null:h,textAlign:"center",textVerticalAlign:"middle"},{autoColor:m,forceRich:!0})}))}}}),Ju({type:"series.funnel",init:function(e){Cb.superApply(this,"init",arguments),this.legendDataProvider=function(){return this.getRawData()},this._defaultLabelLine(e)},getInitialData:function(e,t){return Ym(this,["value"])},_defaultLabelLine:function(e){lo(e,"labelLine",["show"]);var t=e.labelLine,i=e.emphasis.labelLine;t.show=t.show&&e.label.show,i.show=i.show&&e.emphasis.label.show},getDataParams:function(e){var t=this.getData(),i=Cb.superCall(this,"getDataParams",e),n=t.mapDimension("value"),o=t.getSum(n);return i.percent=o?+(t.get(n,e)/o*100).toFixed(2):0,i.$vars.push("percent"),i},defaultOption:{zlevel:0,z:2,legendHoverLink:!0,left:80,top:60,right:80,bottom:60,minSize:"0%",maxSize:"100%",sort:"descending",gap:0,funnelAlign:"center",label:{show:!0,position:"outer"},labelLine:{show:!0,length:20,lineStyle:{width:1,type:"solid"}},itemStyle:{borderColor:"#fff",borderWidth:1},emphasis:{label:{show:!0}}}}));function Sb(e,t){ni.call(this);var i=new yr,n=new br,o=new cr;function a(){n.ignore=n.hoverIgnore,o.ignore=o.hoverIgnore}function r(){n.ignore=n.normalIgnore,o.ignore=o.normalIgnore}this.add(i),this.add(n),this.add(o),this.updateData(e,t,!0),this.on("emphasis",a).on("normal",r).on("mouseover",a).on("mouseout",r)}var Tb=Sb.prototype,kb=["itemStyle","opacity"];Tb.updateData=function(e,t,i){var n=this.childAt(0),o=e.hostModel,a=e.getItemModel(t),r=e.getItemLayout(t),s=e.getItemModel(t).get(kb);s=null==s?1:s,n.useStyle({}),i?(n.setShape({points:r.points}),n.setStyle({opacity:0}),fs(n,{style:{opacity:s}},o,t)):hs(n,{style:{opacity:s},shape:{points:r.points}},o,t);var l=a.getModel("itemStyle"),d=e.getItemVisual(t,"color");n.setStyle(E({lineJoin:"round",fill:d},l.getItemStyle(["opacity"]))),n.hoverStyle=l.getModel("emphasis").getItemStyle(),this._updateLabel(e,t),ns(this)},Tb._updateLabel=function(e,t){var i=this.childAt(1),n=this.childAt(2),o=e.hostModel,a=e.getItemModel(t),r=e.getItemLayout(t).label,s=e.getItemVisual(t,"color");hs(i,{shape:{points:r.linePoints||r.linePoints}},o,t),hs(n,{style:{x:r.x,y:r.y}},o,t),n.attr({rotation:r.rotation,origin:[r.x,r.y],z2:10});var l=a.getModel("label"),d=a.getModel("emphasis.label"),c=a.getModel("labelLine"),u=a.getModel("emphasis.labelLine");s=e.getItemVisual(t,"color");os(n.style,n.hoverStyle={},l,d,{labelFetcher:e.hostModel,labelDataIndex:t,defaultText:e.getName(t),autoColor:s,useInsideStyle:!!r.inside},{textAlign:r.textAlign,textVerticalAlign:r.verticalAlign}),n.ignore=n.normalIgnore=!l.get("show"),n.hoverIgnore=!d.get("show"),i.ignore=i.normalIgnore=!c.get("show"),i.hoverIgnore=!u.get("show"),i.setStyle({stroke:s}),i.setStyle(c.getModel("lineStyle").getLineStyle()),i.hoverStyle=u.getModel("lineStyle").getLineStyle()},_(Sb,ni);lc.extend({type:"funnel",render:function(e,t,i){var n=e.getData(),o=this._data,a=this.group;n.diff(o).add(function(e){var t=new Sb(n,e);n.setItemGraphicEl(e,t),a.add(t)}).update(function(e,t){var i=o.getItemGraphicEl(t);i.updateData(n,e),a.add(i),n.setItemGraphicEl(e,i)}).remove(function(e){var t=o.getItemGraphicEl(e);a.remove(t)}).execute(),this._data=n},remove:function(){this.group.removeAll(),this._data=null},dispose:function(){}});Yu(tg("funnel")),Gu(function(e,C,t){e.eachSeriesByType("funnel",function(e){var t,o=e.getData(),a=o.mapDimension("value"),i=e.get("sort"),r=(t=C,xl(e.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()})),n=function(e,t){for(var i=e.mapDimension("value"),n=e.mapArray(i,function(e){return e}),o=[],a="ascending"===t,r=0,s=e.count();r<s;r++)o[r]=r;return"function"==typeof t?o.sort(t):"none"!==t&&o.sort(function(e,t){return a?n[e]-n[t]:n[t]-n[e]}),o}(o,i),s=[Ps(e.get("minSize"),r.width),Ps(e.get("maxSize"),r.width)],l=o.getDataExtent(a),d=e.get("min"),c=e.get("max");null==d&&(d=Math.min(l[0],0)),null==c&&(c=l[1]);var m,u=e.get("funnelAlign"),h=e.get("gap"),f=(r.height-h*(o.count()-1))/o.count(),p=r.y,g=function(e,t){var i,n=Ls(o.get(a,e)||0,[d,c],s,!0);switch(u){case"left":i=r.x;break;case"center":i=r.x+(r.width-n)/2;break;case"right":i=r.x+r.width-n}return[[i,t],[i+n,t]]};"ascending"===i&&(f=-f,h=-h,p+=r.height,n=n.reverse());for(var v=0;v<n.length;v++){var y=n[v],b=n[v+1],x=o.getItemModel(y).get("itemStyle.height");null==x?x=f:(x=Ps(x,r.height),"ascending"===i&&(x=-x));var w=g(y,p),_=g(b,p+x);p+=x+h,o.setItemLayout(y,{points:w.concat(_.slice().reverse())})}(m=o).each(function(e){var t,i,n,o,a=m.getItemModel(e),r=a.getModel("label").get("position"),s=a.getModel("labelLine"),l=m.getItemLayout(e),d=l.points,c="inner"===r||"inside"===r||"center"===r;if(c)t="center",o=[[i=(d[0][0]+d[1][0]+d[2][0]+d[3][0])/4,n=(d[0][1]+d[1][1]+d[2][1]+d[3][1])/4],[i,n]];else{var u,h,f,p=s.get("length");t="left"===r?(u=(d[3][0]+d[0][0])/2,h=(d[3][1]+d[0][1])/2,i=(f=u-p)-5,"right"):(u=(d[1][0]+d[2][0])/2,h=(d[1][1]+d[2][1])/2,i=(f=u+p)+5,"left"),o=[[u,h],[f,h]],n=h}l.label={linePoints:o,x:i,y:n,verticalAlign:"middle",textAlign:t,inside:c}})})}),ju(rg("funnel"));var Ib=function(e,t,i,n,o){np.call(this,e,t,i),this.type=n||"value",this.axisIndex=o};Ib.prototype={constructor:Ib,model:null,isHorizontal:function(){return"horizontal"!==this.coordinateSystem.getModel().get("layout")}},_(Ib,np);var Nb=function(e,t,i,n,o,a){t[0]=Mb(t[0],i),t[1]=Mb(t[1],i),e=e||0;var r=i[1]-i[0];null!=o&&(o=Mb(o,[0,r])),null!=a&&(a=Math.max(a,null!=o?o:0)),"all"===n&&(o=a=Math.abs(t[1]-t[0]),n=0);var s=Eb(t,n);t[n]+=e;var l=o||0,d=i.slice();s.sign<0?d[0]+=l:d[1]-=l,t[n]=Mb(t[n],d);var c=Eb(t,n);null!=o&&(c.sign!==s.sign||c.span<o)&&(t[1-n]=t[n]+s.sign*o);c=Eb(t,n);return null!=a&&c.span>a&&(t[1-n]=t[n]+c.sign*a),t};function Eb(e,t){var i=e[t]-e[1-t];return{span:Math.abs(i),sign:0<i?-1:i<0?1:t?-1:1}}function Mb(e,t){return Math.min(t[1],Math.max(t[0],e))}var Db=O,Ab=Math.min,Lb=Math.max,Pb=Math.floor,Rb=Math.ceil,Ub=Rs,Ob=Math.PI;function Bb(e,t,i){this._axesMap=ee(),this._axesLayout={},this.dimensions=e.dimensions,this._rect,this._model=e,this._init(e,t,i)}function zb(e,t){return Ab(Lb(e,t[0]),t[1])}Bb.prototype={type:"parallel",constructor:Bb,_init:function(e,r,t){var i=e.dimensions,s=e.parallelAxisIndex;Db(i,function(e,t){var i=s[t],n=r.getComponent("parallelAxis",i),o=this._axesMap.set(e,new Ib(e,Tf(n),[0,0],n.get("type"),i)),a="category"===o.type;o.onBand=a&&n.get("boundaryGap"),o.inverse=n.get("inverse"),(n.axis=o).model=n,o.coordinateSystem=n.coordinateSystem=this},this)},update:function(e,t){this._updateAxesFromSeries(this._model,e)},containPoint:function(e){var t=this._makeLayoutInfo(),i=t.axisBase,n=t.layoutBase,o=t.pixelDimIndex,a=e[1-o],r=e[o];return i<=a&&a<=i+t.axisLength&&n<=r&&r<=n+t.layoutLength},getModel:function(){return this._model},_updateAxesFromSeries:function(t,n){n.eachSeries(function(e){if(t.contains(e,n)){var i=e.getData();Db(this.dimensions,function(e){var t=this._axesMap.get(e);t.scale.unionExtentFromData(i,i.mapDimension(e)),Sf(t.scale,t.model)},this)}},this)},resize:function(e,t){this._rect=xl(e.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()}),this._layoutAxes()},getRect:function(){return this._rect},_makeLayoutInfo:function(){var e,t=this._model,i=this._rect,n=["x","y"],o=["width","height"],a=t.get("layout"),r="horizontal"===a?0:1,s=i[o[r]],l=[0,s],d=this.dimensions.length,c=zb(t.get("axisExpandWidth"),l),u=zb(t.get("axisExpandCount")||0,[0,d]),h=t.get("axisExpandable")&&3<d&&u<d&&1<u&&0<c&&0<s,f=t.get("axisExpandWindow");f?(e=zb(f[1]-f[0],l),f[1]=f[0]+e):(e=zb(c*(u-1),l),(f=[c*(t.get("axisExpandCenter")||Pb(d/2))-e/2])[1]=f[0]+e);var p=(s-e)/(d-u);p<3&&(p=0);var m=[Pb(Ub(f[0]/c,1))+1,Rb(Ub(f[1]/c,1))-1],g=p/c*f[0];return{layout:a,pixelDimIndex:r,layoutBase:i[n[r]],layoutLength:s,axisBase:i[n[1-r]],axisLength:i[o[1-r]],axisExpandable:h,axisExpandWidth:c,axisCollapseWidth:p,axisExpandWindow:f,axisCount:d,winInnerIndices:m,axisExpandWindow0Pos:g}},_layoutAxes:function(){var l=this._rect,e=this._axesMap,t=this.dimensions,d=this._makeLayoutInfo(),c=d.layout;e.each(function(e){var t=[0,d.axisLength],i=e.inverse?1:0;e.setExtent(t[i],t[1-i])}),Db(t,function(e,t){var i=(d.axisExpandable?function(e,t){var i,n,o=t.layoutLength,a=t.axisExpandWidth,r=t.axisCount,s=t.axisCollapseWidth,l=t.winInnerIndices,d=s,c=!1;e<l[0]?(i=e*s,n=s):e<=l[1]?(i=t.axisExpandWindow0Pos+e*a-t.axisExpandWindow[0],d=a,c=!0):(i=o-(r-1-e)*s,n=s);return{position:i,axisNameAvailableWidth:d,axisLabelShow:c,nameTruncateMaxWidth:n}}:function(e,t){var i=t.layoutLength/(t.axisCount-1);return{position:i*e,axisNameAvailableWidth:i,axisLabelShow:!0}})(t,d),n={horizontal:{x:i.position,y:d.axisLength},vertical:{x:0,y:i.position}},o={horizontal:Ob/2,vertical:0},a=[n[c].x+l.x,n[c].y+l.y],r=o[c],s=Oe();Ve(s,s,r),He(s,s,a),this._axesLayout[e]={position:a,rotation:r,transform:s,axisNameAvailableWidth:i.axisNameAvailableWidth,axisLabelShow:i.axisLabelShow,nameTruncateMaxWidth:i.nameTruncateMaxWidth,tickDirection:1,labelDirection:1}},this)},getAxis:function(e){return this._axesMap.get(e)},dataToPoint:function(e,t){return this.axisCoordToPoint(this._axesMap.get(t).dataToCoord(e),t)},eachActiveState:function(t,e,i,n){null==i&&(i=0),null==n&&(n=t.count());var o=this._axesMap,a=this.dimensions,r=[],s=[];O(a,function(e){r.push(t.mapDimension(e)),s.push(o.get(e).model)});for(var l=this.hasAxisBrushed(),d=i;d<n;d++){var c;if(l){c="active";for(var u=t.getValues(r,d),h=0,f=a.length;h<f;h++){if("inactive"===s[h].getActiveState(u[h])){c="inactive";break}}}else c="normal";e(c,d)}},hasAxisBrushed:function(){for(var e=this.dimensions,t=this._axesMap,i=!1,n=0,o=e.length;n<o;n++)"normal"!==t.get(e[n]).model.getActiveState()&&(i=!0);return i},axisCoordToPoint:function(e,t){return ms([e,0],this._axesLayout[t].transform)},getAxisLayout:function(e){return N(this._axesLayout[e])},getSlidedAxisExpandWindow:function(e){var t=this._makeLayoutInfo(),i=t.pixelDimIndex,n=t.axisExpandWindow.slice(),o=n[1]-n[0],a=[0,t.axisExpandWidth*(t.axisCount-1)];if(!this.containPoint(e))return{behavior:"none",axisExpandWindow:n};var r,s=e[i]-t.layoutBase-t.axisExpandWindow0Pos,l="slide",d=t.axisCollapseWidth,c=this._model.get("axisExpandSlideTriggerArea"),u=null!=c[0];if(d)u&&d&&s<o*c[0]?(l="jump",r=s-o*c[2]):u&&d&&s>o*(1-c[0])?(l="jump",r=s-o*(1-c[2])):0<=(r=s-o*c[1])&&(r=s-o*(1-c[1]))<=0&&(r=0),(r*=t.axisExpandWidth/d)?Nb(r,n,a,"all"):l="none";else{o=n[1]-n[0];(n=[Lb(0,a[1]*s/o-o/2)])[1]=Ab(a[1],n[0]+o),n[0]=n[1]-o}return{axisExpandWindow:n,behavior:l}}},od.register("parallel",{create:function(n,o){var a=[];return n.eachComponent("parallel",function(e,t){var i=new Bb(e,n,o);i.name="parallel_"+t,i.resize(e,o),(e.coordinateSystem=i).model=e,a.push(i)}),n.eachSeries(function(e){if("parallel"===e.get("coordinateSystem")){var t=n.queryComponents({mainType:"parallel",index:e.get("parallelIndex"),id:e.get("parallelId")})[0];e.coordinateSystem=t.coordinateSystem}}),a}});var Fb=Nl.extend({type:"baseParallelAxis",axis:null,activeIntervals:[],getAreaSelectStyle:function(){return Do([["fill","color"],["lineWidth","borderWidth"],["stroke","borderColor"],["width","width"],["opacity","opacity"]])(this.getModel("areaSelectStyle"))},setActiveIntervals:function(e){var t=this.activeIntervals=N(e);if(t)for(var i=t.length-1;0<=i;i--)Us(t[i])},getActiveState:function(e){var t=this.activeIntervals;if(!t.length)return"normal";if(null==e||isNaN(e))return"inactive";if(1===t.length){var i=t[0];if(i[0]<=e&&e<=i[1])return"active"}else for(var n=0,o=t.length;n<o;n++)if(t[n][0]<=e&&e<=t[n][1])return"active";return"inactive"}});m(Fb.prototype,Nf),Qp("parallel",Fb,function(e,t){return t.type||(t.data?"category":"value")},{type:"value",dim:null,areaSelectStyle:{width:20,borderWidth:1,borderColor:"rgba(160,197,232)",color:"rgba(160,197,232)",opacity:.3},realtime:!0,z:10}),Nl.extend({type:"parallel",dependencies:["parallelAxis"],coordinateSystem:null,dimensions:null,parallelAxisIndex:null,layoutMode:"box",defaultOption:{zlevel:0,z:0,left:80,top:60,right:80,bottom:60,layout:"horizontal",axisExpandable:!1,axisExpandCenter:null,axisExpandCount:0,axisExpandWidth:50,axisExpandRate:17,axisExpandDebounce:50,axisExpandSlideTriggerArea:[-.15,.05,.4],axisExpandTriggerOn:"click",parallelAxisDefault:null},init:function(){Nl.prototype.init.apply(this,arguments),this.mergeOption({})},mergeOption:function(e){var t=this.option;e&&m(t,e,!0),this._initDimensions()},contains:function(e,t){var i=e.get("parallelIndex");return null!=i&&t.getComponent("parallel",i)===this},setAxisExpand:function(t){O(["axisExpandable","axisExpandCenter","axisExpandCount","axisExpandWidth","axisExpandWindow"],function(e){t.hasOwnProperty(e)&&(this.option[e]=t[e])},this)},_initDimensions:function(){var t=this.dimensions=[],i=this.parallelAxisIndex=[];O(T(this.dependentModels.parallelAxis,function(e){return(e.get("parallelIndex")||0)===this.componentIndex},this),function(e){t.push("dim"+e.get("dim")),i.push(e.componentIndex)})}});Wu({type:"axisAreaSelect",event:"axisAreaSelected"},function(t,e){e.eachComponent({mainType:"parallelAxis",query:t},function(e){e.axis.model.setActiveIntervals(t.intervals)})}),Wu("parallelAxisExpand",function(t,e){e.eachComponent({mainType:"parallel",query:t},function(e){e.setAxisExpand(t)})});var Hb=L,Vb=O,jb=M,Wb=Math.min,$b=Math.max,Gb=Math.pow,Yb=1e4,qb=6,Zb=6,Xb={w:[0,0],e:[0,1],n:[1,0],s:[1,1]},Kb={w:"ew",e:"ew",n:"ns",s:"ns",ne:"nesw",sw:"nesw",nw:"nwse",se:"nwse"},Jb={brushStyle:{lineWidth:2,stroke:"rgba(0,0,0,0.3)",fill:"rgba(0,0,0,0.1)"},transformable:!0,brushMode:"single",removeOnClick:!1},Qb=0;function ex(e){I&&q(e),Me.call(this),this._zr=e,this.group=new ni,this._brushType,this._brushOption,this._panels,this._track=[],this._dragging,this._covers=[],this._creatingCover,this._creatingPanel,this._enableGlobalPan,I&&this._mounted,this._uid="brushController_"+Qb++,this._handlers={},Vb(Ix,function(e,t){this._handlers[t]=A(e,this)},this)}function tx(e,t){var i=Ex[t.brushType].createCover(e,t);return i.__brushOption=t,ox(i,t),e.group.add(i),i}function ix(e,t){var i=rx(t);return i.endCreating&&(i.endCreating(e,t),ox(t,t.__brushOption)),t}function nx(e,t){var i=t.__brushOption;rx(t).updateCoverShape(e,t,i.range,i)}function ox(e,t){var i=t.z;null==i&&(i=Yb),e.traverse(function(e){e.z=i,e.z2=i})}function ax(e,t){rx(t).updateCommon(e,t),nx(e,t)}function rx(e){return Ex[e.__brushOption.brushType]}function sx(e,t,i){var n,o=e._panels;if(!o)return!0;var a=e._transform;return Vb(o,function(e){e.isTargetByCursor(t,i,a)&&(n=e)}),n}function lx(e,t){var i=e._panels;if(!i)return!0;var n=t.__brushOption.panelId;return null==n||i[n]}function dx(t){var e=t._covers,i=e.length;return Vb(e,function(e){t.group.remove(e)},t),e.length=0,!!i}function cx(e,t){var i=jb(e._covers,function(e){var t=e.__brushOption,i=N(t.range);return{brushType:t.brushType,panelId:t.panelId,range:i}});e.trigger("brush",i,{isEnd:!!t.isEnd,removeOnClick:!!t.removeOnClick})}function ux(e){var t=e.length-1;return t<0&&(t=0),[e[0],e[t]]}function hx(t,i,e,n){var o=new ni;return o.add(new xr({name:"main",style:gx(e),silent:!0,draggable:!0,cursor:"move",drift:Hb(t,i,o,"nswe"),ondragend:Hb(cx,i,{isEnd:!0})})),Vb(n,function(e){o.add(new xr({name:e,style:{opacity:0},draggable:!0,silent:!0,invisible:!0,drift:Hb(t,i,o,e),ondragend:Hb(cx,i,{isEnd:!0})}))}),o}function fx(e,t,i,n){var o=n.brushStyle.lineWidth||0,a=$b(o,Zb),r=i[0][0],s=i[1][0],l=r-o/2,d=s-o/2,c=i[0][1],u=i[1][1],h=c-a+o/2,f=u-a+o/2,p=c-r,m=u-s,g=p+o,v=m+o;mx(e,t,"main",r,s,p,m),n.transformable&&(mx(e,t,"w",l,d,a,v),mx(e,t,"e",h,d,a,v),mx(e,t,"n",l,d,g,a),mx(e,t,"s",l,f,g,a),mx(e,t,"nw",l,d,a,a),mx(e,t,"ne",h,d,a,a),mx(e,t,"sw",l,f,a,a),mx(e,t,"se",h,f,a,a))}function px(n,o){var e=o.__brushOption,a=e.transformable,t=o.childAt(0);t.useStyle(gx(e)),t.attr({silent:!a,cursor:a?"move":"default"}),Vb(["w","e","n","s","se","sw","ne","nw"],function(e){var t=o.childOfName(e),i=function e(t,i){{if(1<i.length){i=i.split("");var n=[e(t,i[0]),e(t,i[1])];return("e"===n[0]||"w"===n[0])&&n.reverse(),n.join("")}var o={w:"left",e:"right",n:"top",s:"bottom"},a={left:"w",right:"e",top:"n",bottom:"s"},n=gs(o[i],ps(t.group));return a[n]}}(n,e);t&&t.attr({silent:!a,invisible:!a,cursor:a?Kb[i]+"-resize":null})})}function mx(e,t,i,n,o,a,r){var s,l,d,c,u,h=t.childOfName(i);h&&h.setShape((s=_x(e,t,[[n,o],[n+a,o+r]]),l=Wb(s[0][0],s[1][0]),d=Wb(s[0][1],s[1][1]),c=$b(s[0][0],s[1][0]),u=$b(s[0][1],s[1][1]),{x:l,y:d,width:c-l,height:u-d}))}function gx(e){return E({strokeNoScale:!0},e.brushStyle)}function vx(e,t,i,n){var o=[Wb(e,i),Wb(t,n)],a=[$b(e,i),$b(t,n)];return[[o[0],a[0]],[o[1],a[1]]]}function yx(e,t,i,n,o,a,r,s){var l=n.__brushOption,d=e(l.range),c=xx(i,a,r);Vb(o.split(""),function(e){var t=Xb[e];d[t[0]][t[1]]+=c[t[0]]}),l.range=t(vx(d[0][0],d[1][0],d[0][1],d[1][1])),ax(i,n),cx(i,{isEnd:!1})}function bx(e,t,i,n,o){var a=t.__brushOption.range,r=xx(e,i,n);Vb(a,function(e){e[0]+=r[0],e[1]+=r[1]}),ax(e,t),cx(e,{isEnd:!1})}function xx(e,t,i){var n=e.group,o=n.transformCoordToLocal(t,i),a=n.transformCoordToLocal(0,0);return[o[0]-a[0],o[1]-a[1]]}function _x(e,t,i){var n=lx(e,t);return n&&!0!==n?n.clipPath(i,e._transform):N(i)}function Cx(e){var t=e.event;t.preventDefault&&t.preventDefault()}function Sx(e,t,i){return e.childOfName("main").contain(t,i)}function Tx(e,t,i,n){var o,a=e._creatingCover,r=e._creatingPanel,s=e._brushOption;if(e._track.push(i.slice()),function(e){var t=e._track;if(!t.length)return!1;var i=t[t.length-1],n=t[0],o=i[0]-n[0],a=i[1]-n[1],r=Gb(o*o+a*a,.5);return qb<r}(e)||a){if(r&&!a){"single"===s.brushMode&&dx(e);var l=N(s);l.brushType=kx(l.brushType,r),l.panelId=!0===r?null:r.panelId,a=e._creatingCover=tx(e,l),e._covers.push(a)}if(a){var d=Ex[kx(e._brushType,r)];a.__brushOption.range=d.getCreatingRange(_x(e,a,e._track)),n&&(ix(e,a),d.updateCommon(e,a)),nx(e,a),o={isEnd:n}}}else n&&"single"===s.brushMode&&s.removeOnClick&&sx(e,t,i)&&dx(e)&&(o={isEnd:n,removeOnClick:!0});return o}function kx(e,t){return"auto"===e?(I&&q(t&&t.defaultBrushType,'MUST have defaultBrushType when brushType is "atuo"'),t.defaultBrushType):e}ex.prototype={constructor:ex,enableBrush:function(e){var t,i,n,o,a,r;return I&&q(this._mounted),this._brushType&&(i=(t=this)._zr,n=i,o="globalPan",a=t._uid,(r=Og(n))[o]===a&&(r[o]=null),Vb(t._handlers,function(e,t){i.off(t,e)}),t._brushType=t._brushOption=null),e.brushType&&function(e,t){var i=e._zr;e._enableGlobalPan||(n=i,o="globalPan",a=e._uid,Og(n)[o]=a);var n,o,a;Vb(e._handlers,function(e,t){i.on(t,e)}),e._brushType=t.brushType,e._brushOption=m(N(Jb),t,!0)}(this,e),this},setPanels:function(e){if(e&&e.length){var t=this._panels={};O(e,function(e){t[e.panelId]=N(e)})}else this._panels=null;return this},mount:function(e){e=e||{},I&&(this._mounted=!0),this._enableGlobalPan=e.enableGlobalPan;var t=this.group;return this._zr.add(t),t.attr({position:e.position||[0,0],rotation:e.rotation||0,scale:e.scale||[1,1]}),this._transform=t.getLocalTransform(),this},eachCover:function(e,t){Vb(this._covers,e,t)},updateCovers:function(o){I&&q(this._mounted),o=M(o,function(e){return m(N(Jb),e,!0)});var i="\0-brush-index-",a=this._covers,r=this._covers=[],s=this,l=this._creatingCover;return new ih(a,o,function(e,t){return n(e.__brushOption,t)},n).add(e).update(e).remove(function(e){a[e]!==l&&s.group.remove(a[e])}).execute(),this;function n(e,t){return(null!=e.id?e.id:i+t)+"-"+e.brushType}function e(e,t){var i=o[e];if(null!=t&&a[t]===l)r[e]=a[t];else{var n=r[e]=null!=t?(a[t].__brushOption=i,a[t]):ix(s,tx(s,i));ax(s,n)}}},unmount:function(){if(!I||this._mounted)return this.enableBrush(!1),dx(this),this._zr.remove(this.group),I&&(this._mounted=!1),this},dispose:function(){this.unmount(),this.off()}},C(ex,Me);var Ix={mousedown:function(e){if(this._dragging)Nx.call(this,e);else if(!e.target||!e.target.draggable){Cx(e);var t=this.group.transformCoordToLocal(e.offsetX,e.offsetY);this._creatingCover=null,(this._creatingPanel=sx(this,e,t))&&(this._dragging=!0,this._track=[t.slice()])}},mousemove:function(e){var t=this.group.transformCoordToLocal(e.offsetX,e.offsetY);if(function(e,t,i){if(e._brushType){var n=e._zr,o=e._covers,a=sx(e,t,i);if(!e._dragging)for(var r=0;r<o.length;r++){var s=o[r].__brushOption;if(a&&(!0===a||s.panelId===a.panelId)&&Ex[s.brushType].contain(o[r],i[0],i[1]))return}a&&n.setCursorStyle("crosshair")}}(this,e,t),this._dragging){Cx(e);var i=Tx(this,e,t,!1);i&&cx(this,i)}},mouseup:Nx};function Nx(e){if(this._dragging){Cx(e);var t=Tx(this,e,this.group.transformCoordToLocal(e.offsetX,e.offsetY),!0);this._dragging=!1,this._track=[],this._creatingCover=null,t&&cx(this,t)}}var Ex={lineX:Mx(0),lineY:Mx(1),rect:{createCover:function(e,t){return hx(Hb(yx,function(e){return e},function(e){return e}),e,t,["w","e","n","s","se","sw","ne","nw"])},getCreatingRange:function(e){var t=ux(e);return vx(t[1][0],t[1][1],t[0][0],t[0][1])},updateCoverShape:function(e,t,i,n){fx(e,t,i,n)},updateCommon:px,contain:Sx},polygon:{createCover:function(e,t){var i=new ni;return i.add(new br({name:"main",style:gx(t),silent:!0})),i},getCreatingRange:function(e){return e},endCreating:function(e,t){t.remove(t.childAt(0)),t.add(new yr({name:"main",draggable:!0,drift:Hb(bx,e,t),ondragend:Hb(cx,e,{isEnd:!0})}))},updateCoverShape:function(e,t,i,n){t.childAt(0).setShape({points:_x(e,t,i)})},updateCommon:px,contain:Sx}};function Mx(l){return{createCover:function(e,t){return hx(Hb(yx,function(e){var t=[e,[0,100]];return l&&t.reverse(),t},function(e){return e[l]}),e,t,[["w","e"],["n","s"]][l])},getCreatingRange:function(e){var t=ux(e);return[Wb(t[0][l],t[1][l]),$b(t[0][l],t[1][l])]},updateCoverShape:function(e,t,i,n){var o,a=lx(e,t);if(!0!==a&&a.getLinearBrushOtherExtent)o=a.getLinearBrushOtherExtent(l,e._transform);else{var r=e._zr;o=[0,[r.getWidth(),r.getHeight()][1-l]]}var s=[i,o];l&&s.reverse(),fx(e,t,s,n)},updateCommon:px,contain:Sx}}function Dx(i){return i=Px(i),function(e,t){return ys(e,i)}}function Ax(o,a){return o=Px(o),function(e){var t=null!=a?a:e,i=t?o.width:o.height,n=t?o.x:o.y;return[n,n+(i||0)]}}function Lx(n,o,a){return n=Px(n),function(e,t,i){return n.contain(t[0],t[1])&&!Zg(e,o,a)}}function Px(e){return ii.create(e)}var Rx=["axisLine","axisTickLabel","axisName"],Ux=Ku({type:"parallelAxis",init:function(e,t){Ux.superApply(this,"init",arguments),(this._brushController=new ex(t.getZr())).on("brush",A(this._onBrush,this))},render:function(e,t,i,n){if(o=e,a=t,!(r=n)||"axisAreaSelect"!==r.type||a.findComponents({mainType:"parallelAxis",query:r})[0]!==o){var o,a,r;this.axisModel=e,this.api=i,this.group.removeAll();var s=this._axisGroup;if(this._axisGroup=new ni,this.group.add(this._axisGroup),e.get("show")){var l,d=(l=e,t.getComponent("parallel",l.get("parallelIndex"))),c=d.coordinateSystem,u=e.getAreaSelectStyle(),h=u.width,f=e.axis.dim,p=D({strokeContainThreshold:h},c.getAxisLayout(f)),m=new fm(e,p);O(Rx,m.add,m),this._axisGroup.add(m.getGroup()),this._refreshBrushController(p,u,e,d,h,i);var g=n&&!1===n.animation?null:e;vs(s,this._axisGroup,g)}}},_refreshBrushController:function(e,t,i,n,o,a){var r,s,l=i.axis.getExtent(),d=l[1]-l[0],c=Math.min(30,.1*Math.abs(d)),u=ii.create({x:l[0],y:-o/2,width:d,height:o});u.x-=c,u.width+=2*c,this._brushController.mount({enableGlobalPan:!0,rotation:e.rotation,position:e.position}).setPanels([{panelId:"pl",clipPath:Dx(u),isTargetByCursor:Lx(u,a,n),getLinearBrushOtherExtent:Ax(u,0)}]).enableBrush({brushType:"lineX",brushStyle:t,removeOnClick:!0}).updateCovers((s=(r=i).axis,M(r.activeIntervals,function(e){return{brushType:"lineX",panelId:"pl",range:[s.dataToCoord(e[0],!0),s.dataToCoord(e[1],!0)]}})))},_onBrush:function(e,t){var i=this.axisModel,n=i.axis,o=M(e,function(e){return[n.coordToData(e.range[0],!0),n.coordToData(e.range[1],!0)]});(!i.option.realtime===t.isEnd||t.removeOnClick)&&this.api.dispatchAction({type:"axisAreaSelect",parallelAxisId:i.id,intervals:o})},dispose:function(){this._brushController.dispose()}});Ku({type:"parallel",render:function(e,t,i){this._model=e,this._api=i,this._handlers||(this._handlers={},O(Ox,function(e,t){i.getZr().on(t,this._handlers[t]=A(e,this))},this)),bc(this,"_throttledDispatchExpand",e.get("axisExpandRate"),"fixRate")},dispose:function(e,i){O(this._handlers,function(e,t){i.getZr().off(t,e)}),this._handlers=null},_throttledDispatchExpand:function(e){this._dispatchExpand(e)},_dispatchExpand:function(e){e&&this._api.dispatchAction(D({type:"parallelAxisExpand"},e))}});var Ox={mousedown:function(e){Bx(this,"click")&&(this._mouseDownPoint=[e.offsetX,e.offsetY])},mouseup:function(e){var t=this._mouseDownPoint;if(Bx(this,"click")&&t){var i=[e.offsetX,e.offsetY];if(5<Math.pow(t[0]-i[0],2)+Math.pow(t[1]-i[1],2))return;var n=this._model.coordinateSystem.getSlidedAxisExpandWindow([e.offsetX,e.offsetY]);"none"!==n.behavior&&this._dispatchExpand({axisExpandWindow:n.axisExpandWindow})}this._mouseDownPoint=null},mousemove:function(e){if(!this._mouseDownPoint&&Bx(this,"mousemove")){var t=this._model,i=t.coordinateSystem.getSlidedAxisExpandWindow([e.offsetX,e.offsetY]),n=i.behavior;"jump"===n&&this._throttledDispatchExpand.debounceNextCall(t.get("axisExpandDebounce")),this._throttledDispatchExpand("none"===n?null:{axisExpandWindow:i.axisExpandWindow,animation:"jump"===n&&null})}}};function Bx(e,t){var i=e._model;return i.get("axisExpandable")&&i.get("axisExpandTriggerOn")===t}Vu(function(e){var n;!function(e){if(!e.parallel){var t=!1;O(e.series,function(e){e&&"parallel"===e.type&&(t=!0)}),t&&(e.parallel=[{}])}}(e),O(so((n=e).parallelAxis),function(e){if(B(e)){var t=e.parallelIndex||0,i=so(n.parallel)[t];i&&i.parallelAxisDefault&&m(e,i.parallelAxisDefault,!1)}})}),Zd.extend({type:"series.parallel",dependencies:["parallel"],visualColorAccessPath:"lineStyle.color",getInitialData:function(e,t){var i=this.getSource();return function(e,t){if(e.encodeDefine)return;var i=t.ecModel.getComponent("parallel",t.get("parallelIndex"));if(!i)return;var n=e.encodeDefine=ee();O(i.dimensions,function(e){var t=+e.replace("dim","");n.set(e,t)})}(i,this),Lh(i,this)},getRawIndicesByActiveState:function(i){var e=this.coordinateSystem,n=this.getData(),o=[];return e.eachActiveState(n,function(e,t){i===e&&o.push(n.getRawIndex(t))}),o},defaultOption:{zlevel:0,z:2,coordinateSystem:"parallel",parallelIndex:0,label:{show:!1},inactiveOpacity:.05,activeOpacity:1,lineStyle:{width:1,opacity:.45,type:"solid"},emphasis:{label:{show:!1}},progressive:500,smooth:!1,animationEasing:"linear"}});lc.extend({type:"parallel",init:function(){this._dataGroup=new ni,this.group.add(this._dataGroup),this._data,this._initialized},render:function(a,e,t,r){var i,n,o,s,l,d,c,u=this._dataGroup,h=a.getData(),f=this._data,p=a.coordinateSystem,m=p.dimensions,g=Hx(a);if(h.diff(f).add(function(e){Vx(Fx(h,u,e,m,p),h,e,g)}).update(function(e,t){var i=f.getItemGraphicEl(t),n=zx(h,e,m,p);h.setItemGraphicEl(e,i);var o=r&&!1===r.animation?null:a;hs(i,{shape:{points:n}},o,e),Vx(i,h,e,g)}).remove(function(e){var t=f.getItemGraphicEl(e);u.remove(t)}).execute(),!this._initialized){this._initialized=!0;var v=(n=a,o=function(){setTimeout(function(){u.removeClipPath()})},s=(i=p).model,l=i.getRect(),d=new xr({shape:{x:l.x,y:l.y,width:l.width,height:l.height}}),c="horizontal"===s.get("layout")?"width":"height",d.setShape(c,0),fs(d,{shape:{width:l.width,height:l.height}},n,o),d);u.setClipPath(v)}this._data=h},incrementalPrepareRender:function(e,t,i){this._initialized=!0,this._data=null,this._dataGroup.removeAll()},incrementalRender:function(e,t,i){for(var n=t.getData(),o=t.coordinateSystem,a=o.dimensions,r=Hx(t),s=e.start;s<e.end;s++){var l=Fx(n,this._dataGroup,s,a,o);l.incremental=!0,Vx(l,n,s,r)}},dispose:function(){},remove:function(){this._dataGroup&&this._dataGroup.removeAll(),this._data=null}});function zx(e,t,i,n){for(var o,a=[],r=0;r<i.length;r++){var s=i[r],l=e.get(e.mapDimension(s),t);o=l,("category"===n.getAxis(s).type?null==o:null==o||isNaN(o))||a.push(n.dataToPoint(l,s))}return a}function Fx(e,t,i,n,o){var a=zx(e,i,n,o),r=new br({shape:{points:a},silent:!0,z2:10});return t.add(r),e.setItemGraphicEl(i,r),r}function Hx(e){var t=e.get("smooth",!0);return!0===t&&(t=.3),{lineStyle:e.getModel("lineStyle").getLineStyle(),smooth:null!=t?t:.3}}function Vx(e,t,i,n){var o=n.lineStyle;t.hasItemOption&&(o=t.getItemModel(i).getModel("lineStyle").getLineStyle());e.useStyle(o);var a=e.style;a.fill=null,a.stroke=t.getItemVisual(i,"color"),a.opacity=t.getItemVisual(i,"opacity"),n.smooth&&(e.shape.smooth=n.smooth)}var jx=["lineStyle","normal","opacity"];Yu({seriesType:"parallel",reset:function(e,t,i){var n=e.getModel("itemStyle"),o=e.getModel("lineStyle"),a=t.get("color"),r=o.get("color")||n.get("color")||a[e.seriesIndex%a.length],s=e.get("inactiveOpacity"),l=e.get("activeOpacity"),d=e.getModel("lineStyle").getLineStyle(),c=e.coordinateSystem,u=e.getData(),h={normal:d.opacity,active:l,inactive:s};return u.setVisual("color",r),{progress:function(e,o){c.eachActiveState(o,function(e,t){var i=h[e];if("normal"===e&&o.hasItemOption){var n=o.getItemModel(t).get(jx,!0);null!=n&&(i=n)}o.setItemVisual(t,"opacity",i)},e.start,e.end)}}}});var Wx=Zd.extend({type:"series.sankey",layoutInfo:null,getInitialData:function(e){var t=e.edges||e.links,i=e.data||e.nodes;if(i&&t)return zy(i,t,this,!0).data},setNodePosition:function(e,t){var i=this.option.data[e];i.localX=t[0],i.localY=t[1]},getGraph:function(){return this.getData().graph},getEdgeData:function(){return this.getGraph().edgeData},formatTooltip:function(e,t,i){if("edge"!==i)return Wx.superCall(this,"formatTooltip",e,t);var n=this.getDataParams(e,i),o=n.data,a=o.source+" -- "+o.target;return n.value&&(a+=" : "+n.value),nl(a)},defaultOption:{zlevel:0,z:2,coordinateSystem:"view",layout:null,left:"5%",top:"5%",right:"20%",bottom:"5%",nodeWidth:20,nodeGap:8,draggable:!0,layoutIterations:32,label:{show:!0,position:"right",color:"#000",fontSize:12},itemStyle:{borderWidth:1,borderColor:"#333"},lineStyle:{color:"#314656",opacity:.2,curveness:.5},emphasis:{label:{show:!0},lineStyle:{opacity:.6}},animationEasing:"linear",animationDuration:1e3}}),$x=Ur({shape:{x1:0,y1:0,x2:0,y2:0,cpx1:0,cpy1:0,cpx2:0,cpy2:0,extent:0},buildPath:function(e,t){var i=t.extent/2;e.moveTo(t.x1,t.y1-i),e.bezierCurveTo(t.cpx1,t.cpy1-i,t.cpx2,t.cpy2-i,t.x2,t.y2-i),e.lineTo(t.x2,t.y2+i),e.bezierCurveTo(t.cpx2,t.cpy2+i,t.cpx1,t.cpy1+i,t.x1,t.y1+i),e.closePath()}});function Gx(){var c=[],t=[];return{key:function(e){return c.push(e),this},sortKeys:function(e){return t[c.length-1]=e,this},entries:function(e){return function i(e,n){if(n>=c.length)return e;var o=[],a=t[n++];return O(e,function(e,t){o.push({key:t,values:i(e,n)})}),a?o.sort(function(e,t){return a(e.key,t.key)}):o}(function i(e,n){if(n>=c.length)return e;for(var t=-1,o=e.length,a=c[n++],r={},s={};++t<o;){var l=a(e[t]),d=s[l];d?d.push(e[t]):s[l]=[e[t]]}return O(s,function(e,t){r[t]=i(e,n)}),r}(e,0),0)}}}Qu({type:"sankey",_model:null,render:function(w,e,n){var t,i,o,a,r=w.getGraph(),_=this.group,s=w.layoutInfo,C=s.width,S=s.height,d=w.getData(),T=w.getData("edge");this._model=w,_.removeAll(),_.attr("position",[s.x,s.y]),r.eachEdge(function(e){var t=new $x;t.dataIndex=e.dataIndex,t.seriesIndex=w.seriesIndex,t.dataType="edge";var i=e.getModel("lineStyle"),n=i.get("curveness"),o=e.node1.getLayout(),a=e.node1.getModel(),r=a.get("localX"),s=a.get("localY"),l=e.node2.getLayout(),d=e.node2.getModel(),c=d.get("localX"),u=d.get("localY"),h=e.getLayout();t.shape.extent=Math.max(1,h.dy);var f=(null!=r?r*C:o.x)+o.dx,p=(null!=s?s*S:o.y)+h.sy+h.dy/2,m=null!=c?c*C:l.x,g=(null!=u?u*S:l.y)+h.ty+h.dy/2,v=f*(1-n)+m*n,y=p,b=f*n+m*(1-n),x=g;switch(t.setShape({x1:f,y1:p,x2:m,y2:g,cpx1:v,cpy1:y,cpx2:b,cpy2:x}),t.setStyle(i.getItemStyle()),t.style.fill){case"source":t.style.fill=e.node1.getVisual("color");break;case"target":t.style.fill=e.node2.getVisual("color")}ns(t,e.getModel("emphasis.lineStyle").getItemStyle()),_.add(t),T.setItemGraphicEl(e.dataIndex,t)}),r.eachNode(function(e){var t=e.getLayout(),i=e.getModel(),n=i.get("localX"),o=i.get("localY"),a=i.getModel("label"),r=i.getModel("emphasis.label"),s=new xr({shape:{x:null!=n?n*C:t.x,y:null!=o?o*S:t.y,width:t.dx,height:t.dy},style:i.getModel("itemStyle").getItemStyle()}),l=e.getModel("emphasis.itemStyle").getItemStyle();os(s.style,l,a,r,{labelFetcher:w,labelDataIndex:e.dataIndex,defaultText:e.id,isRectText:!0}),s.setStyle("fill",e.getVisual("color")),ns(s,l),_.add(s),d.setItemGraphicEl(e.dataIndex,s),s.dataType="node"}),w.get("draggable")&&d.eachItemGraphicEl(function(e,i){e.drift=function(e,t){this.shape.x+=e,this.shape.y+=t,this.dirty(),n.dispatchAction({type:"dragNode",seriesId:w.id,dataIndex:d.getRawIndex(i),localX:this.shape.x/C,localY:this.shape.y/S})},e.draggable=!0,e.cursor="move"}),!this._data&&w.get("animation")&&_.setClipPath((t=_.getBoundingRect(),i=w,o=function(){_.removeClipPath()},fs(a=new xr({shape:{x:t.x-10,y:t.y-10,width:0,height:t.height+20}}),{shape:{width:t.width+20,height:t.height+20}},i,o),a)),this._data=w.getData()},dispose:function(){}}),Wu({type:"dragNode",event:"dragNode",update:"update"},function(t,e){e.eachComponent({mainType:"series",subType:"sankey",query:t},function(e){e.setNodePosition(t.dataIndex,[t.localX,t.localY])})});function Yx(e,s,l){O(e,function(e){var t,i,n,o=0,a=e.length;for(e.sort(iw),n=0;n<a;n++){if(0<(i=o-(t=e[n]).getLayout().y)){var r=t.getLayout().y+i;t.setLayout({y:r},!0)}o=t.getLayout().y+t.getLayout().dy+s}if(0<(i=o-s-l)){r=t.getLayout().y-i;for(t.setLayout({y:r},!0),o=t.getLayout().y,n=a-2;0<=n;--n)0<(i=(t=e[n]).getLayout().y+t.getLayout().dy+s-o)&&(r=t.getLayout().y-i,t.setLayout({y:r},!0)),o=t.getLayout().y}})}function qx(e,n){O(e.slice().reverse(),function(e){O(e,function(e){if(e.outEdges.length){var t=ew(e.outEdges,Zx)/ew(e.outEdges,ow),i=e.getLayout().y+(t-tw(e))*n;e.setLayout({y:i},!0)}})})}function Zx(e){return tw(e.node2)*e.getValue()}function Xx(e,n){O(e,function(e){O(e,function(e){if(e.inEdges.length){var t=ew(e.inEdges,Kx)/ew(e.inEdges,ow),i=e.getLayout().y+(t-tw(e))*n;e.setLayout({y:i},!0)}})})}function Kx(e){return tw(e.node1)*e.getValue()}function Jx(e,t){return e.node2.getLayout().y-t.node2.getLayout().y}function Qx(e,t){return e.node1.getLayout().y-t.node1.getLayout().y}function ew(e,t){for(var i=0,n=e.length,o=-1;++o<n;){var a=+t.call(e,e[o],o);isNaN(a)||(i+=a)}return i}function tw(e){return e.getLayout().y+e.getLayout().dy/2}function iw(e,t){return e.getLayout().y-t.getLayout().y}function nw(e,t){return e-t}function ow(e){return e.getValue()}Gu(function(e,v,t){e.eachSeriesByType("sankey",function(e){var t,i=e.get("nodeWidth"),n=e.get("nodeGap"),o=(t=v,xl(e.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()})),a=(e.layoutInfo=o).width,r=o.height,s=e.getGraph(),l=s.nodes,d=s.edges;O(l,function(e){var t=ew(e.outEdges,ow),i=ew(e.inEdges,ow),n=Math.max(t,i);e.setLayout({value:n},!0)});var c,u,h,f,p,m,g=0!==T(l,function(e){return 0===e.getLayout().value}).length?0:e.get("layoutIterations");h=n,f=r,p=g,function(o,a,t,e){for(var r=[],s=[],i=[],l=[],n=0,d=0;d<a.length;d++)r[d]=1;for(var d=0;d<o.length;d++)s[d]=o[d].inEdges.length,0===s[d]&&i.push(o[d]);for(;i.length;)O(i,function(e){e.setLayout({x:n},!0),e.setLayout({dx:t},!0),O(e.outEdges,function(e){var t=a.indexOf(e);r[t]=0;var i=e.node2,n=o.indexOf(i);0==--s[n]&&l.push(i)})}),++n,i=l,l=[];for(var d=0;d<r.length;d++)if(I&&1===r[d])throw new Error("Sankey is a DAG, the original data has cycle!");var c,u;u=n,O(o,function(e){e.outEdges.length||e.setLayout({x:u-1},!0)}),c=(e-t)/(n-1),O(o,function(e){var t=e.getLayout().x*c;e.setLayout({x:t},!0)})}(c=l,u=d,i,a),function(e,t,i,n,o){var a=Gx().key(function(e){return e.getLayout().x}).sortKeys(nw).entries(e).map(function(e){return e.values});(function(e,t,i,o,a){var r=[];O(t,function(e){var t=e.length,i=0;O(e,function(e){i+=e.getLayout().value});var n=(o-(t-1)*a)/i;r.push(n)}),r.sort(function(e,t){return e-t});var n=r[0];O(t,function(e){O(e,function(e,t){e.setLayout({y:t},!0);var i=e.getLayout().value*n;e.setLayout({dy:i},!0)})}),O(i,function(e){var t=+e.getValue()*n;e.setLayout({dy:t},!0)})})(0,a,t,i,n),Yx(a,n,i);for(var r=1;0<o;o--)qx(a,r*=.99),Yx(a,n,i),Xx(a,r),Yx(a,n,i)}(c,u,f,h,p),O(m=c,function(e){e.outEdges.sort(Jx),e.inEdges.sort(Qx)}),O(m,function(e){var t=0,i=0;O(e.outEdges,function(e){e.setLayout({sy:t},!0),t+=e.getLayout().dy}),O(e.inEdges,function(e){e.setLayout({ty:i},!0),i+=e.getLayout().dy})})})}),Yu(function(e,t){e.eachSeriesByType("sankey",function(n){var e=n.getGraph().nodes;if(e.length){var o=1/0,a=-1/0;O(e,function(e){var t=e.getLayout().value;t<o&&(o=t),a<t&&(a=t)}),O(e,function(e){var t=new Jv({type:"color",mappingMethod:"linear",dataExtent:[o,a],visual:n.get("color")}).mapValueToVisual(e.getLayout().value);e.setVisual("color",t);var i=e.getModel().get("itemStyle.color");null!=i&&e.setVisual("color",i)})}})});var aw={_baseAxisDim:null,getInitialData:function(e,t){var i,n,o=t.getComponent("xAxis",this.get("xAxisIndex")),a=t.getComponent("yAxis",this.get("yAxisIndex")),r=o.get("type"),s=a.get("type");"category"===r?(e.layout="horizontal",i=o.getOrdinalMeta(),n=!0):"category"===s?(e.layout="vertical",i=a.getOrdinalMeta(),n=!0):e.layout=e.layout||"horizontal";var l=["x","y"],d="horizontal"===e.layout?0:1,c=this._baseAxisDim=l[d],u=l[1-d],h=[o,a],f=h[d].get("type"),p=h[1-d].get("type"),m=e.data;if(m&&n){var g=[];O(m,function(e,t){var i;e.value&&R(e.value)?(i=e.value.slice(),e.value.unshift(t)):R(e)?(i=e.slice(),e.unshift(t)):i=e,g.push(i)}),e.data=g}var v=this.defaultValueDimensions;return Ym(this,{coordDimensions:[{name:c,type:ah(f),ordinalMeta:i,otherDims:{tooltip:!1,itemName:0},dimsDef:["base"]},{name:u,type:ah(p),dimsDef:v.slice()}],dimensionsCount:v.length+1})},getBaseAxis:function(){var e=this._baseAxisDim;return this.ecModel.getComponent(e+"Axis",this.get(e+"AxisIndex")).axis}};C(Zd.extend({type:"series.boxplot",dependencies:["xAxis","yAxis","grid"],defaultValueDimensions:[{name:"min",defaultTooltip:!0},{name:"Q1",defaultTooltip:!0},{name:"median",defaultTooltip:!0},{name:"Q3",defaultTooltip:!0},{name:"max",defaultTooltip:!0}],dimensions:null,defaultOption:{zlevel:0,z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,hoverAnimation:!0,layout:null,boxWidth:[7,50],itemStyle:{color:"#fff",borderWidth:1},emphasis:{itemStyle:{borderWidth:2,shadowBlur:5,shadowOffsetX:2,shadowOffsetY:2,shadowColor:"rgba(0,0,0,0.4)"}},animationEasing:"elasticOut",animationDuration:800}}),aw,!0);var rw=["itemStyle"],sw=["emphasis","itemStyle"],lw=(lc.extend({type:"boxplot",render:function(e,t,i){var o=e.getData(),a=this.group,r=this._data;this._data||a.removeAll();var s="horizontal"===e.get("layout")?1:0;o.diff(r).add(function(e){if(o.hasValue(e)){var t=dw(o.getItemLayout(e),o,e,s,!0);o.setItemGraphicEl(e,t),a.add(t)}}).update(function(e,t){var i=r.getItemGraphicEl(t);if(o.hasValue(e)){var n=o.getItemLayout(e);i?cw(n,i,o,e):i=dw(n,o,e,s),a.add(i),o.setItemGraphicEl(e,i)}else a.remove(i)}).remove(function(e){var t=r.getItemGraphicEl(e);t&&a.remove(t)}).execute(),this._data=o},remove:function(e){var t=this.group,i=this._data;this._data=null,i&&i.eachItemGraphicEl(function(e){e&&t.remove(e)})},dispose:ie}),qa.extend({type:"boxplotBoxPath",shape:{},buildPath:function(e,t){var i=t.points,n=0;for(e.moveTo(i[n][0],i[n][1]),n++;n<4;n++)e.lineTo(i[n][0],i[n][1]);for(e.closePath();n<i.length;n++)e.moveTo(i[n][0],i[n][1]),n++,e.lineTo(i[n][0],i[n][1])}}));function dw(e,t,i,n,o){var a,r,s,l=e.ends,d=new lw({shape:{points:o?(a=l,r=n,s=e,M(a,function(e){return(e=e.slice())[r]=s.initBaseline,e})):l}});return cw(e,d,t,i,o),d}function cw(e,t,i,n,o){var a=i.hostModel;(0,xs[o?"initProps":"updateProps"])(t,{shape:{points:e.ends}},a,n);var r=i.getItemModel(n),s=r.getModel(rw),l=i.getItemVisual(n,"color"),d=s.getItemStyle(["borderColor"]);d.stroke=l,d.strokeNoScale=!0,t.useStyle(d),t.z2=100,ns(t,r.getModel(sw).getItemStyle())}var uw=["itemStyle","borderColor"],hw=O;Yu(function(n,e){var o=n.get("color");n.eachRawSeriesByType("boxplot",function(e){var t=o[e.seriesIndex%o.length],i=e.getData();i.setVisual({legendSymbol:"roundRect",color:e.get(uw)||t}),n.isSeriesFiltered(e)||i.each(function(e){var t=i.getItemModel(e);i.setItemVisual(e,{color:t.get(uw,!0)})})})}),Gu(function(e){var n,o,t=(n=[],o=[],e.eachSeriesByType("boxplot",function(e){var t=e.getBaseAxis(),i=w(o,t);i<0&&(i=o.length,o[i]=t,n[i]={axis:t,seriesModels:[]}),n[i].seriesModels.push(e)}),n);hw(t,function(i){var e=i.seriesModels;e.length&&(function(e){var t,i,n=e.axis,o=e.seriesModels,a=o.length,r=e.boxWidthList=[],s=e.boxOffsetList=[],l=[];if("category"===n.type)i=n.getBandWidth();else{var d=0;hw(o,function(e){d=Math.max(d,e.getData().count())}),t=n.getExtent(),Math.abs(t[1]-t[0])}hw(o,function(e){var t=e.get("boxWidth");R(t)||(t=[t,t]),l.push([Ps(t[0],i)||0,Ps(t[1],i)||0])});var c=.8*i-2,u=c/a*.3,h=(c-u*(a-1))/a,f=h/2-c/2;hw(o,function(e,t){s.push(f),f+=u+h,r.push(Math.min(Math.max(h,l[t][0]),l[t][1]))})}(i),hw(e,function(e,t){!function(e,r,t){var s=e.coordinateSystem,l=e.getData(),a=t/2,d="horizontal"===e.get("layout")?0:1,c=1-d,i=["x","y"],n=l.mapDimension(i[d]),o=l.mapDimension(i[c],!0);if(!(null==n||o.length<5))for(var u=0;u<l.count();u++){var h=l.get(n,u),f=b(h,o[2],u),p=b(h,o[0],u),m=b(h,o[1],u),g=b(h,o[3],u),v=b(h,o[4],u),y=[];x(y,m,0),x(y,g,1),y.push(p,m,v,g),w(y,p),w(y,v),w(y,f),l.setItemLayout(u,{initBaseline:f[c],ends:y})}function b(e,t,i){var n,o=l.get(t,i),a=[];return a[d]=e,a[c]=o,isNaN(e)||isNaN(o)?n=[NaN,NaN]:(n=s.dataToPoint(a))[d]+=r,n}function x(e,t,i){var n=t.slice(),o=t.slice();n[d]+=a,o[d]-=a,i?e.push(n,o):e.push(o,n)}function w(e,t){var i=t.slice(),n=t.slice();i[d]-=a,n[d]+=a,e.push(i,n)}}(e,i.boxOffsetList[t],i.boxWidthList[t])}))})}),C(Zd.extend({type:"series.candlestick",dependencies:["xAxis","yAxis","grid"],defaultValueDimensions:[{name:"open",defaultTooltip:!0},{name:"close",defaultTooltip:!0},{name:"lowest",defaultTooltip:!0},{name:"highest",defaultTooltip:!0}],dimensions:null,defaultOption:{zlevel:0,z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,hoverAnimation:!0,layout:null,itemStyle:{color:"#c23531",color0:"#314656",borderWidth:1,borderColor:"#c23531",borderColor0:"#314656"},emphasis:{itemStyle:{borderWidth:2}},barMaxWidth:null,barMinWidth:null,barWidth:null,large:!0,largeThreshold:600,progressive:5e3,progressiveThreshold:1e4,progressiveChunkMode:"mod",animationUpdate:!1,animationEasing:"linear",animationDuration:300},getShadowDim:function(){return"open"},brushSelector:function(e,t,i){var n=t.getItemLayout(e);return n&&i.rect(n.brushRect)}}),aw,!0);var fw=["itemStyle"],pw=["emphasis","itemStyle"],mw=["color","color0","borderColor","borderColor0"],gw=(lc.extend({type:"candlestick",render:function(e,t,i){this._updateDrawMode(e),this._isLargeDraw?this._renderLarge(e):this._renderNormal(e)},incrementalPrepareRender:function(e,t,i){this._clear(),this._updateDrawMode(e)},incrementalRender:function(e,t,i,n){this._isLargeDraw?this._incrementalRenderLarge(e,t):this._incrementalRenderNormal(e,t)},_updateDrawMode:function(e){var t=e.pipelineContext.large;(null==this._isLargeDraw||t^this._isLargeDraw)&&(this._isLargeDraw=t,this._clear())},_renderNormal:function(o){var a=o.getData(),r=this._data,s=this.group,l=a.getLayout("isSimpleBox");this._data||s.removeAll(),a.diff(r).add(function(e){if(a.hasValue(e)){var t,i=a.getItemLayout(e);fs(t=vw(i,e,!0),{shape:{points:i.ends}},o,e),yw(t,a,e,l),s.add(t),a.setItemGraphicEl(e,t)}}).update(function(e,t){var i=r.getItemGraphicEl(t);if(a.hasValue(e)){var n=a.getItemLayout(e);i?hs(i,{shape:{points:n.ends}},o,e):i=vw(n,e),yw(i,a,e,l),s.add(i),a.setItemGraphicEl(e,i)}else s.remove(i)}).remove(function(e){var t=r.getItemGraphicEl(e);t&&s.remove(t)}).execute(),this._data=a},_renderLarge:function(e){this._clear(),xw(e,this.group)},_incrementalRenderNormal:function(e,t){for(var i,n=t.getData(),o=n.getLayout("isSimpleBox");null!=(i=e.next());){var a;yw(a=vw(n.getItemLayout(i),i),n,i,o),a.incremental=!0,this.group.add(a)}},_incrementalRenderLarge:function(e,t){xw(t,this.group,!0)},remove:function(e){this._clear()},_clear:function(){this.group.removeAll(),this._data=null},dispose:ie}),qa.extend({type:"normalCandlestickBox",shape:{},buildPath:function(e,t){var i=t.points;this.__simpleBox?(e.moveTo(i[4][0],i[4][1]),e.lineTo(i[6][0],i[6][1])):(e.moveTo(i[0][0],i[0][1]),e.lineTo(i[1][0],i[1][1]),e.lineTo(i[2][0],i[2][1]),e.lineTo(i[3][0],i[3][1]),e.closePath(),e.moveTo(i[4][0],i[4][1]),e.lineTo(i[5][0],i[5][1]),e.moveTo(i[6][0],i[6][1]),e.lineTo(i[7][0],i[7][1]))}}));function vw(e,t,i){var n,o,a=e.ends;return new gw({shape:{points:i?(n=a,o=e,M(n,function(e){return(e=e.slice())[1]=o.initBaseline,e})):a},z2:100})}function yw(e,t,i,n){var o=t.getItemModel(i),a=o.getModel(fw),r=t.getItemVisual(i,"color"),s=t.getItemVisual(i,"borderColor")||r,l=a.getItemStyle(mw);e.useStyle(l),e.style.strokeNoScale=!0,e.style.fill=r,e.style.stroke=s,e.__simpleBox=n,ns(e,o.getModel(pw).getItemStyle())}var bw=qa.extend({type:"largeCandlestickBox",shape:{},buildPath:function(e,t){for(var i=t.points,n=0;n<i.length;)if(this.__sign===i[n++]){var o=i[n++];e.moveTo(o,i[n++]),e.lineTo(o,i[n++])}else n+=3}});function xw(e,t,i){var n=e.getData(),o=n.getLayout("largePoints"),a=new bw({shape:{points:o},__sign:1});t.add(a);var r=new bw({shape:{points:o},__sign:-1});t.add(r),ww(1,a,e,n),ww(-1,r,e,n),i&&(a.incremental=!0,r.incremental=!0)}function ww(e,t,i,n){var o=0<e?"P":"N",a=n.getVisual("borderColor"+o)||n.getVisual("color"+o),r=i.getModel(fw).getItemStyle(mw);t.useStyle(r),t.style.fill=null,t.style.stroke=a}var _w=["itemStyle","borderColor"],Cw=["itemStyle","borderColor0"],Sw=["itemStyle","color"],Tw=["itemStyle","color0"],kw={seriesType:"candlestick",plan:ac(),performRawSeries:!0,reset:function(e,t){var i=e.getData(),n=e.pipelineContext.large;if(i.setVisual({legendSymbol:"roundRect",colorP:a(1,e),colorN:a(-1,e),borderColorP:r(1,e),borderColorN:r(-1,e)}),!t.isSeriesFiltered(e))return!n&&{progress:function(e,t){var i;for(;null!=(i=e.next());){var n=t.getItemModel(i),o=t.getItemLayout(i).sign;t.setItemVisual(i,{color:a(o,n),borderColor:r(o,n)})}}};function a(e,t){return t.get(0<e?Sw:Tw)}function r(e,t){return t.get(0<e?_w:Cw)}}},Iw="undefined"!=typeof Float32Array?Float32Array:Array,Nw={seriesType:"candlestick",plan:ac(),reset:function(e){var t,i,n,o,a,r,s,l,b=e.coordinateSystem,d=e.getData(),x=(i=d,o=(t=e).getBaseAxis(),a="category"===o.type?o.getBandWidth():(n=o.getExtent(),Math.abs(n[1]-n[0])/i.count()),r=Ps(W(t.get("barMaxWidth"),a),a),s=Ps(W(t.get("barMinWidth"),1),a),null!=(l=t.get("barWidth"))?Ps(l,a):Math.max(Math.min(a/2,r),s)),c=["x","y"],w=d.mapDimension(c[0]),u=d.mapDimension(c[1],!0),_=u[0],C=u[1],S=u[2],T=u[3];if(d.setLayout({candleWidth:x,isSimpleBox:x<=1.3}),!(null==w||u.length<4))return{progress:e.pipelineContext.large?function(e,t){var i,n,o=new Iw(5*e.count),a=0,r=[],s=[];for(;null!=(n=e.next());){var l=t.get(w,n),d=t.get(_,n),c=t.get(C,n),u=t.get(S,n),h=t.get(T,n);isNaN(l)||isNaN(u)||isNaN(h)?(o[a++]=NaN,a+=4):(o[a++]=Ew(t,n,d,c,C),r[0]=l,r[1]=u,i=b.dataToPoint(r,null,s),o[a++]=i?i[0]:NaN,o[a++]=i?i[1]:NaN,r[1]=h,i=b.dataToPoint(r,null,s),o[a++]=i?i[1]:NaN)}t.setLayout("largePoints",o)}:function(e,t){var i;for(;null!=(i=e.next());){var n=t.get(w,i),o=t.get(_,i),a=t.get(C,i),r=t.get(S,i),s=t.get(T,i),l=Math.min(o,a),d=Math.max(o,a),c=m(l,n),u=m(d,n),h=m(r,n),f=m(s,n),p=[];g(p,u,0),g(p,c,1),p.push(y(f),y(u),y(h),y(c)),t.setItemLayout(i,{sign:Ew(t,i,o,a,C),initBaseline:a<o?u[1]:c[1],ends:p,brushRect:v(r,s,n)})}function m(e,t){var i=[];return i[0]=t,i[1]=e,isNaN(t)||isNaN(e)?[NaN,NaN]:b.dataToPoint(i)}function g(e,t,i){var n=t.slice(),o=t.slice();n[0]=Wr(n[0]+x/2,1,!1),o[0]=Wr(o[0]-x/2,1,!0),i?e.push(n,o):e.push(o,n)}function v(e,t,i){var n=m(e,i),o=m(t,i);return n[0]-=x/2,o[0]-=x/2,{x:n[0],y:n[1],width:x,height:o[1]-n[1]}}function y(e){return e[0]=Wr(e[0],1),e}}}}};function Ew(e,t,i,n,o){return n<i?-1:i<n?1:0<t?e.get(o,t-1)<=n?1:-1:1}Vu(function(e){e&&R(e.series)&&O(e.series,function(e){B(e)&&"k"===e.type&&(e.type="candlestick")})}),Yu(kw),Gu(Nw),Zd.extend({type:"series.effectScatter",dependencies:["grid","polar"],getInitialData:function(e,t){return Lh(this.getSource(),this)},brushSelector:"point",defaultOption:{coordinateSystem:"cartesian2d",zlevel:0,z:2,legendHoverLink:!0,effectType:"ripple",progressive:0,showEffectOn:"render",rippleEffect:{period:4,scale:2.5,brushType:"fill"},symbolSize:10}});function Mw(e,t){e.eachChild(function(e){e.attr({z:t.z,zlevel:t.zlevel,style:{stroke:"stroke"===t.brushType?t.color:null,fill:"fill"===t.brushType?t.color:null}})})}function Dw(e,t){ni.call(this);var i=new lp(e,t),n=new ni;this.add(i),this.add(n),n.beforeUpdate=function(){this.attr(i.getScale())},this.updateData(e,t)}var Aw=Dw.prototype;Aw.stopEffectAnimation=function(){this.childAt(1).removeAll()},Aw.startEffectAnimation=function(e){for(var t=e.symbolType,i=e.color,n=this.childAt(1),o=0;o<3;o++){var a=Of(t,-1,-1,2,2,i);a.attr({style:{strokeNoScale:!0},z2:99,silent:!0,scale:[.5,.5]});var r=-o/3*e.period+e.effectOffset;a.animate("",!0).when(e.period,{scale:[e.rippleScale/2,e.rippleScale/2]}).delay(r).start(),a.animateStyle(!0).when(e.period,{opacity:0}).delay(r).start(),n.add(a)}Mw(n,e)},Aw.updateEffectAnimation=function(e){for(var t=this._effectCfg,i=this.childAt(1),n=["symbolType","period","rippleScale"],o=0;o<n.length;o++){var a=n[o];if(t[a]!==e[a])return this.stopEffectAnimation(),void this.startEffectAnimation(e)}Mw(i,e)},Aw.highlight=function(){this.trigger("emphasis")},Aw.downplay=function(){this.trigger("normal")},Aw.updateData=function(e,t){var i=e.hostModel;this.childAt(0).updateData(e,t);var n,o=this.childAt(1),a=e.getItemModel(t),r=e.getItemVisual(t,"symbol"),s=(R(n=e.getItemVisual(t,"symbolSize"))||(n=[+n,+n]),n),l=e.getItemVisual(t,"color");o.attr("scale",s),o.traverse(function(e){e.attr({fill:l})});var d=a.getShallow("symbolOffset");if(d){var c=o.position;c[0]=Ps(d[0],s[0]),c[1]=Ps(d[1],s[1])}o.rotation=(a.getShallow("symbolRotate")||0)*Math.PI/180||0;var u={};if(u.showEffectOn=i.get("showEffectOn"),u.rippleScale=a.get("rippleEffect.scale"),u.brushType=a.get("rippleEffect.brushType"),u.period=1e3*a.get("rippleEffect.period"),u.effectOffset=t/e.count(),u.z=a.getShallow("z")||0,u.zlevel=a.getShallow("zlevel")||0,u.symbolType=r,u.color=l,this.off("mouseover").off("mouseout").off("emphasis").off("normal"),"render"===u.showEffectOn)this._effectCfg?this.updateEffectAnimation(u):this.startEffectAnimation(u),this._effectCfg=u;else{this._effectCfg=null,this.stopEffectAnimation();var h=this.childAt(0),f=function(){h.highlight(),"render"!==u.showEffectOn&&this.startEffectAnimation(u)},p=function(){h.downplay(),"render"!==u.showEffectOn&&this.stopEffectAnimation()};this.on("mouseover",f,this).on("mouseout",p,this).on("emphasis",f,this).on("normal",p,this)}this._effectCfg=u},Aw.fadeOut=function(e){this.off("mouseover").off("mouseout").off("emphasis").off("normal"),e&&e()},_(Dw,ni),Qu({type:"effectScatter",init:function(){this._symbolDraw=new vp(Dw)},render:function(e,t,i){var n=e.getData(),o=this._symbolDraw;o.updateData(n),this.group.add(o.group)},updateTransform:function(e,t,i){var n=e.getData();this.group.dirty();var o=jp().reset(e);o.progress&&o.progress({start:0,end:n.count()},n),this._symbolDraw.updateLayout(n)},_updateGroupTransform:function(e){var t=e.coordinateSystem;t&&t.getRoamTransform&&(this.group.transform=$e(t.getRoamTransform()),this.group.decomposeTransform())},remove:function(e,t){this._symbolDraw&&this._symbolDraw.remove(t)},dispose:function(){}}),Yu(Vp("effectScatter","circle")),Gu(jp("effectScatter"));var Lw="undefined"==typeof Uint32Array?Array:Uint32Array,Pw="undefined"==typeof Float64Array?Array:Float64Array;function Rw(e){var t=e.data;t&&t[0]&&t[0][0]&&t[0][0].coord&&(I&&console.warn("Lines data configuration has been changed to { coords:[[1,2],[2,3]] }"),e.data=M(t,function(e){var t={coords:[e[0].coord,e[1].coord]};return e[0].name&&(t.fromName=e[0].name),e[1].name&&(t.toName=e[1].name),g([t,e[0],e[1]])}))}var Uw=Zd.extend({type:"series.lines",dependencies:["grid","polar"],visualColorAccessPath:"lineStyle.color",init:function(e){e.data=e.data||[],Rw(e);var t=this._processFlatCoordsArray(e.data);this._flatCoords=t.flatCoords,this._flatCoordsOffset=t.flatCoordsOffset,t.flatCoords&&(e.data=new Float32Array(t.count)),Uw.superApply(this,"init",arguments)},mergeOption:function(e){if(e.data=e.data||[],Rw(e),e.data){var t=this._processFlatCoordsArray(e.data);this._flatCoords=t.flatCoords,this._flatCoordsOffset=t.flatCoordsOffset,t.flatCoords&&(e.data=new Float32Array(t.count))}Uw.superApply(this,"mergeOption",arguments)},appendData:function(e){var t=this._processFlatCoordsArray(e.data);t.flatCoords&&(this._flatCoords?(this._flatCoords=te(this._flatCoords,t.flatCoords),this._flatCoordsOffset=te(this._flatCoordsOffset,t.flatCoordsOffset)):(this._flatCoords=t.flatCoords,this._flatCoordsOffset=t.flatCoordsOffset),e.data=new Float32Array(t.count)),this.getRawData().appendData(e.data)},_getCoordsFromItemModel:function(e){var t=this.getData().getItemModel(e),i=t.option instanceof Array?t.option:t.getShallow("coords");if(I&&!(i instanceof Array&&0<i.length&&i[0]instanceof Array))throw new Error("Invalid coords "+JSON.stringify(i)+". Lines must have 2d coords array in data item.");return i},getLineCoordsCount:function(e){return this._flatCoordsOffset?this._flatCoordsOffset[2*e+1]:this._getCoordsFromItemModel(e).length},getLineCoords:function(e,t){if(this._flatCoordsOffset){for(var i=this._flatCoordsOffset[2*e],n=this._flatCoordsOffset[2*e+1],o=0;o<n;o++)t[o]=t[o]||[],t[o][0]=this._flatCoords[i+2*o],t[o][1]=this._flatCoords[i+2*o+1];return n}var a=this._getCoordsFromItemModel(e);for(o=0;o<a.length;o++)t[o]=t[o]||[],t[o][0]=a[o][0],t[o][1]=a[o][1];return a.length},_processFlatCoordsArray:function(e){var t=0;if(this._flatCoords&&(t=this._flatCoords.length),"number"!=typeof e[0])return{flatCoordsOffset:null,flatCoords:null,count:e.length};for(var i=e.length,n=new Lw(i),o=new Pw(i),a=0,r=0,s=0,l=0;l<i;){s++;var d=e[l++];n[r++]=a+t,n[r++]=d;for(var c=0;c<d;c++){var u=e[l++],h=e[l++];if(o[a++]=u,o[a++]=h,i<l&&I)throw new Error("Invalid data format.")}}return{flatCoordsOffset:new Uint32Array(n.buffer,0,r),flatCoords:o,count:s}},getInitialData:function(e,t){if(I&&!od.get(e.coordinateSystem))throw new Error("Unkown coordinate system "+e.coordinateSystem);var a=new mh(["value"],this);return a.hasItemOption=!1,a.initData(e.data,[],function(e,t,i,n){if(e instanceof Array)return NaN;a.hasItemOption=!0;var o=e.value;return null!=o?o instanceof Array?o[n]:o:void 0}),a},formatTooltip:function(e){var t=this.getData().getItemModel(e),i=t.get("name");if(i)return i;var n=t.get("fromName"),o=t.get("toName"),a=[];return null!=n&&a.push(n),null!=o&&a.push(o),nl(a.join(" > "))},preventIncremental:function(){return!!this.get("effect.show")},getProgressive:function(){var e=this.option.progressive;return null==e?this.option.large?1e4:this.get("progressive"):e},getProgressiveThreshold:function(){var e=this.option.progressiveThreshold;return null==e?this.option.large?2e4:this.get("progressiveThreshold"):e},defaultOption:{coordinateSystem:"geo",zlevel:0,z:2,legendHoverLink:!0,hoverAnimation:!0,xAxisIndex:0,yAxisIndex:0,symbol:["none","none"],symbolSize:[10,10],geoIndex:0,effect:{show:!1,period:4,constantSpeed:0,symbol:"circle",symbolSize:3,loop:!0,trailLength:.2},large:!1,largeThreshold:2e3,polyline:!1,label:{show:!1,position:"end"},lineStyle:{opacity:.5}}});function Ow(e,t,i){ni.call(this),this.add(this.createLine(e,t,i)),this._updateEffectSymbol(e,t)}var Bw=Ow.prototype;function zw(e,t,i){ni.call(this),this._createPolyline(e,t,i)}Bw.createLine=function(e,t,i){return new Zy(e,t,i)},Bw._updateEffectSymbol=function(e,t){var i=e.getItemModel(t).getModel("effect"),n=i.get("symbolSize"),o=i.get("symbol");R(n)||(n=[n,n]);var a=i.get("color")||e.getItemVisual(t,"color"),r=this.childAt(1);this._symbolType!==o&&(this.remove(r),(r=Of(o,-.5,-.5,1,1,a)).z2=100,r.culling=!0,this.add(r)),r&&(r.setStyle("shadowColor",a),r.setStyle(i.getItemStyle(["color"])),r.attr("scale",n),r.setColor(a),r.attr("scale",n),this._symbolType=o,this._updateEffectAnimation(e,i,t))},Bw._updateEffectAnimation=function(t,e,i){var n=this.childAt(1);if(n){var o=this,a=t.getItemLayout(i),r=1e3*e.get("period"),s=e.get("loop"),l=e.get("constantSpeed"),d=j(e.get("delay"),function(e){return e/t.count()*r/3}),c="function"==typeof d;if(n.ignore=!0,this.updateAnimationPoints(n,a),0<l&&(r=this.getLineLength(n)/l*1e3),r!==this._period||s!==this._loop){n.stopAnimation();var u=d;c&&(u=d(i)),0<n.__t&&(u=-r*n.__t),n.__t=0;var h=n.animate("",s).when(r,{__t:1}).delay(u).during(function(){o.updateSymbolPosition(n)});s||h.done(function(){o.remove(n)}),h.start()}this._period=r,this._loop=s}},Bw.getLineLength=function(e){return be(e.__p1,e.__cp1)+be(e.__cp1,e.__p2)},Bw.updateAnimationPoints=function(e,t){e.__p1=t[0],e.__p2=t[1],e.__cp1=t[2]||[(t[0][0]+t[1][0])/2,(t[0][1]+t[1][1])/2]},Bw.updateData=function(e,t,i){this.childAt(0).updateData(e,t,i),this._updateEffectSymbol(e,t)},Bw.updateSymbolPosition=function(e){var t=e.__p1,i=e.__p2,n=e.__cp1,o=e.__t,a=e.position,r=Ko,s=Jo;a[0]=r(t[0],n[0],i[0],o),a[1]=r(t[1],n[1],i[1],o);var l=s(t[0],n[0],i[0],o),d=s(t[1],n[1],i[1],o);e.rotation=-Math.atan2(d,l)-Math.PI/2,e.ignore=!1},Bw.updateLayout=function(e,t){this.childAt(0).updateLayout(e,t);var i=e.getItemModel(t).getModel("effect");this._updateEffectAnimation(e,i,t)},_(Ow,ni);var Fw=zw.prototype;function Hw(e,t,i){Ow.call(this,e,t,i),this._lastFrame=0,this._lastFramePercent=0}Fw._createPolyline=function(e,t,i){var n=e.getItemLayout(t),o=new br({shape:{points:n}});this.add(o),this._updateCommonStl(e,t,i)},Fw.updateData=function(e,t,i){var n=e.hostModel;hs(this.childAt(0),{shape:{points:e.getItemLayout(t)}},n,t),this._updateCommonStl(e,t,i)},Fw._updateCommonStl=function(e,t,i){var n=this.childAt(0),o=e.getItemModel(t),a=e.getItemVisual(t,"color"),r=i&&i.lineStyle,s=i&&i.hoverLineStyle;i&&!e.hasItemOption||(r=o.getModel("lineStyle").getLineStyle(),s=o.getModel("emphasis.lineStyle").getLineStyle()),n.useStyle(E({strokeNoScale:!0,fill:"none",stroke:a},r)),n.hoverStyle=s,ns(this)},Fw.updateLayout=function(e,t){this.childAt(0).setShape("points",e.getItemLayout(t))},_(zw,ni);var Vw=Hw.prototype;Vw.createLine=function(e,t,i){return new zw(e,t,i)},Vw.updateAnimationPoints=function(e,t){this._points=t;for(var i=[0],n=0,o=1;o<t.length;o++){var a=t[o-1],r=t[o];n+=be(a,r),i.push(n)}if(0!==n){for(o=0;o<i.length;o++)i[o]/=n;this._offsets=i,this._length=n}},Vw.getLineLength=function(e){return this._length},Vw.updateSymbolPosition=function(e){var t=e.__t,i=this._points,n=this._offsets,o=i.length;if(n){var a=this._lastFrame;if(t<this._lastFramePercent){for(r=Math.min(a+1,o-1);0<=r&&!(n[r]<=t);r--);r=Math.min(r,o-2)}else{for(var r=a;r<o&&!(n[r]>t);r++);r=Math.min(r-1,o-2)}_e(e.position,i[r],i[r+1],(t-n[r])/(n[r+1]-n[r]));var s=i[r+1][0]-i[r][0],l=i[r+1][1]-i[r][1];e.rotation=-Math.atan2(l,s)-Math.PI/2,this._lastFrame=r,this._lastFramePercent=t,e.ignore=!1}},_(Hw,Ow);var jw=Ur({shape:{polyline:!1,curveness:0,segs:[]},buildPath:function(e,t){var i=t.segs,n=t.curveness;if(t.polyline)for(var o=0;o<i.length;){var a=i[o++];if(0<a){e.moveTo(i[o++],i[o++]);for(var r=1;r<a;r++)e.lineTo(i[o++],i[o++])}}else for(o=0;o<i.length;){var s=i[o++],l=i[o++],d=i[o++],c=i[o++];if(e.moveTo(s,l),0<n){var u=(s+d)/2-(l-c)*n,h=(l+c)/2-(d-s)*n;e.quadraticCurveTo(u,h,d,c)}else e.lineTo(d,c)}},findDataIndex:function(e,t){var i=this.shape,n=i.segs,o=i.curveness;if(i.polyline)for(var a=0,r=0;r<n.length;){var s=n[r++];if(0<s)for(var l=n[r++],d=n[r++],c=1;c<s;c++){if(Na(l,d,u=n[r++],h=n[r++]))return a}a++}else for(a=0,r=0;r<n.length;){l=n[r++],d=n[r++];var u=n[r++],h=n[r++];if(0<o){if(Ma(l,d,(l+u)/2-(d-h)*o,(d+h)/2-(u-l)*o,u,h))return a}else if(Na(l,d,u,h))return a;a++}return-1}});function Ww(){this.group=new ni}var $w=Ww.prototype;$w.isPersistent=function(){return!this._incremental},$w.updateData=function(e){this.group.removeAll();var t=new jw({rectHover:!0,cursor:"default"});t.setShape({segs:e.getLayout("linesPoints")}),this._setCommon(t,e),this.group.add(t),this._incremental=null},$w.incrementalPrepareUpdate=function(e){this.group.removeAll(),this._clearIncremental(),5e5<e.count()?(this._incremental||(this._incremental=new Mr({silent:!0})),this.group.add(this._incremental)):this._incremental=null},$w.incrementalUpdate=function(e,t){var i=new jw;i.setShape({segs:t.getLayout("linesPoints")}),this._setCommon(i,t,!!this._incremental),this._incremental?this._incremental.addDisplayable(i,!0):(i.rectHover=!0,i.cursor="default",i.__startIndex=e.start,this.group.add(i))},$w.remove=function(){this._clearIncremental(),this._incremental=null,this.group.removeAll()},$w._setCommon=function(i,e,t){var n=e.hostModel;i.setShape({polyline:n.get("polyline"),curveness:n.get("lineStyle.curveness")}),i.useStyle(n.getModel("lineStyle").getLineStyle()),i.style.strokeNoScale=!0;var o=e.getVisual("color");o&&i.setStyle("stroke",o),i.setStyle("fill"),t||(i.seriesIndex=n.seriesIndex,i.on("mousemove",function(e){i.dataIndex=null;var t=i.findDataIndex(e.offsetX,e.offsetY);0<t&&(i.dataIndex=t+i.__startIndex)}))},$w._clearIncremental=function(){var e=this._incremental;e&&e.clearDisplaybles()};var Gw={seriesType:"lines",plan:ac(),reset:function(m){var g=m.coordinateSystem,v=m.get("polyline"),y=m.pipelineContext.large;return{progress:function(e,t){var i=[];if(y){var n,o=e.end-e.start;if(v){for(var a=0,r=e.start;r<e.end;r++)a+=m.getLineCoordsCount(r);n=new Float32Array(o+2*a)}else n=new Float32Array(4*o);var s=0,l=[];for(r=e.start;r<e.end;r++){var d=m.getLineCoords(r,i);v&&(n[s++]=d);for(var c=0;c<d;c++)l=g.dataToPoint(i[c],!1,l),n[s++]=l[0],n[s++]=l[1]}t.setLayout("linesPoints",n)}else for(r=e.start;r<e.end;r++){var u=t.getItemModel(r),h=(d=m.getLineCoords(r,i),[]);if(v)for(var f=0;f<d;f++)h.push(g.dataToPoint(i[f]));else{h[0]=g.dataToPoint(i[0]),h[1]=g.dataToPoint(i[1]);var p=u.get("lineStyle.curveness");+p&&(h[2]=[(h[0][0]+h[1][0])/2-(h[0][1]-h[1][1])*p,(h[0][1]+h[1][1])/2-(h[1][0]-h[0][0])*p])}t.setItemLayout(r,h)}}}}};function Yw(e){return e instanceof Array||(e=[e,e]),e}Qu({type:"lines",init:function(){},render:function(t,e,i){var n=t.getData(),o=this._updateLineDraw(n,t),a=t.get("zlevel"),r=t.get("effect.trailLength"),s=i.getZr(),l="svg"===s.painter.getType();if(l||s.painter.getLayer(a).clear(!0),null==this._lastZlevel||l||s.configLayer(this._lastZlevel,{motionBlur:!1}),this._showEffect(t)&&r){if(I){var d=!1;e.eachSeries(function(e){e!==t&&e.get("zlevel")===a&&(d=!0)}),d&&console.warn("Lines with trail effect should have an individual zlevel")}l||s.configLayer(a,{motionBlur:!0,lastFrameAlpha:Math.max(Math.min(r/10+.9,1),0)})}o.updateData(n),this._lastZlevel=a,this._finished=!0},incrementalPrepareRender:function(e,t,i){var n=e.getData();this._updateLineDraw(n,e).incrementalPrepareUpdate(n),this._clearLayer(i),this._finished=!1},incrementalRender:function(e,t,i){this._lineDraw.incrementalUpdate(e,t.getData()),this._finished=e.end===t.getData().count()},updateTransform:function(e,t,i){var n=e.getData(),o=e.pipelineContext;if(!this._finished||o.large||o.progressiveRender)return{update:!0};var a=Gw.reset(e);a.progress&&a.progress({start:0,end:n.count()},n),this._lineDraw.updateLayout(),this._clearLayer(i)},_updateLineDraw:function(e,t){var i=this._lineDraw,n=this._showEffect(t),o=!!t.get("polyline"),a=t.pipelineContext.large;return I&&n&&a&&console.warn("Large lines not support effect"),i&&n===this._hasEffet&&o===this._isPolyline&&a===this._isLargeDraw||(i&&i.remove(),i=this._lineDraw=a?new Ww:new Ky(o?n?Hw:zw:n?Ow:Zy),this._hasEffet=n,this._isPolyline=o,this._isLargeDraw=a,this.group.removeAll()),this.group.add(i.group),i},_showEffect:function(e){return!!e.get("effect.show")},_clearLayer:function(e){var t=e.getZr();"svg"===t.painter.getType()||null==this._lastZlevel||t.painter.getLayer(this._lastZlevel).clear(!0)},remove:function(e,t){this._lineDraw&&this._lineDraw.remove(),this._lineDraw=null,this._clearLayer(t)},dispose:function(){}});var qw="lineStyle.opacity".split("."),Zw={seriesType:"lines",reset:function(e,t,i){var n=Yw(e.get("symbol")),o=Yw(e.get("symbolSize")),a=e.getData();return a.setVisual("fromSymbol",n&&n[0]),a.setVisual("toSymbol",n&&n[1]),a.setVisual("fromSymbolSize",o&&o[0]),a.setVisual("toSymbolSize",o&&o[1]),a.setVisual("opacity",e.get(qw)),{dataEach:a.hasItemOption?function(e,t){var i=e.getItemModel(t),n=Yw(i.getShallow("symbol",!0)),o=Yw(i.getShallow("symbolSize",!0)),a=i.get(qw);n[0]&&e.setItemVisual(t,"fromSymbol",n[0]),n[1]&&e.setItemVisual(t,"toSymbol",n[1]),o[0]&&e.setItemVisual(t,"fromSymbolSize",o[0]),o[1]&&e.setItemVisual(t,"toSymbolSize",o[1]),e.setItemVisual(t,"opacity",a)}:null}}};Gu(Gw),Yu(Zw),Zd.extend({type:"series.heatmap",getInitialData:function(e,t){return Lh(this.getSource(),this,{generateCoord:"value"})},preventIncremental:function(){var e=od.get(this.get("coordinateSystem"));if(e&&e.dimensions)return"lng"===e.dimensions[0]&&"lat"===e.dimensions[1]},defaultOption:{coordinateSystem:"cartesian2d",zlevel:0,z:2,geoIndex:0,blurSize:30,pointSize:20,maxOpacity:1,minOpacity:0}});function Xw(){var e=b();this.canvas=e,this.blurSize=30,this.pointSize=20,this.maxOpacity=1,this.minOpacity=0,this._gradientPixels={}}Xw.prototype={update:function(e,t,i,n,o,a){var r=this._getBrush(),s=this._getGradient(e,o,"inRange"),l=this._getGradient(e,o,"outOfRange"),d=this.pointSize+this.blurSize,c=this.canvas,u=c.getContext("2d"),h=e.length;c.width=t,c.height=i;for(var f=0;f<h;++f){var p=e[f],m=p[0],g=p[1],v=n(p[2]);u.globalAlpha=v,u.drawImage(r,m-d,g-d)}if(!c.width||!c.height)return c;for(var y=u.getImageData(0,0,c.width,c.height),b=y.data,x=0,w=b.length,_=this.minOpacity,C=this.maxOpacity-_;x<w;){v=b[x+3]/256;var S=4*Math.floor(255*v);if(0<v){var T=a(v)?s:l;0<v&&(v=v*C+_),b[x++]=T[S],b[x++]=T[S+1],b[x++]=T[S+2],b[x++]=T[S+3]*v*256}else x+=4}return u.putImageData(y,0,0),c},_getBrush:function(){var e=this._brushCanvas||(this._brushCanvas=b()),t=this.pointSize+this.blurSize,i=2*t;e.width=i,e.height=i;var n=e.getContext("2d");return n.clearRect(0,0,i,i),n.shadowOffsetX=i,n.shadowBlur=this.blurSize,n.shadowColor="#000",n.beginPath(),n.arc(-t,t,this.pointSize,0,2*Math.PI,!0),n.closePath(),n.fill(),e},_getGradient:function(e,t,i){for(var n=this._gradientPixels,o=n[i]||(n[i]=new Uint8ClampedArray(1024)),a=[0,0,0,0],r=0,s=0;s<256;s++)t[i](s/255,!0,a),o[r++]=a[0],o[r++]=a[1],o[r++]=a[2],o[r++]=a[3];return o}},Qu({type:"heatmap",render:function(i,e,t){var n;if(e.eachComponent("visualMap",function(t){t.eachTargetSeries(function(e){e===i&&(n=t)})}),I&&!n)throw new Error("Heatmap must use with visualMap");this.group.removeAll(),this._incrementalDisplayable=null;var o,a=i.coordinateSystem;"cartesian2d"===a.type||"calendar"===a.type?this._renderOnCartesianAndCalendar(i,t,0,i.getData().count()):"lng"===(o=a.dimensions)[0]&&"lat"===o[1]&&this._renderOnGeo(a,i,n,t)},incrementalPrepareRender:function(e,t,i){this.group.removeAll()},incrementalRender:function(e,t,i,n){t.coordinateSystem&&this._renderOnCartesianAndCalendar(t,n,e.start,e.end,!0)},_renderOnCartesianAndCalendar:function(e,t,i,n,o){var a,r,s=e.coordinateSystem;if("cartesian2d"===s.type){var l=s.getAxis("x"),d=s.getAxis("y");if(I){if("category"!==l.type||"category"!==d.type)throw new Error("Heatmap on cartesian must have two category axes");if(!l.onBand||!d.onBand)throw new Error("Heatmap on cartesian must have two axes with boundaryGap true")}a=l.getBandWidth(),r=d.getBandWidth()}for(var c=this.group,u=e.getData(),h="emphasis.itemStyle",f="emphasis.label",p=e.getModel("itemStyle").getItemStyle(["color"]),m=e.getModel(h).getItemStyle(),g=e.getModel("label"),v=e.getModel(f),y=s.type,b="cartesian2d"===y?[u.mapDimension("x"),u.mapDimension("y"),u.mapDimension("value")]:[u.mapDimension("time"),u.mapDimension("value")],x=i;x<n;x++){var w;if("cartesian2d"===y){if(isNaN(u.get(b[2],x)))continue;var _=s.dataToPoint([u.get(b[0],x),u.get(b[1],x)]);w=new xr({shape:{x:_[0]-a/2,y:_[1]-r/2,width:a,height:r},style:{fill:u.getItemVisual(x,"color"),opacity:u.getItemVisual(x,"opacity")}})}else{if(isNaN(u.get(b[1],x)))continue;w=new xr({z2:1,shape:s.dataToRect([u.get(b[0],x)]).contentShape,style:{fill:u.getItemVisual(x,"color"),opacity:u.getItemVisual(x,"opacity")}})}var C=u.getItemModel(x);u.hasItemOption&&(p=C.getModel("itemStyle").getItemStyle(["color"]),m=C.getModel(h).getItemStyle(),g=C.getModel("label"),v=C.getModel(f));var S=e.getRawValue(x),T="-";S&&null!=S[2]&&(T=S[2]),os(p,m,g,v,{labelFetcher:e,labelDataIndex:x,defaultText:T,isRectText:!0}),w.setStyle(p),ns(w,u.hasItemOption?m:D({},m)),(w.incremental=o)&&(w.useHoverLayer=!0),c.add(w),u.setItemGraphicEl(x,w)}},_renderOnGeo:function(o,e,t,i){var n=t.targetVisuals.inRange,a=t.targetVisuals.outOfRange,r=e.getData(),s=this._hmLayer||this._hmLayer||new Xw;s.blurSize=e.get("blurSize"),s.pointSize=e.get("pointSize"),s.minOpacity=e.get("minOpacity"),s.maxOpacity=e.get("maxOpacity");var l=o.getViewRect().clone(),d=o.getRoamTransform();l.applyTransform(d);var c,u,h,f,p,m,g,v,y,b=Math.max(l.x,0),x=Math.max(l.y,0),w=Math.min(l.width+l.x,i.getWidth()),_=Math.min(l.height+l.y,i.getHeight()),C=w-b,S=_-x,T=[r.mapDimension("lng"),r.mapDimension("lat"),r.mapDimension("value")],k=r.mapArray(T,function(e,t,i){var n=o.dataToPoint([e,t]);return n[0]-=b,n[1]-=x,n.push(i),n}),I=t.getExtent(),N="visualMap.continuous"===t.type?(g=I,v=t.option.range,y=g[1]-g[0],v=[(v[0]-g[0])/y,(v[1]-g[0])/y],function(e){return e>=v[0]&&e<=v[1]}):(c=I,u=t.getPieceList(),h=t.option.selected,f=c[1]-c[0],p=(u=M(u,function(e){return{interval:[(e.interval[0]-c[0])/f,(e.interval[1]-c[0])/f]}})).length,m=0,function(e){for(var t=m;t<p;t++)if((i=u[t].interval)[0]<=e&&e<=i[1]){m=t;break}if(t===p)for(t=m-1;0<=t;t--){var i;if((i=u[t].interval)[0]<=e&&e<=i[1]){m=t;break}}return 0<=t&&t<p&&h[t]});s.update(k,C,S,n.color.getNormalizer(),{inRange:n.color.getColorMapper(),outOfRange:a.color.getColorMapper()},N);var E=new wn({style:{width:C,height:S,x:b,y:x,image:s.canvas},silent:!0});this.group.add(E)},dispose:function(){}});var Kw=Rm.extend({type:"series.pictorialBar",dependencies:["grid"],defaultOption:{symbol:"circle",symbolSize:null,symbolRotate:null,symbolPosition:null,symbolOffset:null,symbolMargin:null,symbolRepeat:!1,symbolRepeatDirection:"end",symbolClip:!1,symbolBoundingData:null,symbolPatternSize:400,barGap:"-100%",progressive:0,hoverAnimation:!1},getInitialData:function(e){return e.stack=null,Kw.superApply(this,"getInitialData",arguments)}}),Jw=["itemStyle","borderWidth"],Qw=[{xy:"x",wh:"width",index:0,posDesc:["left","right"]},{xy:"y",wh:"height",index:1,posDesc:["top","bottom"]}],e_=new ur;Qu({type:"pictorialBar",render:function(e,t,i){var r=this.group,s=e.getData(),l=this._data,n=e.coordinateSystem,o=!!n.getBaseAxis().isHorizontal(),a=n.grid.getRect(),d={ecSize:{width:i.getWidth(),height:i.getHeight()},seriesModel:e,coordSys:n,coordSysExtent:[[a.x,a.x+a.width],[a.y,a.y+a.height]],isHorizontal:o,valueDim:Qw[+o],categoryDim:Qw[1-o]};return s.diff(l).add(function(e){if(s.hasValue(e)){var t=l_(s,e),i=t_(s,e,t,d),n=h_(s,d,i);s.setItemGraphicEl(e,n),r.add(n),v_(n,d,i)}}).update(function(e,t){var i=l.getItemGraphicEl(t);if(s.hasValue(e)){var n=l_(s,e),o=t_(s,e,n,d),a=p_(s,o);i&&a!==i.__pictorialShapeStr&&(r.remove(i),s.setItemGraphicEl(e,null),i=null),i?function(e,t,i){var n=i.animationModel,o=i.dataIndex;hs(e.__pictorialBundle,{position:i.bundlePosition.slice()},n,o),i.symbolRepeat?o_(e,t,i,!0):a_(e,t,i,!0);r_(e,i,!0),s_(e,t,i,!0)}(i,d,o):i=h_(s,d,o,!0),s.setItemGraphicEl(e,i),i.__pictorialSymbolMeta=o,r.add(i),v_(i,d,o)}else r.remove(i)}).remove(function(e){var t=l.getItemGraphicEl(e);t&&f_(l,e,t.__pictorialSymbolMeta.animationModel,t)}).execute(),this._data=s,this.group},dispose:ie,remove:function(t,e){var i=this.group,n=this._data;t.get("animation")?n&&n.eachItemGraphicEl(function(e){f_(n,e.dataIndex,t,e)}):i.removeAll()}});function t_(e,t,i,n){var o=e.getItemLayout(t),a=i.get("symbolRepeat"),r=i.get("symbolClip"),s=i.get("symbolPosition")||"start",l=(i.get("symbolRotate")||0)*Math.PI/180||0,d=i.get("symbolPatternSize")||2,c=i.isAnimationEnabled(),u={dataIndex:t,layout:o,itemModel:i,symbolType:e.getItemVisual(t,"symbol")||"circle",color:e.getItemVisual(t,"color"),symbolClip:r,symbolRepeat:a,symbolRepeatDirection:i.get("symbolRepeatDirection"),symbolPatternSize:d,rotation:l,animationModel:c?i:null,hoverAnimation:c&&i.get("hoverAnimation"),z2:i.getShallow("z",!0)||0};!function(e,t,i,n,o){var a,r=n.valueDim,s=e.get("symbolBoundingData"),l=n.coordSys.getOtherAxis(n.coordSys.getBaseAxis()),d=l.toGlobalCoord(l.dataToCoord(0)),c=1-+(i[r.wh]<=0);if(R(s)){var u=[i_(l,s[0])-d,i_(l,s[1])-d];u[1]<u[0]&&u.reverse(),a=u[c]}else a=null!=s?i_(l,s)-d:t?n.coordSysExtent[r.index][c]-d:i[r.wh];o.boundingLength=a,t&&(o.repeatCutLength=i[r.wh]);o.pxSign=0<a?1:a<0?-1:0}(i,a,o,n,u),function(e,t,i,n,o,a,r,s,l,d){var c=l.valueDim,u=l.categoryDim,h=Math.abs(i[u.wh]),f=e.getItemVisual(t,"symbolSize");f=R(f)?f.slice():(null==f&&(f="100%"),[f,f]);f[u.index]=Ps(f[u.index],h),f[c.index]=Ps(f[c.index],n?h:Math.abs(a)),d.symbolSize=f,(d.symbolScale=[f[0]/s,f[1]/s])[c.index]*=(l.isHorizontal?-1:1)*r}(e,t,o,a,0,u.boundingLength,u.pxSign,d,n,u),function(e,t,i,n,o){var a=e.get(Jw)||0;a&&(e_.attr({scale:t.slice(),rotation:i}),e_.updateTransform(),a/=e_.getLineScale(),a*=t[n.valueDim.index]);o.valueLineWidth=a}(i,u.symbolScale,l,n,u);var h=u.symbolSize,f=i.get("symbolOffset");return R(f)&&(f=[Ps(f[0],h[0]),Ps(f[1],h[1])]),function(e,t,i,n,o,a,r,s,l,d,c,u){var h=c.categoryDim,f=c.valueDim,p=u.pxSign,m=Math.max(t[f.index]+s,0),g=m;if(n){var v=Math.abs(l),y=j(e.get("symbolMargin"),"15%")+"",b=!1;y.lastIndexOf("!")===y.length-1&&(b=!0,y=y.slice(0,y.length-1)),y=Ps(y,t[f.index]);var x=Math.max(m+2*y,0),w=b?0:2*y,_=Xs(n),C=_?n:y_((v+w)/x),S=v-C*m;x=m+2*(y=S/2/(b?C:C-1)),w=b?0:2*y,_||"fixed"===n||(C=d?y_((Math.abs(d)+w)/x):0),g=C*x-w,u.repeatTimes=C,u.symbolMargin=y}var T=p*(g/2),k=u.pathPosition=[];k[h.index]=i[h.wh]/2,k[f.index]="start"===r?T:"end"===r?l-T:l/2,a&&(k[0]+=a[0],k[1]+=a[1]);var I=u.bundlePosition=[];I[h.index]=i[h.xy],I[f.index]=i[f.xy];var N=u.barRectShape=D({},i);N[f.wh]=p*Math.max(Math.abs(i[f.wh]),Math.abs(k[f.index]+T)),N[h.wh]=i[h.wh];var E=u.clipShape={};E[h.xy]=-i[h.xy],E[h.wh]=c.ecSize[h.wh],E[f.xy]=0,E[f.wh]=i[f.wh]}(i,h,o,a,0,f,s,u.valueLineWidth,u.boundingLength,u.repeatCutLength,n,u),u}function i_(e,t){return e.toGlobalCoord(e.dataToCoord(e.scale.parse(t)))}function n_(e){var t=e.symbolPatternSize,i=Of(e.symbolType,-t/2,-t/2,t,t,e.color);return i.attr({culling:!0}),"image"!==i.type&&i.setStyle({strokeNoScale:!0}),i}function o_(e,t,o,i){var n=e.__pictorialBundle,a=o.symbolSize,r=o.valueLineWidth,s=o.pathPosition,l=t.valueDim,d=o.repeatTimes||0,c=0,u=a[t.valueDim.index]+r+2*o.symbolMargin;for(m_(e,function(e){e.__pictorialAnimationIndex=c,e.__pictorialRepeatTimes=d,c<d?g_(e,null,p(c),o,i):g_(e,null,{scale:[0,0]},o,i,function(){n.remove(e)}),u_(e,o),c++});c<d;c++){var h=n_(o);h.__pictorialAnimationIndex=c,h.__pictorialRepeatTimes=d,n.add(h);var f=p(c);g_(h,{position:f.position,scale:[0,0]},{scale:f.scale,rotation:f.rotation},o,i),h.on("mouseover",m).on("mouseout",g),u_(h,o)}function p(e){var t=s.slice(),i=o.pxSign,n=e;return("start"===o.symbolRepeatDirection?0<i:i<0)&&(n=d-1-e),t[l.index]=u*(n-d/2+.5)+s[l.index],{position:t,scale:o.symbolScale.slice(),rotation:o.rotation}}function m(){m_(e,function(e){e.trigger("emphasis")})}function g(){m_(e,function(e){e.trigger("normal")})}}function a_(e,t,i,n){var o=e.__pictorialBundle,a=e.__pictorialMainPath;a?g_(a,null,{position:i.pathPosition.slice(),scale:i.symbolScale.slice(),rotation:i.rotation},i,n):(a=e.__pictorialMainPath=n_(i),o.add(a),g_(a,{position:i.pathPosition.slice(),scale:[0,0],rotation:i.rotation},{scale:i.symbolScale.slice()},i,n),a.on("mouseover",function(){this.trigger("emphasis")}).on("mouseout",function(){this.trigger("normal")})),u_(a,i)}function r_(e,t,i){var n=D({},t.barRectShape),o=e.__pictorialBarRect;o?g_(o,null,{shape:n},t,i):(o=e.__pictorialBarRect=new xr({z2:2,shape:n,silent:!0,style:{stroke:"transparent",fill:"transparent",lineWidth:0}}),e.add(o))}function s_(e,t,i,n){if(i.symbolClip){var o=e.__pictorialClipPath,a=D({},i.clipShape),r=t.valueDim,s=i.animationModel,l=i.dataIndex;if(o)hs(o,{shape:a},s,l);else{a[r.wh]=0,o=new xr({shape:a}),e.__pictorialBundle.setClipPath(o),e.__pictorialClipPath=o;var d={};d[r.wh]=i.clipShape[r.wh],xs[n?"updateProps":"initProps"](o,{shape:d},s,l)}}}function l_(e,t){var i=e.getItemModel(t);return i.getAnimationDelayParams=d_,i.isAnimationEnabled=c_,i}function d_(e){return{index:e.__pictorialAnimationIndex,count:e.__pictorialRepeatTimes}}function c_(){return this.parentModel.isAnimationEnabled()&&!!this.getShallow("animation")}function u_(e,t){e.off("emphasis").off("normal");var i=t.symbolScale.slice();t.hoverAnimation&&e.on("emphasis",function(){this.animateTo({scale:[1.1*i[0],1.1*i[1]]},400,"elasticOut")}).on("normal",function(){this.animateTo({scale:i.slice()},400,"elasticOut")})}function h_(e,t,i,n){var o=new ni,a=new ni;return o.add(a),(o.__pictorialBundle=a).attr("position",i.bundlePosition.slice()),i.symbolRepeat?o_(o,t,i):a_(o,0,i),r_(o,i,n),s_(o,t,i,n),o.__pictorialShapeStr=p_(e,i),o.__pictorialSymbolMeta=i,o}function f_(e,t,i,n){var o=n.__pictorialBarRect;o&&(o.style.text=null);var a=[];m_(n,function(e){a.push(e)}),n.__pictorialMainPath&&a.push(n.__pictorialMainPath),n.__pictorialClipPath&&(i=null),O(a,function(e){hs(e,{scale:[0,0]},i,t,function(){n.parent&&n.parent.remove(n)})}),e.setItemGraphicEl(t,null)}function p_(e,t){return[e.getItemVisual(t.dataIndex,"symbol")||"none",!!t.symbolRepeat,!!t.symbolClip].join(":")}function m_(t,i,n){O(t.__pictorialBundle.children(),function(e){e!==t.__pictorialBarRect&&i.call(n,e)})}function g_(e,t,i,n,o,a){t&&e.attr(t),n.symbolClip&&!o?i&&e.attr(i):i&&xs[o?"updateProps":"initProps"](e,i,n.animationModel,n.dataIndex,a)}function v_(e,t,i){var n=i.color,o=i.dataIndex,a=i.itemModel,r=a.getModel("itemStyle").getItemStyle(["color"]),s=a.getModel("emphasis.itemStyle").getItemStyle(),l=a.getShallow("cursor");m_(e,function(e){e.setColor(n),e.setStyle(E({fill:n,opacity:i.opacity},r)),ns(e,s),l&&(e.cursor=l),e.z2=i.z2});var d={},c=(t.valueDim.posDesc[+(0<i.boundingLength)],e.__pictorialBarRect);Um(c.style,d,a,n,t.seriesModel,o),ns(c,d)}function y_(e){var t=Math.round(e);return Math.abs(e-t)<1e-4?t:Math.ceil(e)}Gu(L(tf,"pictorialBar")),Yu(Vp("pictorialBar","roundRect"));var b_=function(e,t,i,n,o){np.call(this,e,t,i),this.type=n||"value",this.position=o||"bottom",this.orient=null};function x_(e,t,i){this.dimension="single",this.dimensions=["single"],this._axis=null,this._rect,this._init(e,t,i),this.model=e}function w_(e,t){t=t||{};var i=e.coordinateSystem,n=e.axis,o={},a=n.position,r=n.orient,s=i.getRect(),l=[s.x,s.x+s.width,s.y,s.y+s.height],d={horizontal:{top:l[2],bottom:l[3]},vertical:{left:l[0],right:l[1]}};o.position=["vertical"===r?d.vertical[a]:l[0],"horizontal"===r?d.horizontal[a]:l[3]];o.rotation=Math.PI/2*{horizontal:0,vertical:1}[r];o.labelDirection=o.tickDirection=o.nameDirection={top:-1,bottom:1,right:1,left:-1}[a],e.get("axisTick.inside")&&(o.tickDirection=-o.tickDirection),j(t.labelInside,e.get("axisLabel.inside"))&&(o.labelDirection=-o.labelDirection);var c=t.rotate;return null==c&&(c=e.get("axisLabel.rotate")),o.labelRotation="top"===a?-c:c,o.z2=1,o}b_.prototype={constructor:b_,model:null,isHorizontal:function(){var e=this.position;return"top"===e||"bottom"===e},pointToData:function(e,t){return this.coordinateSystem.pointToData(e,t)[0]},toGlobalCoord:null,toLocalCoord:null},_(b_,np),od.register("single",{create:function(n,o){var a=[];return n.eachComponent("singleAxis",function(e,t){var i=new x_(e,n,o);i.name="single_"+t,i.resize(e,o),e.coordinateSystem=i,a.push(i)}),n.eachSeries(function(e){if("singleAxis"===e.get("coordinateSystem")){var t=n.queryComponents({mainType:"singleAxis",index:e.get("singleAxisIndex"),id:e.get("singleAxisId")})[0];e.coordinateSystem=t&&t.coordinateSystem}}),a},dimensions:(x_.prototype={type:"singleAxis",axisPointerEnabled:!0,constructor:x_,_init:function(e,t,i){var n=this.dimension,o=new b_(n,Tf(e),[0,0],e.get("type"),e.get("position")),a="category"===o.type;o.onBand=a&&e.get("boundaryGap"),o.inverse=e.get("inverse"),o.orient=e.get("orient"),(e.axis=o).model=e,(o.coordinateSystem=this)._axis=o},update:function(e,t){e.eachSeries(function(e){if(e.coordinateSystem===this){var t=e.getData();O(t.mapDimension(this.dimension,!0),function(e){this._axis.scale.unionExtentFromData(t,e)},this),Sf(this._axis.scale,this._axis.model)}},this)},resize:function(e,t){this._rect=xl({left:e.get("left"),top:e.get("top"),right:e.get("right"),bottom:e.get("bottom"),width:e.get("width"),height:e.get("height")},{width:t.getWidth(),height:t.getHeight()}),this._adjustAxis()},getRect:function(){return this._rect},_adjustAxis:function(){var e=this._rect,t=this._axis,i=t.isHorizontal(),n=i?[0,e.width]:[0,e.height],o=t.reverse?1:0;t.setExtent(n[o],n[1-o]),this._updateAxisTransform(t,i?e.x:e.y)},_updateAxisTransform:function(e,t){var i=e.getExtent(),n=i[0]+i[1],o=e.isHorizontal();e.toGlobalCoord=o?function(e){return e+t}:function(e){return n-e+t},e.toLocalCoord=o?function(e){return e-t}:function(e){return n-e+t}},getAxis:function(){return this._axis},getBaseAxis:function(){return this._axis},getAxes:function(){return[this._axis]},getTooltipAxes:function(){return{baseAxes:[this.getAxis()]}},containPoint:function(e){var t=this.getRect(),i=this.getAxis();return"horizontal"===i.orient?i.contain(i.toLocalCoord(e[0]))&&e[1]>=t.y&&e[1]<=t.y+t.height:i.contain(i.toLocalCoord(e[1]))&&e[0]>=t.y&&e[0]<=t.y+t.height},pointToData:function(e){var t=this.getAxis();return[t.coordToData(t.toLocalCoord(e["horizontal"===t.orient?0:1]))]},dataToPoint:function(e){var t=this.getAxis(),i=this.getRect(),n=[],o="horizontal"===t.orient?0:1;return e instanceof Array&&(e=e[0]),n[o]=t.toGlobalCoord(t.dataToCoord(+e)),n[1-o]=0===o?i.y+i.height/2:i.x+i.width/2,n}}).dimensions});var __=["axisLine","axisTickLabel","axisName"],C_=Im.extend({type:"singleAxis",axisPointerClass:"SingleAxisPointer",render:function(e,t,i,n){var o=this.group;o.removeAll();var a=w_(e),r=new fm(e,a);O(__,r.add,r),o.add(r.getGroup()),e.get("splitLine.show")&&this._splitLine(e),C_.superCall(this,"render",e,t,i,n)},_splitLine:function(e){var t=e.axis;if(!t.scale.isBlank()){var i=e.getModel("splitLine"),n=i.getModel("lineStyle"),o=n.get("width"),a=n.get("color");a=a instanceof Array?a:[a];for(var r=e.coordinateSystem.getRect(),s=t.isHorizontal(),l=[],d=0,c=t.getTicksCoords({tickModel:i}),u=[],h=[],f=0;f<c.length;++f){var p=t.toGlobalCoord(c[f].coord);h[1]=s?(u[0]=p,u[1]=r.y,h[0]=p,r.y+r.height):(u[0]=r.x,u[1]=p,h[0]=r.x+r.width,p);var m=d++%a.length;l[m]=l[m]||[],l[m].push(new wr(Vr({shape:{x1:u[0],y1:u[1],x2:h[0],y2:h[1]},style:{lineWidth:o},silent:!0})))}for(f=0;f<l.length;++f)this.group.add(Fr(l[f],{style:{stroke:a[f%a.length],lineDash:n.getLineDash(o),lineWidth:o},silent:!0}))}}}),S_=Nl.extend({type:"singleAxis",layoutMode:"box",axis:null,coordinateSystem:null,getCoordSysModel:function(){return this}});m(S_.prototype,Nf),Qp("single",S_,function(e,t){return t.type||(t.data?"category":"value")},{left:"5%",top:"5%",right:"5%",bottom:"5%",type:"value",position:"bottom",orient:"horizontal",axisLine:{show:!0,lineStyle:{width:2,type:"solid"}},tooltip:{show:!0},axisTick:{show:!0,length:6,lineStyle:{width:2}},axisLabel:{show:!0,interval:"auto"},splitLine:{show:!0,lineStyle:{type:"dashed",opacity:.2}}});var T_=function(e,t){var i,n=[],o=e.seriesIndex;if(null==o||!(i=t.getSeriesByIndex(o)))return{point:[]};var a=i.getData(),r=go(a,e);if(null==r||r<0||R(r))return{point:[]};var s=a.getItemGraphicEl(r),l=i.coordinateSystem;if(i.getTooltipPosition)n=i.getTooltipPosition(r)||[];else if(l&&l.dataToPoint)n=l.dataToPoint(a.getValues(M(l.dimensions,function(e){return a.mapDimension(e)}),r,!0))||[];else if(s){var d=s.getBoundingRect().clone();d.applyTransform(s.transform),n=[d.x+d.width/2,d.y+d.height/2]}return{point:n,el:s}},k_=O,I_=L,N_=vo();function E_(e,t,i,n,o){var a=e.axis;if(!a.scale.isBlank()&&a.containData(t))if(e.involveSeries){var l,r,d,c,u,h,f,p,s=(l=t,d=(r=e).axis,c=d.dim,u=l,h=[],f=Number.MAX_VALUE,p=-1,k_(r.seriesModels,function(t,e){var i,n,o=t.getData().mapDimension(c,!0);if(t.getAxisTooltipData){var a=t.getAxisTooltipData(o,l,d);n=a.dataIndices,i=a.nestestValue}else{if(!(n=t.getData().indicesOfNearest(o[0],l,"category"===d.type?.5:null)).length)return;i=t.getData().get(o[0],n[0])}if(null!=i&&isFinite(i)){var r=l-i,s=Math.abs(r);s<=f&&((s<f||0<=r&&p<0)&&(f=s,p=r,u=i,h.length=0),k_(n,function(e){h.push({seriesIndex:t.seriesIndex,dataIndexInside:e,dataIndex:t.getData().getRawIndex(e)})}))}}),{payloadBatch:h,snapToValue:u}),m=s.payloadBatch,g=s.snapToValue;m[0]&&null==o.seriesIndex&&D(o,m[0]),!n&&e.snap&&a.containData(g)&&null!=g&&(t=g),i.showPointer(e,t,m,o),i.showTooltip(e,s,g)}else i.showPointer(e,t)}function M_(e,t,i,n){e[t.key]={value:i,payloadBatch:n}}function D_(e,t,i,n){var o=i.payloadBatch,a=t.axis,r=a.model,s=t.axisPointerModel;if(t.triggerTooltip&&o.length){var l=t.coordSys.model,d=km(l),c=e.map[d];c||(c=e.map[d]={coordSysId:l.id,coordSysIndex:l.componentIndex,coordSysType:l.type,coordSysMainType:l.mainType,dataByAxis:[]},e.list.push(c)),c.dataByAxis.push({axisDim:a.dim,axisIndex:r.componentIndex,axisType:r.type,axisId:r.id,value:n,valueLabelOpt:{precision:s.get("label.precision"),formatter:s.get("label.formatter")},seriesDataIndices:o.slice()})}}function A_(e){var t=e.axis.model,i={},n=i.axisDim=e.axis.dim;return i.axisIndex=i[n+"AxisIndex"]=t.componentIndex,i.axisName=i[n+"AxisName"]=t.name,i.axisId=i[n+"AxisId"]=t.id,i}function L_(e){return!e||null==e[0]||isNaN(e[0])||null==e[1]||isNaN(e[1])}Xu({type:"axisPointer",coordSysAxesInfo:null,defaultOption:{show:"auto",triggerOn:null,zlevel:0,z:50,type:"line",snap:!1,triggerTooltip:!0,value:null,status:null,link:[],animation:null,animationDurationUpdate:200,lineStyle:{color:"#aaa",width:1,type:"solid"},shadowStyle:{color:"rgba(150,150,150,0.3)"},label:{show:!0,formatter:null,precision:"auto",margin:3,color:"#fff",padding:[5,7,5,7],backgroundColor:"auto",borderColor:null,borderWidth:0,shadowBlur:3,shadowColor:"#aaa"},handle:{show:!1,icon:"M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z",size:45,margin:50,color:"#333",shadowBlur:3,shadowColor:"#aaa",shadowOffsetX:0,shadowOffsetY:2,throttle:40}}});var P_=vo(),R_=O;function U_(e,t,i){if(!v.node){var n=t.getZr();P_(n).records||(P_(n).records={}),function(s,l){if(P_(s).initialized)return;function e(e,r){s.on(e,function(t){var i,n,o,a=(i=l,{dispatchAction:o=function(e){var t=n[e.type];t?t.push(e):(e.dispatchAction=o,i.dispatchAction(e))},pendings:n={showTip:[],hideTip:[]}});R_(P_(s).records,function(e){e&&r(e,t,a.dispatchAction)}),function(e,t){var i,n=e.showTip.length,o=e.hideTip.length;n?i=e.showTip[n-1]:o&&(i=e.hideTip[o-1]);i&&(i.dispatchAction=null,t.dispatchAction(i))}(a.pendings,l)})}P_(s).initialized=!0,e("click",L(B_,"click")),e("mousemove",L(B_,"mousemove")),e("globalout",O_)}(n,t),(P_(n).records[e]||(P_(n).records[e]={})).handler=i}}function O_(e,t,i){e.handler("leave",null,i)}function B_(e,t,i,n){t.handler(e,i,n)}function z_(e,t){if(!v.node){var i=t.getZr();(P_(i).records||{})[e]&&(P_(i).records[e]=null)}}var F_=Ku({type:"axisPointer",render:function(e,t,i){var n=t.getComponent("tooltip"),o=e.get("triggerOn")||n&&n.get("triggerOn")||"mousemove|click";U_("axisPointer",i,function(e,t,i){"none"!==o&&("leave"===e||0<=o.indexOf(e))&&i({type:"updateAxisPointer",currTrigger:e,x:t&&t.offsetX,y:t&&t.offsetY})})},remove:function(e,t){z_(t.getZr(),"axisPointer"),F_.superApply(this._model,"remove",arguments)},dispose:function(e,t){z_("axisPointer",t),F_.superApply(this._model,"dispose",arguments)}}),H_=vo(),V_=N,j_=A;function W_(){}function $_(e,t,i,n){(function i(n,e){{if(B(n)&&B(e)){var o=!0;return O(e,function(e,t){o=o&&i(n[t],e)}),!!o}return n===e}})(H_(i).lastProp,n)||(H_(i).lastProp=n,t?hs(i,n,e):(i.stopAnimation(),i.attr(n)))}function G_(e,t){e[t.get("label.show")?"show":"hide"]()}function Y_(e){return{position:e.position.slice(),rotation:e.rotation||0}}function q_(e,t,i){var n=t.get("z"),o=t.get("zlevel");e&&e.traverse(function(e){"group"!==e.type&&(null!=n&&(e.z=n),null!=o&&(e.zlevel=o),e.silent=i)})}function Z_(e){var t,i=e.get("type"),n=e.getModel(i+"Style");return"line"===i?(t=n.getLineStyle()).fill=null:"shadow"===i&&((t=n.getAreaStyle()).stroke=null),t}function X_(e,t,i,n,o){var a=K_(i.get("value"),t.axis,t.ecModel,i.get("seriesDataIndices"),{precision:i.get("label.precision"),formatter:i.get("label.formatter")}),r=i.getModel("label"),s=el(r.get("padding")||0),l=r.getFont(),d=Fi(a,l),c=o.position,u=d.width+s[1]+s[3],h=d.height+s[0]+s[2],f=o.align;"right"===f&&(c[0]-=u),"center"===f&&(c[0]-=u/2);var p,m,g,v,y,b,x=o.verticalAlign;"bottom"===x&&(c[1]-=h),"middle"===x&&(c[1]-=h/2),p=c,m=u,g=h,y=(v=n).getWidth(),b=v.getHeight(),p[0]=Math.min(p[0]+m,y)-m,p[1]=Math.min(p[1]+g,b)-g,p[0]=Math.max(p[0],0),p[1]=Math.max(p[1],0);var w=r.get("backgroundColor");w&&"auto"!==w||(w=t.get("axisLine.lineStyle.color")),e.label={shape:{x:0,y:0,width:u,height:h,r:r.get("borderRadius")},position:c.slice(),style:{text:a,textFont:l,textFill:r.getTextColor(),textPosition:"inside",fill:w,stroke:r.get("borderColor")||"transparent",lineWidth:r.get("borderWidth")||0,shadowBlur:r.get("shadowBlur"),shadowColor:r.get("shadowColor"),shadowOffsetX:r.get("shadowOffsetX"),shadowOffsetY:r.get("shadowOffsetY")},z2:10}}function K_(e,t,o,i,n){e=t.scale.parse(e);var a=t.scale.getLabel(e,{precision:n.precision}),r=n.formatter;if(r){var s={value:If(t,e),seriesData:[]};O(i,function(e){var t=o.getSeriesByIndex(e.seriesIndex),i=e.dataIndexInside,n=t&&t.getDataParams(i);n&&s.seriesData.push(n)}),U(r)?a=r.replace("{value}",a):k(r)&&(a=r(s))}return a}function J_(e,t,i){var n=Oe();return Ve(n,n,i.rotation),He(n,n,i.position),ms([e.dataToCoord(t),(i.labelOffset||0)+(i.labelDirection||1)*(i.labelMargin||0)],n)}function Q_(e,t,i,n,o,a){var r=fm.innerTextLayout(i.rotation,0,i.labelDirection);i.labelMargin=o.get("label.margin"),X_(t,n,o,a,{position:J_(n.axis,e,i),align:r.textAlign,verticalAlign:r.textVerticalAlign})}function eC(e,t,i){return{x1:e[i=i||0],y1:e[1-i],x2:t[i],y2:t[1-i]}}function tC(e,t,i){return{x:e[i=i||0],y:e[1-i],width:t[i],height:t[1-i]}}function iC(e,t,i,n,o,a){return{cx:e,cy:t,r0:i,r:n,startAngle:o,endAngle:a,clockwise:!0}}To((W_.prototype={_group:null,_lastGraphicKey:null,_handle:null,_dragging:!1,_lastValue:null,_lastStatus:null,_payloadInfo:null,animationThreshold:15,render:function(e,t,i,n){var o=t.get("value"),a=t.get("status");if(this._axisModel=e,this._axisPointerModel=t,this._api=i,n||this._lastValue!==o||this._lastStatus!==a){this._lastValue=o,this._lastStatus=a;var r=this._group,s=this._handle;if(!a||"hide"===a)return r&&r.hide(),void(s&&s.hide());r&&r.show(),s&&s.show();var l={};this.makeElOption(l,o,e,t,i);var d=l.graphicKey;d!==this._lastGraphicKey&&this.clear(i),this._lastGraphicKey=d;var c=this._moveAnimation=this.determineAnimation(e,t);if(r){var u=L($_,t,c);this.updatePointerEl(r,l,u,t),this.updateLabelEl(r,l,u,t)}else r=this._group=new ni,this.createPointerEl(r,l,e,t),this.createLabelEl(r,l,e,t),i.getZr().add(r);q_(r,t,!0),this._renderHandle(o)}},remove:function(e){this.clear(e)},dispose:function(e){this.clear(e)},determineAnimation:function(e,t){var i=t.get("animation"),n=e.axis,o="category"===n.type,a=t.get("snap");if(!a&&!o)return!1;if("auto"!==i&&null!=i)return!0===i;var r=this.animationThreshold;if(o&&n.getBandWidth()>r)return!0;if(a){var s=Sm(e).seriesDataCount,l=n.getExtent();return Math.abs(l[0]-l[1])/s>r}return!1},makeElOption:function(e,t,i,n,o){},createPointerEl:function(e,t,i,n){var o=t.pointer;if(o){var a=H_(e).pointerEl=new xs[o.type](V_(t.pointer));e.add(a)}},createLabelEl:function(e,t,i,n){if(t.label){var o=H_(e).labelEl=new xr(V_(t.label));e.add(o),G_(o,n)}},updatePointerEl:function(e,t,i){var n=H_(e).pointerEl;n&&(n.setStyle(t.pointer.style),i(n,{shape:t.pointer.shape}))},updateLabelEl:function(e,t,i,n){var o=H_(e).labelEl;o&&(o.setStyle(t.label.style),i(o,{shape:t.label.shape,position:t.label.position}),G_(o,n))},_renderHandle:function(e){if(!this._dragging&&this.updateHandleTransform){var t,i=this._axisPointerModel,n=this._api.getZr(),o=this._handle,a=i.getModel("handle"),r=i.get("status");if(!a.get("show")||!r||"hide"===r)return o&&n.remove(o),void(this._handle=null);this._handle||(t=!0,o=this._handle=bs(a.get("icon"),{cursor:"move",draggable:!0,onmousemove:function(e){Ln(e.event)},onmousedown:j_(this._onHandleDragMove,this,0,0),drift:j_(this._onHandleDragMove,this),ondragend:j_(this._onHandleDragEnd,this)}),n.add(o)),q_(o,i,!1);o.setStyle(a.getItemStyle(null,["color","borderColor","borderWidth","opacity","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"]));var s=a.get("size");R(s)||(s=[s,s]),o.attr("scale",[s[0]/2,s[1]/2]),bc(this,"_doDispatchAxisPointer",a.get("throttle")||0,"fixRate"),this._moveHandleToValue(e,t)}},_moveHandleToValue:function(e,t){$_(this._axisPointerModel,!t&&this._moveAnimation,this._handle,Y_(this.getHandleTransform(e,this._axisModel,this._axisPointerModel)))},_onHandleDragMove:function(e,t){var i=this._handle;if(i){this._dragging=!0;var n=this.updateHandleTransform(Y_(i),[e,t],this._axisModel,this._axisPointerModel);this._payloadInfo=n,i.stopAnimation(),i.attr(Y_(n)),H_(i).lastProp=null,this._doDispatchAxisPointer()}},_doDispatchAxisPointer:function(){if(this._handle){var e=this._payloadInfo,t=this._axisModel;this._api.dispatchAction({type:"updateAxisPointer",x:e.cursorPoint[0],y:e.cursorPoint[1],tooltipOption:e.tooltipOption,axesInfo:[{axisDim:t.axis.dim,axisIndex:t.componentIndex}]})}},_onHandleDragEnd:function(e){if(this._dragging=!1,this._handle){var t=this._axisPointerModel.get("value");this._moveHandleToValue(t),this._api.dispatchAction({type:"hideTip"})}},getHandleTransform:null,updateHandleTransform:null,clear:function(e){this._lastValue=null,this._lastStatus=null;var t=e.getZr(),i=this._group,n=this._handle;t&&i&&(this._lastGraphicKey=null,i&&t.remove(i),n&&t.remove(n),this._group=null,this._handle=null,this._payloadInfo=null)},doClear:function(){},buildLabel:function(e,t,i){return{x:e[i=i||0],y:e[1-i],width:t[i],height:t[1-i]}}}).constructor=W_);var nC=W_.extend({makeElOption:function(e,t,i,n,o){var a=i.axis,r=a.grid,s=n.get("type"),l=oC(r,a).getOtherAxis(a).getGlobalExtent(),d=a.toGlobalCoord(a.dataToCoord(t,!0));if(s&&"none"!==s){var c=Z_(n),u=aC[s](a,d,l,c);u.style=c,e.graphicKey=u.type,e.pointer=u}Q_(t,e,Dm(r.model,i),i,n,o)},getHandleTransform:function(e,t,i){var n=Dm(t.axis.grid.model,t,{labelInside:!1});return n.labelMargin=i.get("handle.margin"),{position:J_(t.axis,e,n),rotation:n.rotation+(n.labelDirection<0?Math.PI:0)}},updateHandleTransform:function(e,t,i,n){var o=i.axis,a=o.grid,r=o.getGlobalExtent(!0),s=oC(a,o).getOtherAxis(o).getGlobalExtent(),l="x"===o.dim?0:1,d=e.position;d[l]+=t[l],d[l]=Math.min(r[1],d[l]),d[l]=Math.max(r[0],d[l]);var c=(s[1]+s[0])/2,u=[c,c];u[l]=d[l];return{position:d,rotation:e.rotation,cursorPoint:u,tooltipOption:[{verticalAlign:"middle"},{align:"center"}][l]}}});function oC(e,t){var i={};return i[t.dim+"AxisIndex"]=t.index,e.getCartesian(i)}var aC={line:function(e,t,i,n){var o=eC([t,i[0]],[t,i[1]],rC(e));return Vr({shape:o,style:n}),{type:"Line",shape:o}},shadow:function(e,t,i,n){var o=Math.max(1,e.getBandWidth()),a=i[1]-i[0];return{type:"Rect",shape:tC([t-o/2,i[0]],[o,a],rC(e))}}};function rC(e){return"x"===e.dim?0:1}Im.registerAxisPointerClass("CartesianAxisPointer",nC),Vu(function(e){if(e){(!e.axisPointer||0===e.axisPointer.length)&&(e.axisPointer={});var t=e.axisPointer.link;t&&!R(t)&&(e.axisPointer.link=[t])}}),ju(tu.PROCESSOR.STATISTIC,function(e,t){e.getComponent("axisPointer").coordSysAxesInfo=_m(e,t)}),Wu({type:"updateAxisPointer",event:"updateAxisPointer",update:":updateAxisPointer"},function(e,t,i){var n=e.currTrigger,r=[e.x,e.y],o=e,a=e.dispatchAction||A(i.dispatchAction,i),s=t.getComponent("axisPointer").coordSysAxesInfo;if(s){L_(r)&&(r=T_({seriesIndex:o.seriesIndex,dataIndex:o.dataIndex},t).point);var l=L_(r),d=o.axesInfo,c=s.axesInfo,u="leave"===n||L_(r),h={},f={},p={list:[],map:{}},m={showPointer:I_(M_,f),showTooltip:I_(D_,p)};k_(s.coordSysMap,function(e,t){var a=l||e.containPoint(r);k_(s.coordSysAxesInfo[t],function(e,t){var i=e.axis,n=function(e,t){for(var i=0;i<(e||[]).length;i++){var n=e[i];if(t.axis.dim===n.axisDim&&t.axis.model.componentIndex===n.axisIndex)return n}}(d,e);if(!u&&a&&(!d||n)){var o=n&&n.value;null!=o||l||(o=i.pointToData(r)),null!=o&&E_(e,o,m,!1,h)}})});var g,v,y,b={};return k_(c,function(o,e){var a=o.linkGroup;a&&!f[e]&&k_(a.axesInfo,function(e,t){var i=f[t];if(e!==o&&i){var n=i.value;a.mapper&&(n=o.axis.scale.parse(a.mapper(n,A_(e),A_(o)))),b[o.key]=n}})}),k_(b,function(e,t){E_(c[t],e,m,!0,h)}),g=f,v=c,y=h.axesInfo=[],k_(v,function(e,t){var i=e.axisPointerModel.option,n=g[t];n?(!e.useHandle&&(i.status="show"),i.value=n.value,i.seriesDataIndices=(n.payloadBatch||[]).slice()):!e.useHandle&&(i.status="hide"),"show"===i.status&&y.push({axisDim:e.axis.dim,axisIndex:e.axis.model.componentIndex,value:i.value})}),function(e,t,i,n){if(L_(t)||!e.list.length)return n({type:"hideTip"});var o=((e.list[0].dataByAxis[0]||{}).seriesDataIndices||[])[0]||{};n({type:"showTip",escapeConnect:!0,x:t[0],y:t[1],tooltipOption:i.tooltipOption,position:i.position,dataIndexInside:o.dataIndexInside,dataIndex:o.dataIndex,seriesIndex:o.seriesIndex,dataByCoordSys:e.list})}(p,r,e,a),function(e,t,i){var n=i.getZr(),o="axisPointerLastHighlights",a=N_(n)[o]||{},r=N_(n)[o]={};k_(e,function(e,t){var i=e.axisPointerModel.option;"show"===i.status&&k_(i.seriesDataIndices,function(e){var t=e.seriesIndex+" | "+e.dataIndex;r[t]=e})});var s=[],l=[];O(a,function(e,t){!r[t]&&l.push(e)}),O(r,function(e,t){!a[t]&&s.push(e)}),l.length&&i.dispatchAction({type:"downplay",escapeConnect:!0,batch:l}),s.length&&i.dispatchAction({type:"highlight",escapeConnect:!0,batch:s})}(c,0,i),h}});var sC=["x","y"],lC=["width","height"],dC=W_.extend({makeElOption:function(e,t,i,n,o){var a=i.axis,r=a.coordinateSystem,s=hC(r,1-uC(a)),l=r.dataToPoint(t)[0],d=n.get("type");if(d&&"none"!==d){var c=Z_(n),u=cC[d](a,l,s,c);u.style=c,e.graphicKey=u.type,e.pointer=u}Q_(t,e,w_(i),i,n,o)},getHandleTransform:function(e,t,i){var n=w_(t,{labelInside:!1});return n.labelMargin=i.get("handle.margin"),{position:J_(t.axis,e,n),rotation:n.rotation+(n.labelDirection<0?Math.PI:0)}},updateHandleTransform:function(e,t,i,n){var o=i.axis,a=o.coordinateSystem,r=uC(o),s=hC(a,r),l=e.position;l[r]+=t[r],l[r]=Math.min(s[1],l[r]),l[r]=Math.max(s[0],l[r]);var d=hC(a,1-r),c=(d[1]+d[0])/2,u=[c,c];return u[r]=l[r],{position:l,rotation:e.rotation,cursorPoint:u,tooltipOption:{verticalAlign:"middle"}}}}),cC={line:function(e,t,i,n){var o=eC([t,i[0]],[t,i[1]],uC(e));return Vr({shape:o,style:n}),{type:"Line",shape:o}},shadow:function(e,t,i,n){var o=e.getBandWidth(),a=i[1]-i[0];return{type:"Rect",shape:tC([t-o/2,i[0]],[o,a],uC(e))}}};function uC(e){return e.isHorizontal()?0:1}function hC(e,t){var i=e.getRect();return[i[sC[t]],i[sC[t]]+i[lC[t]]]}Im.registerAxisPointerClass("SingleAxisPointer",dC),Ku({type:"single"});var fC=Zd.extend({type:"series.themeRiver",dependencies:["singleAxis"],nameMap:null,init:function(e){fC.superApply(this,"init",arguments),this.legendDataProvider=function(){return this.getRawData()}},fixData:function(e){for(var t=e.length,i=M(Gx().key(function(e){return e[2]}).entries(e),function(e){return{name:e.key,dataList:e.values}}),n=i.length,o=-1,a=-1,r=0;r<n;++r){var s=i[r].dataList.length;o<s&&(o=s,a=r)}for(var l=0;l<n;++l)if(l!==a)for(var d=i[l].name,c=0;c<o;++c){for(var u=i[a].dataList[c][0],h=i[l].dataList.length,f=-1,p=0;p<h;++p){if(i[l].dataList[p][0]===u){f=p;break}}-1===f&&(e[t]=[],e[t][0]=u,e[t][1]=0,e[t][2]=d,t++)}return e},getInitialData:function(e,t){for(var i=t.queryComponents({mainType:"singleAxis",index:this.get("singleAxisIndex"),id:this.get("singleAxisId")})[0].get("type"),n=T(e.data,function(e){return void 0!==e[2]}),o=this.fixData(n||[]),a=[],r=this.nameMap=ee(),s=0,l=0;l<o.length;++l)a.push(o[l][2]),r.get(o[l][2])||(r.set(o[l][2],s),s++);var d=Eh(o,{coordDimensions:["single"],dimensionsDefine:[{name:"time",type:ah(i)},{name:"value",type:"float"},{name:"name",type:"ordinal"}],encodeDefine:{single:0,value:1,itemName:2}}),c=new mh(d,this);return c.initData(o),c},getLayerSeries:function(){for(var i=this.getData(),e=i.count(),t=[],n=0;n<e;++n)t[n]=n;for(var o=M(Gx().key(function(e){return i.get("name",e)}).entries(t),function(e){return{name:e.key,indices:e.values}}),a=i.mapDimension("single"),r=0;r<o.length;++r)o[r].indices.sort(s);function s(e,t){return i.get(a,e)-i.get(a,t)}return o},getAxisTooltipData:function(e,t,i){R(e)||(e=e?[e]:[]);for(var n,o=this.getData(),a=this.getLayerSeries(),r=[],s=a.length,l=0;l<s;++l){for(var d=Number.MAX_VALUE,c=-1,u=a[l].indices.length,h=0;h<u;++h){var f=o.get(e[0],a[l].indices[h]),p=Math.abs(f-t);p<=d&&(n=f,d=p,c=a[l].indices[h])}r.push(c)}return{dataIndices:r,nestestValue:n}},formatTooltip:function(e){var t=this.getData(),i=t.getName(e),n=t.get(t.mapDimension("value"),e);return(isNaN(n)||null==n)&&(n="-"),nl(i+" : "+n)},defaultOption:{zlevel:0,z:2,coordinateSystem:"singleAxis",boundaryGap:["10%","10%"],singleAxisIndex:0,animationEasing:"linear",label:{margin:4,show:!0,position:"left",color:"#000",fontSize:11},emphasis:{label:{show:!0}}}});Qu({type:"themeRiver",init:function(){this._layers=[]},render:function(k,e,t){var I=k.getData(),N=this.group,E=k.getLayerSeries(),i=I.getLayout("layoutInfo"),n=i.rect,o=i.boundaryGap;function a(e){return e.name}N.attr("position",[0,n.y+o[0]]);var r=new ih(this._layersSeries||[],E,a,a),M={};function s(e,t,i){var n=this._layers;if("remove"!==e){for(var o,a,r,s=[],l=[],d=E[t].indices,c=0;c<d.length;c++){var u=I.getItemLayout(d[c]),h=u.x,f=u.y0,p=u.y;s.push([h,f]),l.push([h,f+p]),o=I.getItemVisual(d[c],"color")}var m,g,v,y,b=I.getItemLayout(d[0]),x=I.getItemModel(d[c-1]),w=x.getModel("label"),_=w.get("margin");if("add"===e){var C=M[t]=new ni;a=new Rp({shape:{points:s,stackedOnPoints:l,smooth:.4,stackedOnSmooth:.4,smoothConstraint:!1},z2:0}),r=new cr({style:{x:b.x-_,y:b.y0+b.y/2}}),C.add(a),C.add(r),N.add(C),a.setClipPath((m=a.getBoundingRect(),g=k,v=function(){a.removeClipPath()},fs(y=new xr({shape:{x:m.x-10,y:m.y-10,width:0,height:m.height+20}}),{shape:{width:m.width+20,height:m.height+20}},g,v),y))}else{C=n[i];a=C.childAt(0),r=C.childAt(1),N.add(C),M[t]=C,hs(a,{shape:{points:s,stackedOnPoints:l}},k),hs(r,{style:{x:b.x-_,y:b.y0+b.y/2}},k)}var S=x.getModel("emphasis.itemStyle"),T=x.getModel("itemStyle");as(r.style,w,{text:w.get("show")?k.getFormattedLabel(d[c-1],"normal")||I.getName(d[c-1]):null,textVerticalAlign:"middle"}),a.setStyle(D({fill:o},T.getItemStyle(["color"]))),ns(a,S.getItemStyle())}else N.remove(n[t])}r.add(A(s,this,"add")).update(A(s,this,"update")).remove(A(s,this,"remove")).execute(),this._layersSeries=E,this._layers=M},dispose:function(){}});function pC(i,e,t){if(i.count())for(var n,o=e.coordinateSystem,a=e.getLayerSeries(),r=i.mapDimension("single"),s=i.mapDimension("value"),l=M(a,function(e){return M(e.indices,function(e){var t=o.dataToPoint(i.get(r,e));return t[1]=i.get(s,e),t})}),d=function(e){for(var t=e.length,i=e[0].length,n=[],o=[],a=0,r={},s=0;s<i;++s){for(var l=0,d=0;l<t;++l)d+=e[l][s][1];a<d&&(a=d),n.push(d)}for(var c=0;c<i;++c)o[c]=(a-n[c])/2;for(var u=a=0;u<i;++u){var h=n[u]+o[u];a<h&&(a=h)}return r.y0=o,r.max=a,r}(l),c=d.y0,u=t/d.max,h=a.length,f=a[0].indices.length,p=0;p<f;++p){n=c[p]*u,i.setItemLayout(a[0].indices[p],{layerIndex:0,x:l[0][p][0],y0:n,y:l[0][p][1]*u});for(var m=1;m<h;++m)n+=l[m-1][p][1]*u,i.setItemLayout(a[m].indices[p],{layerIndex:m,x:l[m][p][0],y0:n,y:l[m][p][1]*u})}}Gu(function(e,t){e.eachSeriesByType("themeRiver",function(e){var t=e.getData(),i=e.coordinateSystem,n={},o=i.getRect();n.rect=o;var a=e.get("boundaryGap"),r=i.getAxis();n.boundaryGap=a,"horizontal"===r.orient?(a[0]=Ps(a[0],o.height),a[1]=Ps(a[1],o.height),pC(t,e,o.height-a[0]-a[1])):(a[0]=Ps(a[0],o.width),a[1]=Ps(a[1],o.width),pC(t,e,o.width-a[0]-a[1])),t.setLayout("layoutInfo",n)})}),Yu(function(e){e.eachSeriesByType("themeRiver",function(o){var a=o.getData(),r=o.getRawData(),s=o.get("color"),l=ee();a.each(function(e){l.set(a.getRawIndex(e),e)}),r.each(function(e){var t=r.getName(e),i=s[(o.nameMap.get(t)-1)%s.length];r.setItemVisual(e,"color",i);var n=l.get(e);null!=n&&a.setItemVisual(n,"color",i)})})}),ju(rg("themeRiver")),Zd.extend({type:"series.sunburst",_viewRoot:null,getInitialData:function(e,t){var i={name:e.name,children:e.data};!function i(e){var n=0;O(e.children,function(e){i(e);var t=e.value;R(t)&&(t=t[0]),n+=t});var t=e.value;R(t)&&(t=t[0]);(null==t||isNaN(t))&&(t=n);t<0&&(t=0);R(e.value)?e.value[0]=t:e.value=t}(i);var n=e.levels||[],o={};return o.levels=n,uv.createTree(i,this,o).data},optionUpdated:function(){this.resetViewRoot()},getDataParams:function(e){var t=Zd.prototype.getDataParams.apply(this,arguments),i=this.getData().tree.getNodeByDataIndex(e);return t.treePathInfo=Mv(i,this),t},defaultOption:{zlevel:0,z:2,center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,percentPrecision:2,stillShowZeroSum:!0,highlightPolicy:"descendant",nodeClick:"rootToNode",renderLabelForZeroData:!1,label:{rotate:"radial",show:!0,opacity:1,align:"center",position:"inside",distance:5,silent:!0,emphasis:{}},itemStyle:{borderWidth:1,borderColor:"white",opacity:1,emphasis:{},highlight:{opacity:1},downplay:{opacity:.9}},animationType:"expansion",animationDuration:1e3,animationDurationUpdate:500,animationEasing:"cubicOut",data:[],levels:[],sort:"desc"},getViewRoot:function(){return this._viewRoot},resetViewRoot:function(e){e?this._viewRoot=e:e=this._viewRoot;var t=this.getRawData().tree.root;e&&(e===t||t.contains(e))||(this._viewRoot=t)}});var mC="none",gC="ancestor",vC="self",yC=2,bC=4;function xC(e,t,i){ni.call(this);var n=new pr({z2:yC});n.seriesIndex=t.seriesIndex;var o=new cr({z2:bC,silent:e.getModel("label").get("silent")});function a(){o.ignore=o.hoverIgnore}function r(){o.ignore=o.normalIgnore}this.add(n),this.add(o),this.updateData(!0,e,"normal",t,i),this.on("emphasis",a).on("normal",r).on("mouseover",a).on("mouseout",r)}var wC=xC.prototype;wC.updateData=function(e,t,i,n,o){(this.node=t).piece=this,n=n||this._seriesModel,o=o||this._ecModel;var a=this.childAt(0);a.dataIndex=t.dataIndex;var r=t.getModel(),s=t.getLayout();s||console.log(t.getLayout());var l=D({},s);l.label=null;var d,c=function(e,t,i){var n=e.getVisual("color"),o=e.getVisual("visualMeta");o&&0!==o.length||(n=null);var a=e.getModel("itemStyle").get("color");{if(a)return a;if(n)return n;if(0===e.depth)return i.option.color[0];var r=i.option.color.length;a=i.option.color[function(e){var t=e;for(;1<t.depth;)t=t.parentNode;return w(e.getAncestors()[0].children,t)}(e)%r]}return a}(t,0,o),u=r.getModel("itemStyle").getItemStyle();"normal"===i?d=u:d=m(r.getModel(i+".itemStyle").getItemStyle(),u);d=E({lineJoin:"bevel",fill:d.fill||c},d),e?(a.setShape(l),a.shape.r=s.r0,hs(a,{shape:{r:s.r}},n,t.dataIndex),a.useStyle(d)):"object"==typeof d.fill&&d.fill.type||"object"==typeof a.style.fill&&a.style.fill.type?(hs(a,{shape:l},n),a.useStyle(d)):hs(a,{shape:l,style:d},n),this._updateLabel(n,c,i);var h=r.getShallow("cursor");if(h&&a.attr("cursor",h),e){var f=n.getShallow("highlightPolicy");this._initEvents(a,t,n,f)}this._seriesModel=n||this._seriesModel,this._ecModel=o||this._ecModel},wC.onEmphasis=function(o){var a=this;this.node.hostTree.root.eachNode(function(e){var t,i,n;e.piece&&(a.node===e?e.piece.updateData(!1,e,"emphasis"):(t=e,i=a.node,(n=o)!==mC&&(n===vC?t===i:n===gC?t===i||t.isAncestorOf(i):t===i||t.isDescendantOf(i))?e.piece.childAt(0).trigger("highlight"):o!==mC&&e.piece.childAt(0).trigger("downplay")))})},wC.onNormal=function(){this.node.hostTree.root.eachNode(function(e){e.piece&&e.piece.updateData(!1,e,"normal")})},wC.onHighlight=function(){this.updateData(!1,this.node,"highlight")},wC.onDownplay=function(){this.updateData(!1,this.node,"downplay")},wC._updateLabel=function(e,t,i){var n=this.node.getModel(),o=n.getModel("label"),a="normal"===i||"emphasis"===i?o:n.getModel(i+".label"),r=n.getModel("emphasis.label"),s=j(e.getFormattedLabel(this.node.dataIndex,"normal",null,null,"label"),this.node.name);!1===C("show")&&(s="");var l=this.node.getLayout(),d=a.get("minAngle");null==d&&(d=o.get("minAngle")),d=d/180*Math.PI;var c=l.endAngle-l.startAngle;null!=d&&Math.abs(c)<d&&(s="");var u=this.childAt(1);os(u.style,u.hoverStyle||{},o,r,{defaultText:a.getShallow("show")?s:null,autoColor:t,useInsideStyle:!0});var h,f=(l.startAngle+l.endAngle)/2,p=Math.cos(f),m=Math.sin(f),g=C("position"),v=C("distance")||0,y=C("align");"outside"===g?(h=l.r+v,y=f>Math.PI/2?"right":"left"):y&&"center"!==y?"left"===y?(h=l.r0+v,f>Math.PI/2&&(y="right")):"right"===y&&(h=l.r-v,f>Math.PI/2&&(y="left")):(h=(l.r+l.r0)/2,y="center"),u.attr("style",{text:s,textAlign:y,textVerticalAlign:C("verticalAlign")||"middle",opacity:C("opacity")});var b=h*p+l.cx,x=h*m+l.cy;u.attr("position",[b,x]);var w=C("rotate"),_=0;function C(e){var t=a.get(e);return null==t?o.get(e):t}"radial"===w?(_=-f)<-Math.PI/2&&(_+=Math.PI):"tangential"===w?(_=Math.PI/2-f)>Math.PI/2?_-=Math.PI:_<-Math.PI/2&&(_+=Math.PI):"number"==typeof w&&(_=w*Math.PI/180),u.attr("rotation",_)},wC._initEvents=function(e,t,i,n){e.off("mouseover").off("mouseout").off("emphasis").off("normal");var o=this,a=function(){o.onEmphasis(n)},r=function(){o.onNormal()};i.isAnimationEnabled()&&e.on("mouseover",a).on("mouseout",r).on("emphasis",a).on("normal",r).on("downplay",function(){o.onDownplay()}).on("highlight",function(){o.onHighlight()})},_(xC,ni);lc.extend({type:"sunburst",init:function(){},render:function(r,s,e,t){var n=this;this.seriesModel=r,this.api=e,this.ecModel=s;var l=r.getData(),d=l.tree.root,i=r.getViewRoot(),c=this.group,u=r.get("renderLabelForZeroData"),o=[];i.eachNode(function(e){o.push(e)});var a=this._oldChildren||[];if(function(o,a){if(0===o.length&&0===a.length)return;function e(e){return e.getId()}function t(e,t){var i=null==e?null:o[e],n=null==t?null:a[t];!function(e,t){u||!e||e.getValue()||(e=null);if(e!==d&&t!==d)if(t&&t.piece)e?(t.piece.updateData(!1,e,"normal",r,s),l.setItemGraphicEl(e.dataIndex,t.piece)):function(e){if(!e)return;e.piece&&(c.remove(e.piece),e.piece=null)}(t);else if(e){var i=new xC(e,r,s);c.add(i),l.setItemGraphicEl(e.dataIndex,i)}}(i,n)}new ih(a,o,e,e).add(t).update(t).remove(L(t,null)).execute()}(o,a),function(e,t){if(0<t.depth){n.virtualPiece?n.virtualPiece.updateData(!1,e,"normal",r,s):(n.virtualPiece=new xC(e,r,s),c.add(n.virtualPiece)),t.piece._onclickEvent&&t.piece.off("click",t.piece._onclickEvent);var i=function(e){n._rootToNode(t.parentNode)};t.piece._onclickEvent=i,n.virtualPiece.on("click",i)}else n.virtualPiece&&(c.remove(n.virtualPiece),n.virtualPiece=null)}(d,i),t&&t.highlight&&t.highlight.piece){var h=r.getShallow("highlightPolicy");t.highlight.piece.onEmphasis(h)}else if(t&&t.unhighlight){var f=this.virtualPiece;!f&&d.children.length&&(f=d.children[0].piece),f&&f.onNormal()}this._initEvents(),this._oldChildren=o},dispose:function(){},_initEvents:function(){var s=this,e=function(a){var r=!1;s.seriesModel.getViewRoot().eachNode(function(e){if(!r&&e.piece&&e.piece.childAt(0)===a.target){var t=e.getModel().get("nodeClick");if("rootToNode"===t)s._rootToNode(e);else if("link"===t){var i=e.getModel(),n=i.get("link");if(n){var o=i.get("target",!0)||"_blank";window.open(n,o)}}r=!0}})};this.group._onclickEvent&&this.group.off("click",this.group._onclickEvent),this.group.on("click",e),this.group._onclickEvent=e},_rootToNode:function(e){e!==this.seriesModel.getViewRoot()&&this.api.dispatchAction({type:"sunburstRootToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:e})},containPoint:function(e,t){var i=t.getData().getItemLayout(0);if(i){var n=e[0]-i.cx,o=e[1]-i.cy,a=Math.sqrt(n*n+o*o);return a<=i.r&&a>=i.r0}}});var _C="sunburstRootToNode";Wu({type:_C,update:"updateView"},function(o,e){e.eachComponent({mainType:"series",subType:"sunburst",query:o},function(e,t){var i=Iv(o,[_C],e);if(i){var n=e.getViewRoot();n&&(o.direction=Ev(n,i.node)?"rollUp":"drillDown"),e.resetViewRoot(i.node)}})});var CC="sunburstHighlight";Wu({type:CC,update:"updateView"},function(n,e){e.eachComponent({mainType:"series",subType:"sunburst",query:n},function(e,t){var i=Iv(n,[CC],e);i&&(n.highlight=i.node)})});Wu({type:"sunburstUnhighlight",update:"updateView"},function(i,e){e.eachComponent({mainType:"series",subType:"sunburst",query:i},function(e,t){i.unhighlight=!0})});var SC=Math.PI/180;function TC(e,t){if("function"==typeof t)return e.sort(t);var n="asc"===t;return e.sort(function(e,t){var i=(e.getValue()-t.getValue())*(n?1:-1);return 0===i?(e.dataIndex-t.dataIndex)*(n?-1:1):i})}function kC(a,r){return r=r||[0,0],M(["x","y"],function(e,t){var i=this.getAxis(e),n=r[t],o=a[t]/2;return"category"===i.type?i.getBandWidth():Math.abs(i.dataToCoord(n-o)-i.dataToCoord(n+o))},this)}Yu(L(tg,"sunburst")),Gu(L(function(e,t,E,i){t.eachSeriesByType(e,function(e){var t=e.get("center"),i=e.get("radius");R(i)||(i=[0,i]),R(t)||(t=[t,t]);var n=E.getWidth(),o=E.getHeight(),c=Math.min(n,o),u=Ps(t[0],n),h=Ps(t[1],o),f=Ps(i[0],c/2),a=Ps(i[1],c/2),r=-e.get("startAngle")*SC,p=e.get("minAngle")*SC,m=e.getData().tree.root,s=e.getViewRoot(),g=s.depth,l=e.get("sort");null!=l&&function t(e,i){var n=e.children||[];e.children=TC(n,i),n.length&&O(e.children,function(e){t(e,i)})}(s,l);var d=0;O(s.children,function(e){!isNaN(e.getValue())&&d++});var v=s.getValue(),y=Math.PI/(v||d)*2,b=0<s.depth,x=s.height-(b?-1:1),w=(a-f)/(x||1),_=e.get("clockwise"),C=e.get("stillShowZeroSum"),S=_?1:-1,T=function(e,t){if(e){var i=t;if(e!==m){var n=e.getValue(),o=0===v&&C?y:n*y;o<p&&(o=p),i=t+S*o;var a=e.depth-g-(b?-1:1),r=f+w*a,s=f+w*(a+1),l=e.getModel();null!=l.get("r0")&&(r=Ps(l.get("r0"),c/2)),null!=l.get("r")&&(s=Ps(l.get("r"),c/2)),e.setLayout({angle:o,startAngle:t,endAngle:i,clockwise:_,cx:u,cy:h,r0:r,r:s})}if(e.children&&e.children.length){var d=0;O(e.children,function(e){d+=T(e,t+d)})}return i-t}};if(b){var k=f,I=f+w,N=2*Math.PI;m.setLayout({angle:N,startAngle:r,endAngle:r+N,clockwise:_,cx:u,cy:h,r0:k,r:I})}T(s,r)})},"sunburst")),ju(L(rg,"sunburst"));function IC(a,r){return r=r||[0,0],M([0,1],function(e){var t=r[e],i=a[e]/2,n=[],o=[];return n[e]=t-i,o[e]=t+i,n[1-e]=o[1-e]=r[1-e],Math.abs(this.dataToPoint(n)[e]-this.dataToPoint(o)[e])},this)}function NC(e,t){var i=this.getAxis(),n=t instanceof Array?t[0]:t,o=(e instanceof Array?e[0]:e)/2;return"category"===i.type?i.getBandWidth():Math.abs(i.dataToCoord(n-o)-i.dataToCoord(n+o))}function EC(s,l){return M(["Radius","Angle"],function(e,t){var i=this["get"+e+"Axis"](),n=l[t],o=s[t]/2,a="dataTo"+e,r="category"===i.type?i.getBandWidth():Math.abs(i[a](n-o)-i[a](n+o));return"Angle"===e&&(r=r*Math.PI/180),r},this)}var MC=["itemStyle"],DC=["emphasis","itemStyle"],AC=["label"],LC=["emphasis","label"],PC="e\0\0",RC={cartesian2d:function(t){var e=t.grid.getRect();return{coordSys:{type:"cartesian2d",x:e.x,y:e.y,width:e.width,height:e.height},api:{coord:function(e){return t.dataToPoint(e)},size:A(kC,t)}}},geo:function(t){var e=t.getBoundingRect();return{coordSys:{type:"geo",x:e.x,y:e.y,width:e.width,height:e.height},api:{coord:function(e){return t.dataToPoint(e)},size:A(IC,t)}}},singleAxis:function(t){var e=t.getRect();return{coordSys:{type:"singleAxis",x:e.x,y:e.y,width:e.width,height:e.height},api:{coord:function(e){return t.dataToPoint(e)},size:A(NC,t)}}},polar:function(o){var a=o.getRadiusAxis(),r=o.getAngleAxis(),e=a.getExtent();return e[0]>e[1]&&e.reverse(),{coordSys:{type:"polar",cx:o.cx,cy:o.cy,r:e[1],r0:e[0]},api:{coord:A(function(e){var t=a.dataToRadius(e[0]),i=r.dataToAngle(e[1]),n=o.coordToPoint([t,i]);return n.push(t,i*Math.PI/180),n}),size:A(EC,o)}}},calendar:function(i){var e=i.getRect(),t=i.getRangeInfo();return{coordSys:{type:"calendar",x:e.x,y:e.y,width:e.width,height:e.height,cellWidth:i.getCellWidth(),cellHeight:i.getCellHeight(),rangeInfo:{start:t.start,end:t.end,weeks:t.weeks,dayCount:t.allDay}},api:{coord:function(e,t){return i.dataToPoint(e,t)}}}}};function UC(e,t,i,n,o){null==i[e]||o||(t[e]=i[e],i[e]=n[e])}function OC(o,a,t,e){var i=o.get("renderItem"),n=o.coordinateSystem,r={};n&&(I&&(q(i,"series.render is required."),q(n.prepareCustoms||RC[n.type],"This coordSys does not support custom series.")),r=n.prepareCustoms?n.prepareCustoms():RC[n.type](n));var s,l,d,c,u,h,f,p=E({getWidth:e.getWidth,getHeight:e.getHeight,getZr:e.getZr,getDevicePixelRatio:e.getDevicePixelRatio,value:function(e,t){return null==t&&(t=d),a.get(a.getDimension(e||0),t)},style:function(e,t){null==t&&(t=d),v(t);var i=c.getModel(MC).getItemStyle();null!=f&&(i.fill=f);var n=a.getItemVisual(t,"opacity");return null!=n&&(i.opacity=n),as(i,u,null,{autoColor:f,isRectText:!0}),i.text=u.getShallow("show")?W(o.getFormattedLabel(t,"normal"),sp(a,t)):null,e&&D(i,e),i},styleEmphasis:function(e,t){null==t&&(t=d),v(t);var i=c.getModel(DC).getItemStyle();return as(i,h,null,{isRectText:!0},!0),i.text=h.getShallow("show")?$(o.getFormattedLabel(t,"emphasis"),o.getFormattedLabel(t,"normal"),sp(a,t)):null,e&&D(i,e),i},visual:function(e,t){return null==t&&(t=d),a.getItemVisual(t,e)},barLayout:function(e){if(n.getBaseAxis){var t=n.getBaseAxis();return function(e){var t=[],i=e.axis;if("category"===i.type){for(var n=i.getBandWidth(),o=0;o<e.count;o++)t.push(E({bandWidth:n,axisKey:"axis0",stackId:Yh+o},e));var a=Qh(t),r=[];for(o=0;o<e.count;o++){var s=a.axis0[Yh+o];s.offsetCenter=s.offset+s.width/2,r.push(s)}return r}}(E({axis:t},e))}},currentSeriesIndices:function(){return t.getCurrentSeriesIndices()},font:function(e){return cs(e,t)}},r.api||{}),m={context:{},seriesId:o.id,seriesName:o.name,seriesIndex:o.seriesIndex,coordSys:r.coordSys,dataInsideLength:a.count(),encode:(s=o.getData(),l={},O(s.dimensions,function(e,t){var i=s.getDimensionInfo(e);if(!i.isExtraCoord){var n=i.coordDim;(l[n]=l[n]||[])[i.coordDimIndex]=t}}),l)},g=!0;return function(e){return d=e,g=!0,i&&i(E({dataIndexInside:e,dataIndex:a.getRawIndex(e)},m),p)||{}};function v(e){null==e&&(e=d),g&&(c=a.getItemModel(e),u=c.getModel(AC),h=c.getModel(LC),f=a.getItemVisual(e,"color"),g=!1)}}function BC(e,t,i,n,o,a){return(e=zC(e,t,i,n,o,a))&&a.setItemGraphicEl(t,e),e}function zC(e,t,i,n,o,a){var r=i.type;if(!e||r===e.__customGraphicType||"path"===r&&i.pathData===e.__customPathData||"image"===r&&i.style.image===e.__customImagePath||"text"===r&&i.style.text===e.__customText||(o.remove(e),e=null),null!=r){var s,l=!e;if(!e&&(e=function(e){var t,i=e.type;if("path"===i){var n=e.shape;(t=Or(n.pathData,null,{x:n.x||0,y:n.y||0,width:n.width||0,height:n.height||0},"center")).__customPathData=e.pathData}else if("image"===i)(t=new wn({})).__customImagePath=e.style.image;else if("text"===i)(t=new cr({})).__customText=e.style.text;else{var o=xs[i.charAt(0).toUpperCase()+i.slice(1)];I&&q(o,'graphic type "'+i+'" can not be found.'),t=new o}return t.__customGraphicType=i,t.name=e.name,t}(i)),function(t,e,i,n,o,a){var r={},s=i.style||{};if(i.shape&&(r.shape=N(i.shape)),i.position&&(r.position=i.position.slice()),i.scale&&(r.scale=i.scale.slice()),i.origin&&(r.origin=i.origin.slice()),i.rotation&&(r.rotation=i.rotation),"image"===t.type&&i.style){var l=r.style={};O(["x","y","width","height"],function(e){UC(e,l,s,t.style,a)})}"text"===t.type&&i.style&&(l=r.style={},O(["x","y"],function(e){UC(e,l,s,t.style,a)}),!s.hasOwnProperty("textFill")&&s.fill&&(s.textFill=s.fill),!s.hasOwnProperty("textStroke")&&s.stroke&&(s.textStroke=s.stroke));if("group"!==t.type&&(t.useStyle(s),a)){t.style.opacity=0;var d=s.opacity;null==d&&(d=1),fs(t,{style:{opacity:d}},n,e)}a?t.attr(r):hs(t,r,n,e),t.attr({z2:i.z2||0,silent:i.silent}),!1!==i.styleEmphasis&&ns(t,i.styleEmphasis)}(e,t,i,n,0,l),"group"===r){var d=e.children()||[],c=i.children||[];if(i.diffChildrenByName)new ih((s={oldChildren:d,newChildren:c,dataIndex:t,animatableModel:n,group:e,data:a}).oldChildren,s.newChildren,FC,FC,s).add(HC).update(HC).remove(VC).execute();else{for(var u=0;u<c.length;u++)zC(e.childAt(u),t,c[u],n,e,a);for(;u<d.length;u++)d[u]&&e.remove(d[u])}}return o.add(e),e}}function FC(e,t){var i=e&&e.name;return null!=i?i:PC+t}function HC(e,t){var i=this.context,n=null!=e?i.newChildren[e]:null;zC(null!=t?i.oldChildren[t]:null,i.dataIndex,n,i.animatableModel,i.group,i.data)}function VC(e){var t=this.context,i=t.oldChildren[e];i&&t.group.remove(i)}Ju({type:"series.custom",dependencies:["grid","polar","geo","singleAxis","calendar"],defaultOption:{coordinateSystem:"cartesian2d",zlevel:0,z:2,legendHoverLink:!0},getInitialData:function(e,t){return Lh(this.getSource(),this)}}),Qu({type:"custom",_data:null,render:function(i,e,t){var n=this._data,o=i.getData(),a=this.group,r=OC(i,o,e,t);this.group.removeAll(),o.diff(n).add(function(e){BC(null,e,r(e),i,a,o)}).update(function(e,t){BC(n.getItemGraphicEl(t),e,r(e),i,a,o)}).remove(function(e){var t=n.getItemGraphicEl(e);t&&a.remove(t)}).execute(),this._data=o},incrementalPrepareRender:function(e,t,i){this.group.removeAll(),this._data=null},incrementalRender:function(e,t,i,n){var o=t.getData(),a=OC(t,o,i,n);function r(e){e.isGroup||(e.incremental=!0,e.useHoverLayer=!0)}for(var s=e.start;s<e.end;s++){BC(null,s,a(s),t,this.group,o).traverse(r)}},dispose:ie}),Vu(function(e){var t=e.graphic;R(t)?t[0]&&t[0].elements?e.graphic=[e.graphic[0]]:e.graphic=[{elements:t}]:t&&!t.elements&&(e.graphic=[{elements:[t]}])});var jC=Xu({type:"graphic",defaultOption:{elements:[],parentId:null},_elOptionsToUpdate:null,mergeOption:function(e){var t=this.option.elements;this.option.elements=null,jC.superApply(this,"mergeOption",arguments),this.option.elements=t},optionUpdated:function(e,t){var i=this.option,n=(t?i:e).elements,o=i.elements=t?[]:i.elements,a=[];this._flatten(n,a);var r=ho(o,a);fo(r);var s=this._elOptionsToUpdate=[];O(r,function(e,t){var i=e.option;I&&q(B(i)||e.exist,"Empty graphic option definition"),i&&(s.push(i),function(e,t){var i=e.exist;if(t.id=e.keyInfo.id,!t.type&&i&&(t.type=i.type),null==t.parentId){var n=t.parentOption;n?t.parentId=n.id:i&&(t.parentId=i.parentId)}t.parentOption=null}(e,i),function(e,t,i){var n=D({},i),o=e[t],a=i.$action||"merge";if("merge"===a)if(o){if(I){var r=i.type;q(!r||o.type===r,'Please set $action: "replace" to change `type`')}m(o,n,!0),_l(o,n,{ignoreSize:!0}),Sl(i,o)}else e[t]=n;else"replace"===a?e[t]=n:"remove"===a&&o&&(e[t]=null)}(o,t,i),function(e,t){if(!e)return;e.hv=t.hv=[GC(t,["left","right"]),GC(t,["top","bottom"])],"group"===e.type&&(null==e.width&&(e.width=t.width=0),null==e.height&&(e.height=t.height=0))}(o[t],i))},this);for(var l=o.length-1;0<=l;l--)null==o[l]?o.splice(l,1):delete o[l].$action},_flatten:function(e,i,n){O(e,function(e){if(e){n&&(e.parentOption=n),i.push(e);var t=e.children;"group"===e.type&&t&&this._flatten(t,i,e),delete e.children}},this)},useElOptionsToUpdate:function(){var e=this._elOptionsToUpdate;return this._elOptionsToUpdate=null,e}});function WC(e,t,i,n){var o=i.type;I&&q(o,"graphic type MUST be set");var a=xs[o.charAt(0).toUpperCase()+o.slice(1)];I&&q(a,"graphic type can not be found");var r=new a(i);t.add(r),n.set(e,r),r.__ecGraphicId=e}function $C(e,t){var i=e&&e.parent;i&&("group"===e.type&&e.traverse(function(e){$C(e,t)}),t.removeKey(e.__ecGraphicId),i.remove(e))}function GC(t,e){var i;return O(e,function(e){null!=t[e]&&"auto"!==t[e]&&(i=!0)}),i}Ku({type:"graphic",init:function(e,t){this._elMap=ee(),this._lastGraphicModel},render:function(e,t,i){e!==this._lastGraphicModel&&this._clear(),this._lastGraphicModel=e,this._updateElements(e,i),this._relocate(e,i)},_updateElements:function(e,t){var i=e.useElOptionsToUpdate();if(i){var c=this._elMap,u=this.group;O(i,function(e){var t=e.$action,i=e.id,n=c.get(i),o=e.parentId,a=null!=o?c.get(o):u;if("text"===e.type){var r=e.style;e.hv&&e.hv[1]&&(r.textVerticalAlign=r.textBaseline=null),!r.hasOwnProperty("textFill")&&r.fill&&(r.textFill=r.fill),!r.hasOwnProperty("textStroke")&&r.stroke&&(r.textStroke=r.stroke)}var s,l=(s=D({},s=e),O(["id","parentId","$action","hv","bounding"].concat(gl),function(e){delete s[e]}),s);I&&n&&q(a===n.parent,"Changing parent is not supported."),t&&"merge"!==t?"replace"===t?($C(n,c),WC(i,a,l,c)):"remove"===t&&$C(n,c):n?n.attr(l):WC(i,a,l,c);var d=c.get(i);d&&(d.__ecGraphicWidth=e.width,d.__ecGraphicHeight=e.height)})}},_relocate:function(e,t){for(var i=e.option.elements,n=this.group,o=this._elMap,a=i.length-1;0<=a;a--){var r=i[a],s=o.get(r.id);if(s){var l=s.parent;wl(s,r,l===n?{width:t.getWidth(),height:t.getHeight()}:{width:l.__ecGraphicWidth||0,height:l.__ecGraphicHeight||0},null,{hv:r.hv,boundingMode:r.bounding})}}},_clear:function(){var t=this._elMap;t.each(function(e){$C(e,t)}),this._elMap=ee()},dispose:function(){this._clear()}});var YC=Xu({type:"legend.plain",dependencies:["series"],layoutMode:{type:"box",ignoreSize:!0},init:function(e,t,i){this.mergeDefaultAndTheme(e,i),e.selected=e.selected||{}},mergeOption:function(e){YC.superCall(this,"mergeOption",e)},optionUpdated:function(){this._updateData(this.ecModel);var e=this._data;if(e[0]&&"single"===this.get("selectedMode")){for(var t=!1,i=0;i<e.length;i++){var n=e[i].get("name");if(this.isSelected(n)){this.select(n),t=!0;break}}!t&&this.select(e[0].get("name"))}},_updateData:function(a){var r=[],s=[];a.eachRawSeries(function(e){var t,i=e.name;if(s.push(i),e.legendDataProvider){var n=e.legendDataProvider(),o=n.mapArray(n.getName);a.isSeriesFiltered(e)||(s=s.concat(o)),o.length?r=r.concat(o):t=!0}else t=!0;t&&po(e)&&r.push(e.name)}),this._availableNames=s;var e=M(this.get("data")||r,function(e){return"string"!=typeof e&&"number"!=typeof e||(e={name:e}),new Is(e,this,this.ecModel)},this);this._data=e},getData:function(){return this._data},select:function(e){var t=this.option.selected;"single"===this.get("selectedMode")&&O(this._data,function(e){t[e.get("name")]=!1});t[e]=!0},unSelect:function(e){"single"!==this.get("selectedMode")&&(this.option.selected[e]=!1)},toggleSelected:function(e){var t=this.option.selected;t.hasOwnProperty(e)||(t[e]=!0),this[t[e]?"unSelect":"select"](e)},isSelected:function(e){var t=this.option.selected;return!(t.hasOwnProperty(e)&&!t[e])&&0<=w(this._availableNames,e)},defaultOption:{zlevel:0,z:4,show:!0,orient:"horizontal",left:"center",top:0,align:"auto",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemGap:10,itemWidth:25,itemHeight:14,inactiveColor:"#ccc",textStyle:{color:"#333"},selectedMode:!0,tooltip:{show:!1}}});function qC(e,t,i){var o,a={},r="toggleSelected"===e;return i.eachComponent("legend",function(n){r&&null!=o?n[o?"select":"unSelect"](t.name):(n[e](t.name),o=n.isSelected(t.name)),O(n.getData(),function(e){var t=e.get("name");if("\n"!==t&&""!==t){var i=n.isSelected(t);a.hasOwnProperty(t)?a[t]=a[t]&&i:a[t]=i}})}),{name:t.name,selected:a}}function ZC(e,t){var i=el(t.get("padding")),n=t.getItemStyle(["color","opacity"]);return n.fill=t.get("backgroundColor"),e=new xr({shape:{x:e.x-i[3],y:e.y-i[0],width:e.width+i[1]+i[3],height:e.height+i[0]+i[2],r:t.get("borderRadius")},style:n,silent:!0,z2:-1})}Wu("legendToggleSelect","legendselectchanged",L(qC,"toggleSelected")),Wu("legendSelect","legendselected",L(qC,"select")),Wu("legendUnSelect","legendunselected",L(qC,"unSelect"));var XC=L,KC=O,JC=ni,QC=Ku({type:"legend.plain",newlineDisabled:!1,init:function(){this.group.add(this._contentGroup=new JC),this._backgroundEl},getContentGroup:function(){return this._contentGroup},render:function(e,t,i){if(this.resetInner(),e.get("show",!0)){var n=e.get("align");n&&"auto"!==n||(n="right"===e.get("left")&&"vertical"===e.get("orient")?"right":"left"),this.renderInner(n,e,t,i);var o=e.getBoxLayoutParams(),a={width:i.getWidth(),height:i.getHeight()},r=e.get("padding"),s=xl(o,a,r),l=this.layoutInner(e,n,s),d=xl(E({width:l.width,height:l.height},o),a,r);this.group.attr("position",[d.x-l.x,d.y-l.y]),this.group.add(this._backgroundEl=ZC(l,e))}},resetInner:function(){this.getContentGroup().removeAll(),this._backgroundEl&&this.group.remove(this._backgroundEl)},renderInner:function(l,d,c,u){var h=this.getContentGroup(),f=ee(),p=d.get("selectedMode"),m=[];c.eachRawSeries(function(e){!e.get("legendHoverLink")&&m.push(e.id)}),KC(d.getData(),function(o,a){var r=o.get("name");if(this.newlineDisabled||""!==r&&"\n"!==r){var e=c.getSeriesByName(r)[0];if(!f.get(r)){if(e){var t=e.getData(),i=t.getVisual("color");"function"==typeof i&&(i=i(e.getDataParams(0)));var n=t.getVisual("legendSymbol")||"roundRect",s=t.getVisual("symbol");this._createItem(r,a,o,d,n,s,l,i,p).on("click",XC(eS,r,u)).on("mouseover",XC(tS,e,null,u,m)).on("mouseout",XC(iS,e,null,u,m)),f.set(r,!0)}else c.eachRawSeries(function(e){if(!f.get(r)&&e.legendDataProvider){var t=e.legendDataProvider(),i=t.indexOfName(r);if(i<0)return;var n=t.getItemVisual(i,"color");this._createItem(r,a,o,d,"roundRect",null,l,n,p).on("click",XC(eS,r,u)).on("mouseover",XC(tS,e,r,u,m)).on("mouseout",XC(iS,e,r,u,m)),f.set(r,!0)}},this);I&&(f.get(r)||console.warn(r+" series not exists. Legend data should be same with series name or data name."))}}else h.add(new JC({newline:!0}))},this)},_createItem:function(e,t,i,n,o,a,r,s,l){var d=n.get("itemWidth"),c=n.get("itemHeight"),u=n.get("inactiveColor"),h=n.get("symbolKeepAspect"),f=n.isSelected(e),p=new JC,m=i.getModel("textStyle"),g=i.get("icon"),v=i.getModel("tooltip"),y=v.parentModel;if(o=g||o,p.add(Of(o,0,0,d,c,f?s:u,null==h||h)),!g&&a&&(a!==o||"none"==a)){var b=.8*c;"none"===a&&(a="circle"),p.add(Of(a,(d-b)/2,(c-b)/2,b,b,f?s:u,null==h||h))}var x="left"===r?d+5:-5,w=r,_=n.get("formatter"),C=e;"string"==typeof _&&_?C=_.replace("{name}",null!=e?e:""):"function"==typeof _&&(C=_(e)),p.add(new cr({style:as({},m,{text:C,x:x,y:c/2,textFill:f?m.getTextColor():u,textAlign:w,textVerticalAlign:"middle"})}));var S=new xr({shape:p.getBoundingRect(),invisible:!0,tooltip:v.get("show")?D({content:e,formatter:y.get("formatter",!0)||function(){return e},formatterParams:{componentType:"legend",legendIndex:n.componentIndex,name:e,$vars:["name"]}},v.option):null});return p.add(S),p.eachChild(function(e){e.silent=!0}),S.silent=!l,this.getContentGroup().add(p),ns(p),p.__legendDataIndex=t,p},layoutInner:function(e,t,i){var n=this.getContentGroup();bl(e.get("orient"),n,e.get("itemGap"),i.width,i.height);var o=n.getBoundingRect();return n.attr("position",[-o.x,-o.y]),this.group.getBoundingRect()}});function eS(e,t){t.dispatchAction({type:"legendToggleSelect",name:e})}function tS(e,t,i,n){var o=i.getZr().storage.getDisplayList()[0];o&&o.useHoverLayer||i.dispatchAction({type:"highlight",seriesName:e.name,name:t,excludeSeriesId:n})}function iS(e,t,i,n){var o=i.getZr().storage.getDisplayList()[0];o&&o.useHoverLayer||i.dispatchAction({type:"downplay",seriesName:e.name,name:t,excludeSeriesId:n})}ju(function(e){var i=e.findComponents({mainType:"legend"});i&&i.length&&e.filterSeries(function(e){for(var t=0;t<i.length;t++)if(!i[t].isSelected(e.name))return!1;return!0})}),Nl.registerSubTypeDefaulter("legend",function(){return"plain"});var nS=YC.extend({type:"legend.scroll",setScrollDataIndex:function(e){this.option.scrollDataIndex=e},defaultOption:{scrollDataIndex:0,pageButtonItemGap:5,pageButtonGap:null,pageButtonPosition:"end",pageFormatter:"{current}/{total}",pageIcons:{horizontal:["M0,0L12,-10L12,10z","M0,0L-12,-10L-12,10z"],vertical:["M0,0L20,0L10,-20z","M0,0L20,0L10,20z"]},pageIconColor:"#2f4554",pageIconInactiveColor:"#aaa",pageIconSize:15,pageTextStyle:{color:"#333"},animationDurationUpdate:800},init:function(e,t,i,n){var o=Cl(e);nS.superCall(this,"init",e,t,i,n),oS(this,e,o)},mergeOption:function(e,t){nS.superCall(this,"mergeOption",e,t),oS(this,this.option,e)},getOrient:function(){return"vertical"===this.get("orient")?{index:1,name:"vertical"}:{index:0,name:"horizontal"}}});function oS(e,t,i){var n=[1,1];n[e.getOrient().index]=0,_l(t,i,{type:"box",ignoreSize:n})}var aS=ni,rS=["width","height"],sS=["x","y"],lS=QC.extend({type:"legend.scroll",newlineDisabled:!0,init:function(){lS.superCall(this,"init"),this._currentIndex=0,this.group.add(this._containerGroup=new aS),this._containerGroup.add(this.getContentGroup()),this.group.add(this._controllerGroup=new aS),this._showController},resetInner:function(){lS.superCall(this,"resetInner"),this._controllerGroup.removeAll(),this._containerGroup.removeClipPath(),this._containerGroup.__rectSize=null},renderInner:function(e,o,t,a){var r=this;lS.superCall(this,"renderInner",e,o,t,a);var s=this._controllerGroup,l=o.get("pageIconSize",!0);R(l)||(l=[l,l]),n("pagePrev",0);var i=o.getModel("pageTextStyle");function n(e,t){var i=e+"DataIndex",n=bs(o.get("pageIcons",!0)[o.getOrient().name][t],{onclick:A(r._pageGo,r,i,o,a)},{x:-l[0]/2,y:-l[1]/2,width:l[0],height:l[1]});n.name=e,s.add(n)}s.add(new cr({name:"pageText",style:{textFill:i.getTextColor(),font:i.getFont(),textVerticalAlign:"middle",textAlign:"center"},silent:!0})),n("pageNext",1)},layoutInner:function(e,t,i){var n=this.getContentGroup(),o=this._containerGroup,a=this._controllerGroup,r=e.getOrient().index,s=rS[r],l=rS[1-r],d=sS[1-r];bl(e.get("orient"),n,e.get("itemGap"),r?i.width:null,r?null:i.height),bl("horizontal",a,e.get("pageButtonItemGap",!0));var c=n.getBoundingRect(),u=a.getBoundingRect(),h=this._showController=c[s]>i[s],f=[-c.x,-c.y];f[r]=n.position[r];var p=[0,0],m=[-u.x,-u.y],g=W(e.get("pageButtonGap",!0),e.get("itemGap",!0));h&&("end"===e.get("pageButtonPosition",!0)?m[r]+=i[s]-u[s]:p[r]+=u[s]+g);m[1-r]+=c[l]/2-u[l]/2,n.attr("position",f),o.attr("position",p),a.attr("position",m);var v=this.group.getBoundingRect();if((v={x:0,y:0})[s]=h?i[s]:c[s],v[l]=Math.max(c[l],u[l]),v[d]=Math.min(0,u[d]+m[1-r]),o.__rectSize=i[s],h){var y={x:0,y:0};y[s]=Math.max(i[s]-u[s]-g,0),y[l]=v[l],o.setClipPath(new xr({shape:y})),o.__rectSize=y[s]}else a.eachChild(function(e){e.attr({invisible:!0,silent:!0})});var b=this._getPageInfo(e);return null!=b.pageIndex&&hs(n,{position:b.contentPosition},!!h&&e),this._updatePageInfoView(e,b),v},_pageGo:function(e,t,i){var n=this._getPageInfo(t)[e];null!=n&&i.dispatchAction({type:"legendScroll",scrollDataIndex:n,legendId:t.id})},_updatePageInfoView:function(n,o){var a=this._controllerGroup;O(["pagePrev","pageNext"],function(e){var t=null!=o[e+"DataIndex"],i=a.childOfName(e);i&&(i.setStyle("fill",t?n.get("pageIconColor",!0):n.get("pageIconInactiveColor",!0)),i.cursor=t?"pointer":"default")});var e=a.childOfName("pageText"),t=n.get("pageFormatter"),i=o.pageIndex,r=null!=i?i+1:0,s=o.pageCount;e&&t&&e.setStyle("text",U(t)?t.replace("{current}",r).replace("{total}",s):t({current:r,total:s}))},_getPageInfo:function(e){var t,i,n,o,a=e.get("scrollDataIndex",!0),r=this.getContentGroup(),s=r.getBoundingRect(),l=this._containerGroup.__rectSize,d=e.getOrient().index,c=rS[d],u=rS[1-d],h=sS[d],f=r.position.slice();this._showController?r.eachChild(function(e){e.__legendDataIndex===a&&(o=e)}):o=r.childAt(0);var p=l?Math.ceil(s[c]/l):0;if(o){var m=o.getBoundingRect(),g=o.position[d]+m[h];f[d]=-g-s[h],t=Math.floor(p*(g+m[h]+l/2)/s[c]),t=s[c]&&p?Math.max(0,Math.min(p-1,t)):-1;var v,y={x:0,y:0};y[c]=l,y[u]=s[u],y[h]=-f[d]-s[h];var b=r.children();if(r.eachChild(function(e,t){var i=w(e);i.intersect(y)&&(null==v&&(v=t),n=e.__legendDataIndex),t===b.length-1&&i[h]+i[c]<=y[h]+y[c]&&(n=null)}),null!=v){var x=w(b[v]);if(y[h]=x[h]+x[c]-y[c],v<=0&&x[h]>=y[h])i=null;else{for(;0<v&&w(b[v-1]).intersect(y);)v--;i=b[v].__legendDataIndex}}}return{contentPosition:f,pageIndex:t,pageCount:p,pagePrevDataIndex:i,pageNextDataIndex:n};function w(e){var t=e.getBoundingRect().clone();return t[h]+=e.position[d],t}}});Wu("legendScroll","legendscroll",function(e,t){var i=e.scrollDataIndex;null!=i&&t.eachComponent({mainType:"legend",subType:"scroll",query:e},function(e){e.setScrollDataIndex(i)})}),Xu({type:"tooltip",dependencies:["axisPointer"],defaultOption:{zlevel:0,z:8,show:!0,showContent:!0,trigger:"item",triggerOn:"mousemove|click",alwaysShowContent:!1,displayMode:"single",confine:!1,showDelay:0,hideDelay:100,transitionDuration:.4,enterable:!1,backgroundColor:"rgba(50,50,50,0.7)",borderColor:"#333",borderRadius:4,borderWidth:0,padding:5,extraCssText:"",axisPointer:{type:"line",axis:"auto",animation:"auto",animationDurationUpdate:200,animationEasingUpdate:"exponentialOut",crossStyle:{color:"#999",width:1,type:"dashed",textStyle:{}}},textStyle:{color:"#fff",fontSize:14}}});var dS=O,cS=Qs,uS=["","-webkit-","-moz-","-o-"];function hS(o){var e,t,i,n,a,r,s,l=[],d=o.get("transitionDuration"),c=o.get("backgroundColor"),u=o.getModel("textStyle"),h=o.get("padding");return d&&l.push((i="left "+(e=d)+"s "+(t="cubic-bezier(0.23, 1, 0.32, 1)")+",top "+e+"s "+t,M(uS,function(e){return e+"transition:"+i}).join(";"))),c&&(v.canvasSupported?l.push("background-Color:"+c):(l.push("background-Color:#"+xt(c)),l.push("filter:alpha(opacity=70)"))),dS(["width","color","radius"],function(e){var t="border-"+e,i=cS(t),n=o.get(i);null!=n&&l.push(t+":"+n+("color"===e?"":"px"))}),l.push((a=[],r=(n=u).get("fontSize"),(s=n.getTextColor())&&a.push("color:"+s),a.push("font:"+n.getFont()),r&&a.push("line-height:"+Math.round(3*r/2)+"px"),dS(["decoration","align"],function(e){var t=n.get(e);t&&a.push("text-"+e+":"+t)}),a.join(";"))),null!=h&&l.push("padding:"+el(h).join("px ")+"px"),l.join(";")+";"}function fS(i,e){if(v.wxa)return null;var t=document.createElement("div"),n=this._zr=e.getZr();this.el=t,this._x=e.getWidth()/2,this._y=e.getHeight()/2,i.appendChild(t),this._container=i,this._show=!1,this._hideTimeout;var o=this;t.onmouseenter=function(){o._enterable&&(clearTimeout(o._hideTimeout),o._show=!0),o._inContent=!0},t.onmousemove=function(e){if(e=e||window.event,!o._enterable){var t=n.handler;Dn(i,e,!0),t.dispatch("mousemove",e)}},t.onmouseleave=function(){o._enterable&&o._show&&o.hideLater(o._hideDelay),o._inContent=!1}}fS.prototype={constructor:fS,_enterable:!0,update:function(){var e=this._container,t=e.currentStyle||document.defaultView.getComputedStyle(e),i=e.style;"absolute"!==i.position&&"absolute"!==t.position&&(i.position="relative")},show:function(e){clearTimeout(this._hideTimeout);var t=this.el;t.style.cssText="position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;"+hS(e)+";left:"+this._x+"px;top:"+this._y+"px;"+(e.get("extraCssText")||""),t.style.display=t.innerHTML?"block":"none",this._show=!0},setContent:function(e){this.el.innerHTML=null==e?"":e},setEnterable:function(e){this._enterable=e},getSize:function(){var e=this.el;return[e.clientWidth,e.clientHeight]},moveTo:function(e,t){var i,n=this._zr;n&&n.painter&&(i=n.painter.getViewportRootOffset())&&(e+=i.offsetLeft,t+=i.offsetTop);var o=this.el.style;o.left=e+"px",o.top=t+"px",this._x=e,this._y=t},hide:function(){this.el.style.display="none",this._show=!1},hideLater:function(e){!this._show||this._inContent&&this._enterable||(e?(this._hideDelay=e,this._show=!1,this._hideTimeout=setTimeout(A(this.hide,this),e)):this.hide())},isShow:function(){return this._show}};var pS=A,mS=O,gS=Ps,vS=new xr({shape:{x:-1,y:-1,width:2,height:2}});function yS(e){for(var t=e.pop();e.length;){var i=e.pop();i&&(Is.isInstance(i)&&(i=i.get("tooltip",!0)),"string"==typeof i&&(i={formatter:i}),t=new Is(i,t,t.ecModel))}return t}function bS(e,t){return e.dispatchAction||A(t.dispatchAction,t)}function xS(e){var t=e.clientWidth,i=e.clientHeight;if(document.defaultView&&document.defaultView.getComputedStyle){var n=document.defaultView.getComputedStyle(e);n&&(t+=parseInt(n.paddingLeft,10)+parseInt(n.paddingRight,10)+parseInt(n.borderLeftWidth,10)+parseInt(n.borderRightWidth,10),i+=parseInt(n.paddingTop,10)+parseInt(n.paddingBottom,10)+parseInt(n.borderTopWidth,10)+parseInt(n.borderBottomWidth,10))}return{width:t,height:i}}function wS(e){return"center"===e||"middle"===e}function _S(e){return e.get("stack")||"__ec_stack_"+e.seriesIndex}function CS(e){return e.dim}function SS(e,t){np.call(this,"radius",e,t),this.type="category"}function TS(e,t){t=t||[0,360],np.call(this,"angle",e,t),this.type="category"}Ku({type:"tooltip",init:function(e,t){if(!v.node){var i=new fS(t.getDom(),t);this._tooltipContent=i}},render:function(e,t,i){if(!v.node&&!v.wxa){this.group.removeAll(),this._tooltipModel=e,this._ecModel=t,this._api=i,this._lastDataByCoordSys=null,this._alwaysShowContent=e.get("alwaysShowContent");var n=this._tooltipContent;n.update(),n.setEnterable(e.get("enterable")),this._initGlobalListener(),this._keepShow()}},_initGlobalListener:function(){var n=this._tooltipModel.get("triggerOn");U_("itemTooltip",this._api,pS(function(e,t,i){"none"!==n&&(0<=n.indexOf(e)?this._tryShow(t,i):"leave"===e&&this._hide(i))},this))},_keepShow:function(){var e=this._tooltipModel,t=this._ecModel,i=this._api;if(null!=this._lastX&&null!=this._lastY&&"none"!==e.get("triggerOn")){var n=this;clearTimeout(this._refreshUpdateTimeout),this._refreshUpdateTimeout=setTimeout(function(){n.manuallyShowTip(e,t,i,{x:n._lastX,y:n._lastY})})}},manuallyShowTip:function(e,t,i,n){if(n.from!==this.uid&&!v.node){var o=bS(n,i);this._ticket="";var a=n.dataByCoordSys;if(n.tooltip&&null!=n.x&&null!=n.y){var r=vS;r.position=[n.x,n.y],r.update(),r.tooltip=n.tooltip,this._tryShow({offsetX:n.x,offsetY:n.y,target:r},o)}else if(a)this._tryShow({offsetX:n.x,offsetY:n.y,position:n.position,event:{},dataByCoordSys:n.dataByCoordSys,tooltipOption:n.tooltipOption},o);else if(null!=n.seriesIndex){if(this._manuallyAxisShowTip(e,t,i,n))return;var s=T_(n,t),l=s.point[0],d=s.point[1];null!=l&&null!=d&&this._tryShow({offsetX:l,offsetY:d,position:n.position,target:s.el,event:{}},o)}else null!=n.x&&null!=n.y&&(i.dispatchAction({type:"updateAxisPointer",x:n.x,y:n.y}),this._tryShow({offsetX:n.x,offsetY:n.y,position:n.position,target:i.getZr().findHover(n.x,n.y).target,event:{}},o))}},manuallyHideTip:function(e,t,i,n){var o=this._tooltipContent;!this._alwaysShowContent&&this._tooltipModel&&o.hideLater(this._tooltipModel.get("hideDelay")),this._lastX=this._lastY=null,n.from!==this.uid&&this._hide(bS(n,i))},_manuallyAxisShowTip:function(e,t,i,n){var o=n.seriesIndex,a=n.dataIndex,r=t.getComponent("axisPointer").coordSysAxesInfo;if(null!=o&&null!=a&&null!=r){var s=t.getSeriesByIndex(o);if(s)if("axis"===(e=yS([s.getData().getItemModel(a),s,(s.coordinateSystem||{}).model,e])).get("trigger"))return i.dispatchAction({type:"updateAxisPointer",seriesIndex:o,dataIndex:a,position:n.position}),!0}},_tryShow:function(e,t){var i=e.target;if(this._tooltipModel){this._lastX=e.offsetX,this._lastY=e.offsetY;var n=e.dataByCoordSys;n&&n.length?this._showAxisTooltip(n,e):i&&null!=i.dataIndex?(this._lastDataByCoordSys=null,this._showSeriesItemTooltip(e,i,t)):i&&i.tooltip?(this._lastDataByCoordSys=null,this._showComponentItemTooltip(e,i,t)):(this._lastDataByCoordSys=null,this._hide(t))}},_showOrMove:function(e,t){var i=e.get("showDelay");t=A(t,this),clearTimeout(this._showTimout),0<i?this._showTimout=setTimeout(t,i):t()},_showAxisTooltip:function(e,t){var d=this._ecModel,i=this._tooltipModel,n=[t.offsetX,t.offsetY],c=[],u=[],o=yS([t.tooltipOption,i]);mS(e,function(e){mS(e.dataByAxis,function(o){var a=d.getComponent(o.axisDim+"Axis",o.axisIndex),r=o.value,s=[];if(a&&null!=r){var l=K_(r,a.axis,d,o.seriesDataIndices,o.valueLabelOpt);O(o.seriesDataIndices,function(e){var t=d.getSeriesByIndex(e.seriesIndex),i=e.dataIndexInside,n=t&&t.getDataParams(i);n.axisDim=o.axisDim,n.axisIndex=o.axisIndex,n.axisType=o.axisType,n.axisId=o.axisId,n.axisValue=If(a.axis,r),n.axisValueLabel=l,n&&(u.push(n),s.push(t.formatTooltip(i,!0)))});var e=l;c.push((e?nl(e)+"<br />":"")+s.join("<br />"))}})},this),c.reverse(),c=c.join("<br /><br />");var a=t.position;this._showOrMove(o,function(){this._updateContentNotChangedOnAxis(e)?this._updatePosition(o,a,n[0],n[1],this._tooltipContent,u):this._showTooltipContent(o,c,u,Math.random(),n[0],n[1],a)})},_showSeriesItemTooltip:function(e,t,i){var n=this._ecModel,o=t.seriesIndex,a=n.getSeriesByIndex(o),r=t.dataModel||a,s=t.dataIndex,l=t.dataType,d=r.getData(),c=yS([d.getItemModel(s),r,a&&(a.coordinateSystem||{}).model,this._tooltipModel]),u=c.get("trigger");if(null==u||"item"===u){var h=r.getDataParams(s,l),f=r.formatTooltip(s,!1,l),p="item_"+r.name+"_"+s;this._showOrMove(c,function(){this._showTooltipContent(c,f,h,p,e.offsetX,e.offsetY,e.position,e.target)}),i({type:"showTip",dataIndexInside:s,dataIndex:d.getRawIndex(s),seriesIndex:o,from:this.uid})}},_showComponentItemTooltip:function(e,t,i){var n=t.tooltip;if("string"==typeof n){n={content:n,formatter:n}}var o=new Is(n,this._tooltipModel,this._ecModel),a=o.get("content"),r=Math.random();this._showOrMove(o,function(){this._showTooltipContent(o,a,o.get("formatterParams")||{},r,e.offsetX,e.offsetY,e.position,t)}),i({type:"showTip",from:this.uid})},_showTooltipContent:function(i,e,n,t,o,a,r,s){if(this._ticket="",i.get("showContent")&&i.get("show")){var l=this._tooltipContent,d=i.get("formatter");r=r||i.get("position");var c=e;if(d&&"string"==typeof d)c=rl(d,n,!0);else if("function"==typeof d){var u=pS(function(e,t){e===this._ticket&&(l.setContent(t),this._updatePosition(i,r,o,a,l,n,s))},this);this._ticket=t,c=d(n,t,u)}l.setContent(c),l.show(i),this._updatePosition(i,r,o,a,l,n,s)}},_updatePosition:function(e,t,i,n,o,a,r){var s=this._api.getWidth(),l=this._api.getHeight();t=t||e.get("position");var d,c,u,h,f,p,m,g,v=o.getSize(),y=e.get("align"),b=e.get("verticalAlign"),x=r&&r.getBoundingRect().clone();if(r&&x.applyTransform(r.transform),"function"==typeof t&&(t=t([i,n],a,o.el,x,{viewSize:[s,l],contentSize:v.slice()})),R(t))i=gS(t[0],s),n=gS(t[1],l);else if(B(t)){t.width=v[0],t.height=v[1];var w=xl(t,{width:s,height:l});i=w.x,n=w.y,b=y=null}else if("string"==typeof t&&r){i=(_=function(e,t,i){var n=i[0],o=i[1],a=0,r=0,s=t.width,l=t.height;switch(e){case"inside":a=t.x+s/2-n/2,r=t.y+l/2-o/2;break;case"top":a=t.x+s/2-n/2,r=t.y-o-5;break;case"bottom":a=t.x+s/2-n/2,r=t.y+l+5;break;case"left":a=t.x-n-5,r=t.y+l/2-o/2;break;case"right":a=t.x+s+5,r=t.y+l/2-o/2}return[a,r]}(t,x,v))[0],n=_[1]}else{var _;i=(_=function(e,t,i,n,o,a,r){var s=xS(i),l=s.width,d=s.height;null!=a&&(n<e+l+a?e-=l+a:e+=a);null!=r&&(o<t+d+r?t-=d+r:t+=r);return[e,t]}(i,n,o.el,s,l,y?null:20,b?null:20))[0],n=_[1]}(y&&(i-=wS(y)?v[0]/2:"right"===y?v[0]:0),b&&(n-=wS(b)?v[1]/2:"bottom"===b?v[1]:0),e.get("confine"))&&(i=(_=(d=i,c=n,u=o.el,h=s,f=l,p=xS(u),m=p.width,g=p.height,d=Math.min(d+m,h)-m,c=Math.min(c+g,f)-g,d=Math.max(d,0),c=Math.max(c,0),[d,c]))[0],n=_[1]);o.moveTo(i,n)},_updateContentNotChangedOnAxis:function(n){var e=this._lastDataByCoordSys,r=!!e&&e.length===n.length;return r&&mS(e,function(e,t){var i=e.dataByAxis||{},a=(n[t]||{}).dataByAxis||[];(r&=i.length===a.length)&&mS(i,function(e,t){var i=a[t]||{},n=e.seriesDataIndices||[],o=i.seriesDataIndices||[];(r&=e.value===i.value&&e.axisType===i.axisType&&e.axisId===i.axisId&&n.length===o.length)&&mS(n,function(e,t){var i=o[t];r&=e.seriesIndex===i.seriesIndex&&e.dataIndex===i.dataIndex})})}),this._lastDataByCoordSys=n,!!r},_hide:function(e){this._lastDataByCoordSys=null,e({type:"hideTip",from:this.uid})},dispose:function(e,t){v.node||v.wxa||(this._tooltipContent.hide(),z_("itemTooltip",t))}}),Wu({type:"showTip",event:"showTip",update:"tooltip:manuallyShowTip"},function(){}),Wu({type:"hideTip",event:"hideTip",update:"tooltip:manuallyHideTip"},function(){}),SS.prototype={constructor:SS,pointToData:function(e,t){return this.polar.pointToData(e,t)["radius"===this.dim?0:1]},dataToRadius:np.prototype.dataToCoord,radiusToData:np.prototype.coordToData},_(SS,np),TS.prototype={constructor:TS,pointToData:function(e,t){return this.polar.pointToData(e,t)["radius"===this.dim?0:1]},dataToAngle:np.prototype.dataToCoord,angleToData:np.prototype.coordToData},_(TS,np);var kS=function(e){this.name=e||"",this.cx=0,this.cy=0,this._radiusAxis=new SS,this._angleAxis=new TS,this._radiusAxis.polar=this._angleAxis.polar=this};kS.prototype={type:"polar",axisPointerEnabled:!0,constructor:kS,dimensions:["radius","angle"],model:null,containPoint:function(e){var t=this.pointToCoord(e);return this._radiusAxis.contain(t[0])&&this._angleAxis.contain(t[1])},containData:function(e){return this._radiusAxis.containData(e[0])&&this._angleAxis.containData(e[1])},getAxis:function(e){return this["_"+e+"Axis"]},getAxes:function(){return[this._radiusAxis,this._angleAxis]},getAxesByScale:function(e){var t=[],i=this._angleAxis,n=this._radiusAxis;return i.scale.type===e&&t.push(i),n.scale.type===e&&t.push(n),t},getAngleAxis:function(){return this._angleAxis},getRadiusAxis:function(){return this._radiusAxis},getOtherAxis:function(e){var t=this._angleAxis;return e===t?this._radiusAxis:t},getBaseAxis:function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAngleAxis()},getTooltipAxes:function(e){var t=null!=e&&"auto"!==e?this.getAxis(e):this.getBaseAxis();return{baseAxes:[t],otherAxes:[this.getOtherAxis(t)]}},dataToPoint:function(e,t){return this.coordToPoint([this._radiusAxis.dataToRadius(e[0],t),this._angleAxis.dataToAngle(e[1],t)])},pointToData:function(e,t){var i=this.pointToCoord(e);return[this._radiusAxis.radiusToData(i[0],t),this._angleAxis.angleToData(i[1],t)]},pointToCoord:function(e){var t=e[0]-this.cx,i=e[1]-this.cy,n=this.getAngleAxis(),o=n.getExtent(),a=Math.min(o[0],o[1]),r=Math.max(o[0],o[1]);n.inverse?a=r-360:r=a+360;var s=Math.sqrt(t*t+i*i);t/=s,i/=s;for(var l=Math.atan2(-i,t)/Math.PI*180,d=l<a?1:-1;l<a||r<l;)l+=360*d;return[s,l]},coordToPoint:function(e){var t=e[0],i=e[1]/180*Math.PI;return[Math.cos(i)*t+this.cx,-Math.sin(i)*t+this.cy]}};var IS=Nl.extend({type:"polarAxis",axis:null,getCoordSysModel:function(){return this.ecModel.queryComponents({mainType:"polar",index:this.option.polarIndex,id:this.option.polarId})[0]}});m(IS.prototype,Nf);var NS={splitNumber:5};function ES(e,t){return t.type||(t.data?"category":"value")}function MS(e,t){var i=this,n=i.getAngleAxis(),o=i.getRadiusAxis();if(n.scale.setExtent(1/0,-1/0),o.scale.setExtent(1/0,-1/0),e.eachSeries(function(e){if(e.coordinateSystem===i){var t=e.getData();O(t.mapDimension("radius",!0),function(e){o.scale.unionExtentFromData(t,Ah(t,e))}),O(t.mapDimension("angle",!0),function(e){n.scale.unionExtentFromData(t,Ah(t,e))})}}),Sf(n.scale,n.model),Sf(o.scale,o.model),"category"===n.type&&!n.onBand){var a=n.getExtent(),r=360/n.scale.count();n.inverse?a[1]+=r:a[1]-=r,n.setExtent(a[0],a[1])}}function DS(e,t){if(e.type=t.get("type"),e.scale=Tf(t),e.onBand=t.get("boundaryGap")&&"category"===e.type,e.inverse=t.get("inverse"),"angleAxis"===t.mainType){e.inverse^=t.get("clockwise");var i=t.get("startAngle");e.setExtent(i,i+(e.inverse?-360:360))}(t.axis=e).model=t}Qp("angle",IS,ES,{startAngle:90,clockwise:!0,splitNumber:12,axisLabel:{rotate:!1}}),Qp("radius",IS,ES,NS),Xu({type:"polar",dependencies:["polarAxis","angleAxis"],coordinateSystem:null,findAxisModel:function(e){var t;return this.ecModel.eachComponent(e,function(e){e.getCoordSysModel()===this&&(t=e)},this),t},defaultOption:{zlevel:0,z:0,center:["50%","50%"],radius:"80%"}}),od.register("polar",{dimensions:kS.prototype.dimensions,create:function(i,s){var l=[];return i.eachComponent("polar",function(e,t){var i=new kS(t);i.update=MS;var n=i.getRadiusAxis(),o=i.getAngleAxis(),a=e.findAxisModel("radiusAxis"),r=e.findAxisModel("angleAxis");DS(n,a),DS(o,r),function(e,t,i){var n=t.get("center"),o=i.getWidth(),a=i.getHeight();e.cx=Ps(n[0],o),e.cy=Ps(n[1],a);var r=e.getRadiusAxis(),s=Math.min(o,a)/2,l=Ps(t.get("radius"),s);r.inverse?r.setExtent(l,0):r.setExtent(0,l)}(i,e,s),l.push(i),(e.coordinateSystem=i).model=e}),i.eachSeries(function(e){if("polar"===e.get("coordinateSystem")){var t=i.queryComponents({mainType:"polar",index:e.get("polarIndex"),id:e.get("polarId")})[0];if(I&&!t)throw new Error('Polar "'+j(e.get("polarIndex"),e.get("polarId"),0)+'" not found');e.coordinateSystem=t.coordinateSystem}}),l}});var AS=["axisLine","axisLabel","axisTick","splitLine","splitArea"];function LS(e,t,i){t[1]>t[0]&&(t=t.slice().reverse());var n=e.coordToPoint([t[0],i]),o=e.coordToPoint([t[1],i]);return{x1:n[0],y1:n[1],x2:o[0],y2:o[1]}}function PS(e){return e.getRadiusAxis().inverse?0:1}function RS(e){var t=e[0],i=e[e.length-1];t&&i&&Math.abs(Math.abs(t.coord-i.coord)-360)<1e-4&&e.pop()}Im.extend({type:"angleAxis",axisPointerClass:"PolarAxisPointer",render:function(t,e){if(this.group.removeAll(),t.get("show")){var i=t.axis,n=i.polar,o=n.getRadiusAxis().getExtent(),a=i.getTicksCoords(),r=M(i.getViewLabels(),function(e){return(e=N(e)).coord=i.dataToCoord(e.tickValue),e});RS(r),RS(a),O(AS,function(e){!t.get(e+".show")||i.scale.isBlank()&&"axisLine"!==e||this["_"+e](t,n,a,o,r)},this)}},_axisLine:function(e,t,i,n){var o=e.getModel("axisLine.lineStyle"),a=new ur({shape:{cx:t.cx,cy:t.cy,r:n[PS(t)]},style:o.getLineStyle(),z2:1,silent:!0});a.style.fill=null,this.group.add(a)},_axisTick:function(e,t,i,n){var o=e.getModel("axisTick"),a=(o.get("inside")?-1:1)*o.get("length"),r=n[PS(t)],s=M(i,function(e){return new wr({shape:LS(t,[r,r+a],e.coord)})});this.group.add(Fr(s,{style:E(o.getModel("lineStyle").getLineStyle(),{stroke:e.get("axisLine.lineStyle.color")})}))},_axisLabel:function(u,h,e,f,t){var p=u.getCategories(!0),m=u.getModel("axisLabel"),g=m.get("margin");O(t,function(e,t){var i=m,n=e.tickValue,o=f[PS(h)],a=h.coordToPoint([o+g,e.coord]),r=h.cx,s=h.cy,l=Math.abs(a[0]-r)/o<.3?"center":a[0]>r?"left":"right",d=Math.abs(a[1]-s)/o<.3?"middle":a[1]>s?"top":"bottom";p&&p[n]&&p[n].textStyle&&(i=new Is(p[n].textStyle,m,m.ecModel));var c=new cr({silent:!0});this.group.add(c),as(c.style,i,{x:a[0],y:a[1],textFill:i.getTextColor()||u.get("axisLine.lineStyle.color"),text:e.formattedLabel,textAlign:l,textVerticalAlign:d})},this)},_splitLine:function(e,t,i,n){var o=e.getModel("splitLine").getModel("lineStyle"),a=o.get("color"),r=0;a=a instanceof Array?a:[a];for(var s=[],l=0;l<i.length;l++){var d=r++%a.length;s[d]=s[d]||[],s[d].push(new wr({shape:LS(t,n,i[l].coord)}))}for(l=0;l<s.length;l++)this.group.add(Fr(s[l],{style:E({stroke:a[l%a.length]},o.getLineStyle()),silent:!0,z:e.get("z")}))},_splitArea:function(e,t,i,n){if(i.length){var o=e.getModel("splitArea").getModel("areaStyle"),a=o.get("color"),r=0;a=a instanceof Array?a:[a];for(var s=[],l=Math.PI/180,d=-i[0].coord*l,c=Math.min(n[0],n[1]),u=Math.max(n[0],n[1]),h=e.get("clockwise"),f=1;f<i.length;f++){var p=r++%a.length;s[p]=s[p]||[],s[p].push(new pr({shape:{cx:t.cx,cy:t.cy,r0:c,r:u,startAngle:d,endAngle:-i[f].coord*l,clockwise:h},silent:!0})),d=-i[f].coord*l}for(f=0;f<s.length;f++)this.group.add(Fr(s[f],{style:E({fill:a[f%a.length]},o.getAreaStyle()),silent:!0}))}}});var US=["axisLine","axisTickLabel","axisName"],OS=["splitLine","splitArea"];Im.extend({type:"radiusAxis",axisPointerClass:"PolarAxisPointer",render:function(t,e){if(this.group.removeAll(),t.get("show")){var i,n,o,a=t.axis,r=a.polar,s=r.getAngleAxis(),l=a.getTicksCoords(),d=s.getExtent()[0],c=a.getExtent(),u=(n=t,o=d,{position:[(i=r).cx,i.cy],rotation:o/180*Math.PI,labelDirection:-1,tickDirection:-1,nameDirection:1,labelRotate:n.getModel("axisLabel").get("rotate"),z2:1}),h=new fm(t,u);O(US,h.add,h),this.group.add(h.getGroup()),O(OS,function(e){t.get(e+".show")&&!a.scale.isBlank()&&this["_"+e](t,r,d,c,l)},this)}},_splitLine:function(e,t,i,n,o){var a=e.getModel("splitLine").getModel("lineStyle"),r=a.get("color"),s=0;r=r instanceof Array?r:[r];for(var l=[],d=0;d<o.length;d++){var c=s++%r.length;l[c]=l[c]||[],l[c].push(new ur({shape:{cx:t.cx,cy:t.cy,r:o[d].coord},silent:!0}))}for(d=0;d<l.length;d++)this.group.add(Fr(l[d],{style:E({stroke:r[d%r.length],fill:null},a.getLineStyle()),silent:!0}))},_splitArea:function(e,t,i,n,o){if(o.length){var a=e.getModel("splitArea").getModel("areaStyle"),r=a.get("color"),s=0;r=r instanceof Array?r:[r];for(var l=[],d=o[0].coord,c=1;c<o.length;c++){var u=s++%r.length;l[u]=l[u]||[],l[u].push(new pr({shape:{cx:t.cx,cy:t.cy,r0:d,r:o[c].coord,startAngle:0,endAngle:2*Math.PI},silent:!0})),d=o[c].coord}for(c=0;c<l.length;c++)this.group.add(Fr(l[c],{style:E({fill:r[c%r.length]},a.getAreaStyle()),silent:!0}))}}});var BS=W_.extend({makeElOption:function(e,t,i,n,o){var a=i.axis;"angle"===a.dim&&(this.animationThreshold=Math.PI/18);var r,s=a.polar,l=s.getOtherAxis(a).getExtent();r=a["dataTo"+ul(a.dim)](t);var d=n.get("type");if(d&&"none"!==d){var c=Z_(n),u=zS[d](a,s,r,l,c);u.style=c,e.graphicKey=u.type,e.pointer=u}X_(e,i,n,o,function(e,t,i,n,o){var a=t.axis,r=a.dataToCoord(e),s=n.getAngleAxis().getExtent()[0];s=s/180*Math.PI;var l,d,c,u=n.getRadiusAxis().getExtent();if("radius"===a.dim){var h=Oe();Ve(h,h,s),He(h,h,[n.cx,n.cy]),l=ms([r,-o],h);var f=t.getModel("axisLabel").get("rotate")||0,p=fm.innerTextLayout(s,f*Math.PI/180,-1);d=p.textAlign,c=p.textVerticalAlign}else{var m=u[1];l=n.coordToPoint([m+o,r]);var g=n.cx,v=n.cy;d=Math.abs(l[0]-g)/m<.3?"center":l[0]>g?"left":"right",c=Math.abs(l[1]-v)/m<.3?"middle":l[1]>v?"top":"bottom"}return{position:l,align:d,verticalAlign:c}}(t,i,0,s,n.get("label.margin")))}});var zS={line:function(e,t,i,n,o){return"angle"===e.dim?{type:"Line",shape:eC(t.coordToPoint([n[0],i]),t.coordToPoint([n[1],i]))}:{type:"Circle",shape:{cx:t.cx,cy:t.cy,r:i}}},shadow:function(e,t,i,n,o){var a=Math.max(1,e.getBandWidth()),r=Math.PI/180;return"angle"===e.dim?{type:"Sector",shape:iC(t.cx,t.cy,n[0],n[1],(-i-a/2)*r,(a/2-i)*r)}:{type:"Sector",shape:iC(t.cx,t.cy,i-a/2,i+a/2,0,2*Math.PI)}}};function FS(n,e){e.update="updateView",Wu(e,function(e,t){var i={};return t.eachComponent({mainType:"geo",query:e},function(t){t[n](e.name),O(t.coordinateSystem.regions,function(e){i[e.name]=t.isSelected(e.name)||!1})}),{selected:i,name:e.name}})}Im.registerAxisPointerClass("PolarAxisPointer",BS),Gu(L(function(e,t,i){var A=i.getWidth(),L=i.getHeight(),P={},R=function(e,t){var p={};O(e,function(e,t){var i=e.getData(),n=e.coordinateSystem,o=n.getBaseAxis(),a=o.getExtent(),r="category"===o.type?o.getBandWidth():Math.abs(a[1]-a[0])/i.count(),s=p[CS(o)]||{bandWidth:r,remainedWidth:r,autoWidthCount:0,categoryGap:"20%",gap:"30%",stacks:{}},l=s.stacks;p[CS(o)]=s;var d=_S(e);l[d]||s.autoWidthCount++,l[d]=l[d]||{width:0,maxWidth:0};var c=Ps(e.get("barWidth"),r),u=Ps(e.get("barMaxWidth"),r),h=e.get("barGap"),f=e.get("barCategoryGap");c&&!l[d].width&&(c=Math.min(s.remainedWidth,c),l[d].width=c,s.remainedWidth-=c),u&&(l[d].maxWidth=u),null!=h&&(s.gap=h),null!=f&&(s.categoryGap=f)});var h={};return O(p,function(e,i){h[i]={};var t=e.stacks,n=e.bandWidth,o=Ps(e.categoryGap,n),a=Ps(e.gap,1),r=e.remainedWidth,s=e.autoWidthCount,l=(r-o)/(s+(s-1)*a);l=Math.max(l,0),O(t,function(e,t){var i=e.maxWidth;i&&i<l&&(i=Math.min(i,r),e.width&&(i=Math.min(i,e.width)),r-=i,e.width=i,s--)}),l=(r-o)/(s+(s-1)*a),l=Math.max(l,0);var d,c=0;O(t,function(e,t){e.width||(e.width=l),c+=(d=e).width*(1+a)}),d&&(c-=d.width*a);var u=-c/2;O(t,function(e,t){h[i][t]=h[i][t]||{offset:u,width:e.width},u+=e.width*(1+a)})}),h}(T(t.getSeriesByType(e),function(e){return!t.isSeriesFiltered(e)&&e.coordinateSystem&&"polar"===e.coordinateSystem.type}));t.eachSeriesByType(e,function(e){if("polar"===e.coordinateSystem.type){var t=e.getData(),i=e.coordinateSystem,n=i.getBaseAxis(),o=_S(e),a=R[CS(n)][o],r=a.offset,s=a.width,l=i.getOtherAxis(n),d=e.get("center")||["50%","50%"],c=Ps(d[0],A),u=Ps(d[1],L),h=e.get("barMinHeight")||0,f=e.get("barMinAngle")||0;P[o]=P[o]||[];for(var p=t.mapDimension(l.dim),m=t.mapDimension(n.dim),g=Dh(t,p),v=l.getExtent()[0],y=0,b=t.count();y<b;y++){var x=t.get(p,y),w=t.get(m,y);if(!isNaN(x)){var _,C,S,T,k=0<=x?"p":"n",I=v;if(g&&(P[o][w]||(P[o][w]={p:v,n:v}),I=P[o][w][k]),"radius"===l.dim){var N=l.dataToRadius(x)-v,E=n.dataToAngle(w);Math.abs(N)<h&&(N=(N<0?-1:1)*h),C=(_=I)+N,T=(S=E-r)-s,g&&(P[o][w][k]=C)}else{var M=l.dataToAngle(x,!0)-v,D=n.dataToRadius(w);Math.abs(M)<f&&(M=(M<0?-1:1)*f),C=(_=D+r)+s,T=(S=I)+M,g&&(P[o][w][k]=T)}t.setItemLayout(y,{cx:c,cy:u,r0:_,r:C,startAngle:-S*Math.PI/180,endAngle:-T*Math.PI/180})}}}},this)},"bar")),Ku({type:"polar"}),C(Nl.extend({type:"geo",coordinateSystem:null,layoutMode:"box",init:function(e){Nl.prototype.init.apply(this,arguments),lo(e,"label",["show"])},optionUpdated:function(){var e=this.option,i=this;e.regions=Lg.getFilledRegions(e.regions,e.map,e.nameMap),this._optionModelMap=S(e.regions||[],function(e,t){return t.name&&e.set(t.name,new Is(t,i)),e},ee()),this.updateSelectedMap(e.regions)},defaultOption:{zlevel:0,z:0,show:!0,left:"center",top:"center",aspectScale:.75,silent:!1,map:"",boundingCoords:null,center:null,zoom:1,scaleLimit:null,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444",color:"#eee"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},regions:[]},getRegionModel:function(e){return this._optionModelMap.get(e)||new Is(null,this,this.ecModel)},getFormattedLabel:function(e,t){var i=this.getRegionModel(e).get("label."+t+".formatter"),n={name:e};return"function"==typeof i?(n.status=t,i(n)):"string"==typeof i?i.replace("{a}",null!=e?e:""):void 0},setZoom:function(e){this.option.zoom=e},setCenter:function(e){this.option.center=e}}),qm),Ku({type:"geo",init:function(e,t){var i=new Jg(t,!0);this._mapDraw=i,this.group.add(i.group)},render:function(e,t,i,n){if(!n||"geoToggleSelect"!==n.type||n.from!==this.uid){var o=this._mapDraw;e.get("show")?o.draw(e,t,i,this,n):this._mapDraw.group.removeAll(),this.group.silent=e.get("silent")}},dispose:function(){this._mapDraw&&this._mapDraw.remove()}}),FS("toggleSelected",{type:"geoToggleSelect",event:"geoselectchanged"}),FS("select",{type:"geoSelect",event:"geoselected"}),FS("unSelect",{type:"geoUnSelect",event:"geounselected"});var HS=["rect","polygon","keep","clear"];var VS=O;function jS(e){if(e)for(var t in e)if(e.hasOwnProperty(t))return!0}function WS(t,e,a){var i={};return VS(e,function(n){var e,o=i[n]=((e=function(){}).prototype.__hidden=e.prototype,new e);VS(t[n],function(e,t){if(Jv.isValidType(t)){var i={type:t,visual:e};a&&a(i,n),o[t]=new Jv(i),"opacity"===t&&((i=N(i)).type="colorAlpha",o.__hidden.__alphaForOpacity=new Jv(i))}})}),i}function $S(t,i,e){var n;O(e,function(e){i.hasOwnProperty(e)&&jS(i[e])&&(n=!0)}),n&&O(e,function(e){i.hasOwnProperty(e)&&jS(i[e])?t[e]=N(i[e]):delete t[e]})}var GS={lineX:YS(0),lineY:YS(1),rect:{point:function(e,t,i){return e&&i.boundingRect.contain(e[0],e[1])},rect:function(e,t,i){return e&&i.boundingRect.intersect(e)}},polygon:{point:function(e,t,i){return e&&i.boundingRect.contain(e[0],e[1])&&Vf(i.range,e[0],e[1])},rect:function(e,t,i){var n=i.range;if(!e||n.length<=1)return!1;var o=e.x,a=e.y,r=e.width,s=e.height,l=n[0];return!!(Vf(n,o,a)||Vf(n,o+r,a)||Vf(n,o,a+s)||Vf(n,o+r,a+s)||ii.create(e).contain(l[0],l[1])||ZS(o,a,o+r,a,n)||ZS(o,a,o,a+s,n)||ZS(o+r,a,o+r,a+s,n)||ZS(o,a+s,o+r,a+s,n))||void 0}}};function YS(a){var r=["x","y"],s=["width","height"];return{point:function(e,t,i){if(e){var n=i.range;return qS(e[a],n)}},rect:function(e,t,i){if(e){var n=i.range,o=[e[r[a]],e[r[a]]+e[s[a]]];return o[1]<o[0]&&o.reverse(),qS(o[0],n)||qS(o[1],n)||qS(n[0],o)||qS(n[1],o)}}}}function qS(e,t){return t[0]<=e&&e<=t[1]}function ZS(e,t,i,n,o){for(var a=0,r=o[o.length-1];a<o.length;a++){var s=o[a];if(XS(e,t,i,n,s[0],s[1],r[0],r[1]))return!0;r=s}}function XS(e,t,i,n,o,a,r,s){var l,d=KS(i-e,o-r,n-t,a-s);if((l=d)<=1e-6&&-1e-6<=l)return!1;var c=KS(o-e,o-r,a-t,a-s)/d;if(c<0||1<c)return!1;var u=KS(i-e,o-e,n-t,a-t)/d;return!(u<0||1<u)}function KS(e,t,i,n){return e*n-t*i}var JS=O,QS=w,eT=L,tT=["dataToPoint","pointToData"],iT=["grid","xAxis","yAxis","geo","graph","polar","radiusAxis","angleAxis","bmap"];function nT(e,t,i){var n=this._targetInfoList=[],o={},a=rT(t,e);JS(sT,function(e,t){(!i||!i.include||0<=QS(i.include,t))&&e(a,n,o)})}var oT=nT.prototype;function aT(e){return e[0]>e[1]&&e.reverse(),e}function rT(e,t){return bo(e,t,{includeMainTypes:iT})}oT.setOutputRanges=function(e,t){this.matchOutputRanges(e,t,function(e,t,i){if((e.coordRanges||(e.coordRanges=[])).push(t),!e.coordRange){e.coordRange=t;var n=cT[e.brushType](0,i,t);e.__rangeOffset={offset:hT[e.brushType](n.values,e.range,[1,1]),xyMinMax:n.xyMinMax}}})},oT.matchOutputRanges=function(e,n,o){JS(e,function(i){var e=this.findTargetInfo(i,n);e&&!0!==e&&O(e.coordSyses,function(e){var t=cT[i.brushType](1,e,i.range);o(i,t.values,e,n)})},this)},oT.setInputRanges=function(e,d){JS(e,function(e){var t,i,n,o,a,r=this.findTargetInfo(e,d);if(I&&(q(!r||!0===r||e.coordRange,"coordRange must be specified when coord index specified."),q(!r||!0!==r||e.range,"range must be specified in global brush.")),e.range=e.range||[],r&&!0!==r){e.panelId=r.panelId;var s=cT[e.brushType](0,r.coordSys,e.coordRange),l=e.__rangeOffset;e.range=l?hT[e.brushType](s.values,l.offset,(t=s.xyMinMax,i=l.xyMinMax,n=pT(t),o=pT(i),a=[n[0]/o[0],n[1]/o[1]],isNaN(a[0])&&(a[0]=1),isNaN(a[1])&&(a[1]=1),a)):s.values}},this)},oT.makePanelOpts=function(i,n){return M(this._targetInfoList,function(e){var t=e.getPanelRect();return{panelId:e.panelId,defaultBrushType:n&&n(e),clipPath:Dx(t),isTargetByCursor:Lx(t,i,e.coordSysModel),getLinearBrushOtherExtent:Ax(t)}})},oT.controlSeries=function(e,t,i){var n=this.findTargetInfo(e,i);return!0===n||n&&0<=QS(n.coordSyses,t.coordinateSystem)},oT.findTargetInfo=function(e,t){for(var i=this._targetInfoList,n=rT(t,e),o=0;o<i.length;o++){var a=i[o],r=e.panelId;if(r){if(a.panelId===r)return a}else for(o=0;o<lT.length;o++)if(lT[o](n,a))return a}return!0};var sT={grid:function(e,n){var o=e.xAxisModels,a=e.yAxisModels,t=e.gridModels,i=ee(),r={},s={};(o||a||t)&&(JS(o,function(e){var t=e.axis.grid.model;i.set(t.id,t),r[t.id]=!0}),JS(a,function(e){var t=e.axis.grid.model;i.set(t.id,t),s[t.id]=!0}),JS(t,function(e){i.set(e.id,e),r[e.id]=!0,s[e.id]=!0}),i.each(function(e){var t=e.coordinateSystem,i=[];JS(t.getCartesians(),function(e,t){(0<=QS(o,e.getAxis("x").model)||0<=QS(a,e.getAxis("y").model))&&i.push(e)}),n.push({panelId:"grid--"+e.id,gridModel:e,coordSysModel:e,coordSys:i[0],coordSyses:i,getPanelRect:dT.grid,xAxisDeclared:r[e.id],yAxisDeclared:s[e.id]})}))},geo:function(e,i){JS(e.geoModels,function(e){var t=e.coordinateSystem;i.push({panelId:"geo--"+e.id,geoModel:e,coordSysModel:e,coordSys:t,coordSyses:[t],getPanelRect:dT.geo})})}},lT=[function(e,t){var i=e.xAxisModel,n=e.yAxisModel,o=e.gridModel;return!o&&i&&(o=i.axis.grid.model),!o&&n&&(o=n.axis.grid.model),o&&o===t.gridModel},function(e,t){var i=e.geoModel;return i&&i===t.geoModel}],dT={grid:function(){return this.coordSys.grid.getRect().clone()},geo:function(){var e=this.coordSys,t=e.getBoundingRect().clone();return t.applyTransform(ps(e)),t}},cT={lineX:eT(uT,0),lineY:eT(uT,1),rect:function(e,t,i){var n=t[tT[e]]([i[0][0],i[1][0]]),o=t[tT[e]]([i[0][1],i[1][1]]),a=[aT([n[0],o[0]]),aT([n[1],o[1]])];return{values:a,xyMinMax:a}},polygon:function(i,n,e){var o=[[1/0,-1/0],[1/0,-1/0]];return{values:M(e,function(e){var t=n[tT[i]](e);return o[0][0]=Math.min(o[0][0],t[0]),o[1][0]=Math.min(o[1][0],t[1]),o[0][1]=Math.max(o[0][1],t[0]),o[1][1]=Math.max(o[1][1],t[1]),t}),xyMinMax:o}}};function uT(e,t,i,n){I&&q("cartesian2d"===i.type,"lineX/lineY brush is available only in cartesian2d.");var o=i.getAxis(["x","y"][e]),a=aT(M([0,1],function(e){return t?o.coordToData(o.toLocalCoord(n[e])):o.toGlobalCoord(o.dataToCoord(n[e]))})),r=[];return r[e]=a,r[1-e]=[NaN,NaN],{values:a,xyMinMax:r}}var hT={lineX:eT(fT,0),lineY:eT(fT,1),rect:function(e,t,i){return[[e[0][0]-i[0]*t[0][0],e[0][1]-i[0]*t[0][1]],[e[1][0]-i[1]*t[1][0],e[1][1]-i[1]*t[1][1]]]},polygon:function(e,i,n){return M(e,function(e,t){return[e[0]-n[0]*i[t][0],e[1]-n[1]*i[t][1]]})}};function fT(e,t,i,n){return[t[0]-n[e]*i[0],t[1]-n[e]*i[1]]}function pT(e){return e?[e[0][1]-e[0][0],e[1][1]-e[1][0]]:[NaN,NaN]}var mT=["inBrush","outOfBrush"],gT="__ecBrushSelect",vT="__ecInBrushSelectEvent",yT=tu.VISUAL.BRUSH;function bT(e,t){if(!e.isDisposed()){var i=e.getZr();i[vT]=!0,e.dispatchAction({type:"brushSelect",batch:t}),i[vT]=!1}}function xT(e,t,i,n){for(var o=0,a=t.length;o<a;o++){var r=t[o];if(e[r.brushType](n,i,r.selectors,r))return!0}}function wT(e){var r=e.brushSelector;if(U(r)){var t=[];return O(GS,function(a,e){t[e]=function(e,t,i,n){var o=t.getItemLayout(e);return a[r](o,i,n)}}),t}if(k(r)){var i={};return O(GS,function(e,t){i[t]=r}),i}return r}Gu(yT,function(t,e,i){t.eachComponent({mainType:"brush"},function(e){i&&"takeGlobalCursor"===i.type&&e.setBrushOption("brush"===i.key?i.brushOption:{brushType:!1}),(e.brushTargetManager=new nT(e.option,t)).setInputRanges(e.areas,t)})}),Yu(yT,function(g,e,t){var o,a,r=[];g.eachComponent({mainType:"brush"},function(l,e){var s={brushId:l.id,brushIndex:e,brushName:l.name,areas:N(l.areas),selected:[]};r.push(s);var t=l.option,i=t.brushLink,n=[],d=[],c=[],u=0;e||(o=t.throttleType,a=t.throttleDelay);var h=M(l.areas,function(e){return i=E({boundingRect:_T[e.brushType](e)},e),n=i.selectors={},O(GS[i.brushType],function(t,e){n[e]=function(e){return t(e,n,i)}}),i;var i,n}),f=WS(l.option,mT,function(e){e.mappingMethod="fixed"});function p(e){return"all"===i||n[e]}function m(e){return!!e.length}R(i)&&O(i,function(e){n[e]=1}),g.eachSeries(function(e,t){var i,n,o,a=c[t]=[];"parallel"===e.subType?(n=t,o=(i=e).coordinateSystem,u|=o.hasAxisBrushed(),p(n)&&o.eachActiveState(i.getData(),function(e,t){"active"===e&&(d[t]=1)})):function(t,e,i){var n=wT(t);if(!n||(o=l,a=e,r=o.option.seriesIndex,null!=r&&"all"!==r&&(R(r)?w(r,a)<0:a!==r)))return;var o,a,r;if(O(h,function(e){n[e.brushType]&&l.brushTargetManager.controlSeries(e,t,g)&&i.push(e),u|=m(i)}),p(e)&&m(i)){var s=t.getData();s.each(function(e){xT(n,i,s,e)&&(d[e]=1)})}}(e,t,a)}),g.eachSeries(function(e,t){var i={seriesId:e.id,seriesIndex:t,seriesName:e.name,dataIndex:[]};s.selected.push(i);var n=wT(e),o=c[t],a=e.getData(),r=p(t)?function(e){return d[e]?(i.dataIndex.push(a.getRawIndex(e)),"inBrush"):"outOfBrush"}:function(e){return xT(n,o,a,e)?(i.dataIndex.push(a.getRawIndex(e)),"inBrush"):"outOfBrush"};(p(t)?u:m(o))&&function(e,d,c,u,h,f){var p,m={};function g(e){return c.getItemVisual(p,e)}function v(e,t){c.setItemVisual(p,e,t)}function t(e,t){p=null==f?e:t;var i=c.getRawDataItem(p);if(!i||!1!==i.visualMap)for(var n=u.call(h,e),o=d[n],a=m[n],r=0,s=a.length;r<s;r++){var l=a[r];o[l]&&o[l].applyVisual(e,g,v)}}O(e,function(e){var t=Jv.prepareVisualTypes(d[e]);m[e]=t}),null==f?c.each(t):c.each([f],t)}(mT,f,a,r)})}),function(e,t,i,n,o){if(!o)return;var a=e.getZr();if(a[vT])return;a[gT]||(a[gT]=bT);bc(a,gT,i,t)(e,n)}(e,o,a,r,t)});var _T={lineX:ie,lineY:ie,rect:function(e){return CT(e.range)},polygon:function(e){for(var t,i=e.range,n=0,o=i.length;n<o;n++){t=t||[[1/0,-1/0],[1/0,-1/0]];var a=i[n];a[0]<t[0][0]&&(t[0][0]=a[0]),a[0]>t[0][1]&&(t[0][1]=a[0]),a[1]<t[1][0]&&(t[1][0]=a[1]),a[1]>t[1][1]&&(t[1][1]=a[1])}return t&&CT(t)}};function CT(e){return new ii(e[0][0],e[1][0],e[0][1]-e[0][0],e[1][1]-e[1][0])}var ST=["#ddd"];Xu({type:"brush",dependencies:["geo","grid","xAxis","yAxis","parallel","series"],defaultOption:{toolbox:null,brushLink:null,seriesIndex:"all",geoIndex:null,xAxisIndex:null,yAxisIndex:null,brushType:"rect",brushMode:"single",transformable:!0,brushStyle:{borderWidth:1,color:"rgba(120,140,180,0.3)",borderColor:"rgba(120,140,180,0.8)"},throttleType:"fixRate",throttleDelay:0,removeOnClick:!0,z:1e4},areas:[],brushType:null,brushOption:{},coordInfoList:[],optionUpdated:function(e,t){var i=this.option;!t&&$S(i,e,["inBrush","outOfBrush"]);var n=i.inBrush=i.inBrush||{};i.outOfBrush=i.outOfBrush||{color:ST},n.hasOwnProperty("liftZ")||(n.liftZ=5)},setAreas:function(e){I&&(q(R(e)),O(e,function(e){q(e.brushType,"Illegal areas")})),e&&(this.areas=M(e,function(e){return TT(this.option,e)},this))},setBrushOption:function(e){this.brushOption=TT(this.option,e),this.brushType=this.brushOption.brushType}});function TT(e,t){return m({brushType:e.brushType,brushMode:e.brushMode,transformable:e.transformable,brushStyle:new Is(e.brushStyle).getItemStyle(),removeOnClick:e.removeOnClick,z:e.z},t,!0)}function kT(e,t,i,n){(!n||n.$from!==e.id)&&this._brushController.setPanels(e.brushTargetManager.makePanelOpts(i)).enableBrush(e.brushOption).updateCovers(e.areas.slice())}Ku({type:"brush",init:function(e,t){this.ecModel=e,this.api=t,this.model,(this._brushController=new ex(t.getZr())).on("brush",A(this._onBrush,this)).mount()},render:function(e){return this.model=e,kT.apply(this,arguments)},updateTransform:kT,updateView:kT,dispose:function(){this._brushController.dispose()},_onBrush:function(e,t){var i=this.model.id;this.model.brushTargetManager.setOutputRanges(e,this.ecModel),(!t.isEnd||t.removeOnClick)&&this.api.dispatchAction({type:"brush",brushId:i,areas:N(e),$from:i})}}),Wu({type:"brush",event:"brush"},function(t,e){e.eachComponent({mainType:"brush",query:t},function(e){e.setAreas(t.areas)})}),Wu({type:"brushSelect",event:"brushSelected",update:"none"},function(){});var IT={};function NT(e,t){IT[e]=t}function ET(e){return IT[e]}var MT=_c.toolbox.brush;function DT(e,t,i){this.model=e,this.ecModel=t,this.api=i,this._brushType,this._brushMode}DT.defaultOption={show:!0,type:["rect","polygon","lineX","lineY","keep","clear"],icon:{rect:"M7.3,34.7 M0.4,10V-0.2h9.8 M89.6,10V-0.2h-9.8 M0.4,60v10.2h9.8 M89.6,60v10.2h-9.8 M12.3,22.4V10.5h13.1 M33.6,10.5h7.8 M49.1,10.5h7.8 M77.5,22.4V10.5h-13 M12.3,31.1v8.2 M77.7,31.1v8.2 M12.3,47.6v11.9h13.1 M33.6,59.5h7.6 M49.1,59.5 h7.7 M77.5,47.6v11.9h-13",polygon:"M55.2,34.9c1.7,0,3.1,1.4,3.1,3.1s-1.4,3.1-3.1,3.1 s-3.1-1.4-3.1-3.1S53.5,34.9,55.2,34.9z M50.4,51c1.7,0,3.1,1.4,3.1,3.1c0,1.7-1.4,3.1-3.1,3.1c-1.7,0-3.1-1.4-3.1-3.1 C47.3,52.4,48.7,51,50.4,51z M55.6,37.1l1.5-7.8 M60.1,13.5l1.6-8.7l-7.8,4 M59,19l-1,5.3 M24,16.1l6.4,4.9l6.4-3.3 M48.5,11.6 l-5.9,3.1 M19.1,12.8L9.7,5.1l1.1,7.7 M13.4,29.8l1,7.3l6.6,1.6 M11.6,18.4l1,6.1 M32.8,41.9 M26.6,40.4 M27.3,40.2l6.1,1.6 M49.9,52.1l-5.6-7.6l-4.9-1.2",lineX:"M15.2,30 M19.7,15.6V1.9H29 M34.8,1.9H40.4 M55.3,15.6V1.9H45.9 M19.7,44.4V58.1H29 M34.8,58.1H40.4 M55.3,44.4 V58.1H45.9 M12.5,20.3l-9.4,9.6l9.6,9.8 M3.1,29.9h16.5 M62.5,20.3l9.4,9.6L62.3,39.7 M71.9,29.9H55.4",lineY:"M38.8,7.7 M52.7,12h13.2v9 M65.9,26.6V32 M52.7,46.3h13.2v-9 M24.9,12H11.8v9 M11.8,26.6V32 M24.9,46.3H11.8v-9 M48.2,5.1l-9.3-9l-9.4,9.2 M38.9-3.9V12 M48.2,53.3l-9.3,9l-9.4-9.2 M38.9,62.3V46.4",keep:"M4,10.5V1h10.3 M20.7,1h6.1 M33,1h6.1 M55.4,10.5V1H45.2 M4,17.3v6.6 M55.6,17.3v6.6 M4,30.5V40h10.3 M20.7,40 h6.1 M33,40h6.1 M55.4,30.5V40H45.2 M21,18.9h62.9v48.6H21V18.9z",clear:"M22,14.7l30.9,31 M52.9,14.7L22,45.7 M4.7,16.8V4.2h13.1 M26,4.2h7.8 M41.6,4.2h7.8 M70.3,16.8V4.2H57.2 M4.7,25.9v8.6 M70.3,25.9v8.6 M4.7,43.2v12.6h13.1 M26,55.8h7.8 M41.6,55.8h7.8 M70.3,43.2v12.6H57.2"},title:N(MT.title)};var AT=DT.prototype;AT.render=AT.updateView=function(t,e,i){var n,o,a;e.eachComponent({mainType:"brush"},function(e){n=e.brushType,o=e.brushOption.brushMode||"single",a|=e.areas.length}),this._brushType=n,this._brushMode=o,O(t.get("type",!0),function(e){t.setIconStatus(e,("keep"===e?"multiple"===o:"clear"===e?a:e===n)?"emphasis":"normal")})},AT.getIcons=function(){var e=this.model,t=e.get("icon",!0),i={};return O(e.get("type",!0),function(e){t[e]&&(i[e]=t[e])}),i},AT.onclick=function(e,t,i){var n=this._brushType,o=this._brushMode;"clear"===i?(t.dispatchAction({type:"axisAreaSelect",intervals:[]}),t.dispatchAction({type:"brush",command:"clear",areas:[]})):t.dispatchAction({type:"takeGlobalCursor",key:"brush",brushOption:{brushType:"keep"===i?n:n!==i&&i,brushMode:"keep"===i?"multiple"===o?"single":"multiple":o}})},NT("brush",DT),Vu(function(e,t){var i=e&&e.brush;if(R(i)||(i=i?[i]:[]),i.length){var n=[];O(i,function(e){var t=e.hasOwnProperty("toolbox")?e.toolbox:[];t instanceof Array&&(n=n.concat(t))});var o=e&&e.toolbox;R(o)&&(o=o[0]),o||(o={feature:{}},e.toolbox=[o]);var a,r,s=o.feature||(o.feature={}),l=s.brush||(s.brush={}),d=l.type||(l.type=[]);d.push.apply(d,n),r={},O(a=d,function(e){r[e]=1}),a.length=0,O(r,function(e,t){a.push(t)}),t&&!d.length&&d.push.apply(d,HS)}});function LT(e,t,i){this._model=e}function PT(e,t,i,n){var o=i.calendarModel,a=i.seriesModel,r=o?o.coordinateSystem:a?a.coordinateSystem:null;return r===this?r[e](n):null}LT.prototype={constructor:LT,type:"calendar",dimensions:["time","value"],getDimensionsInfo:function(){return[{name:"time",type:"time"},"value"]},getRangeInfo:function(){return this._rangeInfo},getModel:function(){return this._model},getRect:function(){return this._rect},getCellWidth:function(){return this._sw},getCellHeight:function(){return this._sh},getOrient:function(){return this._orient},getFirstDayOfWeek:function(){return this._firstDayOfWeek},getDateInfo:function(e){var t=(e=$s(e)).getFullYear(),i=e.getMonth()+1;i=i<10?"0"+i:i;var n=e.getDate();n=n<10?"0"+n:n;var o=e.getDay();return{y:t,m:i,d:n,day:o=Math.abs((o+7-this.getFirstDayOfWeek())%7),time:e.getTime(),formatedDate:t+"-"+i+"-"+n,date:e}},getNextNDay:function(e,t){return 0===(t=t||0)||(e=new Date(this.getDateInfo(e).time)).setDate(e.getDate()+t),this.getDateInfo(e)},update:function(e,t){this._firstDayOfWeek=+this._model.getModel("dayLabel").get("firstDay"),this._orient=this._model.get("orient"),this._lineWidth=this._model.getModel("itemStyle").getItemStyle().lineWidth||0,this._rangeInfo=this._getRangeInfo(this._initRangeOption());var i=this._rangeInfo.weeks||1,n=["width","height"],o=this._model.get("cellSize").slice(),a=this._model.getBoxLayoutParams(),r="horizontal"===this._orient?[i,7]:[7,i];O([0,1],function(e){d(o,e)&&(a[n[e]]=o[e]*r[e])});var s={width:t.getWidth(),height:t.getHeight()},l=this._rect=xl(a,s);function d(e,t){return null!=e[t]&&"auto"!==e[t]}O([0,1],function(e){d(o,e)||(o[e]=l[n[e]]/r[e])}),this._sw=o[0],this._sh=o[1]},dataToPoint:function(e,t){R(e)&&(e=e[0]),null==t&&(t=!0);var i=this.getDateInfo(e),n=this._rangeInfo,o=i.formatedDate;if(t&&!(i.time>=n.start.time&&i.time<n.end.time+864e5))return[NaN,NaN];var a=i.day,r=this._getRangeInfo([n.start.time,o]).nthWeek;return"vertical"===this._orient?[this._rect.x+a*this._sw+this._sw/2,this._rect.y+r*this._sh+this._sh/2]:[this._rect.x+r*this._sw+this._sw/2,this._rect.y+a*this._sh+this._sh/2]},pointToData:function(e){var t=this.pointToDate(e);return t&&t.time},dataToRect:function(e,t){var i=this.dataToPoint(e,t);return{contentShape:{x:i[0]-(this._sw-this._lineWidth)/2,y:i[1]-(this._sh-this._lineWidth)/2,width:this._sw-this._lineWidth,height:this._sh-this._lineWidth},center:i,tl:[i[0]-this._sw/2,i[1]-this._sh/2],tr:[i[0]+this._sw/2,i[1]-this._sh/2],br:[i[0]+this._sw/2,i[1]+this._sh/2],bl:[i[0]-this._sw/2,i[1]+this._sh/2]}},pointToDate:function(e){var t=Math.floor((e[0]-this._rect.x)/this._sw)+1,i=Math.floor((e[1]-this._rect.y)/this._sh)+1,n=this._rangeInfo.range;return"vertical"===this._orient?this._getDateByWeeksAndDay(i,t-1,n):this._getDateByWeeksAndDay(t,i-1,n)},convertToPixel:L(PT,"dataToPoint"),convertFromPixel:L(PT,"pointToData"),_initRangeOption:function(){var e=this._model.get("range"),t=e;if(R(t)&&1===t.length&&(t=t[0]),/^\d{4}$/.test(t)&&(e=[t+"-01-01",t+"-12-31"]),/^\d{4}[\/|-]\d{1,2}$/.test(t)){var i=this.getDateInfo(t),n=i.date;n.setMonth(n.getMonth()+1);var o=this.getNextNDay(n,-1);e=[i.formatedDate,o.formatedDate]}/^\d{4}[\/|-]\d{1,2}[\/|-]\d{1,2}$/.test(t)&&(e=[t,t]);var a=this._getRangeInfo(e);return a.start.time>a.end.time&&e.reverse(),e},_getRangeInfo:function(e){var t;(e=[this.getDateInfo(e[0]),this.getDateInfo(e[1])])[0].time>e[1].time&&(t=!0,e.reverse());var i=Math.floor(e[1].time/864e5)-Math.floor(e[0].time/864e5)+1,n=new Date(e[0].time),o=n.getDate(),a=e[1].date.getDate();if(n.setDate(o+i-1),n.getDate()!==a)for(var r=0<n.getTime()-e[1].time?1:-1;n.getDate()!==a&&0<(n.getTime()-e[1].time)*r;)i-=r,n.setDate(o+i-1);var s=Math.floor((i+e[0].day+6)/7),l=t?1-s:s-1;return t&&e.reverse(),{range:[e[0].formatedDate,e[1].formatedDate],start:e[0],end:e[1],allDay:i,weeks:s,nthWeek:l,fweek:e[0].day,lweek:e[1].day}},_getDateByWeeksAndDay:function(e,t,i){var n=this._getRangeInfo(i);if(e>n.weeks||0===e&&t<n.fweek||e===n.weeks&&t>n.lweek)return!1;var o=7*(e-1)-n.fweek+t,a=new Date(n.start.time);return a.setDate(n.start.d+o),this.getDateInfo(a)}},LT.dimensions=LT.prototype.dimensions,LT.getDimensionsInfo=LT.prototype.getDimensionsInfo,LT.create=function(i,n){var o=[];return i.eachComponent("calendar",function(e){var t=new LT(e,i,n);o.push(t),e.coordinateSystem=t}),i.eachSeries(function(e){"calendar"===e.get("coordinateSystem")&&(e.coordinateSystem=o[e.get("calendarIndex")||0])}),o},od.register("calendar",LT);var RT=Nl.extend({type:"calendar",coordinateSystem:null,defaultOption:{zlevel:0,z:2,left:80,top:60,cellSize:20,orient:"horizontal",splitLine:{show:!0,lineStyle:{color:"#000",width:1,type:"solid"}},itemStyle:{color:"#fff",borderWidth:1,borderColor:"#ccc"},dayLabel:{show:!0,firstDay:0,position:"start",margin:"50%",nameMap:"en",color:"#000"},monthLabel:{show:!0,position:"start",margin:5,align:"center",nameMap:"en",formatter:null,color:"#000"},yearLabel:{show:!0,position:null,margin:30,formatter:null,color:"#ccc",fontFamily:"sans-serif",fontWeight:"bolder",fontSize:20}},init:function(e,t,i,n){var o=Cl(e);RT.superApply(this,"init",arguments),UT(e,o)},mergeOption:function(e,t){RT.superApply(this,"mergeOption",arguments),UT(this.option,e)}});function UT(e,n){var o=e.cellSize;R(o)?1===o.length&&(o[1]=o[0]):o=e.cellSize=[o,o];var t=M([0,1],function(e){var t,i;return(null!=(t=n)[vl[i=e][0]]||null!=t[vl[i][1]]&&null!=t[vl[i][2]])&&(o[e]="auto"),null!=o[e]&&"auto"!==o[e]});_l(e,n,{type:"box",ignoreSize:t})}var OT={EN:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],CN:["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"]},BT={EN:["S","M","T","W","T","F","S"],CN:["日","一","二","三","四","五","六"]};Ku({type:"calendar",_tlpoints:null,_blpoints:null,_firstDayOfMonth:null,_firstDayPoints:null,render:function(e,t,i){var n=this.group;n.removeAll();var o=e.coordinateSystem,a=o.getRangeInfo(),r=o.getOrient();this._renderDayRect(e,a,n),this._renderLines(e,a,r,n),this._renderYearText(e,a,r,n),this._renderMonthText(e,r,n),this._renderWeekText(e,a,r,n)},_renderDayRect:function(e,t,i){for(var n=e.coordinateSystem,o=e.getModel("itemStyle").getItemStyle(),a=n.getCellWidth(),r=n.getCellHeight(),s=t.start.time;s<=t.end.time;s=n.getNextNDay(s,1).time){var l=n.dataToRect([s],!1).tl,d=new xr({shape:{x:l[0],y:l[1],width:a,height:r},cursor:"default",style:o});i.add(d)}},_renderLines:function(i,e,n,o){var a=this,r=i.coordinateSystem,s=i.getModel("splitLine.lineStyle").getLineStyle(),l=i.get("splitLine.show"),t=s.lineWidth;this._tlpoints=[],this._blpoints=[],this._firstDayOfMonth=[],this._firstDayPoints=[];for(var d=e.start,c=0;d.time<=e.end.time;c++){h(d.formatedDate),0===c&&(d=r.getDateInfo(e.start.y+"-"+e.start.m));var u=d.date;u.setMonth(u.getMonth()+1),d=r.getDateInfo(u)}function h(e){a._firstDayOfMonth.push(r.getDateInfo(e)),a._firstDayPoints.push(r.dataToRect([e],!1).tl);var t=a._getLinePointsOfOneWeek(i,e,n);a._tlpoints.push(t[0]),a._blpoints.push(t[t.length-1]),l&&a._drawSplitline(t,s,o)}h(r.getNextNDay(e.end.time,1).formatedDate),l&&this._drawSplitline(a._getEdgesPoints(a._tlpoints,t,n),s,o),l&&this._drawSplitline(a._getEdgesPoints(a._blpoints,t,n),s,o)},_getEdgesPoints:function(e,t,i){var n=[e[0].slice(),e[e.length-1].slice()],o="horizontal"===i?0:1;return n[0][o]=n[0][o]-t/2,n[1][o]=n[1][o]+t/2,n},_drawSplitline:function(e,t,i){var n=new br({z2:20,shape:{points:e},style:t});i.add(n)},_getLinePointsOfOneWeek:function(e,t,i){var n=e.coordinateSystem;t=n.getDateInfo(t);for(var o=[],a=0;a<7;a++){var r=n.getNextNDay(t.time,a),s=n.dataToRect([r.time],!1);o[2*r.day]=s.tl,o[2*r.day+1]=s["horizontal"===i?"bl":"tr"]}return o},_formatterLabel:function(e,t){return"string"==typeof e&&e?sl(e,t):"function"==typeof e?e(t):t.nameMap},_yearTextPositionControl:function(e,t,i,n,o){t=t.slice();var a=["center","bottom"];"bottom"===n?(t[1]+=o,a=["center","top"]):"left"===n?t[0]-=o:"right"===n?(t[0]+=o,a=["center","top"]):t[1]-=o;var r=0;return"left"!==n&&"right"!==n||(r=Math.PI/2),{rotation:r,position:t,style:{textAlign:a[0],textVerticalAlign:a[1]}}},_renderYearText:function(e,t,i,n){var o=e.getModel("yearLabel");if(o.get("show")){var a=o.get("margin"),r=o.get("position");r||(r="horizontal"!==i?"top":"left");var s=[this._tlpoints[this._tlpoints.length-1],this._blpoints[0]],l=(s[0][0]+s[1][0])/2,d=(s[0][1]+s[1][1])/2,c="horizontal"===i?0:1,u={top:[l,s[c][1]],bottom:[l,s[1-c][1]],left:[s[1-c][0],d],right:[s[c][0],d]},h=t.start.y;+t.end.y>+t.start.y&&(h=h+"-"+t.end.y);var f=o.get("formatter"),p={start:t.start.y,end:t.end.y,nameMap:h},m=this._formatterLabel(f,p),g=new cr({z2:30});as(g.style,o,{text:m}),g.attr(this._yearTextPositionControl(g,u[r],i,r,a)),n.add(g)}},_monthTextPositionControl:function(e,t,i,n,o){var a="left",r="top",s=e[0],l=e[1];return"horizontal"===i?(l+=o,t&&(a="center"),"start"===n&&(r="bottom")):(s+=o,t&&(r="middle"),"start"===n&&(a="right")),{x:s,y:l,textAlign:a,textVerticalAlign:r}},_renderMonthText:function(e,t,i){var n=e.getModel("monthLabel");if(n.get("show")){var o=n.get("nameMap"),a=n.get("margin"),r=n.get("position"),s=n.get("align"),l=[this._tlpoints,this._blpoints];U(o)&&(o=OT[o.toUpperCase()]||[]);var d="start"===r?0:1,c="horizontal"===t?0:1;a="start"===r?-a:a;for(var u="center"===s,h=0;h<l[d].length-1;h++){var f=l[d][h].slice(),p=this._firstDayOfMonth[h];if(u){var m=this._firstDayPoints[h];f[c]=(m[c]+l[0][h+1][c])/2}var g=n.get("formatter"),v=o[+p.m-1],y={yyyy:p.y,yy:(p.y+"").slice(2),MM:p.m,M:+p.m,nameMap:v},b=this._formatterLabel(g,y),x=new cr({z2:30});D(as(x.style,n,{text:b}),this._monthTextPositionControl(f,u,t,r,a)),i.add(x)}}},_weekTextPositionControl:function(e,t,i,n,o){var a="center",r="middle",s=e[0],l=e[1],d="start"===i;return"horizontal"===t?(s=s+n+(d?1:-1)*o[0]/2,a=d?"right":"left"):(l=l+n+(d?1:-1)*o[1]/2,r=d?"bottom":"top"),{x:s,y:l,textAlign:a,textVerticalAlign:r}},_renderWeekText:function(e,t,i,n){var o=e.getModel("dayLabel");if(o.get("show")){var a=e.coordinateSystem,r=o.get("position"),s=o.get("nameMap"),l=o.get("margin"),d=a.getFirstDayOfWeek();U(s)&&(s=BT[s.toUpperCase()]||[]);var c=a.getNextNDay(t.end.time,7-t.lweek).time,u=[a.getCellWidth(),a.getCellHeight()];l=Ps(l,u["horizontal"===i?0:1]),"start"===r&&(c=a.getNextNDay(t.start.time,-(7+t.fweek)).time,l=-l);for(var h=0;h<7;h++){var f,p=a.getNextNDay(c,h),m=a.dataToRect([p.time],!1).center;f=Math.abs((h+d)%7);var g=new cr({z2:30});D(as(g.style,o,{text:s[f]}),this._weekTextPositionControl(m,i,r,l,u)),n.add(g)}}}}),Xu({type:"title",layoutMode:{type:"box",ignoreSize:!0},defaultOption:{zlevel:0,z:6,show:!0,text:"",target:"blank",subtext:"",subtarget:"blank",left:0,top:0,backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,padding:5,itemGap:10,textStyle:{fontSize:18,fontWeight:"bolder",color:"#333"},subtextStyle:{color:"#aaa"}}}),Ku({type:"title",render:function(e,t,i){if(this.group.removeAll(),e.get("show")){var n=this.group,o=e.getModel("textStyle"),a=e.getModel("subtextStyle"),r=e.get("textAlign"),s=e.get("textBaseline"),l=new cr({style:as({},o,{text:e.get("text"),textFill:o.getTextColor()},{disableBox:!0}),z2:10}),d=l.getBoundingRect(),c=e.get("subtext"),u=new cr({style:as({},a,{text:c,textFill:a.getTextColor(),y:d.height+e.get("itemGap"),textVerticalAlign:"top"},{disableBox:!0}),z2:10}),h=e.get("link"),f=e.get("sublink");l.silent=!h,u.silent=!f,h&&l.on("click",function(){window.open(h,"_"+e.get("target"))}),f&&u.on("click",function(){window.open(f,"_"+e.get("subtarget"))}),n.add(l),c&&n.add(u);var p=n.getBoundingRect(),m=e.getBoxLayoutParams();m.width=p.width,m.height=p.height;var g=xl(m,{width:i.getWidth(),height:i.getHeight()},e.get("padding"));r||("middle"===(r=e.get("left")||e.get("right"))&&(r="center"),"right"===r?g.x+=g.width:"center"===r&&(g.x+=g.width/2)),s||("center"===(s=e.get("top")||e.get("bottom"))&&(s="middle"),"bottom"===s?g.y+=g.height:"middle"===s&&(g.y+=g.height/2),s=s||"top"),n.attr("position",[g.x,g.y]);var v={textAlign:r,textVerticalAlign:s};l.setStyle(v),u.setStyle(v),p=n.getBoundingRect();var y=g.margin,b=e.getItemStyle(["color","opacity"]);b.fill=e.get("backgroundColor");var x=new xr({shape:{x:p.x-y[3],y:p.y-y[0],width:p.width+y[1]+y[3],height:p.height+y[0]+y[2],r:e.get("borderRadius")},style:b,silent:!0});jr(x),n.add(x)}}}),Nl.registerSubTypeDefaulter("dataZoom",function(){return"slider"});var zT=["cartesian2d","polar","singleAxis"];var FT,HT,VT,jT,WT=(HT=["axisIndex","axis","index","id"],VT=M(FT=(FT=["x","y","z","radius","angle","single"]).slice(),ul),jT=M(HT=(HT||[]).slice(),ul),function(o,a){O(FT,function(e,t){for(var i={name:e,capital:VT[t]},n=0;n<HT.length;n++)i[HT[n]]=e+jT[n];o.call(a,i)})});function $T(i,s,l){return function(e){var a,r={nodes:[],records:{}};if(s(function(e){r.records[e.name]={}}),!e)return r;for(d(e,r);a=!1,i(t),a;);function t(e){var i,n,o,t;t=e,0<=w(r.nodes,t)||(i=e,n=r,o=!1,s(function(t){O(l(i,t)||[],function(e){n.records[t.name][e]&&(o=!0)})}),!o)||(d(e,r),a=!0)}return r};function d(e,i){i.nodes.push(e),s(function(t){O(l(e,t)||[],function(e){i.records[t.name][e]=!0})})}}var GT=O,YT=Us,qT=function(e,t,i,n){this._dimName=e,this._axisIndex=t,this._valueWindow,this._percentWindow,this._dataExtent,this._minMaxSpan,this.ecModel=n,this._dataZoomModel=i};function ZT(e,t){var i=e.getAxisModel(),n=e._percentWindow,o=e._valueWindow;if(n){var a=zs(o,[0,500]);a=Math.min(a,20);var r=t||0===n[0]&&100===n[1];i.setRange(r?null:+o[0].toFixed(a),r?null:+o[1].toFixed(a))}}qT.prototype={constructor:qT,hostedBy:function(e){return this._dataZoomModel===e},getDataValueWindow:function(){return this._valueWindow.slice()},getDataPercentWindow:function(){return this._percentWindow.slice()},getTargetSeriesModels:function(){var o=[],a=this.ecModel;return a.eachSeries(function(e){if(n=e.get("coordinateSystem"),0<=w(zT,n)){var t=this._dimName,i=a.queryComponents({mainType:t+"Axis",index:e.get(t+"AxisIndex"),id:e.get(t+"AxisId")})[0];this._axisIndex===(i&&i.componentIndex)&&o.push(e)}var n},this),o},getAxisModel:function(){return this.ecModel.getComponent(this._dimName+"Axis",this._axisIndex)},getOtherAxisModel:function(){var e,t,i,n=this._dimName,o=this.ecModel,a=this.getAxisModel();return e="x"===n||"y"===n?(t="gridIndex","x"===n?"y":"x"):(t="polarIndex","angle"===n?"radius":"angle"),o.eachComponent(e+"Axis",function(e){(e.get(t)||0)===(a.get(t)||0)&&(i=e)}),i},getMinMaxSpan:function(){return N(this._minMaxSpan)},calculateDataWindow:function(t){var n=this._dataExtent,o=this.getAxisModel().axis.scale,a=this._dataZoomModel.getRangePropMode(),r=[0,100],s=[t.start,t.end],l=[];return GT(["startValue","endValue"],function(e){l.push(null!=t[e]?o.parse(t[e]):null)}),GT([0,1],function(e){var t=l[e],i=s[e];"percent"===a[e]?(null==i&&(i=r[e]),t=o.parse(Ls(i,r,n,!0))):i=Ls(t,n,r,!0),l[e]=t,s[e]=i}),{valueWindow:YT(l),percentWindow:YT(s)}},reset:function(e){if(e===this._dataZoomModel){var t=this.getTargetSeriesModels();this._dataExtent=function(e,t,i){var n=[1/0,-1/0];GT(i,function(e){var i=e.getData();i&&GT(i.mapDimension(t,!0),function(e){var t=i.getApproximateExtent(e);t[0]<n[0]&&(n[0]=t[0]),t[1]>n[1]&&(n[1]=t[1])})}),n[1]<n[0]&&(n=[NaN,NaN]);return function(e,t){var i=e.getAxisModel(),n=i.getMin(!0),o="category"===i.get("type"),a=o&&i.getCategories().length;null!=n&&"dataMin"!==n&&"function"!=typeof n?t[0]=n:o&&(t[0]=0<a?0:NaN);var r=i.getMax(!0);null!=r&&"dataMax"!==r&&"function"!=typeof r?t[1]=r:o&&(t[1]=0<a?a-1:NaN),i.get("scale",!0)||(0<t[0]&&(t[0]=0),t[1]<0&&(t[1]=0))}(e,n),n}(this,this._dimName,t);var n,o,a,i=this.calculateDataWindow(e.option);this._valueWindow=i.valueWindow,this._percentWindow=i.percentWindow,o=(n=this)._minMaxSpan={},a=n._dataZoomModel,GT(["min","max"],function(e){o[e+"Span"]=a.get(e+"Span");var t=a.get(e+"ValueSpan");if(null!=t&&(o[e+"ValueSpan"]=t,null!=(t=n.getAxisModel().axis.scale.parse(t)))){var i=n._dataExtent;o[e+"Span"]=Ls(i[0]+t,i,[0,100],!0)}}),ZT(this)}},restore:function(e){e===this._dataZoomModel&&(this._valueWindow=this._percentWindow=null,ZT(this,!0))},filterData:function(e,t){if(e===this._dataZoomModel){var n=this._dimName,i=this.getTargetSeriesModels(),o=e.get("filterMode"),u=this._valueWindow;"none"!==o&&GT(i,function(i){var d=i.getData(),c=d.mapDimension(n,!0);"weakFilter"===o?d.filterSelf(function(e){for(var t,i,n,o=0;o<c.length;o++){var a=d.get(c[o],e),r=!isNaN(a),s=a<u[0],l=a>u[1];if(r&&!s&&!l)return!0;r&&(n=!0),s&&(t=!0),l&&(i=!0)}return n&&t&&i}):GT(c,function(e){if("empty"===o)i.setData(d.map(e,function(e){return(t=e)>=u[0]&&t<=u[1]?e:NaN;var t}));else{var t={};t[e]=u,d.selectRange(t)}}),GT(c,function(e){d.setApproximateExtent(u,e)})})}}};var XT=O,KT=WT,JT=Xu({type:"dataZoom",dependencies:["xAxis","yAxis","zAxis","radiusAxis","angleAxis","singleAxis","series"],defaultOption:{zlevel:0,z:4,orient:null,xAxisIndex:null,yAxisIndex:null,filterMode:"filter",throttle:null,start:0,end:100,startValue:null,endValue:null,minSpan:null,maxSpan:null,minValueSpan:null,maxValueSpan:null,rangeMode:null},init:function(e,t,i){this._dataIntervalByAxis={},this._dataInfo={},this._axisProxies={},this.textStyleModel,this._autoThrottle=!0,this._rangePropMode=["percent","percent"];var n=QT(e);this.mergeDefaultAndTheme(e,i),this.doInit(n)},mergeOption:function(e){var t=QT(e);m(this.option,e,!0),this.doInit(t)},doInit:function(e){var i=this.option;v.canvasSupported||(i.realtime=!1),this._setDefaultThrottle(e),ek(this,e),XT([["start","startValue"],["end","endValue"]],function(e,t){"value"===this._rangePropMode[t]&&(i[e[0]]=null)},this),this.textStyleModel=this.getModel("textStyle"),this._resetTarget(),this._giveAxisProxies()},_giveAxisProxies:function(){var r=this._axisProxies;this.eachTargetAxis(function(e,t,i,n){var o=this.dependentModels[e.axis][t],a=o.__dzAxisProxy||(o.__dzAxisProxy=new qT(e.name,t,this,n));r[e.name+"_"+t]=a},this)},_resetTarget:function(){var i=this.option,e=this._judgeAutoMode();KT(function(e){var t=e.axisIndex;i[t]=so(i[t])},this),"axisIndex"===e?this._autoSetAxisIndex():"orient"===e&&this._autoSetOrient()},_judgeAutoMode:function(){var t=this.option,i=!1;KT(function(e){null!=t[e.axisIndex]&&(i=!0)},this);var e=t.orient;return null==e&&i?"orient":i?void 0:(null==e&&(t.orient="horizontal"),"axisIndex")},_autoSetAxisIndex:function(){var a=!0,t=this.get("orient",!0),r=this.option,e=this.dependentModels;if(a){var i="vertical"===t?"y":"x";e[i+"Axis"].length?(r[i+"AxisIndex"]=[0],a=!1):XT(e.singleAxis,function(e){a&&e.get("orient",!0)===t&&(r.singleAxisIndex=[e.componentIndex],a=!1)})}a&&KT(function(e){if(a){var t=[],i=this.dependentModels[e.axis];if(i.length&&!t.length)for(var n=0,o=i.length;n<o;n++)"category"===i[n].get("type")&&t.push(n);(r[e.axisIndex]=t).length&&(a=!1)}},this),a&&this.ecModel.eachSeries(function(a){this._isSeriesHasAllAxesTypeOf(a,"value")&&KT(function(e){var t=r[e.axisIndex],i=a.get(e.axisIndex),n=a.get(e.axisId),o=a.ecModel.queryComponents({mainType:e.axis,index:i,id:n})[0];if(I&&!o)throw new Error(e.axis+' "'+j(i,n,0)+'" not found');w(t,i=o.componentIndex)<0&&t.push(i)})},this)},_autoSetOrient:function(){var t;this.eachTargetAxis(function(e){!t&&(t=e.name)},this),this.option.orient="y"===t?"vertical":"horizontal"},_isSeriesHasAllAxesTypeOf:function(n,o){var a=!0;return KT(function(e){var t=n.get(e.axisIndex),i=this.dependentModels[e.axis][t];i&&i.get("type")===o||(a=!1)},this),a},_setDefaultThrottle:function(e){if(e.hasOwnProperty("throttle")&&(this._autoThrottle=!1),this._autoThrottle){var t=this.ecModel.option;this.option.throttle=t.animation&&0<t.animationDurationUpdate?100:20}},getFirstTargetAxisModel:function(){var i;return KT(function(e){if(null==i){var t=this.get(e.axisIndex);t.length&&(i=this.dependentModels[e.axis][t[0]])}},this),i},eachTargetAxis:function(i,n){var o=this.ecModel;KT(function(t){XT(this.get(t.axisIndex),function(e){i.call(n,t,e,this,o)},this)},this)},getAxisProxy:function(e,t){return this._axisProxies[e+"_"+t]},getAxisModel:function(e,t){var i=this.getAxisProxy(e,t);return i&&i.getAxisModel()},setRawRange:function(t,e){var i=this.option;XT([["start","startValue"],["end","endValue"]],function(e){null==t[e[0]]&&null==t[e[1]]||(i[e[0]]=t[e[0]],i[e[1]]=t[e[1]])},this),!e&&ek(this,t)},getPercentRange:function(){var e=this.findRepresentativeAxisProxy();if(e)return e.getDataPercentWindow()},getValueRange:function(e,t){if(null!=e||null!=t)return this.getAxisProxy(e,t).getDataValueWindow();var i=this.findRepresentativeAxisProxy();return i?i.getDataValueWindow():void 0},findRepresentativeAxisProxy:function(e){if(e)return e.__dzAxisProxy;var t=this._axisProxies;for(var i in t)if(t.hasOwnProperty(i)&&t[i].hostedBy(this))return t[i];for(var i in t)if(t.hasOwnProperty(i)&&!t[i].hostedBy(this))return t[i]},getRangePropMode:function(){return this._rangePropMode.slice()}});function QT(t){var i={};return XT(["start","end","startValue","endValue","throttle"],function(e){t.hasOwnProperty(e)&&(i[e]=t[e])}),i}function ek(e,o){var a=e._rangePropMode,r=e.get("rangeMode");XT([["start","startValue"],["end","endValue"]],function(e,t){var i=null!=o[e[0]],n=null!=o[e[1]];i&&!n?a[t]="percent":!i&&n?a[t]="value":r?a[t]=r[t]:i&&(a[t]="percent")})}var tk=nc.extend({type:"dataZoom",render:function(e,t,i,n){this.dataZoomModel=e,this.ecModel=t,this.api=i},getTargetCoordInfo:function(){var e=this.dataZoomModel,o=this.ecModel,a={};return e.eachTargetAxis(function(e,t){var i=o.getComponent(e.axis,t);if(i){var n=i.getCoordSysModel();n&&function(e,t,i,n){for(var o,a=0;a<i.length;a++)if(i[a].model===e){o=i[a];break}o||i.push(o={model:e,axisModels:[],coordIndex:n});o.axisModels.push(t)}(n,i,a[n.mainType]||(a[n.mainType]=[]),n.componentIndex)}},this),a}}),ik=(JT.extend({type:"dataZoom.slider",layoutMode:"box",defaultOption:{show:!0,right:"ph",top:"ph",width:"ph",height:"ph",left:null,bottom:null,backgroundColor:"rgba(47,69,84,0)",dataBackground:{lineStyle:{color:"#2f4554",width:.5,opacity:.3},areaStyle:{color:"rgba(47,69,84,0.3)",opacity:.3}},borderColor:"#ddd",fillerColor:"rgba(167,183,204,0.4)",handleIcon:"M8.2,13.6V3.9H6.3v9.7H3.1v14.9h3.3v9.7h1.8v-9.7h3.3V13.6H8.2z M9.7,24.4H4.8v-1.4h4.9V24.4z M9.7,19.1H4.8v-1.4h4.9V19.1z",handleSize:"100%",handleStyle:{color:"#a7b7cc"},labelPrecision:null,labelFormatter:null,showDetail:!0,showDataShadow:"auto",realtime:!0,zoomLock:!1,textStyle:{color:"#333"}}}),xr),nk=Ls,ok=Us,ak=A,rk=O,sk="horizontal",lk=["line","bar","candlestick","scatter"],dk=tk.extend({type:"dataZoom.slider",init:function(e,t){this._displayables={},this._orient,this._range,this._handleEnds,this._size,this._handleWidth,this._handleHeight,this._location,this._dragging,this._dataShadowInfo,this.api=t},render:function(e,t,i,n){dk.superApply(this,"render",arguments),bc(this,"_dispatchZoomAction",this.dataZoomModel.get("throttle"),"fixRate"),this._orient=e.get("orient"),!1!==this.dataZoomModel.get("show")?(n&&"dataZoom"===n.type&&n.from===this.uid||this._buildView(),this._updateView()):this.group.removeAll()},remove:function(){dk.superApply(this,"remove",arguments),xc(this,"_dispatchZoomAction")},dispose:function(){dk.superApply(this,"dispose",arguments),xc(this,"_dispatchZoomAction")},_buildView:function(){var e=this.group;e.removeAll(),this._resetLocation(),this._resetInterval();var t=this._displayables.barGroup=new ni;this._renderBackground(),this._renderHandle(),this._renderDataShadow(),e.add(t),this._positionGroup()},_resetLocation:function(){var e=this.dataZoomModel,t=this.api,i=this._findCoordRect(),n={width:t.getWidth(),height:t.getHeight()},o=this._orient===sk?{right:n.width-i.x-i.width,top:n.height-30-7,width:i.width,height:30}:{right:7,top:i.y,width:30,height:i.height},a=Cl(e.option);O(["right","top","width","height"],function(e){"ph"===a[e]&&(a[e]=o[e])});var r=xl(a,n,e.padding);this._location={x:r.x,y:r.y},this._size=[r.width,r.height],"vertical"===this._orient&&this._size.reverse()},_positionGroup:function(){var e=this.group,t=this._location,i=this._orient,n=this.dataZoomModel.getFirstTargetAxisModel(),o=n&&n.get("inverse"),a=this._displayables.barGroup,r=(this._dataShadowInfo||{}).otherAxisInverse;a.attr(i!==sk||o?i===sk&&o?{scale:r?[-1,1]:[-1,-1]}:"vertical"!==i||o?{scale:r?[-1,-1]:[-1,1],rotation:Math.PI/2}:{scale:r?[1,-1]:[1,1],rotation:Math.PI/2}:{scale:r?[1,1]:[1,-1]});var s=e.getBoundingRect([a]);e.attr("position",[t.x-s.x,t.y-s.y])},_getViewExtent:function(){return[0,this._size[0]]},_renderBackground:function(){var e=this.dataZoomModel,t=this._size,i=this._displayables.barGroup;i.add(new ik({silent:!0,shape:{x:0,y:0,width:t[0],height:t[1]},style:{fill:e.get("backgroundColor")},z2:-40})),i.add(new ik({shape:{x:0,y:0,width:t[0],height:t[1]},style:{fill:"transparent"},z2:0,onclick:A(this._onClickPanelClick,this)}))},_renderDataShadow:function(){var e=this._dataShadowInfo=this._prepareDataShadowInfo();if(e){var t=this._size,i=e.series,n=i.getRawData(),o=i.getShadowDim?i.getShadowDim():e.otherDim;if(null!=o){var a=n.getDataExtent(o),r=.3*(a[1]-a[0]);a=[a[0]-r,a[1]+r];var s,l=[0,t[1]],d=[0,t[0]],c=[[t[0],0],[0,0]],u=[],h=d[1]/(n.count()-1),f=0,p=Math.round(n.count()/t[0]);n.each([o],function(e,t){if(0<p&&t%p)f+=h;else{var i=null==e||isNaN(e)||""===e,n=i?0:nk(e,a,l,!0);i&&!s&&t?(c.push([c[c.length-1][0],0]),u.push([u[u.length-1][0],0])):!i&&s&&(c.push([f,0]),u.push([f,0])),c.push([f,n]),u.push([f,n]),f+=h,s=i}});var m=this.dataZoomModel;this._displayables.barGroup.add(new yr({shape:{points:c},style:E({fill:m.get("dataBackgroundColor")},m.getModel("dataBackground.areaStyle").getAreaStyle()),silent:!0,z2:-20})),this._displayables.barGroup.add(new br({shape:{points:u},style:m.getModel("dataBackground.lineStyle").getLineStyle(),silent:!0,z2:-19}))}}},_prepareDataShadowInfo:function(){var e=this.dataZoomModel,s=e.get("showDataShadow");if(!1!==s){var l,d=this.ecModel;return e.eachTargetAxis(function(a,r){O(e.getAxisProxy(a.name,r).getTargetSeriesModels(),function(e){if(!(l||!0!==s&&w(lk,e.get("type"))<0)){var t,i=d.getComponent(a.axis,r).axis,n={x:"y",y:"x",radius:"angle",angle:"radius"}[a.name],o=e.coordinateSystem;null!=n&&o.getOtherAxis&&(t=o.getOtherAxis(i).inverse),n=e.getData().mapDimension(n),l={thisAxis:i,series:e,thisDim:a.name,otherDim:n,otherAxisInverse:t}}},this)},this),l}},_renderHandle:function(){var e=this._displayables,a=e.handles=[],r=e.handleLabels=[],s=this._displayables.barGroup,t=this._size,l=this.dataZoomModel;s.add(e.filler=new ik({draggable:!0,cursor:ck(this._orient),drift:ak(this._onDragMove,this,"all"),onmousemove:function(e){Ln(e.event)},ondragstart:ak(this._showDataInfo,this,!0),ondragend:ak(this._onDragEnd,this),onmouseover:ak(this._showDataInfo,this,!0),onmouseout:ak(this._showDataInfo,this,!1),style:{fill:l.get("fillerColor"),textPosition:"inside"}})),s.add(new ik(jr({silent:!0,shape:{x:0,y:0,width:t[0],height:t[1]},style:{stroke:l.get("dataBackgroundColor")||l.get("borderColor"),lineWidth:1,fill:"rgba(0,0,0,0)"}}))),rk([0,1],function(e){var t=bs(l.get("handleIcon"),{cursor:ck(this._orient),draggable:!0,drift:ak(this._onDragMove,this,e),onmousemove:function(e){Ln(e.event)},ondragend:ak(this._onDragEnd,this),onmouseover:ak(this._showDataInfo,this,!0),onmouseout:ak(this._showDataInfo,this,!1)},{x:-1,y:0,width:2,height:2}),i=t.getBoundingRect();this._handleHeight=Ps(l.get("handleSize"),this._size[1]),this._handleWidth=i.width/i.height*this._handleHeight,t.setStyle(l.getModel("handleStyle").getItemStyle());var n=l.get("handleColor");null!=n&&(t.style.fill=n),s.add(a[e]=t);var o=l.textStyleModel;this.group.add(r[e]=new cr({silent:!0,invisible:!0,style:{x:0,y:0,text:"",textVerticalAlign:"middle",textAlign:"center",textFill:o.getTextColor(),textFont:o.getFont()},z2:10}))},this)},_resetInterval:function(){var e=this._range=this.dataZoomModel.getPercentRange(),t=this._getViewExtent();this._handleEnds=[nk(e[0],[0,100],t,!0),nk(e[1],[0,100],t,!0)]},_updateInterval:function(e,t){var i=this.dataZoomModel,n=this._handleEnds,o=this._getViewExtent(),a=i.findRepresentativeAxisProxy().getMinMaxSpan(),r=[0,100];Nb(t,n,o,i.get("zoomLock")?"all":e,null!=a.minSpan?nk(a.minSpan,r,o,!0):null,null!=a.maxSpan?nk(a.maxSpan,r,o,!0):null);var s=this._range,l=this._range=ok([nk(n[0],o,r,!0),nk(n[1],o,r,!0)]);return!s||s[0]!==l[0]||s[1]!==l[1]},_updateView:function(e){var n=this._displayables,o=this._handleEnds,t=ok(o.slice()),a=this._size;rk([0,1],function(e){var t=n.handles[e],i=this._handleHeight;t.attr({scale:[i/2,i/2],position:[o[e],a[1]/2-i/2]})},this),n.filler.setShape({x:t[0],y:0,width:t[1]-t[0],height:a[1]}),this._updateDataInfo(e)},_updateDataInfo:function(e){var t=this.dataZoomModel,a=this._displayables,r=a.handleLabels,s=this._orient,l=["",""];if(t.get("showDetail")){var i=t.findRepresentativeAxisProxy();if(i){var n=i.getAxisModel().axis,o=this._range,d=e?i.calculateDataWindow({start:o[0],end:o[1]}).valueWindow:i.getDataValueWindow();l=[this._formatLabel(d[0],n),this._formatLabel(d[1],n)]}}var c=ok(this._handleEnds.slice());function u(e){var t=ps(a.handles[e].parent,this.group),i=gs(0===e?"right":"left",t),n=this._handleWidth/2+5,o=ms([c[e]+(0===e?-n:n),this._size[1]/2],t);r[e].setStyle({x:o[0],y:o[1],textVerticalAlign:s===sk?"middle":i,textAlign:s===sk?i:"center",text:l[e]})}u.call(this,0),u.call(this,1)},_formatLabel:function(e,t){var i=this.dataZoomModel,n=i.get("labelFormatter"),o=i.get("labelPrecision");null!=o&&"auto"!==o||(o=t.getPixelPrecision());var a=null==e||isNaN(e)?"":"category"===t.type||"time"===t.type?t.scale.getLabel(Math.round(e)):e.toFixed(Math.min(o,20));return k(n)?n(e,a):U(n)?n.replace("{value}",a):a},_showDataInfo:function(e){e=this._dragging||e;var t=this._displayables.handleLabels;t[0].attr("invisible",!e),t[1].attr("invisible",!e)},_onDragMove:function(e,t,i){this._dragging=!0;var n=ms([t,i],this._displayables.barGroup.getLocalTransform(),!0),o=this._updateInterval(e,n[0]),a=this.dataZoomModel.get("realtime");this._updateView(!a),o&&a&&this._dispatchZoomAction()},_onDragEnd:function(){this._dragging=!1,this._showDataInfo(!1),!this.dataZoomModel.get("realtime")&&this._dispatchZoomAction()},_onClickPanelClick:function(e){var t=this._size,i=this._displayables.barGroup.transformCoordToLocal(e.offsetX,e.offsetY);if(!(i[0]<0||i[0]>t[0]||i[1]<0||i[1]>t[1])){var n=this._handleEnds,o=(n[0]+n[1])/2,a=this._updateInterval("all",i[0]-o);this._updateView(),a&&this._dispatchZoomAction()}},_dispatchZoomAction:function(){var e=this._range;this.api.dispatchAction({type:"dataZoom",from:this.uid,dataZoomId:this.dataZoomModel.id,start:e[0],end:e[1]})},_findCoordRect:function(){var i;if(rk(this.getTargetCoordInfo(),function(e){if(!i&&e.length){var t=e[0].model.coordinateSystem;i=t.getRect&&t.getRect()}}),!i){var e=this.api.getWidth(),t=this.api.getHeight();i={x:.2*e,y:.2*t,width:.6*e,height:.6*t}}return i}});function ck(e){return"vertical"===e?"ns-resize":"ew-resize"}JT.extend({type:"dataZoom.inside",defaultOption:{disabled:!1,zoomLock:!1,zoomOnMouseWheel:!0,moveOnMouseMove:!0,preventDefaultMouseMove:!0}});var uk=L,hk="\0_ec_dataZoom_roams";function fk(e,n){var t=mk(e),o=n.dataZoomId,a=n.coordId;O(t,function(e,t){var i=e.dataZoomInfos;i[o]&&w(n.allCoordIds,a)<0&&(delete i[o],e.count--)}),gk(t);var i,r,s=t[a];s||((s=t[a]={coordId:a,dataZoomInfos:{},count:0}).controller=(i=s,(r=new Bg(e.getZr())).on("pan",uk(vk,i)),r.on("zoom",uk(yk,i)),r),s.dispatchAction=L(xk,e)),!s.dataZoomInfos[o]&&s.count++,s.dataZoomInfos[o]=n;var l,d,c,u,h=(l=s.dataZoomInfos,c={},u={type_true:2,type_move:1,type_false:0,type_undefined:-1},O(l,function(e){var t=!e.disabled&&(!e.zoomLock||"move");u["type_"+d]<u["type_"+t]&&(d=t),D(c,e.roamControllerOpt)}),{controlType:d,opt:c});s.controller.enable(h.controlType,h.opt),s.controller.setPointerChecker(n.containsPoint),bc(s,"dispatchAction",n.throttleRate,"fixRate")}function pk(e){return e.type+"\0_"+e.id}function mk(e){var t=e.getZr();return t[hk]||(t[hk]={})}function gk(i){O(i,function(e,t){e.count||(e.controller.dispose(),delete i[t])})}function vk(t,i,n,o,a,r,s){bk(t,function(e){return e.panGetRange(t.controller,i,n,o,a,r,s)})}function yk(t,i,n,o){bk(t,function(e){return e.zoomGetRange(t.controller,i,n,o)})}function bk(e,i){var n=[];O(e.dataZoomInfos,function(e){var t=i(e);!e.disabled&&t&&n.push({dataZoomId:e.dataZoomId,start:t[0],end:t[1]})}),n.length&&e.dispatchAction(n)}function xk(e,t){e.dispatchAction({type:"dataZoom",batch:t})}var wk=A,_k=tk.extend({type:"dataZoom.inside",init:function(e,t){this._range},render:function(a,e,r,t){_k.superApply(this,"render",arguments),this._range=a.getPercentRange(),O(this.getTargetCoordInfo(),function(e,i){var o=M(e,function(e){return pk(e.model)});O(e,function(e){var n=e.model,t=a.option;fk(r,{coordId:pk(n),allCoordIds:o,containsPoint:function(e,t,i){return n.coordinateSystem.containPoint([t,i])},dataZoomId:a.id,throttleRate:a.get("throttle",!0),panGetRange:wk(this._onPan,this,e,i),zoomGetRange:wk(this._onZoom,this,e,i),zoomLock:t.zoomLock,disabled:t.disabled,roamControllerOpt:{zoomOnMouseWheel:t.zoomOnMouseWheel,moveOnMouseMove:t.moveOnMouseMove,preventDefaultMouseMove:t.preventDefaultMouseMove}})},this)},this)},dispose:function(){var e,i,t;e=this.api,i=this.dataZoomModel.id,O(t=mk(e),function(e){e.controller.dispose();var t=e.dataZoomInfos;t[i]&&(delete t[i],e.count--)}),gk(t),_k.superApply(this,"dispose",arguments),this._range=null},_onPan:function(e,t,i,n,o,a,r,s,l){var d=this._range,c=d.slice(),u=e.axisModels[0];if(u){var h=Ck[t]([a,r],[s,l],u,i,e),f=h.signal*(c[1]-c[0])*h.pixel/h.pixelLength;return Nb(f,c,[0,100],"all"),this._range=c,d[0]!==c[0]||d[1]!==c[1]?c:void 0}},_onZoom:function(e,t,i,n,o,a){var r=this._range,s=r.slice(),l=e.axisModels[0];if(l){var d=Ck[t](null,[o,a],l,i,e),c=(0<d.signal?d.pixelStart+d.pixelLength-d.pixel:d.pixel-d.pixelStart)/d.pixelLength*(s[1]-s[0])+s[0];n=Math.max(1/n,0),s[0]=(s[0]-c)*n+c,s[1]=(s[1]-c)*n+c;var u=this.dataZoomModel.findRepresentativeAxisProxy().getMinMaxSpan();return Nb(0,s,[0,100],0,u.minSpan,u.maxSpan),this._range=s,r[0]!==s[0]||r[1]!==s[1]?s:void 0}}}),Ck={grid:function(e,t,i,n,o){var a=i.axis,r={},s=o.model.coordinateSystem.getRect();return e=e||[0,0],"x"===a.dim?(r.pixel=t[0]-e[0],r.pixelLength=s.width,r.pixelStart=s.x,r.signal=a.inverse?1:-1):(r.pixel=t[1]-e[1],r.pixelLength=s.height,r.pixelStart=s.y,r.signal=a.inverse?-1:1),r},polar:function(e,t,i,n,o){var a=i.axis,r={},s=o.model.coordinateSystem,l=s.getRadiusAxis().getExtent(),d=s.getAngleAxis().getExtent();return e=e?s.pointToCoord(e):[0,0],t=s.pointToCoord(t),"radiusAxis"===i.mainType?(r.pixel=t[0]-e[0],r.pixelLength=l[1]-l[0],r.pixelStart=l[0],r.signal=a.inverse?1:-1):(r.pixel=t[1]-e[1],r.pixelLength=d[1]-d[0],r.pixelStart=d[0],r.signal=a.inverse?-1:1),r},singleAxis:function(e,t,i,n,o){var a=i.axis,r=o.model.coordinateSystem.getRect(),s={};return e=e||[0,0],"horizontal"===a.orient?(s.pixel=t[0]-e[0],s.pixelLength=r.width,s.pixelStart=r.x,s.signal=a.inverse?1:-1):(s.pixel=t[1]-e[1],s.pixelLength=r.height,s.pixelStart=r.y,s.signal=a.inverse?-1:1),s}};ju({getTargetSeries:function(e){var n=ee();return e.eachComponent("dataZoom",function(e){e.eachTargetAxis(function(e,t,i){O(i.getAxisProxy(e.name,t).getTargetSeriesModels(),function(e){n.set(e.uid,e)})})}),n},modifyOutputEnd:!0,overallReset:function(e,n){e.eachComponent("dataZoom",function(e){e.eachTargetAxis(function(e,t,i){i.getAxisProxy(e.name,t).reset(i,n)}),e.eachTargetAxis(function(e,t,i){i.getAxisProxy(e.name,t).filterData(i,n)})}),e.eachComponent("dataZoom",function(e){var t=e.findRepresentativeAxisProxy(),i=t.getDataPercentWindow(),n=t.getDataValueWindow();e.setRawRange({start:i[0],end:i[1],startValue:n[0],endValue:n[1]},!0)})}}),Wu("dataZoom",function(i,e){var n=$T(A(e.eachComponent,e,"dataZoom"),WT,function(e,t){return e.get(t.axisIndex)}),o=[];e.eachComponent({mainType:"dataZoom",query:i},function(e,t){o.push.apply(o,n(e).nodes)}),O(o,function(e,t){e.setRawRange({start:i.start,end:i.end,startValue:i.startValue,endValue:i.endValue})})});var Sk=O,Tk=function(e){var t=e&&e.visualMap;R(t)||(t=t?[t]:[]),Sk(t,function(e){if(e){kk(e,"splitList")&&!kk(e,"pieces")&&(e.pieces=e.splitList,delete e.splitList);var t=e.pieces;t&&R(t)&&Sk(t,function(e){B(e)&&(kk(e,"start")&&!kk(e,"min")&&(e.min=e.start),kk(e,"end")&&!kk(e,"max")&&(e.max=e.end))})}})};function kk(e,t){return e&&e.hasOwnProperty&&e.hasOwnProperty(t)}Nl.registerSubTypeDefaulter("visualMap",function(e){return e.categories||(e.pieces?0<e.pieces.length:0<e.splitNumber)&&!e.calculable?"piecewise":"continuous"});var Ik=tu.VISUAL.COMPONENT;function Nk(e,t,i,n){for(var o=t.targetVisuals[n],a=Jv.prepareVisualTypes(o),r={color:e.getData().getVisual("color")},s=0,l=a.length;s<l;s++){var d=a[s],c=o["opacity"===d?"__alphaForOpacity":d];c&&c.applyVisual(i,u,h)}return r.color;function u(e){return r[e]}function h(e,t){r[e]=t}}Yu(Ik,{createOnAllSeries:!0,reset:function(n,e){var o=[];return e.eachComponent("visualMap",function(e){var t,f,p,m,g,i=n.pipelineContext;!e.isTargetSeries(n)||i&&i.large||o.push((t=e.stateList,f=e.targetVisuals,p=A(e.getValueState,e),m=e.getDataDimension(n.getData()),g={},O(t,function(e){var t=Jv.prepareVisualTypes(f[e]);g[e]=t}),{progress:function(e,i){function t(e){return i.getItemVisual(o,e)}function n(e,t){i.setItemVisual(o,e,t)}var o;for(null!=m&&(m=i.getDimension(m));null!=(o=e.next());){var a=i.getRawDataItem(o);if(a&&!1===a.visualMap)return;for(var r=null!=m?i.get(m,o,!0):o,s=p(r),l=f[s],d=g[s],c=0,u=d.length;c<u;c++){var h=d[c];l[h]&&l[h].applyVisual(r,t,n)}}}}))}),o}}),Yu(Ik,{createOnAllSeries:!0,reset:function(o,e){var a=o.getData(),r=[];e.eachComponent("visualMap",function(e){if(e.isTargetSeries(o)){var t=e.getVisualMeta(A(Nk,null,o,e))||{stops:[],outerColors:[]},i=e.getDataDimension(a),n=a.getDimensionInfo(i);null!=n&&(t.dimension=n.index,r.push(t))}}),o.getData().setVisual("visualMeta",r)}});var Ek=function(e,t,i){var n=N((Mk[e]||{})[t]);return i&&R(n)?n[n.length-1]:n},Mk={color:{active:["#006edd","#e0ffff"],inactive:["rgba(0,0,0,0)"]},colorHue:{active:[0,360],inactive:[0,0]},colorSaturation:{active:[.3,1],inactive:[0,0]},colorLightness:{active:[.9,.5],inactive:[0,0]},colorAlpha:{active:[.3,1],inactive:[0,0]},opacity:{active:[.3,1],inactive:[0,0]},symbol:{active:["circle","roundRect","diamond"],inactive:["none"]},symbolSize:{active:[10,50],inactive:[0,0]}},Dk=Jv.mapVisual,Ak=Jv.eachVisual,Lk=R,Pk=O,Rk=Us,Uk=Ls,Ok=Xu({type:"visualMap",dependencies:["series"],stateList:["inRange","outOfRange"],replacableOptionKeys:["inRange","outOfRange","target","controller","color"],dataBound:[-1/0,1/0],layoutMode:{type:"box",ignoreSize:!0},defaultOption:{show:!0,zlevel:0,z:4,seriesIndex:"all",min:0,max:200,dimension:null,inRange:null,outOfRange:null,left:0,right:null,top:null,bottom:0,itemWidth:null,itemHeight:null,inverse:!1,orient:"vertical",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",contentColor:"#5793f3",inactiveColor:"#aaa",borderWidth:0,padding:5,textGap:10,precision:0,color:null,formatter:null,text:null,textStyle:{color:"#333"}},init:function(e,t,i){this._dataExtent,this.targetVisuals={},this.controllerVisuals={},this.textStyleModel,this.itemSize,this.mergeDefaultAndTheme(e,i)},optionUpdated:function(e,t){var i=this.option;v.canvasSupported||(i.realtime=!1),!t&&$S(i,e,this.replacableOptionKeys),this.textStyleModel=this.getModel("textStyle"),this.resetItemSize(),this.completeVisualOption()},resetVisual:function(e){var t=this.stateList;e=A(e,this),this.controllerVisuals=WS(this.option.controller,t,e),this.targetVisuals=WS(this.option.target,t,e)},getTargetSeriesIndices:function(){var e=this.option.seriesIndex,i=[];return null==e||"all"===e?this.ecModel.eachSeries(function(e,t){i.push(t)}):i=so(e),i},eachTargetSeries:function(t,i){O(this.getTargetSeriesIndices(),function(e){t.call(i,this.ecModel.getSeriesByIndex(e))},this)},isTargetSeries:function(t){var i=!1;return this.eachTargetSeries(function(e){e===t&&(i=!0)}),i},formatValueText:function(e,t,i){var n,o,a=this.option,r=a.precision,s=this.dataBound,l=a.formatter;return i=i||["<",">"],R(e)&&(e=e.slice(),n=!0),o=t?e:n?[d(e[0]),d(e[1])]:d(e),U(l)?l.replace("{value}",n?o[0]:o).replace("{value2}",n?o[1]:o):k(l)?n?l(e[0],e[1]):l(e):n?e[0]===s[0]?i[0]+" "+o[1]:e[1]===s[1]?i[1]+" "+o[0]:o[0]+" - "+o[1]:o;function d(e){return e===s[0]?"min":e===s[1]?"max":(+e).toFixed(Math.min(r,20))}},resetExtent:function(){var e=this.option,t=Rk([e.min,e.max]);this._dataExtent=t},getDataDimension:function(e){var t=this.option.dimension,i=e.dimensions;if(null!=t||i.length){if(null!=t)return e.getDimension(t);for(var n=e.dimensions,o=n.length-1;0<=o;o--){var a=n[o];if(!e.getDimensionInfo(a).isCalculationCoord)return a}}},getExtent:function(){return this._dataExtent.slice()},completeVisualOption:function(){var e=this.ecModel,t=this.option,i={inRange:t.inRange,outOfRange:t.outOfRange},n=t.target||(t.target={}),o=t.controller||(t.controller={});m(n,i),m(o,i);var d=this.isCategory();function a(n){Lk(t.color)&&!n.inRange&&(n.inRange={color:t.color.slice().reverse()}),n.inRange=n.inRange||{color:e.get("gradientColor")},Pk(this.stateList,function(e){var t=n[e];if(U(t)){var i=Ek(t,"active",d);i?(n[e]={},n[e][t]=i):delete n[e]}},this)}a.call(this,n),a.call(this,o),function(e,t,i){var n=e[t],o=e[i];n&&!o&&(o=e[i]={},Pk(n,function(e,t){if(Jv.isValidType(t)){var i=Ek(t,"inactive",d);null!=i&&(o[t]=i,"color"!==t||o.hasOwnProperty("opacity")||o.hasOwnProperty("colorAlpha")||(o.opacity=[0,0]))}}))}.call(this,n,"inRange","outOfRange"),function(a){var r=(a.inRange||{}).symbol||(a.outOfRange||{}).symbol,s=(a.inRange||{}).symbolSize||(a.outOfRange||{}).symbolSize,l=this.get("inactiveColor");Pk(this.stateList,function(e){var t=this.itemSize,i=a[e];i||(i=a[e]={color:d?l:[l]}),null==i.symbol&&(i.symbol=r&&N(r)||(d?"roundRect":["roundRect"])),null==i.symbolSize&&(i.symbolSize=s&&N(s)||(d?t[0]:[t[0],t[0]])),i.symbol=Dk(i.symbol,function(e){return"none"===e||"square"===e?"roundRect":e});var n=i.symbolSize;if(null!=n){var o=-1/0;Ak(n,function(e){o<e&&(o=e)}),i.symbolSize=Dk(n,function(e){return Uk(e,[0,o],[0,t[0]],!0)})}},this)}.call(this,o)},resetItemSize:function(){this.itemSize=[parseFloat(this.get("itemWidth")),parseFloat(this.get("itemHeight"))]},isCategory:function(){return!!this.option.categories},setSelected:ie,getValueState:ie,getVisualMeta:ie}),Bk=[20,140],zk=Ok.extend({type:"visualMap.continuous",defaultOption:{align:"auto",calculable:!1,range:null,realtime:!0,itemHeight:null,itemWidth:null,hoverLink:!0,hoverLinkDataSize:null,hoverLinkOnHandle:null},optionUpdated:function(e,t){zk.superApply(this,"optionUpdated",arguments),this.resetExtent(),this.resetVisual(function(e){e.mappingMethod="linear",e.dataExtent=this.getExtent()}),this._resetRange()},resetItemSize:function(){zk.superApply(this,"resetItemSize",arguments);var e=this.itemSize;"horizontal"===this._orient&&e.reverse(),(null==e[0]||isNaN(e[0]))&&(e[0]=Bk[0]),(null==e[1]||isNaN(e[1]))&&(e[1]=Bk[1])},_resetRange:function(){var e=this.getExtent(),t=this.option.range;!t||t.auto?(e.auto=1,this.option.range=e):R(t)&&(t[0]>t[1]&&t.reverse(),t[0]=Math.max(t[0],e[0]),t[1]=Math.min(t[1],e[1]))},completeVisualOption:function(){Ok.prototype.completeVisualOption.apply(this,arguments),O(this.stateList,function(e){var t=this.option.controller[e].symbolSize;t&&t[0]!==t[1]&&(t[0]=0)},this)},setSelected:function(e){this.option.range=e.slice(),this._resetRange()},getSelected:function(){var e=this.getExtent(),t=Us((this.get("range")||[]).slice());return t[0]>e[1]&&(t[0]=e[1]),t[1]>e[1]&&(t[1]=e[1]),t[0]<e[0]&&(t[0]=e[0]),t[1]<e[0]&&(t[1]=e[0]),t},getValueState:function(e){var t=this.option.range,i=this.getExtent();return(t[0]<=i[0]||t[0]<=e)&&(t[1]>=i[1]||e<=t[1])?"inRange":"outOfRange"},findTargetDataIndices:function(n){var o=[];return this.eachTargetSeries(function(e){var i=[],t=e.getData();t.each(this.getDataDimension(t),function(e,t){n[0]<=e&&e<=n[1]&&i.push(t)},this),o.push({seriesId:e.id,dataIndex:i})},this),o},getVisualMeta:function(i){var e=Fk(this,"outOfRange",this.getExtent()),t=Fk(this,"inRange",this.option.range.slice()),n=[];function o(e,t){n.push({value:e,color:i(e,t)})}for(var a=0,r=0,s=t.length,l=e.length;r<l&&(!t.length||e[r]<=t[0]);r++)e[r]<t[a]&&o(e[r],"outOfRange");for(var d=1;a<s;a++,d=0)d&&n.length&&o(t[a],"outOfRange"),o(t[a],"inRange");for(d=1;r<l;r++)(!t.length||t[t.length-1]<e[r])&&(d&&(n.length&&o(n[n.length-1].value,"outOfRange"),d=0),o(e[r],"outOfRange"));var c=n.length;return{stops:n,outerColors:[c?n[0].color:"transparent",c?n[c-1].color:"transparent"]}}});function Fk(e,t,i){if(i[0]===i[1])return i.slice();for(var n=(i[1]-i[0])/200,o=i[0],a=[],r=0;r<=200&&o<i[1];r++)a.push(o),o+=n;return a.push(i[1]),a}var Hk=Ku({type:"visualMap",autoPositionValues:{left:1,right:1,top:1,bottom:1},init:function(e,t){this.ecModel=e,this.api=t,this.visualMapModel},render:function(e,t,i,n){!1!==(this.visualMapModel=e).get("show")?this.doRender.apply(this,arguments):this.group.removeAll()},renderBackground:function(e){var t=this.visualMapModel,i=el(t.get("padding")||0),n=e.getBoundingRect();e.add(new xr({z2:-1,silent:!0,shape:{x:n.x-i[3],y:n.y-i[0],width:n.width+i[3]+i[1],height:n.height+i[0]+i[2]},style:{fill:t.get("backgroundColor"),stroke:t.get("borderColor"),lineWidth:t.get("borderWidth")}}))},getControllerVisual:function(i,n,o){var e=(o=o||{}).forceState,t=this.visualMapModel,a={};if("symbol"===n&&(a.symbol=t.get("itemSymbol")),"color"===n){var r=t.get("contentColor");a.color=r}function s(e){return a[e]}function l(e,t){a[e]=t}var d=t.controllerVisuals[e||t.getValueState(i)];return O(Jv.prepareVisualTypes(d),function(e){var t=d[e];o.convertOpacityToAlpha&&"opacity"===e&&(e="colorAlpha",t=d.__alphaForOpacity),Jv.dependsOn(e,n)&&t&&t.applyVisual(i,s,l)}),a[n]},positionGroup:function(e){var t=this.visualMapModel,i=this.api;wl(e,t.getBoxLayoutParams(),{width:i.getWidth(),height:i.getHeight()})},doRender:ie});function Vk(e,t,i){var n=e.option,o=n.align;if(null!=o&&"auto"!==o)return o;for(var a={width:t.getWidth(),height:t.getHeight()},r="horizontal"===n.orient?1:0,s=[["left","right","width"],["top","bottom","height"]],l=s[r],d=[0,null,10],c={},u=0;u<3;u++)c[s[1-r][u]]=d[u],c[l[u]]=2===u?i[0]:n[l[u]];var h=[["x","width",3],["y","height",0]][r],f=xl(c,a,n.padding);return l[(f.margin[h[2]]||0)+f[h[0]]+.5*f[h[1]]<.5*a[h[1]]?0:1]}function jk(t){return O(t||[],function(e){null!=t.dataIndex&&(t.dataIndexInside=t.dataIndex,t.dataIndex=null)}),t}var Wk=Ls,$k=O,Gk=Math.min,Yk=Math.max,qk=Hk.extend({type:"visualMap.continuous",init:function(){qk.superApply(this,"init",arguments),this._shapes={},this._dataInterval=[],this._handleEnds=[],this._orient,this._useHandle,this._hoverLinkDataIndices=[],this._dragging,this._hovering},doRender:function(e,t,i,n){n&&"selectDataRange"===n.type&&n.from===this.uid||this._buildView()},_buildView:function(){this.group.removeAll();var e=this.visualMapModel,t=this.group;this._orient=e.get("orient"),this._useHandle=e.get("calculable"),this._resetInterval(),this._renderBar(t);var i=e.get("text");this._renderEndsText(t,i,0),this._renderEndsText(t,i,1),this._updateView(!0),this.renderBackground(t),this._updateView(),this._enableHoverLinkToSeries(),this._enableHoverLinkFromSeries(),this.positionGroup(t)},_renderEndsText:function(e,t,i){if(t){var n=t[1-i];n=null!=n?n+"":"";var o=this.visualMapModel,a=o.get("textGap"),r=o.itemSize,s=this._shapes.barGroup,l=this._applyTransform([r[0]/2,0===i?-a:r[1]+a],s),d=this._applyTransform(0===i?"bottom":"top",s),c=this._orient,u=this.visualMapModel.textStyleModel;this.group.add(new cr({style:{x:l[0],y:l[1],textVerticalAlign:"horizontal"===c?"middle":d,textAlign:"horizontal"===c?d:"center",text:n,textFont:u.getFont(),textFill:u.getTextColor()}}))}},_renderBar:function(e){var t=this.visualMapModel,i=this._shapes,n=t.itemSize,o=this._orient,a=this._useHandle,r=Vk(t,this.api,n),s=i.barGroup=this._createBarGroup(r);s.add(i.outOfRange=Zk()),s.add(i.inRange=Zk(null,a?Kk(this._orient):null,A(this._dragHandle,this,"all",!1),A(this._dragHandle,this,"all",!0)));var l=t.textStyleModel.getTextRect("国"),d=Yk(l.width,l.height);a&&(i.handleThumbs=[],i.handleLabels=[],i.handleLabelPoints=[],this._createHandle(s,0,n,d,o,r),this._createHandle(s,1,n,d,o,r)),this._createIndicator(s,n,d,o),e.add(s)},_createHandle:function(e,t,i,n,o){var a,r=A(this._dragHandle,this,t,!1),s=A(this._dragHandle,this,t,!0),l=Zk((a=n,0===t?[[0,0],[a,0],[a,-a]]:[[0,0],[a,0],[a,a]]),Kk(this._orient),r,s);l.position[0]=i[0],e.add(l);var d=this.visualMapModel.textStyleModel,c=new cr({draggable:!0,drift:r,onmousemove:function(e){Ln(e.event)},ondragend:s,style:{x:0,y:0,text:"",textFont:d.getFont(),textFill:d.getTextColor()}});this.group.add(c);var u=["horizontal"===o?n/2:1.5*n,"horizontal"===o?0===t?-1.5*n:1.5*n:0===t?-n/2:n/2],h=this._shapes;h.handleThumbs[t]=l,h.handleLabelPoints[t]=u,h.handleLabels[t]=c},_createIndicator:function(e,t,i,n){var o=Zk([[0,0]],"move");o.position[0]=t[0],o.attr({invisible:!0,silent:!0}),e.add(o);var a=this.visualMapModel.textStyleModel,r=new cr({silent:!0,invisible:!0,style:{x:0,y:0,text:"",textFont:a.getFont(),textFill:a.getTextColor()}});this.group.add(r);var s=["horizontal"===n?i/2:9,0],l=this._shapes;l.indicator=o,l.indicatorLabel=r,l.indicatorLabelPoint=s},_dragHandle:function(e,t,i,n){if(this._useHandle){if(this._dragging=!t,!t){var o=this._applyTransform([i,n],this._shapes.barGroup,!0);this._updateInterval(e,o[1]),this._updateView()}t===!this.visualMapModel.get("realtime")&&this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:this._dataInterval.slice()}),t?!this._hovering&&this._clearHoverLinkToSeries():Xk(this.visualMapModel)&&this._doHoverLinkToSeries(this._handleEnds[e],!1)}},_resetInterval:function(){var e=this.visualMapModel,t=this._dataInterval=e.getSelected(),i=e.getExtent(),n=[0,e.itemSize[1]];this._handleEnds=[Wk(t[0],i,n,!0),Wk(t[1],i,n,!0)]},_updateInterval:function(e,t){t=t||0;var i=this.visualMapModel,n=this._handleEnds,o=[0,i.itemSize[1]];Nb(t,n,o,e,0);var a=i.getExtent();this._dataInterval=[Wk(n[0],o,a,!0),Wk(n[1],o,a,!0)]},_updateView:function(e){var t=this.visualMapModel,i=t.getExtent(),n=this._shapes,o=[0,t.itemSize[1]],a=e?o:this._handleEnds,r=this._createBarVisual(this._dataInterval,i,a,"inRange"),s=this._createBarVisual(i,i,o,"outOfRange");n.inRange.setStyle({fill:r.barColor,opacity:r.opacity}).setShape("points",r.barPoints),n.outOfRange.setStyle({fill:s.barColor,opacity:s.opacity}).setShape("points",s.barPoints),this._updateHandle(a,r)},_createBarVisual:function(e,t,i,n){var o={forceState:n,convertOpacityToAlpha:!0},a=this._makeColorGradient(e,o),r=[this.getControllerVisual(e[0],"symbolSize",o),this.getControllerVisual(e[1],"symbolSize",o)],s=this._createBarPoints(i,r);return{barColor:new Nr(0,0,0,1,a),barPoints:s,handlesColor:[a[0].color,a[a.length-1].color]}},_makeColorGradient:function(e,t){var i=[],n=(e[1]-e[0])/100;i.push({color:this.getControllerVisual(e[0],"color",t),offset:0});for(var o=1;o<100;o++){var a=e[0]+n*o;if(a>e[1])break;i.push({color:this.getControllerVisual(a,"color",t),offset:o/100})}return i.push({color:this.getControllerVisual(e[1],"color",t),offset:1}),i},_createBarPoints:function(e,t){var i=this.visualMapModel.itemSize;return[[i[0]-t[0],e[0]],[i[0],e[0]],[i[0],e[1]],[i[0]-t[1],e[1]]]},_createBarGroup:function(e){var t=this._orient,i=this.visualMapModel.get("inverse");return new ni("horizontal"!==t||i?"horizontal"===t&&i?{scale:"bottom"===e?[-1,1]:[1,1],rotation:-Math.PI/2}:"vertical"!==t||i?{scale:"left"===e?[1,1]:[-1,1]}:{scale:"left"===e?[1,-1]:[-1,-1]}:{scale:"bottom"===e?[1,1]:[-1,1],rotation:Math.PI/2})},_updateHandle:function(n,o){if(this._useHandle){var a=this._shapes,r=this.visualMapModel,s=a.handleThumbs,l=a.handleLabels;$k([0,1],function(e){var t=s[e];t.setStyle("fill",o.handlesColor[e]),t.position[1]=n[e];var i=ms(a.handleLabelPoints[e],ps(t,this.group));l[e].setStyle({x:i[0],y:i[1],text:r.formatValueText(this._dataInterval[e]),textVerticalAlign:"middle",textAlign:this._applyTransform("horizontal"===this._orient?0===e?"bottom":"top":"left",a.barGroup)})},this)}},_showIndicator:function(e,t,i,n){var o=this.visualMapModel,a=o.getExtent(),r=o.itemSize,s=[0,r[1]],l=Wk(e,a,s,!0),d=this._shapes,c=d.indicator;if(c){var u,h,f,p;c.position[1]=l,c.attr("invisible",!1),c.setShape("points",(u=!!i,h=n,f=l,p=r[1],u?[[0,-Gk(h,Yk(f,0))],[6,0],[0,Gk(h,Yk(p-f,0))]]:[[0,0],[5,-5],[5,5]]));var m=this.getControllerVisual(e,"color",{convertOpacityToAlpha:!0});c.setStyle("fill",m);var g=ms(d.indicatorLabelPoint,ps(c,this.group)),v=d.indicatorLabel;v.attr("invisible",!1);var y=this._applyTransform("left",d.barGroup),b=this._orient;v.setStyle({text:(i||"")+o.formatValueText(t),textVerticalAlign:"horizontal"===b?y:"middle",textAlign:"horizontal"===b?"center":y,x:g[0],y:g[1]})}},_enableHoverLinkToSeries:function(){var n=this;this._shapes.barGroup.on("mousemove",function(e){if(n._hovering=!0,!n._dragging){var t=n.visualMapModel.itemSize,i=n._applyTransform([e.offsetX,e.offsetY],n._shapes.barGroup,!0,!0);i[1]=Gk(Yk(0,i[1]),t[1]),n._doHoverLinkToSeries(i[1],0<=i[0]&&i[0]<=t[0])}}).on("mouseout",function(){n._hovering=!1,!n._dragging&&n._clearHoverLinkToSeries()})},_enableHoverLinkFromSeries:function(){var e=this.api.getZr();this.visualMapModel.option.hoverLink?(e.on("mouseover",this._hoverLinkFromSeriesMouseOver,this),e.on("mouseout",this._hideIndicator,this)):this._clearHoverLinkFromSeries()},_doHoverLinkToSeries:function(e,t){var i=this.visualMapModel,n=i.itemSize;if(i.option.hoverLink){var o=[0,n[1]],a=i.getExtent();e=Gk(Yk(o[0],e),o[1]);var r=function(e,t,i){var n=6,o=e.get("hoverLinkDataSize");o&&(n=Wk(o,t,i,!0)/2);return n}(i,a,o),s=[e-r,e+r],l=Wk(e,o,a,!0),d=[Wk(s[0],o,a,!0),Wk(s[1],o,a,!0)];s[0]<o[0]&&(d[0]=-1/0),o[1]<s[1]&&(d[1]=1/0),t&&(d[0]===-1/0?this._showIndicator(l,d[1],"< ",r):d[1]===1/0?this._showIndicator(l,d[0],"> ",r):this._showIndicator(l,l,"≈ ",r));var c=this._hoverLinkDataIndices,u=[];(t||Xk(i))&&(u=this._hoverLinkDataIndices=i.findTargetDataIndices(d));var h=function(e,t){var i={},n={};return o(e||[],i),o(t||[],n,i),[a(i),a(n)];function o(e,t,i){for(var n=0,o=e.length;n<o;n++)for(var a=e[n].seriesId,r=so(e[n].dataIndex),s=i&&i[a],l=0,d=r.length;l<d;l++){var c=r[l];s&&s[c]?s[c]=null:(t[a]||(t[a]={}))[c]=1}}function a(e,t){var i=[];for(var n in e)if(e.hasOwnProperty(n)&&null!=e[n])if(t)i.push(+n);else{var o=a(e[n],!0);o.length&&i.push({seriesId:n,dataIndex:o})}return i}}(c,u);this._dispatchHighDown("downplay",jk(h[0])),this._dispatchHighDown("highlight",jk(h[1]))}},_hoverLinkFromSeriesMouseOver:function(e){var t=e.target,i=this.visualMapModel;if(t&&null!=t.dataIndex){var n=this.ecModel.getSeriesByIndex(t.seriesIndex);if(i.isTargetSeries(n)){var o=n.getData(t.dataType),a=o.get(i.getDataDimension(o),t.dataIndex,!0);isNaN(a)||this._showIndicator(a,a)}}},_hideIndicator:function(){var e=this._shapes;e.indicator&&e.indicator.attr("invisible",!0),e.indicatorLabel&&e.indicatorLabel.attr("invisible",!0)},_clearHoverLinkToSeries:function(){this._hideIndicator();var e=this._hoverLinkDataIndices;this._dispatchHighDown("downplay",jk(e)),e.length=0},_clearHoverLinkFromSeries:function(){this._hideIndicator();var e=this.api.getZr();e.off("mouseover",this._hoverLinkFromSeriesMouseOver),e.off("mouseout",this._hideIndicator)},_applyTransform:function(e,t,i,n){var o=ps(t,n?null:this.group);return xs[R(e)?"applyTransform":"transformDirection"](e,o,i)},_dispatchHighDown:function(e,t){t&&t.length&&this.api.dispatchAction({type:e,batch:t})},dispose:function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()},remove:function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()}});function Zk(e,t,i,n){return new yr({shape:{points:e},draggable:!!i,cursor:t,drift:i,onmousemove:function(e){Ln(e.event)},ondragend:n})}function Xk(e){var t=e.get("hoverLinkOnHandle");return!!(null==t?e.get("realtime"):t)}function Kk(e){return"vertical"===e?"ns-resize":"ew-resize"}Wu({type:"selectDataRange",event:"dataRangeSelected",update:"update"},function(t,e){e.eachComponent({mainType:"visualMap",query:t},function(e){e.setSelected(t.selected)})}),Vu(Tk);var Jk=Ok.extend({type:"visualMap.piecewise",defaultOption:{selected:null,minOpen:!1,maxOpen:!1,align:"auto",itemWidth:20,itemHeight:14,itemSymbol:"roundRect",pieceList:null,categories:null,splitNumber:5,selectedMode:"multiple",itemGap:10,hoverLink:!0,showLabel:null},optionUpdated:function(e,t){Jk.superApply(this,"optionUpdated",arguments),this._pieceList=[],this.resetExtent();var i=this._mode=this._determineMode();Qk[this._mode].call(this),this._resetSelected(e,t);var n=this.option.categories;this.resetVisual(function(e,t){"categories"===i?(e.mappingMethod="category",e.categories=N(n)):(e.dataExtent=this.getExtent(),e.mappingMethod="piecewise",e.pieceList=M(this._pieceList,function(e){e=N(e);return"inRange"!==t&&(e.visual=null),e}))})},completeVisualOption:function(){var n=this.option,i={},e=Jv.listVisualTypes(),o=this.isCategory();function a(e,t,i){return e&&e[t]&&(B(e[t])?e[t].hasOwnProperty(i):e[t]===i)}O(n.pieces,function(t){O(e,function(e){t.hasOwnProperty(e)&&(i[e]=1)})}),O(i,function(e,t){var i=0;O(this.stateList,function(e){i|=a(n,e,t)||a(n.target,e,t)},this),!i&&O(this.stateList,function(e){(n[e]||(n[e]={}))[t]=Ek(t,"inRange"===e?"active":"inactive",o)})},this),Ok.prototype.completeVisualOption.apply(this,arguments)},_resetSelected:function(e,t){var i=this.option,n=this._pieceList,o=(t?i:e).selected||{};if(i.selected=o,O(n,function(e,t){var i=this.getSelectedMapKey(e);o.hasOwnProperty(i)||(o[i]=!0)},this),"single"===i.selectedMode){var a=!1;O(n,function(e,t){var i=this.getSelectedMapKey(e);o[i]&&(a?o[i]=!1:a=!0)},this)}},getSelectedMapKey:function(e){return"categories"===this._mode?e.value+"":e.index+""},getPieceList:function(){return this._pieceList},_determineMode:function(){var e=this.option;return e.pieces&&0<e.pieces.length?"pieces":this.option.categories?"categories":"splitNumber"},setSelected:function(e){this.option.selected=N(e)},getValueState:function(e){var t=Jv.findPieceIndex(e,this._pieceList);return null!=t&&this.option.selected[this.getSelectedMapKey(this._pieceList[t])]?"inRange":"outOfRange"},findTargetDataIndices:function(n){var o=[];return this.eachTargetSeries(function(e){var i=[],t=e.getData();t.each(this.getDataDimension(t),function(e,t){Jv.findPieceIndex(e,this._pieceList)===n&&i.push(t)},this),o.push({seriesId:e.id,dataIndex:i})},this),o},getRepresentValue:function(e){var t;if(this.isCategory())t=e.value;else if(null!=e.value)t=e.value;else{var i=e.interval||[];t=i[0]===-1/0&&i[1]===1/0?0:(i[0]+i[1])/2}return t},getVisualMeta:function(o){if(!this.isCategory()){var a=[],r=[],s=this,e=this._pieceList.slice();if(e.length){var t=e[0].interval[0];t!==-1/0&&e.unshift({interval:[-1/0,t]}),(t=e[e.length-1].interval[1])!==1/0&&e.push({interval:[t,1/0]})}else e.push({interval:[-1/0,1/0]});var i=-1/0;return O(e,function(e){var t=e.interval;t&&(t[0]>i&&n([i,t[0]],"outOfRange"),n(t.slice()),i=t[1])},this),{stops:a,outerColors:r}}function n(e,t){var i=s.getRepresentValue({interval:e});t||(t=s.getValueState(i));var n=o(i,t);e[0]===-1/0?r[0]=n:e[1]===1/0?r[1]=n:a.push({value:e[0],color:n},{value:e[1],color:n})}}}),Qk={splitNumber:function(){var e=this.option,t=this._pieceList,i=Math.min(e.precision,20),n=this.getExtent(),o=e.splitNumber;o=Math.max(parseInt(o,10),1),e.splitNumber=o;for(var a=(n[1]-n[0])/o;+a.toFixed(i)!==a&&i<5;)i++;e.precision=i,a=+a.toFixed(i);var r=0;e.minOpen&&t.push({index:r++,interval:[-1/0,n[0]],close:[0,0]});for(var s=n[0],l=r+o;r<l;s+=a){var d=r===o-1?n[1]:s+a;t.push({index:r++,interval:[s,d],close:[1,1]})}e.maxOpen&&t.push({index:r++,interval:[n[1],1/0],close:[0,0]}),Zs(t),O(t,function(e){e.text=this.formatValueText(e.interval)},this)},categories:function(){var e=this.option;O(e.categories,function(e){this._pieceList.push({text:this.formatValueText(e,!0),value:e})},this),eI(e,this._pieceList)},pieces:function(){var e=this.option,h=this._pieceList;O(e.pieces,function(e,t){B(e)||(e={value:e});var i={text:"",index:t};if(null!=e.label&&(i.text=e.label),e.hasOwnProperty("value")){var n=i.value=e.value;i.interval=[n,n],i.close=[1,1]}else{for(var o=i.interval=[],a=i.close=[0,0],r=[1,0,1],s=[-1/0,1/0],l=[],d=0;d<2;d++){for(var c=[["gte","gt","min"],["lte","lt","max"]][d],u=0;u<3&&null==o[d];u++)o[d]=e[c[u]],a[d]=r[u],l[d]=2===u;null==o[d]&&(o[d]=s[d])}l[0]&&o[1]===1/0&&(a[0]=0),l[1]&&o[0]===-1/0&&(a[1]=0),I&&o[0]>o[1]&&console.warn("Piece "+t+"is illegal: "+o+" lower bound should not greater then uppper bound."),o[0]===o[1]&&a[0]&&a[1]&&(i.value=o[0])}i.visual=Jv.retrieveVisuals(e),h.push(i)},this),eI(e,h),Zs(h),O(h,function(e){var t=e.close,i=[["<","≤"][t[1]],[">","≥"][t[0]]];e.text=e.text||this.formatValueText(null!=e.value?e.value:e.interval,!1,i)},this)}};function eI(e,t){var i=e.inverse;("vertical"===e.orient?!i:i)&&t.reverse()}Hk.extend({type:"visualMap.piecewise",doRender:function(){var a=this.group;a.removeAll();var r=this.visualMapModel,s=r.get("textGap"),e=r.textStyleModel,l=e.getFont(),d=e.getTextColor(),c=this._getItemAlign(),u=r.itemSize,t=this._getViewData(),i=t.endsText,h=j(r.get("showLabel",!0),!i);i&&this._renderEndsText(a,i[0],u,h,c),O(t.viewPieceList,function(e){var t=e.piece,i=new ni;i.onclick=A(this._onItemClick,this,t),this._enableHoverLink(i,e.indexInModelPieceList);var n=r.getRepresentValue(t);if(this._createItemSymbol(i,n,[0,0,u[0],u[1]]),h){var o=this.visualMapModel.getValueState(n);i.add(new cr({style:{x:"right"===c?-s:u[0]+s,y:u[1]/2,text:t.text,textVerticalAlign:"middle",textAlign:c,textFont:l,textFill:d,opacity:"outOfRange"===o?.5:1}}))}a.add(i)},this),i&&this._renderEndsText(a,i[1],u,h,c),bl(r.get("orient"),a,r.get("itemGap")),this.renderBackground(a),this.positionGroup(a)},_enableHoverLink:function(e,i){function t(e){var t=this.visualMapModel;t.option.hoverLink&&this.api.dispatchAction({type:e,batch:jk(t.findTargetDataIndices(i))})}e.on("mouseover",A(t,this,"highlight")).on("mouseout",A(t,this,"downplay"))},_getItemAlign:function(){var e=this.visualMapModel,t=e.option;if("vertical"===t.orient)return Vk(e,this.api,e.itemSize);var i=t.align;return i&&"auto"!==i||(i="left"),i},_renderEndsText:function(e,t,i,n,o){if(t){var a=new ni,r=this.visualMapModel.textStyleModel;a.add(new cr({style:{x:n?"right"===o?i[0]:0:i[0]/2,y:i[1]/2,textVerticalAlign:"middle",textAlign:n?o:"center",text:t,textFont:r.getFont(),textFill:r.getTextColor()}})),e.add(a)}},_getViewData:function(){var e=this.visualMapModel,t=M(e.getPieceList(),function(e,t){return{piece:e,indexInModelPieceList:t}}),i=e.get("text"),n=e.get("orient"),o=e.get("inverse");return("horizontal"===n?o:!o)?t.reverse():i&&(i=i.slice().reverse()),{viewPieceList:t,endsText:i}},_createItemSymbol:function(e,t,i){e.add(Of(this.getControllerVisual(t,"symbol"),i[0],i[1],i[2],i[3],this.getControllerVisual(t,"color")))},_onItemClick:function(e){var t=this.visualMapModel,i=t.option,n=N(i.selected),o=t.getSelectedMapKey(e);"single"===i.selectedMode?(n[o]=!0,O(n,function(e,t){n[t]=t===o})):n[o]=!n[o],this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:n})}});Vu(Tk);var tI=Js,iI=nl;function nI(e){lo(e,"label",["show"])}var oI=Xu({type:"marker",dependencies:["series","grid","polar","geo"],init:function(e,t,i,n){if(I&&"marker"===this.type)throw new Error("Marker component is abstract component. Use markLine, markPoint, markArea instead.");this.mergeDefaultAndTheme(e,i),this.mergeOption(e,i,n.createdBySelf,!0)},isAnimationEnabled:function(){if(v.node)return!1;var e=this.__hostSeries;return this.getShallow("animation")&&e&&e.isAnimationEnabled()},mergeOption:function(e,n,t,o){var a=this.constructor,r=this.mainType+"Model";t||n.eachSeries(function(e){var t=e.get(this.mainType,!0),i=e[r];t&&t.data?(i?i.mergeOption(t,n,!0):(o&&nI(t),O(t.data,function(e){e instanceof Array?(nI(e[0]),nI(e[1])):nI(e)}),D(i=new a(t,this,n),{mainType:this.mainType,seriesIndex:e.seriesIndex,name:e.name,createdBySelf:!0}),i.__hostSeries=e),e[r]=i):e[r]=null},this)},formatTooltip:function(e){var t=this.getData(),i=this.getRawValue(e),n=R(i)?M(i,tI).join(", "):tI(i),o=t.getName(e),a=iI(this.name);return(null!=i||o)&&(a+="<br />"),o&&(a+=iI(o),null!=i&&(a+=" : ")),null!=i&&(a+=iI(n)),a},getData:function(){return this._data},setData:function(e){this._data=e}});C(oI,Vd),oI.extend({type:"markPoint",defaultOption:{zlevel:0,z:5,symbol:"pin",symbolSize:50,tooltip:{trigger:"item"},label:{show:!0,position:"inside"},itemStyle:{borderWidth:2},emphasis:{label:{show:!0}}}});var aI=w;function rI(e,t,i,n,o,a){var r=[],s=Dh(t,n)?t.getCalculationInfo("stackResultDimension"):n,l=fI(t,s,e),d=t.indicesOfNearest(s,l)[0];r[o]=t.get(i,d),r[a]=t.get(n,d);var c=Os(t.get(n,d));return 0<=(c=Math.min(c,20))&&(r[a]=+r[a].toFixed(c)),r}var sI=L,lI={min:sI(rI,"min"),max:sI(rI,"max"),average:sI(rI,"average")};function dI(e,t){var i,n=e.getData(),o=e.coordinateSystem;if(t&&(i=t,isNaN(parseFloat(i.x))||isNaN(parseFloat(i.y)))&&!R(t.coord)&&o){var a=o.dimensions,r=cI(t,n,o,e);if((t=N(t)).type&&lI[t.type]&&r.baseAxis&&r.valueAxis){var s=aI(a,r.baseAxis.dim),l=aI(a,r.valueAxis.dim);t.coord=lI[t.type](n,r.baseDataDim,r.valueDataDim,s,l),t.value=t.coord[l]}else{for(var d=[null!=t.xAxis?t.xAxis:t.radiusAxis,null!=t.yAxis?t.yAxis:t.angleAxis],c=0;c<2;c++)lI[d[c]]&&(d[c]=fI(n,n.mapDimension(a[c]),d[c]));t.coord=d}}return t}function cI(e,t,i,n){var o={};return null!=e.valueIndex||null!=e.valueDim?(o.valueDataDim=null!=e.valueIndex?t.getDimension(e.valueIndex):e.valueDim,o.valueAxis=i.getAxis(function(e,t){var i=e.getData(),n=i.dimensions;t=i.getDimension(t);for(var o=0;o<n.length;o++){var a=i.getDimensionInfo(n[o]);if(a.name===t)return a.coordDim}}(n,o.valueDataDim)),o.baseAxis=i.getOtherAxis(o.valueAxis),o.baseDataDim=t.mapDimension(o.baseAxis.dim)):(o.baseAxis=n.getBaseAxis(),o.valueAxis=i.getOtherAxis(o.baseAxis),o.baseDataDim=t.mapDimension(o.baseAxis.dim),o.valueDataDim=t.mapDimension(o.valueAxis.dim)),o}function uI(e,t){return!(e&&e.containData&&t.coord&&(i=t,isNaN(parseFloat(i.x))&&isNaN(parseFloat(i.y))))||e.containData(t.coord);var i}function hI(e,t,i,n){return n<2?e.coord&&e.coord[n]:e.value}function fI(e,t,i){if("average"!==i)return"median"===i?e.getMedian(t):e.getDataExtent(t,!0)["max"===i?1:0];var n=0,o=0;return e.each(t,function(e,t){isNaN(e)||(n+=e,o++)}),n/o}var pI=Ku({type:"marker",init:function(){this.markerGroupMap=ee()},render:function(e,i,n){var t=this.markerGroupMap;t.each(function(e){e.__keep=!1});var o=this.type+"Model";i.eachSeries(function(e){var t=e[o];t&&this.renderSeries(e,t,i,n)},this),t.each(function(e){!e.__keep&&this.group.remove(e.group)},this)},renderSeries:function(){}});function mI(s,l,d){var c=l.coordinateSystem;s.each(function(e){var t,i=s.getItemModel(e),n=Ps(i.get("x"),d.getWidth()),o=Ps(i.get("y"),d.getHeight());if(isNaN(n)||isNaN(o)){if(l.getMarkerPosition)t=l.getMarkerPosition(s.getValues(s.dimensions,e));else if(c){var a=s.get(c.dimensions[0],e),r=s.get(c.dimensions[1],e);t=c.dataToPoint([a,r])}}else t=[n,o];isNaN(n)||(t[0]=n),isNaN(o)||(t[1]=o),s.setItemLayout(e,t)})}pI.extend({type:"markPoint",updateTransform:function(e,t,i){t.eachSeries(function(e){var t=e.markPointModel;t&&(mI(t.getData(),e,i),this.markerGroupMap.get(e.id).updateLayout(t))},this)},renderSeries:function(e,n,t,i){var o=e.coordinateSystem,a=e.id,r=e.getData(),s=this.markerGroupMap,l=s.get(a)||s.set(a,new vp),d=function(e,i,t){var n;n=e?M(e&&e.dimensions,function(e){var t=i.getData().getDimensionInfo(i.getData().mapDimension(e))||{};return E({name:e},t)}):[{name:"value",type:"float"}];var o=new mh(n,t),a=M(t.get("data"),L(dI,i));e&&(a=T(a,L(uI,e)));return o.initData(a,null,e?hI:function(e){return e.value}),o}(o,e,n);n.setData(d),mI(n.getData(),e,i),d.each(function(e){var t=d.getItemModel(e),i=t.getShallow("symbolSize");"function"==typeof i&&(i=i(n.getRawValue(e),n.getDataParams(e))),d.setItemVisual(e,{symbolSize:i,color:t.get("itemStyle.color")||r.getVisual("color"),symbol:t.getShallow("symbol")})}),l.updateData(d),this.group.add(l.group),d.eachItemGraphicEl(function(e){e.traverse(function(e){e.dataModel=n})}),l.__keep=!0,l.group.silent=n.get("silent")||e.get("silent")}}),Vu(function(e){e.markPoint=e.markPoint||{}}),oI.extend({type:"markLine",defaultOption:{zlevel:0,z:5,symbol:["circle","arrow"],symbolSize:[8,16],precision:2,tooltip:{trigger:"item"},label:{show:!0,position:"end"},lineStyle:{type:"dashed"},emphasis:{label:{show:!0},lineStyle:{width:3}},animationEasing:"linear"}});var gI=function(e,t,i,n){var o=e.getData(),a=n.type;if(!R(n)&&("min"===a||"max"===a||"average"===a||"median"===a||null!=n.xAxis||null!=n.yAxis)){var r,s;if(null!=n.yAxis||null!=n.xAxis)r=null!=n.yAxis?"y":"x",t.getAxis(r),s=j(n.yAxis,n.xAxis);else{var l=cI(n,o,t,e);r=l.valueDataDim,l.valueAxis,s=fI(o,r,a)}var d="x"===r?0:1,c=1-d,u=N(n),h={};u.type=null,u.coord=[],h.coord=[],u.coord[c]=-1/0,h.coord[c]=1/0;var f=i.get("precision");0<=f&&"number"==typeof s&&(s=+s.toFixed(Math.min(f,20))),u.coord[d]=h.coord[d]=s,n=[u,h,{type:a,valueIndex:n.valueIndex,value:s}]}return(n=[dI(e,n[0]),dI(e,n[1]),D({},n[2])])[2].type=n[2].type||"",m(n[2],n[0]),m(n[2],n[1]),n};function vI(e){return!isNaN(e)&&!isFinite(e)}function yI(e,t,i,n){var o=1-e,a=n.dimensions[e];return vI(t[o])&&vI(i[o])&&t[e]===i[e]&&n.getAxis(a).containData(t[e])}function bI(e,t){if("cartesian2d"===e.type){var i=t[0].coord,n=t[1].coord;if(i&&n&&(yI(1,i,n,e)||yI(0,i,n,e)))return!0}return uI(e,t[0])&&uI(e,t[1])}function xI(e,t,i,n,o){var a,r=n.coordinateSystem,s=e.getItemModel(t),l=Ps(s.get("x"),o.getWidth()),d=Ps(s.get("y"),o.getHeight());if(isNaN(l)||isNaN(d)){if(n.getMarkerPosition)a=n.getMarkerPosition(e.getValues(e.dimensions,t));else{var c=r.dimensions,u=e.get(c[0],t),h=e.get(c[1],t);a=r.dataToPoint([u,h])}if("cartesian2d"===r.type){var f=r.getAxis("x"),p=r.getAxis("y");c=r.dimensions;vI(e.get(c[0],t))?a[0]=f.toGlobalCoord(f.getExtent()[i?0:1]):vI(e.get(c[1],t))&&(a[1]=p.toGlobalCoord(p.getExtent()[i?0:1]))}isNaN(l)||(a[0]=l),isNaN(d)||(a[1]=d)}else a=[l,d];e.setItemLayout(t,a)}pI.extend({type:"markLine",updateTransform:function(e,t,a){t.eachSeries(function(t){var e=t.markLineModel;if(e){var i=e.getData(),n=e.__from,o=e.__to;n.each(function(e){xI(n,e,!0,t,a),xI(o,e,!1,t,a)}),i.each(function(e){i.setItemLayout(e,[n.getItemLayout(e),o.getItemLayout(e)])}),this.markerGroupMap.get(t.id).updateLayout()}},this)},renderSeries:function(o,i,e,a){var t=o.coordinateSystem,n=o.id,r=o.getData(),s=this.markerGroupMap,l=s.get(n)||s.set(n,new Ky);this.group.add(l.group);var d=function(e,i,t){var n;n=e?M(e&&e.dimensions,function(e){var t=i.getData().getDimensionInfo(i.getData().mapDimension(e))||{};return E({name:e},t)}):[{name:"value",type:"float"}];var o=new mh(n,t),a=new mh(n,t),r=new mh([],t),s=M(t.get("data"),L(gI,i,e,t));e&&(s=T(s,L(bI,e)));var l=e?hI:function(e){return e.value};return o.initData(M(s,function(e){return e[0]}),null,l),a.initData(M(s,function(e){return e[1]}),null,l),r.initData(M(s,function(e){return e[2]})),r.hasItemOption=!0,{from:o,to:a,line:r}}(t,o,i),c=d.from,u=d.to,h=d.line;i.__from=c,i.__to=u,i.setData(h);var f=i.get("symbol"),p=i.get("symbolSize");function m(e,t,i){var n=e.getItemModel(t);xI(e,t,i,o,a),e.setItemVisual(t,{symbolSize:n.get("symbolSize")||p[i?0:1],symbol:n.get("symbol",!0)||f[i?0:1],color:n.get("itemStyle.color")||r.getVisual("color")})}R(f)||(f=[f,f]),"number"==typeof p&&(p=[p,p]),d.from.each(function(e){m(c,e,!0),m(u,e,!1)}),h.each(function(e){var t=h.getItemModel(e).get("lineStyle.color");h.setItemVisual(e,{color:t||c.getItemVisual(e,"color")}),h.setItemLayout(e,[c.getItemLayout(e),u.getItemLayout(e)]),h.setItemVisual(e,{fromSymbolSize:c.getItemVisual(e,"symbolSize"),fromSymbol:c.getItemVisual(e,"symbol"),toSymbolSize:u.getItemVisual(e,"symbolSize"),toSymbol:u.getItemVisual(e,"symbol")})}),l.updateData(h),d.line.eachItemGraphicEl(function(e,t){e.traverse(function(e){e.dataModel=i})}),l.__keep=!0,l.group.silent=i.get("silent")||o.get("silent")}}),Vu(function(e){e.markLine=e.markLine||{}}),oI.extend({type:"markArea",defaultOption:{zlevel:0,z:1,tooltip:{trigger:"item"},animation:!1,label:{show:!0,position:"top"},itemStyle:{borderWidth:0},emphasis:{label:{show:!0,position:"top"}}}});var wI=function(e,t,i,n){var o=dI(e,n[0]),a=dI(e,n[1]),r=j,s=o.coord,l=a.coord;s[0]=r(s[0],-1/0),s[1]=r(s[1],-1/0),l[0]=r(l[0],1/0),l[1]=r(l[1],1/0);var d=g([{},o,a]);return d.coord=[o.coord,a.coord],d.x0=o.x,d.y0=o.y,d.x1=a.x,d.y1=a.y,d};function _I(e){return!isNaN(e)&&!isFinite(e)}function CI(e,t,i,n){var o=1-e;return _I(t[o])&&_I(i[o])}function SI(e,t){var i=t.coord[0],n=t.coord[1];return!("cartesian2d"!==e.type||!i||!n||!CI(1,i,n)&&!CI(0,i,n))||(uI(e,{coord:i,x:t.x0,y:t.y0})||uI(e,{coord:n,x:t.x1,y:t.y1}))}function TI(e,t,i,n,o){var a,r=n.coordinateSystem,s=e.getItemModel(t),l=Ps(s.get(i[0]),o.getWidth()),d=Ps(s.get(i[1]),o.getHeight());if(isNaN(l)||isNaN(d)){if(n.getMarkerPosition)a=n.getMarkerPosition(e.getValues(i,t));else{var c=[f=e.get(i[0],t),p=e.get(i[1],t)];r.clampData&&r.clampData(c,c),a=r.dataToPoint(c,!0)}if("cartesian2d"===r.type){var u=r.getAxis("x"),h=r.getAxis("y"),f=e.get(i[0],t),p=e.get(i[1],t);_I(f)?a[0]=u.toGlobalCoord(u.getExtent()["x0"===i[0]?0:1]):_I(p)&&(a[1]=h.toGlobalCoord(h.getExtent()["y0"===i[1]?0:1]))}isNaN(l)||(a[0]=l),isNaN(d)||(a[1]=d)}else a=[l,d];return a}var kI=[["x0","y0"],["x1","y0"],["x1","y1"],["x0","y1"]];pI.extend({type:"markArea",updateTransform:function(e,t,o){t.eachSeries(function(i){var e=i.markAreaModel;if(e){var n=e.getData();n.each(function(t){var e=M(kI,function(e){return TI(n,t,e,i,o)});n.setItemLayout(t,e),n.getItemGraphicEl(t).setShape("points",e)})}},this)},renderSeries:function(i,r,e,n){var t=i.coordinateSystem,o=i.id,a=i.getData(),s=this.markerGroupMap,l=s.get(o)||s.set(o,{group:new ni});this.group.add(l.group),l.__keep=!0;var d=function(e,n,t){var i,o;o=e?(i=M(e&&e.dimensions,function(e){var t=n.getData(),i=t.getDimensionInfo(t.mapDimension(e))||{};return E({name:e},i)}),new mh(M(["x0","y0","x1","y1"],function(e,t){return{name:e,type:i[t%2].type}}),t)):new mh(i=[{name:"value",type:"float"}],t);var a=M(t.get("data"),L(wI,n,e,t));e&&(a=T(a,L(SI,e)));var r=e?function(e,t,i,n){return e.coord[Math.floor(n/2)][n%2]}:function(e){return e.value};return o.initData(a,null,r),o.hasItemOption=!0,o}(t,i,r);r.setData(d),d.each(function(t){d.setItemLayout(t,M(kI,function(e){return TI(d,t,e,i,n)})),d.setItemVisual(t,{color:a.getVisual("color")})}),d.diff(l.__data).add(function(e){var t=new yr({shape:{points:d.getItemLayout(e)}});d.setItemGraphicEl(e,t),l.group.add(t)}).update(function(e,t){var i=l.__data.getItemGraphicEl(t);hs(i,{shape:{points:d.getItemLayout(e)}},r,e),l.group.add(i),d.setItemGraphicEl(e,i)}).remove(function(e){var t=l.__data.getItemGraphicEl(e);l.group.remove(t)}).execute(),d.eachItemGraphicEl(function(e,t){var i=d.getItemModel(t),n=i.getModel("label"),o=i.getModel("emphasis.label"),a=d.getItemVisual(t,"color");e.useStyle(E(i.getModel("itemStyle").getItemStyle(),{fill:kt(a,.4),stroke:a})),e.hoverStyle=i.getModel("emphasis.itemStyle").getItemStyle(),os(e.style,e.hoverStyle,n,o,{labelFetcher:r,labelDataIndex:t,defaultText:d.getName(t)||"",isRectText:!0,autoColor:a}),ns(e,{}),e.dataModel=r}),l.__data=d,l.group.silent=r.get("silent")||i.get("silent")}}),Vu(function(e){e.markArea=e.markArea||{}});function II(e){var t=e.itemStyle||(e.itemStyle={}),i=t.emphasis||(t.emphasis={}),n=e.label||e.label||{},o=n.normal||(n.normal={}),a={normal:1,emphasis:1};O(n,function(e,t){a[t]||NI(o,t)||(o[t]=e)}),i.label&&!NI(n,"emphasis")&&(n.emphasis=i.label,delete i.label)}function NI(e,t){return e.hasOwnProperty(t)}Nl.registerSubTypeDefaulter("timeline",function(){return"slider"}),Wu({type:"timelineChange",event:"timelineChanged",update:"prepareAndUpdate"},function(e,t){var i=t.getComponent("timeline");return i&&null!=e.currentIndex&&(i.setCurrentIndex(e.currentIndex),!i.get("loop",!0)&&i.isIndexMax()&&i.setPlayState(!1)),t.resetOption("timeline"),E({currentIndex:i.option.currentIndex},e)}),Wu({type:"timelinePlayChange",event:"timelinePlayChanged",update:"update"},function(e,t){var i=t.getComponent("timeline");i&&null!=e.playState&&i.setPlayState(e.playState)});var EI=Nl.extend({type:"timeline",layoutMode:"box",defaultOption:{zlevel:0,z:4,show:!0,axisType:"time",realtime:!0,left:"20%",top:null,right:"20%",bottom:0,width:null,height:40,padding:5,controlPosition:"left",autoPlay:!1,rewind:!1,loop:!0,playInterval:2e3,currentIndex:0,itemStyle:{},label:{color:"#000"},data:[]},init:function(e,t,i){this._data,this._names,this.mergeDefaultAndTheme(e,i),this._initData()},mergeOption:function(e){EI.superApply(this,"mergeOption",arguments),this._initData()},setCurrentIndex:function(e){null==e&&(e=this.option.currentIndex);var t=this._data.count();this.option.loop?e=(e%t+t)%t:(t<=e&&(e=t-1),e<0&&(e=0)),this.option.currentIndex=e},getCurrentIndex:function(){return this.option.currentIndex},isIndexMax:function(){return this.getCurrentIndex()>=this._data.count()-1},setPlayState:function(e){this.option.autoPlay=!!e},getPlayState:function(){return!!this.option.autoPlay},_initData:function(){var e=this.option,t=e.data||[],i=e.axisType,o=this._names=[];if("category"===i){var a=[];O(t,function(e,t){var i,n=uo(e);B(e)?(i=N(e)).value=t:i=t,a.push(i),U(n)||null!=n&&!isNaN(n)||(n=""),o.push(n+"")}),t=a}var n={category:"ordinal",time:"time"}[i]||"number";(this._data=new mh([{name:"value",type:n}],this)).initData(t,o)},getData:function(){return this._data},getCategories:function(){if("category"===this.get("axisType"))return this._names.slice()}});C(EI.extend({type:"timeline.slider",defaultOption:{backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,orient:"horizontal",inverse:!1,tooltip:{trigger:"item"},symbol:"emptyCircle",symbolSize:10,lineStyle:{show:!0,width:2,color:"#304654"},label:{position:"auto",show:!0,interval:"auto",rotate:0,color:"#304654"},itemStyle:{color:"#304654",borderWidth:1},checkpointStyle:{symbol:"circle",symbolSize:13,color:"#c23531",borderWidth:5,borderColor:"rgba(194,53,49, 0.5)",animation:!0,animationDuration:300,animationEasing:"quinticInOut"},controlStyle:{show:!0,showPlayBtn:!0,showPrevBtn:!0,showNextBtn:!0,itemSize:22,itemGap:12,position:"left",playIcon:"path://M31.6,53C17.5,53,6,41.5,6,27.4S17.5,1.8,31.6,1.8C45.7,1.8,57.2,13.3,57.2,27.4S45.7,53,31.6,53z M31.6,3.3 C18.4,3.3,7.5,14.1,7.5,27.4c0,13.3,10.8,24.1,24.1,24.1C44.9,51.5,55.7,40.7,55.7,27.4C55.7,14.1,44.9,3.3,31.6,3.3z M24.9,21.3 c0-2.2,1.6-3.1,3.5-2l10.5,6.1c1.899,1.1,1.899,2.9,0,4l-10.5,6.1c-1.9,1.1-3.5,0.2-3.5-2V21.3z",stopIcon:"path://M30.9,53.2C16.8,53.2,5.3,41.7,5.3,27.6S16.8,2,30.9,2C45,2,56.4,13.5,56.4,27.6S45,53.2,30.9,53.2z M30.9,3.5C17.6,3.5,6.8,14.4,6.8,27.6c0,13.3,10.8,24.1,24.101,24.1C44.2,51.7,55,40.9,55,27.6C54.9,14.4,44.1,3.5,30.9,3.5z M36.9,35.8c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H36c0.5,0,0.9,0.4,0.9,1V35.8z M27.8,35.8 c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H27c0.5,0,0.9,0.4,0.9,1L27.8,35.8L27.8,35.8z",nextIcon:"path://M18.6,50.8l22.5-22.5c0.2-0.2,0.3-0.4,0.3-0.7c0-0.3-0.1-0.5-0.3-0.7L18.7,4.4c-0.1-0.1-0.2-0.3-0.2-0.5 c0-0.4,0.3-0.8,0.8-0.8c0.2,0,0.5,0.1,0.6,0.3l23.5,23.5l0,0c0.2,0.2,0.3,0.4,0.3,0.7c0,0.3-0.1,0.5-0.3,0.7l-0.1,0.1L19.7,52 c-0.1,0.1-0.3,0.2-0.5,0.2c-0.4,0-0.8-0.3-0.8-0.8C18.4,51.2,18.5,51,18.6,50.8z",prevIcon:"path://M43,52.8L20.4,30.3c-0.2-0.2-0.3-0.4-0.3-0.7c0-0.3,0.1-0.5,0.3-0.7L42.9,6.4c0.1-0.1,0.2-0.3,0.2-0.5 c0-0.4-0.3-0.8-0.8-0.8c-0.2,0-0.5,0.1-0.6,0.3L18.3,28.8l0,0c-0.2,0.2-0.3,0.4-0.3,0.7c0,0.3,0.1,0.5,0.3,0.7l0.1,0.1L41.9,54 c0.1,0.1,0.3,0.2,0.5,0.2c0.4,0,0.8-0.3,0.8-0.8C43.2,53.2,43.1,53,43,52.8z",color:"#304654",borderColor:"#304654",borderWidth:1},emphasis:{label:{show:!0,color:"#c23531"},itemStyle:{color:"#c23531"},controlStyle:{color:"#c23531",borderColor:"#c23531",borderWidth:2}},data:[]}}),Vd);var MI=nc.extend({type:"timeline"}),DI=function(e,t,i,n){np.call(this,e,t,i),this.type=n||"value",this.model=null};DI.prototype={constructor:DI,getLabelModel:function(){return this.model.getModel("label")},isHorizontal:function(){return"horizontal"===this.model.get("orient")}},_(DI,np);var AI=A,LI=O,PI=Math.PI;function RI(e,t,i,n,o,a){var r=t.get("color");o?(o.setColor(r),i.add(o),a&&a.onUpdate(o)):((o=Of(e.get("symbol"),-1,-1,2,2,r)).setStyle("strokeNoScale",!0),i.add(o),a&&a.onCreate(o));var s=t.getItemStyle(["color","symbol","symbolSize"]);o.setStyle(s),n=m({rectHover:!0,z2:100},n,!0);var l=e.get("symbolSize");(l=l instanceof Array?l.slice():[+l,+l])[0]/=2,l[1]/=2,n.scale=l;var d=e.get("symbolOffset");if(d){var c=n.position=n.position||[0,0];c[0]+=Ps(d[0],l[0]),c[1]+=Ps(d[1],l[1])}var u=e.get("symbolRotate");return n.rotation=(u||0)*Math.PI/180||0,o.attr(n),o.updateTransform(),o}function UI(e,t,i,n,o){if(!e.dragging){var a=n.getModel("checkpointStyle"),r=i.dataToCoord(n.getData().get(["value"],t));o||!a.get("animation",!0)?e.attr({position:[r,0]}):(e.stopAnimation(!0),e.animateTo({position:[r,0]},a.get("animationDuration",!0),a.get("animationEasing",!0)))}}MI.extend({type:"timeline.slider",init:function(e,t){this.api=t,this._axis,this._viewRect,this._timer,this._currentPointer,this._mainGroup,this._labelGroup},render:function(t,e,i,n){if(this.model=t,this.api=i,this.ecModel=e,this.group.removeAll(),t.get("show",!0)){var o=this._layout(t,i),a=this._createGroup("mainGroup"),r=this._createGroup("labelGroup"),s=this._axis=this._createAxis(o,t);t.formatTooltip=function(e){return nl(s.scale.getLabel(e))},LI(["AxisLine","AxisTick","Control","CurrentPointer"],function(e){this["_render"+e](o,a,s,t)},this),this._renderAxisLabel(o,r,s,t),this._position(o,t)}this._doPlayStop()},remove:function(){this._clearTimer(),this.group.removeAll()},dispose:function(){this._clearTimer()},_layout:function(e,t){var i,n,o=e.get("label.position"),a=e.get("orient"),r=(n=t,xl((i=e).getBoxLayoutParams(),{width:n.getWidth(),height:n.getHeight()},i.get("padding")));null==o||"auto"===o?o="horizontal"===a?r.y+r.height/2<t.getHeight()/2?"-":"+":r.x+r.width/2<t.getWidth()/2?"+":"-":isNaN(o)&&(o={horizontal:{top:"-",bottom:"+"},vertical:{left:"-",right:"+"}}[a][o]);var s,l,d,c,u={horizontal:"center",vertical:0<=o||"+"===o?"left":"right"},h={horizontal:0<=o||"+"===o?"top":"bottom",vertical:"middle"},f={horizontal:0,vertical:PI/2},p="vertical"===a?r.height:r.width,m=e.getModel("controlStyle"),g=m.get("show",!0),v=g?m.get("itemSize"):0,y=g?m.get("itemGap"):0,b=v+y,x=e.get("label.rotate")||0;x=x*PI/180;var w=m.get("position",!0),_=g&&m.get("showPlayBtn",!0),C=g&&m.get("showPrevBtn",!0),S=g&&m.get("showNextBtn",!0),T=0,k=p;return"left"===w||"bottom"===w?(_&&(s=[0,0],T+=b),C&&(l=[T,0],T+=b)):(_&&(s=[k-v,0],k-=b),C&&(l=[0,0],T+=b)),S&&(d=[k-v,0],k-=b),c=[T,k],e.get("inverse")&&c.reverse(),{viewRect:r,mainLength:p,orient:a,rotation:f[a],labelRotation:x,labelPosOpt:o,labelAlign:e.get("label.align")||u[a],labelBaseline:e.get("label.verticalAlign")||e.get("label.baseline")||h[a],playPosition:s,prevBtnPosition:l,nextBtnPosition:d,axisExtent:c,controlSize:v,controlGap:y}},_position:function(e,t){var i=this._mainGroup,n=this._labelGroup,o=e.viewRect;if("vertical"===e.orient){var a=Oe(),r=o.x,s=o.y+o.height;He(a,a,[-r,-s]),Ve(a,a,-PI/2),He(a,a,[r,s]),(o=o.clone()).applyTransform(a)}var l=g(o),d=g(i.getBoundingRect()),c=g(n.getBoundingRect()),u=i.position,h=n.position;h[0]=u[0]=l[0][0];var f,p=e.labelPosOpt;isNaN(p)?(v(u,d,l,1,f="+"===p?0:1),v(h,c,l,1,1-f)):(v(u,d,l,1,f=0<=p?0:1),h[1]=u[1]+p);function m(e){var t=e.position;e.origin=[l[0][0]-t[0],l[1][0]-t[1]]}function g(e){return[[e.x,e.x+e.width],[e.y,e.y+e.height]]}function v(e,t,i,n,o){e[n]+=i[n][o]-t[n][o]}i.attr("position",u),n.attr("position",h),i.rotation=n.rotation=e.rotation,m(i),m(n)},_createAxis:function(e,t){var i=t.getData(),n=t.get("axisType"),o=Tf(t,n);o.getTicks=function(){return i.mapArray(["value"],function(e){return e})};var a=i.getDataExtent("value");o.setExtent(a[0],a[1]),o.niceTicks();var r=new DI("value",o,e.axisExtent,n);return r.model=t,r},_createGroup:function(e){var t=this["_"+e]=new ni;return this.group.add(t),t},_renderAxisLine:function(e,t,i,n){var o=i.getExtent();n.get("lineStyle.show")&&t.add(new wr({shape:{x1:o[0],y1:0,x2:o[1],y2:0},style:D({lineCap:"round"},n.getModel("lineStyle").getLineStyle()),silent:!0,z2:1}))},_renderAxisTick:function(e,s,l,d){var c=d.getData(),t=l.scale.getTicks();LI(t,function(e){var t=l.dataToCoord(e),i=c.getItemModel(e),n=i.getModel("itemStyle"),o=i.getModel("emphasis.itemStyle"),a={position:[t,0],onclick:AI(this._changeTimeline,this,e)},r=RI(i,n,s,a);ns(r,o.getItemStyle()),i.get("tooltip")?(r.dataIndex=e,r.dataModel=d):r.dataIndex=r.dataModel=null},this)},_renderAxisLabel:function(s,l,d,e){if(d.getLabelModel().get("show")){var c=e.getData(),t=d.getViewLabels();LI(t,function(e){var t=e.tickValue,i=c.getItemModel(t),n=i.getModel("label"),o=i.getModel("emphasis.label"),a=d.dataToCoord(e.tickValue),r=new cr({position:[a,0],rotation:s.labelRotation-s.rotation,onclick:AI(this._changeTimeline,this,t),silent:!1});as(r.style,n,{text:e.formattedLabel,textAlign:s.labelAlign,textVerticalAlign:s.labelBaseline}),l.add(r),ns(r,as({},o))},this)}},_renderControl:function(e,l,t,d){var c=e.controlSize,u=e.rotation,h=d.getModel("controlStyle").getItemStyle(),f=d.getModel("emphasis.controlStyle").getItemStyle(),p=[0,-c/2,c,c],i=d.getPlayState(),n=d.get("inverse",!0);function o(e,t,i,n){if(e){var o,a,r,s=(o=t,a=p,r={position:e,origin:[c/2,0],rotation:n?-u:0,rectHover:!0,style:h,onclick:i},Or(d.get(o).replace(/^path:\/\//,""),N(r||{}),new ii(a[0],a[1],a[2],a[3]),"center"));l.add(s),ns(s,f)}}o(e.nextBtnPosition,"controlStyle.nextIcon",AI(this._changeTimeline,this,n?"-":"+")),o(e.prevBtnPosition,"controlStyle.prevIcon",AI(this._changeTimeline,this,n?"+":"-")),o(e.playPosition,"controlStyle."+(i?"stopIcon":"playIcon"),AI(this._handlePlayClick,this,!i),!0)},_renderCurrentPointer:function(e,t,i,n){var o=n.getData(),a=n.getCurrentIndex(),r=o.getItemModel(a).getModel("checkpointStyle"),s=this,l={onCreate:function(e){e.draggable=!0,e.drift=AI(s._handlePointerDrag,s),e.ondragend=AI(s._handlePointerDragend,s),UI(e,a,i,n,!0)},onUpdate:function(e){UI(e,a,i,n)}};this._currentPointer=RI(r,r,this._mainGroup,{},this._currentPointer,l)},_handlePlayClick:function(e){this._clearTimer(),this.api.dispatchAction({type:"timelinePlayChange",playState:e,from:this.uid})},_handlePointerDrag:function(e,t,i){this._clearTimer(),this._pointerChangeTimeline([i.offsetX,i.offsetY])},_handlePointerDragend:function(e){this._pointerChangeTimeline([e.offsetX,e.offsetY],!0)},_pointerChangeTimeline:function(e,t){var i=this._toAxisCoord(e)[0],n=Us(this._axis.getExtent().slice());i>n[1]&&(i=n[1]),i<n[0]&&(i=n[0]),this._currentPointer.position[0]=i,this._currentPointer.dirty();var o=this._findNearestTick(i),a=this.model;(t||o!==a.getCurrentIndex()&&a.get("realtime"))&&this._changeTimeline(o)},_doPlayStop:function(){this._clearTimer(),this.model.getPlayState()&&(this._timer=setTimeout(AI(function(){var e=this.model;this._changeTimeline(e.getCurrentIndex()+(e.get("rewind",!0)?-1:1))},this),this.model.get("playInterval")))},_toAxisCoord:function(e){return ms(e,this._mainGroup.getLocalTransform(),!0)},_findNearestTick:function(o){var a,e=this.model.getData(),r=1/0,s=this._axis;return e.each(["value"],function(e,t){var i=s.dataToCoord(e),n=Math.abs(i-o);n<r&&(r=n,a=t)}),a},_clearTimer:function(){this._timer&&(clearTimeout(this._timer),this._timer=null)},_changeTimeline:function(e){var t=this.model.getCurrentIndex();"+"===e?e=t+1:"-"===e&&(e=t-1),this.api.dispatchAction({type:"timelineChange",currentIndex:e,from:this.uid})}}),Vu(function(e){var t=e&&e.timeline;R(t)||(t=t?[t]:[]),O(t,function(e){e&&function(e){var t=e.type,i={number:"value",time:"time"};if(i[t]&&(e.axisType=i[t],delete e.type),II(e),NI(e,"controlPosition")){var n=e.controlStyle||(e.controlStyle={});NI(n,"position")||(n.position=e.controlPosition),"none"!==n.position||NI(n,"show")||(n.show=!1,delete n.position),delete e.controlPosition}O(e.data||[],function(e){B(e)&&!R(e)&&(!NI(e,"value")&&NI(e,"name")&&(e.value=e.name),II(e))})}(e)})});var OI=Xu({type:"toolbox",layoutMode:{type:"box",ignoreSize:!0},optionUpdated:function(){OI.superApply(this,"optionUpdated",arguments),O(this.option.feature,function(e,t){var i=ET(t);i&&m(e,i.defaultOption)})},defaultOption:{show:!0,z:6,zlevel:0,orient:"horizontal",left:"right",top:"top",backgroundColor:"transparent",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemSize:15,itemGap:8,showTitle:!0,iconStyle:{borderColor:"#666",color:"none"},emphasis:{iconStyle:{borderColor:"#3E98C5"}}}});Ku({type:"toolbox",render:function(c,u,h,s){var f=this.group;if(f.removeAll(),c.get("show")){var e,t,i,n,o,a,r,p=+c.get("itemSize"),l=c.get("feature")||{},d=this._features||(this._features={}),m=[];O(l,function(e,t){m.push(t)}),new ih(this._featureNames||[],m).add(g).update(g).remove(L(g,null)).execute(),this._featureNames=m,e=f,i=h,n=(t=c).getBoxLayoutParams(),o=t.get("padding"),a={width:i.getWidth(),height:i.getHeight()},r=xl(n,a,o),bl(t.get("orient"),e,t.get("itemGap"),r.width,r.height),wl(e,n,a,o),f.add(ZC(f.getBoundingRect(),c)),f.eachChild(function(e){var t=e.__title,i=e.hoverStyle;if(i&&t){var n=Fi(t,Ji(i)),o=e.position[0]+f.position[0],a=!1;e.position[1]+f.position[1]+p+n.height>h.getHeight()&&(i.textPosition="top",a=!0);var r=a?-5-n.height:p+8;o+n.width/2>h.getWidth()?(i.textPosition=["100%",r],i.textAlign="right"):o-n.width/2<0&&(i.textPosition=[0,r],i.textAlign="left")}})}function g(e,t){var i,n=m[e],o=m[t],a=new Is(l[n],c,c.ecModel);if(n&&!o){if(0===n.indexOf("my"))i={model:a,onclick:a.option.onclick,featureName:n};else{var r=ET(n);if(!r)return;i=new r(a,u,h)}d[n]=i}else{if(!(i=d[o]))return;i.model=a,i.ecModel=u,i.api=h}n||!o?a.get("show")&&!i.unusable?(!function(n,o,e){var a=n.getModel("iconStyle"),r=n.getModel("emphasis.iconStyle"),t=o.getIcons?o.getIcons():n.get("icon"),s=n.get("title")||{};if("string"==typeof t){var i=t,l=s;s={},(t={})[e]=i,s[e]=l}var d=n.iconPaths={};O(t,function(e,t){var i=bs(e,{},{x:-p/2,y:-p/2,width:p,height:p});i.setStyle(a.getItemStyle()),i.hoverStyle=r.getItemStyle(),ns(i),c.get("showTitle")&&(i.__title=s[t],i.on("mouseover",function(){var e=r.getItemStyle();i.setStyle({text:s[t],textPosition:e.textPosition||"bottom",textFill:e.fill||e.stroke||"#000",textAlign:e.textAlign||"center"})}).on("mouseout",function(){i.setStyle({textFill:null})})),i.trigger(n.get("iconStatus."+t)||"normal"),f.add(i),i.on("click",A(o.onclick,o,u,h,t)),d[t]=i})}(a,i,n),a.setIconStatus=function(e,t){var i=this.option,n=this.iconPaths;i.iconStatus=i.iconStatus||{},i.iconStatus[e]=t,n[e]&&n[e].trigger(t)},i.render&&i.render(a,u,h,s)):i.remove&&i.remove(u,h):i.dispose&&i.dispose(u,h)}},updateView:function(e,t,i,n){O(this._features,function(e){e.updateView&&e.updateView(e.model,t,i,n)})},remove:function(t,i){O(this._features,function(e){e.remove&&e.remove(t,i)}),this.group.removeAll()},dispose:function(t,i){O(this._features,function(e){e.dispose&&e.dispose(t,i)})}});var BI=_c.toolbox.saveAsImage;function zI(e){this.model=e}zI.defaultOption={show:!0,icon:"M4.7,22.9L29.3,45.5L54.7,23.4M4.6,43.6L4.6,58L53.8,58L53.8,43.6M29.2,45.1L29.2,0",title:BI.title,type:"png",name:"",excludeComponents:["toolbox"],pixelRatio:1,lang:BI.lang.slice()},zI.prototype.unusable=!v.canvasSupported,zI.prototype.onclick=function(e,t){var i=this.model,n=i.get("name")||e.get("title.0.text")||"echarts",o=document.createElement("a"),a=i.get("type",!0)||"png";o.download=n+"."+a,o.target="_blank";var r=t.getConnectedDataURL({type:a,backgroundColor:i.get("backgroundColor",!0)||e.get("backgroundColor")||"#fff",excludeComponents:i.get("excludeComponents"),pixelRatio:i.get("pixelRatio")});if(o.href=r,"function"!=typeof MouseEvent||v.browser.ie||v.browser.edge)if(window.navigator.msSaveOrOpenBlob){for(var s=atob(r.split(",")[1]),l=s.length,d=new Uint8Array(l);l--;)d[l]=s.charCodeAt(l);var c=new Blob([d]);window.navigator.msSaveOrOpenBlob(c,n+"."+a)}else{var u=i.get("lang"),h='<body style="margin:0;"><img src="'+r+'" style="max-width:100%;" title="'+(u&&u[0]||"")+'" /></body>';window.open().document.write(h)}else{var f=new MouseEvent("click",{view:window,bubbles:!0,cancelable:!1});o.dispatchEvent(f)}},NT("saveAsImage",zI);var FI=_c.toolbox.magicType;function HI(e){this.model=e}HI.defaultOption={show:!0,type:[],icon:{line:"M4.1,28.9h7.1l9.3-22l7.4,38l9.7-19.7l3,12.8h14.9M4.1,58h51.4",bar:"M6.7,22.9h10V48h-10V22.9zM24.9,13h10v35h-10V13zM43.2,2h10v46h-10V2zM3.1,58h53.7",stack:"M8.2,38.4l-8.4,4.1l30.6,15.3L60,42.5l-8.1-4.1l-21.5,11L8.2,38.4z M51.9,30l-8.1,4.2l-13.4,6.9l-13.9-6.9L8.2,30l-8.4,4.2l8.4,4.2l22.2,11l21.5-11l8.1-4.2L51.9,30z M51.9,21.7l-8.1,4.2L35.7,30l-5.3,2.8L24.9,30l-8.4-4.1l-8.3-4.2l-8.4,4.2L8.2,30l8.3,4.2l13.9,6.9l13.4-6.9l8.1-4.2l8.1-4.1L51.9,21.7zM30.4,2.2L-0.2,17.5l8.4,4.1l8.3,4.2l8.4,4.2l5.5,2.7l5.3-2.7l8.1-4.2l8.1-4.2l8.1-4.1L30.4,2.2z",tiled:"M2.3,2.2h22.8V25H2.3V2.2z M35,2.2h22.8V25H35V2.2zM2.3,35h22.8v22.8H2.3V35z M35,35h22.8v22.8H35V35z"},title:N(FI.title),option:{},seriesIndex:{}};var VI=HI.prototype;VI.getIcons=function(){var e=this.model,t=e.get("icon"),i={};return O(e.get("type"),function(e){t[e]&&(i[e]=t[e])}),i};var jI={line:function(e,t,i,n){if("bar"===e)return m({id:t,type:"line",data:i.get("data"),stack:i.get("stack"),markPoint:i.get("markPoint"),markLine:i.get("markLine")},n.get("option.line")||{},!0)},bar:function(e,t,i,n){if("line"===e)return m({id:t,type:"bar",data:i.get("data"),stack:i.get("stack"),markPoint:i.get("markPoint"),markLine:i.get("markLine")},n.get("option.bar")||{},!0)},stack:function(e,t,i,n){if("line"===e||"bar"===e)return m({id:t,stack:"__ec_magicType_stack__"},n.get("option.stack")||{},!0)},tiled:function(e,t,i,n){if("line"===e||"bar"===e)return m({id:t,stack:""},n.get("option.tiled")||{},!0)}},WI=[["line","bar"],["stack","tiled"]];VI.onclick=function(d,e,c){var u=this.model,t=u.get("seriesIndex."+c);if(jI[c]){var h={series:[]};O(WI,function(e){0<=w(e,c)&&O(e,function(e){u.setIconStatus(e,"normal")})}),u.setIconStatus(c,"emphasis"),d.eachComponent({mainType:"series",query:null==t?null:{seriesIndex:t}},function(e){var t=e.subType,i=e.id,n=jI[c](t,i,e,u);n&&(E(n,e.option),h.series.push(n));var o=e.coordinateSystem;if(o&&"cartesian2d"===o.type&&("line"===c||"bar"===c)){var a=o.getAxesByScale("ordinal")[0];if(a){var r=a.dim+"Axis",s=d.queryComponents({mainType:r,index:e.get(name+"Index"),id:e.get(name+"Id")})[0].componentIndex;h[r]=h[r]||[];for(var l=0;l<=s;l++)h[r][s]=h[r][s]||{};h[r][s].boundaryGap="bar"===c}}}),e.dispatchAction({type:"changeMagicType",currentType:c,newOption:h})}},Wu({type:"changeMagicType",event:"magicTypeChanged",update:"prepareAndUpdate"},function(e,t){t.mergeOption(e.newOption)}),NT("magicType",HI);var $I=_c.toolbox.dataView,GI=new Array(60).join("-"),YI="\t";function qI(e){var o,a,r,t,i,c,n=(o={},a=[],r=[],e.eachRawSeries(function(e){var t=e.coordinateSystem;if(!t||"cartesian2d"!==t.type&&"polar"!==t.type)a.push(e);else{var i=t.getBaseAxis();if("category"===i.type){var n=i.dim+"_"+i.index;o[n]||(o[n]={categoryAxis:i,valueAxis:t.getOtherAxis(i),series:[]},r.push({axisDim:i.dim,axisIndex:i.index})),o[n].series.push(e)}else a.push(e)}}),{seriesGroupByCategoryAxis:o,other:a,meta:r});return{value:T([(i=n.seriesGroupByCategoryAxis,c=[],O(i,function(e,t){var i=e.categoryAxis,n=e.valueAxis.dim,o=[" "].concat(M(e.series,function(e){return e.name})),a=[i.model.getCategories()];O(e.series,function(e){a.push(e.getRawData().mapArray(n,function(e){return e}))});for(var r=[o.join(YI)],s=0;s<a[0].length;s++){for(var l=[],d=0;d<a.length;d++)l.push(a[d][s]);r.push(l.join(YI))}c.push(r.join("\n"))}),c.join("\n\n"+GI+"\n\n")),(t=n.other,M(t,function(e){var o=e.getRawData(),a=[e.name],r=[];return o.each(o.dimensions,function(){for(var e=arguments.length,t=arguments[e-1],i=o.getName(t),n=0;n<e-1;n++)r[n]=arguments[n];a.push((i?i+YI:"")+r.join(YI))}),a.join("\n")}).join("\n\n"+GI+"\n\n"))],function(e){return e.replace(/[\n\t\s]/g,"")}).join("\n\n"+GI+"\n\n"),meta:n.meta}}function ZI(e){return e.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}var XI=new RegExp("["+YI+"]+","g");function KI(e,a){var t=e.split(new RegExp("\n*"+GI+"\n*","g")),r={series:[]};return O(t,function(e,t){if(function(e){if(0<=e.slice(0,e.indexOf("\n")).indexOf(YI))return!0}(e)){var i=function(e){for(var t=e.split(/\n+/g),i=[],n=M(ZI(t.shift()).split(XI),function(e){return{name:e,data:[]}}),o=0;o<t.length;o++){var a=ZI(t[o]).split(XI);i.push(a.shift());for(var r=0;r<a.length;r++)n[r]&&(n[r].data[o]=a[r])}return{series:n,categories:i}}(e),n=a[t],o=n.axisDim+"Axis";n&&(r[o]=r[o]||[],r[o][n.axisIndex]={data:i.categories},r.series=r.series.concat(i.series))}else{i=function(e){for(var t=e.split(/\n+/g),i=ZI(t.shift()),n=[],o=0;o<t.length;o++){var a,r=ZI(t[o]).split(XI),s="",l=!1;a=isNaN(r[0])?(l=!0,s=r[0],r=r.slice(1),n[o]={name:s,value:[]},n[o].value):n[o]=[];for(var d=0;d<r.length;d++)a.push(+r[d]);1===a.length&&(l?n[o].value=a[0]:n[o]=a[0])}return{name:i,data:n}}(e);r.series.push(i)}}),r}function JI(e){this._dom=null,this.model=e}JI.defaultOption={show:!0,readOnly:!1,optionToContent:null,contentToOption:null,icon:"M17.5,17.3H33 M17.5,17.3H33 M45.4,29.5h-28 M11.5,2v56H51V14.8L38.4,2H11.5z M38.4,2.2v12.7H51 M45.4,41.7h-28",title:N($I.title),lang:N($I.lang),backgroundColor:"#fff",textColor:"#000",textareaColor:"#fff",textareaBorderColor:"#333",buttonColor:"#c23531",buttonTextColor:"#fff"},JI.prototype.onclick=function(e,t){var i=t.getDom(),n=this.model;this._dom&&i.removeChild(this._dom);var o=document.createElement("div");o.style.cssText="position:absolute;left:5px;top:5px;bottom:5px;right:5px;",o.style.backgroundColor=n.get("backgroundColor")||"#fff";var a=document.createElement("h4"),r=n.get("lang")||[];a.innerHTML=r[0]||n.get("title"),a.style.cssText="margin: 10px 20px;",a.style.color=n.get("textColor");var s=document.createElement("div"),l=document.createElement("textarea");s.style.cssText="display:block;width:100%;overflow:auto;";var d=n.get("optionToContent"),c=n.get("contentToOption"),u=qI(e);if("function"==typeof d){var h=d(t.getOption());"string"==typeof h?s.innerHTML=h:H(h)&&s.appendChild(h)}else s.appendChild(l),l.readOnly=n.get("readOnly"),l.style.cssText="width:100%;height:100%;font-family:monospace;font-size:14px;line-height:1.6rem;",l.style.color=n.get("textColor"),l.style.borderColor=n.get("textareaBorderColor"),l.style.backgroundColor=n.get("textareaColor"),l.value=u.value;var f=u.meta,p=document.createElement("div");p.style.cssText="position:absolute;bottom:0;left:0;right:0;";var m="float:right;margin-right:20px;border:none;cursor:pointer;padding:2px 5px;font-size:12px;border-radius:3px",g=document.createElement("div"),v=document.createElement("div");m+=";background-color:"+n.get("buttonColor"),m+=";color:"+n.get("buttonTextColor");var y=this;function b(){i.removeChild(o),y._dom=null}An(g,"click",b),An(v,"click",function(){var e;try{e="function"==typeof c?c(s,t.getOption()):KI(l.value,f)}catch(e){throw b(),new Error("Data view format error "+e)}e&&t.dispatchAction({type:"changeDataView",newOption:e}),b()}),g.innerHTML=r[1],v.innerHTML=r[2],v.style.cssText=m,g.style.cssText=m,!n.get("readOnly")&&p.appendChild(v),p.appendChild(g),An(l,"keydown",function(e){if(9===(e.keyCode||e.which)){var t=this.value,i=this.selectionStart,n=this.selectionEnd;this.value=t.substring(0,i)+YI+t.substring(n),this.selectionStart=this.selectionEnd=i+1,Ln(e)}}),o.appendChild(a),o.appendChild(s),o.appendChild(p),s.style.height=i.clientHeight-80+"px",i.appendChild(o),this._dom=o},JI.prototype.remove=function(e,t){this._dom&&t.getDom().removeChild(this._dom)},JI.prototype.dispose=function(e,t){this.remove(e,t)},NT("dataView",JI),Wu({type:"changeDataView",event:"dataViewChanged",update:"prepareAndUpdate"},function(e,a){var r=[];O(e.newOption.series,function(e){var t,n,i=a.getSeriesByName(e.name)[0];if(i){var o=i.get("data");r.push({name:e.name,data:(t=e.data,n=o,M(t,function(e,t){var i=n&&n[t];return B(i)&&!R(i)?(B(e)&&!R(e)&&(e=e.value),E({value:e},i)):e}))})}else r.push(D({type:"scatter"},e))}),a.mergeOption(E({series:r},e.newOption))});var QI=O,eN="\0_ec_hist_store";function tN(e){var t=e[eN];return t||(t=e[eN]=[{}]),t}JT.extend({type:"dataZoom.select"}),tk.extend({type:"dataZoom.select"});var iN=_c.toolbox.dataZoom,nN=O;function oN(e,t,i){(this._brushController=new ex(i.getZr())).on("brush",A(this._onBrush,this)).mount(),this._isZoomActive}oN.defaultOption={show:!0,icon:{zoom:"M0,13.5h26.9 M13.5,26.9V0 M32.1,13.5H58V58H13.5 V32.1",back:"M22,1.4L9.9,13.5l12.3,12.3 M10.3,13.5H54.9v44.6 H10.3v-26"},title:N(iN.title)};var aN=oN.prototype;aN.render=function(e,t,i,n){var o;this.model=e,this.ecModel=t,this.api=i,function(e,t,i,n,o){var a=i._isZoomActive;n&&"takeGlobalCursor"===n.type&&(a="dataZoomSelect"===n.key&&n.dataZoomSelectActive);i._isZoomActive=a,e.setIconStatus("zoom",a?"emphasis":"normal");var r=new nT(sN(e.option),t,{include:["grid"]});i._brushController.setPanels(r.makePanelOpts(o,function(e){return e.xAxisDeclared&&!e.yAxisDeclared?"lineX":!e.xAxisDeclared&&e.yAxisDeclared?"lineY":"rect"})).enableBrush(!!a&&{brushType:"auto",brushStyle:{lineWidth:0,fill:"rgba(0,0,0,0.2)"}})}(e,t,this,n,i),o=t,e.setIconStatus("back",1<tN(o).length?"emphasis":"normal")},aN.onclick=function(e,t,i){rN[i].call(this)},aN.remove=function(e,t){this._brushController.unmount()},aN.dispose=function(e,t){this._brushController.dispose()};var rN={zoom:function(){var e=!this._isZoomActive;this.api.dispatchAction({type:"takeGlobalCursor",key:"dataZoomSelect",dataZoomSelectActive:e})},back:function(){this._dispatchZoomAction(function(e){var n=tN(e),t=n[n.length-1];1<n.length&&n.pop();var o={};return QI(t,function(e,t){for(var i=n.length-1;0<=i;i--)if(e=n[i][t]){o[t]=e;break}}),o}(this.ecModel))}};function sN(t){var i={};return O(["xAxisIndex","yAxisIndex"],function(e){i[e]=t[e],null==i[e]&&(i[e]="all"),(!1===i[e]||"none"===i[e])&&(i[e]=[])}),i}aN._onBrush=function(e,t){if(t.isEnd&&e.length){var a,i,r,c={},u=this.ecModel;this._brushController.updateCovers([]),new nT(sN(this.model.option),u,{include:["grid"]}).matchOutputRanges(e,u,function(e,t,i){if("cartesian2d"===i.type){var n=e.brushType;"rect"===n?(o("x",i,t[0]),o("y",i,t[1])):o({lineX:"x",lineY:"y"}[n],i,t)}}),i=c,r=tN(a=u),QI(i,function(e,t){for(var i=r.length-1;0<=i&&!r[i][t];i--);if(i<0){var n=a.queryComponents({mainType:"dataZoom",subType:"select",id:t})[0];if(n){var o=n.getPercentRange();r[0][t]={dataZoomId:t,start:o[0],end:o[1]}}}}),r.push(i),this._dispatchZoomAction(c)}function o(e,t,i){var n,o,a,r=t.getAxis(e),s=r.model,l=(n=e,o=s,u.eachComponent({mainType:"dataZoom",subType:"select"},function(e){e.getAxisModel(n,o.componentIndex)&&(a=e)}),a),d=l.findRepresentativeAxisProxy(s).getMinMaxSpan();null==d.minValueSpan&&null==d.maxValueSpan||(i=Nb(0,i.slice(),r.scale.getExtent(),0,d.minValueSpan,d.maxValueSpan)),l&&(c[l.id]={dataZoomId:l.id,startValue:i[0],endValue:i[1]})}},aN._dispatchZoomAction=function(e){var i=[];nN(e,function(e,t){i.push(N(e))}),i.length&&this.api.dispatchAction({type:"dataZoom",from:this.uid,batch:i})},NT("dataZoom",oN),Vu(function(r){if(r){var s=r.dataZoom||(r.dataZoom=[]);R(s)||(r.dataZoom=s=[s]);var e=r.toolbox;if(e&&(R(e)&&(e=e[0]),e&&e.feature)){var t=e.feature.dataZoom;i("xAxis",t),i("yAxis",t)}}function i(n,e){if(e){var o=n+"Index",a=e[o];null==a||"all"==a||R(a)||(a=!1===a||"none"===a?[]:[a]),function(e,t){var i=r[e];R(i)||(i=i?[i]:[]);nN(i,t)}(n,function(e,t){if(null==a||"all"==a||-1!==w(a,t)){var i={type:"select",$fromToolbox:!0,id:"\0_ec_\0toolbox-dataZoom_"+n+t};i[o]=t,s.push(i)}})}}});var lN=_c.toolbox.restore;function dN(e){this.model=e}dN.defaultOption={show:!0,icon:"M3.8,33.4 M47,18.9h9.8V8.7 M56.3,20.1 C52.1,9,40.5,0.6,26.8,2.1C12.6,3.7,1.6,16.2,2.1,30.6 M13,41.1H3.1v10.2 M3.7,39.9c4.2,11.1,15.8,19.5,29.5,18 c14.2-1.6,25.2-14.1,24.7-28.5",title:lN.title},dN.prototype.onclick=function(e,t,i){e[eN]=null,t.dispatchAction({type:"restore",from:this.uid})},NT("restore",dN),Wu({type:"restore",event:"restore",update:"prepareAndUpdate"},function(e,t){t.resetOption("recreate")});var cN,uN="urn:schemas-microsoft-com:vml",hN="undefined"==typeof window?null:window,fN=!1,pN=hN&&hN.document;function mN(e){return cN(e)}if(pN&&!v.canvasSupported)try{!pN.namespaces.zrvml&&pN.namespaces.add("zrvml",uN),cN=function(e){return pN.createElement("<zrvml:"+e+' class="zrvml">')}}catch(e){cN=function(e){return pN.createElement("<"+e+' xmlns="'+uN+'" class="zrvml">')}}var gN,vN=Ia.CMD,yN=Math.round,bN=Math.sqrt,xN=Math.abs,wN=Math.cos,_N=Math.sin,CN=Math.max;if(!v.canvasSupported){var SN="progid:DXImageTransform.Microsoft",TN=21600,kN=10800,IN=function(e){e.style.cssText="position:absolute;left:0;top:0;width:1px;height:1px;",e.coordsize=TN+","+TN,e.coordorigin="0,0"},NN=function(e,t,i){return"rgb("+[e,t,i].join(",")+")"},EN=function(e,t){t&&e&&t.parentNode!==e&&e.appendChild(t)},MN=function(e,t){t&&e&&t.parentNode===e&&e.removeChild(t)},DN=function(e,t,i){return 1e5*(parseFloat(e)||0)+1e3*(parseFloat(t)||0)+i},AN=function(e,t){return"string"==typeof e?0<=e.lastIndexOf("%")?parseFloat(e)/100*t:parseFloat(e):e},LN=function(e,t,i){var n=vt(t);i=+i,isNaN(i)&&(i=1),n&&(e.color=NN(n[0],n[1],n[2]),e.opacity=i*n[3])},PN=function(e,t,i,n){var o,a,r="fill"==t,s=e.getElementsByTagName(t)[0];null!=i[t]&&"none"!==i[t]&&(r||!r&&i.lineWidth)?(e[r?"filled":"stroked"]="true",i[t]instanceof Ir&&MN(e,s),s||(s=mN(t)),r?function(e,t,i){var n,o,a=t.fill;if(null!=a)if(a instanceof Ir){var r,s=0,l=[0,0],d=0,c=1,u=i.getBoundingRect(),h=u.width,f=u.height;if("linear"===a.type){r="gradient";var p=i.transform,m=[a.x*h,a.y*f],g=[a.x2*h,a.y2*f];p&&(Ce(m,m,p),Ce(g,g,p));var v=g[0]-m[0],y=g[1]-m[1];(s=180*Math.atan2(v,y)/Math.PI)<0&&(s+=360),s<1e-6&&(s=0)}else{r="gradientradial",m=[a.x*h,a.y*f],p=i.transform;var b=i.scale,x=h,w=f;l=[(m[0]-u.x)/x,(m[1]-u.y)/w],p&&Ce(m,m,p),x/=b[0]*TN,w/=b[1]*TN;var _=CN(x,w);d=0/_,c=2*a.r/_-d}var C=a.colorStops.slice();C.sort(function(e,t){return e.offset-t.offset});for(var S=C.length,T=[],k=[],I=0;I<S;I++){var N=C[I],E=(n=N.color,o=vt(n),[NN(o[0],o[1],o[2]),o[3]]);k.push(N.offset*c+d+" "+E[0]),0!==I&&I!==S-1||T.push(E)}if(2<=S){var M=T[0][0],D=T[1][0],A=T[0][1]*t.opacity,L=T[1][1]*t.opacity;e.type=r,e.method="none",e.focus="100%",e.angle=s,e.color=M,e.color2=D,e.colors=k.join(","),e.opacity=L,e.opacity2=A}"radial"===r&&(e.focusposition=l.join(","))}else LN(e,a,t.opacity)}(s,i,n):(o=s,null!=(a=i).lineDash&&(o.dashstyle=a.lineDash.join(" ")),null==a.stroke||a.stroke instanceof Ir||LN(o,a.stroke,a.opacity)),EN(e,s)):(e[r?"filled":"stroked"]="false",MN(e,s))},RN=[[],[],[]];qa.prototype.brushVML=function(e){var t=this.style,i=this._vmlEl;i||(i=mN("shape"),IN(i),this._vmlEl=i),PN(i,"fill",t,this),PN(i,"stroke",t,this);var n=this.transform,o=null!=n,a=i.getElementsByTagName("stroke")[0];if(a){var r=t.lineWidth;if(o&&!t.strokeNoScale){var s=n[0]*n[3]-n[1]*n[2];r*=bN(xN(s))}a.weight=r+"px"}var l=this.path||(this.path=new Ia);this.__dirtyPath&&(l.beginPath(),this.buildPath(l,this.shape),l.toStatic(),this.__dirtyPath=!1),i.path=function(e,t){var i,n,o,a,r,s,l=vN.M,d=vN.C,c=vN.L,u=vN.A,h=vN.Q,f=[],p=e.data,m=e.len();for(a=0;a<m;){switch(n="",i=0,o=p[a++]){case l:n=" m ",i=1,r=p[a++],s=p[a++],RN[0][0]=r,RN[0][1]=s;break;case c:n=" l ",i=1,r=p[a++],s=p[a++],RN[0][0]=r,RN[0][1]=s;break;case h:case d:n=" c ",i=3;var g,v,y=p[a++],b=p[a++],x=p[a++],w=p[a++];o===h?(x=((g=x)+2*y)/3,w=((v=w)+2*b)/3,y=(r+2*y)/3,b=(s+2*b)/3):(g=p[a++],v=p[a++]),RN[0][0]=y,RN[0][1]=b,RN[1][0]=x,RN[1][1]=w,r=RN[2][0]=g,s=RN[2][1]=v;break;case u:var _=0,C=0,S=1,T=1,k=0;t&&(_=t[4],C=t[5],S=bN(t[0]*t[0]+t[1]*t[1]),T=bN(t[2]*t[2]+t[3]*t[3]),k=Math.atan2(-t[1]/T,t[0]/S));var I=p[a++],N=p[a++],E=p[a++],M=p[a++],D=p[a++]+k,A=p[a++]+D+k;a++;var L=p[a++],P=I+wN(D)*E,R=N+_N(D)*M,U=(y=I+wN(A)*E,b=N+_N(A)*M,L?" wa ":" at ");Math.abs(P-y)<1e-4&&(.01<Math.abs(A-D)?L&&(P+=.0125):Math.abs(R-N)<1e-4?L&&P<I||!L&&I<P?b-=.0125:b+=.0125:L&&R<N||!L&&N<R?y+=.0125:y-=.0125),f.push(U,yN(((I-E)*S+_)*TN-kN),",",yN(((N-M)*T+C)*TN-kN),",",yN(((I+E)*S+_)*TN-kN),",",yN(((N+M)*T+C)*TN-kN),",",yN((P*S+_)*TN-kN),",",yN((R*T+C)*TN-kN),",",yN((y*S+_)*TN-kN),",",yN((b*T+C)*TN-kN)),r=y,s=b;break;case vN.R:var O=RN[0],B=RN[1];O[0]=p[a++],O[1]=p[a++],B[0]=O[0]+p[a++],B[1]=O[1]+p[a++],t&&(Ce(O,O,t),Ce(B,B,t)),O[0]=yN(O[0]*TN-kN),B[0]=yN(B[0]*TN-kN),O[1]=yN(O[1]*TN-kN),B[1]=yN(B[1]*TN-kN),f.push(" m ",O[0],",",O[1]," l ",B[0],",",O[1]," l ",B[0],",",B[1]," l ",O[0],",",B[1]);break;case vN.Z:f.push(" x ")}if(0<i){f.push(n);for(var z=0;z<i;z++){var F=RN[z];t&&Ce(F,F,t),f.push(yN(F[0]*TN-kN),",",yN(F[1]*TN-kN),z<i-1?",":"")}}}return f.join("")}(l,this.transform),i.style.zIndex=DN(this.zlevel,this.z,this.z2),EN(e,i),null!=t.text?this.drawRectText(e,this.getBoundingRect()):this.removeRectText(e)},qa.prototype.onRemove=function(e){MN(e,this._vmlEl),this.removeRectText(e)},qa.prototype.onAdd=function(e){EN(e,this._vmlEl),this.appendRectText(e)};wn.prototype.brushVML=function(e){var t,i,n,o=this.style,a=o.image;if("object"==typeof(n=a)&&n.tagName&&"IMG"===n.tagName.toUpperCase()){var r=a.src;if(r===this._imageSrc)t=this._imageWidth,i=this._imageHeight;else{var s=a.runtimeStyle,l=s.width,d=s.height;s.width="auto",s.height="auto",t=a.width,i=a.height,s.width=l,s.height=d,this._imageSrc=r,this._imageWidth=t,this._imageHeight=i}a=r}else a===this._imageSrc&&(t=this._imageWidth,i=this._imageHeight);if(a){var c=o.x||0,u=o.y||0,h=o.width,f=o.height,p=o.sWidth,m=o.sHeight,g=o.sx||0,v=o.sy||0,y=p&&m,b=this._vmlEl;b||(b=pN.createElement("div"),IN(b),this._vmlEl=b);var x,w=b.style,_=!1,C=1,S=1;if(this.transform&&(x=this.transform,C=bN(x[0]*x[0]+x[1]*x[1]),S=bN(x[2]*x[2]+x[3]*x[3]),_=x[1]||x[2]),_){var T=[c,u],k=[c+h,u],I=[c,u+f],N=[c+h,u+f];Ce(T,T,x),Ce(k,k,x),Ce(I,I,x),Ce(N,N,x);var E=CN(T[0],k[0],I[0],N[0]),M=CN(T[1],k[1],I[1],N[1]),D=[];D.push("M11=",x[0]/C,",","M12=",x[2]/S,",","M21=",x[1]/C,",","M22=",x[3]/S,",","Dx=",yN(c*C+x[4]),",","Dy=",yN(u*S+x[5])),w.padding="0 "+yN(E)+"px "+yN(M)+"px 0",w.filter=SN+".Matrix("+D.join("")+", SizingMethod=clip)"}else x&&(c=c*C+x[4],u=u*S+x[5]),w.filter="",w.left=yN(c)+"px",w.top=yN(u)+"px";var A=this._imageEl,L=this._cropEl;A||(A=pN.createElement("div"),this._imageEl=A);var P=A.style;if(y){if(t&&i)P.width=yN(C*t*h/p)+"px",P.height=yN(S*i*f/m)+"px";else{var R=new Image,U=this;R.onload=function(){R.onload=null,t=R.width,i=R.height,P.width=yN(C*t*h/p)+"px",P.height=yN(S*i*f/m)+"px",U._imageWidth=t,U._imageHeight=i,U._imageSrc=a},R.src=a}L||((L=pN.createElement("div")).style.overflow="hidden",this._cropEl=L);var O=L.style;O.width=yN((h+g*h/p)*C),O.height=yN((f+v*f/m)*S),O.filter=SN+".Matrix(Dx="+-g*h/p*C+",Dy="+-v*f/m*S+")",L.parentNode||b.appendChild(L),A.parentNode!=L&&L.appendChild(A)}else P.width=yN(C*h)+"px",P.height=yN(S*f)+"px",b.appendChild(A),L&&L.parentNode&&(b.removeChild(L),this._cropEl=null);var B="",z=o.opacity;z<1&&(B+=".Alpha(opacity="+yN(100*z)+") "),B+=SN+".AlphaImageLoader(src="+a+", SizingMethod=scale)",P.filter=B,b.style.zIndex=DN(this.zlevel,this.z,this.z2),EN(e,b),null!=o.text&&this.drawRectText(e,this.getBoundingRect())}},wn.prototype.onRemove=function(e){MN(e,this._vmlEl),this._vmlEl=null,this._cropEl=null,this._imageEl=null,this.removeRectText(e)},wn.prototype.onAdd=function(e){EN(e,this._vmlEl),this.appendRectText(e)};var UN,ON="normal",BN={},zN=0,FN=document.createElement("div");gN=function(e,t){var i=pN;UN||((UN=i.createElement("div")).style.cssText="position:absolute;top:-20000px;left:0;padding:0;margin:0;border:none;white-space:pre;",pN.body.appendChild(UN));try{UN.style.font=t}catch(e){}return UN.innerHTML="",UN.appendChild(i.createTextNode(e)),{width:UN.offsetWidth}},Bi["measureText"]=gN;for(var HN=new ii,VN=function(e,t,i,n){var o=this.style;this.__dirty&&nn(o);var a=o.text;if(null!=a&&(a+=""),a){if(o.rich){var r=Xi(a,o);a=[];for(var s=0;s<r.lines.length;s++){for(var l=r.lines[s].tokens,d=[],c=0;c<l.length;c++)d.push(l[c].text);a.push(d.join(""))}a=a.join("\n")}var u,h,f=o.textAlign,p=o.textVerticalAlign,m=function(e){var t=BN[e];if(!t){100<zN&&(zN=0,BN={});var i,n=FN.style;try{n.font=e,i=n.fontFamily.split(",")[0]}catch(e){}t={style:n.fontStyle||ON,variant:n.fontVariant||ON,weight:n.fontWeight||ON,size:0|parseFloat(n.fontSize||12),family:i||"Microsoft YaHei"},BN[e]=t,zN++}return t}(o.font),g=m.style+" "+m.variant+" "+m.weight+" "+m.size+'px "'+m.family+'"';i=i||Fi(a,g,f,p);var v=this.transform;if(v&&!n&&(HN.copy(t),HN.applyTransform(v),t=HN),n)u=t.x,h=t.y;else{var y=o.textPosition,b=o.textDistance;if(y instanceof Array)u=t.x+AN(y[0],t.width),h=t.y+AN(y[1],t.height),f=f||"left";else{var x=ji(y,t,b);u=x.x,h=x.y,f=f||x.textAlign,p=p||x.textVerticalAlign}}u=Hi(u,i.width,f),h=Vi(h,i.height,p),h+=i.height/2;var w,_,C,S=mN,T=this._textVmlEl;T?_=(w=(C=T.firstChild).nextSibling).nextSibling:(T=S("line"),w=S("path"),_=S("textpath"),C=S("skew"),_.style["v-text-align"]="left",IN(T),w.textpathok=!0,_.on=!0,T.from="0 0",T.to="1000 0.05",EN(T,C),EN(T,w),EN(T,_),this._textVmlEl=T);var k=[u,h],I=T.style;I.top=v&&n?(Ce(k,k,v),C.on=!0,C.matrix=v[0].toFixed(3)+","+v[2].toFixed(3)+","+v[1].toFixed(3)+","+v[3].toFixed(3)+",0,0",C.offset=(yN(k[0])||0)+","+(yN(k[1])||0),C.origin="0 0",I.left="0px"):(C.on=!1,I.left=yN(u)+"px",yN(h)+"px"),_.string=String(a).replace(/&/g,"&amp;").replace(/"/g,"&quot;");try{_.style.font=g}catch(e){}PN(T,"fill",{fill:o.textFill,opacity:o.opacity},this),PN(T,"stroke",{stroke:o.textStroke,opacity:o.opacity,lineDash:o.lineDash},this),T.style.zIndex=DN(this.zlevel,this.z,this.z2),EN(e,T)}},jN=function(e){MN(e,this._textVmlEl),this._textVmlEl=null},WN=function(e){EN(e,this._textVmlEl)},$N=[bn,xn,wn,qa,cr],GN=0;GN<$N.length;GN++){var YN=$N[GN].prototype;YN.drawRectText=VN,YN.removeRectText=jN,YN.appendRectText=WN}cr.prototype.brushVML=function(e){var t=this.style;null!=t.text?this.drawRectText(e,{x:t.x||0,y:t.y||0,width:0,height:0},this.getBoundingRect(),!0):this.removeRectText(e)},cr.prototype.onRemove=function(e){this.removeRectText(e)},cr.prototype.onAdd=function(e){this.appendRectText(e)}}function qN(e){return parseInt(e,10)}function ZN(e,t){!function(){if(!fN&&pN){fN=!0;var e=pN.styleSheets;e.length<31?pN.createStyleSheet().addRule(".zrvml","behavior:url(#default#VML)"):e[0].addRule(".zrvml","behavior:url(#default#VML)")}}(),this.root=e,this.storage=t;var i=document.createElement("div"),n=document.createElement("div");i.style.cssText="display:inline-block;overflow:hidden;position:relative;width:300px;height:150px;",n.style.cssText="position:absolute;left:0;top:0;",e.appendChild(i),this._vmlRoot=n,this._vmlViewport=i,this.resize();var o=t.delFromStorage,a=t.addToStorage;t.delFromStorage=function(e){o.call(t,e),e&&e.onRemove&&e.onRemove(n)},t.addToStorage=function(e){e.onAdd&&e.onAdd(n),a.call(t,e)},this._firstPaint=!0}ZN.prototype={constructor:ZN,getType:function(){return"vml"},getViewportRoot:function(){return this._vmlViewport},getViewportRootOffset:function(){var e=this.getViewportRoot();if(e)return{offsetLeft:e.offsetLeft||0,offsetTop:e.offsetTop||0}},refresh:function(){var e=this.storage.getDisplayList(!0,!0);this._paintList(e)},_paintList:function(e){for(var t=this._vmlRoot,i=0;i<e.length;i++){var n=e[i];n.invisible||n.ignore?(n.__alreadyNotVisible||n.onRemove(t),n.__alreadyNotVisible=!0):(n.__alreadyNotVisible&&n.onAdd(t),n.__alreadyNotVisible=!1,n.__dirty&&(n.beforeBrush&&n.beforeBrush(),(n.brushVML||n.brush).call(n,t),n.afterBrush&&n.afterBrush())),n.__dirty=!1}this._firstPaint&&(this._vmlViewport.appendChild(t),this._firstPaint=!1)},resize:function(e,t){e=null==e?this._getWidth():e,t=null==t?this._getHeight():t;if(this._width!=e||this._height!=t){this._width=e,this._height=t;var i=this._vmlViewport.style;i.width=e+"px",i.height=t+"px"}},dispose:function(){this.root.innerHTML="",this._vmlRoot=this._vmlViewport=this.storage=null},getWidth:function(){return this._width},getHeight:function(){return this._height},clear:function(){this._vmlViewport&&this.root.removeChild(this._vmlViewport)},_getWidth:function(){var e=this.root,t=e.currentStyle;return(e.clientWidth||qN(t.width))-qN(t.paddingLeft)-qN(t.paddingRight)|0},_getHeight:function(){var e=this.root,t=e.currentStyle;return(e.clientHeight||qN(t.height))-qN(t.paddingTop)-qN(t.paddingBottom)|0}},O(["getLayer","insertLayer","eachLayer","eachBuiltinLayer","eachOtherLayer","getLayers","modLayer","delLayer","clearLayer","toDataURL","pathToImage"],function(e){var t;ZN.prototype[e]=(t=e,function(){Gt('In IE8.0 VML mode painter not support method "'+t+'"')})}),eo("vml",ZN);function XN(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}var KN=Ia.CMD,JN=Array.prototype.join,QN="none",eE=Math.round,tE=Math.sin,iE=Math.cos,nE=Math.PI,oE=2*Math.PI,aE=180/nE,rE=1e-4;function sE(e){return eE(1e4*e)/1e4}function lE(e){return e<rE&&-rE<e}function dE(e,t){t&&cE(e,"transform","matrix("+JN.call(t,",")+")")}function cE(e,t,i){(!i||"linear"!==i.type&&"radial"!==i.type)&&("string"==typeof i&&-1<i.indexOf("NaN")&&console.log(i),e.setAttribute(t,i))}function uE(e,t,i){if(o=t,null!=(a=i?o.textFill:o.fill)&&a!==QN){var n=i?t.textFill:t.fill;n="transparent"===n?QN:n,"none"!==e.getAttribute("clip-path")&&n===QN&&(n="rgba(0, 0, 0, 0.002)"),cE(e,"fill",n),cE(e,"fill-opacity",t.opacity)}else cE(e,"fill",QN);var o,a,r,s;if(r=t,null!=(s=i?r.textStroke:r.stroke)&&s!==QN){var l=i?t.textStroke:t.stroke;cE(e,"stroke",l="transparent"===l?QN:l),cE(e,"stroke-width",(i?t.textStrokeWidth:t.lineWidth)/(!i&&t.strokeNoScale?t.host.getLineScale():1)),cE(e,"paint-order",i?"stroke":"fill"),cE(e,"stroke-opacity",t.opacity),t.lineDash?(cE(e,"stroke-dasharray",t.lineDash.join(",")),cE(e,"stroke-dashoffset",eE(t.lineDashOffset||0))):cE(e,"stroke-dasharray",""),t.lineCap&&cE(e,"stroke-linecap",t.lineCap),t.lineJoin&&cE(e,"stroke-linejoin",t.lineJoin),t.miterLimit&&cE(e,"stroke-miterlimit",t.miterLimit)}else cE(e,"stroke",QN)}var hE={};hE.brush=function(e){var t=e.style,i=e.__svgEl;i||(i=XN("path"),e.__svgEl=i),e.path||e.createPathProxy();var n=e.path;if(e.__dirtyPath){n.beginPath(),e.buildPath(n,e.shape),e.__dirtyPath=!1;var o=function(e){for(var t=[],i=e.data,n=e.len(),o=0;o<n;){var a="",r=0;switch(i[o++]){case KN.M:a="M",r=2;break;case KN.L:a="L",r=2;break;case KN.Q:a="Q",r=4;break;case KN.C:a="C",r=6;break;case KN.A:var s=i[o++],l=i[o++],d=i[o++],c=i[o++],u=i[o++],h=i[o++],f=i[o++],p=i[o++],m=Math.abs(h),g=lE(m-oE)&&!lE(m),v=!1;v=oE<=m||!lE(m)&&(-nE<h&&h<0||nE<h)==!!p;var y=sE(s+d*iE(u)),b=sE(l+c*tE(u));g&&(h=p?oE-1e-4:1e-4-oE,v=!0,9===o&&t.push("M",y,b));var x=sE(s+d*iE(u+h)),w=sE(l+c*tE(u+h));t.push("A",sE(d),sE(c),eE(f*aE),+v,+p,x,w);break;case KN.Z:a="Z";break;case KN.R:x=sE(i[o++]),w=sE(i[o++]);var _=sE(i[o++]),C=sE(i[o++]);t.push("M",x,w,"L",x+_,w,"L",x+_,w+C,"L",x,w+C,"L",x,w)}a&&t.push(a);for(var S=0;S<r;S++)t.push(sE(i[o++]))}return t.join(" ")}(n);o.indexOf("NaN")<0&&cE(i,"d",o)}uE(i,t),dE(i,e.transform),null!=t.text&&gE(e,e.getBoundingRect())};var fE={brush:function(e){var t=e.style,i=t.image;i instanceof HTMLImageElement&&(i=i.src);if(i){var n,o,a=t.x||0,r=t.y||0,s=t.width,l=t.height,d=e.__svgEl;d||(d=XN("image"),e.__svgEl=d),i!==e.__imageSrc&&(n="href",o=i,d.setAttributeNS("http://www.w3.org/1999/xlink",n,o),e.__imageSrc=i),cE(d,"width",s),cE(d,"height",l),cE(d,"x",a),cE(d,"y",r),dE(d,e.transform),null!=t.text&&gE(e,e.getBoundingRect())}}},pE={},mE=new ii,gE=function(e,t,i){var n=e.style;e.__dirty&&nn(n);var o=n.text;if(null!=o){o+="";var a,r,s=e.__textSvgEl;s||(s=XN("text"),e.__textSvgEl=s);var l=n.textPosition,d=n.textDistance,c=n.textAlign||"left";"number"==typeof n.fontSize&&(n.fontSize+="px");var u=n.font||[n.fontStyle||"",n.fontWeight||"",n.fontSize||"",n.fontFamily||""].join(" ")||Oi,h=vE(n.textVerticalAlign),f=(i=Fi(o,u,c,h)).lineHeight;if(l instanceof Array)a=t.x+l[0],r=t.y+l[1];else{var p=ji(l,t,d);a=p.x,r=p.y,h=vE(p.textVerticalAlign),c=p.textAlign}cE(s,"alignment-baseline",h),u&&(s.style.font=u);var m=n.textPadding;if(cE(s,"x",a),cE(s,"y",r),uE(s,n,!0),e instanceof cr||e.style.transformText)dE(s,e.transform);else{if(e.transform)mE.copy(t),mE.applyTransform(e.transform),t=mE;else{var g=e.transformCoordToGlobal(t.x,t.y);t.x=g[0],t.y=g[1]}var v=n.textOrigin;"center"===v?(a=i.width/2+a,r=i.height/2+r):v&&(a=v[0]+a,r=v[1]+r);var y=-n.textRotation||0,b=Oe();Ve(b,e.transform,y),dE(s,b)}var x=o.split("\n"),w=x.length,_=c;"left"===_?(_="start",m&&(a+=m[3])):"right"===_?(_="end",m&&(a-=m[1])):"center"===_&&(_="middle",m&&(a+=(m[3]-m[1])/2));var C=0;if("baseline"===h?(C=-i.height+f,m&&(C-=m[2])):"middle"===h?(C=(-i.height+f)/2,m&&(r+=(m[0]-m[2])/2)):m&&(C+=m[0]),e.__text!==o||e.__textFont!==u){var S=e.__tspanList||[];e.__tspanList=S;for(var T=0;T<w;T++){(I=S[T])?I.innerHTML="":(I=S[T]=XN("tspan"),s.appendChild(I),cE(I,"alignment-baseline",h),cE(I,"text-anchor",_)),cE(I,"x",a),cE(I,"y",r+T*f+C),I.appendChild(document.createTextNode(x[T]))}for(;T<S.length;T++)s.removeChild(S[T]);S.length=w,e.__text=o,e.__textFont=u}else if(e.__tspanList.length){var k=e.__tspanList.length;for(T=0;T<k;++T){var I;(I=e.__tspanList[T])&&(cE(I,"x",a),cE(I,"y",r+T*f+C))}}}};function vE(e){return"middle"===e?"middle":"bottom"===e?"baseline":"hanging"}function yE(){}function bE(e,t,i,n){for(var o=0,a=t.length,r=0,s=0;o<a;o++){var l=t[o];if(l.removed){for(d=[],c=s;c<s+l.count;c++)d.push(c);l.indices=d,s+=l.count}else{for(var d=[],c=r;c<r+l.count;c++)d.push(c);l.indices=d,r+=l.count,l.added||(s+=l.count)}}return t}pE.drawRectText=gE,pE.brush=function(e){var t=e.style;null!=t.text&&(t.textPosition=[0,0],gE(e,{x:t.x||0,y:t.y||0,width:0,height:0},e.getBoundingRect()))},yE.prototype={diff:function(l,d,e){e||(e=function(e,t){return e===t}),this.equals=e;var c=this;l=l.slice();var u=(d=d.slice()).length,h=l.length,f=1,t=u+h,p=[{newPos:-1,components:[]}],i=this.extractCommon(p[0],d,l,0);if(p[0].newPos+1>=u&&h<=i+1){for(var n=[],o=0;o<d.length;o++)n.push(o);return[{indices:n,count:d.length}]}function a(){for(var e=-1*f;e<=f;e+=2){var t,i=p[e-1],n=p[e+1],o=(n?n.newPos:0)-e;i&&(p[e-1]=void 0);var a=i&&i.newPos+1<u,r=n&&0<=o&&o<h;if(a||r){if(!a||r&&i.newPos<n.newPos?(t={newPos:(s=n).newPos,components:s.components.slice(0)},c.pushComponent(t.components,void 0,!0)):((t=i).newPos++,c.pushComponent(t.components,!0,void 0)),o=c.extractCommon(t,d,l,e),t.newPos+1>=u&&h<=o+1)return bE(c,t.components,d,l);p[e]=t}else p[e]=void 0}var s;f++}for(;f<=t;){var r=a();if(r)return r}},pushComponent:function(e,t,i){var n=e[e.length-1];n&&n.added===t&&n.removed===i?e[e.length-1]={count:n.count+1,added:t,removed:i}:e.push({count:1,added:t,removed:i})},extractCommon:function(e,t,i,n){for(var o=t.length,a=i.length,r=e.newPos,s=r-n,l=0;r+1<o&&s+1<a&&this.equals(t[r+1],i[s+1]);)r++,s++,l++;return l&&e.components.push({count:l}),e.newPos=r,s},tokenize:function(e){return e.slice()},join:function(e){return e.slice()}};var xE=new yE;function wE(e,t,i,n,o){this._zrId=e,this._svgRoot=t,this._tagNames="string"==typeof i?[i]:i,this._markLabel=n,this._domName=o||"_dom",this.nextId=0}function _E(e,t){wE.call(this,e,t,["linearGradient","radialGradient"],"__gradient_in_use__")}function CE(e,t){wE.call(this,e,t,"clipPath","__clippath_in_use__")}function SE(e,t){wE.call(this,e,t,["filter"],"__filter_in_use__","_shadowDom")}function TE(e){return e&&(e.shadowBlur||e.shadowOffsetX||e.shadowOffsetY||e.textShadowBlur||e.textShadowOffsetX||e.textShadowOffsetY)}function kE(e){return parseInt(e,10)}function IE(e,t){return t&&e&&t.parentNode!==e}function NE(e,t,i){if(IE(e,t)&&i){var n=i.nextSibling;n?e.insertBefore(t,n):e.appendChild(t)}}function EE(e,t){if(IE(e,t)){var i=e.firstChild;i?e.insertBefore(t,i):e.appendChild(t)}}function ME(e,t){t&&e&&t.parentNode===e&&e.removeChild(t)}function DE(e){return e.__textSvgEl}function AE(e){return e.__svgEl}wE.prototype.createElement=XN,wE.prototype.getDefs=function(e){var t=this._svgRoot,n=this._svgRoot.getElementsByTagName("defs");return 0===n.length?e?((n=t.insertBefore(this.createElement("defs"),t.firstChild)).contains||(n.contains=function(e){var t=n.children;if(!t)return!1;for(var i=t.length-1;0<=i;--i)if(t[i]===e)return!0;return!1}),n):null:n[0]},wE.prototype.update=function(e,t){if(e){var i=this.getDefs(!1);if(e[this._domName]&&i.contains(e[this._domName]))"function"==typeof t&&t(e);else{var n=this.add(e);n&&(e[this._domName]=n)}}},wE.prototype.addDom=function(e){this.getDefs(!0).appendChild(e)},wE.prototype.removeDom=function(e){var t=this.getDefs(!1);t&&e[this._domName]&&(t.removeChild(e[this._domName]),e[this._domName]=null)},wE.prototype.getDoms=function(){var i=this.getDefs(!1);if(!i)return[];var n=[];return O(this._tagNames,function(e){var t=i.getElementsByTagName(e);n=n.concat([].slice.call(t))}),n},wE.prototype.markAllUnused=function(){var e=this.getDoms(),t=this;O(e,function(e){e[t._markLabel]="0"})},wE.prototype.markUsed=function(e){e&&(e[this._markLabel]="1")},wE.prototype.removeUnused=function(){var t=this.getDefs(!1);if(t){var e=this.getDoms(),i=this;O(e,function(e){"1"!==e[i._markLabel]&&t.removeChild(e)})}},wE.prototype.getSvgProxy=function(e){return e instanceof qa?hE:e instanceof wn?fE:e instanceof cr?pE:hE},wE.prototype.getTextSvgElement=function(e){return e.__textSvgEl},wE.prototype.getSvgElement=function(e){return e.__svgEl},_(_E,wE),_E.prototype.addWithoutUpdate=function(a,r){if(r&&r.style){var s=this;O(["fill","stroke"],function(e){if(r.style[e]&&("linear"===r.style[e].type||"radial"===r.style[e].type)){var t,i=r.style[e],n=s.getDefs(!0);i._dom?(t=i._dom,n.contains(i._dom)||s.addDom(t)):t=s.add(i),s.markUsed(r);var o=t.getAttribute("id");a.setAttribute(e,"url(#"+o+")")}})}},_E.prototype.add=function(e){var t;if("linear"===e.type)t=this.createElement("linearGradient");else{if("radial"!==e.type)return Gt("Illegal gradient type."),null;t=this.createElement("radialGradient")}return e.id=e.id||this.nextId++,t.setAttribute("id","zr"+this._zrId+"-gradient-"+e.id),this.updateDom(e,t),this.addDom(t),t},_E.prototype.update=function(i){var n=this;wE.prototype.update.call(this,i,function(){var e=i.type,t=i._dom.tagName;"linear"===e&&"linearGradient"===t||"radial"===e&&"radialGradient"===t?n.updateDom(i,i._dom):(n.removeDom(i),n.add(i))})},_E.prototype.updateDom=function(e,t){if("linear"===e.type)t.setAttribute("x1",e.x),t.setAttribute("y1",e.y),t.setAttribute("x2",e.x2),t.setAttribute("y2",e.y2);else{if("radial"!==e.type)return void Gt("Illegal gradient type.");t.setAttribute("cx",e.x),t.setAttribute("cy",e.y),t.setAttribute("r",e.r)}e.global?t.setAttribute("gradientUnits","userSpaceOnUse"):t.setAttribute("gradientUnits","objectBoundingBox"),t.innerHTML="";for(var i=e.colorStops,n=0,o=i.length;n<o;++n){var a=this.createElement("stop");a.setAttribute("offset",100*i[n].offset+"%"),a.setAttribute("stop-color",i[n].color),t.appendChild(a)}e._dom=t},_E.prototype.markUsed=function(e){if(e.style){var t=e.style.fill;t&&t._dom&&wE.prototype.markUsed.call(this,t._dom),(t=e.style.stroke)&&t._dom&&wE.prototype.markUsed.call(this,t._dom)}},_(CE,wE),CE.prototype.update=function(e){var t=this.getSvgElement(e);t&&this.updateDom(t,e.__clipPaths,!1);var i=this.getTextSvgElement(e);i&&this.updateDom(i,e.__clipPaths,!0),this.markUsed(e)},CE.prototype.updateDom=function(e,t,i){if(t&&0<t.length){var n,o,a=this.getDefs(!0),r=t[0],s=i?"_textDom":"_dom";r[s]?(o=r[s].getAttribute("id"),n=r[s],a.contains(n)||a.appendChild(n)):(o="zr"+this._zrId+"-clip-"+this.nextId,++this.nextId,(n=this.createElement("clipPath")).setAttribute("id",o),a.appendChild(n),r[s]=n);var l=this.getSvgProxy(r);if(r.transform&&r.parent.invTransform&&!i){var d=Array.prototype.slice.call(r.transform);Fe(r.transform,r.parent.invTransform,r.transform),l.brush(r),r.transform=d}else l.brush(r);var c=this.getSvgElement(r);n.innerHTML="",n.appendChild(c.cloneNode()),e.setAttribute("clip-path","url(#"+o+")"),1<t.length&&this.updateDom(n,t.slice(1),i)}else e&&e.setAttribute("clip-path","none")},CE.prototype.markUsed=function(e){var t=this;e.__clipPaths&&0<e.__clipPaths.length&&O(e.__clipPaths,function(e){e._dom&&wE.prototype.markUsed.call(t,e._dom),e._textDom&&wE.prototype.markUsed.call(t,e._textDom)})},_(SE,wE),SE.prototype.addWithoutUpdate=function(e,t){if(t&&TE(t.style)){var i,n=t.style;if(n._shadowDom)i=n._shadowDom,this.getDefs(!0).contains(n._shadowDom)||this.addDom(i);else i=this.add(t);this.markUsed(t);var o=i.getAttribute("id");e.style.filter="url(#"+o+")"}},SE.prototype.add=function(e){var t=this.createElement("filter"),i=e.style;return i._shadowDomId=i._shadowDomId||this.nextId++,t.setAttribute("id","zr"+this._zrId+"-shadow-"+i._shadowDomId),this.updateDom(e,t),this.addDom(t),t},SE.prototype.update=function(e,t){var i=t.style;if(TE(i)){var n=this;wE.prototype.update.call(this,t,function(e){n.updateDom(t,e._shadowDom)})}else this.remove(e,i)},SE.prototype.remove=function(e,t){null!=t._shadowDomId&&(this.removeDom(t),e.style.filter="")},SE.prototype.updateDom=function(e,t){var i=t.getElementsByTagName("feDropShadow");i=0===i.length?this.createElement("feDropShadow"):i[0];var n,o,a,r,s=e.style,l=e.scale&&e.scale[0]||1,d=e.scale&&e.scale[1]||1;if(s.shadowBlur||s.shadowOffsetX||s.shadowOffsetY)n=s.shadowOffsetX||0,o=s.shadowOffsetY||0,a=s.shadowBlur,r=s.shadowColor;else{if(!s.textShadowBlur)return void this.removeDom(t,s);n=s.textShadowOffsetX||0,o=s.textShadowOffsetY||0,a=s.textShadowBlur,r=s.textShadowColor}i.setAttribute("dx",n/l),i.setAttribute("dy",o/d),i.setAttribute("flood-color",r);var c=a/2/l+" "+a/2/d;i.setAttribute("stdDeviation",c),t.setAttribute("x","-100%"),t.setAttribute("y","-100%"),t.setAttribute("width",Math.ceil(a/2*200)+"%"),t.setAttribute("height",Math.ceil(a/2*200)+"%"),t.appendChild(i),s._shadowDom=t},SE.prototype.markUsed=function(e){var t=e.style;t&&t._shadowDom&&wE.prototype.markUsed.call(this,t._shadowDom)};var LE=function(e,t,i,n){this.root=e,this.storage=t,this._opts=i=D({},i||{});var o=XN("svg");o.setAttribute("xmlns","http://www.w3.org/2000/svg"),o.setAttribute("version","1.1"),o.setAttribute("baseProfile","full"),o.style.cssText="user-select:none;position:absolute;left:0;top:0;",this.gradientManager=new _E(n,o),this.clipPathManager=new CE(n,o),this.shadowManager=new SE(n,o);var a=document.createElement("div");a.style.cssText="overflow:hidden;position:relative",this._svgRoot=o,this._viewport=a,e.appendChild(a),a.appendChild(o),this.resize(i.width,i.height),this._visibleList=[]};LE.prototype={constructor:LE,getType:function(){return"svg"},getViewportRoot:function(){return this._viewport},getViewportRootOffset:function(){var e=this.getViewportRoot();if(e)return{offsetLeft:e.offsetLeft||0,offsetTop:e.offsetTop||0}},refresh:function(){var e=this.storage.getDisplayList(!0);this._paintList(e)},setBackgroundColor:function(e){this._viewport.style.background=e},_paintList:function(e){this.gradientManager.markAllUnused(),this.clipPathManager.markAllUnused(),this.shadowManager.markAllUnused();var t,i,n=this._svgRoot,o=this._visibleList,a=e.length,r=[];for(t=0;t<a;t++){var s=e[t],l=(i=s)instanceof qa?hE:i instanceof wn?fE:i instanceof cr?pE:hE,d=AE(s)||DE(s);s.invisible||(s.__dirty&&(l&&l.brush(s),this.clipPathManager.update(s),s.style&&(this.gradientManager.update(s.style.fill),this.gradientManager.update(s.style.stroke),this.shadowManager.update(d,s)),s.__dirty=!1),r.push(s))}var c,u,h,f,p=(c=o,u=r,xE.diff(c,u,h));for(t=0;t<p.length;t++){if((v=p[t]).removed)for(var m=0;m<v.count;m++){d=AE(s=o[v.indices[m]]);var g=DE(s);ME(n,d),ME(n,g)}}for(t=0;t<p.length;t++){var v;if((v=p[t]).added)for(m=0;m<v.count;m++){d=AE(s=r[v.indices[m]]),g=DE(s);f?NE(n,d,f):EE(n,d),d?NE(n,g,d):f?NE(n,g,f):EE(n,g),NE(n,g,d),f=g||d||f,this.gradientManager.addWithoutUpdate(d,s),this.shadowManager.addWithoutUpdate(f,s),this.clipPathManager.markUsed(s)}else if(!v.removed)for(m=0;m<v.count;m++){f=d=DE(s=r[v.indices[m]])||AE(s)||f,this.gradientManager.markUsed(s),this.gradientManager.addWithoutUpdate(d,s),this.shadowManager.markUsed(s),this.shadowManager.addWithoutUpdate(d,s),this.clipPathManager.markUsed(s)}}this.gradientManager.removeUnused(),this.clipPathManager.removeUnused(),this.shadowManager.removeUnused(),this._visibleList=r},_getDefs:function(e){var n,t=this._svgRoot;return 0!==(n=this._svgRoot.getElementsByTagName("defs")).length?n[0]:e?((n=t.insertBefore(XN("defs"),t.firstChild)).contains||(n.contains=function(e){var t=n.children;if(!t)return!1;for(var i=t.length-1;0<=i;--i)if(t[i]===e)return!0;return!1}),n):null},resize:function(e,t){var i=this._viewport;i.style.display="none";var n=this._opts;if(null!=e&&(n.width=e),null!=t&&(n.height=t),e=this._getSize(0),t=this._getSize(1),i.style.display="",this._width!==e||this._height!==t){this._width=e,this._height=t;var o=i.style;o.width=e+"px",o.height=t+"px";var a=this._svgRoot;a.setAttribute("width",e),a.setAttribute("height",t)}},getWidth:function(){return this._width},getHeight:function(){return this._height},_getSize:function(e){var t=this._opts,i=["width","height"][e],n=["clientWidth","clientHeight"][e],o=["paddingLeft","paddingTop"][e],a=["paddingRight","paddingBottom"][e];if(null!=t[i]&&"auto"!==t[i])return parseFloat(t[i]);var r=this.root,s=document.defaultView.getComputedStyle(r);return(r[n]||kE(s[i])||kE(r.style[i]))-(kE(s[o])||0)-(kE(s[a])||0)|0},dispose:function(){this.root.innerHTML="",this._svgRoot=this._viewport=this.storage=null},clear:function(){this._viewport&&this.root.removeChild(this._viewport)},pathToDataUrl:function(){return this.refresh(),"data:image/svg+xml;charset=UTF-8,"+this._svgRoot.outerHTML}},O(["getLayer","insertLayer","eachLayer","eachBuiltinLayer","eachOtherLayer","getLayers","modLayer","delLayer","clearLayer","toDataURL","pathToImage"],function(e){var t;LE.prototype[e]=(t=e,function(){Gt('In SVG mode painter not support method "'+t+'"')})}),eo("svg",LE),e.version="4.1.0",e.dependencies=eu,e.PRIORITY=tu,e.init=function(e,t,i){if(I){if("4.0.4".replace(".","")-0<eu.zrender.replace(".","")-0)throw new Error("zrender/src 4.0.4 is too old for ECharts 4.1.0. Current version need ZRender "+eu.zrender+"+");if(!e)throw new Error("Initialize failed: invalid dom.")}var n=Fu(e);if(n)return I&&console.warn("There is a chart instance already initialized on the dom."),n;I&&(!H(e)||"CANVAS"===e.nodeName.toUpperCase()||(e.clientWidth||i&&null!=i.width)&&(e.clientHeight||i&&null!=i.height)||console.warn("Can't get dom width or height"));var o=new su(e,t,i);return o.id="ec_"+Pu++,Au[o.id]=o,wo(e,Uu,o.id),function(n){var o="__connectUpdateStatus";function a(e,t){for(var i=0;i<e.length;i++)e[i][o]=t}Xc(Tu,function(e,t){n._messageCenter.on(t,function(e){if(Lu[n.group]&&0!==n[o]){if(e&&e.escapeConnect)return;var t=n.makeActionFromEvent(e),i=[];Xc(Au,function(e){e!==n&&e.group===n.group&&i.push(e)}),a(i,0),Xc(i,function(e){1!==e[o]&&e.dispatchAction(t)}),a(i,2)}})})}(o),o},e.connect=function(t){if(R(t)){var e=t;t=null,Xc(e,function(e){null!=e.group&&(t=e.group)}),t=t||"g_"+Ru++,Xc(e,function(e){e.group=t})}return Lu[t]=!0,t},e.disConnect=Bu,e.disconnect=zu,e.dispose=function(e){"string"==typeof e?e=Au[e]:e instanceof su||(e=Fu(e)),e instanceof su&&!e.isDisposed()&&e.dispose()},e.getInstanceByDom=Fu,e.getInstanceById=function(e){return Au[e]},e.registerTheme=Hu,e.registerPreprocessor=Vu,e.registerProcessor=ju,e.registerPostUpdate=function(e){Nu.push(e)},e.registerAction=Wu,e.registerCoordinateSystem=$u,e.getCoordinateSystemDimensions=function(e){var t=od.get(e);if(t)return t.getDimensionsInfo?t.getDimensionsInfo():t.dimensions.slice()},e.registerLayout=Gu,e.registerVisual=Yu,e.registerLoading=Zu,e.extendComponentModel=Xu,e.extendComponentView=Ku,e.extendSeriesModel=Ju,e.extendChartView=Qu,e.setCanvasCreator=function(e){p("createCanvas",e)},e.registerMap=function(e,t,i){t.geoJson&&!t.features&&(i=t.specialAreas,t=t.geoJson),"string"==typeof t&&(t="undefined"!=typeof JSON&&JSON.parse?JSON.parse(t):new Function("return ("+t+");")()),Ou[e]={geoJson:t,specialAreas:i}},e.getMap=eh,e.dataTool={},e.zrender=io,e.graphic=xs,e.number=Ks,e.format=pl,e.throttle=yc,e.helper=zf,e.matrix=Ge,e.vector=ke,e.color=Nt,e.parseGeoJSON=$f,e.parseGeoJson=ap,e.util=rp,e.List=mh,e.Model=Is,e.Axis=np,e.env=v}),function(){var e=window.UEDITOR_HOME_URL||t();function t(e,t){return function(e,t){var i=t;/^(\/|\\\\)/.test(t)?i=/^.+?\w(\/|\\\\)/.exec(e)[0]+t.replace(/^(\/|\\\\)/,""):/^[a-z]+:/i.test(t)||(e=e.split("#")[0].split("?")[0].replace(/[^\\\/]+$/,""),i=e+""+t);return function(e){var t=/^[a-z]+:\/\//.exec(e)[0],i=null,n=[];(e=(e=e.replace(t,"").split("?")[0].split("#")[0]).replace(/\\/g,"/").split(/\//))[e.length-1]="";for(;e.length;)".."===(i=e.shift())?n.pop():"."!==i&&n.push(i);return t+n.join("/")}(i)}(e||self.document.URL||self.location.href,t||(i=document.getElementsByTagName("script"))[i.length-1].src);var i}window.UEDITOR_CONFIG={UEDITOR_HOME_URL:e,toolbars:[["source","|","undo","redo","|","bold","italic","underline","fontborder","strikethrough","superscript","subscript","removeformat","formatmatch","autotypeset","blockquote","pasteplain","|","forecolor","backcolor","insertorderedlist","insertunorderedlist","selectall","cleardoc","|","rowspacingtop","rowspacingbottom","lineheight","|","customstyle","paragraph","fontfamily","fontsize","|","directionalityltr","directionalityrtl","indent","|","justifyleft","justifycenter","justifyright","justifyjustify","|","touppercase","tolowercase","|","link","unlink","anchor","|","imagenone","imageleft","imageright","imagecenter","|","attachment","insertimage","pagebreak","background","|","horizontal","date","time","spechars","|","inserttable","deletetable","insertparagraphbeforetable","insertrow","deleterow","insertcol","deletecol","mergecells","mergeright","mergedown","splittocells","splittorows","splittocols","searchreplace"]]},window.UE={getUEBasePath:t}}(),function(){function getListener(e,t,i){var n;return t=t.toLowerCase(),(n=e.__allListeners||i&&(e.__allListeners={}))&&(n[t]||i&&(n[t]=[]))}function getDomNode(e,t,i,n,o,a){var r,s=n&&e[t];for(!s&&(s=e[i]);!s&&(r=(r||e).parentNode);){if("BODY"==r.tagName||a&&!a(r))return null;s=r[i]}return s&&o&&!o(s)?getDomNode(s,t,i,!1,o):s}UEDITOR_CONFIG=window.UEDITOR_CONFIG||{};var baidu=window.baidu||{};window.baidu=baidu,window.UE=baidu.editor={plugins:{},commands:{},instants:{},I18N:{},_customizeUI:{},version:"1.5.0"};var dom=UE.dom={},browser=UE.browser=function(){var e=navigator.userAgent.toLowerCase(),t=window.opera,i={ie:/(msie\s|trident.*rv:)([\w.]+)/i.test(e),opera:!!t&&t.version,webkit:-1<e.indexOf(" applewebkit/"),mac:-1<e.indexOf("macintosh"),quirks:"BackCompat"==document.compatMode};i.gecko="Gecko"==navigator.product&&!i.webkit&&!i.opera&&!i.ie;var n=0;if(i.ie){var o=e.match(/(?:msie\s([\w.]+))/),a=e.match(/(?:trident.*rv:([\w.]+))/);n=o&&a&&o[1]&&a[1]?Math.max(1*o[1],1*a[1]):o&&o[1]?1*o[1]:a&&a[1]?1*a[1]:0,i.ie11Compat=11==document.documentMode,i.ie9Compat=9==document.documentMode,i.ie8=!!document.documentMode,i.ie8Compat=8==document.documentMode,i.ie7Compat=7==n&&!document.documentMode||7==document.documentMode,i.ie6Compat=n<7||i.quirks,i.ie9above=8<n,i.ie9below=n<9,i.ie11above=10<n,i.ie11below=n<11}if(i.gecko){var r=e.match(/rv:([\d\.]+)/);r&&(n=1e4*(r=r[1].split("."))[0]+100*(r[1]||0)+1*(r[2]||0))}return/chrome\/(\d+\.\d)/i.test(e)&&(i.chrome=+RegExp.$1),/(\d+\.\d)?(?:\.\d)?\s+safari\/?(\d+\.\d+)?/i.test(e)&&!/chrome/i.test(e)&&(i.safari=+(RegExp.$1||RegExp.$2)),i.opera&&(n=parseFloat(t.version())),i.webkit&&(n=parseFloat(e.match(/ applewebkit\/(\d+)/)[1])),i.version=n,i.isCompatible=!i.mobile&&(i.ie&&6<=n||i.gecko&&10801<=n||i.opera&&9.5<=n||i.air&&1<=n||i.webkit&&522<=n||!1),i}(),ie=browser.ie,webkit=browser.webkit,gecko=browser.gecko,opera=browser.opera,utils=UE.utils={each:function(e,t,i){if(null!=e)if(e.length===+e.length){for(var n=0,o=e.length;n<o;n++)if(!1===t.call(i,e[n],n,e))return!1}else for(var a in e)if(e.hasOwnProperty(a)&&!1===t.call(i,e[a],a,e))return!1},makeInstance:function(e){var t=new Function;return t.prototype=e,e=new t,t.prototype=null,e},extend:function(e,t,i){if(t)for(var n in t)i&&e.hasOwnProperty(n)||(e[n]=t[n]);return e},extend2:function(e){for(var t=arguments,i=1;i<t.length;i++){var n=t[i];for(var o in n)e.hasOwnProperty(o)||(e[o]=n[o])}return e},inherits:function(e,t){var i=e.prototype,n=utils.makeInstance(t.prototype);return utils.extend(n,i,!0),(e.prototype=n).constructor=e},bind:function(e,t){return function(){return e.apply(t,arguments)}},defer:function(e,t,i){var n;return function(){i&&clearTimeout(n),n=setTimeout(e,t)}},indexOf:function(e,i,n){var o=-1;return n=this.isNumber(n)?n:0,this.each(e,function(e,t){if(n<=t&&e===i)return o=t,!1}),o},removeItem:function(e,t){for(var i=0,n=e.length;i<n;i++)e[i]===t&&(e.splice(i,1),i--)},trim:function(e){return e.replace(/(^[ \t\n\r]+)|([ \t\n\r]+$)/g,"")},listToMap:function(e){if(!e)return{};e=utils.isArray(e)?e:e.split(",");for(var t,i=0,n={};t=e[i++];)n[t.toUpperCase()]=n[t]=1;return n},unhtml:function(e,t){return e?e.replace(t||/[&<">'](?:(amp|lt|ldquo|rdquo|quot|gt|#39|nbsp|#\d+);)?/g,function(e,t){return t?e:{"<":"&lt;","&":"&amp;",'"':"&quot;","“":"&ldquo;","”":"&rdquo;",">":"&gt;","'":"&#39;"}[e]}):""},html:function(e){return e?e.replace(/&((g|l|quo|ldquo|rdquo)t|amp|#39|nbsp);/g,function(e){return{"&lt;":"<","&amp;":"&","&quot;":'"',"&ldquo;":"“","&rdquo;":"”","&gt;":">","&#39;":"'","&nbsp;":" "}[e]}):""},cssStyleToDomStyle:(b4f=document.createElement("div").style,c4f={float:null!=b4f.cssFloat?"cssFloat":null!=b4f.styleFloat?"styleFloat":"float"},function(e){return c4f[e]||(c4f[e]=e.toLowerCase().replace(/-./g,function(e){return e.charAt(1).toUpperCase()}))}),loadFile:function(){function s(e,t){try{for(var i,n=0;i=l[n++];)if(i.doc===e&&i.url==(t.src||t.href))return i}catch(e){return null}}var l=[];return function(t,i,e){var n=s(t,i);if(n)n.ready?e&&e():n.funs.push(e);else if(l.push({doc:t,url:i.src||i.href,funs:[e]}),t.body){if(!i.id||!t.getElementById(i.id)){var o=t.createElement(i.tag);for(var a in delete i.tag,i)o.setAttribute(a,i[a]);o.onload=o.onreadystatechange=function(){if(!this.readyState||/loaded|complete/.test(this.readyState)){if(0<(n=s(t,i)).funs.length){n.ready=1;for(var e;e=n.funs.pop();)e()}o.onload=o.onreadystatechange=null}},o.onerror=function(){throw Error("The load "+(i.href||i.src)+" fails,check the url settings of file ueditor.config.js ")},t.getElementsByTagName("head")[0].appendChild(o)}}else{var r=[];for(var a in i)"tag"!=a&&r.push(a+'="'+i[a]+'"');t.write("<"+i.tag+" "+r.join(" ")+" ></"+i.tag+">")}}}(),isEmptyObject:function(e){if(null==e)return!0;if(this.isArray(e)||this.isString(e))return 0===e.length;for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},fixColor:function(e,t){if(/color/i.test(e)&&/rgba?/.test(t)){var i=t.split(",");if(3<i.length)return"";t="#";for(var n,o=0;n=i[o++];)t+=1==(n=parseInt(n.replace(/[^\d]/gi,""),10).toString(16)).length?"0"+n:n;t=t.toUpperCase()}return t},optCss:function(e){function t(e,t){if(!e)return"";var i=e.top,n=e.bottom,o=e.left,a=e.right,r="";if(i&&o&&n&&a)r+=";"+t+":"+(i==n&&n==o&&o==a?i:i==n&&o==a?i+" "+o:o==a?i+" "+o+" "+n:i+" "+a+" "+n+" "+o)+";";else for(var s in e)r+=";"+t+"-"+s+":"+e[s]+";";return r}var o,a;return e=e.replace(/(padding|margin|border)\-([^:]+):([^;]+);?/gi,function(e,t,i,n){if(1==n.split(" ").length)switch(t){case"padding":return!o&&(o={}),o[i]=n,"";case"margin":return!a&&(a={}),a[i]=n,"";case"border":return"initial"==n?"":e}return e}),(e+=t(o,"padding")+t(a,"margin")).replace(/^[ \n\r\t;]*|[ \n\r\t]*$/,"").replace(/;([ \n\r\t]+)|\1;/g,";").replace(/(&((l|g)t|quot|#39))?;{2,}/g,function(e,t){return t?t+";;":";"})},clone:function(e,t){var i;for(var n in t=t||{},e)e.hasOwnProperty(n)&&("object"==typeof(i=e[n])?(t[n]=utils.isArray(i)?[]:{},utils.clone(e[n],t[n])):t[n]=i);return t},transUnitToPx:function(n){if(!/(pt|cm)/.test(n))return n;var o;switch(n.replace(/([\d.]+)(\w+)/,function(e,t,i){n=t,o=i}),o){case"cm":n=25*parseFloat(n);break;case"pt":n=Math.round(96*parseFloat(n)/72)}return n+(n?"px":"")},domReady:function(){function n(e){e.isReady=!0;for(var t;t=o.pop();t());}var o=[];return function(e,t){var i=(t=t||window).document;e&&o.push(e),"complete"===i.readyState?n(i):(i.isReady&&n(i),browser.ie&&11!=browser.version?(function(){if(!i.isReady){try{i.documentElement.doScroll("left")}catch(e){return setTimeout(arguments.callee,0)}n(i)}}(),t.attachEvent("onload",function(){n(i)})):(i.addEventListener("DOMContentLoaded",function(){i.removeEventListener("DOMContentLoaded",arguments.callee,!1),n(i)},!1),t.addEventListener("load",function(){n(i)},!1)))}}(),cssRule:browser.ie&&11!=browser.version?function(e,t,i){var n,o;if(void 0===t||t&&t.nodeType&&9==t.nodeType){if(void 0!==(o=(n=(i=t&&t.nodeType&&9==t.nodeType?t:i||document).indexList||(i.indexList={}))[e]))return i.styleSheets[o].cssText}else{if(o=(n=(i=i||document).indexList||(i.indexList={}))[e],""===t)return void 0!==o&&(i.styleSheets[o].cssText="",delete n[e],!0);void 0!==o?sheetStyle=i.styleSheets[o]:(sheetStyle=i.createStyleSheet("",o=i.styleSheets.length),n[e]=o),sheetStyle.cssText=t}}:function(e,t,i){var n;return void 0===t||t&&t.nodeType&&9==t.nodeType?(n=(i=t&&t.nodeType&&9==t.nodeType?t:i||document).getElementById(e))?n.innerHTML:void 0:(n=(i=i||document).getElementById(e),""===t?!!n&&(n.parentNode.removeChild(n),!0):void(n?n.innerHTML=t:((n=i.createElement("style")).id=e,n.innerHTML=t,i.getElementsByTagName("head")[0].appendChild(n))))},sort:function(e,t){t=t||function(e,t){return e.localeCompare(t)};for(var i=0,n=e.length;i<n;i++)for(var o=i,a=e.length;o<a;o++)if(0<t(e[i],e[o])){var r=e[i];e[i]=e[o],e[o]=r}return e},serializeParam:function(e){var t=[];for(var i in e)if("method"!=i&&"timeout"!=i&&"async"!=i)if("function"!=(typeof e[i]).toLowerCase()&&"object"!=(typeof e[i]).toLowerCase())t.push(encodeURIComponent(i)+"="+encodeURIComponent(e[i]));else if(utils.isArray(e[i]))for(var n=0;n<e[i].length;n++)t.push(encodeURIComponent(i)+"[]="+encodeURIComponent(e[i][n]));return t.join("&")},formatUrl:function(e){var t=e.replace(/&&/g,"&");return(t=(t=(t=t.replace(/\?&/g,"?")).replace(/&$/g,"")).replace(/&#/g,"#")).replace(/&+/g,"&")},isCrossDomainUrl:function(e){var t=document.createElement("a");return t.href=e,browser.ie&&(t.href=t.href),!(t.protocol==location.protocol&&t.hostname==location.hostname&&(t.port==location.port||"80"==t.port&&""==location.port||""==t.port&&"80"==location.port))},clearEmptyAttrs:function(e){for(var t in e)""===e[t]&&delete e[t];return e},str2json:function(e){return utils.isString(e)?window.JSON?JSON.parse(e):new Function("return "+utils.trim(e||""))():null},json2str:function(){function l(e){return e<10?"0"+e:e}if(window.JSON)return JSON.stringify;var d={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};return function(e){switch(typeof e){case"undefined":return"undefined";case"number":return isFinite(e)?String(e):"null";case"string":return/["\\\x00-\x1f]/.test(s=e)&&(s=s.replace(/["\\\x00-\x1f]/g,function(e){var t=d[e];return t||(t=e.charCodeAt(),"\\u00"+Math.floor(t/16).toString(16)+(t%16).toString(16))})),'"'+s+'"';case"boolean":return String(e);default:if(null===e)return"null";if(utils.isArray(e))return function(e){var t,i,n,o=["["],a=e.length;for(i=0;i<a;i++)switch(n=e[i],typeof n){case"undefined":case"function":case"unknown":break;default:t&&o.push(","),o.push(utils.json2str(n)),t=1}return o.push("]"),o.join("")}(e);if(utils.isDate(e))return'"'+(r=e).getFullYear()+"-"+l(r.getMonth()+1)+"-"+l(r.getDate())+"T"+l(r.getHours())+":"+l(r.getMinutes())+":"+l(r.getSeconds())+'"';var t,i,n=["{"],o=utils.json2str;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a))switch(i=e[a],typeof i){case"undefined":case"unknown":case"function":break;default:t&&n.push(","),t=1,n.push(o(a)+":"+o(i))}return n.push("}"),n.join("")}var r,s}}()},b4f,c4f;utils.each(["String","Function","Array","Number","RegExp","Object","Date"],function(t){UE.utils["is"+t]=function(e){return Object.prototype.toString.apply(e)=="[object "+t+"]"}});var EventBase=UE.EventBase=function(){};EventBase.prototype={addListener:function(e,t){e=utils.trim(e).split(/\s+/);for(var i,n=0;i=e[n++];)getListener(this,i,!0).push(t)},on:function(e,t){return this.addListener(e,t)},off:function(e,t){return this.removeListener(e,t)},trigger:function(){return this.fireEvent.apply(this,arguments)},removeListener:function(e,t){e=utils.trim(e).split(/\s+/);for(var i,n=0;i=e[n++];)utils.removeItem(getListener(this,i)||[],t)},fireEvent:function(){var e=arguments[0];e=utils.trim(e).split(" ");for(var t,i=0;t=e[i++];){var n,o,a,r=getListener(this,t);if(r)for(a=r.length;a--;)if(r[a]){if(!0===(o=r[a].apply(this,arguments)))return o;void 0!==o&&(n=o)}(o=this["on"+t.toLowerCase()])&&(n=o.apply(this,arguments))}return n}};var dtd=dom.dtd=function(){function e(e){for(var t in e)e[t.toUpperCase()]=e[t];return e}var t=utils.extend2,i=e({isindex:1,fieldset:1}),n=e({input:1,button:1,select:1,textarea:1,label:1}),o=t(e({a:1}),n),a=t({iframe:1},o),r=e({hr:1,ul:1,menu:1,div:1,blockquote:1,noscript:1,table:1,center:1,address:1,dir:1,pre:1,h5:1,dl:1,h4:1,noframes:1,h6:1,ol:1,h1:1,h3:1,h2:1}),s=e({ins:1,del:1,script:1,style:1}),l=t(e({mark:1,b:1,acronym:1,bdo:1,var:1,"#":1,abbr:1,code:1,br:1,i:1,cite:1,kbd:1,u:1,strike:1,s:1,tt:1,strong:1,q:1,samp:1,em:1,dfn:1,span:1}),s),d=t(e({sub:1,img:1,embed:1,object:1,sup:1,basefont:1,map:1,applet:1,font:1,big:1,small:1}),l),c=t(e({p:1}),d),u=t(e({iframe:1}),d,n),h=e({img:1,embed:1,noscript:1,br:1,kbd:1,center:1,button:1,basefont:1,h5:1,h4:1,samp:1,h6:1,ol:1,h1:1,h3:1,h2:1,form:1,font:1,"#":1,select:1,menu:1,ins:1,abbr:1,label:1,code:1,table:1,script:1,cite:1,input:1,iframe:1,strong:1,textarea:1,noframes:1,big:1,small:1,span:1,hr:1,sub:1,bdo:1,var:1,div:1,object:1,sup:1,strike:1,dir:1,map:1,dl:1,applet:1,del:1,isindex:1,fieldset:1,ul:1,b:1,acronym:1,a:1,blockquote:1,i:1,u:1,s:1,tt:1,address:1,q:1,pre:1,p:1,em:1,dfn:1}),f=t(e({a:0}),u),p=e({tr:1}),m=e({"#":1}),g=t(e({param:1}),h),v=t(e({form:1}),i,a,r,c),y=e({li:1,ol:1,ul:1}),b=e({style:1,script:1}),x=e({base:1,link:1,meta:1,title:1}),w=t(x,b),_=e({head:1,body:1}),C=e({html:1}),S=e({address:1,blockquote:1,center:1,dir:1,div:1,dl:1,fieldset:1,form:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,hr:1,isindex:1,menu:1,noframes:1,ol:1,p:1,pre:1,table:1,ul:1}),T=e({area:1,base:1,basefont:1,br:1,col:1,command:1,dialog:1,embed:1,hr:1,img:1,input:1,isindex:1,keygen:1,link:1,meta:1,param:1,source:1,track:1,wbr:1});return e({$nonBodyContent:t(C,_,x),$block:S,$inline:f,$inlineWithA:t(e({a:1}),f),$body:t(e({script:1,style:1}),S),$cdata:e({script:1,style:1}),$empty:T,$nonChild:e({iframe:1,textarea:1}),$listItem:e({dd:1,dt:1,li:1}),$list:e({ul:1,ol:1,dl:1}),$isNotEmpty:e({table:1,ul:1,ol:1,dl:1,iframe:1,area:1,base:1,col:1,hr:1,img:1,embed:1,input:1,textarea:1,link:1,meta:1,param:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1}),$removeEmpty:e({a:1,abbr:1,acronym:1,address:1,b:1,bdo:1,big:1,cite:1,code:1,del:1,dfn:1,em:1,font:1,i:1,ins:1,label:1,kbd:1,q:1,s:1,samp:1,small:1,span:1,strike:1,strong:1,sub:1,sup:1,tt:1,u:1,var:1}),$removeEmptyBlock:e({p:1,div:1}),$tableContent:e({caption:1,col:1,colgroup:1,tbody:1,td:1,tfoot:1,th:1,thead:1,tr:1,table:1}),$notTransContent:e({pre:1,script:1,style:1,textarea:1}),html:_,head:w,style:m,script:m,body:v,base:{},link:{},meta:{},title:m,col:{},tr:e({td:1,th:1}),img:{},embed:{},colgroup:e({thead:1,col:1,tbody:1,tr:1,tfoot:1}),noscript:v,td:v,br:{},th:v,center:v,kbd:f,button:t(c,r),basefont:{},h5:f,h4:f,samp:f,h6:f,ol:y,h1:f,h3:f,option:m,h2:f,form:t(i,a,r,c),select:e({optgroup:1,option:1}),font:f,ins:f,menu:y,abbr:f,label:f,table:e({thead:1,col:1,tbody:1,tr:1,colgroup:1,caption:1,tfoot:1}),code:f,tfoot:p,cite:f,li:v,input:{},iframe:v,strong:f,textarea:m,noframes:v,big:f,small:f,span:e({"#":1,br:1,b:1,strong:1,u:1,i:1,em:1,sub:1,sup:1,strike:1,span:1}),hr:f,dt:f,sub:f,optgroup:e({option:1}),param:{},bdo:f,var:f,div:v,object:g,sup:f,dd:v,strike:f,area:{},dir:y,map:t(e({area:1,form:1,p:1}),i,s,r),applet:g,dl:e({dt:1,dd:1}),del:f,isindex:{},fieldset:t(e({legend:1}),h),thead:p,ul:y,acronym:f,b:f,a:t(e({a:1}),u),blockquote:t(e({td:1,tr:1,tbody:1,li:1}),v),caption:f,i:f,u:f,tbody:p,s:f,address:t(a,c),tt:f,legend:f,q:f,pre:t(l,o),p:t(e({a:1}),f),em:f,dfn:f,mark:f})}(),attrFix=ie&&browser.version<9?{tabindex:"tabIndex",readonly:"readOnly",for:"htmlFor",class:"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder"}:{tabindex:"tabIndex",readonly:"readOnly"},styleBlock=utils.listToMap(["-webkit-box","-moz-box","block","list-item","table","table-row-group","table-header-group","table-footer-group","table-row","table-column-group","table-column","table-cell","table-caption"]),domUtils=dom.domUtils={NODE_ELEMENT:1,NODE_DOCUMENT:9,NODE_TEXT:3,NODE_COMMENT:8,NODE_DOCUMENT_FRAGMENT:11,POSITION_IDENTICAL:0,POSITION_DISCONNECTED:1,POSITION_FOLLOWING:2,POSITION_PRECEDING:4,POSITION_IS_CONTAINED:8,POSITION_CONTAINS:16,fillChar:ie&&"6"==browser.version?"\ufeff":"​",keys:{8:1,46:1,16:1,17:1,18:1,37:1,38:1,39:1,40:1,13:1},getPosition:function(e,t){if(e===t)return 0;var i,n=[e],o=[t];for(i=e;i=i.parentNode;){if(i===t)return 10;n.push(i)}for(i=t;i=i.parentNode;){if(i===e)return 20;o.push(i)}if(n.reverse(),o.reverse(),n[0]!==o[0])return 1;for(var a=-1;n[++a]===o[a];);for(e=n[a],t=o[a];e=e.nextSibling;)if(e===t)return 4;return 2},getNodeIndex:function(e,t){for(var i=e,n=0;i=i.previousSibling;)t&&3==i.nodeType?i.nodeType!=i.nextSibling.nodeType&&n++:n++;return n},inDoc:function(e,t){return 10==domUtils.getPosition(e,t)},findParent:function(e,t,i){if(e&&!domUtils.isBody(e))for(e=i?e:e.parentNode;e;){if(!t||t(e)||domUtils.isBody(e))return t&&!t(e)&&domUtils.isBody(e)?null:e;e=e.parentNode}return null},findParentByTagName:function(e,t,i,n){return t=utils.listToMap(utils.isArray(t)?t:[t]),domUtils.findParent(e,function(e){return t[e.tagName]&&!(n&&n(e))},i)},findParents:function(e,t,i,n){for(var o=t&&(i&&i(e)||!i)?[e]:[];e=domUtils.findParent(e,i);)o.push(e);return n?o:o.reverse()},insertAfter:function(e,t){return e.nextSibling?e.parentNode.insertBefore(t,e.nextSibling):e.parentNode.appendChild(t)},remove:function(e,t){var i,n=e.parentNode;if(n){if(t&&e.hasChildNodes())for(;i=e.firstChild;)n.insertBefore(i,e);n.removeChild(e)}return e},getNextDomNode:function(e,t,i,n){return getDomNode(e,"firstChild","nextSibling",t,i,n)},getPreDomNode:function(e,t,i,n){return getDomNode(e,"lastChild","previousSibling",t,i,n)},isBookmarkNode:function(e){return 1==e.nodeType&&e.id&&/^_baidu_bookmark_/i.test(e.id)},getWindow:function(e){var t=e.ownerDocument||e;return t.defaultView||t.parentWindow},getCommonAncestor:function(e,t){if(e===t)return e;for(var i=[e],n=[t],o=e,a=-1;o=o.parentNode;){if(o===t)return o;i.push(o)}for(o=t;o=o.parentNode;){if(o===e)return o;n.push(o)}for(i.reverse(),n.reverse();i[++a]===n[a];);return 0==a?null:i[a-1]},clearEmptySibling:function(e,t,i){function n(e,t){for(var i;e&&!domUtils.isBookmarkNode(e)&&(domUtils.isEmptyInlineElement(e)||!new RegExp("[^\t\n\r"+domUtils.fillChar+"]").test(e.nodeValue));)i=e[t],domUtils.remove(e),e=i}!t&&n(e.nextSibling,"nextSibling"),!i&&n(e.previousSibling,"previousSibling")},split:function(e,t){var i=e.ownerDocument;if(browser.ie&&t==e.nodeValue.length){var n=i.createTextNode("");return domUtils.insertAfter(e,n)}var o=e.splitText(t);if(browser.ie8){var a=i.createTextNode("");domUtils.insertAfter(o,a),domUtils.remove(a)}return o},isWhitespace:function(e){return!new RegExp("[^ \t\n\r"+domUtils.fillChar+"]").test(e.nodeValue)},getXY:function(e){for(var t=0,i=0;e.offsetParent;)i+=e.offsetTop,t+=e.offsetLeft,e=e.offsetParent;return{x:t,y:i}},on:function(e,t,i){var n=utils.isArray(t)?t:utils.trim(t).split(/\s+/),o=n.length;if(o)for(;o--;)if(t=n[o],e.addEventListener)e.addEventListener(t,i,!1);else{i._d||(i._d={els:[]});var a=t+i.toString(),r=utils.indexOf(i._d.els,e);i._d[a]&&-1!=r||(-1==r&&i._d.els.push(e),i._d[a]||(i._d[a]=function(e){return i.call(e.srcElement,e||window.event)}),e.attachEvent("on"+t,i._d[a]))}e=null},un:function(e,t,i){var n=utils.isArray(t)?t:utils.trim(t).split(/\s+/),o=n.length;if(o)for(;o--;)if(t=n[o],e.removeEventListener)e.removeEventListener(t,i,!1);else{var a=t+i.toString();try{e.detachEvent("on"+t,i._d?i._d[a]:i)}catch(e){}if(i._d&&i._d[a]){var r=utils.indexOf(i._d.els,e);-1!=r&&i._d.els.splice(r,1),0==i._d.els.length&&delete i._d[a]}}},isSameElement:function(e,t){if(e.tagName!=t.tagName)return!1;var i=e.attributes,n=t.attributes;if(!ie&&i.length!=n.length)return!1;for(var o,a,r=0,s=0,l=0;o=i[l++];){if("style"==o.nodeName){if(o.specified&&r++,domUtils.isSameStyle(e,t))continue;return!1}if(ie){if(!o.specified)continue;r++,a=n.getNamedItem(o.nodeName)}else a=t.attributes[o.nodeName];if(!a.specified||o.nodeValue!=a.nodeValue)return!1}if(ie){for(l=0;a=n[l++];)a.specified&&s++;if(r!=s)return!1}return!0},isSameStyle:function(e,t){var i=e.style.cssText.replace(/( ?; ?)/g,";").replace(/( ?: ?)/g,":"),n=t.style.cssText.replace(/( ?; ?)/g,";").replace(/( ?: ?)/g,":");if(browser.opera){if(i=e.style,n=t.style,i.length!=n.length)return!1;for(var o in i)if(!/^(\d+|csstext)$/i.test(o)&&i[o]!=n[o])return!1;return!0}if(!i||!n)return i==n;if(i=i.split(";"),n=n.split(";"),i.length!=n.length)return!1;for(var a,r=0;a=i[r++];)if(-1==utils.indexOf(n,a))return!1;return!0},isBlockElm:function(e){return 1==e.nodeType&&(dtd.$block[e.tagName]||styleBlock[domUtils.getComputedStyle(e,"display")])&&!dtd.$nonChild[e.tagName]},isBody:function(e){return e&&1==e.nodeType&&"body"==e.tagName.toLowerCase()},breakParent:function(e,t){var i,n,o,a=e,r=e;do{for(a=a.parentNode,o=n?((i=a.cloneNode(!1)).appendChild(n),n=i,(i=a.cloneNode(!1)).appendChild(o),i):(n=a.cloneNode(!1)).cloneNode(!1);i=r.previousSibling;)n.insertBefore(i,n.firstChild);for(;i=r.nextSibling;)o.appendChild(i);r=a}while(t!==a);return(i=t.parentNode).insertBefore(n,t),i.insertBefore(o,t),i.insertBefore(e,o),domUtils.remove(t),e},isEmptyInlineElement:function(e){if(1!=e.nodeType||!dtd.$removeEmpty[e.tagName])return 0;for(e=e.firstChild;e;){if(domUtils.isBookmarkNode(e))return 0;if(1==e.nodeType&&!domUtils.isEmptyInlineElement(e)||3==e.nodeType&&!domUtils.isWhitespace(e))return 0;e=e.nextSibling}return 1},trimWhiteTextNode:function(i){function e(e){for(var t;(t=i[e])&&3==t.nodeType&&domUtils.isWhitespace(t);)i.removeChild(t)}e("firstChild"),e("lastChild")},mergeChild:function(e,t,i){for(var n,o=domUtils.getElementsByTagName(e,e.tagName.toLowerCase()),a=0;n=o[a++];)if(n.parentNode&&!domUtils.isBookmarkNode(n))if("span"!=n.tagName.toLowerCase())domUtils.isSameElement(e,n)&&domUtils.remove(n,!0);else{if(e===n.parentNode&&(domUtils.trimWhiteTextNode(e),1==e.childNodes.length)){e.style.cssText=n.style.cssText+";"+e.style.cssText,domUtils.remove(n,!0);continue}if(n.style.cssText=e.style.cssText+";"+n.style.cssText,i){var r=i.style;if(r){r=r.split(";");for(var s,l=0;s=r[l++];)n.style[utils.cssStyleToDomStyle(s.split(":")[0])]=s.split(":")[1]}}domUtils.isSameStyle(n,e)&&domUtils.remove(n,!0)}},getElementsByTagName:function(e,t,i){if(i&&utils.isString(i)){var n=i;i=function(e){return domUtils.hasClass(e,n)}}t=utils.trim(t).replace(/[ ]{2,}/g," ").split(" ");for(var o,a=[],r=0;o=t[r++];)for(var s,l=e.getElementsByTagName(o),d=0;s=l[d++];)i&&!i(s)||a.push(s);return a},mergeToParent:function(e){for(var t=e.parentNode;t&&dtd.$removeEmpty[t.tagName];){if(t.tagName==e.tagName||"A"==t.tagName){if(domUtils.trimWhiteTextNode(t),"SPAN"==t.tagName&&!domUtils.isSameStyle(t,e)||"A"==t.tagName&&"SPAN"==e.tagName){if(1<t.childNodes.length||t!==e.parentNode){e.style.cssText=t.style.cssText+";"+e.style.cssText,t=t.parentNode;continue}t.style.cssText+=";"+e.style.cssText,"A"==t.tagName&&(t.style.textDecoration="underline")}if("A"!=t.tagName){t===e.parentNode&&domUtils.remove(e,!0);break}}t=t.parentNode}},mergeSibling:function(e,t,i){function n(e,t,i){var n;if((n=i[e])&&!domUtils.isBookmarkNode(n)&&1==n.nodeType&&domUtils.isSameElement(i,n)){for(;n.firstChild;)"firstChild"==t?i.insertBefore(n.lastChild,i.firstChild):i.appendChild(n.firstChild);domUtils.remove(n)}}!t&&n("previousSibling","firstChild",e),!i&&n("nextSibling","lastChild",e)},unSelectable:ie&&browser.ie9below||browser.opera?function(e){e.onselectstart=function(){return!1},e.onclick=e.onkeyup=e.onkeydown=function(){return!1},e.unselectable="on",e.setAttribute("unselectable","on");for(var t,i=0;t=e.all[i++];)switch(t.tagName.toLowerCase()){case"iframe":case"textarea":case"input":case"select":break;default:t.unselectable="on",e.setAttribute("unselectable","on")}}:function(e){e.style.MozUserSelect=e.style.webkitUserSelect=e.style.msUserSelect=e.style.KhtmlUserSelect="none"},removeAttributes:function(e,t){t=utils.isArray(t)?t:utils.trim(t).replace(/[ ]{2,}/g," ").split(" ");for(var i,n=0;i=t[n++];){switch(i=attrFix[i]||i){case"className":e[i]="";break;case"style":e.style.cssText="";var o=e.getAttributeNode("style");!browser.ie&&o&&e.removeAttributeNode(o)}e.removeAttribute(i)}},createElement:function(e,t,i){return domUtils.setAttributes(e.createElement(t),i)},setAttributes:function(e,t){for(var i in t)if(t.hasOwnProperty(i)){var n=t[i];switch(i){case"class":e.className=n;break;case"style":e.style.cssText=e.style.cssText+";"+n;break;case"innerHTML":e[i]=n;break;case"value":e.value=n;break;default:e.setAttribute(attrFix[i]||i,n)}}return e},getComputedStyle:function(e,t){if(-1<"width height top left".indexOf(t))return e["offset"+t.replace(/^\w/,function(e){return e.toUpperCase()})]+"px";if(3==e.nodeType&&(e=e.parentNode),browser.ie&&browser.version<9&&"font-size"==t&&!e.style.fontSize&&!dtd.$empty[e.tagName]&&!dtd.$nonChild[e.tagName]){var i=e.ownerDocument.createElement("span");i.style.cssText="padding:0;border:0;font-family:simsun;",i.innerHTML=".",e.appendChild(i);var n=i.offsetHeight;return e.removeChild(i),i=null,n+"px"}try{var o=domUtils.getStyle(e,t)||(window.getComputedStyle?domUtils.getWindow(e).getComputedStyle(e,"").getPropertyValue(t):(e.currentStyle||e.style)[utils.cssStyleToDomStyle(t)])}catch(e){return""}return utils.transUnitToPx(utils.fixColor(t,o))},removeClasses:function(e,t){t=utils.isArray(t)?t:utils.trim(t).replace(/[ ]{2,}/g," ").split(" ");for(var i,n=0,o=e.className;i=t[n++];)o=o.replace(new RegExp("\\b"+i+"\\b"),"");(o=utils.trim(o).replace(/[ ]{2,}/g," "))?e.className=o:domUtils.removeAttributes(e,["class"])},addClass:function(e,t){if(e){t=utils.trim(t).replace(/[ ]{2,}/g," ").split(" ");for(var i,n=0,o=e.className;i=t[n++];)new RegExp("\\b"+i+"\\b").test(o)||(o+=" "+i);e.className=utils.trim(o)}},hasClass:function(e,t){if(utils.isRegExp(t))return t.test(e.className);t=utils.trim(t).replace(/[ ]{2,}/g," ").split(" ");for(var i,n=0,o=e.className;i=t[n++];)if(!new RegExp("\\b"+i+"\\b","i").test(o))return!1;return n-1==t.length},preventDefault:function(e){e.preventDefault?e.preventDefault():e.returnValue=!1},removeStyle:function(e,t){browser.ie?("color"==t&&(t="(^|;)"+t),e.style.cssText=e.style.cssText.replace(new RegExp(t+"[^:]*:[^;]+;?","ig"),"")):e.style.removeProperty?e.style.removeProperty(t):e.style.removeAttribute(utils.cssStyleToDomStyle(t)),e.style.cssText||domUtils.removeAttributes(e,["style"])},getStyle:function(e,t){var i=e.style[utils.cssStyleToDomStyle(t)];return utils.fixColor(t,i)},setStyle:function(e,t,i){e.style[utils.cssStyleToDomStyle(t)]=i,utils.trim(e.style.cssText)||this.removeAttributes(e,"style")},setStyles:function(e,t){for(var i in t)t.hasOwnProperty(i)&&domUtils.setStyle(e,i,t[i])},removeDirtyAttr:function(e){for(var t,i=0,n=e.getElementsByTagName("*");t=n[i++];)t.removeAttribute("_moz_dirty");e.removeAttribute("_moz_dirty")},getChildCount:function(e,t){var i=0,n=e.firstChild;for(t=t||function(){return 1};n;)t(n)&&i++,n=n.nextSibling;return i},isEmptyNode:function(e){return!e.firstChild||0==domUtils.getChildCount(e,function(e){return!domUtils.isBr(e)&&!domUtils.isBookmarkNode(e)&&!domUtils.isWhitespace(e)})},clearSelectedArr:function(e){for(var t;t=e.pop();)domUtils.removeAttributes(t,["class"])},scrollToView:function(e,t,i){var n,o,a=(n=t.document,o="CSS1Compat"==n.compatMode,{width:(o?n.documentElement.clientWidth:n.body.clientWidth)||0,height:(o?n.documentElement.clientHeight:n.body.clientHeight)||0}).height,r=-1*a+i;r+=e.offsetHeight||0,r+=domUtils.getXY(e).y;var s=function(e){if("pageXOffset"in e)return{x:e.pageXOffset||0,y:e.pageYOffset||0};var t=e.document;return{x:t.documentElement.scrollLeft||t.body.scrollLeft||0,y:t.documentElement.scrollTop||t.body.scrollTop||0}}(t).y;(s<r||r<s-a)&&t.scrollTo(0,r+(r<0?-20:20))},isBr:function(e){return 1==e.nodeType&&"BR"==e.tagName},isFillChar:function(e,t){if(3!=e.nodeType)return!1;var i=e.nodeValue;return t?new RegExp("^"+domUtils.fillChar).test(i):!i.replace(new RegExp(domUtils.fillChar,"g"),"").length},isStartInblock:function(e){var t,i=e.cloneRange(),n=0,o=i.startContainer;if(1==o.nodeType&&o.childNodes[i.startOffset])for(var a=(o=o.childNodes[i.startOffset]).previousSibling;a&&domUtils.isFillChar(a);)a=(o=a).previousSibling;for(this.isFillChar(o,!0)&&1==i.startOffset&&(i.setStartBefore(o),o=i.startContainer);o&&domUtils.isFillChar(o);)o=(t=o).previousSibling;for(t&&(i.setStartBefore(t),o=i.startContainer),1==o.nodeType&&domUtils.isEmptyNode(o)&&1==i.startOffset&&i.setStart(o,0).collapse(!0);!i.startOffset;){if(o=i.startContainer,domUtils.isBlockElm(o)||domUtils.isBody(o)){n=1;break}var r;if(a=i.startContainer.previousSibling){for(;a&&domUtils.isFillChar(a);)a=(r=a).previousSibling;r?i.setStartBefore(r):i.setStartBefore(i.startContainer)}else i.setStartBefore(i.startContainer)}return n&&!domUtils.isBody(i.startContainer)?1:0},isEmptyBlock:function(e,t){if(1!=e.nodeType)return 0;if(t=t||new RegExp("[  \t\r\n"+domUtils.fillChar+"]","g"),0<e[browser.ie?"innerText":"textContent"].replace(t,"").length)return 0;for(var i in dtd.$isNotEmpty)if(e.getElementsByTagName(i).length)return 0;return 1},setViewportOffset:function(e,t){var i=0|parseInt(e.style.left),n=0|parseInt(e.style.top),o=e.getBoundingClientRect(),a=t.left-o.left,r=t.top-o.top;a&&(e.style.left=i+a+"px"),r&&(e.style.top=n+r+"px")},fillNode:function(e,t){var i=browser.ie?e.createTextNode(domUtils.fillChar):e.createElement("br");t.innerHTML="",t.appendChild(i)},moveChild:function(e,t,i){for(;e.firstChild;)i&&t.firstChild?t.insertBefore(e.lastChild,t.firstChild):t.appendChild(e.firstChild)},hasNoAttributes:function(e){return browser.ie?/^<\w+\s*?>/.test(e.outerHTML):0==e.attributes.length},isCustomeNode:function(e){return 1==e.nodeType&&e.getAttribute("_ue_custom_node_")},isTagNode:function(e,t){return 1==e.nodeType&&new RegExp("\\b"+e.tagName+"\\b","i").test(t)},filterNodeList:function(e,t,i){var n=[];if(!utils.isFunction(t)){var o=t;t=function(e){return-1!=utils.indexOf(utils.isArray(o)?o:o.split(" "),e.tagName.toLowerCase())}}return utils.each(e,function(e){t(e)&&n.push(e)}),0==n.length?null:1!=n.length&&i?n:n[0]},isInNodeEndBoundary:function(e,t){var i=e.startContainer;if(3==i.nodeType&&e.startOffset!=i.nodeValue.length)return 0;if(1==i.nodeType&&e.startOffset!=i.childNodes.length)return 0;for(;i!==t;){if(i.nextSibling)return 0;i=i.parentNode}return 1},isBoundaryNode:function(e,t){for(;!domUtils.isBody(e);)if(e!==(e=e.parentNode)[t])return!1;return!0},fillHtml:browser.ie11below?"&nbsp;":"<br/>"},fillCharReg=new RegExp(domUtils.fillChar,"g");!function(){function o(e){return!e.collapsed&&1==e.startContainer.nodeType&&e.startContainer===e.endContainer&&e.endOffset-e.startOffset==1}function i(e,t,i,n){return 1==t.nodeType&&(dtd.$empty[t.tagName]||dtd.$nonChild[t.tagName])&&(i=domUtils.getNodeIndex(t)+(e?0:1),t=t.parentNode),e?(n.startContainer=t,n.startOffset=i,n.endContainer||n.collapse(!0)):(n.endContainer=t,n.endOffset=i,n.startContainer||n.collapse(!1)),(o=n).collapsed=o.startContainer&&o.endContainer&&o.startContainer===o.endContainer&&o.startOffset==o.endOffset,n;var o}function t(e,t){var i,n,o=e.startContainer,a=e.endContainer,r=e.startOffset,s=e.endOffset,l=e.document,d=l.createDocumentFragment();if(1==o.nodeType&&(o=o.childNodes[r]||(i=o.appendChild(l.createTextNode("")))),1==a.nodeType&&(a=a.childNodes[s]||(n=a.appendChild(l.createTextNode("")))),o===a&&3==o.nodeType)return d.appendChild(l.createTextNode(o.substringData(r,s-r))),t&&(o.deleteData(r,s-r),e.collapse(!0)),d;for(var c,u,h=d,f=domUtils.findParents(o,!0),p=domUtils.findParents(a,!0),m=0;f[m]==p[m];)m++;for(var g,v=m;g=f[v];v++){for(c=g.nextSibling,g==o?i||(3==e.startContainer.nodeType?(h.appendChild(l.createTextNode(o.nodeValue.slice(r))),t&&o.deleteData(r,o.nodeValue.length-r)):h.appendChild(t?o:o.cloneNode(!0))):(u=g.cloneNode(!1),h.appendChild(u));c&&c!==a&&c!==p[v];)g=c.nextSibling,h.appendChild(t?c:c.cloneNode(!0)),c=g;h=u}h=d,f[m]||(h.appendChild(f[m-1].cloneNode(!1)),h=h.firstChild);var y;for(v=m;y=p[v];v++){if(c=y.previousSibling,y==a?n||3!=e.endContainer.nodeType||(h.appendChild(l.createTextNode(a.substringData(0,s))),t&&a.deleteData(0,s)):(u=y.cloneNode(!1),h.appendChild(u)),v!=m||!f[m])for(;c&&c!==o;)y=c.previousSibling,h.insertBefore(t?c:c.cloneNode(!0),h.firstChild),c=y;h=u}return t&&e.setStartBefore(p[m]?f[m]?p[m]:f[m-1]:p[m-1]).collapse(!0),i&&domUtils.remove(i),n&&domUtils.remove(n),d}function c(e,t){try{if(h&&domUtils.inDoc(h,e))if(h.nodeValue.replace(fillCharReg,"").length)h.nodeValue=h.nodeValue.replace(fillCharReg,"");else{var i=h.parentNode;for(domUtils.remove(h);i&&domUtils.isEmptyInlineElement(i)&&(browser.safari?!(domUtils.getPosition(i,t)&domUtils.POSITION_CONTAINS):!i.contains(t));)h=i.parentNode,domUtils.remove(i),i=h}}catch(e){}}function u(e,t){var i;for(e=e[t];e&&domUtils.isFillChar(e);)i=e[t],domUtils.remove(e),e=i}var h,a=0,f=domUtils.fillChar,e=dom.Range=function(e){this.startContainer=this.startOffset=this.endContainer=this.endOffset=null,this.document=e,this.collapsed=!0};e.prototype={cloneContents:function(){return this.collapsed?null:t(this,0)},deleteContents:function(){var e;return this.collapsed||t(this,1),browser.webkit&&(3!=(e=this.startContainer).nodeType||e.nodeValue.length||(this.setStartBefore(e).collapse(!0),domUtils.remove(e))),this},extractContents:function(){return this.collapsed?null:t(this,2)},setStart:function(e,t){return i(!0,e,t,this)},setEnd:function(e,t){return i(!1,e,t,this)},setStartAfter:function(e){return this.setStart(e.parentNode,domUtils.getNodeIndex(e)+1)},setStartBefore:function(e){return this.setStart(e.parentNode,domUtils.getNodeIndex(e))},setEndAfter:function(e){return this.setEnd(e.parentNode,domUtils.getNodeIndex(e)+1)},setEndBefore:function(e){return this.setEnd(e.parentNode,domUtils.getNodeIndex(e))},setStartAtFirst:function(e){return this.setStart(e,0)},setStartAtLast:function(e){return this.setStart(e,3==e.nodeType?e.nodeValue.length:e.childNodes.length)},setEndAtFirst:function(e){return this.setEnd(e,0)},setEndAtLast:function(e){return this.setEnd(e,3==e.nodeType?e.nodeValue.length:e.childNodes.length)},selectNode:function(e){return this.setStartBefore(e).setEndAfter(e)},selectNodeContents:function(e){return this.setStart(e,0).setEndAtLast(e)},cloneRange:function(){return new e(this.document).setStart(this.startContainer,this.startOffset).setEnd(this.endContainer,this.endOffset)},collapse:function(e){var t=this;return e?(t.endContainer=t.startContainer,t.endOffset=t.startOffset):(t.startContainer=t.endContainer,t.startOffset=t.endOffset),t.collapsed=!0,t},shrinkBoundary:function(e){function t(e){return 1==e.nodeType&&!domUtils.isBookmarkNode(e)&&!dtd.$empty[e.tagName]&&!dtd.$nonChild[e.tagName]}for(var i,n=this,o=n.collapsed;1==n.startContainer.nodeType&&(i=n.startContainer.childNodes[n.startOffset])&&t(i);)n.setStart(i,0);if(o)return n.collapse(!0);if(!e)for(;1==n.endContainer.nodeType&&0<n.endOffset&&(i=n.endContainer.childNodes[n.endOffset-1])&&t(i);)n.setEnd(i,i.childNodes.length);return n},getCommonAncestor:function(e,t){var i=this.startContainer,n=this.endContainer;return i===n?e&&o(this)&&1==(i=i.childNodes[this.startOffset]).nodeType?i:t&&3==i.nodeType?i.parentNode:i:domUtils.getCommonAncestor(i,n)},trimBoundary:function(e){this.txtToElmBoundary();var t=this.startContainer,i=this.startOffset,n=this.collapsed,o=this.endContainer;if(3==t.nodeType){if(0==i)this.setStartBefore(t);else if(i>=t.nodeValue.length)this.setStartAfter(t);else{var a=domUtils.split(t,i);t===o?this.setEnd(a,this.endOffset-i):t.parentNode===o&&(this.endOffset+=1),this.setStartBefore(a)}if(n)return this.collapse(!0)}return e||(i=this.endOffset,3==(o=this.endContainer).nodeType&&(0==i?this.setEndBefore(o):(i<o.nodeValue.length&&domUtils.split(o,i),this.setEndAfter(o)))),this},txtToElmBoundary:function(e){function t(e,t){var i=e[t+"Container"],n=e[t+"Offset"];3==i.nodeType&&(n?n>=i.nodeValue.length&&e["set"+t.replace(/(\w)/,function(e){return e.toUpperCase()})+"After"](i):e["set"+t.replace(/(\w)/,function(e){return e.toUpperCase()})+"Before"](i))}return!e&&this.collapsed||(t(this,"start"),t(this,"end")),this},insertNode:function(e){var t=e,i=1;11==e.nodeType&&(t=e.firstChild,i=e.childNodes.length),this.trimBoundary(!0);var n=this.startContainer,o=this.startOffset,a=n.childNodes[o];return a?n.insertBefore(e,a):n.appendChild(e),t.parentNode===this.endContainer&&(this.endOffset=this.endOffset+i),this.setStartBefore(t)},setCursor:function(e,t){return this.collapse(!e).select(t)},createBookmark:function(e,t){var i,n=this.document.createElement("span");return n.style.cssText="display:none;line-height:0px;",n.appendChild(this.document.createTextNode("‍")),n.id="_baidu_bookmark_start_"+(t?"":a++),this.collapsed||((i=n.cloneNode(!0)).id="_baidu_bookmark_end_"+(t?"":a++)),this.insertNode(n),i&&this.collapse().insertNode(i).setEndBefore(i),this.setStartAfter(n),{start:e?n.id:n,end:i?e?i.id:i:null,id:e}},moveToBookmark:function(e){var t=e.id?this.document.getElementById(e.start):e.start,i=e.end&&e.id?this.document.getElementById(e.end):e.end;return this.setStartBefore(t),domUtils.remove(t),i?(this.setEndBefore(i),domUtils.remove(i)):this.collapse(!0),this},enlarge:function(e,t){var i,n,o=domUtils.isBody,a=this.document.createTextNode("");if(e){for(i=1==(n=this.startContainer).nodeType?n=n.childNodes[this.startOffset]?n.childNodes[this.startOffset]:(n.appendChild(a),a):n;;){if(domUtils.isBlockElm(n)){for(n=i;(i=n.previousSibling)&&!domUtils.isBlockElm(i);)n=i;this.setStartBefore(n);break}n=(i=n).parentNode}for(i=1==(n=this.endContainer).nodeType?((i=n.childNodes[this.endOffset])?n.insertBefore(a,i):n.appendChild(a),n=a):n;;){if(domUtils.isBlockElm(n)){for(n=i;(i=n.nextSibling)&&!domUtils.isBlockElm(i);)n=i;this.setEndAfter(n);break}n=(i=n).parentNode}a.parentNode===this.endContainer&&this.endOffset--,domUtils.remove(a)}if(!this.collapsed){for(;!(0!=this.startOffset||t&&t(this.startContainer)||o(this.startContainer));)this.setStartBefore(this.startContainer);for(;!(this.endOffset!=(1==this.endContainer.nodeType?this.endContainer.childNodes.length:this.endContainer.nodeValue.length)||t&&t(this.endContainer)||o(this.endContainer));)this.setEndAfter(this.endContainer)}return this},enlargeToBlockElm:function(e){for(;!domUtils.isBlockElm(this.startContainer);)this.setStartBefore(this.startContainer);if(!e)for(;!domUtils.isBlockElm(this.endContainer);)this.setEndAfter(this.endContainer);return this},adjustmentBoundary:function(){if(!this.collapsed){for(;!domUtils.isBody(this.startContainer)&&this.startOffset==this.startContainer[3==this.startContainer.nodeType?"nodeValue":"childNodes"].length&&this.startContainer[3==this.startContainer.nodeType?"nodeValue":"childNodes"].length;)this.setStartAfter(this.startContainer);for(;!domUtils.isBody(this.endContainer)&&!this.endOffset&&this.endContainer[3==this.endContainer.nodeType?"nodeValue":"childNodes"].length;)this.setEndBefore(this.endContainer)}return this},applyInlineStyle:function(t,i,e){if(this.collapsed)return this;this.trimBoundary().enlarge(!1,function(e){return 1==e.nodeType&&domUtils.isBlockElm(e)}).adjustmentBoundary();for(var n,o,a=this.createBookmark(),r=a.end,s=function(e){return 1==e.nodeType?"br"!=e.tagName.toLowerCase():!domUtils.isWhitespace(e)},l=domUtils.getNextDomNode(a.start,!1,s),d=this.cloneRange();l&&domUtils.getPosition(l,r)&domUtils.POSITION_PRECEDING;)if(3==l.nodeType||dtd[t][l.tagName]){for(d.setStartBefore(l),n=l;n&&(3==n.nodeType||dtd[t][n.tagName])&&n!==r;)o=n,n=domUtils.getNextDomNode(n,1==n.nodeType,null,function(e){return dtd[t][e.tagName]});var c,u,h=d.setEndAfter(o).extractContents();if(e&&0<e.length){var f,p;p=f=e[0].cloneNode(!1);for(var m,g=1;m=e[g++];)f.appendChild(m.cloneNode(!1)),f=f.firstChild;c=f}else c=d.document.createElement(t);if(i&&domUtils.setAttributes(c,i),c.appendChild(h),"SPAN"==c.tagName&&i&&i.style&&utils.each(c.getElementsByTagName("span"),function(e){e.style.cssText=e.style.cssText+";"+i.style}),d.insertNode(e?p:c),"span"==t&&i.style&&/text\-decoration/.test(i.style)&&(u=domUtils.findParentByTagName(c,"a",!0))?(domUtils.setAttributes(u,i),domUtils.remove(c,!0),c=u):(domUtils.mergeSibling(c),domUtils.clearEmptySibling(c)),domUtils.mergeChild(c,i),l=domUtils.getNextDomNode(c,!1,s),domUtils.mergeToParent(c),n===r)break}else l=domUtils.getNextDomNode(l,!0,s);return this.moveToBookmark(a)},removeInlineStyle:function(e){if(this.collapsed)return this;e=utils.isArray(e)?e:[e],this.shrinkBoundary().adjustmentBoundary();for(var t=this.startContainer,i=this.endContainer;;){if(1==t.nodeType){if(-1<utils.indexOf(e,t.tagName.toLowerCase()))break;if("body"==t.tagName.toLowerCase()){t=null;break}}t=t.parentNode}for(;;){if(1==i.nodeType){if(-1<utils.indexOf(e,i.tagName.toLowerCase()))break;if("body"==i.tagName.toLowerCase()){i=null;break}}i=i.parentNode}var n,o,a=this.createBookmark();t&&(n=(o=this.cloneRange().setEndBefore(a.start).setStartBefore(t)).extractContents(),o.insertNode(n),domUtils.clearEmptySibling(t,!0),t.parentNode.insertBefore(a.start,t)),i&&(n=(o=this.cloneRange().setStartAfter(a.end).setEndAfter(i)).extractContents(),o.insertNode(n),domUtils.clearEmptySibling(i,!1,!0),i.parentNode.insertBefore(a.end,i.nextSibling));for(var r,s=domUtils.getNextDomNode(a.start,!1,function(e){return 1==e.nodeType});s&&s!==a.end;)r=domUtils.getNextDomNode(s,!0,function(e){return 1==e.nodeType}),-1<utils.indexOf(e,s.tagName.toLowerCase())&&domUtils.remove(s,!0),s=r;return this.moveToBookmark(a)},getClosedNode:function(){var e;if(!this.collapsed){var t=this.cloneRange().adjustmentBoundary().shrinkBoundary();if(o(t)){var i=t.startContainer.childNodes[t.startOffset];i&&1==i.nodeType&&(dtd.$empty[i.tagName]||dtd.$nonChild[i.tagName])&&(e=i)}}return e},select:browser.ie?function(e,t){var i;this.collapsed||this.shrinkBoundary();var n=this.getClosedNode();if(n&&!t){try{(i=this.document.body.createControlRange()).addElement(n),i.select()}catch(e){}return this}var o,a=this.createBookmark(),r=a.start;if((i=this.document.body.createTextRange()).moveToElementText(r),i.moveStart("character",1),this.collapsed){if(!e&&3!=this.startContainer.nodeType){var s=this.document.createTextNode(f),l=this.document.createElement("span");l.appendChild(this.document.createTextNode(f)),r.parentNode.insertBefore(l,r),r.parentNode.insertBefore(s,r),c(this.document,s),h=s,u(l,"previousSibling"),u(r,"nextSibling"),i.moveStart("character",-1),i.collapse(!0)}}else{var d=this.document.body.createTextRange();o=a.end,d.moveToElementText(o),i.setEndPoint("EndToEnd",d)}this.moveToBookmark(a),l&&domUtils.remove(l);try{i.select()}catch(e){}return this}:function(e){var t,i=domUtils.getWindow(this.document),n=i.getSelection();if(browser.gecko?this.document.body.focus():i.focus(),n){if(n.removeAllRanges(),this.collapsed&&!e){var o=this.startContainer,a=o;1==o.nodeType&&(a=o.childNodes[this.startOffset]),3==o.nodeType&&this.startOffset||(a?a.previousSibling&&3==a.previousSibling.nodeType:o.lastChild&&3==o.lastChild.nodeType)||(t=this.document.createTextNode(f),this.insertNode(t),c(this.document,t),u(t,"previousSibling"),u(t,"nextSibling"),h=t,this.setStart(t,browser.webkit?1:0).collapse(!0))}var r=this.document.createRange();if(this.collapsed&&browser.opera&&1==this.startContainer.nodeType)if(a=this.startContainer.childNodes[this.startOffset]){for(;a&&domUtils.isBlockElm(a)&&1==a.nodeType&&a.childNodes[0];)a=a.childNodes[0];a&&this.setStartBefore(a).collapse(!0)}else(a=this.startContainer.lastChild)&&domUtils.isBr(a)&&this.setStartBefore(a).collapse(!0);(function(n){function e(e,t,i){3==e.nodeType&&e.nodeValue.length<t&&(n[i+"Offset"]=e.nodeValue.length)}e(n.startContainer,n.startOffset,"start"),e(n.endContainer,n.endOffset,"end")})(this),r.setStart(this.startContainer,this.startOffset),r.setEnd(this.endContainer,this.endOffset),n.addRange(r)}return this},scrollToView:function(e,t){e=e?window:domUtils.getWindow(this.document);var i=this.document.createElement("span");return i.innerHTML="&nbsp;",this.cloneRange().insertNode(i),domUtils.scrollToView(i,e,t),domUtils.remove(i),this},inFillChar:function(){var e=this.startContainer;return!(!this.collapsed||3!=e.nodeType||e.nodeValue.replace(new RegExp("^"+domUtils.fillChar),"").length+1!=e.nodeValue.length)},createAddress:function(e,d){function t(e){for(var t,i=e?c.startContainer:c.endContainer,n=domUtils.findParents(i,!0,function(e){return!domUtils.isBody(e)}),o=[],a=0;t=n[a++];)o.push(domUtils.getNodeIndex(t,d));var r=0;if(d)if(3==i.nodeType){for(var s=i.previousSibling;s&&3==s.nodeType;)r+=s.nodeValue.replace(fillCharReg,"").length,s=s.previousSibling;r+=e?c.startOffset:c.endOffset}else if(i=i.childNodes[e?c.startOffset:c.endOffset])r=domUtils.getNodeIndex(i,d);else for(var l=(i=e?c.startContainer:c.endContainer).firstChild;l;)if(domUtils.isFillChar(l))l=l.nextSibling;else if(r++,3==l.nodeType)for(;l&&3==l.nodeType;)l=l.nextSibling;else l=l.nextSibling;else r=e?domUtils.isFillChar(i)?0:c.startOffset:c.endOffset;return r<0&&(r=0),o.push(r),o}var i={},c=this;return i.startAddress=t(!0),e||(i.endAddress=c.collapsed?[].concat(i.startAddress):t()),i},moveToAddress:function(e,t){function i(e,t){for(var i,n,o,a=l.document.body,r=0,s=e.length;r<s;r++)if(o=e[r],!(a=(i=a).childNodes[o])){n=o;break}t?a?l.setStartBefore(a):l.setStart(i,n):a?l.setEndBefore(a):l.setEnd(i,n)}var l=this;return i(e.startAddress,!0),!t&&e.endAddress&&i(e.endAddress),l},equals:function(e){for(var t in this)if(this.hasOwnProperty(t)&&this[t]!==e[t])return!1;return!0},traversal:function(e,t){if(this.collapsed)return this;for(var i=this.createBookmark(),n=i.end,o=domUtils.getNextDomNode(i.start,!1,t);o&&o!==n&&domUtils.getPosition(o,n)&domUtils.POSITION_PRECEDING;){var a=domUtils.getNextDomNode(o,!1,t);e(o),o=a}return this.moveToBookmark(i)}}}(),function(){function s(e,t){var i=domUtils.getNodeIndex;(e=e.duplicate()).collapse(t);var n=e.parentElement();if(!n.hasChildNodes())return{container:n,offset:0};for(var o,a,r=n.children,s=e.duplicate(),l=0,d=r.length-1,c=-1;l<=d;){o=r[c=Math.floor((l+d)/2)],s.moveToElementText(o);var u=s.compareEndPoints("StartToStart",e);if(0<u)d=c-1;else{if(!(u<0))return{container:n,offset:i(o)};l=c+1}}if(-1==c){if(s.moveToElementText(n),s.setEndPoint("StartToStart",e),a=s.text.replace(/(\r\n|\r)/g,"\n").length,r=n.childNodes,!a)return{container:o=r[r.length-1],offset:o.nodeValue.length};for(var h=r.length;0<a;)a-=r[--h].nodeValue.length;return{container:r[h],offset:-a}}if(s.collapse(0<u),s.setEndPoint(0<u?"StartToStart":"EndToStart",e),!(a=s.text.replace(/(\r\n|\r)/g,"\n").length))return dtd.$empty[o.tagName]||dtd.$nonChild[o.tagName]?{container:n,offset:i(o)+(0<u?0:1)}:{container:o,offset:0<u?0:o.childNodes.length};for(;0<a;)try{var f=o;a-=(o=o[0<u?"previousSibling":"nextSibling"]).nodeValue.length}catch(e){return{container:n,offset:i(f)}}return{container:o,offset:0<u?-a:o.nodeValue.length+a}}function n(e){var t;try{t=e.getNative().createRange()}catch(e){return null}var i=t.item?t.item(0):t.parentElement();return(i.ownerDocument||i)===e.document?t:null}(dom.Selection=function(e){var t,i=this;i.document=e,browser.ie9below&&(t=domUtils.getWindow(e).frameElement,domUtils.on(t,"beforedeactivate",function(){i._bakIERange=i.getIERange()}),domUtils.on(t,"activate",function(){try{!n(i)&&i._bakIERange&&i._bakIERange.select()}catch(e){}i._bakIERange=null})),t=e=null}).prototype={rangeInBody:function(e,t){var i=browser.ie9below||t?e.item?e.item():e.parentElement():e.startContainer;return i===this.document.body||domUtils.inDoc(i,this.document)},getNative:function(){var e=this.document;try{return e?browser.ie9below?e.selection:domUtils.getWindow(e).getSelection():null}catch(e){return null}},getIERange:function(){var e=n(this);return!e&&this._bakIERange?this._bakIERange:e},cache:function(){this.clear(),this._cachedRange=this.getRange(),this._cachedStartElement=this.getStart(),this._cachedStartElementPath=this.getStartElementPath()},getStartElementPath:function(){if(this._cachedStartElementPath)return this._cachedStartElementPath;var e=this.getStart();return e?domUtils.findParents(e,!0,null,!0):[]},clear:function(){this._cachedStartElementPath=this._cachedRange=this._cachedStartElement=null},isFocus:function(){try{if(browser.ie9below){var e=n(this);return!(!e||!this.rangeInBody(e))}return!!this.getNative().rangeCount}catch(e){return!1}},getRange:function(){function t(e){for(var t=n.document.body.firstChild,i=e.collapsed;t&&t.firstChild;)e.setStart(t,0),t=t.firstChild;e.startContainer||e.setStart(n.document.body,0),i&&e.collapse(!0)}var n=this;if(null!=n._cachedRange)return this._cachedRange;var i=new baidu.editor.dom.Range(n.document);if(browser.ie9below){var e=n.getIERange();if(e)try{!function(e,t){if(e.item)t.selectNode(e.item(0));else{var i=s(e,!0);t.setStart(i.container,i.offset),0!=e.compareEndPoints("StartToEnd",e)&&(i=s(e,!1),t.setEnd(i.container,i.offset))}}(e,i)}catch(e){t(i)}else t(i)}else{var o=n.getNative();if(o&&o.rangeCount){var a=o.getRangeAt(0),r=o.getRangeAt(o.rangeCount-1);i.setStart(a.startContainer,a.startOffset).setEnd(r.endContainer,r.endOffset),i.collapsed&&domUtils.isBody(i.startContainer)&&!i.startOffset&&t(i)}else{if(this._bakRange&&domUtils.inDoc(this._bakRange.startContainer,this.document))return this._bakRange;t(i)}}return this._bakRange=i},getStart:function(){if(this._cachedStartElement)return this._cachedStartElement;var e,t,i,n,o=browser.ie9below?this.getIERange():this.getRange();if(browser.ie9below){if(!o)return this.document.body.firstChild;if(o.item)return o.item(0);for(0<(e=o.duplicate()).text.length&&e.moveStart("character",1),e.collapse(1),t=e.parentElement(),n=i=o.parentElement();i=i.parentNode;)if(i==t){t=n;break}}else if(o.shrinkBoundary(),1==(t=o.startContainer).nodeType&&t.hasChildNodes()&&(t=t.childNodes[Math.min(t.childNodes.length-1,o.startOffset)]),3==t.nodeType)return t.parentNode;return t},getText:function(){var e,t;return this.isFocus()&&(e=this.getNative())?(t=browser.ie9below?e.createRange():e.getRangeAt(0),browser.ie9below?t.text:t.toString()):""},clearRange:function(){this.getNative()[browser.ie9below?"empty":"removeAllRanges"]()}}}(),function(){function c(e,t){var i;if(t.options.textarea)if(utils.isString(t.options.textarea)){for(var n,o=0,a=domUtils.getElementsByTagName(e,"textarea");n=a[o++];)if(n.id=="ueditor_textarea_"+t.options.textarea){i=n;break}}else i=t.textarea;i||(e.appendChild(i=domUtils.createElement(document,"textarea",{name:t.options.textarea,id:"ueditor_textarea_"+t.options.textarea,style:"display:none"})),t.textarea=i),!i.getAttribute("name")&&i.setAttribute("name",t.options.textarea),i.value=t.hasContents()?t.options.allHtmlEnabled?t.getAllHtml():t.getContent(null,null,!0):""}function i(e){e.langIsReady=!0,e.fireEvent("langReady")}var t,n=0,o=UE.Editor=function(e){var t=this;t.uid=n++,EventBase.call(t),t.commands={},t.options=utils.extend(utils.clone(e||{}),UEDITOR_CONFIG,!0),t.shortcutkeys={},t.inputRules=[],t.outputRules=[],t.setOpt(o.defaultOptions(t)),t.loadServerConfig(),utils.isEmptyObject(UE.I18N)?utils.loadFile(document,{src:t.options.langPath+t.options.lang+"/"+t.options.lang+".js",tag:"script",type:"text/javascript",defer:"defer"},function(){UE.plugin.load(t),i(t)}):(t.options.lang=function(e){for(var t in e)return t}(UE.I18N),UE.plugin.load(t),i(t)),UE.instants["ueditorInstant"+t.uid]=t};o.prototype={registerCommand:function(e,t){this.commands[e]=t},ready:function(e){e&&(this.isReady?e.apply(this):this.addListener("ready",e))},setOpt:function(e,t){var i={};utils.isString(e)?i[e]=t:i=e,utils.extend(this.options,i,!0)},getOpt:function(e){return this.options[e]},destroy:function(){var e=this;e.fireEvent("destroy");var t=e.container.parentNode,i=e.textarea;i?i.style.display="":(i=document.createElement("textarea"),t.parentNode.insertBefore(i,t)),i.style.width=e.iframe.offsetWidth+"px",i.style.height=e.iframe.offsetHeight+"px",i.value=e.getContent(),i.id=e.key,t.innerHTML="",domUtils.remove(t);var n=e.key;for(var o in e)e.hasOwnProperty(o)&&delete this[o];UE.delEditor(n)},render:function(t){var e=this.options,i=function(e){return parseInt(domUtils.getComputedStyle(t,e))};if(utils.isString(t)&&(t=document.getElementById(t)),t){e.initialFrameWidth?e.minFrameWidth=e.initialFrameWidth:e.minFrameWidth=e.initialFrameWidth=t.offsetWidth,e.initialFrameHeight?e.minFrameHeight=e.initialFrameHeight:e.initialFrameHeight=e.minFrameHeight=t.offsetHeight,t.style.width=/%$/.test(e.initialFrameWidth)?"100%":e.initialFrameWidth-i("padding-left")-i("padding-right")+"px",t.style.height=/%$/.test(e.initialFrameHeight)?"100%":e.initialFrameHeight-i("padding-top")-i("padding-bottom")+"px",t.style.zIndex=e.zIndex;var n=(ie&&browser.version<9?"":"<!DOCTYPE html>")+"<html xmlns='http://www.w3.org/1999/xhtml' class='view' ><head><style type='text/css'>.view{padding:0;word-wrap:break-word;cursor:text;height:90%;}\nbody{margin:8px;font-family:sans-serif;font-size:16px;}p{margin:5px 0;}</style>"+(e.iframeCssUrl?"<link rel='stylesheet' type='text/css' href='"+utils.unhtml(e.iframeCssUrl)+"'/>":"")+(e.initialStyle?"<style>"+e.initialStyle+"</style>":"")+"</head><body class='view' ></body><script type='text/javascript' "+(ie?"defer='defer'":"")+" id='_initialScript'>setTimeout(function(){editor = window.parent.UE.instants['ueditorInstant"+this.uid+"'];editor._setup(document);},0);var _tmpScript = document.getElementById('_initialScript');_tmpScript.parentNode.removeChild(_tmpScript);<\/script>"+(e.iframeJsUrl?"<script type='text/javascript' src='"+utils.unhtml(e.iframeJsUrl)+"'><\/script>":"")+"</html>";t.appendChild(domUtils.createElement(document,"iframe",{id:"ueditor_"+this.uid,width:"100%",height:"100%",frameborder:"0",src:"javascript:void(function(){document.open();"+(e.customDomain&&document.domain!=location.hostname?'document.domain="'+document.domain+'";':"")+'document.write("'+n+'");document.close();}())'})),t.style.overflow="hidden",setTimeout(function(){/%$/.test(e.initialFrameWidth)&&(e.minFrameWidth=e.initialFrameWidth=t.offsetWidth),/%$/.test(e.initialFrameHeight)&&(e.minFrameHeight=e.initialFrameHeight=t.offsetHeight,t.style.height=e.initialFrameHeight+"px")})}},_setup:function(e){var t,i=this,n=i.options;ie?(e.body.disabled=!0,e.body.contentEditable=!0,e.body.disabled=!1):e.body.contentEditable=!0,e.body.spellcheck=!1,i.document=e,i.window=e.defaultView||e.parentWindow,i.iframe=i.window.frameElement,i.body=e.body,i.selection=new dom.Selection(e),browser.gecko&&(t=this.selection.getNative())&&t.removeAllRanges(),this._initEvents();for(var o=this.iframe.parentNode;!domUtils.isBody(o);o=o.parentNode)if("FORM"==o.tagName){i.form=o,i.options.autoSyncData?domUtils.on(i.window,"blur",function(){c(o,i)}):domUtils.on(o,"submit",function(){c(this,i)});break}if(n.initialContent)if(n.autoClearinitialContent){var a=i.execCommand;i.execCommand=function(){return i.fireEvent("firstBeforeExecCommand"),a.apply(i,arguments)},this._setDefaultContent(n.initialContent)}else this.setContent(n.initialContent,!1,!0);domUtils.isEmptyNode(i.body)&&(i.body.innerHTML="<p>"+(browser.ie?"":"<br/>")+"</p>"),n.focus&&setTimeout(function(){i.focus(i.options.focusInEnd),!i.options.autoClearinitialContent&&i._selectionChange()},0),i.container||(i.container=this.iframe.parentNode),n.fullscreen&&i.ui&&i.ui.setFullScreen(!0);try{i.document.execCommand("2D-position",!1,!1)}catch(e){}try{i.document.execCommand("enableInlineTableEditing",!1,!1)}catch(e){}try{i.document.execCommand("enableObjectResizing",!1,!1)}catch(e){}i._bindshortcutKeys(),i.isReady=1,i.fireEvent("ready"),n.onready&&n.onready.call(i),browser.ie9below||domUtils.on(i.window,["blur","focus"],function(e){if("blur"==e.type){i._bakRange=i.selection.getRange();try{i._bakNativeRange=i.selection.getNative().getRangeAt(0),i.selection.getNative().removeAllRanges()}catch(e){i._bakNativeRange=null}}else try{i._bakRange&&i._bakRange.select()}catch(e){}}),browser.gecko&&browser.version<=10902&&(i.body.contentEditable=!1,setTimeout(function(){i.body.contentEditable=!0},100),setInterval(function(){i.body.style.height=i.iframe.offsetHeight-20+"px"},100)),!n.isShow&&i.setHide(),n.readonly&&i.setDisabled()},sync:function(e){var t=e?document.getElementById(e):domUtils.findParent(this.iframe.parentNode,function(e){return"FORM"==e.tagName},!0);t&&c(t,this)},setHeight:function(e,t){e!==parseInt(this.iframe.parentNode.style.height)&&(this.iframe.parentNode.style.height=e+"px"),!t&&(this.options.minFrameHeight=this.options.initialFrameHeight=e),this.body.style.height=e+"px",!t&&this.trigger("setHeight")},addshortcutkey:function(e,t){var i={};t?i[e]=t:i=e,utils.extend(this.shortcutkeys,i)},_bindshortcutKeys:function(){var d=this,c=this.shortcutkeys;d.addListener("keydown",function(e,t){var i=t.keyCode||t.which;for(var n in c)for(var o,a=c[n].split(","),r=0;o=a[r++];){var s=(o=o.split(":"))[0],l=o[1];(/^(ctrl)(\+shift)?\+(\d+)$/.test(s.toLowerCase())||/^(\d+)$/.test(s))&&("ctrl"==RegExp.$1&&(t.ctrlKey||t.metaKey)&&(""==RegExp.$2||t[RegExp.$2.slice(1)+"Key"])&&i==RegExp.$3||i==RegExp.$1)&&(-1!=d.queryCommandState(n,l)&&d.execCommand(n,l),domUtils.preventDefault(t))}})},getContent:function(e,t,i,n,o){if(e&&utils.isFunction(e)&&(t=e,e=""),t?!t():!this.hasContents())return"";this.fireEvent("beforegetcontent");var a=UE.htmlparser(this.body.innerHTML,n);return this.filterOutputRule(a),this.fireEvent("aftergetcontent",e,a),a.toHtml(o)},getAllHtml:function(){var e=[];if(this.fireEvent("getAllHtml",e),browser.ie&&8<browser.version){var t="";utils.each(this.document.styleSheets,function(e){t+=e.href?'<link rel="stylesheet" type="text/css" href="'+e.href+'" />':"<style>"+e.cssText+"</style>"}),utils.each(this.document.getElementsByTagName("script"),function(e){t+=e.outerHTML})}return"<html><head>"+(this.options.charset?'<meta http-equiv="Content-Type" content="text/html; charset='+this.options.charset+'"/>':"")+(t||this.document.getElementsByTagName("head")[0].innerHTML)+e.join("\n")+"</head><body "+(ie&&browser.version<9?'class="view"':"")+">"+this.getContent(null,null,!0)+"</body></html>"},getPlainTxt:function(){var e=new RegExp(domUtils.fillChar,"g"),t=this.body.innerHTML.replace(/[\n\r]/g,"");return(t=t.replace(/<(p|div)[^>]*>(<br\/?>|&nbsp;)<\/\1>/gi,"\n").replace(/<br\/?>/gi,"\n").replace(/<[^>\/]+>/g,"").replace(/(\n)?<\/([^>]+)>/g,function(e,t,i){return dtd.$block[i]?"\n":t||""})).replace(e,"").replace(/\u00a0/g," ").replace(/&nbsp;/g," ")},getContentTxt:function(){var e=new RegExp(domUtils.fillChar,"g");return this.body[browser.ie?"innerText":"textContent"].replace(e,"").replace(/\u00a0/g," ")},setContent:function(e,t,i){var n=this;n.fireEvent("beforesetcontent",e);var o,a,r=UE.htmlparser(e);if(n.filterInputRule(r),e=r.toHtml(),n.body.innerHTML=(t?n.body.innerHTML:"")+e,"p"==n.options.enterTag){var s,l=this.body.firstChild;if(!l||1==l.nodeType&&(dtd.$cdata[l.tagName]||"DIV"==(o=l).tagName&&o.getAttribute("cdata_tag")||domUtils.isCustomeNode(l))&&l===this.body.lastChild)this.body.innerHTML="<p>"+(browser.ie?"&nbsp;":"<br/>")+"</p>"+this.body.innerHTML;else for(var d=n.document.createElement("p");l;){for(;l&&(3==l.nodeType||1==l.nodeType&&dtd.p[l.tagName]&&!dtd.$cdata[l.tagName]);)s=l.nextSibling,d.appendChild(l),l=s;if(d.firstChild){if(!l){n.body.appendChild(d);break}l.parentNode.insertBefore(d,l),d=n.document.createElement("p")}l=l.nextSibling}}n.fireEvent("aftersetcontent"),n.fireEvent("contentchange"),!i&&n._selectionChange(),n._bakRange=n._bakIERange=n._bakNativeRange=null,browser.gecko&&(a=this.selection.getNative())&&a.removeAllRanges(),n.options.autoSyncData&&n.form&&c(n.form,n)},focus:function(e){try{var t=this.selection.getRange();if(e){(i=this.body.lastChild)&&1==i.nodeType&&!dtd.$empty[i.tagName]&&(domUtils.isEmptyBlock(i)?t.setStartAtFirst(i):t.setStartAtLast(i),t.collapse(!0)),t.setCursor(!0)}else{var i;if(!t.collapsed&&domUtils.isBody(t.startContainer)&&0==t.startOffset)(i=this.body.firstChild)&&1==i.nodeType&&!dtd.$empty[i.tagName]&&t.setStartAtFirst(i).collapse(!0);t.select(!0)}this.fireEvent("focus selectionchange")}catch(e){}},isFocus:function(){return this.selection.isFocus()},blur:function(){var e=this.selection.getNative();if(e.empty&&browser.ie){var t=document.body.createTextRange();t.moveToElementText(document.body),t.collapse(!0),t.select(),e.empty()}else e.removeAllRanges()},_initEvents:function(){var t=this,e=t.document,i=t.window;t._proxyDomEvent=utils.bind(t._proxyDomEvent,t),domUtils.on(e,["click","contextmenu","mousedown","keydown","keyup","keypress","mouseup","mouseover","mouseout","selectstart"],t._proxyDomEvent),domUtils.on(i,["focus","blur"],t._proxyDomEvent),domUtils.on(t.body,"drop",function(e){browser.gecko&&e.stopPropagation&&e.stopPropagation(),t.fireEvent("contentchange")}),domUtils.on(e,["mouseup","keydown"],function(e){"keydown"==e.type&&(e.ctrlKey||e.metaKey||e.shiftKey||e.altKey)||2!=e.button&&t._selectionChange(250,e)})},_proxyDomEvent:function(e){return!1!==this.fireEvent("before"+e.type.replace(/^on/,"").toLowerCase())&&!1!==this.fireEvent(e.type.replace(/^on/,""),e)&&this.fireEvent("after"+e.type.replace(/^on/,"").toLowerCase())},_selectionChange:function(e,i){var n,o,a=this,r=!1;browser.ie&&browser.version<9&&i&&"mouseup"==i.type&&(this.selection.getRange().collapsed||(r=!0,n=i.clientX,o=i.clientY));clearTimeout(t),t=setTimeout(function(){if(a.selection&&a.selection.getNative()){var t,e;if(r&&"None"==a.selection.getNative().type){t=a.document.body.createTextRange();try{t.moveToPoint(n,o)}catch(e){t=null}}t&&(e=a.selection.getIERange,a.selection.getIERange=function(){return t}),a.selection.cache(),e&&(a.selection.getIERange=e),a.selection._cachedRange&&a.selection._cachedStartElement&&(a.fireEvent("beforeselectionchange"),a.fireEvent("selectionchange",!!i),a.fireEvent("afterselectionchange"),a.selection.clear())}},e||50)},_callCmdFn:function(e,t){var i,n,o=t[0].toLowerCase();return n=(i=this.commands[o]||UE.commands[o])&&i[e],i&&n||"queryCommandState"!=e?n?n.apply(this,t):void 0:0},execCommand:function(e){e=e.toLowerCase();var t,i=this,n=i.commands[e]||UE.commands[e];return n&&n.execCommand?(n.notNeedUndo||i.__hasEnterExecCommand?(t=this._callCmdFn("execCommand",arguments),!i.__hasEnterExecCommand&&!n.ignoreContentChange&&!i._ignoreContentChange&&i.fireEvent("contentchange")):(i.__hasEnterExecCommand=!0,-1!=i.queryCommandState.apply(i,arguments)&&(i.fireEvent("saveScene"),i.fireEvent.apply(i,["beforeexeccommand",e].concat(arguments)),t=this._callCmdFn("execCommand",arguments),i.fireEvent.apply(i,["afterexeccommand",e].concat(arguments)),i.fireEvent("saveScene")),i.__hasEnterExecCommand=!1),!i.__hasEnterExecCommand&&!n.ignoreContentChange&&!i._ignoreContentChange&&i._selectionChange(),t):null},queryCommandState:function(e){return this._callCmdFn("queryCommandState",arguments)},queryCommandValue:function(e){return this._callCmdFn("queryCommandValue",arguments)},hasContents:function(e){if(e)for(var t,i=0;t=e[i++];)if(0<this.document.getElementsByTagName(t).length)return!0;if(!domUtils.isEmptyBlock(this.body))return!0;for(e=["div"],i=0;t=e[i++];)for(var n,o=domUtils.getElementsByTagName(this.document,t),a=0;n=o[a++];)if(domUtils.isCustomeNode(n))return!0;return!1},reset:function(){this.fireEvent("reset")},setEnabled:function(){var t,i=this;if("false"==i.body.contentEditable){i.body.contentEditable=!0,t=i.selection.getRange();try{t.moveToBookmark(i.lastBk),delete i.lastBk}catch(e){t.setStartAtFirst(i.body).collapse(!0)}t.select(!0),i.bkqueryCommandState&&(i.queryCommandState=i.bkqueryCommandState,delete i.bkqueryCommandState),i.bkqueryCommandValue&&(i.queryCommandValue=i.bkqueryCommandValue,delete i.bkqueryCommandValue),i.fireEvent("selectionchange")}},enable:function(){return this.setEnabled()},setDisabled:function(t){var i=this;t=t?utils.isArray(t)?t:[t]:[],"true"==i.body.contentEditable&&(i.lastBk||(i.lastBk=i.selection.getRange().createBookmark(!0)),i.body.contentEditable=!1,i.bkqueryCommandState=i.queryCommandState,i.bkqueryCommandValue=i.queryCommandValue,i.queryCommandState=function(e){return-1!=utils.indexOf(t,e)?i.bkqueryCommandState.apply(i,arguments):-1},i.queryCommandValue=function(e){return-1!=utils.indexOf(t,e)?i.bkqueryCommandValue.apply(i,arguments):null},i.fireEvent("selectionchange"))},disable:function(e){return this.setDisabled(e)},_setDefaultContent:function(){function t(){var e=this;e.document.getElementById("initContent")&&(e.body.innerHTML="<p>"+(ie?"":"<br/>")+"</p>",e.removeListener("firstBeforeExecCommand focus",t),setTimeout(function(){e.focus(),e._selectionChange()},0))}return function(e){this.body.innerHTML='<p id="initContent">'+e+"</p>",this.addListener("firstBeforeExecCommand focus",t)}}(),setShow:function(){var t=this,i=t.selection.getRange();if("none"==t.container.style.display){try{i.moveToBookmark(t.lastBk),delete t.lastBk}catch(e){i.setStartAtFirst(t.body).collapse(!0)}setTimeout(function(){i.select(!0)},100),t.container.style.display=""}},show:function(){return this.setShow()},setHide:function(){this.lastBk||(this.lastBk=this.selection.getRange().createBookmark(!0)),this.container.style.display="none"},hide:function(){return this.setHide()},getLang:function(e){var t=UE.I18N[this.options.lang];if(!t)throw Error("not import language file");e=(e||"").split(".");for(var i,n=0;(i=e[n++])&&(t=t[i]););return t},getContentLength:function(e,t){var i=this.getContent(!1,!1,!0).length;if(e){t=(t||[]).concat(["hr","img","iframe"]),i=this.getContentTxt().replace(/[\t\r\n]+/g,"").length;for(var n,o=0;n=t[o++];)i+=this.document.getElementsByTagName(n).length}return i},addInputRule:function(e){this.inputRules.push(e)},filterInputRule:function(e){for(var t,i=0;t=this.inputRules[i++];)t.call(this,e)},addOutputRule:function(e){this.outputRules.push(e)},filterOutputRule:function(e){for(var t,i=0;t=this.outputRules[i++];)t.call(this,e)},getActionUrl:function(e){var t=this.getOpt(e)||e,i=this.getOpt("imageUrl"),n=this.getOpt("serverUrl");return!n&&i&&(n=i.replace(/^(.*[\/]).+([\.].+)$/,"$1controller$2")),n?(n=n+(-1==n.indexOf("?")?"?":"&")+"action="+(t||""),utils.formatUrl(n)):""}},utils.inherits(o,EventBase)}(),UE.Editor.defaultOptions=function(e){var t=e.options.UEDITOR_HOME_URL;return{isShow:!0,initialContent:"",initialStyle:"",autoClearinitialContent:!1,iframeCssUrl:t+"themes/iframe.css",textarea:"editorValue",focus:!1,focusInEnd:!0,autoClearEmptyNode:!0,fullscreen:!1,readonly:!1,zIndex:999,imagePopup:!0,enterTag:"p",customDomain:!1,lang:"zh-cn",langPath:t+"lang/",theme:"default",themePath:t+"themes/",allHtmlEnabled:!1,scaleEnabled:!1,tableNativeEditInFF:!1,autoSyncData:!0,fileNameFormat:"{time}{rand:6}"}},function(){UE.Editor.prototype.loadServerConfig=function(){function showErrorMsg(e){console&&console.error(e)}var me=this;setTimeout(function(){try{me.options.imageUrl&&me.setOpt("serverUrl",me.options.imageUrl.replace(/^(.*[\/]).+([\.].+)$/,"$1controller$2"));var configUrl=me.getActionUrl("config"),isJsonp=utils.isCrossDomainUrl(configUrl);me._serverConfigLoaded=!1,configUrl&&UE.ajax.request(configUrl,{method:"GET",dataType:isJsonp?"jsonp":"",onsuccess:function(r){try{var config=isJsonp?r:eval("("+r.responseText+")");utils.extend(me.options,config),me.fireEvent("serverConfigLoaded"),me._serverConfigLoaded=!0}catch(e){showErrorMsg(me.getLang("loadconfigFormatError"))}},onerror:function(){showErrorMsg(me.getLang("loadconfigHttpError"))}})}catch(e){showErrorMsg(me.getLang("loadconfigError"))}})},UE.Editor.prototype.isServerConfigLoaded=function(){return this._serverConfigLoaded||!1},UE.Editor.prototype.afterConfigReady=function(e){if(e&&utils.isFunction(e)){var t=this,i=function(){e.apply(t,arguments),t.removeListener("serverConfigLoaded",i)};t.isServerConfigLoaded()?e.call(t,"serverConfigLoaded"):t.addListener("serverConfigLoaded",i)}}}(),UE.ajax=function(){function v(e){var t=[];for(var i in e)if("method"!=i&&"timeout"!=i&&"async"!=i&&"dataType"!=i&&"callback"!=i&&null!=e[i]&&null!=e[i])if("function"!=(typeof e[i]).toLowerCase()&&"object"!=(typeof e[i]).toLowerCase())t.push(encodeURIComponent(i)+"="+encodeURIComponent(e[i]));else if(utils.isArray(e[i]))for(var n=0;n<e[i].length;n++)t.push(encodeURIComponent(i)+"[]="+encodeURIComponent(e[i][n]));return t.join("&")}function n(e,t){function i(e){return function(){try{if(e)l.onerror&&l.onerror();else try{clearTimeout(o),r.apply(window,arguments)}catch(e){}}catch(e){l.onerror&&l.onerror.call(window,e)}finally{l.oncomplete&&l.oncomplete.apply(window,arguments),s.parentNode&&s.parentNode.removeChild(s),window[n]=null;try{delete window[n]}catch(e){}}}}var n,o,a,r=t.onsuccess||function(){},s=document.createElement("SCRIPT"),l=t||{},d=l.charset,c=l.jsonp||"callback",u=l.timeOut||0,h=new RegExp("(\\?|&)"+c+"=([^&]*)");utils.isFunction(r)?(n="bd__editor__"+Math.floor(2147483648*Math.random()).toString(36),window[n]=i(0)):utils.isString(r)?n=r:(a=h.exec(e))&&(n=a[2]),(e=e.replace(h,"$1"+c+"="+n)).search(h)<0&&(e+=(e.indexOf("?")<0?"?":"&")+c+"="+n);var f,p,m,g=v(t);utils.isEmptyObject(t.data)||(g+=(g?"&":"")+v(t.data)),g&&(e=e.replace(/\?/,"?"+g+"&")),s.onerror=i(1),u&&(o=setTimeout(i(1),u)),p=e,m=d,(f=s).setAttribute("type","text/javascript"),f.setAttribute("defer","defer"),m&&f.setAttribute("charset",m),f.setAttribute("src",p),document.getElementsByTagName("head")[0].appendChild(f)}var t="XMLHttpRequest()";try{new ActiveXObject("Msxml2.XMLHTTP"),t="ActiveXObject('Msxml2.XMLHTTP')"}catch(e){try{new ActiveXObject("Microsoft.XMLHTTP"),t="ActiveXObject('Microsoft.XMLHTTP')"}catch(e){}}var c=new Function("return new "+t);return{request:function(e,t){t&&"jsonp"==t.dataType?n(e,t):function(e,t){var i=c(),n=!1,o={method:"POST",timeout:5e3,async:!0,data:{},onsuccess:function(){},onerror:function(){}};if("object"==typeof e&&(e=(t=e).url),i&&e){var a=t?utils.extend(o,t):o,r=v(a);utils.isEmptyObject(a.data)||(r+=(r?"&":"")+v(a.data));var s=setTimeout(function(){4!=i.readyState&&(n=!0,i.abort(),clearTimeout(s))},a.timeout),l=a.method.toUpperCase(),d=e+(-1==e.indexOf("?")?"?":"&")+("POST"==l?"":r+"&noCache="+ +new Date);i.open(l,d,a.async),i.onreadystatechange=function(){4==i.readyState&&(n||200!=i.status?a.onerror(i):a.onsuccess(i))},"POST"==l?(i.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),i.send(r)):i.send(null)}}(e,t)},getJSONP:function(e,t,i){n(e,{data:t,oncomplete:i})}}}();var filterWord=UE.filterWord=function(){function u(e){return e.replace(/[\d.]+\w+/g,function(e){return utils.transUnitToPx(e)})}return function(e){return/(class="?Mso|style="[^"]*\bmso\-|w:WordDocument|<(v|o):|lang=)/gi.test(e)?e.replace(/[\t\r\n]+/g," ").replace(/<!--[\s\S]*?-->/gi,"").replace(/<v:shape [^>]*>[\s\S]*?.<\/v:shape>/gi,function(e){if(browser.opera)return"";try{if(/Bitmap/i.test(e))return"";var t=e.match(/width:([ \d.]*p[tx])/i)[1],i=e.match(/height:([ \d.]*p[tx])/i)[1],n=e.match(/src=\s*"([^"]*)"/i)[1];return'<img width="'+u(t)+'" height="'+u(i)+'" src="'+n+'" />'}catch(e){return""}}).replace(/<\/?div[^>]*>/g,"").replace(/v:\w+=(["']?)[^'"]+\1/g,"").replace(/<(!|script[^>]*>.*?<\/script(?=[>\s])|\/?(\?xml(:\w+)?|xml|meta|link|style|\w+:\w+)(?=[\s\/>]))[^>]*>/gi,"").replace(/<p [^>]*class="?MsoHeading"?[^>]*>(.*?)<\/p>/gi,"<p><strong>$1</strong></p>").replace(/\s+(class|lang|align)\s*=\s*(['"]?)([\w-]+)\2/gi,function(e,t,i,n){return"class"==t&&"MsoListParagraph"==n?e:""}).replace(/<(font|span)[^>]*>(\s*)<\/\1>/gi,function(e,t,i){return i.replace(/[\t\r\n ]+/g," ")}).replace(/(<[a-z][^>]*)\sstyle=(["'])([^\2]*?)\2/gi,function(e,t,i,n){for(var o,a=[],r=n.replace(/^\s+|\s+$/,"").replace(/&#39;/g,"'").replace(/&quot;/gi,"'").replace(/[\d.]+(cm|pt)/g,function(e){return utils.transUnitToPx(e)}).split(/;\s*/g),s=0;o=r[s];s++){var l,d,c=o.split(":");if(2==c.length){if(l=c[0].toLowerCase(),d=c[1].toLowerCase(),/^(background)\w*/.test(l)&&0==d.replace(/(initial|\s)/g,"").length||/^(margin)\w*/.test(l)&&/^0\w+$/.test(d))continue;switch(l){case"mso-padding-alt":case"mso-padding-top-alt":case"mso-padding-right-alt":case"mso-padding-bottom-alt":case"mso-padding-left-alt":case"mso-margin-alt":case"mso-margin-top-alt":case"mso-margin-right-alt":case"mso-margin-bottom-alt":case"mso-margin-left-alt":case"mso-height":case"mso-width":case"mso-vertical-align-alt":/<table/.test(t)||(a[s]=l.replace(/^mso-|-alt$/g,"")+":"+u(d));continue;case"horiz-align":a[s]="text-align:"+d;continue;case"vert-align":a[s]="vertical-align:"+d;continue;case"font-color":case"mso-foreground":a[s]="color:"+d;continue;case"mso-background":case"mso-highlight":a[s]="background:"+d;continue;case"mso-default-height":a[s]="min-height:"+u(d);continue;case"mso-default-width":a[s]="min-width:"+u(d);continue;case"mso-padding-between-alt":a[s]="border-collapse:separate;border-spacing:"+u(d);continue;case"text-line-through":"single"!=d&&"double"!=d||(a[s]="text-decoration:line-through");continue;case"mso-zero-height":"yes"==d&&(a[s]="display:none");continue;case"margin":if(!/[1-9]/.test(d))continue}if(/^(mso|column|font-emph|lang|layout|line-break|list-image|nav|panose|punct|row|ruby|sep|size|src|tab-|table-border|text-(?:decor|trans)|top-bar|version|vnd|word-break)/.test(l)||/text\-indent|padding|margin/.test(l)&&/\-[\d.]+/.test(d))continue;a[s]=l+":"+c[1]}}return t+(a.length?' style="'+a.join(";").replace(/;{2,}/g,";")+'"':"")}):e}}();!function(){function d(e,t,i){return e.push(s),t+(i?1:-1)}function c(e,t){for(var i=0;i<t;i++)e.push(n)}function u(e,t,i,n){switch(e.type){case"root":for(var o,a=0;o=e.children[a++];)i&&"element"==o.type&&!dtd.$inlineWithA[o.tagName]&&1<a&&(d(t,n,!0),c(t,n)),u(o,t,i,n);break;case"text":l=t,"pre"==(s=e).parentNode.tagName?l.push(s.data):l.push(f[s.parentNode.tagName]?utils.html(s.data):s.data.replace(/[ ]{2}/g," &nbsp;"));break;case"element":!function(e,t,i,n){var o="";if(e.attrs){o=[];var a=e.attrs;for(var r in a)o.push(r+(void 0!==a[r]?'="'+(h[r]?utils.html(a[r]).replace(/["]/g,function(e){return"&quot;"}):utils.unhtml(a[r]))+'"':""));o=o.join(" ")}if(t.push("<"+e.tagName+(o?" "+o:"")+(dtd.$empty[e.tagName]?"/":"")+">"),i&&!dtd.$inlineWithA[e.tagName]&&"pre"!=e.tagName&&e.children&&e.children.length&&(n=d(t,n,!0),c(t,n)),e.children&&e.children.length)for(var s,l=0;s=e.children[l++];)i&&"element"==s.type&&!dtd.$inlineWithA[s.tagName]&&1<l&&(d(t,n),c(t,n)),u(s,t,i,n);dtd.$empty[e.tagName]||(i&&!dtd.$inlineWithA[e.tagName]&&"pre"!=e.tagName&&e.children&&e.children.length&&(n=d(t,n),c(t,n)),t.push("</"+e.tagName+">"))}(e,t,i,n);break;case"comment":r=e,t.push("\x3c!--"+r.data+"--\x3e")}var r,s,l;return t}function a(e,t){var i;if("element"==e.type&&e.getAttr("id")==t)return e;if(e.children&&e.children.length)for(var n,o=0;n=e.children[o++];)if(i=a(n,t))return i}function r(e,t,i){if("element"==e.type&&e.tagName==t&&i.push(e),e.children&&e.children.length)for(var n,o=0;n=e.children[o++];)r(n,t,i)}var o=UE.uNode=function(e){this.type=e.type,this.data=e.data,this.tagName=e.tagName,this.parentNode=e.parentNode,this.attrs=e.attrs||{},this.children=e.children},h={href:1,src:1,_src:1,_href:1,cdata_data:1},f={style:1,script:1},n="    ",s="\n";o.createElement=function(e){return/[<>]/.test(e)?UE.htmlparser(e).children[0]:new o({type:"element",children:[],tagName:e})},o.createText=function(e,t){return new UE.uNode({type:"text",data:t?e:utils.unhtml(e||"")})},o.prototype={toHtml:function(e){var t=[];return u(this,t,e,0),t.join("")},innerHTML:function(e){if("element"!=this.type||dtd.$empty[this.tagName])return this;if(utils.isString(e)){if(this.children)for(var t=0;i=this.children[t++];)i.parentNode=null;this.children=[];var i,n=UE.htmlparser(e);for(t=0;i=n.children[t++];)this.children.push(i),i.parentNode=this;return this}return(n=new UE.uNode({type:"root",children:this.children})).toHtml()},innerText:function(e,t){if("element"!=this.type||dtd.$empty[this.tagName])return this;if(e){if(this.children)for(var i,n=0;i=this.children[n++];)i.parentNode=null;return this.children=[],this.appendChild(o.createText(e,t)),this}return this.toHtml().replace(/<[^>]+>/g,"")},getData:function(){return"element"==this.type?"":this.data},firstChild:function(){return this.children?this.children[0]:null},lastChild:function(){return this.children?this.children[this.children.length-1]:null},previousSibling:function(){for(var e,t=this.parentNode,i=0;e=t.children[i];i++)if(e===this)return 0==i?null:t.children[i-1]},nextSibling:function(){for(var e,t=this.parentNode,i=0;e=t.children[i++];)if(e===this)return t.children[i]},replaceChild:function(e,t){if(this.children){e.parentNode&&e.parentNode.removeChild(e);for(var i,n=0;i=this.children[n];n++)if(i===t)return this.children.splice(n,1,e),t.parentNode=null,e.parentNode=this,e}},appendChild:function(e){if("root"==this.type||"element"==this.type&&!dtd.$empty[this.tagName]){this.children||(this.children=[]),e.parentNode&&e.parentNode.removeChild(e);for(var t,i=0;t=this.children[i];i++)if(t===e){this.children.splice(i,1);break}return this.children.push(e),e.parentNode=this,e}},insertBefore:function(e,t){if(this.children){e.parentNode&&e.parentNode.removeChild(e);for(var i,n=0;i=this.children[n];n++)if(i===t)return this.children.splice(n,0,e),e.parentNode=this,e}},insertAfter:function(e,t){if(this.children){e.parentNode&&e.parentNode.removeChild(e);for(var i,n=0;i=this.children[n];n++)if(i===t)return this.children.splice(n+1,0,e),e.parentNode=this,e}},removeChild:function(e,t){if(this.children)for(var i,n=0;i=this.children[n];n++)if(i===e){if(this.children.splice(n,1),i.parentNode=null,t&&i.children&&i.children.length)for(var o,a=0;o=i.children[a];a++)this.children.splice(n+a,0,o),o.parentNode=this;return i}},getAttr:function(e){return this.attrs&&this.attrs[e.toLowerCase()]},setAttr:function(e,t){if(e)if(this.attrs||(this.attrs={}),utils.isObject(e))for(var i in e)e[i]?this.attrs[i.toLowerCase()]=e[i]:delete this.attrs[i];else t?this.attrs[e.toLowerCase()]=t:delete this.attrs[e];else delete this.attrs},getIndex:function(){for(var e,t=this.parentNode,i=0;e=t.children[i];i++)if(e===this)return i;return-1},getNodeById:function(e){var t;if(this.children&&this.children.length)for(var i,n=0;i=this.children[n++];)if(t=a(i,e))return t},getNodesByTagName:function(e){e=utils.trim(e).replace(/[ ]{2,}/g," ").split(" ");var n=[],o=this;return utils.each(e,function(e){if(o.children&&o.children.length)for(var t,i=0;t=o.children[i++];)r(t,e,n)}),n},getStyle:function(e){var t=this.getAttr("style");if(!t)return"";var i=new RegExp("(^|;)\\s*"+e+":([^;]+)","i"),n=t.match(i);return n&&n[0]?n[2]:""},setStyle:function(e,t){function i(e,t){var i=new RegExp("(^|;)\\s*"+e+":([^;]+;?)","gi");n=n.replace(i,"$1"),t&&(n=e+":"+utils.unhtml(t)+";"+n)}var n=this.getAttr("style");if(n||(n=""),utils.isObject(e))for(var o in e)i(o,e[o]);else i(e,t);this.setAttr("style",utils.trim(n))},traversal:function(e){return this.children&&this.children.length&&function e(t,i){if(t.children&&t.children.length)for(var n,o=0;n=t.children[o];)e(n,i),n.parentNode&&(n.children&&n.children.length&&i(n),n.parentNode&&o++);else i(t)}(this,e),this}}}();var htmlparser=UE.htmlparser=function(e,i){function t(e,t){if(l[e.tagName]){var i=h.createElement(l[e.tagName]);e.appendChild(i),i.appendChild(h.createText(t)),e=i}else e.appendChild(h.createText(t))}function d(e,t,i){var n;if(n=f[t]){for(var o,a=e;"root"!=a.type;){if(utils.isArray(n)?-1!=utils.indexOf(n,a.tagName):n==a.tagName){e=a,o=!0;break}a=a.parentNode}o||(e=d(e,utils.isArray(n)?n[0]:n))}var r=new h({parentNode:e,type:"element",tagName:t.toLowerCase(),children:dtd.$empty[t]?null:[]});if(i){for(var s,l={};s=c.exec(i);)l[s[1].toLowerCase()]=u[s[1].toLowerCase()]?s[2]||s[3]||s[4]:utils.unhtml(s[2]||s[3]||s[4]);r.attrs=l}return e.children.push(r),dtd.$empty[t]?e:r}var n,o,a=/<(?:(?:\/([^>]+)>)|(?:!--([\S|\s]*?)-->)|(?:([^\/\s>]+)((?:\s+[\w\-:.]+(?:\s*=\s*?(?:(?:"[^"]*")|(?:'[^']*')|[^\s"'\/>]+))?)*)[\S\s]*?(\/?)>))/g,c=/([\w\-:.]+)(?:(?:\s*=\s*(?:(?:"([^"]*)")|(?:'([^']*)')|([^\s>]+)))|(?=\s|$))/g,r={b:1,code:1,i:1,u:1,strike:1,s:1,tt:1,strong:1,q:1,samp:1,em:1,span:1,sub:1,img:1,sup:1,font:1,big:1,small:1,iframe:1,a:1,br:1,pre:1};e=e.replace(new RegExp(domUtils.fillChar,"g"),""),i||(e=e.replace(new RegExp("[\\r\\t\\n"+(i?"":" ")+"]*</?(\\w+)\\s*(?:[^>]*)>[\\r\\t\\n"+(i?"":" ")+"]*","g"),function(e,t){return t&&r[t.toLowerCase()]?e.replace(/(^[\n\r]+)|([\n\r]+$)/g,""):e.replace(new RegExp("^[\\r\\n"+(i?"":" ")+"]+"),"").replace(new RegExp("[\\r\\n"+(i?"":" ")+"]+$"),"")}));for(var s,u={href:1,src:1},h=UE.uNode,f={td:"tr",tr:["tbody","thead","tfoot"],tbody:"table",th:"tr",thead:"table",tfoot:"table",caption:"table",li:["ul","ol"],dt:"dl",dd:"dl",option:"select"},l={ol:"li",ul:"li"},p=0,m=0,g=new h({type:"root",children:[]}),v=g;s=a.exec(e);){p=s.index;try{if(m<p&&t(v,e.slice(m,p)),s[3])dtd.$cdata[v.tagName]?t(v,s[0]):v=d(v,s[3].toLowerCase(),s[4]);else if(s[1]){if("root"!=v.type)if(dtd.$cdata[v.tagName]&&!dtd.$cdata[s[1]])t(v,s[0]);else{for(var y=v;"element"==v.type&&v.tagName!=s[1].toLowerCase();)if("root"==(v=v.parentNode).type)throw v=y,"break";v=v.parentNode}}else s[2]&&(n=v,o=s[2],n.children.push(new h({type:"comment",data:o,parentNode:n})))}catch(e){}m=a.lastIndex}return m<e.length&&t(v,e.slice(m)),g},filterNode=UE.filterNode=function(){function h(i,e){switch(i.type){case"text":break;case"element":var t;if(t=e[i.tagName])if("-"===t)i.parentNode.removeChild(i);else if(utils.isFunction(t)){var n=i.parentNode,o=i.getIndex();if(t(i),i.parentNode){if(i.children)for(var a=0;u=i.children[a];)h(u,e),u.parentNode&&a++}else for(a=o;u=n.children[a];)h(u,e),u.parentNode&&a++}else{var r=t.$;if(r&&i.attrs){var s,l={};for(var d in r){if(s=i.getAttr(d),"style"==d&&utils.isArray(r[d])){var c=[];utils.each(r[d],function(e){var t;(t=i.getStyle(e))&&c.push(e+":"+t)}),s=c.join(";")}s&&(l[d]=s)}i.attrs=l}if(i.children)for(a=0;u=i.children[a];)h(u,e),u.parentNode&&a++}else if(dtd.$cdata[i.tagName])i.parentNode.removeChild(i);else{n=i.parentNode,o=i.getIndex();i.parentNode.removeChild(i,!0);var u;for(a=o;u=n.children[a];)h(u,e),u.parentNode&&a++}break;case"comment":i.parentNode.removeChild(i)}}return function(e,t){if(utils.isEmptyObject(t))return e;var i;(i=t["-"])&&utils.each(i.split(" "),function(e){t[e]="-"});for(var n,o=0;n=e.children[o];)h(n,t),n.parentNode&&o++;return e}}(),Zog;UE.plugin=(Zog={},{register:function(e,t,i,n){i&&utils.isFunction(i)&&(n=i,i=null),Zog[e]={optionName:i||e,execFn:t,afterDisabled:n}},load:function(i){utils.each(Zog,function(e){var t=e.execFn.call(i);!1!==i.options[e.optionName]?t&&utils.each(t,function(e,t){switch(t.toLowerCase()){case"shortcutkey":i.addshortcutkey(e);break;case"bindevents":utils.each(e,function(e,t){i.addListener(t,e)});break;case"bindmultievents":utils.each(utils.isArray(e)?e:[e],function(t){var e=utils.trim(t.type).split(/\s+/);utils.each(e,function(e){i.addListener(e,t.handler)})});break;case"commands":utils.each(e,function(e,t){i.commands[t]=e});break;case"outputrule":i.addOutputRule(e);break;case"inputrule":i.addInputRule(e);break;case"defaultoptions":i.setOpt(e)}}):e.afterDisabled&&e.afterDisabled.call(i)}),utils.each(UE.plugins,function(e){e.call(i)})},run:function(e,t){var i=Zog[e];i&&i.exeFn.call(t)}});var keymap=UE.keymap={Backspace:8,Tab:9,Enter:13,Shift:16,Control:17,Alt:18,CapsLock:20,Esc:27,Spacebar:32,PageUp:33,PageDown:34,End:35,Home:36,Left:37,Up:38,Right:39,Down:40,Insert:45,Del:46,NumLock:144,Cmd:91,"=":187,"-":189,b:66,i:73,z:90,y:89,v:86,x:88,s:83,n:78},LocalStorage=UE.LocalStorage=(tpg=window.localStorage||((vpg=document.createElement("div")).style.display="none",vpg.addBehavior?(vpg.addBehavior("#default#userdata"),{getItem:function(e){var t=null;try{document.body.appendChild(vpg),vpg.load(upg),t=vpg.getAttribute(e),document.body.removeChild(vpg)}catch(e){}return t},setItem:function(e,t){document.body.appendChild(vpg),vpg.setAttribute(e,t),vpg.save(upg),document.body.removeChild(vpg)},removeItem:function(e){document.body.appendChild(vpg),vpg.removeAttribute(e),vpg.save(upg),document.body.removeChild(vpg)}}):null)||null,upg="localStorage",{saveLocalData:function(e,t){return!(!tpg||!t||(tpg.setItem(e,t),0))},getLocalData:function(e){return tpg?tpg.getItem(e):null},removeItem:function(e){tpg&&tpg.removeItem(e)}}),vpg,tpg,upg,cLg,kGg,swg,twg,Gpg;Gpg="ueditor_preference",UE.Editor.prototype.setPreferences=function(e,t){var i={};utils.isString(e)?i[e]=t:i=e;var n=LocalStorage.getLocalData(Gpg);n&&(n=utils.str2json(n))?utils.extend(n,i):n=i,n&&LocalStorage.saveLocalData(Gpg,utils.json2str(n))},UE.Editor.prototype.getPreferences=function(e){var t=LocalStorage.getLocalData(Gpg);return t&&(t=utils.str2json(t))?e?t[e]:t:null},UE.Editor.prototype.removePreferences=function(e){var t=LocalStorage.getLocalData(Gpg);t&&(t=utils.str2json(t))&&(t[e]=void 0,delete t[e]),t&&LocalStorage.saveLocalData(Gpg,utils.json2str(t))},UE.plugins.defaultfilter=function(){var s=this;s.setOpt({allowDivTransToP:!0,disabledTableInTable:!0,rgb2Hex:!0}),s.addInputRule(function(e){var a,r=this.options.allowDivTransToP;e.traversal(function(o){if("element"==o.type){if(!dtd.$cdata[o.tagName]&&s.options.autoClearEmptyNode&&dtd.$inline[o.tagName]&&!dtd.$empty[o.tagName]&&(!o.attrs||utils.isEmptyObject(o.attrs)))return void(o.firstChild()?"span"!=o.tagName||o.attrs&&!utils.isEmptyObject(o.attrs)||o.parentNode.removeChild(o,!0):o.parentNode.removeChild(o));switch(o.tagName){case"style":case"script":o.setAttr({cdata_tag:o.tagName,cdata_data:o.innerHTML()||"",_ue_custom_node_:"true"}),o.tagName="div",o.innerHTML("");break;case"a":(a=o.getAttr("href"))&&o.setAttr("_href",a);break;case"img":if((a=o.getAttr("src"))&&/^data:/.test(a)){o.parentNode.removeChild(o);break}o.setAttr("_src",o.getAttr("src"));break;case"span":browser.webkit&&(a=o.getStyle("white-space"))&&/nowrap|normal/.test(a)&&(o.setStyle("white-space",""),s.options.autoClearEmptyNode&&utils.isEmptyObject(o.attrs)&&o.parentNode.removeChild(o,!0)),(a=o.getAttr("id"))&&/^_baidu_bookmark_/i.test(a)&&o.parentNode.removeChild(o);break;case"p":(a=o.getAttr("align"))&&(o.setAttr("align"),o.setStyle("text-align",a)),utils.each(o.children,function(e){if("element"==e.type&&"p"==e.tagName){var t=e.nextSibling();o.parentNode.insertAfter(e,o);for(var i=e;t;){var n=t.nextSibling();o.parentNode.insertAfter(t,i),i=t,t=n}return!1}}),o.firstChild()||o.innerHTML(browser.ie?"&nbsp;":"<br/>");break;case"div":if(o.getAttr("cdata_tag"))break;if((a=o.getAttr("class"))&&/^line number\d+/.test(a))break;if(!r)break;for(var e,t=UE.uNode.createElement("p");e=o.firstChild();)"text"!=e.type&&UE.dom.dtd.$block[e.tagName]?t.firstChild()?(o.parentNode.insertBefore(t,o),t=UE.uNode.createElement("p")):o.parentNode.insertBefore(e,o):t.appendChild(e);t.firstChild()&&o.parentNode.insertBefore(t,o),o.parentNode.removeChild(o);break;case"dl":o.tagName="ul";break;case"dt":case"dd":o.tagName="li";break;case"li":var i=o.getAttr("class");i&&/list\-/.test(i)||o.setAttr();var n=o.getNodesByTagName("ol ul");UE.utils.each(n,function(e){o.parentNode.insertAfter(e,o)});break;case"td":case"th":case"caption":o.children&&o.children.length||o.appendChild(browser.ie11below?UE.uNode.createText(" "):UE.uNode.createElement("br"));break;case"table":s.options.disabledTableInTable&&function(e){for(;e&&"element"==e.type;){if("td"==e.tagName)return!0;e=e.parentNode}return!1}(o)&&(o.parentNode.insertBefore(UE.uNode.createText(o.innerText()),o),o.parentNode.removeChild(o))}}})}),s.addOutputRule(function(e){var i;e.traversal(function(e){if("element"==e.type){if(s.options.autoClearEmptyNode&&dtd.$inline[e.tagName]&&!dtd.$empty[e.tagName]&&(!e.attrs||utils.isEmptyObject(e.attrs)))return void(e.firstChild()?"span"!=e.tagName||e.attrs&&!utils.isEmptyObject(e.attrs)||e.parentNode.removeChild(e,!0):e.parentNode.removeChild(e));switch(e.tagName){case"div":(i=e.getAttr("cdata_tag"))&&(e.tagName=i,e.appendChild(UE.uNode.createText(e.getAttr("cdata_data"))),e.setAttr({cdata_tag:"",cdata_data:"",_ue_custom_node_:""}));break;case"a":(i=e.getAttr("_href"))&&e.setAttr({href:utils.html(i),_href:""});break;case"span":if((i=e.getAttr("id"))&&/^_baidu_bookmark_/i.test(i)&&e.parentNode.removeChild(e),s.getOpt("rgb2Hex")){var t=e.getAttr("style");t&&e.setAttr("style",t.replace(/rgba?\(([\d,\s]+)\)/g,function(e,t){var i=t.split(",");if(3<i.length)return"";t="#";for(var n,o=0;n=i[o++];)t+=1==(n=parseInt(n.replace(/[^\d]/gi,""),10).toString(16)).length?"0"+n:n;return t.toUpperCase()}))}break;case"img":(i=e.getAttr("_src"))&&e.setAttr({src:e.getAttr("_src"),_src:""})}}})})},UE.commands.inserthtml={execCommand:function(e,t,i){var n,o,a=this;if(t&&!0!==a.fireEvent("beforeinserthtml",t)){if((o=(n=a.selection.getRange()).document.createElement("div")).style.display="inline",!i){var r=UE.htmlparser(t);a.options.filterRules&&UE.filterNode(r,a.options.filterRules),a.filterInputRule(r),t=r.toHtml()}if(o.innerHTML=utils.trim(t),!n.collapsed){var s=n.startContainer;if(domUtils.isFillChar(s)&&n.setStartBefore(s),s=n.endContainer,domUtils.isFillChar(s)&&n.setEndAfter(s),n.txtToElmBoundary(),n.endContainer&&1==n.endContainer.nodeType&&((s=n.endContainer.childNodes[n.endOffset])&&domUtils.isBr(s)&&n.setEndAfter(s)),0==n.startOffset&&(s=n.startContainer,domUtils.isBoundaryNode(s,"firstChild")&&(s=n.endContainer,n.endOffset==(3==s.nodeType?s.nodeValue.length:s.childNodes.length)&&domUtils.isBoundaryNode(s,"lastChild")&&(a.body.innerHTML="<p>"+(browser.ie?"":"<br/>")+"</p>",n.setStart(a.body.firstChild,0).collapse(!0)))),!n.collapsed&&n.deleteContents(),1==n.startContainer.nodeType)if((l=n.startContainer.childNodes[n.startOffset])&&domUtils.isBlockElm(l)&&(v=l.previousSibling)&&domUtils.isBlockElm(v)){for(n.setEnd(v,v.childNodes.length).collapse();l.firstChild;)v.appendChild(l.firstChild);domUtils.remove(l)}}var l,d,c,u,h=0;n.inFillChar()&&(l=n.startContainer,domUtils.isFillChar(l)?(n.setStartBefore(l).collapse(!0),domUtils.remove(l)):domUtils.isFillChar(l,!0)&&(l.nodeValue=l.nodeValue.replace(fillCharReg,""),n.startOffset--,n.collapsed&&n.collapse(!0)));var f=domUtils.findParentByTagName(n.startContainer,"li",!0);if(f){for(var p;l=o.firstChild;){for(;l&&(3==l.nodeType||!domUtils.isBlockElm(l)||"HR"==l.tagName);)y=l.nextSibling,n.insertNode(l).collapse(),p=l,l=y;if(l)if(/^(ol|ul)$/i.test(l.tagName)){for(;l.firstChild;)p=l.firstChild,domUtils.insertAfter(f,l.firstChild),f=f.nextSibling;domUtils.remove(l)}else{var m;y=l.nextSibling,m=a.document.createElement("li"),domUtils.insertAfter(f,m),m.appendChild(l),p=l,l=y,f=m}}f=domUtils.findParentByTagName(n.startContainer,"li",!0),domUtils.isEmptyBlock(f)&&domUtils.remove(f),p&&n.setStartAfter(p).collapse(!0).select(!0)}else{for(;l=o.firstChild;){if(h){for(var g=a.document.createElement("p");l&&(3==l.nodeType||!dtd.$block[l.tagName]);)u=l.nextSibling,g.appendChild(l),l=u;g.firstChild&&(l=g)}if(n.insertNode(l),u=l.nextSibling,!h&&l.nodeType==domUtils.NODE_ELEMENT&&domUtils.isBlockElm(l)&&((d=domUtils.findParent(l,function(e){return domUtils.isBlockElm(e)}))&&"body"!=d.tagName.toLowerCase()&&(!dtd[d.tagName][l.nodeName]||l.parentNode!==d))){if(dtd[d.tagName][l.nodeName])for(c=l.parentNode;c!==d;)c=(v=c).parentNode;else v=d;domUtils.breakParent(l,v||c);var v=l.previousSibling;domUtils.trimWhiteTextNode(v),v.childNodes.length||domUtils.remove(v),!browser.ie&&(y=l.nextSibling)&&domUtils.isBlockElm(y)&&y.lastChild&&!domUtils.isBr(y.lastChild)&&y.appendChild(a.document.createElement("br")),h=1}var y=l.nextSibling;if(!o.firstChild&&y&&domUtils.isBlockElm(y)){n.setStart(y,0).collapse(!0);break}n.setEndAfter(l).collapse()}if(l=n.startContainer,u&&domUtils.isBr(u)&&domUtils.remove(u),domUtils.isBlockElm(l)&&domUtils.isEmptyNode(l))if(u=l.nextSibling)domUtils.remove(l),1==u.nodeType&&dtd.$block[u.tagName]&&n.setStart(u,0).collapse(!0).shrinkBoundary();else try{l.innerHTML=browser.ie?domUtils.fillChar:"<br/>"}catch(e){n.setStartBefore(l),domUtils.remove(l)}try{n.select(!0)}catch(e){}}setTimeout(function(){(n=a.selection.getRange()).scrollToView(a.autoHeightEnabled,a.autoHeightEnabled?domUtils.getXY(a.iframe).y:0),a.fireEvent("afterinserthtml",t)},200)}}},UE.plugins.autotypeset=function(){function p(e,t){return e&&3!=e.nodeType?domUtils.isBr(e)?1:e&&e.parentNode&&n[e.tagName.toLowerCase()]?g&&g.contains(e)||e.getAttribute("pagebreak")?0:t?!domUtils.isEmptyBlock(e):domUtils.isEmptyBlock(e,new RegExp("[\\s"+domUtils.fillChar+"]","g")):void 0:0}function m(e){e.style.cssText||(domUtils.removeAttributes(e,["style"]),"span"==e.tagName.toLowerCase()&&domUtils.hasNoAttributes(e)&&domUtils.remove(e,!0))}function e(e,t){var i,n;if(t){if(!v.pasteFilter)return;(i=this.document.createElement("div")).innerHTML=t.html}else i=this.document.body;for(var o,a=domUtils.getElementsByTagName(i,"*"),r=0;o=a[r++];)if(!0!==this.fireEvent("excludeNodeinautotype",o)){if(v.clearFontSize&&o.style.fontSize&&(domUtils.removeStyle(o,"font-size"),m(o)),v.clearFontFamily&&o.style.fontFamily&&(domUtils.removeStyle(o,"font-family"),m(o)),p(o)){if(v.mergeEmptyline)for(var s=o.nextSibling,l=domUtils.isBr(o);p(s)&&(s=(c=s).nextSibling,!l||s&&(!s||domUtils.isBr(s)));)domUtils.remove(c);if(v.removeEmptyline&&domUtils.inDoc(o,i)&&!b[o.parentNode.tagName.toLowerCase()]){if(domUtils.isBr(o)&&((s=o.nextSibling)&&!domUtils.isBr(s)))continue;domUtils.remove(o);continue}}if(p(o,!0)&&"SPAN"!=o.tagName&&(v.indent&&(o.style.textIndent=v.indentValue),v.textAlign&&(o.style.textAlign=v.textAlign)),v.removeClass&&o.className&&!y[o.className.toLowerCase()]){if(g&&g.contains(o))continue;domUtils.removeAttributes(o,["class"])}if(v.imageBlockLine&&"img"==o.tagName.toLowerCase()&&!o.getAttribute("emotion"))if(t){var d=o;switch(v.imageBlockLine){case"left":case"right":case"none":for(var c,u,h=d.parentNode;dtd.$inline[h.tagName]||"A"==h.tagName;)h=h.parentNode;if("P"==(c=h).tagName&&"center"==domUtils.getStyle(c,"text-align")&&!domUtils.isBody(c)&&1==domUtils.getChildCount(c,function(e){return!domUtils.isBr(e)&&!domUtils.isWhitespace(e)}))if(u=c.previousSibling,s=c.nextSibling,u&&s&&1==u.nodeType&&1==s.nodeType&&u.tagName==s.tagName&&domUtils.isBlockElm(u)){for(u.appendChild(c.firstChild);s.firstChild;)u.appendChild(s.firstChild);domUtils.remove(c),domUtils.remove(s)}else domUtils.setStyle(c,"text-align","");domUtils.setStyle(d,"float",v.imageBlockLine);break;case"center":if("center"!=this.queryCommandValue("imagefloat")){for(h=d.parentNode,domUtils.setStyle(d,"float","none"),c=d;h&&1==domUtils.getChildCount(h,function(e){return!domUtils.isBr(e)&&!domUtils.isWhitespace(e)})&&(dtd.$inline[h.tagName]||"A"==h.tagName);)h=(c=h).parentNode;var f=this.document.createElement("p");domUtils.setAttributes(f,{style:"text-align:center"}),c.parentNode.insertBefore(f,c),f.appendChild(c),domUtils.setStyle(c,"float","")}}}else{this.selection.getRange().selectNode(o).select(),this.execCommand("imagefloat",v.imageBlockLine)}v.removeEmptyNode&&v.removeTagNames[o.tagName.toLowerCase()]&&domUtils.hasNoAttributes(o)&&domUtils.isEmptyBlock(o)&&domUtils.remove(o)}v.tobdc&&((n=UE.htmlparser(i.innerHTML)).traversal(function(e){"text"==e.type&&(e.data=function(e){e=utils.html(e);for(var t="",i=0;i<e.length;i++)t+=32==e.charCodeAt(i)?String.fromCharCode(12288):e.charCodeAt(i)<127?String.fromCharCode(e.charCodeAt(i)+65248):e.charAt(i);return t}(e.data))}),i.innerHTML=n.toHtml());v.bdc2sb&&((n=UE.htmlparser(i.innerHTML)).traversal(function(e){"text"==e.type&&(e.data=function(e){for(var t="",i=0;i<e.length;i++){var n=e.charCodeAt(i);t+=65281<=n&&n<=65373?String.fromCharCode(e.charCodeAt(i)-65248):12288==n?String.fromCharCode(e.charCodeAt(i)-12288+32):e.charAt(i)}return t}(e.data))}),i.innerHTML=n.toHtml());t&&(t.html=i.innerHTML)}this.setOpt({autotypeset:{mergeEmptyline:!0,removeClass:!0,removeEmptyline:!1,textAlign:"left",imageBlockLine:"center",pasteFilter:!1,clearFontSize:!1,clearFontFamily:!1,removeEmptyNode:!1,removeTagNames:utils.extend({div:1},dtd.$removeEmpty),indent:!1,indentValue:"2em",bdc2sb:!1,tobdc:!1}});var g,t,i=this,v=i.options.autotypeset,y={selectTdClass:1,pagebreak:1,anchorclass:1},b={li:1},n={div:1,p:1,blockquote:1,center:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,span:1};v&&(t=i.getPreferences("autotypeset"),utils.extend(i.options.autotypeset,t),v.pasteFilter&&i.addListener("beforepaste",e),i.commands.autotypeset={execCommand:function(){i.removeListener("beforepaste",e),v.pasteFilter&&i.addListener("beforepaste",e),e.call(i)}})},UE.plugin.register("autosubmit",function(){return{shortcutkey:{autosubmit:"ctrl+13"},commands:{autosubmit:{execCommand:function(){var e=domUtils.findParentByTagName(this.iframe,"form",!1);if(e){if(!1===this.fireEvent("beforesubmit"))return;this.sync(),e.submit()}}}}}}),UE.plugin.register("background",function(){function i(e){var n={},t=e.split(";");return utils.each(t,function(e){var t=e.indexOf(":"),i=utils.trim(e.substr(0,t)).toLowerCase();i&&(n[i]=utils.trim(e.substr(t+1)||""))}),n}function n(e){if(e){var t=[];for(var i in e)e.hasOwnProperty(i)&&t.push(i+":"+e[i]+"; ");utils.cssRule(a,t.length?"body{"+t.join("")+"}":"",l.document)}else utils.cssRule(a,"",l.document)}var o,l=this,a="editor_background",r=new RegExp("body[\\s]*\\{(.+)\\}","i"),e=l.hasContents;return l.hasContents=function(){return!!l.queryCommandValue("background")||e.apply(l,arguments)},{bindEvents:{getAllHtml:function(e,t){var i,n=this.body,o=domUtils.getComputedStyle(n,"background-image");i=0<o.indexOf(l.options.imagePath)?o.substring(o.indexOf(l.options.imagePath),o.length-1).replace(/"|\(|\)/gi,""):"none"!=o?o.replace(/url\("?|"?\)/gi,""):"";var a='<style type="text/css">body{',r={"background-color":domUtils.getComputedStyle(n,"background-color")||"#ffffff","background-image":i?"url("+i+")":"","background-repeat":domUtils.getComputedStyle(n,"background-repeat")||"","background-position":browser.ie?domUtils.getComputedStyle(n,"background-position-x")+" "+domUtils.getComputedStyle(n,"background-position-y"):domUtils.getComputedStyle(n,"background-position"),height:domUtils.getComputedStyle(n,"height")};for(var s in r)r.hasOwnProperty(s)&&(a+=s+":"+r[s]+"; ");a+="}</style> ",t.push(a)},aftersetcontent:function(){0==o&&n()}},inputRule:function(e){o=!1,utils.each(e.getNodesByTagName("p"),function(e){var t=e.getAttr("data-background");t&&(o=!0,n(i(t)),e.parentNode.removeChild(e))})},outputRule:function(e){var t=(utils.cssRule(a,this.document)||"").replace(/[\n\r]+/g,"").match(r);t&&e.appendChild(UE.uNode.createElement('<p style="display:none;" data-background="'+utils.trim(t[1].replace(/"/g,"").replace(/[\s]+/g," "))+'"><br/></p>'))},commands:{background:{execCommand:function(e,t){n(t)},queryCommandValue:function(){var e=(utils.cssRule(a,this.document)||"").replace(/[\n\r]+/g,"").match(r);return e?i(e[1]):null},notNeedUndo:!0}}}}),UE.commands.imagefloat={execCommand:function(e,t){var i=this.selection.getRange();if(!i.collapsed){var n=i.getClosedNode();if(n&&"IMG"==n.tagName)switch(t){case"left":case"right":case"none":for(var o,a,r,s=n.parentNode;dtd.$inline[s.tagName]||"A"==s.tagName;)s=s.parentNode;if("P"==(o=s).tagName&&"center"==domUtils.getStyle(o,"text-align")){if(!domUtils.isBody(o)&&1==domUtils.getChildCount(o,function(e){return!domUtils.isBr(e)&&!domUtils.isWhitespace(e)}))if(a=o.previousSibling,r=o.nextSibling,a&&r&&1==a.nodeType&&1==r.nodeType&&a.tagName==r.tagName&&domUtils.isBlockElm(a)){for(a.appendChild(o.firstChild);r.firstChild;)a.appendChild(r.firstChild);domUtils.remove(o),domUtils.remove(r)}else domUtils.setStyle(o,"text-align","");i.selectNode(n).select()}domUtils.setStyle(n,"float","none"==t?"":t),"none"==t&&domUtils.removeAttributes(n,"align");break;case"center":if("center"!=this.queryCommandValue("imagefloat")){for(s=n.parentNode,domUtils.setStyle(n,"float",""),domUtils.removeAttributes(n,"align"),o=n;s&&1==domUtils.getChildCount(s,function(e){return!domUtils.isBr(e)&&!domUtils.isWhitespace(e)})&&(dtd.$inline[s.tagName]||"A"==s.tagName);)s=(o=s).parentNode;i.setStartBefore(o).setCursor(!1),(s=this.document.createElement("div")).appendChild(o),domUtils.setStyle(o,"float",""),this.execCommand("insertHtml",'<p id="_img_parent_tmp" style="text-align:center">'+s.innerHTML+"</p>"),(o=this.document.getElementById("_img_parent_tmp")).removeAttribute("id"),o=o.firstChild,i.selectNode(o).select(),(r=o.parentNode.nextSibling)&&domUtils.isEmptyNode(r)&&domUtils.remove(r)}}}},queryCommandValue:function(){var e,t,i=this.selection.getRange();return i.collapsed?"none":(e=i.getClosedNode())&&1==e.nodeType&&"IMG"==e.tagName?("none"==(t=domUtils.getComputedStyle(e,"float")||e.getAttribute("align"))&&(t="center"==domUtils.getComputedStyle(e.parentNode,"text-align")?"center":t),{left:1,right:1,center:1}[t]?t:"none"):"none"},queryCommandState:function(){var e,t=this.selection.getRange();return t.collapsed?-1:(e=t.getClosedNode())&&1==e.nodeType&&"IMG"==e.tagName?0:-1}},UE.commands.insertimage={execCommand:function(e,t){if((t=utils.isArray(t)?t:[t]).length){var i=this.selection.getRange(),n=i.getClosedNode();if(!0!==this.fireEvent("beforeinsertimage",t)){if(!n||!/img/i.test(n.tagName)||"edui-faked-video"==n.className&&-1==n.className.indexOf("edui-upload-video")||n.getAttribute("word_img")){var o,a=[],r="";if(o=t[0],1==t.length)r='<img src="'+o.src+'" '+(o._src?' _src="'+o._src+'" ':"")+(o.width?'width="'+o.width+'" ':"")+(o.height?' height="'+o.height+'" ':"")+("left"==o.floatStyle||"right"==o.floatStyle?' style="float:'+o.floatStyle+';"':"")+(o.title&&""!=o.title?' title="'+o.title+'"':"")+(o.border&&"0"!=o.border?' border="'+o.border+'"':"")+(o.alt&&""!=o.alt?' alt="'+o.alt+'"':"")+(o.hspace&&"0"!=o.hspace?' hspace = "'+o.hspace+'"':"")+(o.vspace&&"0"!=o.vspace?' vspace = "'+o.vspace+'"':"")+"/>","center"==o.floatStyle&&(r='<p style="text-align: center">'+r+"</p>"),a.push(r);else for(var s=0;o=t[s++];)r="<p "+("center"==o.floatStyle?'style="text-align: center" ':"")+'><img src="'+o.src+'" '+(o.width?'width="'+o.width+'" ':"")+(o._src?' _src="'+o._src+'" ':"")+(o.height?' height="'+o.height+'" ':"")+' style="'+(o.floatStyle&&"center"!=o.floatStyle?"float:"+o.floatStyle+";":"")+(o.border||"")+'" '+(o.title?' title="'+o.title+'"':"")+" /></p>",a.push(r);this.execCommand("insertHtml",a.join(""))}else{var l=t.shift(),d=l.floatStyle;delete l.floatStyle,domUtils.setAttributes(n,l),this.execCommand("imagefloat",d),0<t.length&&(i.setStartAfter(n).setCursor(!1,!0),this.execCommand("insertimage",t))}this.fireEvent("afterinsertimage",t)}}}},UE.plugins.justify=function(){var u=domUtils.isBlockElm,i={left:1,right:1,center:1,justify:1};UE.commands.justify={execCommand:function(e,t){var i,n=this.selection.getRange();return n.collapsed&&(i=this.document.createTextNode("p"),n.insertNode(i)),function(e,t){var i=e.createBookmark(),n=function(e){return 1==e.nodeType?"br"!=e.tagName.toLowerCase()&&!domUtils.isBookmarkNode(e):!domUtils.isWhitespace(e)};e.enlarge(!0);for(var o,a=e.createBookmark(),r=domUtils.getNextDomNode(a.start,!1,n),s=e.cloneRange();r&&!(domUtils.getPosition(r,a.end)&domUtils.POSITION_FOLLOWING);)if(3!=r.nodeType&&u(r))r=domUtils.getNextDomNode(r,!0,n);else{for(s.setStartBefore(r);r&&r!==a.end&&!u(r);)o=r,r=domUtils.getNextDomNode(r,!1,null,function(e){return!u(e)});s.setEndAfter(o);var l=s.getCommonAncestor();if(!domUtils.isBody(l)&&u(l))domUtils.setStyles(l,utils.isString(t)?{"text-align":t}:t),r=l;else{var d=e.document.createElement("p");domUtils.setStyles(d,utils.isString(t)?{"text-align":t}:t);var c=s.extractContents();d.appendChild(c),s.insertNode(d),r=d}r=domUtils.getNextDomNode(r,!1,n)}e.moveToBookmark(a).moveToBookmark(i)}(n,t),i&&(n.setStartBefore(i).collapse(!0),domUtils.remove(i)),n.select(),!0},queryCommandValue:function(){var e=this.selection.getStart(),t=domUtils.getComputedStyle(e,"text-align");return i[t]?t:"left"},queryCommandState:function(){var e=this.selection.getStart();return e&&domUtils.findParentByTagName(e,["td","th","caption"],!0)?-1:0}}},UE.plugins.font=function(){function l(e,n,o){var t,i=e.collapsed,a=e.createBookmark();if(i)for(t=a.start.parentNode;dtd.$inline[t.tagName];)t=t.parentNode;else t=domUtils.getCommonAncestor(a.start,a.end);utils.each(domUtils.getElementsByTagName(t,"span"),function(e){if(e.parentNode&&!domUtils.isBookmarkNode(e)){if(/\s*border\s*:\s*none;?\s*/i.test(e.style.cssText))return void(/^\s*border\s*:\s*none;?\s*$/.test(e.style.cssText)?domUtils.remove(e,!0):domUtils.removeStyle(e,"border"));if(/border/i.test(e.style.cssText)&&"SPAN"==e.parentNode.tagName&&/border/i.test(e.parentNode.style.cssText)&&(e.style.cssText=e.style.cssText.replace(/border[^:]*:[^;]+;?/gi,"")),"fontborder"!=n||"none"!=o)for(var t=e.nextSibling;t&&1==t.nodeType&&"SPAN"==t.tagName;)if(domUtils.isBookmarkNode(t)&&"fontborder"==n)e.appendChild(t),t=e.nextSibling;else{if(t.style.cssText==e.style.cssText&&(domUtils.moveChild(t,e),domUtils.remove(t)),e.nextSibling===t)break;t=e.nextSibling}if(function(e){for(var t;(t=e.parentNode)&&"SPAN"==t.tagName&&1==domUtils.getChildCount(t,function(e){return!domUtils.isBookmarkNode(e)&&!domUtils.isBr(e)});)t.style.cssText+=e.style.cssText,domUtils.remove(e,!0),e=t}(e),browser.ie&&8<browser.version){var i=domUtils.findParent(e,function(e){return"SPAN"==e.tagName&&/background-color/.test(e.style.cssText)});i&&!/background-color/.test(e.style.cssText)&&(e.style.backgroundColor=i.style.backgroundColor)}}}),e.moveToBookmark(a),function(e,t,i){if(r[t]&&(e.adjustmentBoundary(),!e.collapsed&&1==e.startContainer.nodeType)){var n=e.startContainer.childNodes[e.startOffset];if(n&&domUtils.isTagNode(n,"span")){var o=e.createBookmark();utils.each(domUtils.getElementsByTagName(n,"span"),function(e){e.parentNode&&!domUtils.isBookmarkNode(e)&&("backcolor"==t&&domUtils.getComputedStyle(e,"background-color").toLowerCase()===i||(domUtils.removeStyle(e,r[t]),0==e.style.cssText.replace(/^\s+$/,"").length&&domUtils.remove(e,!0)))}),e.moveToBookmark(o)}}}(e,n,o)}var e={forecolor:"color",backcolor:"background-color",fontsize:"font-size",fontfamily:"font-family",underline:"text-decoration",strikethrough:"text-decoration",fontborder:"border"},d={underline:1,strikethrough:1,fontborder:1},r={forecolor:"color",backcolor:"background-color",fontsize:"font-size",fontfamily:"font-family"};for(var t in this.setOpt({fontfamily:[{name:"songti",val:"宋体,SimSun"},{name:"yahei",val:"微软雅黑,Microsoft YaHei"},{name:"kaiti",val:"楷体,楷体_GB2312, SimKai"},{name:"heiti",val:"黑体, SimHei"},{name:"lishu",val:"隶书, SimLi"},{name:"andaleMono",val:"andale mono"},{name:"arial",val:"arial, helvetica,sans-serif"},{name:"arialBlack",val:"arial black,avant garde"},{name:"comicSansMs",val:"comic sans ms"},{name:"impact",val:"impact,chicago"},{name:"timesNewRoman",val:"times new roman"}],fontsize:[10,11,12,14,16,18,20,24,36]}),this.addInputRule(function(e){utils.each(e.getNodesByTagName("u s del font strike"),function(e){if("font"==e.tagName){var t=[];for(var i in e.attrs)switch(i){case"size":t.push("font-size:"+({1:"10",2:"12",3:"16",4:"18",5:"24",6:"32",7:"48"}[e.attrs[i]]||e.attrs[i])+"px");break;case"color":t.push("color:"+e.attrs[i]);break;case"face":t.push("font-family:"+e.attrs[i]);break;case"style":t.push(e.attrs[i])}e.attrs={style:t.join(";")}}else{var n="u"==e.tagName?"underline":"line-through";e.attrs={style:(e.getAttr("style")||"")+"text-decoration:"+n+";"}}e.tagName="span"})}),e)!function(r,s){UE.commands[r]={execCommand:function(e,t){t=t||(this.queryCommandState(e)?"none":"underline"==e?"underline":"fontborder"==e?"1px solid #000":"line-through");var i,n=this.selection.getRange();if("default"==t)n.collapsed&&(i=this.document.createTextNode("font"),n.insertNode(i).select()),this.execCommand("removeFormat","span,a",s),i&&(n.setStartBefore(i).collapse(!0),domUtils.remove(i)),l(n,e,t),n.select();else if(n.collapsed){var o=domUtils.findParentByTagName(n.startContainer,"span",!0);if(i=this.document.createTextNode("font"),!o||o.children.length||o[browser.ie?"innerText":"textContent"].replace(fillCharReg,"").length){if(n.insertNode(i),n.selectNode(i).select(),o=n.document.createElement("span"),d[r]){if(domUtils.findParentByTagName(i,"a",!0))return n.setStartBefore(i).setCursor(),void domUtils.remove(i);this.execCommand("removeFormat","span,a",s)}if(o.style.cssText=s+":"+t,i.parentNode.insertBefore(o,i),!browser.ie||browser.ie&&9==browser.version)for(var a=o.parentNode;!domUtils.isBlockElm(a);)"SPAN"==a.tagName&&(o.style.cssText=a.style.cssText+";"+o.style.cssText),a=a.parentNode;opera?setTimeout(function(){n.setStart(o,0).collapse(!0),l(n,e,t),n.select()}):(n.setStart(o,0).collapse(!0),l(n,e,t),n.select())}else n.insertNode(i),d[r]&&(n.selectNode(i).select(),this.execCommand("removeFormat","span,a",s,null),o=domUtils.findParentByTagName(i,"span",!0),n.setStartBefore(i)),o&&(o.style.cssText+=";"+s+":"+t),n.collapse(!0).select();domUtils.remove(i)}else d[r]&&this.queryCommandValue(r)&&this.execCommand("removeFormat","span,a",s),(n=this.selection.getRange()).applyInlineStyle("span",{style:s+":"+t}),l(n,e,t),n.select();return!0},queryCommandValue:function(e){var t=this.selection.getStart();if("underline"==e||"strikethrough"==e){for(var i,n=t;n&&!domUtils.isBlockElm(n)&&!domUtils.isBody(n);){if(1==n.nodeType&&"none"!=(i=domUtils.getComputedStyle(n,s)))return i;n=n.parentNode}return"none"}if("fontborder"==e){for(var o,a=t;a&&dtd.$inline[a.tagName];){if((o=domUtils.getComputedStyle(a,"border"))&&/1px/.test(o)&&/solid/.test(o))return o;a=a.parentNode}return""}if("FontSize"!=e)return domUtils.getComputedStyle(t,s);var r=domUtils.getComputedStyle(t,s);return(a=/^([\d\.]+)(\w+)$/.exec(r))?Math.floor(a[1])+a[2]:r},queryCommandState:function(e){if(!d[e])return 0;var t=this.queryCommandValue(e);return"fontborder"==e?/1px/.test(t)&&/solid/.test(t):"underline"==e?/underline/.test(t):/line\-through/.test(t)}}}(t,e[t])},UE.plugins.link=function(){function l(e){var t=e.startContainer,i=e.endContainer;(t=domUtils.findParentByTagName(t,"a",!0))&&e.setStartBefore(t),(i=domUtils.findParentByTagName(i,"a",!0))&&e.setEndAfter(i)}UE.commands.unlink={execCommand:function(){var e,t=this.selection.getRange();t.collapsed&&!domUtils.findParentByTagName(t.startContainer,"a",!0)||(e=t.createBookmark(),l(t),t.removeInlineStyle("a").moveToBookmark(e).select())},queryCommandState:function(){return!this.highlight&&this.queryCommandValue("link")?0:-1}},UE.commands.link={execCommand:function(e,t){var i;t._href&&(t._href=utils.unhtml(t._href,/[<">]/g)),t.href&&(t.href=utils.unhtml(t.href,/[<">]/g)),t.textValue&&(t.textValue=utils.unhtml(t.textValue,/[<">]/g)),function(e,t,i){var n=e.cloneRange(),o=i.queryCommandValue("link");l(e=e.adjustmentBoundary());var a=e.startContainer;if(1==a.nodeType&&o&&(a=a.childNodes[e.startOffset])&&1==a.nodeType&&"A"==a.tagName&&/^(?:https?|ftp|file)\s*:\s*\/\//.test(a[browser.ie?"innerText":"textContent"])&&(a[browser.ie?"innerText":"textContent"]=utils.html(t.textValue||t.href)),n.collapsed&&!o||(e.removeInlineStyle("a"),n=e.cloneRange()),n.collapsed){var r=e.document.createElement("a"),s="";t.textValue?(s=utils.html(t.textValue),delete t.textValue):s=utils.html(t.href),domUtils.setAttributes(r,t),(a=domUtils.findParentByTagName(n.startContainer,"a",!0))&&domUtils.isInNodeEndBoundary(n,a)&&e.setStartAfter(a).collapse(!0),r[browser.ie?"innerText":"textContent"]=s,e.insertNode(r).selectNode(r)}else e.applyInlineStyle("a",t)}(i=this.selection.getRange(),t,this),i.collapse().select(!0)},queryCommandValue:function(){var e,t=this.selection.getRange();if(!t.collapsed){t.shrinkBoundary();var i=3!=t.startContainer.nodeType&&t.startContainer.childNodes[t.startOffset]?t.startContainer.childNodes[t.startOffset]:t.startContainer,n=3==t.endContainer.nodeType||0==t.endOffset?t.endContainer:t.endContainer.childNodes[t.endOffset-1],o=t.getCommonAncestor();if(!(e=domUtils.findParentByTagName(o,"a",!0))&&1==o.nodeType)for(var a,r,s,l=o.getElementsByTagName("a"),d=0;s=l[d++];)if(a=domUtils.getPosition(s,i),r=domUtils.getPosition(s,n),(a&domUtils.POSITION_FOLLOWING||a&domUtils.POSITION_CONTAINS)&&(r&domUtils.POSITION_PRECEDING||r&domUtils.POSITION_CONTAINS)){e=s;break}return e}if((e=1==(e=t.startContainer).nodeType?e:e.parentNode)&&(e=domUtils.findParentByTagName(e,"a",!0))&&!domUtils.isInNodeEndBoundary(t,e))return e},queryCommandState:function(){var e=this.selection.getRange().getClosedNode();return e&&("edui-faked-video"==e.className||-1!=e.className.indexOf("edui-upload-video"))?-1:0}}},UE.plugins.insertframe=function(){var e=this;e.addListener("selectionchange",function(){e._iframe&&delete e._iframe})},UE.commands.scrawl={queryCommandState:function(){return browser.ie&&browser.version<=8?-1:0}},UE.plugins.removeformat=function(){this.setOpt({removeFormatTags:"b,big,code,del,dfn,em,font,i,ins,kbd,q,samp,small,span,strike,strong,sub,sup,tt,u,var",removeFormatAttributes:"class,style,lang,width,height,align,hspace,valign"}),this.commands.removeformat={execCommand:function(e,t,d,i,c){function u(e){if(3==e.nodeType||"span"!=e.tagName.toLowerCase())return 0;if(browser.ie){var t=e.attributes;if(t.length){for(var i=0,n=t.length;i<n;i++)if(t[i].specified)return 0;return 1}}return!e.attributes.length}var h,f,p=new RegExp("^(?:"+(t||this.options.removeFormatTags).replace(/,/g,"|")+")$","i"),m=d?[]:(i||this.options.removeFormatAttributes).split(","),n=new dom.Range(this.document),g=function(e){return 1==e.nodeType};(function(e){var t=e.createBookmark();if(e.collapsed&&e.enlarge(!0),!c){var i=domUtils.findParentByTagName(e.startContainer,"a",!0);i&&e.setStartBefore(i),(i=domUtils.findParentByTagName(e.endContainer,"a",!0))&&e.setEndAfter(i)}for(s=(h=e.createBookmark()).start;(f=s.parentNode)&&!domUtils.isBlockElm(f);)domUtils.breakParent(s,f),domUtils.clearEmptySibling(s);if(h.end){for(s=h.end;(f=s.parentNode)&&!domUtils.isBlockElm(f);)domUtils.breakParent(s,f),domUtils.clearEmptySibling(s);for(var n,o=domUtils.getNextDomNode(h.start,!1,g);o&&o!=h.end;)n=domUtils.getNextDomNode(o,!0,g),dtd.$empty[o.tagName.toLowerCase()]||domUtils.isBookmarkNode(o)||(p.test(o.tagName)?d?(domUtils.removeStyle(o,d),u(o)&&"text-decoration"!=d&&domUtils.remove(o,!0)):domUtils.remove(o,!0):dtd.$tableContent[o.tagName]||dtd.$list[o.tagName]||(domUtils.removeAttributes(o,m),u(o)&&domUtils.remove(o,!0))),o=n}var a=h.start.parentNode;!domUtils.isBlockElm(a)||dtd.$tableContent[a.tagName]||dtd.$list[a.tagName]||domUtils.removeAttributes(a,m),a=h.end.parentNode,h.end&&domUtils.isBlockElm(a)&&!dtd.$tableContent[a.tagName]&&!dtd.$list[a.tagName]&&domUtils.removeAttributes(a,m),e.moveToBookmark(h).moveToBookmark(t);for(var r,s=e.startContainer,l=e.collapsed;1==s.nodeType&&domUtils.isEmptyNode(s)&&dtd.$removeEmpty[s.tagName];)r=s.parentNode,e.setStartBefore(s),e.startContainer===e.endContainer&&e.endOffset--,domUtils.remove(s),s=r;if(!l)for(s=e.endContainer;1==s.nodeType&&domUtils.isEmptyNode(s)&&dtd.$removeEmpty[s.tagName];)r=s.parentNode,e.setEndBefore(s),domUtils.remove(s),s=r})(n=this.selection.getRange()),n.select()}}},UE.plugins.blockquote=function(){function b(e){return domUtils.filterNodeList(e.selection.getStartElementPath(),"blockquote")}this.commands.blockquote={execCommand:function(e,t){var i=this.selection.getRange(),n=b(this),o=dtd.blockquote,a=i.createBookmark();if(n){var r=i.startContainer,s=domUtils.isBlockElm(r)?r:domUtils.findParent(r,function(e){return domUtils.isBlockElm(e)}),l=i.endContainer,d=domUtils.isBlockElm(l)?l:domUtils.findParent(l,function(e){return domUtils.isBlockElm(e)});s=domUtils.findParentByTagName(s,"li",!0)||s,d=domUtils.findParentByTagName(d,"li",!0)||d,"LI"==s.tagName||"TD"==s.tagName||s===n||domUtils.isBody(s)?domUtils.remove(n,!0):domUtils.breakParent(s,n),s!==d&&((n=domUtils.findParentByTagName(d,"blockquote"))&&("LI"==d.tagName||"TD"==d.tagName||domUtils.isBody(d)?n.parentNode&&domUtils.remove(n,!0):domUtils.breakParent(d,n)));for(var c,u=domUtils.getElementsByTagName(this.document,"blockquote"),h=0;c=u[h++];)c.childNodes.length?domUtils.getPosition(c,s)&domUtils.POSITION_FOLLOWING&&domUtils.getPosition(c,d)&domUtils.POSITION_PRECEDING&&domUtils.remove(c,!0):domUtils.remove(c)}else{for(var f=i.cloneRange(),p=1==f.startContainer.nodeType?f.startContainer:f.startContainer.parentNode,m=p,g=1;;){if(domUtils.isBody(p)){m!==p?i.collapsed?(f.selectNode(m),g=0):f.setStartBefore(m):f.setStart(p,0);break}if(!o[p.tagName]){i.collapsed?f.selectNode(m):f.setStartBefore(m);break}p=(m=p).parentNode}if(g)for(m=p=p=1==f.endContainer.nodeType?f.endContainer:f.endContainer.parentNode;;){if(domUtils.isBody(p)){m!==p?f.setEndAfter(m):f.setEnd(p,p.childNodes.length);break}if(!o[p.tagName]){f.setEndAfter(m);break}p=(m=p).parentNode}p=i.document.createElement("blockquote"),domUtils.setAttributes(p,t),p.appendChild(f.extractContents()),f.insertNode(p);var v,y=domUtils.getElementsByTagName(p,"blockquote");for(h=0;v=y[h++];)v.parentNode&&domUtils.remove(v,!0)}i.moveToBookmark(a).select()},queryCommandState:function(){return b(this)?1:0}}},UE.commands.touppercase=UE.commands.tolowercase={execCommand:function(e){var t=this.selection.getRange();if(t.collapsed)return t;for(var i=t.createBookmark(),n=i.end,o=function(e){return!domUtils.isBr(e)&&!domUtils.isWhitespace(e)},a=domUtils.getNextDomNode(i.start,!1,o);a&&domUtils.getPosition(a,n)&domUtils.POSITION_PRECEDING&&(3==a.nodeType&&(a.nodeValue=a.nodeValue["touppercase"==e?"toUpperCase":"toLowerCase"]()),(a=domUtils.getNextDomNode(a,!0,o))!==n););t.moveToBookmark(i).select()}},UE.commands.indent={execCommand:function(){var e=this.queryCommandState("indent")?"0em":this.options.indentValue||"2em";this.execCommand("Paragraph","p",{style:"text-indent:"+e})},queryCommandState:function(){var e=domUtils.filterNodeList(this.selection.getStartElementPath(),"p h1 h2 h3 h4 h5 h6");return e&&e.style.textIndent&&parseInt(e.style.textIndent)?1:0}},UE.commands.print={execCommand:function(){this.window.print()},notNeedUndo:1},UE.commands.preview={execCommand:function(){var e=window.open("","_blank","").document;e.open(),e.write('<!DOCTYPE html><html><head><meta charset="utf-8"/><script src="'+this.options.UEDITOR_HOME_URL+"ueditor.parse.js\"><\/script><script>setTimeout(function(){uParse('div',{rootPath: '"+this.options.UEDITOR_HOME_URL+"'})},300)<\/script></head><body><div>"+this.getContent(null,null,!0)+"</div></body></html>"),e.close()},notNeedUndo:1},UE.plugins.selectall=function(){this.commands.selectall={execCommand:function(){var e=this.body,t=this.selection.getRange();t.selectNodeContents(e),domUtils.isEmptyBlock(e)&&(browser.opera&&e.firstChild&&1==e.firstChild.nodeType&&t.setStartAtFirst(e.firstChild),t.collapse(!0)),t.select(!0)},notNeedUndo:1},this.addshortcutkey({selectAll:"ctrl+65"})},UE.plugins.paragraph=function(){var h=domUtils.isBlockElm,f=["TD","LI","PRE"];this.setOpt("paragraph",{p:"",h1:"",h2:"",h3:"",h4:"",h5:"",h6:""}),this.commands.paragraph={execCommand:function(e,t,i,n){var o=this.selection.getRange();if(o.collapsed){var a=this.document.createTextNode("p");if(o.insertNode(a),browser.ie){var r=a.previousSibling;r&&domUtils.isWhitespace(r)&&domUtils.remove(r),(r=a.nextSibling)&&domUtils.isWhitespace(r)&&domUtils.remove(r)}}if(o=function(e,t,i,n){var o,a=e.createBookmark(),r=function(e){return 1==e.nodeType?"br"!=e.tagName.toLowerCase()&&!domUtils.isBookmarkNode(e):!domUtils.isWhitespace(e)};e.enlarge(!0);for(var s,l=e.createBookmark(),d=domUtils.getNextDomNode(l.start,!1,r),c=e.cloneRange();d&&!(domUtils.getPosition(d,l.end)&domUtils.POSITION_FOLLOWING);)if(3!=d.nodeType&&h(d))d=domUtils.getNextDomNode(d,!0,r);else{for(c.setStartBefore(d);d&&d!==l.end&&!h(d);)s=d,d=domUtils.getNextDomNode(d,!1,null,function(e){return!h(e)});c.setEndAfter(s),o=e.document.createElement(t),i&&(domUtils.setAttributes(o,i),n&&"customstyle"==n&&i.style&&(o.style.cssText=i.style)),o.appendChild(c.extractContents()),domUtils.isEmptyNode(o)&&domUtils.fillChar(e.document,o),c.insertNode(o);var u=o.parentNode;h(u)&&!domUtils.isBody(o.parentNode)&&-1==utils.indexOf(f,u.tagName)&&(n&&"customstyle"==n||(u.getAttribute("dir")&&o.setAttribute("dir",u.getAttribute("dir")),u.style.cssText&&(o.style.cssText=u.style.cssText+";"+o.style.cssText),u.style.textAlign&&!o.style.textAlign&&(o.style.textAlign=u.style.textAlign),u.style.textIndent&&!o.style.textIndent&&(o.style.textIndent=u.style.textIndent),u.style.padding&&!o.style.padding&&(o.style.padding=u.style.padding)),i&&/h\d/i.test(u.tagName)&&!/h\d/i.test(o.tagName)?(domUtils.setAttributes(u,i),n&&"customstyle"==n&&i.style&&(u.style.cssText=i.style),domUtils.remove(o.parentNode,!0),o=u):domUtils.remove(o.parentNode,!0)),d=-1!=utils.indexOf(f,u.tagName)?u:o,d=domUtils.getNextDomNode(d,!1,r)}return e.moveToBookmark(l).moveToBookmark(a)}(o,t,i,n),a&&(o.setStartBefore(a).collapse(!0),pN=a.parentNode,domUtils.remove(a),domUtils.isBlockElm(pN)&&domUtils.isEmptyNode(pN)&&domUtils.fillNode(this.document,pN)),browser.gecko&&o.collapsed&&1==o.startContainer.nodeType){var s=o.startContainer.childNodes[o.startOffset];s&&1==s.nodeType&&s.tagName.toLowerCase()==t&&o.setStart(s,0).collapse(!0)}return o.select(),!0},queryCommandValue:function(){var e=domUtils.filterNodeList(this.selection.getStartElementPath(),"p h1 h2 h3 h4 h5 h6");return e?e.tagName.toLowerCase():""}}},swg=domUtils.isBlockElm,twg=function(e){return domUtils.filterNodeList(e.selection.getStartElementPath(),function(e){return e&&1==e.nodeType&&e.getAttribute("dir")})},UE.commands.directionality={execCommand:function(e,t){var i=this.selection.getRange();if(i.collapsed){var n=this.document.createTextNode("d");i.insertNode(n)}return function(e,t,i){var n,o=function(e){return 1==e.nodeType?!domUtils.isBookmarkNode(e):!domUtils.isWhitespace(e)},a=twg(t);if(a&&e.collapsed)return a.setAttribute("dir",i);n=e.createBookmark(),e.enlarge(!0);for(var r,s=e.createBookmark(),l=domUtils.getNextDomNode(s.start,!1,o),d=e.cloneRange();l&&!(domUtils.getPosition(l,s.end)&domUtils.POSITION_FOLLOWING);)if(3!=l.nodeType&&swg(l))l=domUtils.getNextDomNode(l,!0,o);else{for(d.setStartBefore(l);l&&l!==s.end&&!swg(l);)r=l,l=domUtils.getNextDomNode(l,!1,null,function(e){return!swg(e)});d.setEndAfter(r);var c=d.getCommonAncestor();if(!domUtils.isBody(c)&&swg(c))c.setAttribute("dir",i),l=c;else{var u=e.document.createElement("p");u.setAttribute("dir",i);var h=d.extractContents();u.appendChild(h),d.insertNode(u),l=u}l=domUtils.getNextDomNode(l,!1,o)}e.moveToBookmark(s).moveToBookmark(n)}(i,this,t),n&&(i.setStartBefore(n).collapse(!0),domUtils.remove(n)),i.select(),!0},queryCommandValue:function(){var e=twg(this);return e?e.getAttribute("dir"):"ltr"}},UE.plugins.horizontal=function(){this.commands.horizontal={execCommand:function(e){if(-1!==this.queryCommandState(e)){this.execCommand("insertHtml","<hr>");var t,i=this.selection.getRange(),n=i.startContainer;if(1==n.nodeType&&!n.childNodes[i.startOffset])(t=n.childNodes[i.startOffset-1])&&1==t.nodeType&&"HR"==t.tagName&&("p"==this.options.enterTag?(t=this.document.createElement("p"),i.insertNode(t),i.setStart(t,0).setCursor()):(t=this.document.createElement("br"),i.insertNode(t),i.setStartBefore(t).setCursor()));return!0}},queryCommandState:function(){return domUtils.filterNodeList(this.selection.getStartElementPath(),"table")?-1:0}},this.addListener("delkeydown",function(e,t){var i=this.selection.getRange();if(i.txtToElmBoundary(!0),domUtils.isStartInblock(i)){var n=i.startContainer.previousSibling;if(n&&domUtils.isTagNode(n,"hr"))return domUtils.remove(n),i.select(),domUtils.preventDefault(t),!0}})},UE.commands.time=UE.commands.date={execCommand:function(e,t){var i,n,o,a,r,s,l,d,c,u,h,f=new Date;this.execCommand("insertHtml","time"==e?(d=t,c=("0"+(l=f).getHours()).slice(-2),u=("0"+l.getMinutes()).slice(-2),h=("0"+l.getSeconds()).slice(-2),(d=d||"hh:ii:ss").replace(/hh/gi,c).replace(/ii/gi,u).replace(/ss/gi,h)):(n=t,o=("000"+(i=f).getFullYear()).slice(-4),a=o.slice(-2),r=("0"+(i.getMonth()+1)).slice(-2),s=("0"+i.getDate()).slice(-2),(n=n||"yyyy-mm-dd").replace(/yyyy/gi,o).replace(/yy/gi,a).replace(/mm/gi,r).replace(/dd/gi,s)))}},UE.plugins.rowspacing=function(){this.setOpt({rowspacingtop:["5","10","15","20","25"],rowspacingbottom:["5","10","15","20","25"]}),this.commands.rowspacing={execCommand:function(e,t,i){return this.execCommand("paragraph","p",{style:"margin-"+i+":"+t+"px"}),!0},queryCommandValue:function(e,t){var i=domUtils.filterNodeList(this.selection.getStartElementPath(),function(e){return domUtils.isBlockElm(e)});return i?domUtils.getComputedStyle(i,"margin-"+t).replace(/[^\d]/g,"")||0:0}}},UE.plugins.lineheight=function(){this.setOpt({lineheight:["1","1.5","1.75","2","3","4","5"]}),this.commands.lineheight={execCommand:function(e,t){return this.execCommand("paragraph","p",{style:"line-height:"+("1"==t?"normal":t+"em")}),!0},queryCommandValue:function(){var e=domUtils.filterNodeList(this.selection.getStartElementPath(),function(e){return domUtils.isBlockElm(e)});if(e){var t=domUtils.getComputedStyle(e,"line-height");return"normal"==t?1:t.replace(/[^\d.]*/gi,"")}}}},UE.plugins.insertcode=function(){var d=this;d.ready(function(){utils.cssRule("pre","pre{margin:.5em 0;padding:.4em .6em;border-radius:8px;background:#f8f8f8;}",d.document)}),d.setOpt("insertcode",{as3:"ActionScript3",bash:"Bash/Shell",cpp:"C/C++",css:"Css",cf:"CodeFunction","c#":"C#",delphi:"Delphi",diff:"Diff",erlang:"Erlang",groovy:"Groovy",html:"Html",java:"Java",jfx:"JavaFx",js:"Javascript",pl:"Perl",php:"Php",plain:"Plain Text",ps:"PowerShell",python:"Python",ruby:"Ruby",scala:"Scala",sql:"Sql",vb:"Vb",xml:"Xml"}),d.commands.insertcode={execCommand:function(e,t){var i=this.selection.getRange(),n=domUtils.findParentByTagName(i.startContainer,"pre",!0);if(n)n.className="brush:"+t+";toolbar:false;";else{var o="";if(i.collapsed)o=browser.ie&&browser.ie11below?browser.version<=8?"&nbsp;":"":"<br/>";else{var a=i.extractContents(),r=this.document.createElement("div");r.appendChild(a),utils.each(UE.filterNode(UE.htmlparser(r.innerHTML.replace(/[\r\t]/g,"")),this.options.filterTxtRules).children,function(t){if(browser.ie&&browser.ie11below&&8<browser.version)"element"==t.type?"br"==t.tagName?o+="\n":dtd.$empty[t.tagName]||(utils.each(t.children,function(e){"element"==e.type?"br"==e.tagName?o+="\n":dtd.$empty[t.tagName]||(o+=e.innerText()):o+=e.data}),/\n$/.test(o)||(o+="\n")):o+=t.data+"\n",!t.nextSibling()&&/\n$/.test(o)&&(o=o.replace(/\n$/,""));else if(browser.ie&&browser.ie11below)"element"==t.type?"br"==t.tagName?o+="<br>":dtd.$empty[t.tagName]||(utils.each(t.children,function(e){"element"==e.type?"br"==e.tagName?o+="<br>":dtd.$empty[t.tagName]||(o+=e.innerText()):o+=e.data}),/br>$/.test(o)||(o+="<br>")):o+=t.data+"<br>",!t.nextSibling()&&/<br>$/.test(o)&&(o=o.replace(/<br>$/,""));else if(o+="element"==t.type?dtd.$empty[t.tagName]?"":t.innerText():t.data,!/br\/?\s*>$/.test(o)){if(!t.nextSibling())return;o+="<br>"}})}this.execCommand("inserthtml",'<pre id="coder"class="brush:'+t+';toolbar:false">'+o+"</pre>",!0),n=this.document.getElementById("coder"),domUtils.removeAttributes(n,"id");var s=n.previousSibling;s&&(3==s.nodeType&&1==s.nodeValue.length&&browser.ie&&6==browser.version||domUtils.isEmptyBlock(s))&&domUtils.remove(s);i=this.selection.getRange();domUtils.isEmptyBlock(n)?i.setStart(n,0).setCursor(!1,!0):i.selectNodeContents(n).select()}},queryCommandValue:function(){var e=this.selection.getStartElementPath(),i="";return utils.each(e,function(e){if("PRE"==e.nodeName){var t=e.className.match(/brush:([^;]+)/);return i=t&&t[1]?t[1]:"",!1}}),i}},d.addInputRule(function(e){utils.each(e.getNodesByTagName("pre"),function(t){var e=t.getNodesByTagName("br");if(e.length)browser.ie&&browser.ie11below&&8<browser.version&&utils.each(e,function(e){var t=UE.uNode.createText("\n");e.parentNode.insertBefore(t,e),e.parentNode.removeChild(e)});else if(!(browser.ie&&browser.ie11below&&8<browser.version)){var i=t.innerText().split(/\n/);t.innerHTML(""),utils.each(i,function(e){e.length&&t.appendChild(UE.uNode.createText(e)),t.appendChild(UE.uNode.createElement("br"))})}})}),d.addOutputRule(function(e){utils.each(e.getNodesByTagName("pre"),function(e){var t="";utils.each(e.children,function(e){t+="text"==e.type?e.data.replace(/[ ]/g,"&nbsp;").replace(/\n$/,""):"br"==e.tagName?"\n":dtd.$empty[e.tagName]?e.innerText():""}),e.innerText(t.replace(/(&nbsp;|\n)+$/,""))})}),d.notNeedCodeQuery={help:1,undo:1,redo:1,source:1,print:1,searchreplace:1,fullscreen:1,preview:1,insertparagraph:1,elementpath:1,insertcode:1,inserthtml:1,selectall:1},d.queryCommandState,d.queryCommandState=function(e){return!this.notNeedCodeQuery[e.toLowerCase()]&&this.selection&&this.queryCommandValue("insertcode")?-1:UE.Editor.prototype.queryCommandState.apply(this,arguments)},d.addListener("beforeenterkeydown",function(){var e=d.selection.getRange();if(t=domUtils.findParentByTagName(e.startContainer,"pre",!0)){if(d.fireEvent("saveScene"),e.collapsed||e.deleteContents(),!browser.ie||browser.ie9above){var t,i=d.document.createElement("br");for(e.insertNode(i).setStartAfter(i).collapse(!0),i.nextSibling||browser.ie&&!(10<browser.version)?e.setStartAfter(i):e.insertNode(i.cloneNode(!1)),t=i.previousSibling;t;)if(!(t=(s=t).previousSibling)||"BR"==t.nodeName){t=s;break}if(t){for(var n="";t&&"BR"!=t.nodeName&&new RegExp("^[\\s"+domUtils.fillChar+"]*$").test(t.nodeValue);)n+=t.nodeValue,t=t.nextSibling;if("BR"!=t.nodeName)(l=t.nodeValue.match(new RegExp("^([\\s"+domUtils.fillChar+"]+)")))&&l[1]&&(n+=l[1]);n&&(n=d.document.createTextNode(n),e.insertNode(n).setStartAfter(n))}e.collapse(!0).select(!0)}else if(8<browser.version){var o=d.document.createTextNode("\n"),a=e.startContainer;if(0==e.startOffset){if(a.previousSibling){e.insertNode(o);var r=d.document.createTextNode(" ");e.setStartAfter(o).insertNode(r).setStart(r,0).collapse(!0).select(!0)}}else{e.insertNode(o).setStartAfter(o);r=d.document.createTextNode(" ");(a=e.startContainer.childNodes[e.startOffset])&&!/^\n/.test(a.nodeValue)&&e.setStartBefore(o),e.insertNode(r).setStart(r,0).collapse(!0).select(!0)}}else{var s;i=d.document.createElement("br");for(e.insertNode(i),e.insertNode(d.document.createTextNode(domUtils.fillChar)),e.setStartAfter(i),t=i.previousSibling;t;)if(!(t=(s=t).previousSibling)||"BR"==t.nodeName){t=s;break}if(t){for(n="";t&&"BR"!=t.nodeName&&new RegExp("^[ "+domUtils.fillChar+"]*$").test(t.nodeValue);)n+=t.nodeValue,t=t.nextSibling;var l;if("BR"!=t.nodeName)(l=t.nodeValue.match(new RegExp("^([ "+domUtils.fillChar+"]+)")))&&l[1]&&(n+=l[1]);n=d.document.createTextNode(n),e.insertNode(n).setStartAfter(n)}e.collapse(!0).select()}return d.fireEvent("saveScene"),!0}}),d.addListener("tabkeydown",function(e,t){var i=d.selection.getRange(),n=domUtils.findParentByTagName(i.startContainer,"pre",!0);if(n){if(d.fireEvent("saveScene"),t.shiftKey);else if(i.collapsed){var o=d.document.createTextNode("    ");i.insertNode(o).setStartAfter(o).collapse(!0).select(!0)}else{for(var a=i.createBookmark(),r=a.start.previousSibling;r;){if(n.firstChild===r&&!domUtils.isBr(r)){n.insertBefore(d.document.createTextNode("    "),r);break}if(domUtils.isBr(r)){n.insertBefore(d.document.createTextNode("    "),r.nextSibling);break}r=r.previousSibling}var s=a.end;for(r=a.start.nextSibling,n.firstChild===a.start&&n.insertBefore(d.document.createTextNode("    "),r.nextSibling);r&&r!==s;){if(domUtils.isBr(r)&&r.nextSibling){if(r.nextSibling===s)break;n.insertBefore(d.document.createTextNode("    "),r.nextSibling)}r=r.nextSibling}i.moveToBookmark(a).select()}return d.fireEvent("saveScene"),!0}}),d.addListener("beforeinserthtml",function(e,t){var i=this,n=i.selection.getRange();if(domUtils.findParentByTagName(n.startContainer,"pre",!0)){n.collapsed||n.deleteContents();var o="";if(browser.ie&&8<browser.version){utils.each(UE.filterNode(UE.htmlparser(t),i.options.filterTxtRules).children,function(t){"element"==t.type?"br"==t.tagName?o+="\n":dtd.$empty[t.tagName]||(utils.each(t.children,function(e){"element"==e.type?"br"==e.tagName?o+="\n":dtd.$empty[t.tagName]||(o+=e.innerText()):o+=e.data}),/\n$/.test(o)||(o+="\n")):o+=t.data+"\n",!t.nextSibling()&&/\n$/.test(o)&&(o=o.replace(/\n$/,""))});var a=i.document.createTextNode(utils.html(o.replace(/&nbsp;/g," ")));n.insertNode(a).selectNode(a).select()}else{var r=i.document.createDocumentFragment();utils.each(UE.filterNode(UE.htmlparser(t),i.options.filterTxtRules).children,function(t){"element"==t.type?"br"==t.tagName?r.appendChild(i.document.createElement("br")):dtd.$empty[t.tagName]||(utils.each(t.children,function(e){"element"==e.type?"br"==e.tagName?r.appendChild(i.document.createElement("br")):dtd.$empty[t.tagName]||r.appendChild(i.document.createTextNode(utils.html(e.innerText().replace(/&nbsp;/g," ")))):r.appendChild(i.document.createTextNode(utils.html(e.data.replace(/&nbsp;/g," "))))}),"BR"!=r.lastChild.nodeName&&r.appendChild(i.document.createElement("br"))):r.appendChild(i.document.createTextNode(utils.html(t.data.replace(/&nbsp;/g," ")))),t.nextSibling()||"BR"!=r.lastChild.nodeName||r.removeChild(r.lastChild)}),n.insertNode(r).select()}return!0}}),d.addListener("keydown",function(e,t){if(40==(t.keyCode||t.which)){var i,n=this.selection.getRange(),o=n.startContainer;if(n.collapsed&&(i=domUtils.findParentByTagName(n.startContainer,"pre",!0))&&!i.nextSibling){for(var a=i.lastChild;a&&"BR"==a.nodeName;)a=a.previousSibling;(a===o||n.startContainer===i&&n.startOffset==i.childNodes.length)&&(this.execCommand("insertparagraph"),domUtils.preventDefault(t))}}}),d.addListener("delkeydown",function(e,t){var i=this.selection.getRange();i.txtToElmBoundary(!0);var n=i.startContainer;if(domUtils.isTagNode(n,"pre")&&i.collapsed&&domUtils.isStartInblock(i)){var o=d.document.createElement("p");return domUtils.fillNode(d.document,o),n.parentNode.insertBefore(o,n),domUtils.remove(n),i.setStart(o,0).setCursor(!1,!0),domUtils.preventDefault(t),!0}})},UE.commands.cleardoc={execCommand:function(e){var t=this,i=t.options.enterTag,n=t.selection.getRange();"br"==i?(t.body.innerHTML="<br/>",n.setStart(t.body,0).setCursor()):(t.body.innerHTML="<p>"+(ie?"":"<br/>")+"</p>",n.setStart(t.body.firstChild,0).setCursor(!1,!0)),setTimeout(function(){t.fireEvent("clearDoc")},0)}},UE.plugin.register("anchor",function(){return{bindEvents:{ready:function(){utils.cssRule("anchor",".anchorclass{background: url('"+this.options.themePath+this.options.theme+"/images/anchor.gif') no-repeat scroll left center transparent;cursor: auto;display: inline-block;height: 16px;width: 15px;}",this.document)}},outputRule:function(e){utils.each(e.getNodesByTagName("img"),function(e){var t;(t=e.getAttr("anchorname"))&&(e.tagName="a",e.setAttr({anchorname:"",name:t,class:""}))})},inputRule:function(e){utils.each(e.getNodesByTagName("a"),function(e){var t;if((t=e.getAttr("name"))&&!e.getAttr("href")){if(/^\_Toc\d+$/.test(t))return void e.parentNode.removeChild(e);e.tagName="img",e.setAttr({anchorname:e.getAttr("name"),class:"anchorclass"}),e.setAttr("name")}})},commands:{anchor:{execCommand:function(e,t){var i=this.selection.getRange(),n=i.getClosedNode();if(n&&n.getAttribute("anchorname"))t?n.setAttribute("anchorname",t):(i.setStartBefore(n).setCursor(),domUtils.remove(n));else if(t){var o=this.document.createElement("img");i.collapse(!0),domUtils.setAttributes(o,{anchorname:t,class:"anchorclass"}),i.insertNode(o).setStartAfter(o).setCursor(!1,!0)}}}}}}),UE.plugins.wordcount=function(){var i,e=this;e.setOpt("wordCount",!0),e.addListener("contentchange",function(){e.fireEvent("wordcount")}),e.addListener("ready",function(){var t=this;domUtils.on(t.body,"keyup",function(e){(e.keyCode||e.which)in{16:1,18:1,20:1,37:1,38:1,39:1,40:1}||(clearTimeout(i),i=setTimeout(function(){t.fireEvent("wordcount")},200))})})},UE.plugins.pagebreak=function(){function c(e){if(domUtils.isEmptyBlock(e)){for(var t,i=e.firstChild;i&&1==i.nodeType&&domUtils.isEmptyBlock(i);)i=(t=i).firstChild;!t&&(t=e),domUtils.fillNode(h.document,t)}}function u(e){return e&&1==e.nodeType&&"HR"==e.tagName&&"pagebreak"==e.className}var h=this,f=["td"];h.setOpt("pageBreakTag","_ueditor_page_break_tag_"),h.ready(function(){utils.cssRule("pagebreak",".pagebreak{display:block;clear:both !important;cursor:default !important;width: 100% !important;margin:0;}",h.document)}),h.addInputRule(function(e){e.traversal(function(e){if("text"==e.type&&e.data==h.options.pageBreakTag){var t=UE.uNode.createElement('<hr class="pagebreak" noshade="noshade" size="5" style="-webkit-user-select: none;">');e.parentNode.insertBefore(t,e),e.parentNode.removeChild(e)}})}),h.addOutputRule(function(e){utils.each(e.getNodesByTagName("hr"),function(e){if("pagebreak"==e.getAttr("class")){var t=UE.uNode.createText(h.options.pageBreakTag);e.parentNode.insertBefore(t,e),e.parentNode.removeChild(e)}})}),h.commands.pagebreak={execCommand:function(){var e=h.selection.getRange(),t=h.document.createElement("hr");domUtils.setAttributes(t,{class:"pagebreak",noshade:"noshade",size:"5"}),domUtils.unSelectable(t);var i=domUtils.findParentByTagName(e.startContainer,f,!0),n=[];if(i)switch(i.tagName){case"TD":if((s=i.parentNode).previousSibling)s.parentNode.insertBefore(t,s),n=domUtils.findParents(t);else{var o=domUtils.findParentByTagName(s,"table");o.parentNode.insertBefore(t,o),n=domUtils.findParents(t,!0)}t!==(s=n[1])&&domUtils.breakParent(t,s),h.fireEvent("afteradjusttable",h.document)}else{if(!e.collapsed){e.deleteContents();for(var a=e.startContainer;!domUtils.isBody(a)&&domUtils.isBlockElm(a)&&domUtils.isEmptyNode(a);)e.setStartBefore(a).collapse(!0),domUtils.remove(a),a=e.startContainer}e.insertNode(t);for(var r,s=t.parentNode;!domUtils.isBody(s);)domUtils.breakParent(t,s),(r=t.nextSibling)&&domUtils.isEmptyBlock(r)&&domUtils.remove(r),s=t.parentNode;r=t.nextSibling;var l=t.previousSibling;if(u(l)?domUtils.remove(l):l&&c(l),r)u(r)?domUtils.remove(r):c(r),e.setEndAfter(t).collapse(!1);else{var d=h.document.createElement("p");t.parentNode.appendChild(d),domUtils.fillNode(h.document,d),e.setStart(d,0).collapse(!0)}e.select(!0)}}}},UE.plugin.register("wordimage",function(){var a=this,i=[];return{commands:{wordimage:{execCommand:function(){for(var e,t=domUtils.getElementsByTagName(a.body,"img"),i=[],n=0;e=t[n++];){var o=e.getAttribute("word_img");o&&i.push(o)}return i},queryCommandState:function(){i=domUtils.getElementsByTagName(a.body,"img");for(var e,t=0;e=i[t++];)if(e.getAttribute("word_img"))return 1;return-1},notNeedUndo:!0}},inputRule:function(e){utils.each(e.getNodesByTagName("img"),function(e){var t=e.attrs,i=parseInt(t.width)<128||parseInt(t.height)<43,n=a.options,o=n.UEDITOR_HOME_URL+"themes/default/images/spacer.gif";t.src&&/^(?:(file:\/+))/.test(t.src)&&e.setAttr({width:t.width,height:t.height,alt:t.alt,word_img:t.src,src:o,style:"background:url("+(i?n.themePath+n.theme+"/images/word.gif":n.langPath+n.lang+"/images/localimage.png")+") no-repeat center center;border:1px solid #ddd"})})}}}),UE.plugins.dragdrop=function(){var o=this;o.ready(function(){domUtils.on(this.body,"dragend",function(){var e=o.selection.getRange(),t=e.getClosedNode()||o.selection.getStart();if(t&&"IMG"==t.tagName){for(var i,n=t.previousSibling;(i=t.nextSibling)&&1==i.nodeType&&"SPAN"==i.tagName&&!i.firstChild;)domUtils.remove(i);(!n||1!=n.nodeType||domUtils.isEmptyBlock(n))&&n||i&&(!i||domUtils.isEmptyBlock(i))||(n&&"P"==n.tagName&&!domUtils.isEmptyBlock(n)?(n.appendChild(t),domUtils.moveChild(i,n),domUtils.remove(i)):i&&"P"==i.tagName&&!domUtils.isEmptyBlock(i)&&i.insertBefore(t,i.firstChild),n&&"P"==n.tagName&&domUtils.isEmptyBlock(n)&&domUtils.remove(n),i&&"P"==i.tagName&&domUtils.isEmptyBlock(i)&&domUtils.remove(i),e.selectNode(t).select(),o.fireEvent("saveScene"))}})}),o.addListener("keyup",function(e,t){if(13==(t.keyCode||t.which)){var i,n=o.selection.getRange();(i=domUtils.findParentByTagName(n.startContainer,"p",!0))&&"center"==domUtils.getComputedStyle(i,"text-align")&&domUtils.removeStyle(i,"text-align")}})},UE.plugins.undo=function(){function r(e,t){if(e.length!=t.length)return 0;for(var i=0,n=e.length;i<n;i++)if(e[i]!=t[i])return 0;return 1}var s,l=this,d=l.options.maxUndoCount||20,a=l.options.maxInputCount||20,o=new RegExp(domUtils.fillChar+"|</hr>","gi"),c={ol:1,ul:1,table:1,tbody:1,tr:1,body:1},u=l.options.autoClearEmptyNode;l.undoManger=new function(){this.list=[],this.index=0,this.hasUndo=!1,this.hasRedo=!1,this.undo=function(){if(this.hasUndo){if(!this.list[this.index-1]&&1==this.list.length)return void this.reset();for(;this.list[this.index].content==this.list[this.index-1].content;)if(this.index--,0==this.index)return this.restore(0);this.restore(--this.index)}},this.redo=function(){if(this.hasRedo){for(;this.list[this.index].content==this.list[this.index+1].content;)if(this.index++,this.index==this.list.length-1)return this.restore(this.index);this.restore(++this.index)}},this.restore=function(){var t=this.editor,e=this.list[this.index],i=UE.htmlparser(e.content.replace(o,""));t.options.autoClearEmptyNode=!1,t.filterInputRule(i),t.options.autoClearEmptyNode=u,t.document.body.innerHTML=i.toHtml(),t.fireEvent("afterscencerestore"),browser.ie&&utils.each(domUtils.getElementsByTagName(t.document,"td th caption p"),function(e){domUtils.isEmptyNode(e)&&domUtils.fillNode(t.document,e)});try{var n=new dom.Range(t.document).moveToAddress(e.address);n.select(c[n.startContainer.nodeName.toLowerCase()])}catch(e){}this.update(),this.clearKey(),t.fireEvent("reset",!0)},this.getScene=function(){var e=this.editor,t=e.selection.getRange().createAddress(!1,!0);e.fireEvent("beforegetscene");var i=UE.htmlparser(e.body.innerHTML);e.options.autoClearEmptyNode=!1,e.filterOutputRule(i),e.options.autoClearEmptyNode=u;var n=i.toHtml();return e.fireEvent("aftergetscene"),{address:t,content:n}},this.save=function(e,t){clearTimeout(s);var i,n,o=this.getScene(t),a=this.list[this.index];a&&a.content!=o.content&&l.trigger("contentchange"),a&&a.content==o.content&&(e||(i=a.address,n=o.address,i.collapsed==n.collapsed&&r(i.startAddress,n.startAddress)&&r(i.endAddress,n.endAddress)))||(this.list=this.list.slice(0,this.index+1),this.list.push(o),this.list.length>d&&this.list.shift(),this.index=this.list.length-1,this.clearKey(),this.update())},this.update=function(){this.hasRedo=!!this.list[this.index+1],this.hasUndo=!!this.list[this.index-1]},this.reset=function(){this.list=[],this.index=0,this.hasUndo=!1,this.hasRedo=!1,this.clearKey()},this.clearKey=function(){f=0,null}},(l.undoManger.editor=l).addListener("saveScene",function(){var e=Array.prototype.splice.call(arguments,1);this.undoManger.save.apply(this.undoManger,e)}),l.addListener("reset",function(e,t){t||this.undoManger.reset()}),l.commands.redo=l.commands.undo={execCommand:function(e){this.undoManger[e]()},queryCommandState:function(e){return this.undoManger["has"+("undo"==e.toLowerCase()?"Undo":"Redo")]?0:-1},notNeedUndo:1};var h={16:1,17:1,18:1,37:1,38:1,39:1,40:1},f=0,p=!1;l.addListener("ready",function(){domUtils.on(this.body,"compositionstart",function(){p=!0}),domUtils.on(this.body,"compositionend",function(){p=!1})}),l.addshortcutkey({Undo:"ctrl+90",Redo:"ctrl+89"});var m=!0;l.addListener("keydown",function(e,t){function i(e){e.undoManger.save(!1,!0),e.fireEvent("selectionchange")}var n=this,o=t.keyCode||t.which;if(!(h[o]||t.ctrlKey||t.metaKey||t.shiftKey||t.altKey)){if(p)return;if(!n.selection.getRange().collapsed)return n.undoManger.save(!1,!0),void(m=!1);0==n.undoManger.list.length&&n.undoManger.save(!0),clearTimeout(s),s=setTimeout(function(){if(p)var e=setInterval(function(){p||(i(n),clearInterval(e))},300);else i(n)},200),o,a<=++f&&i(n)}}),l.addListener("keyup",function(e,t){var i=t.keyCode||t.which;if(!(h[i]||t.ctrlKey||t.metaKey||t.shiftKey||t.altKey)){if(p)return;m||(this.undoManger.save(!1,!0),m=!0)}}),l.stopCmdUndo=function(){l.__hasEnterExecCommand=!0},l.startCmdUndo=function(){l.__hasEnterExecCommand=!1}},UE.plugin.register("copy",function(){function e(){ZeroClipboard.config({debug:!1,swfPath:o.options.UEDITOR_HOME_URL+"third-party/zeroclipboard/ZeroClipboard.swf"});var e=o.zeroclipboard=new ZeroClipboard;e.on("copy",function(e){var t=e.client,i=o.selection.getRange(),n=document.createElement("div");n.appendChild(i.cloneContents()),t.setText(n.innerText||n.textContent),t.setHtml(n.innerHTML),i.select()}),e.on("mouseover mouseout",function(e){var t=e.target;t&&("mouseover"==e.type?domUtils.addClass(t,"edui-state-hover"):"mouseout"==e.type&&domUtils.removeClasses(t,"edui-state-hover"))}),e.on("wrongflash noflash",function(){ZeroClipboard.destroy()}),o.fireEvent("zeroclipboardready",e)}var o=this;return{bindEvents:{ready:function(){browser.ie||(window.ZeroClipboard?e():utils.loadFile(document,{src:o.options.UEDITOR_HOME_URL+"third-party/zeroclipboard/ZeroClipboard.js",tag:"script",type:"text/javascript",defer:"defer"},function(){e()}))}},commands:{copy:{execCommand:function(e){o.document.execCommand("copy")||alert(o.getLang("copymsg"))}}}}}),UE.plugins.paste=function(){function t(n){var o=this.document;if(!o.getElementById("baidu_pastebin")){var a=this.selection.getRange(),r=a.createBookmark(),s=o.createElement("div");s.id="baidu_pastebin",browser.webkit&&s.appendChild(o.createTextNode(domUtils.fillChar+domUtils.fillChar)),o.body.appendChild(s),r.start.style.display="",s.style.cssText="position:absolute;width:1px;height:1px;overflow:hidden;left:-1000px;white-space:nowrap;top:"+domUtils.getXY(r.start).y+"px",a.selectNodeContents(s).select(!0),setTimeout(function(){if(browser.webkit)for(var e,t=0,i=o.querySelectorAll("#baidu_pastebin");e=i[t++];){if(!domUtils.isEmptyNode(e)){s=e;break}domUtils.remove(e)}try{s.parentNode.removeChild(s)}catch(e){}a.moveToBookmark(r).select(!0),n(s)},0)}}function v(e){return e.replace(/<(\/?)([\w\-]+)([^>]*)>/gi,function(e,t,i,n){return{img:1}[i=i.toLowerCase()]?e:(n=n.replace(/([\w\-]*?)\s*=\s*(("([^"]*)")|('([^']*)')|([^\s>]+))/gi,function(e,t,i){return{src:1,href:1,name:1}[t.toLowerCase()]?t+"="+i+" ":""}),{span:1,div:1}[i]?"":"<"+t+i+" "+utils.trim(n)+">")})}function i(e){var t;if(e.firstChild){for(var i,n=domUtils.getElementsByTagName(e,"span"),o=0;i=n[o++];)"_baidu_cut_start"!=i.id&&"_baidu_cut_end"!=i.id||domUtils.remove(i);if(browser.webkit){var a,r=e.querySelectorAll("div br");for(o=0;a=r[o++];){var s=a.parentNode;"DIV"==s.tagName&&1==s.childNodes.length&&(s.innerHTML="<p><br/></p>",domUtils.remove(s))}var l,d=e.querySelectorAll("#baidu_pastebin");for(o=0;l=d[o++];){var c=w.document.createElement("p");for(l.parentNode.insertBefore(c,l);l.firstChild;)c.appendChild(l.firstChild);domUtils.remove(l)}var u=e.querySelectorAll("meta");for(o=0;f=u[o++];)domUtils.remove(f);r=e.querySelectorAll("br");for(o=0;f=r[o++];)/^apple-/i.test(f.className)&&domUtils.remove(f)}if(browser.gecko){var h=e.querySelectorAll("[_moz_dirty]");for(o=0;f=h[o++];)f.removeAttribute("_moz_dirty")}if(!browser.ie){var f,p=e.querySelectorAll("span.Apple-style-span");for(o=0;f=p[o++];)domUtils.remove(f,!0)}t=e.innerHTML,t=UE.filterWord(t);var m=UE.htmlparser(t);if(w.options.filterRules&&UE.filterNode(m,w.options.filterRules),w.filterInputRule(m),browser.webkit){var g=m.lastChild();g&&"element"==g.type&&"br"==g.tagName&&m.removeChild(g),utils.each(w.body.querySelectorAll("div"),function(e){domUtils.isEmptyBlock(e)&&domUtils.remove(e,!0)})}if(t={html:m.toHtml()},w.fireEvent("beforepaste",t,m),!t.html)return;m=UE.htmlparser(t.html,!0),1===w.queryCommandState("pasteplain")?w.execCommand("insertHtml",UE.filterNode(m,w.options.filterTxtRules).toHtml(),!0):(UE.filterNode(m,w.options.filterTxtRules),y=m.toHtml(),b=t.html,x=w.selection.getRange().createAddress(!0),w.execCommand("insertHtml",!0===w.getOpt("retainOnlyLabelPasted")?v(b):b,!0)),w.fireEvent("afterpaste",t)}}var y,b,x,w=this;w.setOpt({retainOnlyLabelPasted:!1}),w.addListener("pasteTransfer",function(e,t){if(x&&y&&b&&y!=b){var i=w.selection.getRange();if(i.moveToAddress(x,!0),!i.collapsed){for(;!domUtils.isBody(i.startContainer);){var n=i.startContainer;if(1==n.nodeType){if(!(n=n.childNodes[i.startOffset])){i.setStartBefore(i.startContainer);continue}var o=n.previousSibling;o&&3==o.nodeType&&new RegExp("^[\n\r\t "+domUtils.fillChar+"]*$").test(o.nodeValue)&&i.setStartBefore(o)}if(0!=i.startOffset)break;i.setStartBefore(i.startContainer)}for(;!domUtils.isBody(i.endContainer);){var a=i.endContainer;if(1==a.nodeType){if(!(a=a.childNodes[i.endOffset])){i.setEndAfter(i.endContainer);continue}var r=a.nextSibling;r&&3==r.nodeType&&new RegExp("^[\n\r\t"+domUtils.fillChar+"]*$").test(r.nodeValue)&&i.setEndAfter(r)}if(i.endOffset!=i.endContainer[3==i.endContainer.nodeType?"nodeValue":"childNodes"].length)break;i.setEndAfter(i.endContainer)}}i.deleteContents(),i.select(!0),w.__hasEnterExecCommand=!0;var s=b;2===t?s=v(s):t&&(s=y),w.execCommand("inserthtml",s,!0),w.__hasEnterExecCommand=!1;for(var l=w.selection.getRange();!domUtils.isBody(l.startContainer)&&!l.startOffset&&l.startContainer[3==l.startContainer.nodeType?"nodeValue":"childNodes"].length;)l.setStartBefore(l.startContainer);var d=l.createAddress(!0);x.endAddress=d.startAddress}}),w.addListener("ready",function(){domUtils.on(w.body,"cut",function(){!w.selection.getRange().collapsed&&w.undoManger&&w.undoManger.save()}),domUtils.on(w.body,browser.ie||browser.opera?"keydown":"paste",function(e){(!browser.ie&&!browser.opera||(e.ctrlKey||e.metaKey)&&"86"==e.keyCode)&&t.call(w,function(e){i(e)})})}),w.commands.paste={execCommand:function(e){browser.ie?(t.call(w,function(e){i(e)}),w.document.execCommand("paste")):alert(w.getLang("pastemsg"))}}},UE.plugins.pasteplain=function(){this.setOpt({pasteplain:!1,filterTxtRules:function(){function e(e){e.tagName="p",e.setStyle()}function t(e){e.parentNode.removeChild(e,!0)}return{"-":"script style object iframe embed input select",p:{$:{}},br:{$:{}},div:function(e){for(var t,i=UE.uNode.createElement("p");t=e.firstChild();)"text"!=t.type&&UE.dom.dtd.$block[t.tagName]?i.firstChild()?(e.parentNode.insertBefore(i,e),i=UE.uNode.createElement("p")):e.parentNode.insertBefore(t,e):i.appendChild(t);i.firstChild()&&e.parentNode.insertBefore(i,e),e.parentNode.removeChild(e)},ol:t,ul:t,dl:t,dt:t,dd:t,li:t,caption:e,th:e,tr:e,h1:e,h2:e,h3:e,h4:e,h5:e,h6:e,td:function(e){!!e.innerText()&&e.parentNode.insertAfter(UE.uNode.createText(" &nbsp; &nbsp;"),e),e.parentNode.removeChild(e,e.innerText())}}}()});var e=this.options.pasteplain;this.commands.pasteplain={queryCommandState:function(){return e?1:0},execCommand:function(){e=0|!e},notNeedUndo:1}},UE.plugins.list=function(){function e(e){var t=[];for(var i in e)t.push(i);return t}function A(e){var t=e.className;return domUtils.hasClass(e,/custom_/)?t.match(/custom_(\w+)/)[1]:domUtils.getStyle(e,"list-style-type")}function r(s,l){utils.each(domUtils.getElementsByTagName(s,"ol ul"),function(o){if(domUtils.inDoc(o,s)){var e=o.parentNode;if(e.tagName==o.tagName){var t=A(o)||("OL"==o.tagName?"decimal":"disc");if(t==(A(e)||("OL"==e.tagName?"decimal":"disc"))){var i=utils.indexOf(p[o.tagName],t);i=i+1==p[o.tagName].length?0:i+1,P(o,p[o.tagName][i])}}var a=0,n=2;domUtils.hasClass(o,/custom_/)?/[ou]l/i.test(e.tagName)&&domUtils.hasClass(e,/custom_/)||(n=1):/[ou]l/i.test(e.tagName)&&domUtils.hasClass(e,/custom_/)&&(n=3);var r=domUtils.getStyle(o,"list-style-type");r&&(o.style.cssText="list-style-type:"+r),o.className=utils.trim(o.className.replace(/list-paddingleft-\w+/,""))+" list-paddingleft-"+n,utils.each(domUtils.getElementsByTagName(o,"li"),function(e){if(e.style.cssText&&(e.style.cssText=""),e.firstChild){if(e.parentNode===o){if(a++,domUtils.hasClass(o,/custom_/)){var t=1,i=A(o);if("OL"==o.tagName){if(i)switch(i){case"cn":case"cn1":case"cn2":10<a&&(a%10==0||10<a&&a<20)?t=2:20<a&&(t=3);break;case"num2":9<a&&(t=2)}e.className="list-"+d[i]+a+" list-"+i+"-paddingleft-"+t}else e.className="list-"+d[i]+" list-"+i+"-paddingleft"}else e.className=e.className.replace(/list-[\w\-]+/gi,"");var n=e.getAttribute("class");null===n||n.replace(/\s/g,"")||domUtils.removeAttributes(e,"class")}}else domUtils.remove(e)}),!l&&L(o,o.tagName.toLowerCase(),A(o)||domUtils.getStyle(o,"list-style-type"),!0)}})}function L(e,t,i,n){var o=e.nextSibling;o&&1==o.nodeType&&o.tagName.toLowerCase()==t&&(A(o)||domUtils.getStyle(o,"list-style-type")||("ol"==t?"decimal":"disc"))==i&&(domUtils.moveChild(o,e),0==o.childNodes.length&&domUtils.remove(o)),o&&domUtils.isFillChar(o)&&domUtils.remove(o);var a=e.previousSibling;a&&1==a.nodeType&&a.tagName.toLowerCase()==t&&(A(a)||domUtils.getStyle(a,"list-style-type")||("ol"==t?"decimal":"disc"))==i&&domUtils.moveChild(e,a),a&&domUtils.isFillChar(a)&&domUtils.remove(a),!n&&domUtils.isEmptyBlock(e)&&domUtils.remove(e),A(e)&&r(e.ownerDocument,!0)}function P(e,t){d[t]&&(e.className="custom_"+t);try{domUtils.setStyle(e,"list-style-type",t)}catch(e){}}function x(e){var t=e.previousSibling;t&&domUtils.isEmptyBlock(t)&&domUtils.remove(t),(t=e.nextSibling)&&domUtils.isEmptyBlock(t)&&domUtils.remove(t)}function R(e){for(;e&&!domUtils.isBody(e);){if("TABLE"==e.nodeName)return null;if("LI"==e.nodeName)return e;e=e.parentNode}}var w=this,U={TD:1,PRE:1,BLOCKQUOTE:1},d={cn:"cn-1-",cn1:"cn-2-",cn2:"cn-3-",num:"num-1-",num1:"num-2-",num2:"num-3-",dash:"dash",dot:"dot"};w.setOpt({autoTransWordToList:!1,insertorderedlist:{num:"",num1:"",num2:"",cn:"",cn1:"",cn2:"",decimal:"","lower-alpha":"","lower-roman":"","upper-alpha":"","upper-roman":""},insertunorderedlist:{circle:"",disc:"",square:"",dash:"",dot:""},listDefaultPaddingLeft:"30",listiconpath:"http://bs.baidu.com/listicon/",maxListLevel:-1,disablePInList:!1});var p={OL:e(w.options.insertorderedlist),UL:e(w.options.insertunorderedlist)},n=w.options.listiconpath;for(var t in d)w.options.insertorderedlist.hasOwnProperty(t)||w.options.insertunorderedlist.hasOwnProperty(t)||delete d[t];w.ready(function(){var e=[];for(var t in d){if("dash"==t||"dot"==t)e.push("li.list-"+d[t]+"{background-image:url("+n+d[t]+".gif)}"),e.push("ul.custom_"+t+"{list-style:none;}ul.custom_"+t+" li{background-position:0 3px;background-repeat:no-repeat}");else{for(var i=0;i<99;i++)e.push("li.list-"+d[t]+i+"{background-image:url("+n+"list-"+d[t]+i+".gif)}");e.push("ol.custom_"+t+"{list-style:none;}ol.custom_"+t+" li{background-position:0 3px;background-repeat:no-repeat}")}switch(t){case"cn":e.push("li.list-"+t+"-paddingleft-1{padding-left:25px}"),e.push("li.list-"+t+"-paddingleft-2{padding-left:40px}"),e.push("li.list-"+t+"-paddingleft-3{padding-left:55px}");break;case"cn1":e.push("li.list-"+t+"-paddingleft-1{padding-left:30px}"),e.push("li.list-"+t+"-paddingleft-2{padding-left:40px}"),e.push("li.list-"+t+"-paddingleft-3{padding-left:55px}");break;case"cn2":e.push("li.list-"+t+"-paddingleft-1{padding-left:40px}"),e.push("li.list-"+t+"-paddingleft-2{padding-left:55px}"),e.push("li.list-"+t+"-paddingleft-3{padding-left:68px}");break;case"num":case"num1":e.push("li.list-"+t+"-paddingleft-1{padding-left:25px}");break;case"num2":e.push("li.list-"+t+"-paddingleft-1{padding-left:35px}"),e.push("li.list-"+t+"-paddingleft-2{padding-left:40px}");break;case"dash":e.push("li.list-"+t+"-paddingleft{padding-left:35px}");break;case"dot":e.push("li.list-"+t+"-paddingleft{padding-left:20px}")}}e.push(".list-paddingleft-1{padding-left:0}"),e.push(".list-paddingleft-2{padding-left:"+w.options.listDefaultPaddingLeft+"px}"),e.push(".list-paddingleft-3{padding-left:"+2*w.options.listDefaultPaddingLeft+"px}"),utils.cssRule("list","ol,ul{margin:0;pading:0;"+(browser.ie?"":"width:95%")+"}li{clear:both;}"+e.join("\n"),w.document)}),w.ready(function(){domUtils.on(w.body,"cut",function(){setTimeout(function(){var e,t=w.selection.getRange();if(!t.collapsed&&(e=domUtils.findParentByTagName(t.startContainer,"li",!0))&&!e.nextSibling&&domUtils.isEmptyBlock(e)){var i,n=e.parentNode;if(i=n.previousSibling)domUtils.remove(n),t.setStartAtLast(i).collapse(!0),t.select(!0);else if(i=n.nextSibling)domUtils.remove(n),t.setStartAtFirst(i).collapse(!0),t.select(!0);else{var o=w.document.createElement("p");domUtils.fillNode(w.document,o),n.parentNode.insertBefore(o,n),domUtils.remove(n),t.setStart(o,0).collapse(!0),t.select(!0)}}})})}),w.addListener("beforepaste",function(o,e){var t,i=this.selection.getRange(),a=UE.htmlparser(e.html,!0);if(t=domUtils.findParentByTagName(i.startContainer,"li",!0)){var r=t.parentNode,n="OL"==r.tagName?"ul":"ol";utils.each(a.getNodesByTagName(n),function(e){if(e.tagName=r.tagName,e.setAttr(),e.parentNode===a)o=A(r)||("OL"==r.tagName?"decimal":"disc");else{var t=e.parentNode.getAttr("class");(o=t&&/custom_/.test(t)?t.match(/custom_(\w+)/)[1]:e.parentNode.getStyle("list-style-type"))||(o="OL"==r.tagName?"decimal":"disc")}var i=utils.indexOf(p[r.tagName],o);e.parentNode!==a&&(i=i+1==p[r.tagName].length?0:i+1);var n=p[r.tagName][i];d[n]?e.setAttr("class","custom_"+n):e.setStyle("list-style-type",n)})}e.html=a.toHtml()}),!0===w.getOpt("disablePInList")&&w.addOutputRule(function(e){utils.each(e.getNodesByTagName("li"),function(n){var o=[],a=0;utils.each(n.children,function(e){if("p"==e.tagName){for(var t;t=e.children.pop();)o.splice(a,0,t),t.parentNode=n,lastNode=t;if(!(t=o[o.length-1])||"element"!=t.type||"br"!=t.tagName){var i=UE.uNode.createElement("br");i.parentNode=n,o.push(i)}a=o.length}}),o.length&&(n.children=o)})}),w.addInputRule(function(e){function s(e,t){var i=t.firstChild();if(i&&"element"==i.type&&"span"==i.tagName&&/Wingdings|Symbol/.test(i.getStyle("font-family"))){for(var n in o)if(o[n]==i.data)return n;return"disc"}for(var n in l)if(l[n].test(e))return n}if(utils.each(e.getNodesByTagName("li"),function(e){for(var t,i=UE.uNode.createElement("p"),n=0;t=e.children[n];)"text"==t.type||dtd.p[t.tagName]?i.appendChild(t):i.firstChild()?(e.insertBefore(i,t),i=UE.uNode.createElement("p"),n+=2):n++;(i.firstChild()&&!i.parentNode||!e.firstChild())&&e.appendChild(i),i.firstChild()||i.innerHTML(browser.ie?"&nbsp;":"<br/>");var o=e.firstChild(),a=o.lastChild();a&&"text"==a.type&&/^\s*$/.test(a.data)&&o.removeChild(a)}),w.options.autoTransWordToList){var l={num1:/^\d+\)/,decimal:/^\d+\./,"lower-alpha":/^[a-z]+\)/,"upper-alpha":/^[A-Z]+\./,cn:/^[\u4E00\u4E8C\u4E09\u56DB\u516d\u4e94\u4e03\u516b\u4e5d]+[\u3001]/,cn2:/^\([\u4E00\u4E8C\u4E09\u56DB\u516d\u4e94\u4e03\u516b\u4e5d]+\)/},o={square:"n"};utils.each(e.getNodesByTagName("p"),function(e){function t(e,t,i){if("ol"==e.tagName)if(browser.ie){var n=t.firstChild();"element"==n.type&&"span"==n.tagName&&l[i].test(n.innerText())&&t.removeChild(n)}else t.innerHTML(t.innerHTML().replace(l[i],""));else t.removeChild(t.firstChild());var o=UE.uNode.createElement("li");o.appendChild(t),e.appendChild(o)}if("MsoListParagraph"==e.getAttr("class")){e.setStyle("margin",""),e.setStyle("margin-left",""),e.setAttr("class","");var i,n=e,o=e;if("li"!=e.parentNode.tagName&&(i=s(e.innerText(),e))){var a=UE.uNode.createElement(w.options.insertorderedlist.hasOwnProperty(i)?"ol":"ul");for(d[i]?a.setAttr("class","custom_"+i):a.setStyle("list-style-type",i);e&&"li"!=e.parentNode.tagName&&s(e.innerText(),e);)(n=e.nextSibling())||e.parentNode.insertBefore(a,e),t(a,e,i),e=n;!a.parentNode&&e&&e.parentNode&&e.parentNode.insertBefore(a,e)}var r=o.firstChild();r&&"element"==r.type&&"span"==r.tagName&&/^\s*(&nbsp;)+\s*$/.test(r.innerText())&&r.parentNode.removeChild(r)}})}}),w.addListener("contentchange",function(){r(w.document)}),w.addListener("keydown",function(e,t){function i(){t.preventDefault?t.preventDefault():t.returnValue=!1,w.fireEvent("contentchange"),w.undoManger&&w.undoManger.save()}function n(e,t){for(;e&&!domUtils.isBody(e);){if(t(e))return null;if(1==e.nodeType&&/[ou]l/i.test(e.tagName))return e;e=e.parentNode}return null}var o=t.keyCode||t.which;if(13==o&&!t.shiftKey){var a=w.selection.getRange(),r=domUtils.findParent(a.startContainer,function(e){return domUtils.isBlockElm(e)},!0),s=domUtils.findParentByTagName(a.startContainer,"li",!0);if(r&&"PRE"!=r.tagName&&!s){var l=r.innerHTML.replace(new RegExp(domUtils.fillChar,"g"),"");/^\s*1\s*\.[^\d]/.test(l)&&(r.innerHTML=l.replace(/^\s*1\s*\./,""),a.setStartAtLast(r).collapse(!0).select(),w.__hasEnterExecCommand=!0,w.execCommand("insertorderedlist"),w.__hasEnterExecCommand=!1)}var d=w.selection.getRange(),c=n(d.startContainer,function(e){return"TABLE"==e.tagName}),u=d.collapsed?c:n(d.endContainer,function(e){return"TABLE"==e.tagName});if(c&&u&&c===u){if(!d.collapsed){if(c=domUtils.findParentByTagName(d.startContainer,"li",!0),u=domUtils.findParentByTagName(d.endContainer,"li",!0),!c||!u||c!==u){var h=d.cloneRange(),f=h.collapse(!1).createBookmark();return d.deleteContents(),h.moveToBookmark(f),x(s=domUtils.findParentByTagName(h.startContainer,"li",!0)),h.select(),void i()}if(d.deleteContents(),(s=domUtils.findParentByTagName(d.startContainer,"li",!0))&&domUtils.isEmptyBlock(s))return y=s.previousSibling,next=s.nextSibling,m=w.document.createElement("p"),domUtils.fillNode(w.document,m),b=s.parentNode,y&&next?(d.setStart(next,0).collapse(!0).select(!0),domUtils.remove(s)):((y||next)&&y?s.parentNode.parentNode.insertBefore(m,b.nextSibling):b.parentNode.insertBefore(m,b),domUtils.remove(s),b.firstChild||domUtils.remove(b),d.setStart(m,0).setCursor()),void i()}if(s=domUtils.findParentByTagName(d.startContainer,"li",!0)){if(domUtils.isEmptyBlock(s)){if(f=d.createBookmark(),s!==(b=s.parentNode).lastChild?(domUtils.breakParent(s,b),x(s)):(b.parentNode.insertBefore(s,b.nextSibling),domUtils.isEmptyNode(b)&&domUtils.remove(b)),!dtd.$list[s.parentNode.tagName])if(domUtils.isBlockElm(s.firstChild))domUtils.remove(s,!0);else{for(m=w.document.createElement("p"),s.parentNode.insertBefore(m,s);s.firstChild;)m.appendChild(s.firstChild);domUtils.remove(s)}d.moveToBookmark(f).select()}else{var p=s.firstChild;if(!p||!domUtils.isBlockElm(p)){var m=w.document.createElement("p");for(!s.firstChild&&domUtils.fillNode(w.document,m);s.firstChild;)m.appendChild(s.firstChild);s.appendChild(m),p=m}var g=w.document.createElement("span");d.insertNode(g),domUtils.breakParent(g,s);var v=g.nextSibling;(p=v.firstChild)||(m=w.document.createElement("p"),domUtils.fillNode(w.document,m),v.appendChild(m),p=m),domUtils.isEmptyNode(p)&&(p.innerHTML="",domUtils.fillNode(w.document,p)),d.setStart(p,0).collapse(!0).shrinkBoundary().select(),domUtils.remove(g);var y=v.previousSibling;y&&domUtils.isEmptyBlock(y)&&(y.innerHTML="<p></p>",domUtils.fillNode(w.document,y.firstChild))}i()}}}if(8==o&&((d=w.selection.getRange()).collapsed&&domUtils.isStartInblock(d)&&(h=d.cloneRange().trimBoundary(),(s=domUtils.findParentByTagName(d.startContainer,"li",!0))&&domUtils.isStartInblock(h)))){if((c=domUtils.findParentByTagName(d.startContainer,"p",!0))&&c!==s.firstChild){var b=domUtils.findParentByTagName(c,["ol","ul"]);return domUtils.breakParent(c,b),x(c),w.fireEvent("contentchange"),d.setStart(c,0).setCursor(!1,!0),w.fireEvent("saveScene"),void domUtils.preventDefault(t)}if(s&&(y=s.previousSibling)){if(46==o&&s.childNodes.length)return;if(dtd.$list[y.tagName]&&(y=y.lastChild),w.undoManger&&w.undoManger.save(),p=s.firstChild,domUtils.isBlockElm(p))if(domUtils.isEmptyNode(p))for(y.appendChild(p),d.setStart(p,0).setCursor(!1,!0);s.firstChild;)y.appendChild(s.firstChild);else g=w.document.createElement("span"),d.insertNode(g),domUtils.isEmptyBlock(y)&&(y.innerHTML=""),domUtils.moveChild(s,y),d.setStartBefore(g).collapse(!0).select(!0),domUtils.remove(g);else if(domUtils.isEmptyNode(s)){m=w.document.createElement("p");y.appendChild(m),d.setStart(m,0).setCursor()}else for(d.setEnd(y,y.childNodes.length).collapse().select(!0);s.firstChild;)y.appendChild(s.firstChild);return domUtils.remove(s),w.fireEvent("contentchange"),w.fireEvent("saveScene"),void domUtils.preventDefault(t)}if(s&&!s.previousSibling){b=s.parentNode,f=d.createBookmark();if(domUtils.isTagNode(b.parentNode,"ol ul"))b.parentNode.insertBefore(s,b),domUtils.isEmptyNode(b)&&domUtils.remove(b);else{for(;s.firstChild;)b.parentNode.insertBefore(s.firstChild,b);domUtils.remove(s),domUtils.isEmptyNode(b)&&domUtils.remove(b)}return d.moveToBookmark(f).setCursor(!1,!0),w.fireEvent("contentchange"),w.fireEvent("saveScene"),void domUtils.preventDefault(t)}}}),w.addListener("keyup",function(e,t){if(8==(t.keyCode||t.which)){var i,n=w.selection.getRange();(i=domUtils.findParentByTagName(n.startContainer,["ol","ul"],!0))&&L(i,i.tagName.toLowerCase(),A(i)||domUtils.getComputedStyle(i,"list-style-type"),!0)}}),w.addListener("tabkeydown",function(){function e(e){if(-1!=w.options.maxListLevel){for(var t=e.parentNode,i=0;/[ou]l/i.test(t.tagName);)i++,t=t.parentNode;if(i>=w.options.maxListLevel)return!0}}var t=w.selection.getRange(),i=domUtils.findParentByTagName(t.startContainer,"li",!0);if(i){var n;if(!t.collapsed){w.fireEvent("saveScene"),n=t.createBookmark();for(var o,a,r=0,s=domUtils.findParents(i);a=s[r++];)if(domUtils.isTagNode(a,"ol ul")){o=a;break}var l=i;if(n.end)for(;l&&!(domUtils.getPosition(l,n.end)&domUtils.POSITION_FOLLOWING);)if(e(l))l=domUtils.getNextDomNode(l,!1,null,function(e){return e!==o});else{var d=l.parentNode,c=w.document.createElement(d.tagName),u=(h=utils.indexOf(p[c.tagName],A(d)||domUtils.getComputedStyle(d,"list-style-type")))+1==p[c.tagName].length?0:h+1;for(P(c,f=p[c.tagName][u]),d.insertBefore(c,l);l&&!(domUtils.getPosition(l,n.end)&domUtils.POSITION_FOLLOWING);){if(i=l.nextSibling,c.appendChild(l),!i||domUtils.isTagNode(i,"ol ul")){if(i)for(;(i=i.firstChild)&&"LI"!=i.tagName;);else i=domUtils.getNextDomNode(l,!1,null,function(e){return e!==o});break}l=i}L(c,c.tagName.toLowerCase(),f),l=i}return w.fireEvent("contentchange"),t.moveToBookmark(n).select(),!0}if(e(i))return!0;var h,f;d=i.parentNode,c=w.document.createElement(d.tagName);if(h=(h=utils.indexOf(p[c.tagName],A(d)||domUtils.getComputedStyle(d,"list-style-type")))+1==p[c.tagName].length?0:h+1,P(c,f=p[c.tagName][h]),domUtils.isStartInblock(t))return w.fireEvent("saveScene"),n=t.createBookmark(),d.insertBefore(c,i),c.appendChild(i),L(c,c.tagName.toLowerCase(),f),w.fireEvent("contentchange"),t.moveToBookmark(n).select(!0),!0}}),w.commands.insertorderedlist=w.commands.insertunorderedlist={execCommand:function(e,t){t||(t="insertorderedlist"==e.toLowerCase()?"decimal":"disc");var i=this,n=this.selection.getRange(),o=function(e){return 1==e.nodeType?"br"!=e.tagName.toLowerCase():!domUtils.isWhitespace(e)},a="insertorderedlist"==e.toLowerCase()?"ol":"ul",r=i.document.createDocumentFragment();n.adjustmentBoundary().shrinkBoundary();var s,l,d,c,u=n.createBookmark(!0),h=R(i.document.getElementById(u.start)),f=0,p=R(i.document.getElementById(u.end)),m=0;if(h||p){if(h&&(s=h.parentNode),u.end||(p=h),p&&(l=p.parentNode),s===l){for(;h!==p;){if(h=(c=h).nextSibling,!domUtils.isBlockElm(c.firstChild)){for(var g=i.document.createElement("p");c.firstChild;)g.appendChild(c.firstChild);c.appendChild(g)}r.appendChild(c)}if(c=i.document.createElement("span"),s.insertBefore(c,p),!domUtils.isBlockElm(p.firstChild)){for(g=i.document.createElement("p");p.firstChild;)g.appendChild(p.firstChild);p.appendChild(g)}r.appendChild(p),domUtils.breakParent(c,s),domUtils.isEmptyNode(c.previousSibling)&&domUtils.remove(c.previousSibling),domUtils.isEmptyNode(c.nextSibling)&&domUtils.remove(c.nextSibling);var v=A(s)||domUtils.getComputedStyle(s,"list-style-type")||("insertorderedlist"==e.toLowerCase()?"decimal":"disc");if(s.tagName.toLowerCase()==a&&v==t){for(var y=0,b=i.document.createDocumentFragment();M=r.firstChild;)if(domUtils.isTagNode(M,"ol ul"))b.appendChild(M);else for(;M.firstChild;)b.appendChild(M.firstChild),domUtils.remove(M);c.parentNode.insertBefore(b,c)}else P(d=i.document.createElement(a),t),d.appendChild(r),c.parentNode.insertBefore(d,c);return domUtils.remove(c),d&&L(d,a,t),void n.moveToBookmark(u).select()}if(h){for(;h;){if(c=h.nextSibling,domUtils.isTagNode(h,"ol ul"))r.appendChild(h);else{for(var x=i.document.createDocumentFragment(),w=0;h.firstChild;)domUtils.isBlockElm(h.firstChild)&&(w=1),x.appendChild(h.firstChild);if(w)r.appendChild(x);else{var _=i.document.createElement("p");_.appendChild(x),r.appendChild(_)}domUtils.remove(h)}h=c}s.parentNode.insertBefore(r,s.nextSibling),domUtils.isEmptyNode(s)?(n.setStartBefore(s),domUtils.remove(s)):n.setStartAfter(s),f=1}if(p&&domUtils.inDoc(l,i.document)){for(h=l.firstChild;h&&h!==p;){if(c=h.nextSibling,domUtils.isTagNode(h,"ol ul"))r.appendChild(h);else{for(x=i.document.createDocumentFragment(),w=0;h.firstChild;)domUtils.isBlockElm(h.firstChild)&&(w=1),x.appendChild(h.firstChild);w?r.appendChild(x):((_=i.document.createElement("p")).appendChild(x),r.appendChild(_)),domUtils.remove(h)}h=c}var C=domUtils.createElement(i.document,"div",{tmpDiv:1});domUtils.moveChild(p,C),r.appendChild(C),domUtils.remove(p),l.parentNode.insertBefore(r,l),n.setEndBefore(l),domUtils.isEmptyNode(l)&&domUtils.remove(l),m=1}}f||n.setStartBefore(i.document.getElementById(u.start)),u.end&&!m&&n.setEndAfter(i.document.getElementById(u.end)),n.enlarge(!0,function(e){return U[e.tagName]}),r=i.document.createDocumentFragment();for(var S=n.createBookmark(),T=domUtils.getNextDomNode(S.start,!1,o),k=n.cloneRange(),I=domUtils.isBlockElm;T&&T!==S.end&&domUtils.getPosition(T,S.end)&domUtils.POSITION_PRECEDING;)if(3==T.nodeType||dtd.li[T.tagName]){if(1==T.nodeType&&dtd.$list[T.tagName]){for(;T.firstChild;)r.appendChild(T.firstChild);E=domUtils.getNextDomNode(T,!1,o),domUtils.remove(T),T=E;continue}for(E=T,k.setStartBefore(T);T&&T!==S.end&&(!I(T)||domUtils.isBookmarkNode(T));)E=T,T=domUtils.getNextDomNode(T,!1,null,function(e){return!U[e.tagName]});T&&I(T)&&((c=domUtils.getNextDomNode(E,!1,o))&&domUtils.isBookmarkNode(c)&&(T=domUtils.getNextDomNode(c,!1,o),E=c)),k.setEndAfter(E),T=domUtils.getNextDomNode(E,!1,o);var N=n.document.createElement("li");if(N.appendChild(k.extractContents()),domUtils.isEmptyNode(N)){for(var E=n.document.createElement("p");N.firstChild;)E.appendChild(N.firstChild);N.appendChild(E)}r.appendChild(N)}else T=domUtils.getNextDomNode(T,!0,o);n.moveToBookmark(S).collapse(!0),P(d=i.document.createElement(a),t),d.appendChild(r),n.insertNode(d),L(d,a,t);y=0;for(var M,D=domUtils.getElementsByTagName(d,"div");M=D[y++];)M.getAttribute("tmpDiv")&&domUtils.remove(M,!0);n.moveToBookmark(u).select()},queryCommandState:function(e){for(var t,i="insertorderedlist"==e.toLowerCase()?"ol":"ul",n=this.selection.getStartElementPath(),o=0;t=n[o++];){if("TABLE"==t.nodeName)return 0;if(i==t.nodeName.toLowerCase())return 1}return 0},queryCommandValue:function(e){for(var t,i,n="insertorderedlist"==e.toLowerCase()?"ol":"ul",o=this.selection.getStartElementPath(),a=0;i=o[a++];){if("TABLE"==i.nodeName){t=null;break}if(n==i.nodeName.toLowerCase()){t=i;break}}return t?A(t)||domUtils.getComputedStyle(t,"list-style-type"):null}}},kGg={textarea:function(e,t){var i=t.ownerDocument.createElement("textarea");return i.style.cssText="position:absolute;resize:none;width:100%;height:100%;border:0;padding:0;margin:0;overflow-y:auto;",browser.ie&&browser.version<8&&(i.style.width=t.offsetWidth+"px",i.style.height=t.offsetHeight+"px",t.onresize=function(){i.style.width=t.offsetWidth+"px",i.style.height=t.offsetHeight+"px"}),t.appendChild(i),{setContent:function(e){i.value=e},getContent:function(){return i.value},select:function(){var e;browser.ie?((e=i.createTextRange()).collapse(!0),e.select()):(i.setSelectionRange(0,0),i.focus())},dispose:function(){t.removeChild(i),t.onresize=null,t=i=null},focus:function(){i.focus()},blur:function(){i.blur()}}},codemirror:function(e,t){var i=window.CodeMirror(t,{mode:"text/html",tabMode:"indent",lineNumbers:!0,lineWrapping:!0}),n=i.getWrapperElement();return n.style.cssText='position:absolute;left:0;top:0;width:100%;height:100%;font-family:consolas,"Courier new",monospace;font-size:13px;',i.getScrollerElement().style.cssText="position:absolute;left:0;top:0;width:100%;height:100%;",i.refresh(),{getCodeMirror:function(){return i},setContent:function(e){i.setValue(e)},getContent:function(){return i.getValue()},select:function(){i.focus()},dispose:function(){t.removeChild(n),i=n=null},focus:function(){i.focus()},blur:function(){i.setOption("readOnly",!0),i.setOption("readOnly",!1)}}}},UE.plugins.source=function(){var r,s,l,d,c,u,h,f=this,p=this.options,m=!1;p.sourceEditor=browser.ie?"textarea":p.sourceEditor||"codemirror",f.setOpt({sourceEditorFirst:!1}),f.commands.source={execCommand:function(){if(m=!m){h=f.selection.getRange().createAddress(!1,!0),f.undoManger&&f.undoManger.save(!0),browser.gecko&&(f.body.contentEditable=!1),c=f.iframe.style.cssText,f.iframe.style.cssText+="position:absolute;left:-32768px;top:-32768px;",f.fireEvent("beforegetcontent");var e=UE.htmlparser(f.body.innerHTML);f.filterOutputRule(e),e.traversal(function(e){if("element"==e.type)switch(e.tagName){case"td":case"th":case"caption":e.children&&1==e.children.length&&"br"==e.firstChild().tagName&&e.removeChild(e.firstChild());break;case"pre":e.innerText(e.innerText().replace(/&nbsp;/g," "))}}),f.fireEvent("aftergetcontent");var t=e.toHtml(!0);a=f.iframe.parentNode,(r=kGg["codemirror"==p.sourceEditor&&window.CodeMirror?"codemirror":"textarea"](f,a)).setContent(t),s=f.setContent,f.setContent=function(e){var t=UE.htmlparser(e);f.filterInputRule(t),e=t.toHtml(),r.setContent(e)},setTimeout(function(){r.select(),f.addListener("fullscreenchanged",function(){try{r.getCodeMirror().refresh()}catch(e){}})}),u=f.getContent,f.getContent=function(){return r.getContent()||"<p>"+(browser.ie?"":"<br/>")+"</p>"},l=f.focus,d=f.blur,f.focus=function(){r.focus()},f.blur=function(){d.call(f),r.blur()}}else{f.iframe.style.cssText=c;var i=r.getContent()||"<p>"+(browser.ie?"":"<br/>")+"</p>";i=i.replace(new RegExp("[\\r\\t\\n ]*</?(\\w+)\\s*(?:[^>]*)>","g"),function(e,t){return t&&!dtd.$inlineWithA[t.toLowerCase()]?e.replace(/(^[\n\r\t ]*)|([\n\r\t ]*$)/g,""):e.replace(/(^[\n\r\t]*)|([\n\r\t]*$)/g,"")}),f.setContent=s,f.setContent(i),r.dispose(),r=null,f.getContent=u,f.focus=l,f.blur=d;var n=f.body.firstChild;if(n||(f.body.innerHTML="<p>"+(browser.ie?"":"<br/>")+"</p>",n=f.body.firstChild),f.undoManger&&f.undoManger.save(!0),browser.gecko){var o=document.createElement("input");o.style.cssText="position:absolute;left:0;top:-32768px",document.body.appendChild(o),f.body.contentEditable=!1,setTimeout(function(){domUtils.setViewportOffset(o,{left:-32768,top:0}),o.focus(),setTimeout(function(){f.body.contentEditable=!0,f.selection.getRange().moveToAddress(h).select(!0),domUtils.remove(o)})})}else try{f.selection.getRange().moveToAddress(h).select(!0)}catch(e){}}var a;this.fireEvent("sourcemodechanged",m)},queryCommandState:function(){return 0|m},notNeedUndo:1};var t=f.queryCommandState;f.queryCommandState=function(e){return e=e.toLowerCase(),m?e in{source:1,fullscreen:1}?1:-1:t.apply(this,arguments)},"codemirror"==p.sourceEditor&&f.addListener("ready",function(){utils.loadFile(document,{src:p.codeMirrorJsUrl||p.UEDITOR_HOME_URL+"third-party/codemirror/codemirror.js",tag:"script",type:"text/javascript",defer:"defer"},function(){p.sourceEditorFirst&&setTimeout(function(){f.execCommand("source")},0)}),utils.loadFile(document,{tag:"link",rel:"stylesheet",type:"text/css",href:p.codeMirrorCssUrl||p.UEDITOR_HOME_URL+"third-party/codemirror/codemirror.css"})})},UE.plugins.enterkey=function(){var l,d=this,c=d.options.enterTag;d.addListener("keyup",function(e,t){if(13==(t.keyCode||t.which)){var i,n=d.selection.getRange(),o=n.startContainer;if(browser.ie)d.fireEvent("saveScene",!0,!0);else{if(/h\d/i.test(l)){if(browser.gecko)domUtils.findParentByTagName(o,["h1","h2","h3","h4","h5","h6","blockquote","caption","table"],!0)||(d.document.execCommand("formatBlock",!1,"<p>"),i=1);else if(1==o.nodeType){var a,r=d.document.createTextNode("");if(n.insertNode(r),a=domUtils.findParentByTagName(r,"div",!0)){for(var s=d.document.createElement("p");a.firstChild;)s.appendChild(a.firstChild);a.parentNode.insertBefore(s,a),domUtils.remove(a),n.setStartBefore(r).setCursor(),i=1}domUtils.remove(r)}d.undoManger&&i&&d.undoManger.save()}browser.opera&&n.select()}}}),d.addListener("keydown",function(e,t){if(13==(t.keyCode||t.which)){if(d.fireEvent("beforeenterkeydown"))return void domUtils.preventDefault(t);d.fireEvent("saveScene",!0,!0),l="";var i=d.selection.getRange();if(!i.collapsed){var n=i.startContainer,o=i.endContainer,a=domUtils.findParentByTagName(n,"td",!0),r=domUtils.findParentByTagName(o,"td",!0);if(a&&r&&a!==r||!a&&r||a&&!r)return void(t.preventDefault?t.preventDefault():t.returnValue=!1)}if("p"==c)browser.ie||((n=domUtils.findParentByTagName(i.startContainer,["ol","ul","p","h1","h2","h3","h4","h5","h6","blockquote","caption"],!0))||browser.opera?(l=n.tagName,"p"==n.tagName.toLowerCase()&&browser.gecko&&domUtils.removeDirtyAttr(n)):(d.document.execCommand("formatBlock",!1,"<p>"),browser.gecko&&(i=d.selection.getRange(),(n=domUtils.findParentByTagName(i.startContainer,"p",!0))&&domUtils.removeDirtyAttr(n))));else if(t.preventDefault?t.preventDefault():t.returnValue=!1,i.collapsed){s=i.document.createElement("br"),i.insertNode(s),s.parentNode.lastChild===s?(s.parentNode.insertBefore(s.cloneNode(!0),s),i.setStartBefore(s)):i.setStartAfter(s),i.setCursor()}else if(i.deleteContents(),1==(n=i.startContainer).nodeType&&(n=n.childNodes[i.startOffset])){for(;1==n.nodeType;){if(dtd.$empty[n.tagName])return i.setStartBefore(n).setCursor(),d.undoManger&&d.undoManger.save(),!1;if(!n.firstChild){var s=i.document.createElement("br");return n.appendChild(s),i.setStart(n,0).setCursor(),d.undoManger&&d.undoManger.save(),!1}n=n.firstChild}n===i.startContainer.childNodes[i.startOffset]?(s=i.document.createElement("br"),i.insertNode(s).setCursor()):i.setStart(n,0).setCursor()}else s=i.document.createElement("br"),i.insertNode(s).setStartAfter(s).setCursor()}})},UE.plugins.keystrokes=function(){var b=this,x=!0;b.addListener("keydown",function(e,t){var i=t.keyCode||t.which,n=b.selection.getRange();if(!n.collapsed&&!(t.ctrlKey||t.shiftKey||t.altKey||t.metaKey)&&(65<=i&&i<=90||48<=i&&i<=57||96<=i&&i<=111||{13:1,8:1,46:1}[i])){var o=n.startContainer;if(domUtils.isFillChar(o)&&n.setStartBefore(o),o=n.endContainer,domUtils.isFillChar(o)&&n.setEndAfter(o),n.txtToElmBoundary(),n.endContainer&&1==n.endContainer.nodeType&&((o=n.endContainer.childNodes[n.endOffset])&&domUtils.isBr(o)&&n.setEndAfter(o)),0==n.startOffset&&(o=n.startContainer,domUtils.isBoundaryNode(o,"firstChild")&&(o=n.endContainer,n.endOffset==(3==o.nodeType?o.nodeValue.length:o.childNodes.length)&&domUtils.isBoundaryNode(o,"lastChild"))))return b.fireEvent("saveScene"),b.body.innerHTML="<p>"+(browser.ie?"":"<br/>")+"</p>",n.setStart(b.body.firstChild,0).setCursor(!1,!0),void b._selectionChange()}if(i==keymap.Backspace){if(n=b.selection.getRange(),x=n.collapsed,b.fireEvent("delkeydown",t))return;var a,r;if(n.collapsed&&n.inFillChar()&&(a=n.startContainer,domUtils.isFillChar(a)?(n.setStartBefore(a).shrinkBoundary(!0).collapse(!0),domUtils.remove(a)):(a.nodeValue=a.nodeValue.replace(new RegExp("^"+domUtils.fillChar),""),n.startOffset--,n.collapse(!0).select(!0))),a=n.getClosedNode())return b.fireEvent("saveScene"),n.setStartBefore(a),domUtils.remove(a),n.setCursor(),b.fireEvent("saveScene"),void domUtils.preventDefault(t);if(!browser.ie&&(a=domUtils.findParentByTagName(n.startContainer,"table",!0),r=domUtils.findParentByTagName(n.endContainer,"table",!0),a&&!r||!a&&r||a!==r))return void t.preventDefault()}if(i==keymap.Tab){var s={ol:1,ul:1,table:1};if(b.fireEvent("tabkeydown",t))return void domUtils.preventDefault(t);var l=b.selection.getRange();b.fireEvent("saveScene");for(var d=0,c="",u=b.options.tabSize||4,h=b.options.tabNode||"&nbsp;";d<u;d++)c+=h;var f=b.document.createElement("span");if(f.innerHTML=c+domUtils.fillChar,l.collapsed)l.insertNode(f.cloneNode(!0).firstChild).setCursor(!0);else{var p=function(e){return domUtils.isBlockElm(e)&&!s[e.tagName.toLowerCase()]};if(a=domUtils.findParent(l.startContainer,p,!0),r=domUtils.findParent(l.endContainer,p,!0),a&&r&&a===r)l.deleteContents(),l.insertNode(f.cloneNode(!0).firstChild).setCursor(!0);else{var m=l.createBookmark();l.enlarge(!0);for(var g=l.createBookmark(),v=domUtils.getNextDomNode(g.start,!1,p);v&&!(domUtils.getPosition(v,g.end)&domUtils.POSITION_FOLLOWING);)v.insertBefore(f.cloneNode(!0).firstChild,v.firstChild),v=domUtils.getNextDomNode(v,!1,p);l.moveToBookmark(g).moveToBookmark(m).select()}}domUtils.preventDefault(t)}if(browser.gecko&&46==i&&((l=b.selection.getRange()).collapsed&&(a=l.startContainer,domUtils.isEmptyBlock(a)))){for(var y=a.parentNode;1==domUtils.getChildCount(y)&&!domUtils.isBody(y);)y=(a=y).parentNode;a===y.lastChild&&t.preventDefault()}else browser.chrome&&b.on("keydown",function(e,t){var i=t.keyCode||t.which;if((t.metaKey&&t.altKey||t.ctrlKey&&t.shiftKey)&&73==i)return!0})}),b.addListener("keyup",function(e,t){var i;if((t.keyCode||t.which)==keymap.Backspace){if(this.fireEvent("delkeyup"))return;if((i=this.selection.getRange()).collapsed){if((a=domUtils.findParentByTagName(i.startContainer,["h1","h2","h3","h4","h5","h6"],!0))&&domUtils.isEmptyBlock(a)){var n=a.previousSibling;if(n&&"TABLE"!=n.nodeName)return domUtils.remove(a),void i.setStartAtLast(n).setCursor(!1,!0);var o=a.nextSibling;if(o&&"TABLE"!=o.nodeName)return domUtils.remove(a),void i.setStartAtFirst(o).setCursor(!1,!0)}if(domUtils.isBody(i.startContainer)){var a=domUtils.createElement(this.document,"p",{innerHTML:browser.ie?domUtils.fillChar:"<br/>"});i.insertNode(a).setStart(a,0).setCursor(!1,!0)}}if(!x&&(3==i.startContainer.nodeType||1==i.startContainer.nodeType&&domUtils.isEmptyBlock(i.startContainer)))if(browser.ie){var r=i.document.createElement("span");i.insertNode(r).setStartBefore(r).collapse(!0),i.select(),domUtils.remove(r)}else i.select()}})},UE.plugins.fiximgclick=function(){function l(){this.editor=null,this.resizer=null,this.cover=null,this.doc=document,this.prePos={x:0,y:0},this.startPos={x:0,y:0}}var o,n=!1;return o=[[0,0,-1,-1],[0,0,0,-1],[0,0,1,-1],[0,0,-1,0],[0,0,1,0],[0,0,-1,1],[0,0,0,1],[0,0,1,1]],l.prototype={init:function(e){var t=this;t.editor=e,t.startPos=this.prePos={x:0,y:0},t.dragId=-1;var n=[],o=t.cover=document.createElement("div"),a=t.resizer=document.createElement("div");for(o.id=t.editor.ui.id+"_imagescale_cover",o.style.cssText="position:absolute;display:none;z-index:"+t.editor.options.zIndex+";filter:alpha(opacity=0); opacity:0;background:#CCC;",domUtils.on(o,"mousedown click",function(){t.hide()}),i=0;i<8;i++)n.push('<span class="edui-editor-imagescale-hand'+i+'"></span>');a.id=t.editor.ui.id+"_imagescale",a.className="edui-editor-imagescale",a.innerHTML=n.join(""),a.style.cssText+=";display:none;border:1px solid #3b77ff;z-index:"+t.editor.options.zIndex+";",t.editor.ui.getDom().appendChild(o),t.editor.ui.getDom().appendChild(a),t.initStyle(),t.initEvents()},initStyle:function(){utils.cssRule("imagescale",".edui-editor-imagescale{display:none;position:absolute;border:1px solid #38B2CE;cursor:hand;-webkit-box-sizing: content-box;-moz-box-sizing: content-box;box-sizing: content-box;}.edui-editor-imagescale span{position:absolute;width:6px;height:6px;overflow:hidden;font-size:0px;display:block;background-color:#3C9DD0;}.edui-editor-imagescale .edui-editor-imagescale-hand0{cursor:nw-resize;top:0;margin-top:-4px;left:0;margin-left:-4px;}.edui-editor-imagescale .edui-editor-imagescale-hand1{cursor:n-resize;top:0;margin-top:-4px;left:50%;margin-left:-4px;}.edui-editor-imagescale .edui-editor-imagescale-hand2{cursor:ne-resize;top:0;margin-top:-4px;left:100%;margin-left:-3px;}.edui-editor-imagescale .edui-editor-imagescale-hand3{cursor:w-resize;top:50%;margin-top:-4px;left:0;margin-left:-4px;}.edui-editor-imagescale .edui-editor-imagescale-hand4{cursor:e-resize;top:50%;margin-top:-4px;left:100%;margin-left:-3px;}.edui-editor-imagescale .edui-editor-imagescale-hand5{cursor:sw-resize;top:100%;margin-top:-3px;left:0;margin-left:-4px;}.edui-editor-imagescale .edui-editor-imagescale-hand6{cursor:s-resize;top:100%;margin-top:-3px;left:50%;margin-left:-4px;}.edui-editor-imagescale .edui-editor-imagescale-hand7{cursor:se-resize;top:100%;margin-top:-3px;left:100%;margin-left:-3px;}")},initEvents:function(){this.startPos.x=this.startPos.y=0,this.isDraging=!1},_eventHandler:function(e){var t=this;switch(e.type){case"mousedown":var i;-1!=(i=e.target||e.srcElement).className.indexOf("edui-editor-imagescale-hand")&&-1==t.dragId&&(t.dragId=i.className.slice(-1),t.startPos.x=t.prePos.x=e.clientX,t.startPos.y=t.prePos.y=e.clientY,domUtils.on(t.doc,"mousemove",t.proxy(t._eventHandler,t)));break;case"mousemove":-1!=t.dragId&&(t.updateContainerStyle(t.dragId,{x:e.clientX-t.prePos.x,y:e.clientY-t.prePos.y}),t.prePos.x=e.clientX,t.prePos.y=e.clientY,n=!0,t.updateTargetElement());break;case"mouseup":-1!=t.dragId&&(t.updateContainerStyle(t.dragId,{x:e.clientX-t.prePos.x,y:e.clientY-t.prePos.y}),t.updateTargetElement(),t.target.parentNode&&t.attachTo(t.target),t.dragId=-1),domUtils.un(t.doc,"mousemove",t.proxy(t._eventHandler,t)),n&&(n=!1,t.editor.fireEvent("contentchange"))}},updateTargetElement:function(){domUtils.setStyles(this.target,{width:this.resizer.style.width,height:this.resizer.style.height}),this.target.width=parseInt(this.resizer.style.width),this.target.height=parseInt(this.resizer.style.height),this.attachTo(this.target)},updateContainerStyle:function(e,t){var i,n=this.resizer;0!=o[e][0]&&(i=parseInt(n.style.left)+t.x,n.style.left=this._validScaledProp("left",i)+"px"),0!=o[e][1]&&(i=parseInt(n.style.top)+t.y,n.style.top=this._validScaledProp("top",i)+"px"),0!=o[e][2]&&(i=n.clientWidth+o[e][2]*t.x,n.style.width=this._validScaledProp("width",i)+"px"),0!=o[e][3]&&(i=n.clientHeight+o[e][3]*t.y,n.style.height=this._validScaledProp("height",i)+"px")},_validScaledProp:function(e,t){var i=this.resizer,n=document;switch(t=isNaN(t)?0:t,e){case"left":return t<0?0:t+i.clientWidth>n.clientWidth?n.clientWidth-i.clientWidth:t;case"top":return t<0?0:t+i.clientHeight>n.clientHeight?n.clientHeight-i.clientHeight:t;case"width":return t<=0?1:t+i.offsetLeft>n.clientWidth?n.clientWidth-i.offsetLeft:t;case"height":return t<=0?1:t+i.offsetTop>n.clientHeight?n.clientHeight-i.offsetTop:t}},hideCover:function(){this.cover.style.display="none"},showCover:function(){var e=domUtils.getXY(this.editor.ui.getDom()),t=domUtils.getXY(this.editor.iframe);domUtils.setStyles(this.cover,{width:this.editor.iframe.offsetWidth+"px",height:this.editor.iframe.offsetHeight+"px",top:t.y-e.y+"px",left:t.x-e.x+"px",position:"absolute",display:""})},show:function(e){var t=this;t.resizer.style.display="block",e&&t.attachTo(e),domUtils.on(this.resizer,"mousedown",t.proxy(t._eventHandler,t)),domUtils.on(t.doc,"mouseup",t.proxy(t._eventHandler,t)),t.showCover(),t.editor.fireEvent("afterscaleshow",t),t.editor.fireEvent("saveScene")},hide:function(){var e=this;e.hideCover(),e.resizer.style.display="none",domUtils.un(e.resizer,"mousedown",e.proxy(e._eventHandler,e)),domUtils.un(e.doc,"mouseup",e.proxy(e._eventHandler,e)),e.editor.fireEvent("afterscalehide",e)},proxy:function(t,i){return function(e){return t.apply(i||this,arguments)}},attachTo:function(e){var t=this.target=e,i=this.resizer,n=domUtils.getXY(t),o=domUtils.getXY(this.editor.iframe),a=domUtils.getXY(i.parentNode);domUtils.setStyles(i,{width:t.width+"px",height:t.height+"px",left:o.x+n.x-this.editor.document.body.scrollLeft-a.x-parseInt(i.style.borderLeftWidth)+"px",top:o.y+n.y-this.editor.document.body.scrollTop-a.y-parseInt(i.style.borderTopWidth)+"px"})}},function(){var r,s=this;s.setOpt("imageScaleEnabled",!0),!browser.ie&&s.options.imageScaleEnabled&&s.addListener("click",function(e,t){var i=s.selection.getRange().getClosedNode();if(i&&"IMG"==i.tagName&&"false"!=s.body.contentEditable){if(-1!=i.className.indexOf("edui-faked-music")||i.getAttribute("anchorname")||domUtils.hasClass(i,"loadingclass")||domUtils.hasClass(i,"loaderrorclass"))return;if(!r){(r=new l).init(s),s.ui.getDom().appendChild(r.resizer);var n,o=function(e){r.hide(),r.target&&s.selection.getRange().selectNode(r.target).select()},a=function(e){var t=e.target||e.srcElement;!t||void 0!==t.className&&-1!=t.className.indexOf("edui-editor-imagescale")||o()};s.addListener("afterscaleshow",function(e){s.addListener("beforekeydown",o),s.addListener("beforemousedown",a),domUtils.on(document,"keydown",o),domUtils.on(document,"mousedown",a),s.selection.getNative().removeAllRanges()}),s.addListener("afterscalehide",function(e){s.removeListener("beforekeydown",o),s.removeListener("beforemousedown",a),domUtils.un(document,"keydown",o),domUtils.un(document,"mousedown",a);var t=r.target;t.parentNode&&s.selection.getRange().selectNode(t).select()}),domUtils.on(r.resizer,"mousedown",function(e){s.selection.getNative().removeAllRanges();var t=e.target||e.srcElement;t&&-1==t.className.indexOf("edui-editor-imagescale-hand")&&(n=setTimeout(function(){r.hide(),r.target&&s.selection.getRange().selectNode(t).select()},200))}),domUtils.on(r.resizer,"mouseup",function(e){var t=e.target||e.srcElement;t&&-1==t.className.indexOf("edui-editor-imagescale-hand")&&clearTimeout(n)})}r.show(i)}else r&&"none"!=r.resizer.style.display&&r.hide()}),browser.webkit&&s.addListener("click",function(e,t){"IMG"==t.target.tagName&&"false"!=s.body.contentEditable&&new dom.Range(s.document).selectNode(t.target).select()})}}(),UE.plugin.register("autolink",function(){return browser.ie?{}:{bindEvents:{reset:function(){0},keydown:function(e,t){var i=t.keyCode||t.which;if(32==i||13==i){for(var n,o,a=this.selection.getNative(),r=a.getRangeAt(0).cloneRange(),s=r.startContainer;1==s.nodeType&&0<r.startOffset&&(s=r.startContainer.childNodes[r.startOffset-1]);)r.setStart(s,1==s.nodeType?s.childNodes.length:s.nodeValue.length),r.collapse(!0),s=r.startContainer;do{if(0==r.startOffset){for(s=r.startContainer.previousSibling;s&&1==s.nodeType;)s=s.lastChild;if(!s||domUtils.isFillChar(s))break;n=s.nodeValue.length}else s=r.startContainer,n=r.startOffset;r.setStart(s,n-1),o=r.toString().charCodeAt(0)}while(160!=o&&32!=o);if(r.toString().replace(new RegExp(domUtils.fillChar,"g"),"").match(/(?:https?:\/\/|ssh:\/\/|ftp:\/\/|file:\/|www\.)/i)){for(;r.toString().length&&!/^(?:https?:\/\/|ssh:\/\/|ftp:\/\/|file:\/|www\.)/i.test(r.toString());)try{r.setStart(r.startContainer,r.startOffset+1)}catch(e){for(s=r.startContainer;!(next=s.nextSibling);){if(domUtils.isBody(s))return;s=s.parentNode}r.setStart(next,0)}if(domUtils.findParentByTagName(r.startContainer,"a",!0))return;var l,d=this.document.createElement("a"),c=this.document.createTextNode(" ");this.undoManger&&this.undoManger.save(),d.appendChild(r.extractContents()),d.href=d.innerHTML=d.innerHTML.replace(/<[^>]+>/g,""),l=d.getAttribute("href").replace(new RegExp(domUtils.fillChar,"g"),""),l=/^(?:https?:\/\/)/gi.test(l)?l:"http://"+l,d.setAttribute("_src",utils.html(l)),d.href=utils.html(l),r.insertNode(d),d.parentNode.insertBefore(c,d.nextSibling),r.setStart(c,0),r.collapse(!0),a.removeAllRanges(),a.addRange(r),this.undoManger&&this.undoManger.save()}}}}}},function(){var s={37:1,38:1,39:1,40:1,13:1,32:1};browser.ie&&this.addListener("keyup",function(e,t){var i=t.keyCode;if(s[i]){var n=this.selection.getRange(),o=n.startContainer;if(13==i){for(;o&&!domUtils.isBody(o)&&!domUtils.isBlockElm(o);)o=o.parentNode;var a;if(o&&!domUtils.isBody(o)&&"P"==o.nodeName)if((a=o.previousSibling)&&1==a.nodeType)(a=function(e){if(3==e.nodeType)return null;if("A"==e.nodeName)return e;for(var t=e.lastChild;t;){if("A"==t.nodeName)return t;if(3==t.nodeType){if(domUtils.isWhitespace(t)){t=t.previousSibling;continue}return null}t=t.lastChild}}(a))&&!a.getAttribute("_href")&&domUtils.remove(a,!0)}else if(32==i)3==o.nodeType&&/^\s$/.test(o.nodeValue)&&((o=o.previousSibling)&&"A"==o.nodeName&&!o.getAttribute("_href")&&domUtils.remove(o,!0));else if((o=domUtils.findParentByTagName(o,"a",!0))&&!o.getAttribute("_href")){var r=n.createBookmark();domUtils.remove(o,!0),n.moveToBookmark(r).select(!0)}}})}),UE.plugins.autoheight=function(){function i(){var t=this;clearTimeout(e),r||(!t.queryCommandState||t.queryCommandState&&1!=t.queryCommandState("source"))&&(e=setTimeout(function(){for(var e=t.body.lastChild;e&&1!=e.nodeType;)e=e.previousSibling;e&&1==e.nodeType&&(e.style.clear="both",(a=Math.max(domUtils.getXY(e).y+e.offsetHeight+25,Math.max(d.minFrameHeight,d.initialFrameHeight)))!=l&&(a!==parseInt(t.iframe.parentNode.style.height)&&(t.iframe.parentNode.style.height=a+"px"),t.body.style.height=a+"px",l=a),domUtils.removeStyle(e,"clear"))},50))}function t(){n.window&&(null===s?s=n.window.scrollY:0==n.window.scrollY&&0!=s&&(n.window.scrollTo(0,0),s=null))}var n=this;if(n.autoHeightEnabled=!1!==n.options.autoHeightEnabled,n.autoHeightEnabled){var o,a,e,r,s,l=0,d=n.options;n.addListener("fullscreenchanged",function(e,t){r=t}),n.addListener("destroy",function(){domUtils.un(n.window,"scroll",t),n.removeListener("contentchange afterinserthtml keyup mouseup",i)}),n.enableAutoHeight=function(){var e=this;if(e.autoHeightEnabled){var t=e.document;e.autoHeightEnabled=!0,o=t.body.style.overflowY,t.body.style.overflowY="hidden",e.addListener("contentchange afterinserthtml keyup mouseup",i),setTimeout(function(){i.call(e)},browser.gecko?100:0),e.fireEvent("autoheightchanged",e.autoHeightEnabled)}},n.disableAutoHeight=function(){n.body.style.overflowY=o||"",n.removeListener("contentchange",i),n.removeListener("keyup",i),n.removeListener("mouseup",i),n.autoHeightEnabled=!1,n.fireEvent("autoheightchanged",n.autoHeightEnabled)},n.on("setHeight",function(){n.disableAutoHeight()}),n.addListener("ready",function(){var e;n.enableAutoHeight(),domUtils.on(browser.ie?n.body:n.document,browser.webkit?"dragover":"drop",function(){clearTimeout(e),e=setTimeout(function(){i.call(n)},100)}),domUtils.on(n.window,"scroll",t)})}},UE.plugins.autofloat=function(){function a(){p=!0,f.parentNode&&f.parentNode.removeChild(f),l.style.cssText=n}function i(){var e,t,i,n=c(r.container),o=r.options.toolbarTopOffset||0;n.top<0&&n.bottom-l.offsetHeight>o?(e=domUtils.getXY(l),t=domUtils.getComputedStyle(l,"position"),i=domUtils.getComputedStyle(l,"left"),l.style.width=l.offsetWidth+"px",l.style.zIndex=1*r.options.zIndex+1,l.parentNode.insertBefore(f,l),u||h&&browser.ie?("absolute"!=l.style.position&&(l.style.position="absolute"),l.style.top=(document.body.scrollTop||document.documentElement.scrollTop)-d+s+"px"):(browser.ie7Compat&&p&&(p=!1,l.style.left=domUtils.getXY(l).x-document.documentElement.getBoundingClientRect().left+2+"px"),"fixed"!=l.style.position&&(l.style.position="fixed",l.style.top=s+"px",("absolute"==t||"relative"==t)&&parseFloat(i)&&(l.style.left=e.x+"px")))):a()}var r=this,t=r.getLang();r.setOpt({topOffset:0});var e=!1!==r.options.autoFloatEnabled,s=r.options.topOffset;if(e){var n,l,d,c,o=UE.ui.uiUtils,u=browser.ie&&browser.version<=6,h=browser.quirks,f=document.createElement("div"),p=!0,m=utils.defer(function(){i()},browser.ie?200:100,!0);r.addListener("destroy",function(){domUtils.un(window,["scroll","resize"],i),r.removeListener("keydown",m)}),r.addListener("ready",function(){if(UE.ui||(alert(t.autofloatMsg),0)){if(!r.ui)return;c=o.getClientRect,l=r.ui.getDom("toolbarbox"),d=c(l).top,n=l.style.cssText,f.style.height=l.offsetHeight+"px",u&&((e=document.body.style).backgroundImage='url("about:blank")',e.backgroundAttachment="fixed"),domUtils.on(window,["scroll","resize"],i),r.addListener("keydown",m),r.addListener("beforefullscreenchange",function(e,t){t&&a()}),r.addListener("fullscreenchanged",function(e,t){t||i()}),r.addListener("sourcemodechanged",function(e,t){setTimeout(function(){i()},0)}),r.addListener("clearDoc",function(){setTimeout(function(){i()},0)})}var e})}},UE.plugins.video=function(){function c(e,t,i,n,o,a,r){var s;switch(r){case"image":s="<img "+(n?'id="'+n+'"':"")+' width="'+t+'" height="'+i+'" _url="'+e+'" class="'+a.replace(/\bvideo-js\b/,"")+'" src="'+u.options.UEDITOR_HOME_URL+'themes/default/images/spacer.gif" style="background:url('+u.options.UEDITOR_HOME_URL+"themes/default/images/videologo.gif) no-repeat center center; border:1px solid gray;"+(o?"float:"+o+";":"")+'" />';break;case"embed":s='<embed type="application/x-shockwave-flash" class="'+a+'" pluginspage="http://www.macromedia.com/go/getflashplayer" src="'+utils.html(e)+'" width="'+t+'" height="'+i+'"'+(o?' style="float:'+o+'"':"")+' wmode="transparent" play="true" loop="false" menu="false" allowscriptaccess="never" allowfullscreen="true" >';break;case"video":var l=e.substr(e.lastIndexOf(".")+1);"ogv"==l&&(l="ogg"),s="<video"+(n?' id="'+n+'"':"")+' class="'+a+' video-js" '+(o?' style="float:'+o+'"':"")+' controls preload="none" width="'+t+'" height="'+i+'" src="'+e+'" data-setup="{}"><source src="'+e+'" type="video/'+l+'" /></video>'}return s}function t(e,n){utils.each(e.getNodesByTagName(n?"img":"embed video"),function(e){var t=e.getAttr("class");if(t&&-1!=t.indexOf("edui-faked-video")){var i=c(n?e.getAttr("_url"):e.getAttr("src"),e.getAttr("width"),e.getAttr("height"),null,e.getStyle("float")||"",t,n?"embed":"image");e.parentNode.replaceChild(UE.uNode.createElement(i),e)}if(t&&-1!=t.indexOf("edui-upload-video")){i=c(n?e.getAttr("_url"):e.getAttr("src"),e.getAttr("width"),e.getAttr("height"),null,e.getStyle("float")||"",t,n?"video":"image");e.parentNode.replaceChild(UE.uNode.createElement(i),e)}})}var u=this;u.addOutputRule(function(e){t(e,!0)}),u.addInputRule(function(e){t(e)}),u.commands.insertvideo={execCommand:function(e,t,i){if(t=utils.isArray(t)?t:[t],!0!==u.fireEvent("beforeinsertvideo",t)){for(var n,o,a=[],r=0,s=t.length;r<s;r++)o=t[r],n="upload"==i?"edui-upload-video video-js vjs-default-skin":"edui-faked-video",a.push(c(o.url,o.width||420,o.height||280,"tmpVedio"+r,null,n,"image"));u.execCommand("inserthtml",a.join(""),!0);var l=this.selection.getRange();for(r=0,s=t.length;r<s;r++){var d=this.document.getElementById("tmpVedio"+r);domUtils.removeAttributes(d,"id"),l.selectNode(d).select(),u.execCommand("imagefloat",t[r].align)}u.fireEvent("afterinsertvideo",t)}},queryCommandState:function(){var e=u.selection.getRange().getClosedNode();return e&&("edui-faked-video"==e.className||-1!=e.className.indexOf("edui-upload-video"))?1:0}}},cLg=UE.UETable=function(e){this.table=e,this.indexTable=[],this.selectedTds=[],this.cellsRange={},this.update(e)},cLg.removeSelectedClass=function(e){utils.each(e,function(e){domUtils.removeClasses(e,"selectTdClass")})},cLg.addSelectedClass=function(e){utils.each(e,function(e){domUtils.addClass(e,"selectTdClass")})},cLg.isEmptyBlock=function(e){var t=new RegExp(domUtils.fillChar,"g");if(0<e[browser.ie?"innerText":"textContent"].replace(/^\s*$/,"").replace(t,"").length)return 0;for(var i in dtd.$isNotEmpty)if(dtd.$isNotEmpty.hasOwnProperty(i)&&e.getElementsByTagName(i).length)return 0;return 1},cLg.getWidth=function(e){return e?parseInt(domUtils.getComputedStyle(e,"width"),10):0},cLg.getTableCellAlignState=function(e){!utils.isArray(e)&&(e=[e]);var i={},n=["align","valign"],o=null,a=!0;return utils.each(e,function(t){return utils.each(n,function(e){if(o=t.getAttribute(e),!i[e]&&o)i[e]=o;else if(!i[e]||o!==i[e])return a=!1}),a}),a?i:null},cLg.getTableItemsByRange=function(e){var t=e.selection.getStart();t&&t.id&&0===t.id.indexOf("_baidu_bookmark_start_")&&t.nextSibling&&(t=t.nextSibling);var i=t&&domUtils.findParentByTagName(t,["td","th"],!0),n=i&&i.parentNode,o=n&&domUtils.findParentByTagName(n,["table"]),a=o&&o.getElementsByTagName("caption")[0];return{cell:i,tr:n,table:o,caption:a}},cLg.getUETableBySelected=function(e){var t=cLg.getTableItemsByRange(e).table;return t&&t.ueTable&&t.ueTable.selectedTds.length?t.ueTable:null},cLg.getDefaultValue=function(e,t){var i,n,o,a,r={thin:"0px",medium:"1px",thick:"2px"};if(t)return s=t.getElementsByTagName("td")[0],a=domUtils.getComputedStyle(t,"border-left-width"),i=parseInt(r[a]||a,10),a=domUtils.getComputedStyle(s,"padding-left"),n=parseInt(r[a]||a,10),a=domUtils.getComputedStyle(s,"border-left-width"),{tableBorder:i,tdPadding:n,tdBorder:o=parseInt(r[a]||a,10)};(t=e.document.createElement("table")).insertRow(0).insertCell(0).innerHTML="xxx",e.body.appendChild(t);var s=t.getElementsByTagName("td")[0];return a=domUtils.getComputedStyle(t,"border-left-width"),i=parseInt(r[a]||a,10),a=domUtils.getComputedStyle(s,"padding-left"),n=parseInt(r[a]||a,10),a=domUtils.getComputedStyle(s,"border-left-width"),o=parseInt(r[a]||a,10),domUtils.remove(t),{tableBorder:i,tdPadding:n,tdBorder:o}},cLg.getUETable=function(e){var t=e.tagName.toLowerCase();return(e="td"==t||"th"==t||"caption"==t?domUtils.findParentByTagName(e,"table",!0):e).ueTable||(e.ueTable=new cLg(e)),e.ueTable},cLg.cloneCell=function(e,t,i){if(!e||utils.isString(e))return this.table.ownerDocument.createElement(e||"td");var n=domUtils.hasClass(e,"selectTdClass");n&&domUtils.removeClasses(e,"selectTdClass");var o=e.cloneNode(!0);return t&&(o.rowSpan=o.colSpan=1),!i&&domUtils.removeAttributes(o,"width height"),!i&&domUtils.removeAttributes(o,"style"),o.style.borderLeftStyle="",o.style.borderTopStyle="",o.style.borderLeftColor=e.style.borderRightColor,o.style.borderLeftWidth=e.style.borderRightWidth,o.style.borderTopColor=e.style.borderBottomColor,o.style.borderTopWidth=e.style.borderBottomWidth,n&&domUtils.addClass(e,"selectTdClass"),o},cLg.prototype={getMaxRows:function(){for(var e,t=this.table.rows,i=1,n=0;e=t[n];n++){for(var o,a=1,r=0;o=e.cells[r++];)a=Math.max(o.rowSpan||1,a);i=Math.max(a+n,i)}return i},getMaxCols:function(){for(var e,t=this.table.rows,i=0,n={},o=0;e=t[o];o++){for(var a,r=0,s=0;a=e.cells[s++];)if(r+=a.colSpan||1,a.rowSpan&&1<a.rowSpan)for(var l=1;l<a.rowSpan;l++)n["row_"+(o+l)]?n["row_"+(o+l)]++:n["row_"+(o+l)]=a.colSpan||1;r+=n["row_"+o]||0,i=Math.max(r,i)}return i},getCellColIndex:function(e){},getHSideCell:function(e,t){try{var i,n,o=this.getCellInfo(e),a=this.selectedTds.length,r=this.cellsRange;return!t&&(a?!r.beginColIndex:!o.colIndex)||t&&(a?r.endColIndex==this.colsNum-1:o.colIndex==this.colsNum-1)?null:(i=a?r.beginRowIndex:o.rowIndex,n=t?a?r.endColIndex+1:o.colIndex+1:a?r.beginColIndex-1:o.colIndex<1?0:o.colIndex-1,this.getCell(this.indexTable[i][n].rowIndex,this.indexTable[i][n].cellIndex))}catch(e){}},getTabNextCell:function(e,t){var i,n=this.getCellInfo(e),o=t||n.rowIndex,a=n.colIndex+1+(n.colSpan-1);try{i=this.getCell(this.indexTable[o][a].rowIndex,this.indexTable[o][a].cellIndex)}catch(e){try{o=1*o+1,a=0,i=this.getCell(this.indexTable[o][a].rowIndex,this.indexTable[o][a].cellIndex)}catch(e){}}return i},getVSideCell:function(e,t,i){try{var n,o,a=this.getCellInfo(e),r=this.selectedTds.length&&!i,s=this.cellsRange;return!t&&0==a.rowIndex||t&&(r?s.endRowIndex==this.rowsNum-1:a.rowIndex+a.rowSpan>this.rowsNum-1)?null:(n=t?r?s.endRowIndex+1:a.rowIndex+a.rowSpan:r?s.beginRowIndex-1:a.rowIndex-1,o=r?s.beginColIndex:a.colIndex,this.getCell(this.indexTable[n][o].rowIndex,this.indexTable[n][o].cellIndex))}catch(e){}},getSameEndPosCells:function(e,t){try{for(var i="x"===t.toLowerCase(),n=domUtils.getXY(e)[i?"x":"y"]+e["offset"+(i?"Width":"Height")],o=this.table.rows,a=null,r=[],s=0;s<this.rowsNum;s++){a=o[s].cells;for(var l,d=0;l=a[d++];){var c=domUtils.getXY(l)[i?"x":"y"]+l["offset"+(i?"Width":"Height")];if(n<c&&i)break;if((e==l||n==c)&&(1==l[i?"colSpan":"rowSpan"]&&r.push(l),i))break}}return r}catch(e){}},setCellContent:function(e,t){e.innerHTML=t||(browser.ie?domUtils.fillChar:"<br />")},cloneCell:cLg.cloneCell,getSameStartPosXCells:function(e){try{for(var t,i=domUtils.getXY(e).x+e.offsetWidth,n=this.table.rows,o=[],a=0;a<this.rowsNum;a++){t=n[a].cells;for(var r,s=0;r=t[s++];){var l=domUtils.getXY(r).x;if(i<l)break;if(l==i&&1==r.colSpan){o.push(r);break}}}return o}catch(e){}},update:function(e){this.table=e||this.table,this.selectedTds=[],this.cellsRange={},this.indexTable=[];for(var t=this.table.rows,i=this.getMaxRows(),n=i-t.length,o=this.getMaxCols();n--;)this.table.insertRow(t.length);this.rowsNum=i,this.colsNum=o;for(var a=0,r=t.length;a<r;a++)this.indexTable[a]=new Array(o);for(var s,l=0;s=t[l];l++)for(var d,c=0,u=s.cells;d=u[c];c++){d.rowSpan>i&&(d.rowSpan=i);for(var h=c,f=d.rowSpan||1,p=d.colSpan||1;this.indexTable[l][h];)h++;for(var m=0;m<f;m++)for(var g=0;g<p;g++)this.indexTable[l+m][h+g]={rowIndex:l,cellIndex:c,colIndex:h,rowSpan:f,colSpan:p}}for(m=0;m<i;m++)for(g=0;g<o;g++)void 0===this.indexTable[m][g]&&(d=(d=(s=t[m]).cells[s.cells.length-1])?d.cloneNode(!0):this.table.ownerDocument.createElement("td"),this.setCellContent(d),1!==d.colSpan&&(d.colSpan=1),1!==d.rowSpan&&(d.rowSpan=1),s.appendChild(d),this.indexTable[m][g]={rowIndex:m,cellIndex:d.cellIndex,colIndex:g,rowSpan:1,colSpan:1});var v=domUtils.getElementsByTagName(this.table,"td"),y=[];if(utils.each(v,function(e){domUtils.hasClass(e,"selectTdClass")&&y.push(e)}),y.length){var b=y[0],x=y[y.length-1],w=this.getCellInfo(b),_=this.getCellInfo(x);this.selectedTds=y,this.cellsRange={beginRowIndex:w.rowIndex,beginColIndex:w.colIndex,endRowIndex:_.rowIndex+_.rowSpan-1,endColIndex:_.colIndex+_.colSpan-1}}if(!domUtils.hasClass(this.table.rows[0],"firstRow"))for(domUtils.addClass(this.table.rows[0],"firstRow"),a=1;a<this.table.rows.length;a++)domUtils.removeClasses(this.table.rows[a],"firstRow")},getCellInfo:function(e){if(e)for(var t=e.cellIndex,i=e.parentNode.rowIndex,n=this.indexTable[i],o=this.colsNum,a=t;a<o;a++){var r=n[a];if(r.rowIndex===i&&r.cellIndex===t)return r}},getCell:function(e,t){return e<this.rowsNum&&this.table.rows[e].cells[t]||null},deleteCell:function(e,t){t="number"==typeof t?t:e.parentNode.rowIndex,this.table.rows[t].deleteCell(e.cellIndex)},getCellsRange:function(e,t){try{var h=this,i=h.getCellInfo(e);if(e===t)return{beginRowIndex:i.rowIndex,beginColIndex:i.colIndex,endRowIndex:i.rowIndex+i.rowSpan-1,endColIndex:i.colIndex+i.colSpan-1};var n=h.getCellInfo(t);return function e(t,i,n,o){var a,r,s,l=t,d=i,c=n,u=o;if(0<t)for(r=i;r<o;r++)(s=(a=h.indexTable[t][r]).rowIndex)<t&&(l=Math.min(s,l));if(o<h.colsNum)for(s=t;s<n;s++)o<(r=(a=h.indexTable[s][o]).colIndex+a.colSpan-1)&&(u=Math.max(r,u));if(n<h.rowsNum)for(r=i;r<o;r++)n<(s=(a=h.indexTable[n][r]).rowIndex+a.rowSpan-1)&&(c=Math.max(s,c));if(0<i)for(s=t;s<n;s++)(r=(a=h.indexTable[s][i]).colIndex)<i&&(d=Math.min(a.colIndex,d));return l!=t||d!=i||c!=n||u!=o?e(l,d,c,u):{beginRowIndex:t,beginColIndex:i,endRowIndex:n,endColIndex:o}}(Math.min(i.rowIndex,n.rowIndex),Math.min(i.colIndex,n.colIndex),Math.max(i.rowIndex+i.rowSpan-1,n.rowIndex+n.rowSpan-1),Math.max(i.colIndex+i.colSpan-1,n.colIndex+n.colSpan-1))}catch(e){}},getCells:function(e){this.clearSelected();for(var t,i,n,o=e.beginRowIndex,a=e.beginColIndex,r=e.endRowIndex,s=e.endColIndex,l={},d=[],c=o;c<=r;c++)for(var u=a;u<=s;u++){var h=(i=(t=this.indexTable[c][u]).rowIndex)+"|"+(n=t.colIndex);if(!l[h]){if(l[h]=1,i<c||n<u||i+t.rowSpan-1>r||n+t.colSpan-1>s)return null;d.push(this.getCell(i,t.cellIndex))}}return d},clearSelected:function(){cLg.removeSelectedClass(this.selectedTds),this.selectedTds=[],this.cellsRange={}},setSelected:function(e){var t=this.getCells(e);cLg.addSelectedClass(t),this.selectedTds=t,this.cellsRange=e},isFullRow:function(){var e=this.cellsRange;return e.endColIndex-e.beginColIndex+1==this.colsNum},isFullCol:function(){var e=this.cellsRange,t=this.table.getElementsByTagName("th"),i=e.endRowIndex-e.beginRowIndex+1;return t.length?i==this.rowsNum||i==this.rowsNum-1:i==this.rowsNum},getNextCell:function(e,t,i){try{var n,o,a=this.getCellInfo(e),r=this.selectedTds.length&&!i,s=this.cellsRange;return!t&&0==a.rowIndex||t&&(r?s.endRowIndex==this.rowsNum-1:a.rowIndex+a.rowSpan>this.rowsNum-1)?null:(n=t?r?s.endRowIndex+1:a.rowIndex+a.rowSpan:r?s.beginRowIndex-1:a.rowIndex-1,o=r?s.beginColIndex:a.colIndex,this.getCell(this.indexTable[n][o].rowIndex,this.indexTable[n][o].cellIndex))}catch(e){}},getPreviewCell:function(e,t){try{var i,n,o=this.getCellInfo(e),a=this.selectedTds.length,r=this.cellsRange;return!t&&(a?!r.beginColIndex:!o.colIndex)||t&&(a?r.endColIndex==this.colsNum-1:o.rowIndex>this.colsNum-1)?null:(i=t?a?r.beginRowIndex:o.rowIndex<1?0:o.rowIndex-1:a?r.beginRowIndex:o.rowIndex,n=t?a?r.endColIndex+1:o.colIndex:a?r.beginColIndex-1:o.colIndex<1?0:o.colIndex-1,this.getCell(this.indexTable[i][n].rowIndex,this.indexTable[i][n].cellIndex))}catch(e){}},moveContent:function(e,t){if(!cLg.isEmptyBlock(t)){if(cLg.isEmptyBlock(e))return void(e.innerHTML=t.innerHTML);var i=e.lastChild;for(3!=i.nodeType&&dtd.$block[i.tagName]||e.appendChild(e.ownerDocument.createElement("br"));i=t.firstChild;)e.appendChild(i)}},mergeRight:function(e){var t=this.getCellInfo(e),i=t.colIndex+t.colSpan,n=this.indexTable[t.rowIndex][i],o=this.getCell(n.rowIndex,n.cellIndex);e.colSpan=t.colSpan+n.colSpan,e.removeAttribute("width"),this.moveContent(e,o),this.deleteCell(o,n.rowIndex),this.update()},mergeDown:function(e){var t=this.getCellInfo(e),i=t.rowIndex+t.rowSpan,n=this.indexTable[i][t.colIndex],o=this.getCell(n.rowIndex,n.cellIndex);e.rowSpan=t.rowSpan+n.rowSpan,e.removeAttribute("height"),this.moveContent(e,o),this.deleteCell(o,n.rowIndex),this.update()},mergeRange:function(){for(var e,t=this.cellsRange,i=this.getCell(t.beginRowIndex,this.indexTable[t.beginRowIndex][t.beginColIndex].cellIndex),n=this.getCells(t),o=0;e=n[o++];)e!==i&&(this.moveContent(i,e),this.deleteCell(e));if(i.rowSpan=t.endRowIndex-t.beginRowIndex+1,1<i.rowSpan&&i.removeAttribute("height"),i.colSpan=t.endColIndex-t.beginColIndex+1,1<i.colSpan&&i.removeAttribute("width"),i.rowSpan==this.rowsNum&&1!=i.colSpan&&(i.colSpan=1),i.colSpan==this.colsNum&&1!=i.rowSpan){var a=i.parentNode.rowIndex;if(this.table.deleteRow)for(var r=o=a+1,s=i.rowSpan;o<s;o++)this.table.deleteRow(r);else for(o=0,s=i.rowSpan-1;o<s;o++){var l=this.table.rows[a+1];l.parentNode.removeChild(l)}i.rowSpan=1}this.update()},insertRow:function(e,t){function i(e,t,i){if(0==e){var n=(i.nextSibling||i.previousSibling).cells[e];"TH"==n.tagName&&((n=t.ownerDocument.createElement("th")).appendChild(t.firstChild),i.insertBefore(n,t),domUtils.remove(t))}else if("TH"==t.tagName){var o=t.ownerDocument.createElement("td");o.appendChild(t.firstChild),i.insertBefore(o,t),domUtils.remove(t)}}var n,o=this.colsNum,a=this.table,r=a.insertRow(e),s=null,l="string"==typeof t&&"TH"==t.toUpperCase();if(0==e||e==this.rowsNum){for(var d=0;d<o;d++)n=this.cloneCell(t,!0),this.setCellContent(n),n.getAttribute("vAlign")&&n.setAttribute("vAlign",n.getAttribute("vAlign")),r.appendChild(n),l||i(d,n,r);l&&(s=a.createTHead()).insertBefore(r,s.firstChild)}else{var c=this.indexTable[e];for(d=0;d<o;d++){var u=c[d];u.rowIndex<e?(n=this.getCell(u.rowIndex,u.cellIndex)).rowSpan=u.rowSpan+1:(n=this.cloneCell(t,!0),this.setCellContent(n),r.appendChild(n)),l||i(d,n,r)}}return this.update(),r},deleteRow:function(e){for(var t=this.table.rows[e],i=this.indexTable[e],n=this.colsNum,o=0,a=0;a<n;){var r=i[a],s=this.getCell(r.rowIndex,r.cellIndex);if(1<s.rowSpan&&r.rowIndex==e){var l=s.cloneNode(!0);l.rowSpan=s.rowSpan-1,l.innerHTML="";var d,c=e+(s.rowSpan=1),u=this.table.rows[c],h=this.getPreviewMergedCellsNum(c,a)-o;h<a?(d=a-h-1,domUtils.insertAfter(u.cells[d],l)):u.cells.length&&u.insertBefore(l,u.cells[0]),o+=1}a+=s.colSpan||1}var f=[],p={};for(a=0;a<n;a++){var m=i[a].rowIndex,g=i[a].cellIndex,v=m+"_"+g;p[v]||(p[v]=1,s=this.getCell(m,g),f.push(s))}var y=[];utils.each(f,function(e){1==e.rowSpan?e.parentNode.removeChild(e):y.push(e)}),utils.each(y,function(e){e.rowSpan--}),t.parentNode.removeChild(t),this.update()},insertCol:function(e,t,i){function n(e,t,i){if(0==e){var n=t.nextSibling||t.previousSibling;"TH"==n.tagName&&((n=t.ownerDocument.createElement("th")).appendChild(t.firstChild),i.insertBefore(n,t),domUtils.remove(t))}else if("TH"==t.tagName){var o=t.ownerDocument.createElement("td");o.appendChild(t.firstChild),i.insertBefore(o,t),domUtils.remove(t)}}var o,a,r,s=this.rowsNum,l=0,d=parseInt((this.table.offsetWidth-20*(this.colsNum+1)-(this.colsNum+1))/(this.colsNum+1),10),c="string"==typeof t&&"TH"==t.toUpperCase();if(0==e||e==this.colsNum)for(;l<s;l++)r=(o=this.table.rows[l]).cells[0==e?e:o.cells.length],a=this.cloneCell(t,!0),this.setCellContent(a),a.setAttribute("vAlign",a.getAttribute("vAlign")),r&&a.setAttribute("width",r.getAttribute("width")),e?domUtils.insertAfter(o.cells[o.cells.length-1],a):o.insertBefore(a,o.cells[0]),c||n(l,a,o);else for(;l<s;l++){var u=this.indexTable[l][e];u.colIndex<e?(a=this.getCell(u.rowIndex,u.cellIndex)).colSpan=u.colSpan+1:(r=(o=this.table.rows[l]).cells[u.cellIndex],a=this.cloneCell(t,!0),this.setCellContent(a),a.setAttribute("vAlign",a.getAttribute("vAlign")),r&&a.setAttribute("width",r.getAttribute("width")),r?o.insertBefore(a,r):o.appendChild(a)),c||n(l,a,o)}this.update(),this.updateWidth(d,i||{tdPadding:10,tdBorder:1})},updateWidth:function(t,e){var i=this.table,n=cLg.getWidth(i)-2*e.tdPadding-e.tdBorder+t;if(n<i.ownerDocument.body.offsetWidth)i.setAttribute("width",n);else{var o=domUtils.getElementsByTagName(this.table,"td th");utils.each(o,function(e){e.setAttribute("width",t)})}},deleteCol:function(e){for(var t=this.indexTable,i=this.table.rows,n=this.table.getAttribute("width"),o=0,a=this.rowsNum,r={},s=0;s<a;){var l=t[s][e],d=l.rowIndex+"_"+l.colIndex;if(!r[d]){r[d]=1;var c=this.getCell(l.rowIndex,l.cellIndex);o||(o=c&&parseInt(c.offsetWidth/c.colSpan,10).toFixed(0)),1<c.colSpan?c.colSpan--:i[s].deleteCell(l.cellIndex),s+=l.rowSpan||1}}this.table.setAttribute("width",n-o),this.update()},splitToCells:function(e){var t=this,i=this.splitToRows(e);utils.each(i,function(e){t.splitToCols(e)})},splitToRows:function(e){var t=this.getCellInfo(e),i=t.rowIndex,n=t.colIndex,o=[];e.rowSpan=1,o.push(e);for(var a=i,r=i+t.rowSpan;a<r;a++)if(a!=i){var s=this.table.rows[a].insertCell(n-this.getPreviewMergedCellsNum(a,n));s.colSpan=t.colSpan,this.setCellContent(s),s.setAttribute("vAlign",e.getAttribute("vAlign")),s.setAttribute("align",e.getAttribute("align")),e.style.cssText&&(s.style.cssText=e.style.cssText),o.push(s)}return this.update(),o},getPreviewMergedCellsNum:function(e,t){for(var i=this.indexTable[e],n=0,o=0;o<t;){var a=i[o].colSpan;n+=a-(i[o].rowIndex==e?1:0),o+=a}return n},splitToCols:function(e){var t=(e.offsetWidth/e.colSpan-22).toFixed(0),i=this.getCellInfo(e),n=i.rowIndex,o=i.colIndex,a=[];e.colSpan=1,e.setAttribute("width",t),a.push(e);for(var r=o,s=o+i.colSpan;r<s;r++)if(r!=o){var l=this.table.rows[n],d=l.insertCell(this.indexTable[n][r].cellIndex+1);if(d.rowSpan=i.rowSpan,this.setCellContent(d),d.setAttribute("vAlign",e.getAttribute("vAlign")),d.setAttribute("align",e.getAttribute("align")),d.setAttribute("width",t),e.style.cssText&&(d.style.cssText=e.style.cssText),"TH"==e.tagName){var c=e.ownerDocument.createElement("th");c.appendChild(d.firstChild),c.setAttribute("vAlign",e.getAttribute("vAlign")),c.rowSpan=d.rowSpan,l.insertBefore(c,d),domUtils.remove(d)}a.push(d)}return this.update(),a},isLastCell:function(e,t,i){t=t||this.rowsNum,i=i||this.colsNum;var n=this.getCellInfo(e);return n.rowIndex+n.rowSpan==t&&n.colIndex+n.colSpan==i},getLastCell:function(e){e=e||this.table.getElementsByTagName("td");var t,i=(this.getCellInfo(e[0]),this),n=e[0],o=n.parentNode,a=0,r=0;return utils.each(e,function(e){e.parentNode==o&&(r+=e.colSpan||1),a+=e.rowSpan*e.colSpan||1}),t=a/r,utils.each(e,function(e){if(i.isLastCell(e,t,r))return n=e,!1}),n},selectRow:function(e){var t=this.indexTable[e],i=this.getCell(t[0].rowIndex,t[0].cellIndex),n=this.getCell(t[this.colsNum-1].rowIndex,t[this.colsNum-1].cellIndex),o=this.getCellsRange(i,n);this.setSelected(o)},selectTable:function(){var e=this.table.getElementsByTagName("td"),t=this.getCellsRange(e[0],e[e.length-1]);this.setSelected(t)},setBackground:function(e,t){if("string"==typeof t)utils.each(e,function(e){e.style.backgroundColor=t});else if("object"==typeof t){t=utils.extend({repeat:!0,colorList:["#ddd","#fff"]},t);for(var i,n=this.getCellInfo(e[0]).rowIndex,o=0,a=t.colorList,r=0;i=e[r++];){var s=this.getCellInfo(i);i.style.backgroundColor=(l=a,d=n+o==s.rowIndex?o:++o,c=t.repeat,l[d]?l[d]:c?l[d%l.length]:"")}}var l,d,c},removeBackground:function(e){utils.each(e,function(e){e.style.backgroundColor=""})}},function(){function n(e,t){var i,n,o,a,r=domUtils.getElementsByTagName(e,"td th");utils.each(r,function(e){e.removeAttribute("width")}),e.setAttribute("width",(n=!0,o=g(i=t,e),(a=i.body).offsetWidth-(n?2*parseInt(domUtils.getComputedStyle(a,"margin-left"),10):0)-2*o.tableBorder-(i.options.offsetWidth||0)));var s=[];setTimeout(function(){utils.each(r,function(e){1==e.colSpan&&s.push(e.offsetWidth)}),utils.each(r,function(e,t){1==e.colSpan&&e.setAttribute("width",s[t]+"")})},0)}function a(e){var t=u(e).cell;if(t){var i=h(t);return i.selectedTds.length?i.selectedTds:[t]}return[]}var i=UE.UETable,u=function(e){return i.getTableItemsByRange(e)},r=function(e){return i.getUETableBySelected(e)},g=function(e,t){return i.getDefaultValue(e,t)},h=function(e){return i.getUETable(e)};UE.commands.inserttable={queryCommandState:function(){return u(this).table?-1:0},execCommand:function(e,t){t||(t=utils.extend({},{numCols:this.options.defaultCols,numRows:this.options.defaultRows,tdvalign:this.options.tdvalign}));var i=this.selection.getRange().startContainer,n=domUtils.findParent(i,function(e){return domUtils.isBlockElm(e)},!0)||this.body,o=g(this),a=n.offsetWidth,r=Math.floor(a/t.numCols-2*o.tdPadding-o.tdBorder);!t.tdvalign&&(t.tdvalign=this.options.tdvalign),this.execCommand("inserthtml",function(e,t){for(var i=[],n=e.numRows,o=e.numCols,a=0;a<n;a++){i.push("<tr"+(0==a?' class="firstRow"':"")+">");for(var r=0;r<o;r++)i.push('<td width="'+t+'"  vAlign="'+e.tdvalign+'" >'+(browser.ie&&browser.version<11?domUtils.fillChar:"<br/>")+"</td>");i.push("</tr>")}return"<table><tbody>"+i.join("")+"</tbody></table>"}(t,r))}},UE.commands.insertparagraphbeforetable={queryCommandState:function(){return u(this).cell?0:-1},execCommand:function(){var e=u(this).table;if(e){var t=this.document.createElement("p");t.innerHTML=browser.ie?"&nbsp;":"<br />",e.parentNode.insertBefore(t,e),this.selection.getRange().setStart(t,0).setCursor()}}},UE.commands.deletetable={queryCommandState:function(){var e=this.selection.getRange();return domUtils.findParentByTagName(e.startContainer,"table",!0)?0:-1},execCommand:function(e,t){var i=this.selection.getRange();if(t=t||domUtils.findParentByTagName(i.startContainer,"table",!0)){var n=t.nextSibling;n||(n=domUtils.createElement(this.document,"p",{innerHTML:browser.ie?domUtils.fillChar:"<br/>"}),t.parentNode.insertBefore(n,t)),domUtils.remove(t),i=this.selection.getRange(),3==n.nodeType?i.setStartBefore(n):i.setStart(n,0),i.setCursor(!1,!0),this.fireEvent("tablehasdeleted")}}},UE.commands.cellalign={queryCommandState:function(){return a(this).length?0:-1},execCommand:function(e,t){var i=a(this);if(i.length)for(var n,o=0;n=i[o++];)n.setAttribute("align",t)}},UE.commands.cellvalign={queryCommandState:function(){return a(this).length?0:-1},execCommand:function(e,t){var i=a(this);if(i.length)for(var n,o=0;n=i[o++];)n.setAttribute("vAlign",t)}},UE.commands.insertcaption={queryCommandState:function(){var e=u(this).table;return e&&0==e.getElementsByTagName("caption").length?1:-1},execCommand:function(){var e=u(this).table;if(e){var t=this.document.createElement("caption");t.innerHTML=browser.ie?domUtils.fillChar:"<br/>",e.insertBefore(t,e.firstChild),this.selection.getRange().setStart(t,0).setCursor()}}},UE.commands.deletecaption={queryCommandState:function(){var e=this.selection.getRange(),t=domUtils.findParentByTagName(e.startContainer,"table");return t?0==t.getElementsByTagName("caption").length?-1:1:-1},execCommand:function(){var e=this.selection.getRange(),t=domUtils.findParentByTagName(e.startContainer,"table");t&&(domUtils.remove(t.getElementsByTagName("caption")[0]),this.selection.getRange().setStart(t.rows[0].cells[0],0).setCursor())}},UE.commands.inserttitle={queryCommandState:function(){var e=u(this).table;if(e){var t=e.rows[0];return"th"!=t.cells[t.cells.length-1].tagName.toLowerCase()?0:-1}return-1},execCommand:function(){var e=u(this).table;e&&h(e).insertRow(0,"th");var t=e.getElementsByTagName("th")[0];this.selection.getRange().setStart(t,0).setCursor(!1,!0)}},UE.commands.deletetitle={queryCommandState:function(){var e=u(this).table;if(e){var t=e.rows[0];return"th"==t.cells[t.cells.length-1].tagName.toLowerCase()?0:-1}return-1},execCommand:function(){var e=u(this).table;e&&domUtils.remove(e.rows[0]);var t=e.getElementsByTagName("td")[0];this.selection.getRange().setStart(t,0).setCursor(!1,!0)}},UE.commands.inserttitlecol={queryCommandState:function(){var e=u(this).table;return e?e.rows[e.rows.length-1].getElementsByTagName("th").length?-1:0:-1},execCommand:function(e){var t=u(this).table;t&&h(t).insertCol(0,"th"),n(t,this);var i=t.getElementsByTagName("th")[0];this.selection.getRange().setStart(i,0).setCursor(!1,!0)}},UE.commands.deletetitlecol={queryCommandState:function(){var e=u(this).table;return e&&e.rows[e.rows.length-1].getElementsByTagName("th").length?0:-1},execCommand:function(){var e=u(this).table;if(e)for(var t=0;t<e.rows.length;t++)domUtils.remove(e.rows[t].children[0]);n(e,this);var i=e.getElementsByTagName("td")[0];this.selection.getRange().setStart(i,0).setCursor(!1,!0)}},UE.commands.mergeright={queryCommandState:function(e){var t=u(this),i=t.table,n=t.cell;if(!i||!n)return-1;var o=h(i);if(o.selectedTds.length)return-1;var a=o.getCellInfo(n),r=a.colIndex+a.colSpan;if(r>=o.colsNum)return-1;var s=o.indexTable[a.rowIndex][r],l=i.rows[s.rowIndex].cells[s.cellIndex];return l&&n.tagName==l.tagName&&s.rowIndex==a.rowIndex&&s.rowSpan==a.rowSpan?0:-1},execCommand:function(e){var t=this.selection.getRange(),i=t.createBookmark(!0),n=u(this).cell;h(n).mergeRight(n),t.moveToBookmark(i).select()}},UE.commands.mergedown={queryCommandState:function(e){var t=u(this),i=t.table,n=t.cell;if(!i||!n)return-1;var o=h(i);if(o.selectedTds.length)return-1;var a=o.getCellInfo(n),r=a.rowIndex+a.rowSpan;if(r>=o.rowsNum)return-1;var s=o.indexTable[r][a.colIndex],l=i.rows[s.rowIndex].cells[s.cellIndex];return l&&n.tagName==l.tagName&&s.colIndex==a.colIndex&&s.colSpan==a.colSpan?0:-1},execCommand:function(){var e=this.selection.getRange(),t=e.createBookmark(!0),i=u(this).cell;h(i).mergeDown(i),e.moveToBookmark(t).select()}},UE.commands.mergecells={queryCommandState:function(){return r(this)?0:-1},execCommand:function(){var e=r(this);if(e&&e.selectedTds.length){var t=e.selectedTds[0];e.mergeRange();var i=this.selection.getRange();domUtils.isEmptyBlock(t)?i.setStart(t,0).collapse(!0):i.selectNodeContents(t),i.select()}}},UE.commands.insertrow={queryCommandState:function(){var e=u(this),t=e.cell;return t&&("TD"==t.tagName||"TH"==t.tagName&&e.tr!==e.table.rows[0])&&h(e.table).rowsNum<this.options.maxRowNum?0:-1},execCommand:function(){var e=this.selection.getRange(),t=e.createBookmark(!0),i=u(this),n=i.cell,o=i.table,a=h(o),r=a.getCellInfo(n);if(a.selectedTds.length)for(var s=a.cellsRange,l=0,d=s.endRowIndex-s.beginRowIndex+1;l<d;l++)a.insertRow(s.beginRowIndex,n);else a.insertRow(r.rowIndex,n);e.moveToBookmark(t).select(),"enabled"===o.getAttribute("interlaced")&&this.fireEvent("interlacetable",o)}},UE.commands.insertrownext={queryCommandState:function(){var e=u(this),t=e.cell;return t&&"TD"==t.tagName&&h(e.table).rowsNum<this.options.maxRowNum?0:-1},execCommand:function(){var e=this.selection.getRange(),t=e.createBookmark(!0),i=u(this),n=i.cell,o=i.table,a=h(o),r=a.getCellInfo(n);if(a.selectedTds.length)for(var s=a.cellsRange,l=0,d=s.endRowIndex-s.beginRowIndex+1;l<d;l++)a.insertRow(s.endRowIndex+1,n);else a.insertRow(r.rowIndex+r.rowSpan,n);e.moveToBookmark(t).select(),"enabled"===o.getAttribute("interlaced")&&this.fireEvent("interlacetable",o)}},UE.commands.deleterow={queryCommandState:function(){return u(this).cell?0:-1},execCommand:function(){var e=u(this).cell,t=h(e),i=t.cellsRange,n=t.getCellInfo(e),o=t.getVSideCell(e),a=t.getVSideCell(e,!0),r=this.selection.getRange();if(utils.isEmptyObject(i))t.deleteRow(n.rowIndex);else for(var s=i.beginRowIndex;s<i.endRowIndex+1;s++)t.deleteRow(i.beginRowIndex);var l=t.table;if(l.getElementsByTagName("td").length)if(1==n.rowSpan||n.rowSpan==i.endRowIndex-i.beginRowIndex+1)(a||o)&&r.selectNodeContents(a||o).setCursor(!1,!0);else{var d=t.getCell(n.rowIndex,t.indexTable[n.rowIndex][n.colIndex].cellIndex);d&&r.selectNodeContents(d).setCursor(!1,!0)}else{var c=l.nextSibling;domUtils.remove(l),c&&r.setStart(c,0).setCursor(!1,!0)}"enabled"===l.getAttribute("interlaced")&&this.fireEvent("interlacetable",l)}},UE.commands.insertcol={queryCommandState:function(e){var t=u(this),i=t.cell;return i&&("TD"==i.tagName||"TH"==i.tagName&&i!==t.tr.cells[0])&&h(t.table).colsNum<this.options.maxColNum?0:-1},execCommand:function(e){var t=this.selection.getRange(),i=t.createBookmark(!0);if(-1!=this.queryCommandState(e)){var n=u(this).cell,o=h(n),a=o.getCellInfo(n);if(o.selectedTds.length)for(var r=o.cellsRange,s=0,l=r.endColIndex-r.beginColIndex+1;s<l;s++)o.insertCol(r.beginColIndex,n);else o.insertCol(a.colIndex,n);t.moveToBookmark(i).select(!0)}}},UE.commands.insertcolnext={queryCommandState:function(){var e=u(this);return e.cell&&h(e.table).colsNum<this.options.maxColNum?0:-1},execCommand:function(){var e=this.selection.getRange(),t=e.createBookmark(!0),i=u(this).cell,n=h(i),o=n.getCellInfo(i);if(n.selectedTds.length)for(var a=n.cellsRange,r=0,s=a.endColIndex-a.beginColIndex+1;r<s;r++)n.insertCol(a.endColIndex+1,i);else n.insertCol(o.colIndex+o.colSpan,i);e.moveToBookmark(t).select()}},UE.commands.deletecol={queryCommandState:function(){return u(this).cell?0:-1},execCommand:function(){var e=u(this).cell,t=h(e),i=t.cellsRange,n=t.getCellInfo(e),o=t.getHSideCell(e),a=t.getHSideCell(e,!0);if(utils.isEmptyObject(i))t.deleteCol(n.colIndex);else for(var r=i.beginColIndex;r<i.endColIndex+1;r++)t.deleteCol(i.beginColIndex);var s=t.table,l=this.selection.getRange();if(s.getElementsByTagName("td").length)domUtils.inDoc(e,this.document)?l.setStart(e,0).setCursor(!1,!0):a&&domUtils.inDoc(a,this.document)?l.selectNodeContents(a).setCursor(!1,!0):o&&domUtils.inDoc(o,this.document)&&l.selectNodeContents(o).setCursor(!0,!0);else{var d=s.nextSibling;domUtils.remove(s),d&&l.setStart(d,0).setCursor(!1,!0)}}},UE.commands.splittocells={queryCommandState:function(){var e=u(this),t=e.cell;return t?0<h(e.table).selectedTds.length?-1:t&&(1<t.colSpan||1<t.rowSpan)?0:-1:-1},execCommand:function(){var e=this.selection.getRange(),t=e.createBookmark(!0),i=u(this).cell;h(i).splitToCells(i),e.moveToBookmark(t).select()}},UE.commands.splittorows={queryCommandState:function(){var e=u(this),t=e.cell;return t?0<h(e.table).selectedTds.length?-1:t&&1<t.rowSpan?0:-1:-1},execCommand:function(){var e=this.selection.getRange(),t=e.createBookmark(!0),i=u(this).cell;h(i).splitToRows(i),e.moveToBookmark(t).select()}},UE.commands.splittocols={queryCommandState:function(){var e=u(this),t=e.cell;return t?0<h(e.table).selectedTds.length?-1:t&&1<t.colSpan?0:-1:-1},execCommand:function(){var e=this.selection.getRange(),t=e.createBookmark(!0),i=u(this).cell;h(i).splitToCols(i),e.moveToBookmark(t).select()}},UE.commands.adaptbytext=UE.commands.adaptbywindow={queryCommandState:function(){return u(this).table?0:-1},execCommand:function(e){var t=u(this).table;if(t)if("adaptbywindow"==e)n(t,this);else{var i=domUtils.getElementsByTagName(t,"td th");utils.each(i,function(e){e.removeAttribute("width")}),t.removeAttribute("width")}}},UE.commands.averagedistributecol={queryCommandState:function(){var e=r(this);return e&&(e.isFullRow()||e.isFullCol())?0:-1},execCommand:function(e){var l=this,d=r(l);d&&d.selectedTds.length&&function(t){utils.each(domUtils.getElementsByTagName(d.table,"th"),function(e){e.setAttribute("width","")});var e=d.isFullRow()?domUtils.getElementsByTagName(d.table,"td"):d.selectedTds;utils.each(e,function(e){1==e.colSpan&&e.setAttribute("width",t)})}(function(){var e=d.table,t=0,i=0,n=g(l,e);if(d.isFullRow())t=e.offsetWidth,i=d.colsNum;else for(var o,a=d.cellsRange.beginColIndex,r=d.cellsRange.endColIndex,s=a;s<=r;)t+=(o=d.selectedTds[s]).offsetWidth,s+=o.colSpan,i+=1;return Math.ceil(t/i)-2*n.tdBorder-2*n.tdPadding}())}},UE.commands.averagedistributerow={queryCommandState:function(){var e=r(this);return e?e.selectedTds&&/th/gi.test(e.selectedTds[0].tagName)?-1:e.isFullRow()||e.isFullCol()?0:-1:-1},execCommand:function(e){var t,i,p=this,m=r(p);m&&m.selectedTds.length&&(t=function(){var e,t=0,i=m.table,n=g(p,i),o=parseInt(domUtils.getComputedStyle(i.getElementsByTagName("td")[0],"padding-top"));if(m.isFullCol()){var a,r,s=domUtils.getElementsByTagName(i,"caption"),l=domUtils.getElementsByTagName(i,"th");0<s.length&&(a=s[0].offsetHeight),0<l.length&&(r=l[0].offsetHeight),t=i.offsetHeight-(a||0)-(r||0),e=0==l.length?m.rowsNum:m.rowsNum-1}else{for(var d=m.cellsRange.beginRowIndex,c=m.cellsRange.endRowIndex,u=0,h=domUtils.getElementsByTagName(i,"tr"),f=d;f<=c;f++)t+=h[f].offsetHeight,u+=1;e=u}return browser.ie&&browser.version<9?Math.ceil(t/e):Math.ceil(t/e)-2*n.tdBorder-2*o}(),i=m.isFullCol()?domUtils.getElementsByTagName(m.table,"td"):m.selectedTds,utils.each(i,function(e){1==e.rowSpan&&e.setAttribute("height",t)}))}},UE.commands.cellalignment={queryCommandState:function(){return u(this).table?0:-1},execCommand:function(e,t){var i=r(this);if(i)utils.each(i.selectedTds,function(e){domUtils.setAttributes(e,t)});else{var n=this.selection.getStart(),o=n&&domUtils.findParentByTagName(n,["td","th","caption"],!0);/caption/gi.test(o.tagName)?(o.style.textAlign=t.align,o.style.verticalAlign=t.vAlign):domUtils.setAttributes(o,t),this.selection.getRange().setCursor(!0)}},queryCommandValue:function(e){var t=u(this).cell;if(t||(t=a(this)[0]),t){var i=UE.UETable.getUETable(t).selectedTds;return!i.length&&(i=t),UE.UETable.getTableCellAlignState(i)}return null}},UE.commands.tablealignment={queryCommandState:function(){return browser.ie&&browser.version<8?-1:u(this).table?0:-1},execCommand:function(e,t){var i=this.selection.getStart(),n=i&&domUtils.findParentByTagName(i,["table"],!0);n&&n.setAttribute("align",t)}},UE.commands.edittable={queryCommandState:function(){return u(this).table?0:-1},execCommand:function(e,t){var i=this.selection.getRange(),n=domUtils.findParentByTagName(i.startContainer,"table");if(n){var o=domUtils.getElementsByTagName(n,"td").concat(domUtils.getElementsByTagName(n,"th"),domUtils.getElementsByTagName(n,"caption"));utils.each(o,function(e){e.style.borderColor=t})}}},UE.commands.edittd={queryCommandState:function(){return u(this).table?0:-1},execCommand:function(e,t){var i=r(this);if(i)utils.each(i.selectedTds,function(e){e.style.backgroundColor=t});else{var n=this.selection.getStart(),o=n&&domUtils.findParentByTagName(n,["td","th","caption"],!0);o&&(o.style.backgroundColor=t)}}},UE.commands.settablebackground={queryCommandState:function(){return 1<a(this).length?0:-1},execCommand:function(e,t){var i;i=a(this),h(i[0]).setBackground(i,t)}},UE.commands.cleartablebackground={queryCommandState:function(){var e=a(this);if(!e.length)return-1;for(var t,i=0;t=e[i++];)if(""!==t.style.backgroundColor)return 0;return-1},execCommand:function(){var e=a(this);h(e[0]).removeBackground(e)}},UE.commands.interlacetable=UE.commands.uninterlacetable={queryCommandState:function(e){var t=u(this).table;if(!t)return-1;var i=t.getAttribute("interlaced");return"interlacetable"==e?"enabled"===i?-1:0:i&&"disabled"!==i?0:-1},execCommand:function(e,t){var i=u(this).table;"interlacetable"==e?(i.setAttribute("interlaced","enabled"),this.fireEvent("interlacetable",i,t)):(i.setAttribute("interlaced","disabled"),this.fireEvent("uninterlacetable",i))}},UE.commands.setbordervisible={queryCommandState:function(e){return u(this).table?0:-1},execCommand:function(){var e=u(this).table;utils.each(domUtils.getElementsByTagName(e,"td"),function(e){e.style.borderWidth="1px",e.style.borderStyle="solid"})}}}(),UE.plugins.table=function(){function k(e,t){i(e,"width",!0),i(e,"height",!0)}function i(e,t,i){e.style[t]&&(i&&e.setAttribute(t,parseInt(e.style[t],10)),e.style[t]="")}function u(e){return"TD"==e.tagName||"TH"==e.tagName?e:(t=domUtils.findParentByTagName(e,"td",!0)||domUtils.findParentByTagName(e,"th",!0))?t:null;var t}function I(e){var t=new RegExp(domUtils.fillChar,"g");if(0<e[browser.ie?"innerText":"textContent"].replace(/^\s*$/,"").replace(t,"").length)return 0;for(var i in dtd.$isNotEmpty)if(e.getElementsByTagName(i).length)return 0;return 1}function h(e){return e.pageX||e.pageY?{x:e.pageX,y:e.pageY}:{x:e.clientX+N.document.body.scrollLeft-N.document.body.clientLeft,y:e.clientY+N.document.body.scrollTop-N.document.body.clientTop}}function t(e){if(!v())try{var t,i=u(e.target||e.srcElement);if(T&&(N.body.style.webkitUserSelect="none",(Math.abs(A.x-e.clientX)>M||Math.abs(A.y-e.clientY)>M)&&(m(),T=!1,D=0,r(e))),H&&G)return D=0,N.body.style.webkitUserSelect="none",N.selection.getNative()[browser.ie9below?"empty":"removeAllRanges"](),t=h(e),s(N,!0,H,t,i),void("h"==H?$.style.left=function(e,t){var i=R(e);if(i){var n=i.getSameEndPosCells(e,"x")[0],o=i.getSameStartPosXCells(e)[0],a=h(t).x,r=(n?domUtils.getXY(n).x:domUtils.getXY(i.table).x)+20,s=o?domUtils.getXY(o).x+o.offsetWidth-20:N.body.offsetWidth+5||parseInt(domUtils.getComputedStyle(N.body,"width"),10);return s-=S,a<(r+=S)?r:s<a?s:a}}(G,e)+"px":"v"==H&&($.style.top=function(e,t){try{var i=domUtils.getXY(e).y,n=h(t).y;return n<i?i:n}catch(e){}}(G,e)+"px"));if(i){if(!0===N.fireEvent("excludetable",i))return;var n=p(i,t=h(e)),o=domUtils.findParentByTagName(i,"table",!0);if(f(o,i,e,!0)){if(!0===N.fireEvent("excludetable",o))return;N.body.style.cursor="url("+N.options.cursorpath+"h.png),pointer"}else if(f(o,i,e)){if(!0===N.fireEvent("excludetable",o))return;N.body.style.cursor="url("+N.options.cursorpath+"v.png),pointer"}else N.body.style.cursor="text",/\d/.test(n)&&(n=n.replace(/\d/,""),i=R(i).getPreviewCell(i,"v"==n)),s(N,!!i&&!!n,i?n:"",t,i)}else a(!1,o,N)}catch(e){}}function a(e,t,i){if(e)!function(a,r){var s,e=domUtils.getXY(a),t=a.ownerDocument;if(j&&j.parentNode)return;(j=t.createElement("div")).contentEditable=!1,j.innerHTML="",j.style.cssText="width:15px;height:15px;background-image:url("+r.options.UEDITOR_HOME_URL+"dialogs/table/dragicon.png);position: absolute;cursor:move;top:"+(e.y-15)+"px;left:"+e.x+"px;",domUtils.unSelectable(j),j.onmouseover=function(e){W=!0},j.onmouseout=function(e){W=!1},domUtils.on(j,"click",function(e,t){var i;i=this,clearTimeout(s),s=setTimeout(function(){r.fireEvent("tableClicked",a,i)},300)}),domUtils.on(j,"dblclick",function(e,t){!function(e){clearTimeout(s);var t=R(a),i=a.rows[0].cells[0],n=t.getLastCell(),o=t.getCellsRange(i,n);r.selection.getRange().setStart(i,0).setCursor(!1,!0),t.setSelected(o)}()}),domUtils.on(j,"dragstart",function(e,t){domUtils.preventDefault(t)}),t.body.appendChild(j)}(t,i);else{if(W)return;setTimeout(function(){!W&&j&&j.parentNode&&j.parentNode.removeChild(j)},2e3)}}function f(e,t,i,n){var o=h(i),a=p(t,o);if(n){var r=e.getElementsByTagName("caption")[0],s=r?r.offsetHeight:0;return"v1"==a&&o.y-domUtils.getXY(e).y-s<8}return"h1"==a&&o.x-domUtils.getXY(e).x<8}function s(e,t,i,n,o){try{e.body.style.cursor="h"==i?"col-resize":"v"==i?"row-resize":"text",browser.ie&&(!i||Y||U(e)?w(e):(l(e,e.document),d(i,o))),V=t}catch(e){}}function p(e,t){var i=domUtils.getXY(e);return i?i.x+e.offsetWidth-t.x<E?"h":t.x-i.x<E?"h1":i.y+e.offsetHeight-t.y<E?"v":t.y-i.y<E?"v1":"":""}function n(e,t){if(!v())if(A={x:t.clientX,y:t.clientY},2==t.button){var i=U(N),n=!1;if(i){var o=_(N,t);utils.each(i.selectedTds,function(e){e===o&&(n=!0)}),n?(o=i.selectedTds[0],setTimeout(function(){N.selection.getRange().setStart(o,0).setCursor(!1,!0)},0)):(B(domUtils.getElementsByTagName(N.body,"th td")),i.clearSelected())}}else!function(e){if(B(domUtils.getElementsByTagName(N.body,"td th")),utils.each(N.document.getElementsByTagName("table"),function(e){e.ueTable=null}),z=_(N,e)){var t=domUtils.findParentByTagName(z,"table",!0);ut=R(t),ut&&ut.clearSelected(),V?(i=e,browser.ie&&(i=function(e){var t=["pageX","pageY","clientX","clientY","srcElement","target"],i={};if(e)for(var n,o,a=0;n=t[a];a++)(o=e[n])&&(i[n]=o);return i}(i)),m(),T=!0,C=setTimeout(function(){r(i)},L)):(N.document.body.style.webkitUserSelect="",Y=!0,N.addListener("mouseover",g))}var i}(t)}function m(){C&&clearTimeout(C),C=null}function r(e){if(T=!1,z=e.target||e.srcElement){var t=p(z,h(e));/\d/.test(t)&&(t=t.replace(/\d/,""),z=R(z).getPreviewCell(z,"v"==t)),w(N),l(N,N.document),N.fireEvent("saveScene"),d(t,z),Y=!0,H=t,G=z}}function o(e,t){if(!v()){if(m(),T=!1,V&&(D=++D%3,A={x:t.clientX,y:t.clientY},setTimeout(function(){0<D&&D--},L),2===D))return D=0,void function(e){D=0;var t,i=u((e=e||N.window.event).target||e.srcElement);if(i&&(t=p(i,h(e)))&&(w(N),"h1"==t&&(t="h",f(domUtils.findParentByTagName(i,"table"),i,e)?N.execCommand("adaptbywindow"):(i=R(i).getPreviewCell(i))&&N.selection.getRange().selectNodeContents(i).setCursor(!0,!0)),"h"==t)){var n=R(i),o=y(i,n.table,!0);o=function(e,t){for(var i=[],n=null,o=0,a=e.length;o<a;o++)(n=e[o][t])&&i.push(n);return i}(o,"left"),n.width=n.offsetWidth;var a=[],r=[];utils.each(o,function(e){a.push(e.offsetWidth)}),utils.each(o,function(e){e.removeAttribute("width")}),window.setTimeout(function(){var n=!0;utils.each(o,function(e,t){var i=e.offsetWidth;return i>a[t]?n=!1:void r.push(i)});var i=n?r:a;utils.each(o,function(e,t){e.width=i[t]-x()})},0)}}(t);if(2!=t.button){var i=this,n=i.selection.getRange(),o=domUtils.findParentByTagName(n.startContainer,"table",!0),a=domUtils.findParentByTagName(n.endContainer,"table",!0);if((o||a)&&(o===a?(o=domUtils.findParentByTagName(n.startContainer,["td","th","caption"],!0))!==(a=domUtils.findParentByTagName(n.endContainer,["td","th","caption"],!0))&&i.selection.clearRange():i.selection.clearRange()),Y=!1,i.document.body.style.webkitUserSelect="",H&&G&&(i.selection.getNative()[browser.ie9below?"empty":"removeAllRanges"](),D=0,$=i.document.getElementById("ue_tableDragLine"))){var r=domUtils.getXY(G),s=domUtils.getXY($);switch(H){case"h":!function(e,t){var i=R(e);if(i){var n=i.table,o=y(e,n);n.style.width="",n.removeAttribute("width"),t=function(i,e,t){if((i-=x())<0)return 0;var n=(i-=b(e))<0?"left":"right";return i=Math.abs(i),utils.each(t,function(e){var t=e[n];t&&(i=Math.min(i,b(t)-S))}),i=i<0?0:i,"left"===n?-i:i}(t,e,o),e.nextSibling?utils.each(o,function(e){e.left.width=+e.left.width+t,e.right&&(e.right.width=+e.right.width-t)}):utils.each(o,function(e){e.left.width-=-t})}}(G,s.x-r.x);break;case"v":!function(e,t){if(!(Math.abs(t)<10)){var i=R(e);if(i)for(var n,o=i.getSameEndPosCells(e,"y"),a=o[0]?o[0].offsetHeight:0,r=0;n=o[r++];)s=n,l=t,d=a,void 0,c=parseInt(domUtils.getComputedStyle(s,"line-height"),10),l=(u=d+l)<c?c:u,s.style.height&&(s.style.height=""),1==s.rowSpan?s.setAttribute("height",l):s.removeAttribute&&s.removeAttribute("height")}var s,l,d,c,u}(G,s.y-r.y-G.offsetHeight)}return H="",G=null,w(i),void i.fireEvent("saveScene")}if(z){var l=R(z),d=l?l.selectedTds[0]:null;if(d)n=new dom.Range(i.document),domUtils.isEmptyBlock(d)?n.setStart(d,0).setCursor(!1,!0):n.selectNodeContents(d).shrinkBoundary().setCursor(!1,!0);else if(!(n=i.selection.getRange().shrinkBoundary()).collapsed){o=domUtils.findParentByTagName(n.startContainer,["td","th"],!0),a=domUtils.findParentByTagName(n.endContainer,["td","th"],!0);(o&&!a||!o&&a||o&&a&&o!==a)&&n.setCursor(!1,!0)}z=null,i.removeListener("mouseover",g)}else{var c=domUtils.findParentByTagName(t.target||t.srcElement,"td",!0);if(c||(c=domUtils.findParentByTagName(t.target||t.srcElement,"th",!0)),c&&("TD"==c.tagName||"TH"==c.tagName)){if(!0===i.fireEvent("excludetable",c))return;(n=new dom.Range(i.document)).setStart(c,0).setCursor(!1,!0)}}i._selectionChange(250,t)}}}function g(e,t){if(!v()){var i=t.target||t.srcElement;if(F=domUtils.findParentByTagName(i,"td",!0)||domUtils.findParentByTagName(i,"th",!0),z&&F&&("TD"==z.tagName&&"TD"==F.tagName||"TH"==z.tagName&&"TH"==F.tagName)&&domUtils.findParentByTagName(z,"table")==domUtils.findParentByTagName(F,"table")){var n=R(F);if(z!=F){this.document.body.style.webkitUserSelect="none",this.selection.getNative()[browser.ie9below?"empty":"removeAllRanges"]();var o=n.getCellsRange(z,F);n.setSelected(o)}else this.document.body.style.webkitUserSelect="",n.clearSelected()}t.preventDefault?t.preventDefault():t.returnValue=!1}}function v(){return"false"===N.body.contentEditable}function y(e,t,n){if(t||(t=domUtils.findParentByTagName(e,"table")),!t)return null;for(var i=(domUtils.getNodeIndex(e),e),o=t.rows,a=0;i;)1===i.nodeType&&(a+=i.colSpan||1),i=i.previousSibling;i=null;var r=[];return utils.each(o,function(e){var t=e.cells,i=0;utils.each(t,function(e){return(i+=e.colSpan||1)===a?(r.push({left:e,right:e.nextSibling||null}),!1):a<i?(n&&r.push({left:e}),!1):void 0})}),r}function b(e){var t=0;t=e.offsetWidth-x();e.nextSibling||(t-=function(e){if(tab=domUtils.findParentByTagName(e,"table",!1),void 0===tab.offsetVal){var t=e.previousSibling;tab.offsetVal=t&&e.offsetWidth-t.offsetWidth===P.borderWidth?P.borderWidth:0}return tab.offsetVal}(e)),t=t<0?0:t;try{e.width=t}catch(e){}return t}function x(){if(void 0===P.tabcellSpace){var e=N.document.createElement("table"),t=N.document.createElement("tbody"),i=N.document.createElement("tr"),n=N.document.createElement("td"),o=null;n.style.cssText="border: 0;",n.width=1,i.appendChild(n),i.appendChild(o=n.cloneNode(!1)),t.appendChild(i),e.appendChild(t),e.style.cssText="visibility: hidden;",N.body.appendChild(e),P.paddingSpace=n.offsetWidth-1;var a=e.offsetWidth;n.style.cssText="",o.style.cssText="",P.borderWidth=(e.offsetWidth-a)/3,P.tabcellSpace=P.paddingSpace+P.borderWidth,N.body.removeChild(e)}return x=function(){return P.tabcellSpace},P.tabcellSpace}function l(e,t){Y||($=e.document.createElement("div"),domUtils.setAttributes($,{id:"ue_tableDragLine",unselectable:"on",contenteditable:!1,onresizestart:"return false",ondragstart:"return false",onselectstart:"return false",style:"background-color:blue;position:absolute;padding:0;margin:0;background-image:none;border:0px none;opacity:0;filter:alpha(opacity=0)"}),e.body.appendChild($))}function w(e){if(!Y)for(var t;t=e.document.getElementById("ue_tableDragLine");)domUtils.remove(t)}function d(e,t){if(t){var i,n=domUtils.findParentByTagName(t,"table"),o=n.getElementsByTagName("caption"),a=n.offsetWidth,r=n.offsetHeight-(0<o.length?o[0].offsetHeight:0),s=domUtils.getXY(n),l=domUtils.getXY(t);switch(e){case"h":i="height:"+r+"px;top:"+(s.y+(0<o.length?o[0].offsetHeight:0))+"px;left:"+(l.x+t.offsetWidth),$.style.cssText=i+"px;position: absolute;display:block;background-color:blue;width:1px;border:0; color:blue;opacity:.3;filter:alpha(opacity=30)";break;case"v":i="width:"+a+"px;left:"+s.x+"px;top:"+(l.y+t.offsetHeight),$.style.cssText=i+"px;overflow:hidden;position: absolute;display:block;background-color:blue;height:1px;border:0;color:blue;opacity:.2;filter:alpha(opacity=20)"}}}function c(e,t){for(var i,n,o=domUtils.getElementsByTagName(e.body,"table"),a=0;n=o[a++];){var r=domUtils.getElementsByTagName(n,"td");r[0]&&(t?(i=r[0].style.borderColor.replace(/\s/g,""),/(#ffffff)|(rgb\(255,255,255\))/gi.test(i)&&domUtils.addClass(n,"noBorderTable")):domUtils.removeClasses(n,"noBorderTable"))}}function _(e,t){var i,n=domUtils.findParentByTagName(t.target||t.srcElement,["td","th"],!0);if(!n)return null;if(i=p(n,h(t)),!n)return null;if("h1"===i&&n.previousSibling){var o=domUtils.getXY(n),a=n.offsetWidth;Math.abs(o.x+a-t.clientX)>a/3&&(n=n.previousSibling)}else if("v1"===i&&n.parentNode.previousSibling){o=domUtils.getXY(n);var r=n.offsetHeight;Math.abs(o.y+r-t.clientY)>r/3&&(n=n.parentNode.previousSibling.firstChild)}return n&&!0!==e.fireEvent("excludetable",n)?n:null}var N=this,C=null,S=5,T=!1,E=5,M=10,D=0,A=null,L=360,P=UE.UETable,R=function(e){return P.getUETable(e)},U=function(e){return P.getUETableBySelected(e)},O=function(e,t){return P.getDefaultValue(e,t)},B=function(e){return P.removeSelectedClass(e)};N.ready(function(){var i=this,n=i.selection.getText;i.selection.getText=function(){var e=U(i);if(e){var t="";return utils.each(e.selectedTds,function(e){t+=e[browser.ie?"innerText":"textContent"]}),t}return n.call(i.selection)}});var z=null,F=null,H="",V=!1,j=null,W=!1,$=null,G=null,Y=!1;N.setOpt({maxColNum:20,maxRowNum:100,defaultCols:5,defaultRows:5,tdvalign:"top",cursorpath:N.options.UEDITOR_HOME_URL+"themes/default/images/cursor_",tableDragable:!1,classList:["ue-table-interlace-color-single","ue-table-interlace-color-double"]}),N.getUETable=R;var q={deletetable:1,inserttable:1,cellvalign:1,insertcaption:1,deletecaption:1,inserttitle:1,deletetitle:1,mergeright:1,mergedown:1,mergecells:1,insertrow:1,insertrownext:1,deleterow:1,insertcol:1,insertcolnext:1,deletecol:1,splittocells:1,splittorows:1,splittocols:1,adaptbytext:1,adaptbywindow:1,adaptbycustomer:1,insertparagraph:1,insertparagraphbeforetable:1,averagedistributecol:1,averagedistributerow:1};N.ready(function(){var C,S,T,e;utils.cssRule("table",".selectTdClass{background-color:#edf5fa !important}table.noBorderTable td,table.noBorderTable th,table.noBorderTable caption{border:1px dashed #ddd !important}table{margin-bottom:10px;border-collapse:collapse;display:table;}td,th{padding: 5px 10px;border: 1px solid #DDD;}caption{border:1px dashed #DDD;border-bottom:0;padding:3px;text-align:center;}th{border-top:1px solid #BBB;background-color:#F7F7F7;}table tr.firstRow th{border-top-width:2px;}.ue-table-interlace-color-single{ background-color: #fcfcfc; } .ue-table-interlace-color-double{ background-color: #f7faff; }td p{margin:0;padding:0;}",N.document),N.addListener("keydown",function(e,t){var i=this,n=t.keyCode||t.which;if(8==n){var o;(o=U(i))&&o.selectedTds.length&&(o.isFullCol()?i.execCommand("deletecol"):o.isFullRow()?i.execCommand("deleterow"):i.fireEvent("delcells"),domUtils.preventDefault(t));var a=domUtils.findParentByTagName(i.selection.getStart(),"caption",!0),r=i.selection.getRange();if(r.collapsed&&a&&I(a)){i.fireEvent("saveScene");var s=a.parentNode;domUtils.remove(a),s&&r.setStart(s.rows[0].cells[0],0).setCursor(!1,!0),i.fireEvent("saveScene")}}if(46==n&&(o=U(i))){i.fireEvent("saveScene");for(var l=0;m=o.selectedTds[l++];)domUtils.fillNode(i.document,m);i.fireEvent("saveScene"),domUtils.preventDefault(t)}if(13==n){var d=i.selection.getRange();if(a=domUtils.findParentByTagName(d.startContainer,"caption",!0)){var s=domUtils.findParentByTagName(a,"table");return d.collapsed?a&&d.setStart(s.rows[0].cells[0],0).setCursor(!1,!0):(d.deleteContents(),i.fireEvent("saveScene")),void domUtils.preventDefault(t)}if(d.collapsed)if(s=domUtils.findParentByTagName(d.startContainer,"table")){var c=s.rows[0].cells[0],u=domUtils.findParentByTagName(i.selection.getStart(),["td","th"],!0),h=s.previousSibling;if(c===u&&(!h||1==h.nodeType&&"TABLE"==h.tagName)&&domUtils.isStartInblock(d)){var f=domUtils.findParent(i.selection.getStart(),function(e){return domUtils.isBlockElm(e)},!0);f&&(/t(h|d)/i.test(f.tagName)||f===u.firstChild)&&(i.execCommand("insertparagraphbeforetable"),domUtils.preventDefault(t))}}}if((t.ctrlKey||t.metaKey)&&"67"==t.keyCode&&(C=null,o=U(i))){var p=o.selectedTds;S=o.isFullCol(),T=o.isFullRow(),C=[[o.cloneCell(p[0],null,!0)]];var m;for(l=1;m=p[l];l++)m.parentNode!==p[l-1].parentNode?C.push([o.cloneCell(m,null,!0)]):C[C.length-1].push(o.cloneCell(m,null,!0))}}),N.addListener("tablehasdeleted",function(){s(this,!1,""),j&&domUtils.remove(j)}),N.addListener("beforepaste",function(e,t){var i=this,n=i.selection.getRange();if(domUtils.findParentByTagName(n.startContainer,"caption",!0))return(a=i.document.createElement("div")).innerHTML=t.html,void(t.html=a[browser.ie9below?"innerText":"textContent"]);var o,a,r=U(i);if(C){i.fireEvent("saveScene");n=i.selection.getRange();var s,l,d=domUtils.findParentByTagName(n.startContainer,["td","th"],!0);if(d){var c=R(d);if(T){var u=c.getCellInfo(d).rowIndex;"TH"==d.tagName&&u++;for(var h=0;v=C[h++];){for(var f=c.insertRow(u++,"td"),p=0;x=v[p];p++){var m=f.cells[p];m||(m=f.insertCell(p)),m.innerHTML=x.innerHTML,x.getAttribute("width")&&m.setAttribute("width",x.getAttribute("width")),x.getAttribute("vAlign")&&m.setAttribute("vAlign",x.getAttribute("vAlign")),x.getAttribute("align")&&m.setAttribute("align",x.getAttribute("align")),x.style.cssText&&(m.style.cssText=x.style.cssText)}for(p=0;(x=f.cells[p])&&v[p];p++)x.innerHTML=v[p].innerHTML,v[p].getAttribute("width")&&x.setAttribute("width",v[p].getAttribute("width")),v[p].getAttribute("vAlign")&&x.setAttribute("vAlign",v[p].getAttribute("vAlign")),v[p].getAttribute("align")&&x.setAttribute("align",v[p].getAttribute("align")),v[p].style.cssText&&(x.style.cssText=v[p].style.cssText)}}else{if(S){b=c.getCellInfo(d);for(var g=0,v=(p=0,C[0]);x=v[p++];)g+=x.colSpan||1;for(i.__hasEnterExecCommand=!0,h=0;h<g;h++)i.execCommand("insertcol");i.__hasEnterExecCommand=!1,"TH"==(d=c.table.rows[0].cells[b.cellIndex]).tagName&&(d=c.table.rows[1].cells[b.cellIndex])}for(h=0;v=C[h++];){s=d;for(p=0;x=v[p++];)if(d)d.innerHTML=x.innerHTML,x.getAttribute("width")&&d.setAttribute("width",x.getAttribute("width")),x.getAttribute("vAlign")&&d.setAttribute("vAlign",x.getAttribute("vAlign")),x.getAttribute("align")&&d.setAttribute("align",x.getAttribute("align")),x.style.cssText&&(d.style.cssText=x.style.cssText),d=(l=d).nextSibling;else{var y=x.cloneNode(!0);domUtils.removeAttributes(y,["class","rowSpan","colSpan"]),l.parentNode.appendChild(y)}if(d=c.getNextCell(s,!0,!0),!C[h])break;if(!d){var b=c.getCellInfo(s);c.table.insertRow(c.table.rows.length),c.update(),d=c.getVSideCell(s,!0)}}}c.update()}else{r=i.document.createElement("table");for(h=0;v=C[h++];){var x;for(f=r.insertRow(r.rows.length),p=0;x=v[p++];)y=P.cloneCell(x,null,!0),domUtils.removeAttributes(y,["class"]),f.appendChild(y);2==p&&1<y.rowSpan&&(y.rowSpan=1)}var w=O(i),_=i.body.offsetWidth-2*parseInt(domUtils.getComputedStyle(i.body,"margin-left"),10)-2*w.tableBorder-(i.options.offsetWidth||0);i.execCommand("insertHTML","<table  "+(S&&T?'width="'+_+'"':"")+">"+r.innerHTML.replace(/>\s*</g,"><").replace(/\bth\b/gi,"td")+"</table>")}return i.fireEvent("contentchange"),i.fireEvent("saveScene"),!(t.html="")}(a=i.document.createElement("div")).innerHTML=t.html,o=a.getElementsByTagName("table"),domUtils.findParentByTagName(i.selection.getStart(),"table")?(utils.each(o,function(e){domUtils.remove(e)}),domUtils.findParentByTagName(i.selection.getStart(),"caption",!0)&&(a.innerHTML=a[browser.ie?"innerText":"textContent"])):utils.each(o,function(e){k(e),domUtils.removeAttributes(e,["style","border"]),utils.each(domUtils.getElementsByTagName(e,"td"),function(e){I(e)&&domUtils.fillNode(i.document,e),k(e)})}),t.html=a.innerHTML}),N.addListener("afterpaste",function(){utils.each(domUtils.getElementsByTagName(N.body,"table"),function(e){if(e.offsetWidth>N.body.offsetWidth){var t=O(N,e);e.style.width=N.body.offsetWidth-2*parseInt(domUtils.getComputedStyle(N.body,"margin-left"),10)-2*t.tableBorder-(N.options.offsetWidth||0)+"px"}})}),N.addListener("blur",function(){C=null}),N.addListener("keydown",function(){clearTimeout(e),e=setTimeout(function(){var e=N.selection.getRange(),t=domUtils.findParentByTagName(e.startContainer,["th","td"],!0);if(t){var i=t.parentNode.parentNode.parentNode;i.offsetWidth>i.getAttribute("width")&&(t.style.wordBreak="break-all")}},100)}),N.addListener("selectionchange",function(){s(N,!1,"")}),N.addListener("contentchange",function(){var d=this;if(w(d),!U(d)){var e=d.selection.getRange().startContainer;e=domUtils.findParentByTagName(e,["td","th"],!0),utils.each(domUtils.getElementsByTagName(d.document,"table"),function(e){!0!==d.fireEvent("excludetable",e)&&(e.ueTable=new P(e),e.onmouseover=function(){d.fireEvent("tablemouseover",e)},e.onmousemove=function(){d.fireEvent("tablemousemove",e),d.options.tableDragable&&a(!0,this,d),utils.defer(function(){d.fireEvent("contentchange",50)},!0)},e.onmouseout=function(){d.fireEvent("tablemouseout",e),s(d,!1,""),w(d)},e.onclick=function(e){var t=u((e=d.window.event||e).target||e.srcElement);if(t){var i,n=R(t),o=n.table,a=n.getCellInfo(t),r=d.selection.getRange();if(f(o,t,e,!0)){var s=n.getCell(n.indexTable[n.rowsNum-1][a.colIndex].rowIndex,n.indexTable[n.rowsNum-1][a.colIndex].cellIndex);return void(e.shiftKey&&n.selectedTds.length?n.selectedTds[0]!==s?(i=n.getCellsRange(n.selectedTds[0],s),n.setSelected(i)):r&&r.selectNodeContents(s).select():t!==s?(i=n.getCellsRange(t,s),n.setSelected(i)):r&&r.selectNodeContents(s).select())}if(f(o,t,e)){var l=n.getCell(n.indexTable[a.rowIndex][n.colsNum-1].rowIndex,n.indexTable[a.rowIndex][n.colsNum-1].cellIndex);e.shiftKey&&n.selectedTds.length?n.selectedTds[0]!==l?(i=n.getCellsRange(n.selectedTds[0],l),n.setSelected(i)):r&&r.selectNodeContents(l).select():t!==l?(i=n.getCellsRange(t,l),n.setSelected(i)):r&&r.selectNodeContents(l).select()}}})}),c(d,!0)}}),domUtils.on(N.document,"mousemove",t),domUtils.on(N.document,"mouseout",function(e){"TABLE"==(e.target||e.srcElement).tagName&&s(N,!1,"")}),N.addListener("interlacetable",function(e,t,i){if(t)for(var n=t.rows,o=n.length,a=0;a<o;a++)n[a].className=(r=i||this.options.classList,l=!0,r[s=a]?r[s]:l?r[s%r.length]:"");var r,s,l}),N.addListener("uninterlacetable",function(e,t){if(t)for(var i=t.rows,n=this.options.classList,o=i.length,a=0;a<o;a++)domUtils.removeClasses(i[a],n)}),N.addListener("mousedown",n),N.addListener("mouseup",o),domUtils.on(N.body,"dragstart",function(e){o.call(N,"dragstart",e)}),N.addOutputRule(function(e){utils.each(e.getNodesByTagName("div"),function(e){"ue_tableDragLine"==e.getAttr("id")&&e.parentNode.removeChild(e)})});var r=0;N.addListener("mousedown",function(){r=0}),N.addListener("tabkeydown",function(){var e=this.selection.getRange(),t=e.getCommonAncestor(!0,!0),i=domUtils.findParentByTagName(t,"table");if(i){if(domUtils.findParentByTagName(t,"caption",!0)){(n=domUtils.getElementsByTagName(i,"th td"))&&n.length&&e.setStart(n[0],0).setCursor(!1,!0)}else{var n=domUtils.findParentByTagName(t,["td","th"],!0),o=R(n);r=1<n.rowSpan?r:o.getCellInfo(n).rowIndex;var a=o.getTabNextCell(n,r);a?I(a)?e.setStart(a,0).setCursor(!1,!0):e.selectNodeContents(a).select():(N.fireEvent("saveScene"),N.__hasEnterExecCommand=!0,this.execCommand("insertrownext"),N.__hasEnterExecCommand=!1,(e=this.selection.getRange()).setStart(i.rows[i.rows.length-1].cells[0],0).setCursor(),N.fireEvent("saveScene"))}return!0}}),browser.ie&&N.addListener("selectionchange",function(){s(this,!1,"")}),N.addListener("keydown",function(e,t){var i=t.keyCode||t.which;if(8!=i&&46!=i){var n=!(t.ctrlKey||t.metaKey||t.shiftKey||t.altKey);n&&B(domUtils.getElementsByTagName(this.body,"td"));var o=U(this);o&&n&&o.clearSelected()}}),N.addListener("beforegetcontent",function(){c(this,!1),browser.ie&&utils.each(this.document.getElementsByTagName("caption"),function(e){domUtils.isEmptyNode(e)&&(e.innerHTML="&nbsp;")})}),N.addListener("aftergetcontent",function(){c(this,!0)}),N.addListener("getAllHtml",function(){B(N.document.getElementsByTagName("td"))}),N.addListener("fullscreenchanged",function(e,t){if(!t){var d=this.body.offsetWidth/document.body.offsetWidth,i=domUtils.getElementsByTagName(this.body,"table");utils.each(i,function(e){if(e.offsetWidth<N.body.offsetWidth)return!1;var t,i,n,o,a=domUtils.getElementsByTagName(e,"td"),r=[];utils.each(a,function(e){r.push(e.offsetWidth)});for(var s,l=0;s=a[l];l++)s.setAttribute("width",Math.floor(r[l]*d));e.setAttribute("width",Math.floor((i=!0,n=O(t=N),(o=t.body).offsetWidth-(i?2*parseInt(domUtils.getComputedStyle(o,"margin-left"),10):0)-2*n.tableBorder-(t.options.offsetWidth||0))))})}});var p=N.execCommand;N.execCommand=function(e,t){var i=this;e=e.toLowerCase();var n,o,a=U(i),r=new dom.Range(i.document),s=i.commands[e]||UE.commands[e];if(s){if(!a||q[e]||s.notNeedUndo||i.__hasEnterExecCommand)o=p.apply(i,arguments);else{i.__hasEnterExecCommand=!0,i.fireEvent("beforeexeccommand",e),n=a.selectedTds;for(var l,d,c,u=-2,h=-2,f=0;c=n[f];f++)I(c)?r.setStart(c,0).setCursor(!1,!0):r.selectNode(c).select(!0),d=i.queryCommandState(e),l=i.queryCommandValue(e),-1!=d&&(u===d&&h===l||(i._ignoreContentChange=!0,o=p.apply(i,arguments),i._ignoreContentChange=!1),u=i.queryCommandState(e),h=i.queryCommandValue(e),domUtils.isEmptyBlock(c)&&domUtils.fillNode(i.document,c));r.setStart(n[0],0).shrinkBoundary(!0).setCursor(!1,!0),i.fireEvent("contentchange"),i.fireEvent("afterexeccommand",e),i.__hasEnterExecCommand=!1,i._selectionChange()}return o}}})},UE.UETable.prototype.sortTable=function(i,n){var e=this.table,t=e.rows,o=[],a="TH"===t[0].cells[0].tagName,r=0;if(this.selectedTds.length){for(var s=this.cellsRange,l=s.endRowIndex+1,d=s.beginRowIndex;d<l;d++)o[d]=t[d];o.splice(0,s.beginRowIndex),r=s.endRowIndex+1===this.rowsNum?0:s.endRowIndex+1}else for(d=0,l=t.length;d<l;d++)o[d]=t[d];var c={reversecurrent:function(e,t){return 1},orderbyasc:function(e,t){var i=e.innerText||e.textContent,n=t.innerText||t.textContent;return i.localeCompare(n)},reversebyasc:function(e,t){var i=e.innerHTML;return t.innerHTML.localeCompare(i)},orderbynum:function(e,t){var i=e[browser.ie?"innerText":"textContent"].match(/\d+/),n=t[browser.ie?"innerText":"textContent"].match(/\d+/);return i&&(i=+i[0]),n&&(n=+n[0]),(i||0)-(n||0)},reversebynum:function(e,t){var i=e[browser.ie?"innerText":"textContent"].match(/\d+/),n=t[browser.ie?"innerText":"textContent"].match(/\d+/);return i&&(i=+i[0]),n&&(n=+n[0]),(n||0)-(i||0)}};e.setAttribute("data-sort-type",n&&"string"==typeof n&&c[n]?n:""),a&&o.splice(0,1),o=utils.sort(o,function(e,t){return n&&"function"==typeof n?n.call(this,e.cells[i],t.cells[i]):n&&"number"==typeof n?1:n&&"string"==typeof n&&c[n]?c[n].call(this,e.cells[i],t.cells[i]):c.orderbyasc.call(this,e.cells[i],t.cells[i])});var u=e.ownerDocument.createDocumentFragment(),h=0;for(l=o.length;h<l;h++)u.appendChild(o[h]);var f=e.getElementsByTagName("tbody")[0];r?f.insertBefore(u,t[r-s.endRowIndex+s.beginRowIndex-1]):f.appendChild(u)},UE.plugins.tablesort=function(){var e=this,d=UE.UETable,c=function(e){return d.getTableItemsByRange(e)};e.ready(function(){utils.cssRule("tablesort","table.sortEnabled tr.firstRow th,table.sortEnabled tr.firstRow td{padding-right:20px;background-repeat: no-repeat;background-position: center right;   background-image:url("+e.options.themePath+e.options.theme+"/images/sortable.png);}",e.document),e.addListener("afterexeccommand",function(e,t){"mergeright"!=t&&"mergedown"!=t&&"mergecells"!=t||this.execCommand("disablesort")})}),UE.commands.sorttable={queryCommandState:function(){var e=c(this);if(!e.cell)return-1;for(var t,i=e.table.getElementsByTagName("td"),n=0;t=i[n++];)if(1!=t.rowSpan||1!=t.colSpan)return-1;return 0},execCommand:function(e,t){var i,n=this.selection.getRange(),o=n.createBookmark(!0),a=c(this),r=a.cell,s=(i=a.table,d.getUETable(i)),l=s.getCellInfo(r);s.sortTable(l.cellIndex,t),n.moveToBookmark(o);try{n.select()}catch(e){}}},UE.commands.enablesort=UE.commands.disablesort={queryCommandState:function(e){var t=c(this).table;if(t&&"enablesort"==e)for(var i=domUtils.getElementsByTagName(t,"th td"),n=0;n<i.length;n++)if(1<i[n].getAttribute("colspan")||1<i[n].getAttribute("rowspan"))return-1;return t?"enablesort"==e^"sortEnabled"!=t.getAttribute("data-sort")?-1:0:-1},execCommand:function(e){var t=c(this).table;t.setAttribute("data-sort","enablesort"==e?"sortEnabled":"sortDisabled"),"enablesort"==e?domUtils.addClass(t,"sortEnabled"):domUtils.removeClasses(t,"sortEnabled")}}},UE.plugins.contextmenu=function(){var l=this;if(l.setOpt("enableContextMenu",l.getOpt("enableContextMenu")||!0),!1!==l.getOpt("enableContextMenu")){var d,c=l.getLang("contextMenu"),u=l.options.contextMenu||[{label:c.selectall,cmdName:"selectall"},{label:c.cleardoc,cmdName:"cleardoc",exec:function(){confirm(c.confirmclear)&&this.execCommand("cleardoc")}},"-",{label:c.unlink,cmdName:"unlink"},"-",{group:c.paragraph,icon:"justifyjustify",subMenu:[{label:c.justifyleft,cmdName:"justify",value:"left"},{label:c.justifyright,cmdName:"justify",value:"right"},{label:c.justifycenter,cmdName:"justify",value:"center"},{label:c.justifyjustify,cmdName:"justify",value:"justify"}]},"-",{group:c.table,icon:"table",subMenu:[{label:c.inserttable,cmdName:"inserttable"},{label:c.deletetable,cmdName:"deletetable"},"-",{label:c.deleterow,cmdName:"deleterow"},{label:c.deletecol,cmdName:"deletecol"},{label:c.insertcol,cmdName:"insertcol"},{label:c.insertcolnext,cmdName:"insertcolnext"},{label:c.insertrow,cmdName:"insertrow"},{label:c.insertrownext,cmdName:"insertrownext"},"-",{label:c.insertcaption,cmdName:"insertcaption"},{label:c.deletecaption,cmdName:"deletecaption"},{label:c.inserttitle,cmdName:"inserttitle"},{label:c.deletetitle,cmdName:"deletetitle"},{label:c.inserttitlecol,cmdName:"inserttitlecol"},{label:c.deletetitlecol,cmdName:"deletetitlecol"},"-",{label:c.mergecells,cmdName:"mergecells"},{label:c.mergeright,cmdName:"mergeright"},{label:c.mergedown,cmdName:"mergedown"},"-",{label:c.splittorows,cmdName:"splittorows"},{label:c.splittocols,cmdName:"splittocols"},{label:c.splittocells,cmdName:"splittocells"},"-",{label:c.averageDiseRow,cmdName:"averagedistributerow"},{label:c.averageDisCol,cmdName:"averagedistributecol"},"-",{label:c.edittd,cmdName:"edittd",exec:function(){UE.ui.edittd&&new UE.ui.edittd(this),this.getDialog("edittd").open()}},{label:c.edittable,cmdName:"edittable",exec:function(){UE.ui.edittable&&new UE.ui.edittable(this),this.getDialog("edittable").open()}},{label:c.setbordervisible,cmdName:"setbordervisible"}]},{group:c.tablesort,icon:"tablesort",subMenu:[{label:c.enablesort,cmdName:"enablesort"},{label:c.disablesort,cmdName:"disablesort"},"-",{label:c.reversecurrent,cmdName:"sorttable",value:"reversecurrent"},{label:c.orderbyasc,cmdName:"sorttable",value:"orderbyasc"},{label:c.reversebyasc,cmdName:"sorttable",value:"reversebyasc"},{label:c.orderbynum,cmdName:"sorttable",value:"orderbynum"},{label:c.reversebynum,cmdName:"sorttable",value:"reversebynum"}]},{group:c.borderbk,icon:"borderBack",subMenu:[{label:c.setcolor,cmdName:"interlacetable",exec:function(){this.execCommand("interlacetable")}},{label:c.unsetcolor,cmdName:"uninterlacetable",exec:function(){this.execCommand("uninterlacetable")}},{label:c.setbackground,cmdName:"settablebackground",exec:function(){this.execCommand("settablebackground",{repeat:!0,colorList:["#bbb","#ccc"]})}},{label:c.unsetbackground,cmdName:"cleartablebackground",exec:function(){this.execCommand("cleartablebackground")}},{label:c.redandblue,cmdName:"settablebackground",exec:function(){this.execCommand("settablebackground",{repeat:!0,colorList:["red","blue"]})}},{label:c.threecolorgradient,cmdName:"settablebackground",exec:function(){this.execCommand("settablebackground",{repeat:!0,colorList:["#aaa","#bbb","#ccc"]})}}]},{group:c.aligntd,icon:"aligntd",subMenu:[{cmdName:"cellalignment",value:{align:"left",vAlign:"top"}},{cmdName:"cellalignment",value:{align:"center",vAlign:"top"}},{cmdName:"cellalignment",value:{align:"right",vAlign:"top"}},{cmdName:"cellalignment",value:{align:"left",vAlign:"middle"}},{cmdName:"cellalignment",value:{align:"center",vAlign:"middle"}},{cmdName:"cellalignment",value:{align:"right",vAlign:"middle"}},{cmdName:"cellalignment",value:{align:"left",vAlign:"bottom"}},{cmdName:"cellalignment",value:{align:"center",vAlign:"bottom"}},{cmdName:"cellalignment",value:{align:"right",vAlign:"bottom"}}]},{group:c.aligntable,icon:"aligntable",subMenu:[{cmdName:"tablealignment",className:"left",label:c.tableleft,value:"left"},{cmdName:"tablealignment",className:"center",label:c.tablecenter,value:"center"},{cmdName:"tablealignment",className:"right",label:c.tableright,value:"right"}]},"-",{label:c.insertparagraphbefore,cmdName:"insertparagraph",value:!0},{label:c.insertparagraphafter,cmdName:"insertparagraph"},{label:c.copy,cmdName:"copy"},{label:c.paste,cmdName:"paste"}];if(u.length){var h=UE.ui.uiUtils;l.addListener("contextmenu",function(e,t){var i=h.getViewportOffsetByEvent(t);l.fireEvent("beforeselectionchange"),d&&d.destroy();for(var n,o=0,a=[];n=u[o];o++){var r;!function(e){if("-"==e)(r=a[a.length-1])&&"-"!==r&&a.push("-");else if(e.hasOwnProperty("group")){for(var t,i=0,n=[];t=e.subMenu[i];i++)!function(e){"-"==e?(r=n[n.length-1])&&"-"!==r?n.push("-"):n.splice(n.length-1):(l.commands[e.cmdName]||UE.commands[e.cmdName]||e.query)&&-1<(e.query?e.query():l.queryCommandState(e.cmdName))&&n.push({label:e.label||l.getLang("contextMenu."+e.cmdName+(e.value||""))||"",className:"edui-for-"+e.cmdName+(e.className?" edui-for-"+e.cmdName+"-"+e.className:""),onclick:e.exec?function(){e.exec.call(l)}:function(){l.execCommand(e.cmdName,e.value)}})}(t);n.length&&a.push({label:function(){switch(e.icon){case"table":return l.getLang("contextMenu.table");case"justifyjustify":return l.getLang("contextMenu.paragraph");case"aligntd":return l.getLang("contextMenu.aligntd");case"aligntable":return l.getLang("contextMenu.aligntable");case"tablesort":return c.tablesort;case"borderBack":return c.borderbk;default:return""}}(),className:"edui-for-"+e.icon,subMenu:{items:n,editor:l}})}else(l.commands[e.cmdName]||UE.commands[e.cmdName]||e.query)&&-1<(e.query?e.query.call(l):l.queryCommandState(e.cmdName))&&a.push({label:e.label||l.getLang("contextMenu."+e.cmdName),className:"edui-for-"+(e.icon?e.icon:e.cmdName+(e.value||"")),onclick:e.exec?function(){e.exec.call(l)}:function(){l.execCommand(e.cmdName,e.value)}})}(n)}if("-"==a[a.length-1]&&a.pop(),(d=new UE.ui.Menu({items:a,className:"edui-contextmenu",editor:l})).render(),d.showAt(i),l.fireEvent("aftershowcontextmenu",d),domUtils.preventDefault(t),browser.ie){var s;try{s=l.selection.getNative().createRange()}catch(e){return}if(s.item)new dom.Range(l.document).selectNode(s.item(0)).select(!0,!0)}}),l.addListener("aftershowcontextmenu",function(e,t){if(l.zeroclipboard){var i=t.items;for(var n in i)"edui-for-copy"==i[n].className&&l.zeroclipboard.clip(i[n].getDom())}})}}},UE.plugins.shortcutmenu=function(){var a,r=this.options.shortcutMenu||[];r.length&&(this.addListener("contextmenu mouseup",function(e,t){var i=this,n={type:e,target:t.target||t.srcElement,screenX:t.screenX,screenY:t.screenY,clientX:t.clientX,clientY:t.clientY};if(setTimeout(function(){!1!==i.selection.getRange().collapsed&&"contextmenu"!=e||(a||((a=new baidu.editor.ui.ShortCutMenu({editor:i,items:r,theme:i.options.theme,className:"edui-shortcutmenu"})).render(),i.fireEvent("afterrendershortcutmenu",a)),a.show(n,!!UE.plugins.contextmenu))}),"contextmenu"==e&&(domUtils.preventDefault(t),browser.ie9below)){var o;try{o=i.selection.getNative().createRange()}catch(t){return}if(o.item)new dom.Range(i.document).selectNode(o.item(0)).select(!0,!0)}}),this.addListener("keydown",function(e){"keydown"==e&&a&&!a.isHidden&&a.hide()}))},UE.plugins.basestyle=function(){var e={bold:["strong","b"],italic:["em","i"],subscript:["sub"],superscript:["sup"]},r=function(e,t){return domUtils.filterNodeList(e.selection.getStartElementPath(),t)},s=this;for(var t in s.addshortcutkey({Bold:"ctrl+66",Italic:"ctrl+73",Underline:"ctrl+85"}),s.addInputRule(function(e){utils.each(e.getNodesByTagName("b i"),function(e){switch(e.tagName){case"b":e.tagName="strong";break;case"i":e.tagName="em"}})}),e)!function(e,a){s.commands[e]={execCommand:function(e){var t=s.selection.getRange(),i=r(this,a);if(t.collapsed){if(i){var n=s.document.createTextNode("");t.insertNode(n).removeInlineStyle(a),t.setStartBefore(n),domUtils.remove(n)}else{var o=t.document.createElement(a[0]);"superscript"!=e&&"subscript"!=e||(n=s.document.createTextNode(""),t.insertNode(n).removeInlineStyle(["sub","sup"]).setStartBefore(n).collapse(!0)),t.insertNode(o).setStart(o,0)}t.collapse(!0)}else"superscript"!=e&&"subscript"!=e||i&&i.tagName.toLowerCase()==e||t.removeInlineStyle(["sub","sup"]),i?t.removeInlineStyle(a):t.applyInlineStyle(a[0]);t.select()},queryCommandState:function(){return r(this,a)?1:0}}}(t,e[t])},UE.plugins.elementpath=function(){var a,r,o=this;o.setOpt("elementPathEnabled",!0),o.options.elementPathEnabled&&(o.commands.elementpath={execCommand:function(e,t){var i=r[t],n=o.selection.getRange();a=1*t,n.selectNode(i).select()},queryCommandValue:function(){var e=[].concat(this.selection.getStartElementPath()).reverse(),t=[];r=e;for(var i,n=0;i=e[n];n++)if(3!=i.nodeType){var o=i.tagName.toLowerCase();if("img"==o&&i.getAttribute("anchorname")&&(o="anchor"),t[n]=o,a==n){a=-1;break}}return t}})},UE.plugins.formatmatch=function(){function l(e,t){if(browser.webkit)var i="IMG"==t.target.tagName?t.target:null;c.undoManger&&c.undoManger.save();var n,o=c.selection.getRange(),a=i||o.getClosedNode();if(d&&a&&"IMG"==a.tagName)a.style.cssText+=";float:"+(d.style.cssFloat||d.style.styleFloat||"none")+";display:"+(d.style.display||"inline"),d=null;else if(!d){if(o.collapsed){var r=c.document.createTextNode("match");o.insertNode(r).select()}c.__hasEnterExecCommand=!0;var s=c.options.removeFormatAttributes;c.options.removeFormatAttributes="",c.execCommand("removeformat"),c.options.removeFormatAttributes=s,c.__hasEnterExecCommand=!1,o=c.selection.getRange(),u.length&&(n=o,r&&n.selectNode(r),n.applyInlineStyle(u[u.length-1].tagName,null,u)),r&&o.setStartBefore(r).collapse(!0),o.select(),r&&domUtils.remove(r)}c.undoManger&&c.undoManger.save(),c.removeListener("mouseup",l),h=0}var d,c=this,u=[],h=0;c.addListener("reset",function(){u=[],h=0}),c.commands.formatmatch={execCommand:function(e){if(h)return h=0,u=[],void c.removeListener("mouseup",l);var t=c.selection.getRange();if(!(d=t.getClosedNode())||"IMG"!=d.tagName){t.collapse(!0).shrinkBoundary();var i=t.startContainer;u=domUtils.findParents(i,!0,function(e){return!domUtils.isBlockElm(e)&&1==e.nodeType});for(var n,o=0;n=u[o];o++)if("A"==n.tagName){u.splice(o,1);break}}c.addListener("mouseup",l),h=1},queryCommandState:function(){return h},notNeedUndo:1}},UE.plugin.register("searchreplace",function(){function u(e){return(3==e.nodeType?e.nodeValue:e[browser.ie?"innerText":"textContent"]).replace(domUtils.fillChar,"")}function h(e,t,i){var n,o=t.searchStr,a=new RegExp(o,"g"+(t.casesensitive?"":"i"));if(-1==t.dir){if(e=(e=e.substr(0,i)).split("").reverse().join(""),o=o.split("").reverse().join(""),n=a.exec(e))return i-n.index-o.length}else if(e=e.substr(i),n=a.exec(e))return n.index+i;return-1}function f(e,t,i){for(var n,o=0,a=e.firstChild,r=0;a;){if(3==a.nodeType){if(t<=(o+=r=u(a).replace(/(^[\t\r\n]+)|([\t\r\n]+$)/,"").length))return{node:a,index:r-(o-t)}}else if(!dtd.$empty[a.tagName]&&(t<=(o+=r=u(a).replace(/(^[\t\r\n]+)|([\t\r\n]+$)/,"").length)&&(n=f(a,r-(o-t),i))))return n;a=domUtils.getNextDomNode(a)}}function a(e,t){var i,n=g||e.selection.getRange(),o=t.searchStr,a=e.document.createElement("span");if(a.innerHTML="$$ueditor_searchreplace_key$$",n.shrinkBoundary(!0),!n.collapsed){n.select();var r=e.selection.getText();if(new RegExp("^"+t.searchStr+"$",t.casesensitive?"":"i").test(r)){if(null!=t.replaceStr)return p(n,t.replaceStr),n.select(),!0;n.collapse(-1==t.dir)}}n.insertNode(a),n.enlargeToBlockElm(!0);var s=u(i=n.startContainer).indexOf("$$ueditor_searchreplace_key$$");n.setStartBefore(a),domUtils.remove(a);var l=function(e,t,i){var n,o=i.all||1==i.dir?"getNextDomNode":"getPreDomNode";for(domUtils.isBody(e)&&(e=e.firstChild);e;){if(-1!=(n=h(u(e),i,t)))return{node:e,index:n};for(e=domUtils[o](e);e&&m[e.nodeName.toLowerCase()];)e=domUtils[o](e,!0);e&&(t=-1==i.dir?u(e).length:0)}}(i,s,t);if(l){var d=f(l.node,l.index,o),c=f(l.node,l.index+o.length,o);return n.setStart(d.node,d.index).setEnd(c.node,c.index),void 0!==t.replaceStr&&p(n,t.replaceStr),n.select(),!0}n.setCursor()}function p(e,t){t=r.document.createTextNode(t),e.deleteContents().insertNode(t)}var r=this,m={table:1,tbody:1,tr:1,ol:1,ul:1},g=null;return{commands:{searchreplace:{execCommand:function(e,t){utils.extend(t,{all:!1,casesensitive:!1,dir:1},!0);var i=0;if(t.all){g=null;var n=r.selection.getRange(),o=r.body.firstChild;for(o&&1==o.nodeType?(n.setStart(o,0),n.shrinkBoundary(!0)):3==o.nodeType&&n.setStartBefore(o),n.collapse(!0).select(!0),void 0!==t.replaceStr&&r.fireEvent("saveScene");a(this,t);)i++,(g=r.selection.getRange()).collapse(-1==t.dir);i&&r.fireEvent("saveScene")}else void 0!==t.replaceStr&&r.fireEvent("saveScene"),a(this,t)&&(i++,(g=r.selection.getRange()).collapse(-1==t.dir)),i&&r.fireEvent("saveScene");return i},notNeedUndo:1}},bindEvents:{clearlastSearchResult:function(){g=null}}}}),UE.plugins.customstyle=function(){var r=this;r.setOpt({customstyle:[{tag:"h1",name:"tc",style:"font-size:32px;font-weight:bold;border-bottom:#ccc 2px solid;padding:0 4px 0 0;text-align:center;margin:0 0 20px 0;"},{tag:"h1",name:"tl",style:"font-size:32px;font-weight:bold;border-bottom:#ccc 2px solid;padding:0 4px 0 0;text-align:left;margin:0 0 10px 0;"},{tag:"span",name:"im",style:"font-size:16px;font-style:italic;font-weight:bold;line-height:18px;"},{tag:"span",name:"hi",style:"font-size:16px;font-style:italic;font-weight:bold;color:rgb(51, 153, 204);line-height:18px;"}]}),r.commands.customstyle={execCommand:function(e,t){var i,n,o=t.tag,a=domUtils.findParent(this.selection.getStart(),function(e){return e.getAttribute("label")},!0),r={};for(var s in t)void 0!==t[s]&&(r[s]=t[s]);if(delete r.tag,a&&a.getAttribute("label")==t.label){if(n=(i=this.selection.getRange()).createBookmark(),i.collapsed)if(dtd.$block[a.tagName]){var l=this.document.createElement("p");domUtils.moveChild(a,l),a.parentNode.insertBefore(l,a),domUtils.remove(a)}else domUtils.remove(a,!0);else{var d=domUtils.getCommonAncestor(n.start,n.end),c=domUtils.getElementsByTagName(d,o);new RegExp(o,"i").test(d.tagName)&&c.push(d);for(var u,h=0;u=c[h++];)if(u.getAttribute("label")==t.label){var f=domUtils.getPosition(u,n.start),p=domUtils.getPosition(u,n.end);if((f&domUtils.POSITION_FOLLOWING||f&domUtils.POSITION_CONTAINS)&&(p&domUtils.POSITION_PRECEDING||p&domUtils.POSITION_CONTAINS)&&dtd.$block[o]){l=this.document.createElement("p");domUtils.moveChild(u,l),u.parentNode.insertBefore(l,u)}domUtils.remove(u,!0)}(a=domUtils.findParent(d,function(e){return e.getAttribute("label")==t.label},!0))&&domUtils.remove(a,!0)}i.moveToBookmark(n).select()}else if(dtd.$block[o]){if(this.execCommand("paragraph",o,r,"customstyle"),!(i=this.selection.getRange()).collapsed){i.collapse(),a=domUtils.findParent(this.selection.getStart(),function(e){return e.getAttribute("label")==t.label},!0);var m=this.document.createElement("p");domUtils.insertAfter(a,m),domUtils.fillNode(this.document,m),i.setStart(m,0).setCursor()}}else{if((i=this.selection.getRange()).collapsed)return a=this.document.createElement(o),domUtils.setAttributes(a,r),void i.insertNode(a).setStart(a,0).setCursor();n=i.createBookmark(),i.applyInlineStyle(o,r).moveToBookmark(n).select()}},queryCommandValue:function(){var e=domUtils.filterNodeList(this.selection.getStartElementPath(),function(e){return e.getAttribute("label")});return e?e.getAttribute("label"):""}},r.addListener("keyup",function(e,t){var i=t.keyCode||t.which;if(32==i||13==i){var n=r.selection.getRange();if(n.collapsed){var o=domUtils.findParent(r.selection.getStart(),function(e){return e.getAttribute("label")},!0);if(o&&dtd.$block[o.tagName]&&domUtils.isEmptyNode(o)){var a=r.document.createElement("p");domUtils.insertAfter(o,a),domUtils.fillNode(r.document,a),domUtils.remove(o),n.setStart(a,0).setCursor()}}}})},UE.plugins.catchremoteimage=function(){var me=this,ajax=UE.ajax;!1!==me.options.catchRemoteImageEnable&&(me.setOpt({catchRemoteImageEnable:!1}),me.addListener("afterpaste",function(){me.fireEvent("catchRemoteImage")}),me.addListener("catchRemoteImage",function(){function catchremoteimage(e,t){var i=utils.serializeParam(me.queryCommandValue("serverparam"))||"",n=utils.formatUrl(catcherActionUrl+(-1==catcherActionUrl.indexOf("?")?"?":"&")+i),o={method:"POST",dataType:utils.isCrossDomainUrl(n)?"jsonp":"",timeout:6e4,onsuccess:t.success,onerror:t.error};o[catcherFieldName]=e,ajax.request(n,o)}for(var catcherLocalDomain=me.getOpt("catcherLocalDomain"),catcherActionUrl=me.getActionUrl(me.getOpt("catcherActionName")),catcherUrlPrefix=me.getOpt("catcherUrlPrefix"),catcherFieldName=me.getOpt("catcherFieldName"),remoteImages=[],loadingIMG=me.options.themePath+me.options.theme+"/images/spacer.gif",imgs=me.document.querySelectorAll('[style*="url"],img'),test=function(e,t){if(-1!=e.indexOf(location.host)||/(^\.)|(^\/)/.test(e))return!0;if(t)for(var i,n=0;i=t[n++];)if(-1!==e.indexOf(i))return!0;return!1},i=0,ci;ci=imgs[i++];)if(!ci.getAttribute("word_img"))if("IMG"==ci.nodeName){var src=ci.getAttribute("_src")||ci.src||"";/^(https?|ftp):/i.test(src)&&!test(src,catcherLocalDomain)&&(remoteImages.push(src),domUtils.setAttributes(ci,{class:"loadingclass",_src:src,src:loadingIMG}))}else{var backgroundImageurl=ci.style.cssText.replace(/.*\s?url\([\'\"]?/,"").replace(/[\'\"]?\).*/,"");/^(https?|ftp):/i.test(backgroundImageurl)&&!test(backgroundImageurl,catcherLocalDomain)&&(remoteImages.push(backgroundImageurl),ci.style.cssText=ci.style.cssText.replace(backgroundImageurl,loadingIMG),domUtils.setAttributes(ci,{"data-background":backgroundImageurl}))}remoteImages.length&&catchremoteimage(remoteImages,{success:function(r){try{var info=void 0!==r.state?r:eval("("+r.responseText+")")}catch(e){return}var i,j,ci,cj,oldSrc,newSrc,list=info.list,catchFailList=[],catchSuccessList=[],failIMG=me.options.themePath+me.options.theme+"/images/img-cracked.png";for(i=0;ci=imgs[i++];)for(oldSrc=ci.getAttribute("_src")||ci.src||"",oldBgIMG=ci.getAttribute("data-background")||"",j=0;cj=list[j++];){if(oldSrc==cj.source&&"SUCCESS"==cj.state){newSrc=catcherUrlPrefix+cj.url,domUtils.removeClasses(ci,"loadingclass"),domUtils.setAttributes(ci,{src:newSrc,_src:newSrc,"data-catchResult":"img_catchSuccess"}),catchSuccessList.push(ci);break}if(oldSrc==cj.source&&"FAIL"==cj.state){domUtils.removeClasses(ci,"loadingclass"),domUtils.setAttributes(ci,{src:failIMG,_src:failIMG,"data-catchResult":"img_catchFail"}),catchFailList.push(ci);break}if(oldBgIMG==cj.source&&"SUCCESS"==cj.state){newBgIMG=catcherUrlPrefix+cj.url,ci.style.cssText=ci.style.cssText.replace(loadingIMG,newBgIMG),domUtils.removeAttributes(ci,"data-background"),domUtils.setAttributes(ci,{"data-catchResult":"img_catchSuccess"}),catchSuccessList.push(ci);break}if(oldBgIMG==cj.source&&"FAIL"==cj.state){ci.style.cssText=ci.style.cssText.replace(loadingIMG,failIMG),domUtils.removeAttributes(ci,"data-background"),domUtils.setAttributes(ci,{"data-catchResult":"img_catchFail"}),catchFailList.push(ci);break}}me.fireEvent("catchremotesuccess",catchSuccessList,catchFailList)},error:function(){me.fireEvent("catchremoteerror")}})}))},UE.plugin.register("snapscreen",function(){function getLocation(e){var t,i=document.createElement("a"),n=utils.serializeParam(me.queryCommandValue("serverparam"))||"";return i.href=e,browser.ie&&(i.href=i.href),t=i.search,n&&(t=(t=t+(-1==t.indexOf("?")?"?":"&")+n).replace(/[&]+/gi,"&")),{port:i.port,hostname:i.hostname,path:i.pathname+t||+i.hash}}var me=this,snapplugin;return{commands:{snapscreen:{execCommand:function(cmd){function onSuccess(rs){try{if(rs=eval("("+rs+")"),"SUCCESS"==rs.state){var opt=me.options;me.execCommand("insertimage",{src:opt.snapscreenUrlPrefix+rs.url,_src:opt.snapscreenUrlPrefix+rs.url,alt:rs.title||"",floatStyle:opt.snapscreenImgAlign})}else alert(rs.state)}catch(e){alert(lang.callBackErrorMsg)}}var url,local,res,lang=me.getLang("snapScreen_plugin");if(!snapplugin){var container=me.container,doc=me.container.ownerDocument||me.container.document;snapplugin=doc.createElement("object");try{snapplugin.type="application/x-pluginbaidusnap"}catch(e){return}snapplugin.style.cssText="position:absolute;left:-9999px;width:0;height:0;",snapplugin.setAttribute("width","0"),snapplugin.setAttribute("height","0"),container.appendChild(snapplugin)}url=me.getActionUrl(me.getOpt("snapscreenActionName")),local=getLocation(url),setTimeout(function(){try{res=snapplugin.saveSnapshot(local.hostname,local.path,local.port)}catch(e){return void me.ui._dialogs.snapscreenDialog.open()}onSuccess(res)},50)},queryCommandState:function(){return-1!=navigator.userAgent.indexOf("Windows",0)?0:-1}}}}}),UE.commands.insertparagraph={execCommand:function(e,t){for(var i,n=this.selection.getRange(),o=n.startContainer;o&&!domUtils.isBody(o);)o=(i=o).parentNode;if(i){var a=this.document.createElement("p");t?i.parentNode.insertBefore(a,i):i.parentNode.insertBefore(a,i.nextSibling),domUtils.fillNode(this.document,a),n.setStart(a,0).setCursor(!1,!0)}}},UE.plugin.register("webapp",function(){function n(e,t){return t?'<iframe class="edui-faked-webapp" title="'+e.title+'" '+(e.align&&!e.cssfloat?'align="'+e.align+'"':"")+(e.cssfloat?'style="float:'+e.cssfloat+'"':"")+'width="'+e.width+'" height="'+e.height+'"  scrolling="no" frameborder="0" src="'+e.url+'" logo_url = "'+e.logo+'"></iframe>':'<img title="'+e.title+'" width="'+e.width+'" height="'+e.height+'" src="'+i.options.UEDITOR_HOME_URL+'themes/default/images/spacer.gif" _logo_url="'+e.logo+'" style="background:url('+e.logo+') no-repeat center center; border:1px solid gray;" class="edui-faked-webapp" _url="'+e.url+'" '+(e.align&&!e.cssfloat?'align="'+e.align+'"':"")+(e.cssfloat?'style="float:'+e.cssfloat+'"':"")+"/>"}var i=this;return{outputRule:function(e){utils.each(e.getNodesByTagName("img"),function(e){var t;if("edui-faked-webapp"==e.getAttr("class")){t=n({title:e.getAttr("title"),width:e.getAttr("width"),height:e.getAttr("height"),align:e.getAttr("align"),cssfloat:e.getStyle("float"),url:e.getAttr("_url"),logo:e.getAttr("_logo_url")},!0);var i=UE.uNode.createElement(t);e.parentNode.replaceChild(i,e)}})},inputRule:function(e){utils.each(e.getNodesByTagName("iframe"),function(e){if("edui-faked-webapp"==e.getAttr("class")){var t=UE.uNode.createElement(n({title:e.getAttr("title"),width:e.getAttr("width"),height:e.getAttr("height"),align:e.getAttr("align"),cssfloat:e.getStyle("float"),url:e.getAttr("src"),logo:e.getAttr("logo_url")}));e.parentNode.replaceChild(t,e)}})},commands:{webapp:{execCommand:function(e,t){var i=n(utils.extend(t,{align:"none"}),!1);this.execCommand("inserthtml",i)},queryCommandState:function(){var e=this.selection.getRange().getClosedNode();return e&&"edui-faked-webapp"==e.className?1:0}}}}}),UE.plugins.template=function(){UE.commands.template={execCommand:function(e,t){t.html&&this.execCommand("inserthtml",t.html)}},this.addListener("click",function(e,t){var i=t.target||t.srcElement,n=this.selection.getRange(),o=domUtils.findParent(i,function(e){if(e.className&&domUtils.hasClass(e,"ue_t"))return e},!0);o&&n.selectNode(o).shrinkBoundary().select()}),this.addListener("keydown",function(e,t){var i=this.selection.getRange();if(!i.collapsed&&!(t.ctrlKey||t.metaKey||t.shiftKey||t.altKey)){var n=domUtils.findParent(i.startContainer,function(e){if(e.className&&domUtils.hasClass(e,"ue_t"))return e},!0);n&&domUtils.removeClasses(n,["ue_t"])}})},UE.plugin.register("music",function(){function a(e,t,i,n,o,a){return a?'<embed type="application/x-shockwave-flash" class="edui-faked-music" pluginspage="http://www.macromedia.com/go/getflashplayer" src="'+e+'" width="'+t+'" height="'+i+'" '+(n&&!o?'align="'+n+'"':"")+(o?'style="float:'+o+'"':"")+' wmode="transparent" play="true" loop="false" menu="false" allowscriptaccess="never" allowfullscreen="true" >':"<img "+(n&&!o?'align="'+n+'"':"")+(o?'style="float:'+o+'"':"")+' width="'+t+'" height="'+i+'" _url="'+e+'" class="edui-faked-music" src="'+r.options.langPath+r.options.lang+'/images/music.png" />'}var r=this;return{outputRule:function(e){utils.each(e.getNodesByTagName("img"),function(e){var t;if("edui-faked-music"==e.getAttr("class")){var i=e.getStyle("float"),n=e.getAttr("align");t=a(e.getAttr("_url"),e.getAttr("width"),e.getAttr("height"),n,i,!0);var o=UE.uNode.createElement(t);e.parentNode.replaceChild(o,e)}})},inputRule:function(e){utils.each(e.getNodesByTagName("embed"),function(e){if("edui-faked-music"==e.getAttr("class")){var t=e.getStyle("float"),i=e.getAttr("align");html=a(e.getAttr("src"),e.getAttr("width"),e.getAttr("height"),i,t,!1);var n=UE.uNode.createElement(html);e.parentNode.replaceChild(n,e)}})},commands:{music:{execCommand:function(e,t){var i=a(t.url,t.width||400,t.height||95,"none",!1);this.execCommand("inserthtml",i)},queryCommandState:function(){var e=this.selection.getRange().getClosedNode();return e&&"edui-faked-music"==e.className?1:0}}}}}),UE.plugin.register("autoupload",function(){function s(e,t){var i,a,n,o,r,s,l,d,c=t,u=/image\/\w+/i.test(e.type)?"image":"file",h="loading_"+(+new Date).toString(36);if(i=c.getOpt(u+"FieldName"),a=c.getOpt(u+"UrlPrefix"),n=c.getOpt(u+"MaxSize"),o=c.getOpt(u+"AllowFiles"),r=c.getActionUrl(c.getOpt(u+"ActionName")),l=function(e){var t=c.document.getElementById(h);t&&domUtils.remove(t),c.fireEvent("showmessage",{id:h,content:e,type:"error",timeout:4e3})},d="image"==u?(s='<img class="loadingclass" id="'+h+'" src="'+c.options.themePath+c.options.theme+'/images/spacer.gif">',function(e){var t=a+e.url,i=c.document.getElementById(h);i&&(domUtils.removeClasses(i,"loadingclass"),i.setAttribute("src",t),i.setAttribute("_src",t),i.setAttribute("alt",e.original||""),i.removeAttribute("id"),c.trigger("contentchange",i))}):(s='<p><img class="loadingclass" id="'+h+'" src="'+c.options.themePath+c.options.theme+'/images/spacer.gif"></p>',function(e){var t=a+e.url,i=c.document.getElementById(h),n=c.selection.getRange(),o=n.createBookmark();n.selectNode(i).select(),c.execCommand("insertfile",{url:t}),n.moveToBookmark(o).select()}),c.execCommand("inserthtml",s),c.getOpt(u+"ActionName"))if(e.size>n)l(c.getLang("autoupload.exceedSizeError"));else{var f=e.name?e.name.substr(e.name.lastIndexOf(".")):"";if(f&&"image"!=u||o&&-1==(o.join("")+".").indexOf(f.toLowerCase()+"."))l(c.getLang("autoupload.exceedTypeError"));else{var p=new XMLHttpRequest,m=new FormData,g=utils.serializeParam(c.queryCommandValue("serverparam"))||"",v=utils.formatUrl(r+(-1==r.indexOf("?")?"?":"&")+g);m.append(i,e,e.name||"blob."+e.type.substr("image/".length)),m.append("type","ajax"),p.open("post",v,!0),p.setRequestHeader("X-Requested-With","XMLHttpRequest"),p.addEventListener("load",function(e){try{var t=new Function("return "+utils.trim(e.target.response))();"SUCCESS"==t.state&&t.url?d(t):l(t.state)}catch(e){l(c.getLang("autoupload.loadError"))}}),p.send(m)}}else l(c.getLang("autoupload.errorLoadConfig"))}function l(e){return e.dataTransfer&&e.dataTransfer.files?e.dataTransfer.files:null}return{outputRule:function(e){utils.each(e.getNodesByTagName("img"),function(e){/\b(loaderrorclass)|(bloaderrorclass)\b/.test(e.getAttr("class"))&&e.parentNode.removeChild(e)}),utils.each(e.getNodesByTagName("p"),function(e){/\bloadpara\b/.test(e.getAttr("class"))&&e.parentNode.removeChild(e)})},bindEvents:{defaultOptions:{enableDragUpload:!0,enablePasteUpload:!0},ready:function(e){var r=this;if(window.FormData&&window.FileReader){var t=function(e){var t,i,n=!1;if(t="paste"==e.type?(i=e).clipboardData&&i.clipboardData.items&&1==i.clipboardData.items.length&&/^image\//.test(i.clipboardData.items[0].type)?i.clipboardData.items:null:l(e)){for(var o,a=t.length;a--;)(o=t[a]).getAsFile&&(o=o.getAsFile()),o&&0<o.size&&(s(o,r),n=!0);n&&e.preventDefault()}};!1!==r.getOpt("enablePasteUpload")&&domUtils.on(r.body,"paste ",t),!1!==r.getOpt("enableDragUpload")?(domUtils.on(r.body,"drop",t),domUtils.on(r.body,"dragover",function(e){"Files"==e.dataTransfer.types[0]&&e.preventDefault()})):browser.gecko&&domUtils.on(r.body,"drop",function(e){l(e)&&e.preventDefault()}),utils.cssRule("loading",".loadingclass{display:inline-block;cursor:default;background: url('"+this.options.themePath+this.options.theme+"/images/loading.gif') no-repeat center center transparent;border:1px solid #cccccc;margin-left:1px;height: 22px;width: 22px;}\n.loaderrorclass{display:inline-block;cursor:default;background: url('"+this.options.themePath+this.options.theme+"/images/loaderror.png') no-repeat center center transparent;border:1px solid #cccccc;margin-right:1px;height: 22px;width: 22px;}",this.document)}}}}}),UE.plugin.register("autosave",function(){function e(e){var t;if(!(new Date-n<o)){if(!e.hasContents())return void(a&&i.removePreferences(a));n=new Date,e._saveFlag=null,t=i.body.innerHTML,!1!==e.fireEvent("beforeautosave",{content:t})&&(i.setPreferences(a,t),e.fireEvent("afterautosave",{content:t}))}}var i=this,n=new Date,o=20,a=null;return{defaultOptions:{saveInterval:500,enableAutoSave:!0},bindEvents:{ready:function(){var e,t="-drafts-data";e=i.key?i.key+t:(i.container.parentNode.id||"ue-common")+t,a=(location.protocol+location.host+location.pathname).replace(/[.:\/]/g,"_")+e},contentchange:function(){i.getOpt("enableAutoSave")&&a&&(i._saveFlag&&window.clearTimeout(i._saveFlag),0<i.options.saveInterval?i._saveFlag=window.setTimeout(function(){e(i)},i.options.saveInterval):e(i))}},commands:{clearlocaldata:{execCommand:function(e,t){a&&i.getPreferences(a)&&i.removePreferences(a)},notNeedUndo:!0,ignoreContentChange:!0},getlocaldata:{execCommand:function(e,t){return a&&i.getPreferences(a)||""},notNeedUndo:!0,ignoreContentChange:!0},drafts:{execCommand:function(e,t){a&&(i.body.innerHTML=i.getPreferences(a)||"<p>"+domUtils.fillHtml+"</p>",i.focus(!0))},queryCommandState:function(){return a?null===i.getPreferences(a)?-1:0:-1},notNeedUndo:!0,ignoreContentChange:!0}}}}),UE.plugin.register("charts",function(){function r(e){var t,i;if(e.rows.length<2)return!1;if(e.rows[0].cells.length<2)return!1;i=(t=e.rows[0].cells).length;for(var n=0;a=t[n];n++)if("th"!==a.tagName.toLowerCase())return!1;var o;for(n=1;o=e.rows[n];n++){if(o.cells.length!=i)return!1;if("th"!==o.cells[0].tagName.toLowerCase())return!1;for(var a,r=1;a=o.cells[r];r++){var s=utils.trim(a.innerText||a.textContent||"");if(s=s.replace(new RegExp(UE.dom.domUtils.fillChar,"g"),"").replace(/^\s+|\s+$/g,""),!/^\d*\.?\d+$/.test(s))return!1}}return!0}var s=this;return{bindEvents:{chartserror:function(){}},commands:{charts:{execCommand:function(e,t){var i=domUtils.findParentByTagName(this.selection.getRange().startContainer,"table",!0),n=[],o={};if(!i)return!1;if(!r(i))return s.fireEvent("chartserror"),!1;for(var a in o.title=t.title||"",o.subTitle=t.subTitle||"",o.xTitle=t.xTitle||"",o.yTitle=t.yTitle||"",o.suffix=t.suffix||"",o.tip=t.tip||"",o.dataFormat=t.tableDataFormat||"",o.chartType=t.chartType||0,o)o.hasOwnProperty(a)&&n.push(a+":"+o[a]);i.setAttribute("data-chart",n.join(";")),domUtils.addClass(i,"edui-charts-table")},queryCommandState:function(e,t){var i=domUtils.findParentByTagName(this.selection.getRange().startContainer,"table",!0);return i&&r(i)?0:-1}}},inputRule:function(e){utils.each(e.getNodesByTagName("table"),function(e){void 0!==e.getAttr("data-chart")&&e.setAttr("style")})},outputRule:function(e){utils.each(e.getNodesByTagName("table"),function(e){void 0!==e.getAttr("data-chart")&&e.setAttr("style","display: none;")})}}}),UE.plugin.register("section",function(){function i(e){this.tag="",this.level=-1,this.dom=null,this.nextSection=null,this.previousSection=null,this.parentSection=null,this.startAddress=[],this.endAddress=[],this.children=[]}function m(e){var t=new i;return utils.extend(t,e)}function c(e,t){for(var i=t,n=0;n<e.length;n++){if(!i.childNodes)return null;i=i.childNodes[e[n]]}return i}var n=this;return{bindMultiEvents:{type:"aftersetcontent afterscencerestore",handler:function(){n.fireEvent("updateSections")}},bindEvents:{ready:function(){n.fireEvent("updateSections"),domUtils.on(n.body,"drop paste",function(){n.fireEvent("updateSections")})},afterexeccommand:function(e,t){"paragraph"==t&&n.fireEvent("updateSections")},keyup:function(e,t){if(1!=this.selection.getRange().collapsed)this.fireEvent("updateSections");else{var i=t.keyCode||t.which;13!=i&&8!=i&&46!=i||this.fireEvent("updateSections")}}},commands:{getsections:{execCommand:function(e,t){function h(e){for(var t=0;t<i.length;t++)if(i[t](e))return t;return-1}for(var i=t||["h1","h2","h3","h4","h5","h6"],n=0;n<i.length;n++)"string"==typeof i[n]?i[n]=function(t){return function(e){return e.tagName==t.toUpperCase()}}(i[n]):"function"!=typeof i[n]&&(i[n]=function(e){return null});var f=this,o=m({level:-1,title:"root"}),p=o;return function e(t,i){for(var n,o,a,r=null,s=t.childNodes,l=0,d=s.length;l<d;l++)if(0<=(n=h(a=s[l]))){var c=f.selection.getRange().selectNode(a).createAddress(!0).startAddress,u=m({tag:a.tagName,title:a.innerText||a.textContent||"",level:n,dom:a,startAddress:utils.clone(c,[]),endAddress:utils.clone(c,[]),children:[]});for(o=(p.nextSection=u).previousSection=p;n<=o.level;)o=o.parentSection;(u.parentSection=o).children.push(u),r=p=u}else 1===a.nodeType&&e(a,i),r&&r.endAddress[r.endAddress.length-1]++}(f.body,o),o},notNeedUndo:!0},movesection:{execCommand:function(e,t,i,n){var o,a;if(t&&i&&-1!=i.level&&(a=c(o=n?i.endAddress:i.startAddress,this.body),o&&a&&!function(e,t,i){for(var n=!1,o=!1,a=0;a<e.length&&!(a>=i.length);a++){if(i[a]>e[a]){n=!0;break}if(i[a]<e[a])break}for(a=0;a<t.length&&!(a>=i.length);a++){if(i[a]<e[a]){o=!0;break}if(i[a]>e[a])break}return n&&o}(t.startAddress,t.endAddress,o))){var r,s,l=c(t.startAddress,this.body),d=c(t.endAddress,this.body);if(n)for(r=d;r&&!(domUtils.getPosition(l,r)&domUtils.POSITION_FOLLOWING)&&(s=r.previousSibling,domUtils.insertAfter(a,r),r!=l);)r=s;else for(r=l;r&&!(domUtils.getPosition(r,d)&domUtils.POSITION_FOLLOWING)&&(s=r.nextSibling,a.parentNode.insertBefore(r,a),r!=d);)r=s;this.fireEvent("updateSections")}}},deletesection:{execCommand:function(e,t,i){function n(e){for(var t=o.body,i=0;i<e.length;i++){if(!t.childNodes)return null;t=t.childNodes[e[i]]}return t}var o=this;if(t){var a,r=n(t.startAddress),s=n(t.endAddress),l=r;if(i)domUtils.remove(l);else for(;l&&domUtils.inDoc(s,o.document)&&!(domUtils.getPosition(l,s)&domUtils.POSITION_FOLLOWING);)a=l.nextSibling,domUtils.remove(l),l=a;o.fireEvent("updateSections")}}},selectsection:{execCommand:function(e,t){if(!t&&!t.dom)return!1;var i=this.selection.getRange(),n={startAddress:utils.clone(t.startAddress,[]),endAddress:utils.clone(t.endAddress,[])};return n.endAddress[n.endAddress.length-1]++,i.moveToAddress(n).select().scrollToView(),!0},notNeedUndo:!0},scrolltosection:{execCommand:function(e,t){if(!t&&!t.dom)return!1;var i=this.selection.getRange(),n={startAddress:t.startAddress,endAddress:t.endAddress};return n.endAddress[n.endAddress.length-1]++,i.moveToAddress(n).scrollToView(),!0},notNeedUndo:!0}}}}),UE.plugin.register("simpleupload",function(){function i(){var r=n.offsetWidth||20,s=n.offsetHeight||20,c=document.createElement("iframe"),u="display:block;width:"+r+"px;height:"+s+"px;overflow:hidden;border:0;margin:0;padding:0;position:absolute;top:0;left:0;filter:alpha(opacity=0);-moz-opacity:0;-khtml-opacity: 0;opacity: 0;cursor:pointer;";domUtils.on(c,"load",function(){var e,t,i,n=(+new Date).toString(36);i=(t=c.contentDocument||c.contentWindow.document).body,(e=t.createElement("div")).innerHTML='<form id="edui_form_'+n+'" target="edui_iframe_'+n+'" method="POST" enctype="multipart/form-data" action="'+h.getOpt("serverUrl")+'" style="'+u+'"><input id="edui_input_'+n+'" type="file" accept="image/*" name="'+h.options.imageFieldName+'" style="'+u+'"></form><iframe id="edui_iframe_'+n+'" name="edui_iframe_'+n+'" style="display:none;width:0;height:0;border:0;margin:0;padding:0;position:absolute;"></iframe>',e.className="edui-"+h.options.theme,e.id=h.ui.id+"_iframeupload",i.style.cssText=u,i.style.width=r+"px",i.style.height=s+"px",i.appendChild(e),i.parentNode&&(i.parentNode.style.width=r+"px",i.parentNode.style.height=r+"px");var o,l=t.getElementById("edui_form_"+n),a=t.getElementById("edui_input_"+n),d=t.getElementById("edui_iframe_"+n);domUtils.on(a,"change",function(){function r(e){if(s){var t=h.document.getElementById(s);t&&domUtils.remove(t),h.fireEvent("showmessage",{id:s,content:e,type:"error",timeout:4e3})}}if(a.value){var s="loading_"+(+new Date).toString(36),e=utils.serializeParam(h.queryCommandValue("serverparam"))||"",t=h.getActionUrl(h.getOpt("imageActionName")),i=h.getOpt("imageAllowFiles");if(h.focus(),h.execCommand("inserthtml",'<img class="loadingclass" id="'+s+'" src="'+h.options.themePath+h.options.theme+'/images/spacer.gif">'),!h.getOpt("imageActionName"))return void errorHandler(h.getLang("autoupload.errorLoadConfig"));var n=a.value,o=n?n.substr(n.lastIndexOf(".")):"";if(!o||i&&-1==(i.join("")+".").indexOf(o.toLowerCase()+"."))return void r(h.getLang("simpleupload.exceedTypeError"));domUtils.on(d,"load",function e(){try{var t,i,n,o=(d.contentDocument||d.contentWindow.document).body,a=o.innerText||o.textContent||"";i=new Function("return "+a)(),t=h.options.imageUrlPrefix+i.url,"SUCCESS"==i.state&&i.url?(n=h.document.getElementById(s),domUtils.removeClasses(n,"loadingclass"),n.setAttribute("src",t),n.setAttribute("_src",t),n.setAttribute("alt",i.original||""),n.removeAttribute("id"),h.fireEvent("contentchange")):r(i.state)}catch(e){r(h.getLang("simpleupload.loadError"))}l.reset(),domUtils.un(d,"load",e)}),l.action=utils.formatUrl(t+(-1==t.indexOf("?")?"?":"&")+e),l.submit()}}),h.addListener("selectionchange",function(){clearTimeout(o),o=setTimeout(function(){var e=h.queryCommandState("simpleupload");a.disabled=-1==e&&"disabled"},400)}),f=!0}),c.style.cssText=u,n.appendChild(c)}var n,h=this,f=!1;return{bindEvents:{ready:function(){utils.cssRule("loading",".loadingclass{display:inline-block;cursor:default;background: url('"+this.options.themePath+this.options.theme+"/images/loading.gif') no-repeat center center transparent;border:1px solid #cccccc;margin-right:1px;height: 22px;width: 22px;}\n.loaderrorclass{display:inline-block;cursor:default;background: url('"+this.options.themePath+this.options.theme+"/images/loaderror.png') no-repeat center center transparent;border:1px solid #cccccc;margin-right:1px;height: 22px;width: 22px;}",this.document)},simpleuploadbtnready:function(e,t){n=t,h.afterConfigReady(i)}},outputRule:function(e){utils.each(e.getNodesByTagName("img"),function(e){/\b(loaderrorclass)|(bloaderrorclass)\b/.test(e.getAttr("class"))&&e.parentNode.removeChild(e)})},commands:{simpleupload:{queryCommandState:function(){return f?0:-1}}}}}),UE.plugin.register("serverparam",function(){var n={};return{commands:{serverparam:{execCommand:function(e,t,i){null==t?n={}:utils.isString(t)?null==i?delete n[t]:n[t]=i:utils.isObject(t)?utils.extend(n,t,!1):utils.isFunction(t)&&utils.extend(n,t(),!1)},queryCommandValue:function(){return n||{}}}}}}),UE.plugin.register("insertfile",function(){var h=this;return{commands:{insertfile:{execCommand:function(e,t){if(t=utils.isArray(t)?t:[t],!0!==h.fireEvent("beforeinsertfile",t)){var i,n,o,a,r="",s=h.getOpt("UEDITOR_HOME_URL"),l=s+("/"==s.substr(s.length-1)?"":"/")+"dialogs/attachment/fileTypeImages/";for(i=0;i<t.length;i++)n=t[i],o=l+(d=n.title,void 0,c=d.substr(d.lastIndexOf(".")+1).toLowerCase(),(u={rar:"icon_rar.gif",zip:"icon_rar.gif",tar:"icon_rar.gif",gz:"icon_rar.gif",bz2:"icon_rar.gif",doc:"icon_doc.gif",docx:"icon_doc.gif",pdf:"icon_pdf.gif",mp3:"icon_mp3.gif",xls:"icon_xls.gif",chm:"icon_chm.gif",ppt:"icon_ppt.gif",pptx:"icon_ppt.gif",avi:"icon_mv.gif",rmvb:"icon_mv.gif",wmv:"icon_mv.gif",flv:"icon_mv.gif",swf:"icon_mv.gif",rm:"icon_mv.gif",exe:"icon_exe.gif",psd:"icon_psd.gif",txt:"icon_txt.gif",jpg:"icon_jpg.gif",png:"icon_jpg.gif",jpeg:"icon_jpg.gif",gif:"icon_jpg.gif",ico:"icon_jpg.gif",bmp:"icon_jpg.gif"})[c]?u[c]:u.txt),a=n.title||n.url.substr(n.url.lastIndexOf("/")+1),r+='<p style="line-height: 16px;"><img style="vertical-align: middle; margin-right: 2px;" src="'+o+'" _src="'+o+'" /><a style="font-size:12px; color:#0066cc;" href="'+n.url+'" title="'+a+'">'+a+"</a></p>";h.execCommand("insertHtml",r),h.fireEvent("afterinsertfile",t)}var d,c,u}}}}});var baidu=baidu||{},rnh,snh,tnh,unh,nnh,onh,pnh,cmh,dmh,emh,fmh,Vlh,Wlh,Xlh,Ylh,Gkh,Hkh,Ikh,Jkh,Kkh,Lkh,Mkh,Nkh,Okh,Pkh,okh,pkh,qkh,rkh,skh,ojh,pjh,qjh,rjh,djh,ejh,fjh,gjh,hjh,Qih,Rih,Sih,Tih,Uih,Xhh,Yhh,Zhh,Lhh,Mhh,Nhh,Ohh,Phh,whh,xhh,yhh,zhh,Ahh,Bhh,lhh,mhh,nhh,ohh,phh,_gh,ahh,bhh,chh,Dgh,Egh,Fgh,Ggh,ggh,hgh,igh,jgh,Meh,Neh,Oeh,Peh,Qeh,Ieh,Jeh,Keh,oeh,peh,qeh,reh;baidu.editor=baidu.editor||{},UE.ui=baidu.editor.ui={},function(){function t(){var e=document.getElementById("edui_fixedlayer");l.setViewportOffset(e,{left:0,top:0})}var a=baidu.editor.browser,r=baidu.editor.dom.domUtils,i="$EDITORUI",n=window[i]={},o="ID"+i,s=0,l=baidu.editor.ui.uiUtils={uid:function(e){return e?e[o]||(e[o]=++s):++s},hook:function(o,e){var a;return o&&o._callbacks?a=o:(a=function(){var e;o&&(e=o.apply(this,arguments));for(var t=a._callbacks,i=t.length;i--;){var n=t[i].apply(this,arguments);void 0===e&&(e=n)}return e})._callbacks=[],a._callbacks.push(e),a},createElementByHtml:function(e){var t=document.createElement("div");return t.innerHTML=e,(t=t.firstChild).parentNode.removeChild(t),t},getViewportElement:function(){return a.ie&&a.quirks?document.body:document.documentElement},getClientRect:function(e){var t;try{t=e.getBoundingClientRect()}catch(e){t={left:0,top:0,height:0,width:0}}for(var i,n={left:Math.round(t.left),top:Math.round(t.top),height:Math.round(t.bottom-t.top),width:Math.round(t.right-t.left)};(i=e.ownerDocument)!==document&&(e=r.getWindow(i).frameElement);)t=e.getBoundingClientRect(),n.left+=t.left,n.top+=t.top;return n.bottom=n.top+n.height,n.right=n.left+n.width,n},getViewportRect:function(){var e=l.getViewportElement(),t=0|(window.innerWidth||e.clientWidth),i=0|(window.innerHeight||e.clientHeight);return{left:0,top:0,height:i,width:t,bottom:i,right:t}},setViewportOffset:function(e,t){var i=l.getFixedLayer();e.parentNode===i?(e.style.left=t.left+"px",e.style.top=t.top+"px"):r.setViewportOffset(e,t)},getEventOffset:function(e){var t=e.target||e.srcElement,i=l.getClientRect(t),n=l.getViewportOffsetByEvent(e);return{left:n.left-i.left,top:n.top-i.top}},getViewportOffsetByEvent:function(e){var t=e.target||e.srcElement,i=r.getWindow(t).frameElement,n={left:e.clientX,top:e.clientY};if(i&&t.ownerDocument!==document){var o=l.getClientRect(i);n.left+=o.left,n.top+=o.top}return n},setGlobal:function(e,t){return n[e]=t,i+'["'+e+'"]'},unsetGlobal:function(e){delete n[e]},copyAttributes:function(e,t){for(var i=t.attributes,n=i.length;n--;){var o=i[n];"style"==o.nodeName||"class"==o.nodeName||a.ie&&!o.specified||e.setAttribute(o.nodeName,o.nodeValue)}t.className&&r.addClass(e,t.className),t.style.cssText&&(e.style.cssText+=";"+t.style.cssText)},removeStyle:function(e,t){if(e.style.removeProperty)e.style.removeProperty(t);else{if(!e.style.removeAttribute)throw"";e.style.removeAttribute(t)}},contains:function(e,t){return e&&t&&e!==t&&(e.contains?e.contains(t):16&e.compareDocumentPosition(t))},startDrag:function(e,n,t){function i(e){var t=e.clientX-r,i=e.clientY-s;n.ondragmove(t,i,e),e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}function o(e){t.removeEventListener("mousemove",i,!0),t.removeEventListener("mouseup",o,!0),window.removeEventListener("mouseup",o,!0),n.ondragstop()}function a(){l.releaseCapture(),l.detachEvent("onmousemove",i),l.detachEvent("onmouseup",a),l.detachEvent("onlosecaptrue",a),n.ondragstop()}t=t||document;var r=e.clientX,s=e.clientY;if(t.addEventListener)t.addEventListener("mousemove",i,!0),t.addEventListener("mouseup",o,!0),window.addEventListener("mouseup",o,!0),e.preventDefault();else{var l=e.srcElement;l.setCapture(),l.attachEvent("onmousemove",i),l.attachEvent("onmouseup",a),l.attachEvent("onlosecaptrue",a),e.returnValue=!1}n.ondragstart()},getFixedLayer:function(){var e=document.getElementById("edui_fixedlayer");return null==e&&((e=document.createElement("div")).id="edui_fixedlayer",document.body.appendChild(e),a.ie&&a.version<=8?(e.style.position="absolute",r.on(window,"scroll",t),r.on(window,"resize",baidu.editor.utils.defer(t,0,!0)),setTimeout(t)):e.style.position="fixed",e.style.left="0",e.style.top="0",e.style.width="0",e.style.height="0"),e},makeUnselectable:function(e){if(a.opera||a.ie&&a.version<9){if(e.unselectable="on",e.hasChildNodes())for(var t=0;t<e.childNodes.length;t++)1==e.childNodes[t].nodeType&&l.makeUnselectable(e.childNodes[t])}else void 0!==e.style.MozUserSelect?e.style.MozUserSelect="none":void 0!==e.style.WebkitUserSelect?e.style.WebkitUserSelect="none":void 0!==e.style.KhtmlUserSelect&&(e.style.KhtmlUserSelect="none")}}}(),oeh=baidu.editor.utils,peh=baidu.editor.ui.uiUtils,qeh=baidu.editor.EventBase,reh=baidu.editor.ui.UIBase=function(){},reh.prototype={className:"",uiName:"",initOptions:function(e){for(var t in e)this[t]=e[t];this.id=this.id||"edui"+peh.uid()},initUIBase:function(){this._globalKey=oeh.unhtml(peh.setGlobal(this.id,this))},render:function(e){for(var t,i=this.renderHtml(),n=peh.createElementByHtml(i),o=domUtils.getElementsByTagName(n,"*"),a="edui-"+(this.theme||this.editor.options.theme),r=document.getElementById("edui_fixedlayer"),s=0;t=o[s++];)domUtils.addClass(t,a);domUtils.addClass(n,a),r&&(r.className="",domUtils.addClass(r,a));var l=this.getDom();null!=l?(l.parentNode.replaceChild(n,l),peh.copyAttributes(n,l)):("string"==typeof e&&(e=document.getElementById(e)),e=e||peh.getFixedLayer(),domUtils.addClass(e,a),e.appendChild(n)),this.postRender()},getDom:function(e){return e?document.getElementById(this.id+"_"+e):document.getElementById(this.id)},postRender:function(){this.fireEvent("postrender")},getHtmlTpl:function(){return""},formatHtml:function(e){var t="edui-"+this.uiName;return e.replace(/##/g,this.id).replace(/%%-/g,this.uiName?t+"-":"").replace(/%%/g,(this.uiName?t:"")+" "+this.className).replace(/\$\$/g,this._globalKey)},renderHtml:function(){return this.formatHtml(this.getHtmlTpl())},dispose:function(){var e=this.getDom();e&&baidu.editor.dom.domUtils.remove(e),peh.unsetGlobal(this.id)}},oeh.inherits(reh,qeh),Ieh=baidu.editor.utils,Jeh=baidu.editor.ui.UIBase,Keh=baidu.editor.ui.Separator=function(e){this.initOptions(e),this.initSeparator()},Keh.prototype={uiName:"separator",initSeparator:function(){this.initUIBase()},getHtmlTpl:function(){return'<div id="##" class="edui-box %%"></div>'}},Ieh.inherits(Keh,Jeh),Meh=baidu.editor.utils,Neh=baidu.editor.dom.domUtils,Oeh=baidu.editor.ui.UIBase,Peh=baidu.editor.ui.uiUtils,Qeh=baidu.editor.ui.Mask=function(e){this.initOptions(e),this.initUIBase()},Qeh.prototype={getHtmlTpl:function(){return'<div id="##" class="edui-mask %%" onclick="return $$._onClick(event, this);" onmousedown="return $$._onMouseDown(event, this);"></div>'},postRender:function(){var e=this;Neh.on(window,"resize",function(){setTimeout(function(){e.isHidden()||e._fill()})})},show:function(e){this._fill(),this.getDom().style.display="",this.getDom().style.zIndex=e},hide:function(){this.getDom().style.display="none",this.getDom().style.zIndex=""},isHidden:function(){return"none"==this.getDom().style.display},_onMouseDown:function(){return!1},_onClick:function(e,t){this.fireEvent("click",e,t)},_fill:function(){var e=this.getDom(),t=Peh.getViewportRect();e.style.width=t.width+"px",e.style.height=t.height+"px"}},Meh.inherits(Qeh,Oeh),function(){function i(e,t){for(var i=0;i<o.length;i++){var n=o[i];if(!n.isHidden()&&!1!==n.queryAutoHide(t)){if(e&&/scroll/gi.test(e.type)&&"edui-wordpastepop"==n.className)return;n.hide()}}o.length&&n.editor.fireEvent("afterhidepop")}var e=baidu.editor.utils,c=baidu.editor.ui.uiUtils,u=baidu.editor.dom.domUtils,r=baidu.editor.ui.UIBase,t=baidu.editor.ui.Popup=function(e){this.initOptions(e),this.initPopup()},o=[];t.postHide=i;var h=["edui-anchor-topleft","edui-anchor-topright","edui-anchor-bottomleft","edui-anchor-bottomright"];t.prototype={SHADOW_RADIUS:5,content:null,_hidden:!1,autoRender:!0,canSideLeft:!0,canSideUp:!0,initPopup:function(){this.initUIBase(),o.push(this)},getHtmlTpl:function(){return'<div id="##" class="edui-popup %%" onmousedown="return false;"> <div id="##_body" class="edui-popup-body"> <iframe style="position:absolute;z-index:-1;left:0;top:0;background-color: transparent;" frameborder="0" width="100%" height="100%" src="about:blank"></iframe> <div class="edui-shadow"></div> <div id="##_content" class="edui-popup-content">'+this.getContentHtmlTpl()+"  </div> </div></div>"},getContentHtmlTpl:function(){return this.content?"string"==typeof this.content?this.content:this.content.renderHtml():""},_UIBase_postRender:r.prototype.postRender,postRender:function(){if(this.content instanceof r&&this.content.postRender(),this.captureWheel&&!this.captured){this.captured=!0;var e=(document.documentElement.clientHeight||document.body.clientHeight)-80,t=this.getDom().offsetHeight,i=c.getClientRect(this.combox.getDom()).top,n=this.getDom("content"),o=this.getDom("body").getElementsByTagName("iframe"),a=this;for(o.length&&(o=o[0]);e<i+t;)t-=30;n.style.height=t+"px",o&&(o.style.height=t+"px"),window.XMLHttpRequest?u.on(n,"onmousewheel"in document.body?"mousewheel":"DOMMouseScroll",function(e){e.preventDefault?e.preventDefault():e.returnValue=!1,e.wheelDelta?n.scrollTop-=e.wheelDelta/120*60:n.scrollTop-=e.detail/-3*60}):u.on(this.getDom(),"mousewheel",function(e){e.returnValue=!1,a.getDom("content").scrollTop-=e.wheelDelta/120*60})}this.fireEvent("postRenderAfter"),this.hide(!0),this._UIBase_postRender()},_doAutoRender:function(){!this.getDom()&&this.autoRender&&this.render()},mesureSize:function(){var e=this.getDom("content");return c.getClientRect(e)},fitSize:function(){if(this.captureWheel&&this.sized)return this.__size;this.sized=!0;var e=this.getDom("body");e.style.width="",e.style.height="";var t=this.mesureSize();if(this.captureWheel){e.style.width=-(-20-t.width)+"px";var i=parseInt(this.getDom("content").style.height,10);!window.isNaN(i)&&(t.height=i)}else e.style.width=t.width+"px";return e.style.height=t.height+"px",this.__size=t,this.captureWheel&&(this.getDom("content").style.overflow="auto"),t},showAnchor:function(e,t){this.showAnchorRect(c.getClientRect(e),t)},showAnchorRect:function(e,t,i){this._doAutoRender();var n=c.getViewportRect();this.getDom().style.visibility="hidden",this._show();var o,a,r,s,l=this.fitSize();s=t?(o=this.canSideLeft&&e.right+l.width>n.right&&e.left>l.width,a=this.canSideUp&&e.top+l.height>n.bottom&&e.bottom>l.height,r=o?e.left-l.width:e.right,a?e.bottom-l.height:e.top):(o=this.canSideLeft&&e.right+l.width>n.right&&e.left>l.width,a=this.canSideUp&&e.top+l.height>n.bottom&&e.bottom>l.height,r=o?e.right-l.width:e.left,a?e.top-l.height:e.bottom);var d=this.getDom();c.setViewportOffset(d,{left:r,top:s}),u.removeClasses(d,h),d.className+=" "+h[2*(a?1:0)+(o?1:0)],this.editor&&(d.style.zIndex=1*this.editor.container.style.zIndex+10,baidu.editor.ui.uiUtils.getFixedLayer().style.zIndex=d.style.zIndex-1),this.getDom().style.visibility="visible"},showAt:function(e){var t=e.left,i=e.top,n={left:t,top:i,right:t,bottom:i,height:0,width:0};this.showAnchorRect(n,!1,!0)},_show:function(){this._hidden&&(this.getDom().style.display="",this._hidden=!1,this.fireEvent("show"))},isHidden:function(){return this._hidden},show:function(){this._doAutoRender(),this._show()},hide:function(e){!this._hidden&&this.getDom()&&(this.getDom().style.display="none",this._hidden=!0,e||this.fireEvent("hide"))},queryAutoHide:function(e){return!e||!c.contains(this.getDom(),e)}},e.inherits(t,r),u.on(document,"mousedown",function(e){i(e,e.target||e.srcElement)}),u.on(window,"scroll",function(e,t){i(e,t)})}(),function(){var e=baidu.editor.utils,t=baidu.editor.ui.UIBase,i=baidu.editor.ui.ColorPicker=function(e){this.initOptions(e),this.noColorText=this.noColorText||this.editor.getLang("clearColor"),this.initUIBase()};i.prototype={getHtmlTpl:function(){return function(e,t){for(var i='<div id="##" class="edui-colorpicker %%"><div class="edui-colorpicker-topbar edui-clearfix"><div unselectable="on" id="##_preview" class="edui-colorpicker-preview"></div><div unselectable="on" class="edui-colorpicker-nocolor" onclick="$$._onPickNoColor(event, this);">'+e+'</div></div><table  class="edui-box" style="border-collapse: collapse;" onmouseover="$$._onTableOver(event, this);" onmouseout="$$._onTableOut(event, this);" onclick="return $$._onTableClick(event, this);" cellspacing="0" cellpadding="0"><tr style="border-bottom: 1px solid #ddd;font-size: 13px;line-height: 25px;color:#39C;padding-top: 2px"><td colspan="10">'+t.getLang("themeColor")+'</td> </tr><tr class="edui-colorpicker-tablefirstrow" >',n=0;n<o.length;n++)n&&n%10==0&&(i+="</tr>"+(60==n?'<tr style="border-bottom: 1px solid #ddd;font-size: 13px;line-height: 25px;color:#39C;"><td colspan="10">'+t.getLang("standardColor")+"</td></tr>":"")+"<tr"+(60==n?' class="edui-colorpicker-tablefirstrow"':"")+">"),i+=n<70?'<td style="padding: 0 2px;"><a hidefocus title="'+o[n]+'" onclick="return false;" href="javascript:" unselectable="on" class="edui-box edui-colorpicker-colorcell" data-color="#'+o[n]+'" style="background-color:#'+o[n]+";border:solid #ccc;"+(n<10||60<=n?"border-width:1px;":10<=n&&n<20?"border-width:1px 1px 0 1px;":"border-width:0 1px 0 1px;")+'"></a></td>':"";return i+"</tr></table></div>"}(this.noColorText,this.editor)},_onTableClick:function(e){var t=(e.target||e.srcElement).getAttribute("data-color");t&&this.fireEvent("pickcolor",t)},_onTableOver:function(e){var t=(e.target||e.srcElement).getAttribute("data-color");t&&(this.getDom("preview").style.backgroundColor=t)},_onTableOut:function(){this.getDom("preview").style.backgroundColor=""},_onPickNoColor:function(){this.fireEvent("picknocolor")}},e.inherits(i,t);var o="ffffff,000000,eeece1,1f497d,4f81bd,c0504d,9bbb59,8064a2,4bacc6,f79646,f2f2f2,7f7f7f,ddd9c3,c6d9f0,dbe5f1,f2dcdb,ebf1dd,e5e0ec,dbeef3,fdeada,d8d8d8,595959,c4bd97,8db3e2,b8cce4,e5b9b7,d7e3bc,ccc1d9,b7dde8,fbd5b5,bfbfbf,3f3f3f,938953,548dd4,95b3d7,d99694,c3d69b,b2a2c7,92cddc,fac08f,a5a5a5,262626,494429,17365d,366092,953734,76923c,5f497a,31859b,e36c09,7f7f7f,0c0c0c,1d1b10,0f243e,244061,632423,4f6128,3f3151,205867,974806,c00000,ff0000,ffc000,ffff00,92d050,00b050,00b0f0,0070c0,002060,7030a0,".split(",")}(),ggh=baidu.editor.utils,hgh=baidu.editor.ui.uiUtils,igh=baidu.editor.ui.UIBase,jgh=baidu.editor.ui.TablePicker=function(e){this.initOptions(e),this.initTablePicker()},jgh.prototype={defaultNumRows:10,defaultNumCols:10,maxNumRows:20,maxNumCols:20,numRows:10,numCols:10,lengthOfCellSide:22,initTablePicker:function(){this.initUIBase()},getHtmlTpl:function(){return'<div id="##" class="edui-tablepicker %%"><div class="edui-tablepicker-body"><div class="edui-infoarea"><span id="##_label" class="edui-label"></span></div><div class="edui-pickarea" onmousemove="$$._onMouseMove(event, this);" onmouseover="$$._onMouseOver(event, this);" onmouseout="$$._onMouseOut(event, this);" onclick="$$._onClick(event, this);"><div id="##_overlay" class="edui-overlay"></div></div></div></div>'},_UIBase_render:igh.prototype.render,render:function(e){this._UIBase_render(e),this.getDom("label").innerHTML="0"+this.editor.getLang("t_row")+" x 0"+this.editor.getLang("t_col")},_track:function(e,t){var i=this.getDom("overlay").style,n=this.lengthOfCellSide;i.width=e*n+"px",i.height=t*n+"px",this.getDom("label").innerHTML=e+this.editor.getLang("t_col")+" x "+t+this.editor.getLang("t_row"),this.numCols=e,this.numRows=t},_onMouseOver:function(e,t){var i=e.relatedTarget||e.fromElement;hgh.contains(t,i)||t===i||(this.getDom("label").innerHTML="0"+this.editor.getLang("t_col")+" x 0"+this.editor.getLang("t_row"),this.getDom("overlay").style.visibility="")},_onMouseOut:function(e,t){var i=e.relatedTarget||e.toElement;hgh.contains(t,i)||t===i||(this.getDom("label").innerHTML="0"+this.editor.getLang("t_col")+" x 0"+this.editor.getLang("t_row"),this.getDom("overlay").style.visibility="hidden")},_onMouseMove:function(e,t){var i=(this.getDom("overlay").style,hgh.getEventOffset(e)),n=this.lengthOfCellSide,o=Math.ceil(i.left/n),a=Math.ceil(i.top/n);this._track(o,a)},_onClick:function(){this.fireEvent("picktable",this.numCols,this.numRows)}},ggh.inherits(jgh,igh),Dgh=baidu.editor.browser,Egh=baidu.editor.dom.domUtils,Fgh=baidu.editor.ui.uiUtils,Ggh='onmousedown="$$.Stateful_onMouseDown(event, this);" onmouseup="$$.Stateful_onMouseUp(event, this);"'+(Dgh.ie?' onmouseenter="$$.Stateful_onMouseEnter(event, this);" onmouseleave="$$.Stateful_onMouseLeave(event, this);"':' onmouseover="$$.Stateful_onMouseOver(event, this);" onmouseout="$$.Stateful_onMouseOut(event, this);"'),baidu.editor.ui.Stateful={alwalysHoverable:!1,target:null,Stateful_init:function(){this._Stateful_dGetHtmlTpl=this.getHtmlTpl,this.getHtmlTpl=this.Stateful_getHtmlTpl},Stateful_getHtmlTpl:function(){return this._Stateful_dGetHtmlTpl().replace(/stateful/g,function(){return Ggh})},Stateful_onMouseEnter:function(e,t){this.target=t,this.isDisabled()&&!this.alwalysHoverable||(this.addState("hover"),this.fireEvent("over"))},Stateful_onMouseLeave:function(e,t){this.isDisabled()&&!this.alwalysHoverable||(this.removeState("hover"),this.removeState("active"),this.fireEvent("out"))},Stateful_onMouseOver:function(e,t){var i=e.relatedTarget;Fgh.contains(t,i)||t===i||this.Stateful_onMouseEnter(e,t)},Stateful_onMouseOut:function(e,t){var i=e.relatedTarget;Fgh.contains(t,i)||t===i||this.Stateful_onMouseLeave(e,t)},Stateful_onMouseDown:function(e,t){this.isDisabled()||this.addState("active")},Stateful_onMouseUp:function(e,t){this.isDisabled()||this.removeState("active")},Stateful_postRender:function(){this.disabled&&!this.hasState("disabled")&&this.addState("disabled")},hasState:function(e){return Egh.hasClass(this.getStateDom(),"edui-state-"+e)},addState:function(e){this.hasState(e)||(this.getStateDom().className+=" edui-state-"+e)},removeState:function(e){this.hasState(e)&&Egh.removeClasses(this.getStateDom(),["edui-state-"+e])},getStateDom:function(){return this.getDom("state")},isChecked:function(){return this.hasState("checked")},setChecked:function(e){!this.isDisabled()&&e?this.addState("checked"):this.removeState("checked")},isDisabled:function(){return this.hasState("disabled")},setDisabled:function(e){e?(this.removeState("hover"),this.removeState("checked"),this.removeState("active"),this.addState("disabled")):this.removeState("disabled")}},_gh=baidu.editor.utils,ahh=baidu.editor.ui.UIBase,bhh=baidu.editor.ui.Stateful,chh=baidu.editor.ui.Button=function(e){if(e.name){var t=e.name,i=e.cssRules;e.className||(e.className="edui-for-"+t),e.cssRules=".edui-"+(e.theme||"default")+" .edui-toolbar .edui-button.edui-for-"+t+" .edui-icon {"+i+"}"}this.initOptions(e),this.initButton()},chh.prototype={uiName:"button",label:"",title:"",showIcon:!0,showText:!0,cssRules:"",initButton:function(){this.initUIBase(),this.Stateful_init(),this.cssRules&&_gh.cssRule("edui-customize-"+this.name+"-style",this.cssRules)},getHtmlTpl:function(){return'<div id="##" class="edui-box %%"><div id="##_state" stateful><div class="%%-wrap"><div id="##_body" unselectable="on" '+(this.title?'title="'+this.title+'"':"")+' class="%%-body" onmousedown="return $$._onMouseDown(event, this);" onclick="return $$._onClick(event, this);">'+(this.showIcon?'<div class="edui-box edui-icon"></div>':"")+(this.showText?'<div class="edui-box edui-label">'+this.label+"</div>":"")+"</div></div></div></div>"},postRender:function(){this.Stateful_postRender(),this.setDisabled(this.disabled)},_onMouseDown:function(e){var t=e.target||e.srcElement,i=t&&t.tagName&&t.tagName.toLowerCase();if("input"==i||"object"==i||"object"==i)return!1},_onClick:function(){this.isDisabled()||this.fireEvent("click")},setTitle:function(e){this.getDom("label").innerHTML=e}},_gh.inherits(chh,ahh),_gh.extend(chh.prototype,bhh),lhh=baidu.editor.utils,mhh=baidu.editor.ui.uiUtils,baidu.editor.dom.domUtils,nhh=baidu.editor.ui.UIBase,ohh=baidu.editor.ui.Stateful,phh=baidu.editor.ui.SplitButton=function(e){this.initOptions(e),this.initSplitButton()},phh.prototype={popup:null,uiName:"splitbutton",title:"",initSplitButton:function(){if(this.initUIBase(),this.Stateful_init(),null!=this.popup){var e=this.popup;this.popup=null,this.setPopup(e)}},_UIBase_postRender:nhh.prototype.postRender,postRender:function(){this.Stateful_postRender(),this._UIBase_postRender()},setPopup:function(e){this.popup!==e&&(null!=this.popup&&this.popup.dispose(),e.addListener("show",lhh.bind(this._onPopupShow,this)),e.addListener("hide",lhh.bind(this._onPopupHide,this)),e.addListener("postrender",lhh.bind(function(){e.getDom("body").appendChild(mhh.createElementByHtml('<div id="'+this.popup.id+'_bordereraser" class="edui-bordereraser edui-background" style="width:'+(mhh.getClientRect(this.getDom()).width+20)+'px"></div>')),e.getDom().className+=" "+this.className},this)),this.popup=e)},_onPopupShow:function(){this.addState("opened")},_onPopupHide:function(){this.removeState("opened")},getHtmlTpl:function(){return'<div id="##" class="edui-box %%"><div '+(this.title?'title="'+this.title+'"':"")+' id="##_state" stateful><div class="%%-body"><div id="##_button_body" class="edui-box edui-button-body" onclick="$$._onButtonClick(event, this);"><div class="edui-box edui-icon"></div></div><div class="edui-box edui-splitborder"></div><div class="edui-box edui-arrow" onclick="$$._onArrowClick();"></div></div></div></div>'},showPopup:function(){var e=mhh.getClientRect(this.getDom());e.top-=this.popup.SHADOW_RADIUS,e.height+=this.popup.SHADOW_RADIUS,this.popup.showAnchorRect(e)},_onArrowClick:function(e,t){this.isDisabled()||this.showPopup()},_onButtonClick:function(){this.isDisabled()||this.fireEvent("buttonclick")}},lhh.inherits(phh,nhh),lhh.extend(phh.prototype,ohh,!0),whh=baidu.editor.utils,xhh=baidu.editor.ui.uiUtils,yhh=baidu.editor.ui.ColorPicker,zhh=baidu.editor.ui.Popup,Ahh=baidu.editor.ui.SplitButton,Bhh=baidu.editor.ui.ColorButton=function(e){this.initOptions(e),this.initColorButton()},Bhh.prototype={initColorButton:function(){var i=this;this.popup=new zhh({content:new yhh({noColorText:i.editor.getLang("clearColor"),editor:i.editor,onpickcolor:function(e,t){i._onPickColor(t)},onpicknocolor:function(e,t){i._onPickNoColor(t)}}),editor:i.editor}),this.initSplitButton()},_SplitButton_postRender:Ahh.prototype.postRender,postRender:function(){this._SplitButton_postRender(),this.getDom("button_body").appendChild(xhh.createElementByHtml('<div id="'+this.id+'_colorlump" class="edui-colorlump"></div>')),this.getDom().className+=" edui-colorbutton"},setColor:function(e){this.getDom("colorlump").style.backgroundColor=e,this.color=e},_onPickColor:function(e){!1!==this.fireEvent("pickcolor",e)&&(this.setColor(e),this.popup.hide())},_onPickNoColor:function(e){!1!==this.fireEvent("picknocolor")&&this.popup.hide()}},whh.inherits(Bhh,Ahh),Lhh=baidu.editor.utils,Mhh=baidu.editor.ui.Popup,Nhh=baidu.editor.ui.TablePicker,Ohh=baidu.editor.ui.SplitButton,Phh=baidu.editor.ui.TableButton=function(e){this.initOptions(e),this.initTableButton()},Phh.prototype={initTableButton:function(){var n=this;this.popup=new Mhh({content:new Nhh({editor:n.editor,onpicktable:function(e,t,i){n._onPickTable(t,i)}}),editor:n.editor}),this.initSplitButton()},_onPickTable:function(e,t){!1!==this.fireEvent("picktable",e,t)&&this.popup.hide()}},Lhh.inherits(Phh,Ohh),Xhh=baidu.editor.utils,Yhh=baidu.editor.ui.UIBase,Zhh=baidu.editor.ui.AutoTypeSetPicker=function(e){this.initOptions(e),this.initAutoTypeSetPicker()},Zhh.prototype={initAutoTypeSetPicker:function(){this.initUIBase()},getHtmlTpl:function(){var e=this.editor,t=e.options.autotypeset,i=e.getLang("autoTypeSet"),n="textAlignValue"+e.uid,o="imageBlockLineValue"+e.uid,a="symbolConverValue"+e.uid;return'<div id="##" class="edui-autotypesetpicker %%"><div class="edui-autotypesetpicker-body"><table ><tr><td nowrap><input type="checkbox" name="mergeEmptyline" '+(t.mergeEmptyline?"checked":"")+">"+i.mergeLine+'</td><td colspan="2"><input type="checkbox" name="removeEmptyline" '+(t.removeEmptyline?"checked":"")+">"+i.delLine+'</td></tr><tr><td nowrap><input type="checkbox" name="removeClass" '+(t.removeClass?"checked":"")+">"+i.removeFormat+'</td><td colspan="2"><input type="checkbox" name="indent" '+(t.indent?"checked":"")+">"+i.indent+'</td></tr><tr><td nowrap><input type="checkbox" name="textAlign" '+(t.textAlign?"checked":"")+">"+i.alignment+'</td><td colspan="2" id="'+n+'"><input type="radio" name="'+n+'" value="left" '+(t.textAlign&&"left"==t.textAlign?"checked":"")+">"+e.getLang("justifyleft")+'<input type="radio" name="'+n+'" value="center" '+(t.textAlign&&"center"==t.textAlign?"checked":"")+">"+e.getLang("justifycenter")+'<input type="radio" name="'+n+'" value="right" '+(t.textAlign&&"right"==t.textAlign?"checked":"")+">"+e.getLang("justifyright")+'</td></tr><tr><td nowrap><input type="checkbox" name="imageBlockLine" '+(t.imageBlockLine?"checked":"")+">"+i.imageFloat+'</td><td nowrap id="'+o+'"><input type="radio" name="'+o+'" value="none" '+(t.imageBlockLine&&"none"==t.imageBlockLine?"checked":"")+">"+e.getLang("default")+'<input type="radio" name="'+o+'" value="left" '+(t.imageBlockLine&&"left"==t.imageBlockLine?"checked":"")+">"+e.getLang("justifyleft")+'<input type="radio" name="'+o+'" value="center" '+(t.imageBlockLine&&"center"==t.imageBlockLine?"checked":"")+">"+e.getLang("justifycenter")+'<input type="radio" name="'+o+'" value="right" '+(t.imageBlockLine&&"right"==t.imageBlockLine?"checked":"")+">"+e.getLang("justifyright")+'</td></tr><tr><td nowrap><input type="checkbox" name="clearFontSize" '+(t.clearFontSize?"checked":"")+">"+i.removeFontsize+'</td><td colspan="2"><input type="checkbox" name="clearFontFamily" '+(t.clearFontFamily?"checked":"")+">"+i.removeFontFamily+'</td></tr><tr><td nowrap colspan="3"><input type="checkbox" name="removeEmptyNode" '+(t.removeEmptyNode?"checked":"")+">"+i.removeHtml+'</td></tr><tr><td nowrap colspan="3"><input type="checkbox" name="pasteFilter" '+(t.pasteFilter?"checked":"")+">"+i.pasteFilter+'</td></tr><tr><td nowrap><input type="checkbox" name="symbolConver" '+(t.bdc2sb||t.tobdc?"checked":"")+">"+i.symbol+'</td><td id="'+a+'"><input type="radio" name="bdc" value="bdc2sb" '+(t.bdc2sb?"checked":"")+">"+i.bdc2sb+'<input type="radio" name="bdc" value="tobdc" '+(t.tobdc?"checked":"")+">"+i.tobdc+'</td><td nowrap align="right"><button >'+i.run+"</button></td></tr></table></div></div>"},_UIBase_render:Yhh.prototype.render},Xhh.inherits(Zhh,Yhh),function(){function c(e){for(var t,i={},n=e.getDom(),o=e.editor.uid,a=null,r=domUtils.getElementsByTagName(n,"input"),s=r.length-1;t=r[s--];)if("checkbox"==t.getAttribute("type"))if(i[a=t.getAttribute("name")]&&delete i[a],t.checked){var l=document.getElementById(a+"Value"+o);if(l){if(/input/gi.test(l.tagName))i[a]=l.value;else for(var d,c=l.getElementsByTagName("input"),u=c.length-1;d=c[u--];)if(d.checked){i[a]=d.value;break}}else i[a]=!0}else i[a]=!1;else i[t.getAttribute("value")]=t.checked;var h,f=domUtils.getElementsByTagName(n,"select");for(s=0;h=f[s++];){var p=h.getAttribute("name");i[p]=i[p]?h.value:""}m.extend(e.editor.options.autotypeset,i),e.editor.setPreferences("autotypeset",i)}var m=baidu.editor.utils,e=baidu.editor.ui.Popup,i=baidu.editor.ui.AutoTypeSetPicker,t=baidu.editor.ui.SplitButton,n=baidu.editor.ui.AutoTypeSetButton=function(e){this.initOptions(e),this.initAutoTypeSetButton()};n.prototype={initAutoTypeSetButton:function(){var d=this;this.popup=new e({content:new i({editor:d.editor}),editor:d.editor,hide:function(){!this._hidden&&this.getDom()&&(c(this),this.getDom().style.display="none",this._hidden=!0,this.fireEvent("hide"))}});var t=0;this.popup.addListener("postRenderAfter",function(){var l=this;if(!t){var e=this.getDom();e.getElementsByTagName("button")[0].onclick=function(){c(l),d.editor.execCommand("autotypeset"),l.hide()},domUtils.on(e,"click",function(e){var t=e.target||e.srcElement,i=d.editor.uid;if(t&&"INPUT"==t.tagName){if("imageBlockLine"==t.name||"textAlign"==t.name||"symbolConver"==t.name)for(var n=t.checked,o=document.getElementById(t.name+"Value"+i).getElementsByTagName("input"),a={imageBlockLine:"none",textAlign:"left",symbolConver:"tobdc"},r=0;r<o.length;r++)n?o[r].value==a[t.name]&&(o[r].checked="checked"):o[r].checked=!1;if(t.name=="imageBlockLineValue"+i||t.name=="textAlignValue"+i||"bdc"==t.name){var s=t.parentNode.previousSibling.getElementsByTagName("input");s&&(s[0].checked=!0)}c(l)}}),t=1}}),this.initSplitButton()}},m.inherits(n,t)}(),Qih=baidu.editor.utils,Rih=baidu.editor.ui.Popup,Sih=baidu.editor.ui.Stateful,Tih=baidu.editor.ui.UIBase,Uih=baidu.editor.ui.CellAlignPicker=function(e){this.initOptions(e),this.initSelected(),this.initCellAlignPicker()},Uih.prototype={initSelected:function(){var e={top:0,middle:1,bottom:2},t={left:0,center:1,right:2},i=3;this.selected&&(this.selectedIndex=e[this.selected.valign]*i+t[this.selected.align])},initCellAlignPicker:function(){this.initUIBase(),this.Stateful_init()},getHtmlTpl:function(){for(var e=["left","center","right"],t=null,i=-1,n=[],o=0;o<9;o++)t=this.selectedIndex===o?' class="edui-cellalign-selected" ':"",0==(i=o%3)&&n.push("<tr>"),n.push('<td index="'+o+'" '+t+' stateful><div class="edui-icon edui-'+e[i]+'"></div></td>'),2===i&&n.push("</tr>");return'<div id="##" class="edui-cellalignpicker %%"><div class="edui-cellalignpicker-body"><table onclick="$$._onClick(event);">'+n.join("")+"</table></div></div>"},getStateDom:function(){return this.target},_onClick:function(e){var t=e.target||e.srcElement;/icon/.test(t.className)&&(this.items[t.parentNode.getAttribute("index")].onclick(),Rih.postHide(e))},_UIBase_render:Tih.prototype.render},Qih.inherits(Uih,Tih),Qih.extend(Uih.prototype,Sih,!0),djh=baidu.editor.utils,ejh=baidu.editor.ui.Stateful,fjh=baidu.editor.ui.uiUtils,gjh=baidu.editor.ui.UIBase,hjh=baidu.editor.ui.PastePicker=function(e){this.initOptions(e),this.initPastePicker()},hjh.prototype={initPastePicker:function(){this.initUIBase(),this.Stateful_init()},getHtmlTpl:function(){return'<div class="edui-pasteicon" onclick="$$._onClick(this)"></div><div class="edui-pastecontainer"><div class="edui-title">'+this.editor.getLang("pasteOpt")+'</div><div class="edui-button"><div title="'+this.editor.getLang("pasteSourceFormat")+'" onclick="$$.format(false)" stateful><div class="edui-richtxticon"></div></div><div title="'+this.editor.getLang("tagFormat")+'" onclick="$$.format(2)" stateful><div class="edui-tagicon"></div></div><div title="'+this.editor.getLang("pasteTextFormat")+'" onclick="$$.format(true)" stateful><div class="edui-plaintxticon"></div></div></div></div></div>'},getStateDom:function(){return this.target},format:function(e){this.editor.ui._isTransfer=!0,this.editor.fireEvent("pasteTransfer",e)},_onClick:function(e){var t=domUtils.getNextDomNode(e),i=fjh.getViewportRect().height,n=fjh.getClientRect(t);n.top+n.height>i?t.style.top=-n.height-e.offsetHeight+"px":t.style.top="",/hidden/gi.test(domUtils.getComputedStyle(t,"visibility"))?(t.style.visibility="visible",domUtils.addClass(e,"edui-state-opened")):(t.style.visibility="hidden",domUtils.removeClasses(e,"edui-state-opened"))},_UIBase_render:gjh.prototype.render},djh.inherits(hjh,gjh),djh.extend(hjh.prototype,ejh,!0),ojh=baidu.editor.utils,pjh=baidu.editor.ui.uiUtils,qjh=baidu.editor.ui.UIBase,rjh=baidu.editor.ui.Toolbar=function(e){this.initOptions(e),this.initToolbar()},rjh.prototype={items:null,initToolbar:function(){this.items=this.items||[],this.initUIBase()},add:function(e,t){void 0===t?this.items.push(e):this.items.splice(t,0,e)},getHtmlTpl:function(){for(var e=[],t=0;t<this.items.length;t++)e[t]=this.items[t].renderHtml();return'<div id="##" class="edui-toolbar %%" onselectstart="return false;" onmousedown="return $$._onMouseDown(event, this);">'+e.join("")+"</div>"},postRender:function(){for(var e=this.getDom(),t=0;t<this.items.length;t++)this.items[t].postRender();pjh.makeUnselectable(e)},_onMouseDown:function(e){var t=e.target||e.srcElement,i=t&&t.tagName&&t.tagName.toLowerCase();if("input"==i||"object"==i||"object"==i)return!1}},ojh.inherits(rjh,qjh),function(){var e=baidu.editor.utils,i=baidu.editor.dom.domUtils,o=baidu.editor.ui.uiUtils,t=baidu.editor.ui.UIBase,n=baidu.editor.ui.Popup,a=baidu.editor.ui.Stateful,r=baidu.editor.ui.CellAlignPicker,s=baidu.editor.ui.Menu=function(e){this.initOptions(e),this.initMenu()},l={renderHtml:function(){return'<div class="edui-menuitem edui-menuseparator"><div class="edui-menuseparator-inner"></div></div>'},postRender:function(){},queryAutoHide:function(){return!0}};s.prototype={items:null,uiName:"menu",initMenu:function(){this.items=this.items||[],this.initPopup(),this.initItems()},initItems:function(){for(var e=0;e<this.items.length;e++){var t=this.items[e];"-"==t?this.items[e]=this.getSeparator():t instanceof d||(t.editor=this.editor,t.theme=this.editor.options.theme,this.items[e]=this.createItem(t))}},getSeparator:function(){return l},createItem:function(e){return e.menu=this,new d(e)},_Popup_getContentHtmlTpl:n.prototype.getContentHtmlTpl,getContentHtmlTpl:function(){if(0==this.items.length)return this._Popup_getContentHtmlTpl();for(var e=[],t=0;t<this.items.length;t++){var i=this.items[t];e[t]=i.renderHtml()}return'<div class="%%-body">'+e.join("")+"</div>"},_Popup_postRender:n.prototype.postRender,postRender:function(){for(var n=this,e=0;e<this.items.length;e++){var t=this.items[e];t.ownerMenu=this,t.postRender()}i.on(this.getDom(),"mouseover",function(e){var t=(e=e||event).relatedTarget||e.fromElement,i=n.getDom();o.contains(i,t)||i===t||n.fireEvent("over")}),this._Popup_postRender()},queryAutoHide:function(e){if(e){if(o.contains(this.getDom(),e))return!1;for(var t=0;t<this.items.length;t++){if(!1===this.items[t].queryAutoHide(e))return!1}}},clearItems:function(){for(var e=0;e<this.items.length;e++){var t=this.items[e];clearTimeout(t._showingTimer),clearTimeout(t._closingTimer),t.subMenu&&t.subMenu.destroy()}this.items=[]},destroy:function(){this.getDom()&&i.remove(this.getDom()),this.clearItems()},dispose:function(){this.destroy()}},e.inherits(s,n);var d=baidu.editor.ui.MenuItem=function(e){if(this.initOptions(e),this.initUIBase(),this.Stateful_init(),this.subMenu&&!(this.subMenu instanceof s))if(e.className&&-1!=e.className.indexOf("aligntd")){var t=this;this.subMenu.selected=this.editor.queryCommandValue("cellalignment"),this.subMenu=new n({content:new r(this.subMenu),parentMenu:t,editor:t.editor,destroy:function(){this.getDom()&&i.remove(this.getDom())}}),this.subMenu.addListener("postRenderAfter",function(){i.on(this.getDom(),"mouseover",function(){t.addState("opened")})})}else this.subMenu=new s(this.subMenu)};d.prototype={label:"",subMenu:null,ownerMenu:null,uiName:"menuitem",alwalysHoverable:!0,getHtmlTpl:function(){return'<div id="##" class="%%" stateful onclick="$$._onClick(event, this);"><div class="%%-body">'+this.renderLabelHtml()+"</div></div>"},postRender:function(){var i=this;this.addListener("over",function(){i.ownerMenu.fireEvent("submenuover",i),i.subMenu&&i.delayShowSubMenu()}),this.subMenu&&(this.getDom().className+=" edui-hassubmenu",this.subMenu.render(),this.addListener("out",function(){i.delayHideSubMenu()}),this.subMenu.addListener("over",function(){clearTimeout(i._closingTimer),i._closingTimer=null,i.addState("opened")}),this.ownerMenu.addListener("hide",function(){i.hideSubMenu()}),this.ownerMenu.addListener("submenuover",function(e,t){t!==i&&i.delayHideSubMenu()}),this.subMenu._bakQueryAutoHide=this.subMenu.queryAutoHide,this.subMenu.queryAutoHide=function(e){return(!e||!o.contains(i.getDom(),e))&&this._bakQueryAutoHide(e)}),this.getDom().style.tabIndex="-1",o.makeUnselectable(this.getDom()),this.Stateful_postRender()},delayShowSubMenu:function(){var e=this;e.isDisabled()||(e.addState("opened"),clearTimeout(e._showingTimer),clearTimeout(e._closingTimer),e._closingTimer=null,e._showingTimer=setTimeout(function(){e.showSubMenu()},250))},delayHideSubMenu:function(){var e=this;e.isDisabled()||(e.removeState("opened"),clearTimeout(e._showingTimer),e._closingTimer||(e._closingTimer=setTimeout(function(){e.hasState("opened")||e.hideSubMenu(),e._closingTimer=null},400)))},renderLabelHtml:function(){return'<div class="edui-arrow"></div><div class="edui-box edui-icon"></div><div class="edui-box edui-label %%-label">'+(this.label||"")+"</div>"},getStateDom:function(){return this.getDom()},queryAutoHide:function(e){if(this.subMenu&&this.hasState("opened"))return this.subMenu.queryAutoHide(e)},_onClick:function(e,t){this.hasState("disabled")||!1!==this.fireEvent("click",e,t)&&(this.subMenu?this.showSubMenu():n.postHide(e))},showSubMenu:function(){var e=o.getClientRect(this.getDom());e.right-=5,e.left+=2,e.width-=7,e.top-=4,e.bottom+=4,e.height+=8,this.subMenu.showAnchorRect(e,!0,!0)},hideSubMenu:function(){this.subMenu.hide()}},e.inherits(d,t),e.extend(d.prototype,a,!0)}(),okh=baidu.editor.utils,pkh=baidu.editor.ui.uiUtils,qkh=baidu.editor.ui.Menu,rkh=baidu.editor.ui.SplitButton,skh=baidu.editor.ui.Combox=function(e){this.initOptions(e),this.initCombox()},skh.prototype={uiName:"combox",onbuttonclick:function(){this.showPopup()},initCombox:function(){var e=this;this.items=this.items||[];for(var t=0;t<this.items.length;t++){var i=this.items[t];i.uiName="listitem",i.index=t,i.onclick=function(){e.selectByIndex(this.index)}}this.popup=new qkh({items:this.items,uiName:"list",editor:this.editor,captureWheel:!0,combox:this}),this.initSplitButton()},_SplitButton_postRender:rkh.prototype.postRender,postRender:function(){this._SplitButton_postRender(),this.setLabel(this.label||""),this.setValue(this.initValue||"")},showPopup:function(){var e=pkh.getClientRect(this.getDom());e.top+=1,e.bottom-=1,e.height-=2,this.popup.showAnchorRect(e)},getValue:function(){return this.value},setValue:function(e){var t=this.indexByValue(e);this.value=-1!=t?(this.selectedIndex=t,this.setLabel(this.items[t].label),this.items[t].value):(this.selectedIndex=-1,this.setLabel(this.getLabelForUnknowValue(e)),e)},setLabel:function(e){this.getDom("button_body").innerHTML=e,this.label=e},getLabelForUnknowValue:function(e){return e},indexByValue:function(e){for(var t=0;t<this.items.length;t++)if(e==this.items[t].value)return t;return-1},getItem:function(e){return this.items[e]},selectByIndex:function(e){e<this.items.length&&!1!==this.fireEvent("select",e)&&(this.selectedIndex=e,this.value=this.items[e].value,this.setLabel(this.items[e].label))}},okh.inherits(skh,rkh),Jkh=baidu.editor.utils,Kkh=baidu.editor.dom.domUtils,Lkh=baidu.editor.ui.uiUtils,Mkh=baidu.editor.ui.Mask,Nkh=baidu.editor.ui.UIBase,Okh=baidu.editor.ui.Button,Pkh=baidu.editor.ui.Dialog=function(e){if(e.name){var t=e.name,i=e.cssRules;e.className||(e.className="edui-for-"+t),i&&(e.cssRules=".edui-for-"+t+" .edui-dialog-content  {"+i+"}")}this.initOptions(Jkh.extend({autoReset:!0,draggable:!0,onok:function(){},oncancel:function(){},onclose:function(e,t){return t?this.onok():this.oncancel()},holdScroll:!1},e)),this.initDialog()},Pkh.prototype={draggable:!1,uiName:"dialog",initDialog:function(){var e=this,t=this.editor.options.theme;if(this.cssRules&&(this.cssRules=".edui-"+t+" "+this.cssRules,Jkh.cssRule("edui-customize-"+this.name+"-style",this.cssRules)),this.initUIBase(),this.modalMask=Gkh||(Gkh=new Mkh({className:"edui-dialog-modalmask",theme:t,onclick:function(){Ikh&&Ikh.close(!1)}})),this.dragMask=Hkh||(Hkh=new Mkh({className:"edui-dialog-dragmask",theme:t})),this.closeButton=new Okh({className:"edui-dialog-closebutton",title:e.closeDialog,theme:t,onclick:function(){e.close(!1)}}),this.fullscreen&&this.initResizeEvent(),this.buttons)for(var i=0;i<this.buttons.length;i++)this.buttons[i]instanceof Okh||(this.buttons[i]=new Okh(Jkh.extend(this.buttons[i],{editor:this.editor},!0)))},initResizeEvent:function(){var a=this;Kkh.on(window,"resize",function(){a._hidden||void 0===a._hidden||(a.__resizeTimer&&window.clearTimeout(a.__resizeTimer),a.__resizeTimer=window.setTimeout(function(){a.__resizeTimer=null;var e=a.getDom(),t=a.getDom("content"),i=UE.ui.uiUtils.getClientRect(e),n=UE.ui.uiUtils.getClientRect(t),o=Lkh.getViewportRect();t.style.width=o.width-i.width+n.width+"px",t.style.height=o.height-i.height+n.height+"px",e.style.width=o.width+"px",e.style.height=o.height+"px",a.fireEvent("resize")},100))})},fitSize:function(){var e=this.getDom("body"),t=this.mesureSize();return e.style.width=t.width+"px",e.style.height=t.height+"px",t},safeSetOffset:function(e){var t=this.getDom(),i=Lkh.getViewportRect(),n=Lkh.getClientRect(t),o=e.left;o+n.width>i.right&&(o=i.right-n.width);var a=e.top;a+n.height>i.bottom&&(a=i.bottom-n.height),t.style.left=Math.max(o,0)+"px",t.style.top=Math.max(a,0)+"px"},showAtCenter:function(){var e=Lkh.getViewportRect();if(this.fullscreen){var t=this.getDom(),i=this.getDom("content");t.style.display="block";var n=UE.ui.uiUtils.getClientRect(t),o=UE.ui.uiUtils.getClientRect(i);t.style.left="-100000px",i.style.width=e.width-n.width+o.width+"px",i.style.height=e.height-n.height+o.height+"px",t.style.width=e.width+"px",t.style.height=e.height+"px",t.style.left=0,this._originalContext={html:{overflowX:document.documentElement.style.overflowX,overflowY:document.documentElement.style.overflowY},body:{overflowX:document.body.style.overflowX,overflowY:document.body.style.overflowY}},document.documentElement.style.overflowX="hidden",document.documentElement.style.overflowY="hidden",document.body.style.overflowX="hidden",document.body.style.overflowY="hidden"}else{this.getDom().style.display="";var a=this.fitSize(),r=0|this.getDom("titlebar").offsetHeight,s=e.width/2-a.width/2,l=e.height/2-(a.height-r)/2-r,d=this.getDom();this.safeSetOffset({left:Math.max(0|s,0),top:Math.max(0|l,0)}),Kkh.hasClass(d,"edui-state-centered")||(d.className+=" edui-state-centered")}this._show()},getContentHtml:function(){var e="";return"string"==typeof this.content?e=this.content:this.iframeUrl&&(e='<span id="'+this.id+'_contmask" class="dialogcontmask"></span><iframe id="'+this.id+'_iframe" class="%%-iframe" height="100%" width="100%" frameborder="0" src="'+this.iframeUrl+'"></iframe>'),e},getHtmlTpl:function(){var e="";if(this.buttons){for(var t=[],i=0;i<this.buttons.length;i++)t[i]=this.buttons[i].renderHtml();e='<div class="%%-foot"><div id="##_buttons" class="%%-buttons">'+t.join("")+"</div></div>"}return'<div id="##" class="%%"><div '+(this.fullscreen?'class="%%-wrap edui-dialog-fullscreen-flag"':'class="%%"')+'><div id="##_body" class="%%-body"><div class="%%-shadow"></div><div id="##_titlebar" class="%%-titlebar"><div class="%%-draghandle" onmousedown="$$._onTitlebarMouseDown(event, this);"><span class="%%-caption">'+(this.title||"")+"</span></div>"+this.closeButton.renderHtml()+'</div><div id="##_content" class="%%-content">'+(this.autoReset?"":this.getContentHtml())+"</div>"+e+"</div></div></div>"},postRender:function(){this.modalMask.getDom()||(this.modalMask.render(),this.modalMask.hide()),this.dragMask.getDom()||(this.dragMask.render(),this.dragMask.hide());var e=this;if(this.addListener("show",function(){e.modalMask.show(this.getDom().style.zIndex-2)}),this.addListener("hide",function(){e.modalMask.hide()}),this.buttons)for(var t=0;t<this.buttons.length;t++)this.buttons[t].postRender();Kkh.on(window,"resize",function(){setTimeout(function(){e.isHidden()||e.safeSetOffset(Lkh.getClientRect(e.getDom()))})}),this._hide()},mesureSize:function(){var e=this.getDom("body"),t=Lkh.getClientRect(this.getDom("content")).width;return e.style.width=t,Lkh.getClientRect(e)},_onTitlebarMouseDown:function(e,t){if(this.draggable){var o,a=(Lkh.getViewportRect(),this);Lkh.startDrag(e,{ondragstart:function(){o=Lkh.getClientRect(a.getDom()),a.getDom("contmask").style.visibility="visible",a.dragMask.show(a.getDom().style.zIndex-1)},ondragmove:function(e,t){var i=o.left+e,n=o.top+t;a.safeSetOffset({left:i,top:n})},ondragstop:function(){a.getDom("contmask").style.visibility="hidden",Kkh.removeClasses(a.getDom(),["edui-state-centered"]),a.dragMask.hide()}})}},reset:function(){this.getDom("content").innerHTML=this.getContentHtml(),this.fireEvent("dialogafterreset")},_show:function(){this._hidden&&(this.getDom().style.display="",this.editor.container.style.zIndex&&(this.getDom().style.zIndex=1*this.editor.container.style.zIndex+10),this._hidden=!1,this.fireEvent("show"),baidu.editor.ui.uiUtils.getFixedLayer().style.zIndex=this.getDom().style.zIndex-4)},isHidden:function(){return this._hidden},_hide:function(){if(!this._hidden){var e=this.getDom();e.style.display="none",e.style.zIndex="",e.style.width="",e.style.height="",this._hidden=!0,this.fireEvent("hide")}},open:function(){if(this.autoReset)try{this.reset()}catch(e){this.render(),this.open()}if(this.showAtCenter(),this.iframeUrl)try{this.getDom("iframe").focus()}catch(e){}Ikh=this},_onCloseButtonClick:function(e,t){this.close(!1)},close:function(e){if(!1!==this.fireEvent("close",e)){this.fullscreen&&(document.documentElement.style.overflowX=this._originalContext.html.overflowX,document.documentElement.style.overflowY=this._originalContext.html.overflowY,document.body.style.overflowX=this._originalContext.body.overflowX,document.body.style.overflowY=this._originalContext.body.overflowY,delete this._originalContext),this._hide();var t=this.getDom("content"),i=this.getDom("iframe");if(t&&i){var n=i.contentDocument||i.contentWindow.document;n&&(n.body.innerHTML=""),Kkh.remove(t)}}}},Jkh.inherits(Pkh,Nkh),Vlh=baidu.editor.utils,Wlh=baidu.editor.ui.Menu,Xlh=baidu.editor.ui.SplitButton,Ylh=baidu.editor.ui.MenuButton=function(e){this.initOptions(e),this.initMenuButton()},Ylh.prototype={initMenuButton:function(){var t=this;this.uiName="menubutton",this.popup=new Wlh({items:t.items,className:t.className,editor:t.editor}),this.popup.addListener("show",function(){for(var e=0;e<this.items.length;e++)this.items[e].removeState("checked"),this.items[e].value==t._value&&(this.items[e].addState("checked"),this.value=t._value)}),this.initSplitButton()},setValue:function(e){this._value=e}},Vlh.inherits(Ylh,Xlh),cmh=baidu.editor.utils,dmh=baidu.editor.ui.Popup,emh=baidu.editor.ui.SplitButton,fmh=baidu.editor.ui.MultiMenuPop=function(e){this.initOptions(e),this.initMultiMenu()},fmh.prototype={initMultiMenu:function(){var e=this;this.popup=new dmh({content:"",editor:e.editor,iframe_rendered:!1,onshow:function(){this.iframe_rendered||(this.iframe_rendered=!0,this.getDom("content").innerHTML='<iframe id="'+e.id+'_iframe" src="'+e.iframeUrl+'" frameborder="0"></iframe>',e.editor.container.style.zIndex&&(this.getDom().style.zIndex=1*e.editor.container.style.zIndex+1))}}),this.onbuttonclick=function(){this.showPopup()},this.initSplitButton()}},cmh.inherits(fmh,emh),function(){function t(e){var t=e.target||e.srcElement;if(!u.findParent(t,function(e){return u.hasClass(e,"edui-shortcutmenu")||u.hasClass(e,"edui-popup")},!0))for(var i,n=0;i=a[n++];)i.hide()}var c,n=baidu.editor.ui,e=n.UIBase,d=n.uiUtils,o=baidu.editor.utils,u=baidu.editor.dom.domUtils,a=[],r=!1,i=n.ShortCutMenu=function(e){this.initOptions(e),this.initShortCutMenu()};i.postHide=t,i.prototype={isHidden:!0,SPACE:5,initShortCutMenu:function(){this.items=this.items||[],this.initUIBase(),this.initItems(),this.initEvent(),a.push(this)},initEvent:function(){var d=this,e=d.editor.document;u.on(e,"mousemove",function(e){if(!1===d.isHidden){if(d.getSubMenuMark()||"contextmenu"==d.eventType)return;var t=!0,i=d.getDom(),n=i.offsetWidth,o=i.offsetHeight,a=n/2+d.SPACE,r=o/2,s=Math.abs(e.screenX-d.left),l=Math.abs(e.screenY-d.top);clearTimeout(c),c=setTimeout(function(){0<l&&l<r?d.setOpacity(i,"1"):r<l&&l<r+70?(d.setOpacity(i,"0.5"),t=!1):r+70<l&&l<r+140&&d.hide(),t&&0<s&&s<a?d.setOpacity(i,"1"):a<s&&s<a+70?d.setOpacity(i,"0.5"):a+70<s&&s<a+140&&d.hide()})}}),browser.chrome&&u.on(e,"mouseout",function(e){var t=e.relatedTarget||e.toElement;null!=t&&"HTML"!=t.tagName||d.hide()}),d.editor.addListener("afterhidepop",function(){d.isHidden||(r=!0)})},initItems:function(){if(o.isArray(this.items))for(var e=0,t=this.items.length;e<t;e++){var i=this.items[e].toLowerCase();n[i]&&(this.items[e]=new n[i](this.editor),this.items[e].className+=" edui-shortcutsubmenu ")}},setOpacity:function(e,t){browser.ie&&browser.version<9?e.style.filter="alpha(opacity = "+100*parseFloat(t)+");":e.style.opacity=t},getSubMenuMark:function(){r=!1;for(var e,t=d.getFixedLayer(),i=u.getElementsByTagName(t,"div",function(e){return u.hasClass(e,"edui-shortcutsubmenu edui-popup")}),n=0;e=i[n++];)"none"!=e.style.display&&(r=!0);return r},show:function(e,t){function i(e){e.left<0&&(e.left=0),e.top<0&&(e.top=0),r.style.cssText="position:absolute;left:"+e.left+"px;top:"+e.top+"px;"}function n(e){e.tagName||(e=e.getDom()),a.left=parseInt(e.style.left),a.top=parseInt(e.style.top),a.top-=r.offsetHeight+15,i(a)}var o=this,a={},r=this.getDom(),s=d.getFixedLayer();if(o.eventType=e.type,r.style.cssText="display:block;left:-9999px","contextmenu"==e.type&&t){var l=u.getElementsByTagName(s,"div","edui-contextmenu")[0];l?n(l):o.editor.addListener("aftershowcontextmenu",function(e,t){n(t)})}else(a=d.getViewportOffsetByEvent(e)).top-=r.offsetHeight+o.SPACE,a.left+=o.SPACE+20,i(a),o.setOpacity(r,.2);o.isHidden=!1,o.left=e.screenX+r.offsetWidth/2-o.SPACE,o.top=e.screenY-r.offsetHeight/2-o.SPACE,o.editor&&(r.style.zIndex=1*o.editor.container.style.zIndex+10,s.style.zIndex=r.style.zIndex-1)},hide:function(){this.getDom()&&(this.getDom().style.display="none"),this.isHidden=!0},postRender:function(){if(o.isArray(this.items))for(var e,t=0;e=this.items[t++];)e.postRender()},getHtmlTpl:function(){var e;if(o.isArray(this.items)){e=[];for(var t=0;t<this.items.length;t++)e[t]=this.items[t].renderHtml();e=e.join("")}else e=this.items;return'<div id="##" class="%% edui-toolbar" data-src="shortcutmenu" onmousedown="return false;" onselectstart="return false;" >'+e+"</div>"}},o.inherits(i,e),u.on(document,"mousedown",function(e){t(e)}),u.on(window,"scroll",function(e){t(e)})}(),nnh=baidu.editor.utils,onh=baidu.editor.ui.UIBase,pnh=baidu.editor.ui.Breakline=function(e){this.initOptions(e),this.initSeparator()},pnh.prototype={uiName:"Breakline",initSeparator:function(){this.initUIBase()},getHtmlTpl:function(){return"<br/>"}},nnh.inherits(pnh,onh),rnh=baidu.editor.utils,snh=baidu.editor.dom.domUtils,tnh=baidu.editor.ui.UIBase,unh=baidu.editor.ui.Message=function(e){this.initOptions(e),this.initMessage()},unh.prototype={initMessage:function(){this.initUIBase()},getHtmlTpl:function(){return'<div id="##" class="edui-message %%"> <div id="##_closer" class="edui-message-closer">×</div> <div id="##_body" class="edui-message-body edui-message-type-info"> <iframe style="position:absolute;z-index:-1;left:0;top:0;background-color: transparent;" frameborder="0" width="100%" height="100%" src="about:blank"></iframe> <div class="edui-shadow"></div> <div id="##_content" class="edui-message-content">  </div> </div></div>'},reset:function(e){var t=this;e.keepshow||(clearTimeout(this.timer),t.timer=setTimeout(function(){t.hide()},e.timeout||4e3)),void 0!==e.content&&t.setContent(e.content),void 0!==e.type&&t.setType(e.type),t.show()},postRender:function(){var e=this,t=this.getDom("closer");t&&snh.on(t,"click",function(){e.hide()})},setContent:function(e){this.getDom("content").innerHTML=e},setType:function(e){e=e||"info";var t=this.getDom("body");t.className=t.className.replace(/edui-message-type-[\w-]+/,"edui-message-type-"+e)},getContent:function(){return this.getDom("content").innerHTML},getType:function(){var e=this.getDom("body").match(/edui-message-type-([\w-]+)/);return e?e[1]:""},show:function(){this.getDom().style.display="block"},hide:function(){var e=this.getDom();e&&(e.style.display="none",e.parentNode&&e.parentNode.removeChild(e))}},rnh.inherits(unh,tnh),function(){var c=baidu.editor.utils,u=baidu.editor.ui,t=u.Dialog;u.buttons={},u.Dialog=function(e){var n=new t(e);return n.addListener("hide",function(){if(n.editor){var e=n.editor;try{if(browser.gecko){var t=e.window.scrollY,i=e.window.scrollX;e.body.focus(),e.window.scrollTo(i,t)}else e.focus()}catch(e){}}}),n};for(var s={anchor:"~/dialogs/anchor/anchor.html",insertimage:"~/dialogs/image/image.html",link:"~/dialogs/link/link.html",spechars:"~/dialogs/spechars/spechars.html",searchreplace:"~/dialogs/searchreplace/searchreplace.html",map:"~/dialogs/map/map.html",gmap:"~/dialogs/gmap/gmap.html",insertvideo:"~/dialogs/video/video.html",help:"~/dialogs/help/help.html",preview:"~/dialogs/preview/preview.html",emotion:"~/dialogs/emotion/emotion.html",wordimage:"~/dialogs/wordimage/wordimage.html",attachment:"~/dialogs/attachment/attachment.html",insertframe:"~/dialogs/insertframe/insertframe.html",edittip:"~/dialogs/table/edittip.html",edittable:"~/dialogs/table/edittable.html",edittd:"~/dialogs/table/edittd.html",webapp:"~/dialogs/webapp/webapp.html",snapscreen:"~/dialogs/snapscreen/snapscreen.html",scrawl:"~/dialogs/scrawl/scrawl.html",music:"~/dialogs/music/music.html",template:"~/dialogs/template/template.html",background:"~/dialogs/background/background.html",charts:"~/dialogs/charts/charts.html"},e=["undo","redo","formatmatch","bold","italic","underline","fontborder","touppercase","tolowercase","strikethrough","subscript","superscript","source","indent","outdent","blockquote","pasteplain","pagebreak","selectall","print","horizontal","removeformat","time","date","unlink","insertparagraphbeforetable","insertrow","insertcol","mergeright","mergedown","deleterow","deletecol","splittorows","splittocols","splittocells","mergecells","deletetable","drafts"],i=0;a=e[i++];)a=a.toLowerCase(),u[a]=function(r){return function(o){var a=new u.Button({className:"edui-for-"+r,title:o.options.labelMap[r]||o.getLang("labelMap."+r)||"",onclick:function(){o.execCommand(r)},theme:o.options.theme,showText:!1});return u.buttons[r]=a,o.addListener("selectionchange",function(e,t,i){var n=o.queryCommandState(r);-1==n?(a.setDisabled(!0),a.setChecked(!1)):i||(a.setDisabled(!1),a.setChecked(n))}),a}}(a);u.cleardoc=function(e){var t=new u.Button({className:"edui-for-cleardoc",title:e.options.labelMap.cleardoc||e.getLang("labelMap.cleardoc")||"",theme:e.options.theme,onclick:function(){confirm(e.getLang("confirmClear"))&&e.execCommand("cleardoc")}});return u.buttons.cleardoc=t,e.addListener("selectionchange",function(){t.setDisabled(-1==e.queryCommandState("cleardoc"))}),t};var n={justify:["left","right","center","justify"],imagefloat:["none","left","center","right"],directionality:["ltr","rtl"]};for(var o in n)!function(r,e){for(var t,i=0;t=e[i++];)!function(a){u[r.replace("float","")+a]=function(n){var o=new u.Button({className:"edui-for-"+r.replace("float","")+a,title:n.options.labelMap[r.replace("float","")+a]||n.getLang("labelMap."+r.replace("float","")+a)||"",theme:n.options.theme,onclick:function(){n.execCommand(r,a)}});return u.buttons[r]=o,n.addListener("selectionchange",function(e,t,i){o.setDisabled(-1==n.queryCommandState(r)),o.setChecked(n.queryCommandValue(r)==a&&!i)}),o}}(t)}(o,n[o]);var a;for(i=0;a=["backcolor","forecolor"][i++];)u[a]=function(n){return function(i){var e=new u.ColorButton({className:"edui-for-"+n,color:"default",title:i.options.labelMap[n]||i.getLang("labelMap."+n)||"",editor:i,onpickcolor:function(e,t){i.execCommand(n,t)},onpicknocolor:function(){i.execCommand(n,"default"),this.setColor("transparent"),this.color="default"},onbuttonclick:function(){i.execCommand(n,this.color)}});return u.buttons[n]=e,i.addListener("selectionchange",function(){e.setDisabled(-1==i.queryCommandState(n))}),e}}(a);var r={noOk:["searchreplace","help","spechars","webapp","preview"],ok:["attachment","anchor","link","insertimage","map","gmap","insertframe","wordimage","insertvideo","insertframe","edittip","edittable","edittd","scrawl","template","music","background","charts"]};for(var o in r)!function(r,e){for(var t,i=0;t=e[i++];)browser.opera&&"searchreplace"===t||function(a){u[a]=function(t,e,i){var n;e=e||(t.options.iframeUrlMap||{})[a]||s[a],i=t.options.labelMap[a]||t.getLang("labelMap."+a)||"",e&&(n=new u.Dialog(c.extend({iframeUrl:t.ui.mapUrl(e),editor:t,className:"edui-for-"+a,title:i,holdScroll:"insertimage"===a,fullscreen:/charts|preview/.test(a),closeDialog:t.getLang("closeDialog")},"ok"==r?{buttons:[{className:"edui-okbutton",label:t.getLang("ok"),editor:t,onclick:function(){n.close(!0)}},{className:"edui-cancelbutton",label:t.getLang("cancel"),editor:t,onclick:function(){n.close(!1)}}]}:{})),t.ui._dialogs[a+"Dialog"]=n);var o=new u.Button({className:"edui-for-"+a,title:i,onclick:function(){if(n)switch(a){case"wordimage":var e=t.execCommand("wordimage");e&&e.length&&(n.render(),n.open());break;case"scrawl":-1!=t.queryCommandState("scrawl")&&(n.render(),n.open());break;default:n.render(),n.open()}},theme:t.options.theme,disabled:"scrawl"==a&&-1==t.queryCommandState("scrawl")||"charts"==a});return u.buttons[a]=o,t.addListener("selectionchange",function(){if(!(a in{edittable:1})){var e=t.queryCommandState(a);o.getDom()&&(o.setDisabled(-1==e),o.setChecked(e))}}),o}}(t.toLowerCase())}(o,r[o]);u.snapscreen=function(e,t,i){i=e.options.labelMap.snapscreen||e.getLang("labelMap.snapscreen")||"";var n=new u.Button({className:"edui-for-snapscreen",title:i,onclick:function(){e.execCommand("snapscreen")},theme:e.options.theme});if(u.buttons.snapscreen=n,t=t||(e.options.iframeUrlMap||{}).snapscreen||s.snapscreen){var o=new u.Dialog({iframeUrl:e.ui.mapUrl(t),editor:e,className:"edui-for-snapscreen",title:i,buttons:[{className:"edui-okbutton",label:e.getLang("ok"),editor:e,onclick:function(){o.close(!0)}},{className:"edui-cancelbutton",label:e.getLang("cancel"),editor:e,onclick:function(){o.close(!1)}}]});o.render(),e.ui._dialogs.snapscreenDialog=o}return e.addListener("selectionchange",function(){n.setDisabled(-1==e.queryCommandState("snapscreen"))}),n},u.insertcode=function(o,e,a){e=o.options.insertcode||[],a=o.options.labelMap.insertcode||o.getLang("labelMap.insertcode")||"";var i=[];c.each(e,function(e,t){i.push({label:e,value:t,theme:o.options.theme,renderLabelHtml:function(){return'<div class="edui-label %%-label" >'+(this.label||"")+"</div>"}})});var r=new u.Combox({editor:o,items:i,onselect:function(e,t){o.execCommand("insertcode",this.items[t].value)},onbuttonclick:function(){this.showPopup()},title:a,initValue:a,className:"edui-for-insertcode",indexByValue:function(e){if(e)for(var t,i=0;t=this.items[i];i++)if(-1!=t.value.indexOf(e))return i;return-1}});return u.buttons.insertcode=r,o.addListener("selectionchange",function(e,t,i){if(!i)if(-1==o.queryCommandState("insertcode"))r.setDisabled(!0);else{r.setDisabled(!1);var n=o.queryCommandValue("insertcode");if(!n)return void r.setValue(a);n&&(n=n.replace(/['"]/g,"").split(",")[0]),r.setValue(n)}}),r},u.fontfamily=function(o,e,t){if(e=o.options.fontfamily||[],t=o.options.labelMap.fontfamily||o.getLang("labelMap.fontfamily")||"",e.length){for(var i,n=0,a=[];i=e[n];n++){var r=o.getLang("fontfamily")[i.name]||"";l=i.label||r,d=i.val,a.push({label:l,value:d,theme:o.options.theme,renderLabelHtml:function(){return'<div class="edui-label %%-label" style="font-family:'+c.unhtml(this.value)+'">'+(this.label||"")+"</div>"}})}var s=new u.Combox({editor:o,items:a,onselect:function(e,t){o.execCommand("FontFamily",this.items[t].value)},onbuttonclick:function(){this.showPopup()},title:t,initValue:t,className:"edui-for-fontfamily",indexByValue:function(e){if(e)for(var t,i=0;t=this.items[i];i++)if(-1!=t.value.indexOf(e))return i;return-1}});return u.buttons.fontfamily=s,o.addListener("selectionchange",function(e,t,i){if(!i)if(-1==o.queryCommandState("FontFamily"))s.setDisabled(!0);else{s.setDisabled(!1);var n=o.queryCommandValue("FontFamily");n&&(n=n.replace(/['"]/g,"").split(",")[0]),s.setValue(n)}}),s}var l,d},u.fontsize=function(n,e,t){if(t=n.options.labelMap.fontsize||n.getLang("labelMap.fontsize")||"",(e=e||n.options.fontsize||[]).length){for(var i=[],o=0;o<e.length;o++){var a=e[o]+"px";i.push({label:a,value:a,theme:n.options.theme,renderLabelHtml:function(){return'<div class="edui-label %%-label" style="line-height:1;font-size:'+this.value+'">'+(this.label||"")+"</div>"}})}var r=new u.Combox({editor:n,items:i,title:t,initValue:t,onselect:function(e,t){n.execCommand("FontSize",this.items[t].value)},onbuttonclick:function(){this.showPopup()},className:"edui-for-fontsize"});return u.buttons.fontsize=r,n.addListener("selectionchange",function(e,t,i){i||(-1==n.queryCommandState("FontSize")?r.setDisabled(!0):(r.setDisabled(!1),r.setValue(n.queryCommandValue("FontSize"))))}),r}},u.paragraph=function(o,e,t){if(t=o.options.labelMap.paragraph||o.getLang("labelMap.paragraph")||"",e=o.options.paragraph||[],!c.isEmptyObject(e)){var i=[];for(var n in e)i.push({value:n,label:e[n]||o.getLang("paragraph")[n],theme:o.options.theme,renderLabelHtml:function(){return'<div class="edui-label %%-label"><span class="edui-for-'+this.value+'">'+(this.label||"")+"</span></div>"}});var a=new u.Combox({editor:o,items:i,title:t,initValue:t,className:"edui-for-paragraph",onselect:function(e,t){o.execCommand("Paragraph",this.items[t].value)},onbuttonclick:function(){this.showPopup()}});return u.buttons.paragraph=a,o.addListener("selectionchange",function(e,t,i){if(!i)if(-1==o.queryCommandState("Paragraph"))a.setDisabled(!0);else{a.setDisabled(!1);var n=o.queryCommandValue("Paragraph");-1!=a.indexByValue(n)?a.setValue(n):a.setValue(a.initValue)}}),a}},u.customstyle=function(o){var e=o.options.customstyle||[],t=o.options.labelMap.customstyle||o.getLang("labelMap.customstyle")||"";if(e.length){for(var i,n=o.getLang("customstyle"),a=0,r=[];i=e[a++];)!function(e){var t={};t.label=e.label?e.label:n[e.name],t.style=e.style,t.className=e.className,t.tag=e.tag,r.push({label:t.label,value:t,theme:o.options.theme,renderLabelHtml:function(){return'<div class="edui-label %%-label"><'+t.tag+" "+(t.className?' class="'+t.className+'"':"")+(t.style?' style="'+t.style+'"':"")+">"+t.label+"</"+t.tag+"></div>"}})}(i);var s=new u.Combox({editor:o,items:r,title:t,initValue:t,className:"edui-for-customstyle",onselect:function(e,t){o.execCommand("customstyle",this.items[t].value)},onbuttonclick:function(){this.showPopup()},indexByValue:function(e){for(var t,i=0;t=this.items[i++];)if(t.label==e)return i-1;return-1}});return u.buttons.customstyle=s,o.addListener("selectionchange",function(e,t,i){if(!i)if(-1==o.queryCommandState("customstyle"))s.setDisabled(!0);else{s.setDisabled(!1);var n=o.queryCommandValue("customstyle");-1!=s.indexByValue(n)?s.setValue(n):s.setValue(s.initValue)}}),s}},u.inserttable=function(n,e,t){t=n.options.labelMap.inserttable||n.getLang("labelMap.inserttable")||"";var i=new u.TableButton({editor:n,title:t,className:"edui-for-inserttable",onpicktable:function(e,t,i){n.execCommand("InsertTable",{numRows:i,numCols:t,border:1})},onbuttonclick:function(){this.showPopup()}});return u.buttons.inserttable=i,n.addListener("selectionchange",function(){i.setDisabled(-1==n.queryCommandState("inserttable"))}),i},u.lineheight=function(i){var e=i.options.lineheight||[];if(e.length){for(var t,n=0,o=[];t=e[n++];)o.push({label:t,value:t,theme:i.options.theme,onclick:function(){i.execCommand("lineheight",this.value)}});var a=new u.MenuButton({editor:i,className:"edui-for-lineheight",title:i.options.labelMap.lineheight||i.getLang("labelMap.lineheight")||"",items:o,onbuttonclick:function(){var e=i.queryCommandValue("LineHeight")||this.value;i.execCommand("LineHeight",e)}});return u.buttons.lineheight=a,i.addListener("selectionchange",function(){var e=i.queryCommandState("LineHeight");if(-1==e)a.setDisabled(!0);else{a.setDisabled(!1);var t=i.queryCommandValue("LineHeight");t&&a.setValue((t+"").replace(/cm/,"")),a.setChecked(e)}}),a}};for(var l,d=["top","bottom"],h=0;l=d[h++];)!function(r){u["rowspacing"+r]=function(i){var e=i.options["rowspacing"+r]||[];if(!e.length)return null;for(var t,n=0,o=[];t=e[n++];)o.push({label:t,value:t,theme:i.options.theme,onclick:function(){i.execCommand("rowspacing",this.value,r)}});var a=new u.MenuButton({editor:i,className:"edui-for-rowspacing"+r,title:i.options.labelMap["rowspacing"+r]||i.getLang("labelMap.rowspacing"+r)||"",items:o,onbuttonclick:function(){var e=i.queryCommandValue("rowspacing",r)||this.value;i.execCommand("rowspacing",e,r)}});return u.buttons[r]=a,i.addListener("selectionchange",function(){var e=i.queryCommandState("rowspacing",r);if(-1==e)a.setDisabled(!0);else{a.setDisabled(!1);var t=i.queryCommandValue("rowspacing",r);t&&a.setValue((t+"").replace(/%/,"")),a.setChecked(e)}}),a}}(l);for(var f,p=["insertorderedlist","insertunorderedlist"],m=0;f=p[m++];)!function(r){u[r]=function(i){var e=i.options[r],t=function(){i.execCommand(r,this.value)},n=[];for(var o in e)n.push({label:e[o]||i.getLang()[r][o]||"",value:o,theme:i.options.theme,onclick:t});var a=new u.MenuButton({editor:i,className:"edui-for-"+r,title:i.getLang("labelMap."+r)||"",items:n,onbuttonclick:function(){var e=i.queryCommandValue(r)||this.value;i.execCommand(r,e)}});return u.buttons[r]=a,i.addListener("selectionchange",function(){var e=i.queryCommandState(r);if(-1==e)a.setDisabled(!0);else{a.setDisabled(!1);var t=i.queryCommandValue(r);a.setValue(t),a.setChecked(e)}}),a}}(f);u.fullscreen=function(t,e){e=t.options.labelMap.fullscreen||t.getLang("labelMap.fullscreen")||"";var i=new u.Button({className:"edui-for-fullscreen",title:e,theme:t.options.theme,onclick:function(){t.ui&&t.ui.setFullScreen(!t.ui.isFullScreen()),this.setChecked(t.ui.isFullScreen())}});return u.buttons.fullscreen=i,t.addListener("selectionchange",function(){var e=t.queryCommandState("fullscreen");i.setDisabled(-1==e),i.setChecked(t.ui.isFullScreen())}),i},u.emotion=function(e,t){var i="emotion",n=new u.MultiMenuPop({title:e.options.labelMap[i]||e.getLang("labelMap."+i)||"",editor:e,className:"edui-for-"+i,iframeUrl:e.ui.mapUrl(t||(e.options.iframeUrlMap||{})[i]||s[i])});return u.buttons[i]=n,e.addListener("selectionchange",function(){n.setDisabled(-1==e.queryCommandState(i))}),n},u.autotypeset=function(e){var t=new u.AutoTypeSetButton({editor:e,title:e.options.labelMap.autotypeset||e.getLang("labelMap.autotypeset")||"",className:"edui-for-autotypeset",onbuttonclick:function(){e.execCommand("autotypeset")}});return u.buttons.autotypeset=t,e.addListener("selectionchange",function(){t.setDisabled(-1==e.queryCommandState("autotypeset"))}),t},u.simpleupload=function(o){var a="simpleupload",r=new u.Button({className:"edui-for-"+a,title:o.options.labelMap[a]||o.getLang("labelMap."+a)||"",onclick:function(){},theme:o.options.theme,showText:!1});return u.buttons[a]=r,o.addListener("ready",function(){var e=r.getDom("body").children[0];o.fireEvent("simpleuploadbtnready",e)}),o.addListener("selectionchange",function(e,t,i){var n=o.queryCommandState(a);-1==n?(r.setDisabled(!0),r.setChecked(!1)):i||(r.setDisabled(!1),r.setChecked(n))}),r}}(),function(){function u(e){this.initOptions(e),this.initEditorUI()}var h=baidu.editor.utils,t=baidu.editor.ui.uiUtils,a=baidu.editor.ui.UIBase,w=baidu.editor.dom.domUtils,r=[];u.prototype={uiName:"editor",initEditorUI:function(){function t(e,t){e.setOpt({wordCount:!0,maximumWords:1e4,wordCountMsg:e.options.wordCountMsg||e.getLang("wordCountMsg"),wordOverFlowMsg:e.options.wordOverFlowMsg||e.getLang("wordOverFlowMsg")});var i=e.options,n=i.maximumWords,o=i.wordCountMsg,a=i.wordOverFlowMsg,r=t.getDom("wordcount");if(i.wordCount){var s=e.getContentLength(!0);n<s?(r.innerHTML=a,e.fireEvent("wordcountoverflow")):r.innerHTML=o.replace("{#leave}",n-s).replace("{#count}",s)}}(this.editor.ui=this)._dialogs={},this.initUIBase(),this._initToolbars();var c=this.editor,i=this;c.addListener("ready",function(){c.getDialog=function(e){return c.ui._dialogs[e+"Dialog"]},w.on(c.window,"scroll",function(e){baidu.editor.ui.Popup.postHide(e)}),c.ui._actualFrameWidth=c.options.initialFrameWidth,UE.browser.ie&&6===UE.browser.version&&c.container.ownerDocument.execCommand("BackgroundImageCache",!1,!0),c.options.elementPathEnabled&&(c.ui.getDom("elementpath").innerHTML='<div class="edui-editor-breadcrumb">'+c.getLang("elementPathTip")+":</div>"),c.options.wordCount&&(w.on(c.document,"click",function(){t(c,i),w.un(c.document,"click",arguments.callee)}),c.ui.getDom("wordcount").innerHTML=c.getLang("wordCountTip")),c.ui._scale(),c.options.scaleEnabled?(c.autoHeightEnabled&&c.disableAutoHeight(),i.enableScale()):i.disableScale(),c.options.elementPathEnabled||c.options.wordCount||c.options.scaleEnabled||(c.ui.getDom("elementpath").style.display="none",c.ui.getDom("wordcount").style.display="none",c.ui.getDom("scale").style.display="none"),c.selection.isFocus()&&c.fireEvent("selectionchange",!1,!0)}),c.addListener("mousedown",function(e,t){var i=t.target||t.srcElement;baidu.editor.ui.Popup.postHide(t,i),baidu.editor.ui.ShortCutMenu.postHide(t)}),c.addListener("delcells",function(){UE.ui.edittip&&new UE.ui.edittip(c),c.getDialog("edittip").open()});var n,e,o=!1;c.addListener("afterpaste",function(){c.queryCommandState("pasteplain")||(baidu.editor.ui.PastePicker&&(n=new baidu.editor.ui.Popup({content:new baidu.editor.ui.PastePicker({editor:c}),editor:c,className:"edui-wordpastepop"})).render(),o=!0)}),c.addListener("afterinserthtml",function(){clearTimeout(e),e=setTimeout(function(){if(n&&(o||c.ui._isTransfer)){if(n.isHidden()){var e=w.createElement(c.document,"span",{style:"line-height:0px;",innerHTML:"\ufeff"});c.selection.getRange().insertNode(e);var t=getDomNode(e,"firstChild","previousSibling");t&&n.showAnchor(3==t.nodeType?t.parentNode:t),w.remove(e)}else n.show();delete c.ui._isTransfer,o=!1}},200)}),c.addListener("contextmenu",function(e,t){baidu.editor.ui.Popup.postHide(t)}),c.addListener("keydown",function(e,t){n&&n.dispose(t);var i=t.keyCode||t.which;t.altKey&&90==i&&UE.ui.buttons.fullscreen.onclick()}),c.addListener("wordcount",function(e){t(this,i)}),c.addListener("selectionchange",function(){c.options.elementPathEnabled&&i[(-1==c.queryCommandState("elementpath")?"dis":"en")+"ableElementPath"](),c.options.scaleEnabled&&i[(-1==c.queryCommandState("scale")?"dis":"en")+"ableScale"]()});var u=new baidu.editor.ui.Popup({editor:c,content:"",className:"edui-bubble",_onEditButtonClick:function(){this.hide(),c.ui._dialogs.linkDialog.open()},_onImgEditButtonClick:function(e){this.hide(),c.ui._dialogs[e]&&c.ui._dialogs[e].open()},_onImgSetFloat:function(e){this.hide(),c.execCommand("imagefloat",e)},_setIframeAlign:function(e){var t=u.anchorEl,i=t.cloneNode(!0);switch(e){case-2:i.setAttribute("align","");break;case-1:i.setAttribute("align","left");break;case 1:i.setAttribute("align","right")}t.parentNode.insertBefore(i,t),w.remove(t),u.anchorEl=i,u.showAnchor(u.anchorEl)},_updateIframe:function(){var e=c._iframe=u.anchorEl;w.hasClass(e,"ueditor_baidumap")?(c.selection.getRange().selectNode(e).select(),c.ui._dialogs.mapDialog.open()):c.ui._dialogs.insertframeDialog.open(),u.hide()},_onRemoveButtonClick:function(e){c.execCommand(e),this.hide()},queryAutoHide:function(e){return e&&e.ownerDocument==c.document&&("img"==e.tagName.toLowerCase()||w.findParentByTagName(e,"a",!0))?e!==u.anchorEl:baidu.editor.ui.Popup.prototype.queryAutoHide.call(this,e)}});u.render(),c.options.imagePopup&&(c.addListener("mouseover",function(e,t){var i=(t=t||window.event).target||t.srcElement;if(c.ui._dialogs.insertframeDialog&&/iframe/gi.test(i.tagName)){var n=u.formatHtml("<nobr>"+c.getLang("property")+': <span onclick=$$._setIframeAlign(-2) class="edui-clickable">'+c.getLang("default")+'</span>&nbsp;&nbsp;<span onclick=$$._setIframeAlign(-1) class="edui-clickable">'+c.getLang("justifyleft")+'</span>&nbsp;&nbsp;<span onclick=$$._setIframeAlign(1) class="edui-clickable">'+c.getLang("justifyright")+'</span>&nbsp;&nbsp; <span onclick="$$._updateIframe( this);" class="edui-clickable">'+c.getLang("modify")+"</span></nobr>");n?(u.getDom("content").innerHTML=n,u.anchorEl=i,u.showAnchor(u.anchorEl)):u.hide()}}),c.addListener("selectionchange",function(e,t){if(t){var i="",n="",o=c.selection.getRange().getClosedNode(),a=c.ui._dialogs;if(o&&"IMG"==o.tagName){var r="insertimageDialog";if(-1==o.className.indexOf("edui-faked-video")&&-1==o.className.indexOf("edui-upload-video")||(r="insertvideoDialog"),-1!=o.className.indexOf("edui-faked-webapp")&&(r="webappDialog"),-1!=o.src.indexOf("http://api.map.baidu.com")&&(r="mapDialog"),-1!=o.className.indexOf("edui-faked-music")&&(r="musicDialog"),-1!=o.src.indexOf("http://maps.google.com/maps/api/staticmap")&&(r="gmapDialog"),o.getAttribute("anchorname")&&(r="anchorDialog",i=u.formatHtml("<nobr>"+c.getLang("property")+': <span onclick=$$._onImgEditButtonClick("anchorDialog") class="edui-clickable">'+c.getLang("modify")+"</span>&nbsp;&nbsp;<span onclick=$$._onRemoveButtonClick('anchor') class=\"edui-clickable\">"+c.getLang("delete")+"</span></nobr>")),o.getAttribute("word_img")&&(c.word_img=[o.getAttribute("word_img")],r="wordimageDialog"),(w.hasClass(o,"loadingclass")||w.hasClass(o,"loaderrorclass"))&&(r=""),!a[r])return;n="<nobr>"+c.getLang("property")+': <span onclick=$$._onImgSetFloat("none") class="edui-clickable">'+c.getLang("default")+'</span>&nbsp;&nbsp;<span onclick=$$._onImgSetFloat("left") class="edui-clickable">'+c.getLang("justifyleft")+'</span>&nbsp;&nbsp;<span onclick=$$._onImgSetFloat("right") class="edui-clickable">'+c.getLang("justifyright")+'</span>&nbsp;&nbsp;<span onclick=$$._onImgSetFloat("center") class="edui-clickable">'+c.getLang("justifycenter")+"</span>&nbsp;&nbsp;<span onclick=\"$$._onImgEditButtonClick('"+r+'\');" class="edui-clickable">'+c.getLang("modify")+"</span></nobr>",!i&&(i=u.formatHtml(n))}if(c.ui._dialogs.linkDialog){var s,l=c.queryCommandValue("link");if(l&&(s=l.getAttribute("_href")||l.getAttribute("href",2))){var d=s;30<s.length&&(d=s.substring(0,20)+"..."),i&&(i+='<div style="height:5px;"></div>'),i+=u.formatHtml("<nobr>"+c.getLang("anthorMsg")+': <a target="_blank" href="'+s+'" title="'+s+'" >'+d+'</a> <span class="edui-clickable" onclick="$$._onEditButtonClick();">'+c.getLang("modify")+'</span> <span class="edui-clickable" onclick="$$._onRemoveButtonClick(\'unlink\');"> '+c.getLang("clear")+"</span></nobr>"),u.showAnchor(l)}}i?(u.getDom("content").innerHTML=i,u.anchorEl=o||l,u.showAnchor(u.anchorEl)):u.hide()}}))},_initToolbars:function(){for(var e=this.editor,t=this.toolbars||[],i=[],n=[],o=0;o<t.length;o++){for(var a=t[o],r=new baidu.editor.ui.Toolbar({theme:e.options.theme}),s=0;s<a.length;s++){var l=a[s],d=null;if("string"==typeof l){"|"==(l=l.toLowerCase())&&(l="Separator"),"||"==l&&(l="Breakline");var c=baidu.editor.ui[l];if(c)if(h.isFunction(c))d=new baidu.editor.ui[l](e);else{if(c.id&&c.id!=e.key)continue;var u=c.execFn.call(e,e,l);if(u){if(void 0===c.index){r.add(u);continue}n.push({index:c.index,itemUI:u})}}if("fullscreen"==l){i&&i[0]?i[0].items.splice(0,0,d):d&&r.items.splice(0,0,d);continue}}else d=l;d&&d.id&&r.add(d)}i[o]=r}h.each(n,function(e){r.add(e.itemUI,e.index)}),this.toolbars=i},getHtmlTpl:function(){return'<div id="##" class="%%"><div id="##_toolbarbox" class="%%-toolbarbox">'+(this.toolbars.length?'<div id="##_toolbarboxouter" class="%%-toolbarboxouter"><div class="%%-toolbarboxinner">'+this.renderToolbarBoxHtml()+"</div></div>":"")+'<div id="##_toolbarmsg" class="%%-toolbarmsg" style="display:none;"><div id = "##_upload_dialog" class="%%-toolbarmsg-upload" onclick="$$.showWordImageDialog();">'+this.editor.getLang("clickToUpload")+'</div><div class="%%-toolbarmsg-close" onclick="$$.hideToolbarMsg();">x</div><div id="##_toolbarmsg_label" class="%%-toolbarmsg-label"></div><div style="height:0;overflow:hidden;clear:both;"></div></div><div id="##_message_holder" class="%%-messageholder"></div></div><div id="##_iframeholder" class="%%-iframeholder"></div><div id="##_bottombar" class="%%-bottomContainer"><table><tr><td id="##_elementpath" class="%%-bottombar"></td><td id="##_wordcount" class="%%-wordcount"></td><td id="##_scale" class="%%-scale"><div class="%%-icon"></div></td></tr></table></div><div id="##_scalelayer"></div></div>'},showWordImageDialog:function(){this._dialogs.wordimageDialog.open()},renderToolbarBoxHtml:function(){for(var e=[],t=0;t<this.toolbars.length;t++)e.push(this.toolbars[t].renderHtml());return e.join("")},setFullScreen:function(e){var t=this.editor,i=t.container.parentNode.parentNode;if(this._fullscreen!=e){if(this._fullscreen=e,this.editor.fireEvent("beforefullscreenchange",e),baidu.editor.browser.gecko)var n=t.selection.getRange().createBookmark();if(e){for(;"BODY"!=i.tagName;){var o=baidu.editor.dom.domUtils.getComputedStyle(i,"position");r.push(o),i.style.position="static",i=i.parentNode}this._bakHtmlOverflow=document.documentElement.style.overflow,this._bakBodyOverflow=document.body.style.overflow,this._bakAutoHeight=this.editor.autoHeightEnabled,this._bakScrollTop=Math.max(document.documentElement.scrollTop,document.body.scrollTop),this._bakEditorContaninerWidth=t.iframe.parentNode.offsetWidth,this._bakAutoHeight&&(t.autoHeightEnabled=!1,this.editor.disableAutoHeight()),document.documentElement.style.overflow="hidden",window.scrollTo(0,window.scrollY),this._bakCssText=this.getDom().style.cssText,this._bakCssText1=this.getDom("iframeholder").style.cssText,t.iframe.parentNode.style.width="",this._updateFullScreen()}else{for(;"BODY"!=i.tagName;)i.style.position=r.shift(),i=i.parentNode;this.getDom().style.cssText=this._bakCssText,this.getDom("iframeholder").style.cssText=this._bakCssText1,this._bakAutoHeight&&(t.autoHeightEnabled=!0,this.editor.enableAutoHeight()),document.documentElement.style.overflow=this._bakHtmlOverflow,document.body.style.overflow=this._bakBodyOverflow,t.iframe.parentNode.style.width=this._bakEditorContaninerWidth+"px",window.scrollTo(0,this._bakScrollTop)}if(browser.gecko&&"true"===t.body.contentEditable){var a=document.createElement("input");document.body.appendChild(a),t.body.contentEditable=!1,setTimeout(function(){a.focus(),setTimeout(function(){t.body.contentEditable=!0,t.fireEvent("fullscreenchanged",e),t.selection.getRange().moveToBookmark(n).select(!0),baidu.editor.dom.domUtils.remove(a),e&&window.scroll(0,0)},0)},0)}"true"===t.body.contentEditable&&(this.editor.fireEvent("fullscreenchanged",e),this.triggerLayout())}},_updateFullScreen:function(){if(this._fullscreen){var e=t.getViewportRect();if(this.getDom().style.cssText="border:0;position:absolute;left:0;top:"+(this.editor.options.topOffset||0)+"px;width:"+e.width+"px;height:"+e.height+"px;z-index:"+(1*this.getDom().style.zIndex+100),t.setViewportOffset(this.getDom(),{left:0,top:this.editor.options.topOffset||0}),this.editor.setHeight(e.height-this.getDom("toolbarbox").offsetHeight-this.getDom("bottombar").offsetHeight-(this.editor.options.topOffset||0),!0),browser.gecko)try{window.onresize()}catch(e){}}},_updateElementPath:function(){var e,t=this.getDom("elementpath");if(this.elementPathEnabled&&(e=this.editor.queryCommandValue("elementpath"))){for(var i,n=[],o=0;i=e[o];o++)n[o]=this.formatHtml('<span unselectable="on" onclick="$$.editor.execCommand(&quot;elementpath&quot;, &quot;'+o+'&quot;);">'+i+"</span>");t.innerHTML='<div class="edui-editor-breadcrumb" onmousedown="return false;">'+this.editor.getLang("elementPathTip")+": "+n.join(" &gt; ")+"</div>"}else t.style.display="none"},disableElementPath:function(){var e=this.getDom("elementpath");e.innerHTML="",e.style.display="none",this.elementPathEnabled=!1},enableElementPath:function(){this.getDom("elementpath").style.display="",this.elementPathEnabled=!0,this._updateElementPath()},_scale:function(){function e(){f=w.getXY(r),p||(p=a.options.minFrameHeight+l.offsetHeight+d.offsetHeight),u.style.cssText="position:absolute;left:0;display:;top:0;background-color:#41ABFF;opacity:0.4;filter: Alpha(opacity=40);width:"+r.offsetWidth+"px;height:"+r.offsetHeight+"px;z-index:"+(a.options.zIndex+1),w.on(o,"mousemove",t),w.on(s,"mouseup",i),w.on(o,"mouseup",i)}function t(e){n();var t=e||window.event;g=t.pageX||o.documentElement.scrollLeft+t.clientX,v=t.pageY||o.documentElement.scrollTop+t.clientY,y=g-f.x,b=v-f.y,m<=y&&(h=!0,u.style.width=y+"px"),p<=b&&(h=!0,u.style.height=b+"px")}function i(){h&&(h=!1,a.ui._actualFrameWidth=u.offsetWidth-2,r.style.width=a.ui._actualFrameWidth+"px",a.setHeight(u.offsetHeight-d.offsetHeight-l.offsetHeight-2,!0)),u&&(u.style.display="none"),n(),w.un(o,"mousemove",t),w.un(s,"mouseup",i),w.un(o,"mouseup",i)}function n(){browser.ie?o.selection.clear():window.getSelection().removeAllRanges()}var o=document,a=this.editor,r=a.container,s=a.document,l=this.getDom("toolbarbox"),d=this.getDom("bottombar"),c=this.getDom("scale"),u=this.getDom("scalelayer"),h=!1,f=null,p=0,m=a.options.minFrameWidth,g=0,v=0,y=0,b=0,x=this;this.editor.addListener("fullscreenchanged",function(e,t){if(t)x.disableScale();else if(x.editor.options.scaleEnabled){x.enableScale();var i=x.editor.document.createElement("span");x.editor.body.appendChild(i),x.editor.body.style.height=Math.max(w.getXY(i).y,x.editor.iframe.offsetHeight-20)+"px",w.remove(i)}}),this.enableScale=function(){1!=a.queryCommandState("source")&&(c.style.display="",this.scaleEnabled=!0,w.on(c,"mousedown",e))},this.disableScale=function(){c.style.display="none",this.scaleEnabled=!1,w.un(c,"mousedown",e)}},isFullScreen:function(){return this._fullscreen},postRender:function(){a.prototype.postRender.call(this);for(var e=0;e<this.toolbars.length;e++)this.toolbars[e].postRender();var t,i=this,n=baidu.editor.dom.domUtils,o=function(){clearTimeout(t),t=setTimeout(function(){i._updateFullScreen()})};n.on(window,"resize",o),i.addListener("destroy",function(){n.un(window,"resize",o),clearTimeout(t)})},showToolbarMsg:function(e,t){(this.getDom("toolbarmsg_label").innerHTML=e,this.getDom("toolbarmsg").style.display="",t)||(this.getDom("upload_dialog").style.display="none")},hideToolbarMsg:function(){this.getDom("toolbarmsg").style.display="none"},mapUrl:function(e){return e?e.replace("~/",this.editor.options.UEDITOR_HOME_URL||""):""},triggerLayout:function(){var e=this.getDom();"1"==e.style.zoom?e.style.zoom="100%":e.style.zoom="1"}},h.inherits(u,baidu.editor.ui.UIBase);var n={};UE.ui.Editor=function(e){var d=new UE.Editor(e);d.options.editor=d,h.loadFile(document,{href:d.options.themePath+d.options.theme+"/css/ueditor.css",tag:"link",type:"text/css",rel:"stylesheet"});var c=d.render;return d.render=function(l){l.constructor===String&&(d.key=l,n[l]=d),h.domReady(function(){function e(){if(d.setOpt({labelMap:d.options.labelMap||d.getLang("labelMap")}),new u(d.options),l&&(l.constructor===String&&(l=document.getElementById(l)),l&&l.getAttribute("name")&&(d.options.textarea=l.getAttribute("name")),l&&/script|textarea/gi.test(l.tagName))){var e=document.createElement("div");l.parentNode.insertBefore(e,l);var t=l.value||l.innerHTML;d.options.initialContent=/^[\t\r\n ]*$/.test(t)?d.options.initialContent:t.replace(/>[\n\r\t]+([ ]{4})+/g,">").replace(/[\n\r\t]+([ ]{4})+</g,"<").replace(/>[\n\r\t]+</g,"><"),l.className&&(e.className=l.className),l.style.cssText&&(e.style.cssText=l.style.cssText),/textarea/i.test(l.tagName)?(d.textarea=l,d.textarea.style.display="none"):l.parentNode.removeChild(l),l.id&&(e.id=l.id,w.removeAttributes(l,"id")),(l=e).innerHTML=""}w.addClass(l,"edui-"+d.options.theme),d.ui.render(l);var i=d.options;d.container=d.ui.getDom();for(var n=w.findParents(l,!0),o=[],a=0;s=n[a];a++)o[a]=s.style.display,s.style.display="block";if(i.initialFrameWidth)i.minFrameWidth=i.initialFrameWidth;else{i.minFrameWidth=i.initialFrameWidth=l.offsetWidth;var r=l.style.width;/%$/.test(r)&&(i.initialFrameWidth=r)}i.initialFrameHeight?i.minFrameHeight=i.initialFrameHeight:i.initialFrameHeight=i.minFrameHeight=l.offsetHeight;var s;for(a=0;s=n[a];a++)s.style.display=o[a];l.style.height&&(l.style.height=""),d.container.style.width=i.initialFrameWidth+(/%$/.test(i.initialFrameWidth)?"":"px"),d.container.style.zIndex=i.zIndex,c.call(d,d.ui.getDom("iframeholder")),d.fireEvent("afteruiready")}d.langIsReady?e():d.addListener("langReady",e)})},d},UE.getEditor=function(e,t){var i=n[e];return i||(i=n[e]=new UE.ui.Editor(t)).render(e),i},UE.delEditor=function(e){var t;(t=n[e])&&(t.key&&t.destroy(),delete n[e])},UE.registerUI=function(e,t,i,n){h.each(e.split(/\s+/),function(e){baidu.editor.ui[e]={id:n,execFn:t,index:i}})}}(),UE.registerUI("message",function(e){function o(){if(a&&l.ui){var e=l.ui.getDom("toolbarbox");e&&(a.style.top=e.offsetHeight+3+"px"),a.style.zIndex=Math.max(l.options.zIndex,l.iframe.style.zIndex)+1}}var a,r=baidu.editor.ui.Message,s=[],l=e;l.setOpt("enableMessageShow",!0),!1!==l.getOpt("enableMessageShow")&&(l.addListener("ready",function(){a=document.getElementById(l.ui.id+"_message_holder"),o(),setTimeout(function(){o()},500)}),l.addListener("showmessage",function(e,t){t=utils.isString(t)?{content:t}:t;var i=new r({timeout:t.timeout,type:t.type,content:t.content,keepshow:t.keepshow,editor:l}),n=t.id||"msg_"+(+new Date).toString(36);return i.render(a),(s[n]=i).reset(t),o(),n}),l.addListener("updatemessage",function(e,t,i){i=utils.isString(i)?{content:i}:i;var n=s[t];n.render(a),n&&n.reset(i)}),l.addListener("hidemessage",function(e,t){var i=s[t];i&&i.hide()}))}),UE.registerUI("autosave",function(e){var t=null,i=null;e.on("afterautosave",function(){clearTimeout(t),t=setTimeout(function(){i&&e.trigger("hidemessage",i),i=e.trigger("showmessage",{content:e.getLang("autosave.success"),timeout:2e3})},2e3)})})}(),function(){UE=window.UE||{};var i=!!window.ActiveXObject,s={removeLastbs:function(e){return e.replace(/\/$/,"")},extend:function(e,t){for(var i=arguments,n=!!this.isBoolean(i[i.length-1])&&i[i.length-1],o=this.isBoolean(i[i.length-1])?i.length-1:i.length,a=1;a<o;a++){var r=i[a];for(var s in r)n&&e.hasOwnProperty(s)||(e[s]=r[s])}return e},isIE:i,cssRule:i?function(e,t,i){var n,o,a;if((n=(i=i||document).indexList?i.indexList:i.indexList={})[e])a=i.styleSheets[n[e]];else{if(void 0===t)return"";a=i.createStyleSheet("",o=i.styleSheets.length),n[e]=o}return void 0===t?a.cssText:void(a.cssText=a.cssText+"\n"+(t||""))}:function(e,t,i){var n,o=(i=i||document).getElementsByTagName("head")[0];if(!(n=i.getElementById(e))){if(void 0===t)return"";(n=i.createElement("style")).id=e,o.appendChild(n)}return void 0===t?n.innerHTML:void(""!==t?n.innerHTML=n.innerHTML+"\n"+t:o.removeChild(n))},domReady:function(e){var t=window.document;"complete"===t.readyState?e():i?(function(){if(!t.isReady){try{t.documentElement.doScroll("left")}catch(e){return setTimeout(arguments.callee,0)}e()}}(),window.attachEvent("onload",function(){e()})):(t.addEventListener("DOMContentLoaded",function(){t.removeEventListener("DOMContentLoaded",arguments.callee,!1),e()},!1),window.addEventListener("load",function(){e()},!1))},each:function(e,t,i){if(null!=e)if(e.length===+e.length){for(var n=0,o=e.length;n<o;n++)if(!1===t.call(i,e[n],n,e))return!1}else for(var a in e)if(e.hasOwnProperty(a)&&!1===t.call(i,e[a],a,e))return!1},inArray:function(e,i){var n=-1;return this.each(e,function(e,t){if(e===i)return n=t,!1}),n},pushItem:function(e,t){-1==this.inArray(e,t)&&e.push(t)},trim:function(e){return e.replace(/(^[ \t\n\r]+)|([ \t\n\r]+$)/g,"")},indexOf:function(e,i,n){var o=-1;return n=this.isNumber(n)?n:0,this.each(e,function(e,t){if(n<=t&&e===i)return o=t,!1}),o},hasClass:function(e,t){t=t.replace(/(^[ ]+)|([ ]+$)/g,"").replace(/[ ]{2,}/g," ").split(" ");for(var i,n=0,o=e.className;i=t[n++];)if(!new RegExp("\\b"+i+"\\b","i").test(o))return!1;return n-1==t.length},addClass:function(e,t){if(e){t=this.trim(t).replace(/[ ]{2,}/g," ").split(" ");for(var i,n=0,o=e.className;i=t[n++];)new RegExp("\\b"+i+"\\b").test(o)||(o+=" "+i);e.className=s.trim(o)}},removeClass:function(e,t){t=this.isArray(t)?t:this.trim(t).replace(/[ ]{2,}/g," ").split(" ");for(var i,n=0,o=e.className;i=t[n++];)o=o.replace(new RegExp("\\b"+i+"\\b"),"");o=this.trim(o).replace(/[ ]{2,}/g," "),!(e.className=o)&&e.removeAttribute("className")},on:function(e,t,i){var n=this.isArray(t)?t:t.split(/\s+/),o=n.length;if(o)for(;o--;)if(t=n[o],e.addEventListener)e.addEventListener(t,i,!1);else{i._d||(i._d={els:[]});var a=t+i.toString(),r=s.indexOf(i._d.els,e);i._d[a]&&-1!=r||(-1==r&&i._d.els.push(e),i._d[a]||(i._d[a]=function(e){return i.call(e.srcElement,e||window.event)}),e.attachEvent("on"+t,i._d[a]))}e=null},off:function(e,t,i){var n=this.isArray(t)?t:t.split(/\s+/),o=n.length;if(o)for(;o--;)if(t=n[o],e.removeEventListener)e.removeEventListener(t,i,!1);else{var a=t+i.toString();try{e.detachEvent("on"+t,i._d?i._d[a]:i)}catch(e){}if(i._d&&i._d[a]){var r=s.indexOf(i._d.els,e);-1!=r&&i._d.els.splice(r,1),0==i._d.els.length&&delete i._d[a]}}},loadFile:function(){function s(e,t){try{for(var i,n=0;i=l[n++];)if(i.doc===e&&i.url==(t.src||t.href))return i}catch(e){return null}}var l=[];return function(t,i,e){var n=s(t,i);if(n)n.ready?e&&e():n.funs.push(e);else if(l.push({doc:t,url:i.src||i.href,funs:[e]}),t.body){if(!i.id||!t.getElementById(i.id)){var o=t.createElement(i.tag);for(var a in delete i.tag,i)o.setAttribute(a,i[a]);o.onload=o.onreadystatechange=function(){if(!this.readyState||/loaded|complete/.test(this.readyState)){if(0<(n=s(t,i)).funs.length){n.ready=1;for(var e;e=n.funs.pop();)e()}o.onload=o.onreadystatechange=null}},o.onerror=function(){throw Error("The load "+(i.href||i.src)+" fails,check the url")},t.getElementsByTagName("head")[0].appendChild(o)}}else{var r=[];for(var a in i)"tag"!=a&&r.push(a+'="'+i[a]+'"');t.write("<"+i.tag+" "+r.join(" ")+" ></"+i.tag+">")}}}()};s.each(["String","Function","Array","Number","RegExp","Object","Boolean"],function(t){s["is"+t]=function(e){return Object.prototype.toString.apply(e)=="[object "+t+"]"}});var n={};UE.parse={register:function(e,t){n[e]=t},load:function(t){s.each(n,function(e){e.call(t,s)})}},uParse=function(i,n){s.domReady(function(){if(document.querySelectorAll)t=document.querySelectorAll(i);else if(/^#/.test(i))t=[document.getElementById(i.replace(/^#/,""))];else if(/^\./.test(i)){var t=[];s.each(document.getElementsByTagName("*"),function(e){e.className&&new RegExp("\\b"+i.replace(/^\./,"")+"\\b","i").test(e.className)&&t.push(e)})}else t=document.getElementsByTagName(i);s.each(t,function(e){UE.parse.load(s.extend({root:e,selector:i},n))})})}}(),UE.parse.register("insertcode",function(e){var t=this.root.getElementsByTagName("pre");if(t.length)if("undefined"==typeof XRegExp){var i,n;n=void 0!==this.rootPath?(i=e.removeLastbs(this.rootPath)+"/third-party/SyntaxHighlighter/shCore.js",e.removeLastbs(this.rootPath)+"/third-party/SyntaxHighlighter/shCoreDefault.css"):(i=this.highlightJsUrl,this.highlightCssUrl),e.loadFile(document,{id:"syntaxhighlighter_css",tag:"link",rel:"stylesheet",type:"text/css",href:n}),e.loadFile(document,{id:"syntaxhighlighter_js",src:i,tag:"script",type:"text/javascript",defer:"defer"},function(){e.each(t,function(e){e&&/brush/i.test(e.className)&&SyntaxHighlighter.highlight(e)})})}else e.each(t,function(e){e&&/brush/i.test(e.className)&&SyntaxHighlighter.highlight(e)})}),UE.parse.register("table",function(h){function r(e,t){var i,n=e;for(t=h.isArray(t)?t:[t];n;){for(i=0;i<t.length;i++)if(n.tagName==t[i].toUpperCase())return n;n=n.parentNode}return null}var s=this,i=this.root;if((t=i.getElementsByTagName("table")).length){var e=this.selector;h.cssRule("table",e+" table.noBorderTable td,"+e+" table.noBorderTable th,"+e+" table.noBorderTable caption{border:1px dashed #ddd !important}"+e+" table.sortEnabled tr.firstRow th,"+e+" table.sortEnabled tr.firstRow td{padding-right:20px; background-repeat: no-repeat;background-position: center right; background-image:url("+this.rootPath+"themes/default/images/sortable.png);}"+e+" table.sortEnabled tr.firstRow th:hover,"+e+" table.sortEnabled tr.firstRow td:hover{background-color: #EEE;}"+e+" table{margin-bottom:10px;border-collapse:collapse;display:table;}"+e+" td,"+e+" th{padding: 5px 10px;border: 1px solid #DDD;}"+e+" caption{border:1px dashed #DDD;border-bottom:0;padding:3px;text-align:center;}"+e+" th{border-top:1px solid #BBB;background:#F7F7F7;}"+e+" table tr.firstRow th{border-top:2px solid #BBB;background:#F7F7F7;}"+e+" tr.ue-table-interlace-color-single td{ background: #fcfcfc; }"+e+" tr.ue-table-interlace-color-double td{ background: #f7faff; }"+e+" td p{margin:0;padding:0;width:auto;height:auto;}",document),h.each("td th caption".split(" "),function(e){var t=i.getElementsByTagName(e);t.length&&h.each(t,function(e){e.firstChild||(e.innerHTML="&nbsp;")})});var t=i.getElementsByTagName("table");h.each(t,function(e){/\bsortEnabled\b/.test(e.className)&&h.on(e,"click",function(e){var t=e.target||e.srcElement,i=r(t,["td","th"]),n=r(t,"table"),o=h.indexOf(n.rows[0].cells,i),a=n.getAttribute("data-sort-type");-1!=o&&(function(e,i,n){for(var t=e.rows,o=[],a="TH"===t[0].cells[0].tagName,r=0,s=t.length;r<s;r++)o[r]=t[r];var l={reversecurrent:function(e,t){return 1},orderbyasc:function(e,t){var i=e.innerText||e.textContent,n=t.innerText||t.textContent;return i.localeCompare(n)},reversebyasc:function(e,t){var i=e.innerHTML;return t.innerHTML.localeCompare(i)},orderbynum:function(e,t){var i=e[h.isIE?"innerText":"textContent"].match(/\d+/),n=t[h.isIE?"innerText":"textContent"].match(/\d+/);return i&&(i=+i[0]),n&&(n=+n[0]),(i||0)-(n||0)},reversebynum:function(e,t){var i=e[h.isIE?"innerText":"textContent"].match(/\d+/),n=t[h.isIE?"innerText":"textContent"].match(/\d+/);return i&&(i=+i[0]),n&&(n=+n[0]),(n||0)-(i||0)}};e.setAttribute("data-sort-type",n&&"string"==typeof n&&l[n]?n:""),a&&o.splice(0,1),o=function(e,t){t=t||function(e,t){return e.localeCompare(t)};for(var i=0,n=e.length;i<n;i++)for(var o=i,a=e.length;o<a;o++)if(0<t(e[i],e[o])){var r=e[i];e[i]=e[o],e[o]=r}return e}(o,function(e,t){return n&&"function"==typeof n?n.call(this,e.cells[i],t.cells[i]):n&&"number"==typeof n?1:n&&"string"==typeof n&&l[n]?l[n].call(this,e.cells[i],t.cells[i]):l.orderbyasc.call(this,e.cells[i],t.cells[i])});var d=e.ownerDocument.createDocumentFragment(),c=0;for(s=o.length;c<s;c++)d.appendChild(o[c]);var u=e.getElementsByTagName("tbody")[0];u.appendChild(d)}(n,o,s.tableSortCompareFn||a),function(e){if(!h.hasClass(e.rows[0],"firstRow")){for(var t=1;t<e.rows.length;t++)h.removeClass(e.rows[t],"firstRow");h.addClass(e.rows[0],"firstRow")}}(n))})})}}),UE.parse.register("charts",function(e){function a(e){for(var t,i=e.getAttribute("data-chart"),n={},o=[],a=0;t=e.rows[a];a++){for(var r,s=[],l=0;r=t.cells[l];l++){var d=r.innerText||r.textContent||"";s.push("TH"==r.tagName?d:0|d)}o.push(s)}var c;for(i=i.split(";"),a=0;c=i[a];a++)n[(c=c.split(":"))[0]]=c[1];return{table:e,meta:n,data:o}}function t(){window.Highcharts?i():e.loadFile(document,{src:n+"/third-party/highcharts/highcharts.js",tag:"script",type:"text/javascript",defer:"defer"},function(){i()})}function i(){e.loadFile(document,{src:n+"/dialogs/charts/chart.config.js",tag:"script",type:"text/javascript",defer:"defer"},function(){!function(){for(var e=null,t=null,i=0,n=c.length;i<n;i++)e=c[i],t=d(e),s=e.table,l=void 0,(l=document.createElement("div")).className="edui-chart-container",s.parentNode.replaceChild(l,s),o=l,a=typeConfig[e.meta.chartType],r=t,$(o).highcharts($.extend({},a,{credits:{enabled:!1},exporting:{enabled:!1},title:{text:r.title,x:-20},subtitle:{text:r.subTitle,x:-20},xAxis:{title:{text:r.xTitle},categories:r.categories},yAxis:{title:{text:r.yTitle},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{enabled:!0,valueSuffix:r.suffix},legend:{layout:"vertical",align:"right",verticalAlign:"middle",borderWidth:1},series:r.series}));var o,a,r,s,l}()})}function d(e){var t=[],i=[],n=[],o=e.data,a=e.meta;if("1"!=a.dataFormat){for(var r=0,s=o.length;r<s;r++)for(var l=0,d=o[r].length;l<d;l++)n[l]||(n[l]=[]),n[l][r]=o[r][l];o=n}if(n={},a.chartType!=typeConfig.length-1){for(i=o[0].slice(1),r=1;c=o[r];r++)t.push({name:c[0],data:c.slice(1)});n.series=t,n.categories=i,n.title=a.title,n.subTitle=a.subTitle,n.xTitle=a.xTitle,n.yTitle=a.yTitle,n.suffix=a.suffix}else{var c=[];for(r=1,s=o[0].length;r<s;r++)c.push([o[0][r],0|o[1][r]]);t[0]={type:"pie",name:a.tip,data:c},n.series=t,n.title=a.title,n.suffix=a.suffix}return n}e.cssRule("chartsContainerHeight",".edui-chart-container { height:"+(this.chartContainerHeight||300)+"px}");var n=this.rootPath,o=this.root,c=null;n&&(c=o?function(e){for(var t,i=[],n=e.getElementsByTagName("table"),o=0;t=n[o];o++)null!==t.getAttribute("data-chart")&&i.push(a(t));return i.length?i:null}(o):null)&&(window.jQuery?t():e.loadFile(document,{src:n+"/third-party/jquery-1.10.2.min.js",tag:"script",type:"text/javascript",defer:"defer"},function(){t()}))}),UE.parse.register("background",function(e){for(var t,i,n=this.root.getElementsByTagName("p"),o=0;i=n[o++];)(t=i.getAttribute("data-background"))&&i.parentNode.removeChild(i);t&&e.cssRule("ueditor_background",this.selector+"{"+t+"}",document)}),UE.parse.register("list",function(o){function e(e){var n=this;o.each(e,function(e){if(e.className&&/custom_/i.test(e.className)){var t=e.className.match(/custom_(\w+)/)[1];if("dash"==t||"dot"==t)o.pushItem(a,s+" li.list-"+r[t]+"{background-image:url("+n.liiconpath+r[t]+".gif)}"),o.pushItem(a,s+" ul.custom_"+t+"{list-style:none;} "+s+" ul.custom_"+t+" li{background-position:0 3px;background-repeat:no-repeat}");else{var i=1;o.each(e.childNodes,function(e){"LI"==e.tagName&&(o.pushItem(a,s+" li.list-"+r[t]+i+"{background-image:url("+n.liiconpath+"list-"+r[t]+i+".gif)}"),i++)}),o.pushItem(a,s+" ol.custom_"+t+"{list-style:none;}"+s+" ol.custom_"+t+" li{background-position:0 3px;background-repeat:no-repeat}")}switch(t){case"cn":o.pushItem(a,s+" li.list-"+t+"-paddingleft-1{padding-left:25px}"),o.pushItem(a,s+" li.list-"+t+"-paddingleft-2{padding-left:40px}"),o.pushItem(a,s+" li.list-"+t+"-paddingleft-3{padding-left:55px}");break;case"cn1":o.pushItem(a,s+" li.list-"+t+"-paddingleft-1{padding-left:30px}"),o.pushItem(a,s+" li.list-"+t+"-paddingleft-2{padding-left:40px}"),o.pushItem(a,s+" li.list-"+t+"-paddingleft-3{padding-left:55px}");break;case"cn2":o.pushItem(a,s+" li.list-"+t+"-paddingleft-1{padding-left:40px}"),o.pushItem(a,s+" li.list-"+t+"-paddingleft-2{padding-left:55px}"),o.pushItem(a,s+" li.list-"+t+"-paddingleft-3{padding-left:68px}");break;case"num":case"num1":o.pushItem(a,s+" li.list-"+t+"-paddingleft-1{padding-left:25px}");break;case"num2":o.pushItem(a,s+" li.list-"+t+"-paddingleft-1{padding-left:35px}"),o.pushItem(a,s+" li.list-"+t+"-paddingleft-2{padding-left:40px}");break;case"dash":o.pushItem(a,s+" li.list-"+t+"-paddingleft{padding-left:35px}");break;case"dot":o.pushItem(a,s+" li.list-"+t+"-paddingleft{padding-left:20px}")}}})}var a=[],r={cn:"cn-1-",cn1:"cn-2-",cn2:"cn-3-",num:"num-1-",num1:"num-2-",num2:"num-3-",dash:"dash",dot:"dot"};o.extend(this,{liiconpath:"http://bs.baidu.com/listicon/",listDefaultPaddingLeft:"20"});var t=this.root,i=t.getElementsByTagName("ol"),n=t.getElementsByTagName("ul"),s=this.selector;i.length&&e.call(this,i),n.length&&e.call(this,n),(i.length||n.length)&&(a.push(s+" .list-paddingleft-1{padding-left:0}"),a.push(s+" .list-paddingleft-2{padding-left:"+this.listDefaultPaddingLeft+"px}"),a.push(s+" .list-paddingleft-3{padding-left:"+2*this.listDefaultPaddingLeft+"px}"),o.cssRule("list",s+" ol,"+s+" ul{margin:0;padding:0;}\n"+s+" li{clear:both;}\n"+a.join("\n"),document))}),UE.parse.register("vedio",function(e){var t=this.root.getElementsByTagName("video"),i=this.root.getElementsByTagName("audio");if(document.createElement("video"),document.createElement("audio"),t.length||i.length){var n=e.removeLastbs(this.rootPath),o=n+"/third-party/video-js/video.js",a=n+"/third-party/video-js/video-js.min.css",r=n+"/third-party/video-js/video-js.swf";window.videojs?videojs.autoSetup():(e.loadFile(document,{id:"video_css",tag:"link",rel:"stylesheet",type:"text/css",href:a}),e.loadFile(document,{id:"video_js",src:o,tag:"script",type:"text/javascript"},function(){videojs.options.flash.swf=r,videojs.autoSetup()}))}});