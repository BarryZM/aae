!function(){var n,a;function i(t){if(t){var e,i,s=$G("tabhead").children;for(e=0;e<s.length;e++)(i=s[e].getAttribute("data-content-id"))==t?(domUtils.addClass(s[e],"focus"),domUtils.addClass($G(i),"focus")):(domUtils.removeClasses(s[e],"focus"),domUtils.removeClasses($G(i),"focus"));switch(t){case"upload":n=n||new o("queueList");break;case"online":a=a||new OnlineFile("fileList")}}}function o(t){this.$wrap=t.constructor==String?$("#"+t):$(t),this.init()}window.onload=function(){!function(){for(var t=$G("tabhead").children,e=0;e<t.length;e++)domUtils.on(t[e],"click",function(t){var e=t.target||t.srcElement;i(e.getAttribute("data-content-id"))});i("upload")}(),dialog.onok=function(){for(var t,e=[],i=$G("tabhead").children,s=0;s<i.length;s++)if(domUtils.hasClass(i[s],"focus")){t=i[s].getAttribute("data-content-id");break}switch(t){case"upload":e=n.getInsertList();break;case"online":e=a.getInsertList()}console.log(e),editor.execCommand("insertfile",e)}},o.prototype={init:function(){this.fileList=[],this.initUploader()},initUploader:function(){$("#insert-file-uploader").fileinput({theme:"fa",language:"zh",uploadUrl:"/api/system/file/batch-upload",layoutTemplates:{actions:'<div class="file-actions"><div class="file-footer-buttons">{download} {delete} {zoom} {other}</div></div>{drag}<div class="clearfix"></div>'},browseClass:"btn btn-primary btn-raised btn-sm float-right mr-2",showClose:!1,showCaption:!1,removeLabel:"清空",removeClass:"btn btn-danger btn-raised btn-sm float-right",uploadClass:"btn btn-success btn-raised btn-sm float-right mr-2"}),$("#insert-file-uploader").on("fileuploaded",this,function(t,e,i,s){var n=t.data;e.response&&n.fileList.push({fileId:e.response,fileName:e.filenames[0]})})},getInsertList:function(){for(var t=[],e=0;e<this.fileList.length;e++){var i=this.fileList[e];t.push({title:i.fileName,url:"/api/system/file/download/"+i.fileId})}return t}}}();